(this["webpackJsonpdeliveryPay-react"]=this["webpackJsonpdeliveryPay-react"]||[]).push([[0],{125:function(e,t,n){},126:function(e,t,n){"use strict";n.r(t);var c=n(64),s=n(65),a=n(72),i=n(71),l=n(1),r=n.n(l),o=n(21),j=n.n(o),d=(n(77),n(2)),u=n(0),h=Object(l.createContext)(),b=function(e){var t=e.children,n=Object(l.useState)(null),c=Object(d.a)(n,2),s=c[0],a=c[1],i=Object(l.useState)(!1),r=Object(d.a)(i,2),o=r[0],j=r[1];return Object(u.jsx)(h.Provider,{value:{user:s,setUser:a,isAuthenticated:o,setIsAuthenticated:j},children:t})},O=n(9),m=n(3),x=n(4),p=function(e){var t=e.containerClass,n=e.open,c=e.setOpen,s=e.children,a=e.className,i=e.onBackdropClick,r=e.backdropClass,j=e.style;return Object(l.useEffect)((function(){if(t){var e=document.querySelector("#portal");return e.classList.add(t),function(){return e.classList.remove(t)}}})),n?Object(o.createPortal)(Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{className:"modalBackdrop ".concat(r),onClick:function(){null===c||void 0===c||c(!1),null===i||void 0===i||i()}}),Object(u.jsx)("div",{style:Object(x.a)({},j),className:"modal ".concat(a||""),children:s})]}),document.querySelector("#portal")):null},f=function(e){var t=e.label,n=e.question,c=e.callback,s=function(){return j.a.render(Object(u.jsx)(u.Fragment,{}),document.querySelector("#confirm"))},a=function(){return s()};j.a.render(Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{className:"modalBackdrop"}),Object(u.jsxs)("div",{className:"modal confirm ",children:[Object(u.jsxs)("div",{className:"head",children:[Object(u.jsx)("p",{className:"modalName",children:t}),Object(u.jsx)("button",{onClick:a,children:Object(u.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"15.557",height:"15.557",viewBox:"0 0 15.557 15.557",children:[Object(u.jsx)("defs",{children:Object(u.jsx)("clipPath",{id:"clip-path",children:Object(u.jsx)("rect",{width:"15.557",height:"15.557",fill:"none"})})}),Object(u.jsx)("g",{id:"Cancel",clipPath:"url(#clip-path)",children:Object(u.jsx)("path",{id:"Union_3","data-name":"Union 3",d:"M7.778,9.192,1.414,15.557,0,14.142,6.364,7.778,0,1.414,1.414,0,7.778,6.364,14.142,0l1.415,1.414L9.192,7.778l6.364,6.364-1.415,1.415Z",fill:"#2699fb"})})]})})]}),Object(u.jsxs)("div",{className:"content",children:[Object(u.jsx)("p",{className:"question",children:n}),Object(u.jsxs)("div",{className:"actions",children:[Object(u.jsx)("button",{className:"yes",onClick:function(){c(),s()},children:"Confirm"}),Object(u.jsx)("button",{className:"no",onClick:a,children:"Decline"})]})]})]})]}),document.querySelector("#confirm"))};n(79);var g=function(e){e.history;var t=Object(l.useContext)(h),n=t.user,c=t.setUser;return Object(l.useEffect)((function(){fetch("/api/authUser").then((function(e){return e.json()})).then((function(e){e.user&&c(e.user)}))}),[]),Object(u.jsxs)("div",{className:"landingPage",children:[Object(u.jsx)("header",{children:Object(u.jsxs)("div",{className:"innerWrapper",children:[Object(u.jsxs)("div",{className:"links",children:[Object(u.jsx)(m.b,{to:"/",children:Object(u.jsx)("img",{className:"logo",src:"/logo_land.jpg",alt:"Delivery pay logo"})}),Object(u.jsx)(m.b,{to:"#",children:"For Business"}),Object(u.jsx)(m.b,{to:"#",children:"About us"})]}),Object(u.jsx)("div",{className:"path",children:Object(u.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"345",height:"185.296",viewBox:"0 0 401.991 185.296",className:"path",children:Object(u.jsx)("path",{id:"Path_1938","data-name":"Path 1938",d:"M-73.783,185.675s177.855-12.2,269.307-64.419S328.208.379,328.208.379H-73.783",transform:"translate(73.783 -0.379)",fill:"#fff"})})}),Object(u.jsx)("div",{className:"clas",children:n?Object(u.jsx)(m.b,{to:"/account/home",children:"Dashboard"}):Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(m.b,{to:"/u/login",children:"Login"}),Object(u.jsx)(m.b,{to:"/u/join",children:"Join Delivery pay"})]})})]})}),Object(u.jsx)("div",{className:"content",children:Object(u.jsxs)("div",{className:"innerWrapper",children:[Object(u.jsxs)("div",{className:"text",children:[Object(u.jsxs)("h1",{children:["Never Pay Without",Object(u.jsx)("br",{})," Using Delivery pay"]}),Object(u.jsx)("p",{children:"Delivery pay is a secure transaction platform that completely protects you from being scammed when you want to buy or sell with someone you don't know."}),Object(u.jsxs)("div",{className:"clas",children:[Object(u.jsx)(m.b,{to:"/account/home",children:"I am a Seller"}),Object(u.jsx)(m.b,{to:"/account/home",children:"I am a Buyer"})]})]}),Object(u.jsx)("img",{className:"illustration",src:"/landingPage_illustration.svg",alt:"illustration"})]})})]})},v=n(11),N=n.p+"static/media/tick.71f1b4df.svg",y=n.p+"static/media/tick_border.30a56233.svg";n(87);var C=function(){return Object(u.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"158",height:"158",viewBox:"0 0 158 158",children:[Object(u.jsx)("defs",{children:Object(u.jsxs)("linearGradient",{id:"linear-gradient-red",x1:"-0.298",y1:"-0.669",x2:"1.224",y2:"1.588",gradientUnits:"objectBoundingBox",children:[Object(u.jsx)("stop",{offset:"0",stopColor:"#f93389"}),Object(u.jsx)("stop",{offset:"1",stopColor:"#e3003e"})]})}),Object(u.jsx)("rect",{id:"Rectangle_1104","data-name":"Rectangle 1104",width:"158",height:"158",rx:"79",fill:"url(#linear-gradient-red)"}),Object(u.jsx)("g",{id:"Component_85_8","data-name":"Component 85 \u2013 8",transform:"translate(49.472 49.472)",children:Object(u.jsx)("path",{id:"Union_3","data-name":"Union 3",d:"M29.527,34.9,5.368,59.057,0,53.686,24.158,29.527,0,5.368,5.368,0l24.16,24.158L53.686,0l5.371,5.368L34.9,29.527l24.16,24.158-5.371,5.371Z",fill:"#fff"})})]})},w=function(){return Object(u.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"158",height:"158",viewBox:"0 0 158 158",children:[Object(u.jsxs)("defs",{children:[Object(u.jsxs)("linearGradient",{id:"linear-gradient",x1:"-0.298",y1:"-0.669",x2:"1.224",y2:"1.588",gradientUnits:"objectBoundingBox",children:[Object(u.jsx)("stop",{offset:"0",stopColor:"#336cf9"}),Object(u.jsx)("stop",{offset:"1",stopColor:"#1be6d6"})]}),Object(u.jsx)("clipPath",{id:"clip-path",children:Object(u.jsx)("rect",{width:"64",height:"64",fill:"none"})})]}),Object(u.jsxs)("g",{id:"Group_163","data-name":"Group 163",transform:"translate(-0.426 -0.384)",children:[Object(u.jsx)("g",{id:"Group_103","data-name":"Group 103",transform:"translate(0 0)",children:Object(u.jsx)("rect",{id:"Rectangle_1104","data-name":"Rectangle 1104",width:"158",height:"158",rx:"79",transform:"translate(0.426 0.384)",fill:"url(#linear-gradient)"})}),Object(u.jsxs)("g",{id:"Component_148_2","data-name":"Component 148 \u2013 2",transform:"translate(47.426 58.384)",clipPath:"url(#clip-path)",children:[Object(u.jsx)("rect",{id:"Rectangle_460","data-name":"Rectangle 460",width:"64",height:"64",transform:"translate(0 0)",fill:"none"}),Object(u.jsx)("path",{id:"Checkbox",d:"M25.35,44.087,0,18.737l5.143-5.143L25.35,33.432,58.782,0l5.143,5.143Z",transform:"translate(0 1.728)",fill:"#fff"})]})]})]})},k=function(){return Object(u.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"15.557",height:"15.557",viewBox:"0 0 15.557 15.557",children:[Object(u.jsx)("defs",{children:Object(u.jsx)("clipPath",{id:"clip-path",children:Object(u.jsx)("rect",{width:"15.557",height:"15.557",fill:"none"})})}),Object(u.jsx)("g",{id:"Cancel",clipPath:"url(#clip-path)",children:Object(u.jsx)("path",{id:"Union_3","data-name":"Union 3",d:"M7.778,9.192,1.414,15.557,0,14.142,6.364,7.778,0,1.414,1.414,0,7.778,6.364,14.142,0l1.415,1.414L9.192,7.778l6.364,6.364-1.415,1.415Z",fill:"#2699fb"})})]})},P=function(e){var t=e.className;return Object(u.jsxs)("svg",{className:t,xmlns:"http://www.w3.org/2000/svg",width:"65",height:"65",viewBox:"0 0 65 65",children:[Object(u.jsxs)("g",{id:"Ellipse_110","data-name":"Ellipse 110",fill:"#fff",stroke:"#336cf9",strokeWidth:"1",children:[Object(u.jsx)("circle",{cx:"32.5",cy:"32.5",r:"32.5",stroke:"none"}),Object(u.jsx)("circle",{cx:"32.5",cy:"32.5",r:"32",fill:"none"})]}),Object(u.jsx)("path",{id:"Checkbox",d:"M12.267,23.067,0,9.8,2.489,7.112l9.778,10.38L28.444,0l2.489,2.691Z",transform:"translate(17.034 20.967)",fill:"#336cf9"})]})},S=function(e){var t=e.className;return Object(u.jsx)("svg",{className:t,xmlns:"http://www.w3.org/2000/svg",width:"65",height:"65",viewBox:"0 0 65 65",children:Object(u.jsxs)("g",{id:"Ellipse_229","data-name":"Ellipse 229",fill:"#fff",stroke:"#707070",strokeWidth:"1",children:[Object(u.jsx)("circle",{cx:"32.5",cy:"32.5",r:"32.5",stroke:"none"}),Object(u.jsx)("circle",{cx:"32.5",cy:"32.5",r:"32",fill:"none"})]})})},_=function(e){var t=e.className;return Object(u.jsxs)("svg",{className:t,xmlns:"http://www.w3.org/2000/svg",width:"65",height:"65",viewBox:"0 0 65 65",children:[Object(u.jsxs)("g",{id:"Ellipse_110","data-name":"Ellipse 110",fill:"#336cf9",stroke:"#336cf9",strokeWidth:"1",children:[Object(u.jsx)("circle",{cx:"32.5",cy:"32.5",r:"32.5",stroke:"none"}),Object(u.jsx)("circle",{cx:"32.5",cy:"32.5",r:"32",fill:"none"})]}),Object(u.jsx)("path",{id:"Checkbox",d:"M12.267,23.067,0,9.8,2.489,7.112l9.778,10.38L28.444,0l2.489,2.691Z",transform:"translate(17.034 20.967)",fill:"#fff"})]})},M=function(){return Object(u.jsx)("svg",{className:"done",xmlns:"http://www.w3.org/2000/svg",width:"214.5",height:"2",viewBox:"0 0 214.5 2",children:Object(u.jsx)("line",{id:"Line_22","data-name":"Line 22",x2:"214.5",transform:"translate(0 1)",fill:"none",stroke:"#1be6d6",strokeWidth:"2"})})},L=function(){return Object(u.jsx)("svg",{className:"running",xmlns:"http://www.w3.org/2000/svg",width:"200",height:"16.55",viewBox:"0 0 200 16.55",children:Object(u.jsxs)("g",{id:"Group_203","data-name":"Group 203",transform:"translate(-5063.943 -1197)",children:[Object(u.jsx)("path",{id:"Path_301","data-name":"Path 301",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5063.943 1213.55) rotate(-90)",fill:"#1be6d6"}),Object(u.jsx)("path",{id:"Path_302","data-name":"Path 302",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5073.943 1213.55) rotate(-90)",fill:"#1be6d6"}),Object(u.jsx)("path",{id:"Path_303","data-name":"Path 303",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5083.943 1213.55) rotate(-90)",fill:"#1be6d6"}),Object(u.jsx)("path",{id:"Path_304","data-name":"Path 304",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5093.943 1213.55) rotate(-90)",fill:"#1be6d6"}),Object(u.jsx)("path",{id:"Path_305","data-name":"Path 305",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5103.943 1213.55) rotate(-90)",fill:"#1be6d6"}),Object(u.jsx)("path",{id:"Path_306","data-name":"Path 306",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5113.943 1213.55) rotate(-90)",fill:"#1be6d6"}),Object(u.jsx)("path",{id:"Path_307","data-name":"Path 307",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5123.943 1213.55) rotate(-90)",fill:"#1be6d6"}),Object(u.jsx)("path",{id:"Path_308","data-name":"Path 308",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5133.943 1213.55) rotate(-90)",fill:"#1be6d6"}),Object(u.jsx)("path",{id:"Path_309","data-name":"Path 309",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5143.943 1213.55) rotate(-90)",fill:"#1be6d6"}),Object(u.jsx)("path",{id:"Path_310","data-name":"Path 310",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5153.943 1213.55) rotate(-90)",fill:"#1be6d6"}),Object(u.jsx)("path",{id:"Path_311","data-name":"Path 311",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5163.943 1213.55) rotate(-90)",fill:"#1be6d6"}),Object(u.jsx)("path",{id:"Path_312","data-name":"Path 312",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5173.943 1213.55) rotate(-90)",fill:"#1be6d6"}),Object(u.jsx)("path",{id:"Path_313","data-name":"Path 313",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5183.943 1213.55) rotate(-90)",fill:"#1be6d6"}),Object(u.jsx)("path",{id:"Path_314","data-name":"Path 314",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5193.943 1213.55) rotate(-90)",fill:"#1be6d6"}),Object(u.jsx)("path",{id:"Path_315","data-name":"Path 315",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5203.943 1213.55) rotate(-90)",fill:"#1be6d6"}),Object(u.jsx)("path",{id:"Path_316","data-name":"Path 316",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5213.943 1213.55) rotate(-90)",fill:"#1be6d6"}),Object(u.jsx)("path",{id:"Path_317","data-name":"Path 317",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5223.943 1213.55) rotate(-90)",fill:"#1be6d6"}),Object(u.jsx)("path",{id:"Path_318","data-name":"Path 318",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5233.943 1213.55) rotate(-90)",fill:"#1be6d6"}),Object(u.jsx)("path",{id:"Path_319","data-name":"Path 319",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5243.943 1213.55) rotate(-90)",fill:"#1be6d6"}),Object(u.jsx)("path",{id:"Path_320","data-name":"Path 320",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5253.943 1213.55) rotate(-90)",fill:"#1be6d6"})]})})},F=function(){return Object(u.jsx)("svg",{className:"runningBack",xmlns:"http://www.w3.org/2000/svg",width:"200",height:"16.55",viewBox:"0 0 200 16.55",children:Object(u.jsxs)("g",{id:"Group_226","data-name":"Group 226",transform:"translate(5263.943 1213.55) rotate(-180)",children:[Object(u.jsx)("path",{id:"Path_301","data-name":"Path 301",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5063.943 1213.55) rotate(-90)",fill:"#f6577c"}),Object(u.jsx)("path",{id:"Path_302","data-name":"Path 302",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5073.943 1213.55) rotate(-90)",fill:"#f6577c"}),Object(u.jsx)("path",{id:"Path_303","data-name":"Path 303",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5083.943 1213.55) rotate(-90)",fill:"#f6577c"}),Object(u.jsx)("path",{id:"Path_304","data-name":"Path 304",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5093.943 1213.55) rotate(-90)",fill:"#f6577c"}),Object(u.jsx)("path",{id:"Path_305","data-name":"Path 305",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5103.943 1213.55) rotate(-90)",fill:"#f6577c"}),Object(u.jsx)("path",{id:"Path_306","data-name":"Path 306",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5113.943 1213.55) rotate(-90)",fill:"#f6577c"}),Object(u.jsx)("path",{id:"Path_307","data-name":"Path 307",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5123.943 1213.55) rotate(-90)",fill:"#f6577c"}),Object(u.jsx)("path",{id:"Path_308","data-name":"Path 308",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5133.943 1213.55) rotate(-90)",fill:"#f6577c"}),Object(u.jsx)("path",{id:"Path_309","data-name":"Path 309",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5143.943 1213.55) rotate(-90)",fill:"#f6577c"}),Object(u.jsx)("path",{id:"Path_310","data-name":"Path 310",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5153.943 1213.55) rotate(-90)",fill:"#f6577c"}),Object(u.jsx)("path",{id:"Path_311","data-name":"Path 311",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5163.943 1213.55) rotate(-90)",fill:"#f6577c"}),Object(u.jsx)("path",{id:"Path_312","data-name":"Path 312",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5173.943 1213.55) rotate(-90)",fill:"#f6577c"}),Object(u.jsx)("path",{id:"Path_313","data-name":"Path 313",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5183.943 1213.55) rotate(-90)",fill:"#f6577c"}),Object(u.jsx)("path",{id:"Path_314","data-name":"Path 314",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5193.943 1213.55) rotate(-90)",fill:"#f6577c"}),Object(u.jsx)("path",{id:"Path_315","data-name":"Path 315",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5203.943 1213.55) rotate(-90)",fill:"#f6577c"}),Object(u.jsx)("path",{id:"Path_316","data-name":"Path 316",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5213.943 1213.55) rotate(-90)",fill:"#f6577c"}),Object(u.jsx)("path",{id:"Path_317","data-name":"Path 317",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5223.943 1213.55) rotate(-90)",fill:"#f6577c"}),Object(u.jsx)("path",{id:"Path_318","data-name":"Path 318",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5233.943 1213.55) rotate(-90)",fill:"#f6577c"}),Object(u.jsx)("path",{id:"Path_319","data-name":"Path 319",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5243.943 1213.55) rotate(-90)",fill:"#f6577c"}),Object(u.jsx)("path",{id:"Path_320","data-name":"Path 320",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5253.943 1213.55) rotate(-90)",fill:"#f6577c"})]})})},D=function(){return Object(u.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",children:[Object(u.jsx)("line",{id:"Line_29","data-name":"Line 29",y2:"20",transform:"translate(10)",fill:"none",stroke:"#006dff",strokeWidth:"2"}),Object(u.jsx)("line",{id:"Line_30","data-name":"Line 30",x2:"20",transform:"translate(0 10)",fill:"none",stroke:"#006dff",strokeWidth:"2"})]})},A=function(){return Object(u.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",children:Object(u.jsx)("line",{id:"Line_30","data-name":"Line 30",x2:"20",transform:"translate(0 10)",fill:"none",stroke:"#006dff",strokeWidth:"2"})})},R=function(){return Object(u.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 18 18",children:Object(u.jsx)("g",{id:"Symbol_82","data-name":"Symbol 82",transform:"translate(-507 1272) rotate(-90)",children:Object(u.jsx)("path",{id:"Path_10","data-name":"Path 10",d:"M9,0,7.364,1.636l6.195,6.195H0v2.338H13.558L7.364,16.364,9,18l9-9Z",transform:"translate(1254 507)",fill:"#336cf9"})})})},q=function(){return Object(u.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 18 18",children:Object(u.jsx)("g",{id:"_1","data-name":" 1",transform:"translate(525 -1254) rotate(90)",children:Object(u.jsx)("path",{id:"Path_10","data-name":"Path 10",d:"M9,0,7.364,1.636l6.195,6.195H0v2.338H13.558L7.364,16.364,9,18l9-9Z",transform:"translate(1254 507)",fill:"#ff0080"})})})},B=function(e){var t=e.defaultValue,n=e.required,c=e.onChange,s=Object(l.useState)(t),a=Object(d.a)(s,2),i=a[0],r=a[1];return Object(u.jsx)("section",{className:"checkbox",children:Object(u.jsxs)("div",{className:"ticks",onClick:function(){return r(!i)},children:[Object(u.jsx)("input",{type:"checkbox",value:i,required:n,onChange:function(e){r(!i),null===c||void 0===c||c(e)}}),Object(u.jsx)("img",{src:y}),i&&Object(u.jsx)("img",{src:N})]})})},T=function(e){var t=e.options,n=e.defaultValue,c=e.onChange,s=e.maxHeight,a=e.required,i=(e.disabled,e.dataId,e.validationMessage,e.className,e.placeholder),r=Object(l.useState)((function(){return n>-1&&t[n]?t[n].label:"object"===typeof n?n:""})),o=Object(d.a)(r,2),j=o[0],h=o[1],b=Object(l.useState)(!1),O=Object(d.a)(b,2),m=O[0],x=O[1],f=Object(l.useState)(""),g=Object(d.a)(f,2),v=g[0],N=g[1],y=Object(l.useState)({}),C=Object(d.a)(y,2),w=C[0],k=C[1],P=Object(l.useRef)(),S=Object(l.useRef)();return Object(l.useLayoutEffect)((function(){var e=S.current.getBoundingClientRect(),n=e.width,c=e.height,s=e.x,a=e.y;k({position:"absolute",left:s,top:a+c,width:n,height:37*t.length,maxHeight:window.innerHeight-(a+c)-16})}),[m]),Object(u.jsxs)("section",{className:"combobox ".concat(m?"open":""),ref:S,onClick:function(){return x(!m)},children:[i&&!j&&Object(u.jsx)("label",{children:i}),Object(u.jsx)("input",{ref:P,required:a,data:v,value:j,onFocus:function(e){return e.target.blur()},onChange:function(){}}),Object(u.jsx)("button",{type:"button",children:Object(u.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"13",height:"8.872",viewBox:"0 0 13 8.872",children:[Object(u.jsx)("defs",{children:Object(u.jsx)("clipPath",{id:"clip-path",children:Object(u.jsx)("rect",{width:"8.872",height:"13",fill:"none"})})}),Object(u.jsx)("g",{id:"Component_47_7","data-name":"Component 47 \u2013 7",transform:"translate(0 8.872) rotate(-90)",clipPath:"url(#clip-path)",children:Object(u.jsx)("path",{id:"Path_36","data-name":"Path 36",d:"M6.5,8.872,0,2.036,1.936,0,6.5,4.8,11.064,0,13,2.036Z",transform:"translate(8.872) rotate(90)",fill:"#336cf9"})})]})}),Object(u.jsx)(p,{className:"sectionOptions",open:m,setOpen:x,backdropClass:"selectionOptionBack",onBackdropClick:function(){return x(!1)},style:w,children:Object(u.jsx)("ul",{style:{width:"100%",maxHeight:m?s:0,zIndex:100},className:"options",children:t.map((function(e){return Object(u.jsx)("li",{onClick:function(t){N(e.value),h(e.label),c&&c(e),x(!1),P.current.setCustomValidity("")},className:"option".concat(" ",j===e.label?"selected":""),children:e.label},e.label)}))})})]})},Z=function(e){var t=e.defaultValue,n=e.min,c=e.max,s=e.required,a=e.onChange,i=Object(l.useState)(t||0),r=Object(d.a)(i,2),o=r[0],j=r[1];return Object(u.jsxs)("section",{className:"number",children:[Object(u.jsx)("input",{type:"number",step:"0.01",required:s,value:o,onChange:function(e){j((+e.target.value).toString()),null===a||void 0===a||a(e)},placeholder:"0.00",min:n,max:c}),Object(u.jsxs)("div",{className:"ticker",children:[Object(u.jsx)("button",{type:"button",onClick:function(){return j(+o+1)},children:Object(u.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"13",height:"8.872",viewBox:"0 0 13 8.872",children:[Object(u.jsx)("defs",{children:Object(u.jsx)("clipPath",{id:"clip-path",children:Object(u.jsx)("rect",{width:"8.872",height:"13",fill:"none"})})}),Object(u.jsx)("g",{id:"Component_47_8","data-name":"Component 47 \u2013 8",transform:"translate(13) rotate(90)",clipPath:"url(#clip-path)",children:Object(u.jsx)("path",{id:"Path_36","data-name":"Path 36",d:"M6.5,8.872,0,2.036,1.936,0,6.5,4.8,11.064,0,13,2.036Z",transform:"translate(8.872) rotate(90)",fill:"#336cf9"})})]})}),Object(u.jsx)("button",{type:"button",onClick:function(){return j(+o-1)},children:Object(u.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"13",height:"8.872",viewBox:"0 0 13 8.872",children:[Object(u.jsx)("defs",{children:Object(u.jsx)("clipPath",{id:"clip-path",children:Object(u.jsx)("rect",{width:"8.872",height:"13",fill:"none"})})}),Object(u.jsx)("g",{id:"Component_47_7","data-name":"Component 47 \u2013 7",transform:"translate(0 8.872) rotate(-90)",clipPath:"url(#clip-path)",children:Object(u.jsx)("path",{id:"Path_36","data-name":"Path 36",d:"M6.5,8.872,0,2.036,1.936,0,6.5,4.8,11.064,0,13,2.036Z",transform:"translate(8.872) rotate(90)",fill:"#336cf9"})})]})})]})]})},E=n(26),U=n.n(E);n(44);var I=function(){var e=Object(l.useContext)(h),t=e.user,n=e.setUser,c=Object(O.g)(),s=new URLSearchParams(Object(O.h)().search),a=Object(l.useState)(""),i=Object(d.a)(a,2),r=i[0],o=i[1],j=Object(l.useState)(""),b=Object(d.a)(j,2),p=b[0],f=b[1],g=Object(l.useState)(""),v=Object(d.a)(g,2),N=v[0],y=v[1],C=Object(l.useState)("+91"),w=Object(d.a)(C,2),k=w[0],P=w[1],S=Object(l.useState)(""),_=Object(d.a)(S,2),M=_[0],L=_[1],F=Object(l.useState)(""),D=Object(d.a)(F,2),A=D[0],R=D[1],q=Object(l.useState)(null),T=Object(d.a)(q,2),Z=T[0],E=T[1];return Object(l.useEffect)((function(){E(null)}),[A]),Object(u.jsxs)("div",{className:"formWrapper",children:[Object(u.jsx)("img",{className:"logo",onClick:function(){return c.push("")},src:"/logo_land.jpg",alt:"Delivery pay logo"}),Object(u.jsx)("p",{className:"title",children:"Create your Delivery pay account"}),Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault(),M===A?k.match(/^\+91\d{10}$/)?Z||fetch("/api/registerUser",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object(x.a)({firstName:r,lastName:p,phone:k,email:N,password:M},s.get("referer")&&{referer:s.get("referer")}))}).then((function(e){return e.json()})).then((function(e){e.user?(n(t),c.push("/account/home")):11e3===e.code&&E("Email/Phone already exists.")})):E("Enter valid phone number"):E("Password did not match.")},children:[Object(u.jsx)("input",{type:"text",name:"firstName",required:!0,placeholder:"First name",value:r,onChange:function(e){return o(e.target.value)}}),Object(u.jsx)("input",{type:"text",name:"lastName",required:!0,placeholder:"Last name",value:p,onChange:function(e){return f(e.target.value)}}),Object(u.jsx)("input",{type:"email",name:"email",required:!0,placeholder:"Email",value:N,onChange:function(e){E(null),y(e.target.value)}}),Object(u.jsx)("input",{type:"tel",name:"phone",required:!0,placeholder:"Phone number",value:k,onChange:function(e){E(null),e.target.value.match(/^\+91\d{0,10}$/)&&P(e.target.value)}}),Object(u.jsx)("section",{className:"pass",children:Object(u.jsx)("input",{type:"password",name:"password",required:!0,placeholder:"Password","aria-autocomplete":"list",autoComplete:"new-password",onChange:function(e){return L(e.target.value)}})}),Object(u.jsx)("section",{className:"repeatPass",children:Object(u.jsx)("input",{type:"password",name:"confirm_password",id:"confirm_password",required:!0,placeholder:"Confirm Password","aria-autocomplete":"list",autoComplete:"new-password",onChange:function(e){return R(e.target.value)}})}),Object(u.jsxs)("section",{className:"checkbox",children:[Object(u.jsx)(B,{required:!0}),Object(u.jsx)("label",{children:"I accept to the Terms and Conditions and Privacy Policy"})]}),Object(u.jsx)("button",{disabled:Z,type:"submit",children:"Register"})]}),Z&&Object(u.jsx)("p",{className:"errMsg",children:Z}),Object(u.jsxs)("p",{className:"links",children:["Already have an account? ",Object(u.jsx)(m.b,{to:"/u/login",children:"Login"})]})]})},H=function(){var e=Object(l.useContext)(h),t=e.user,n=e.setUser,c=Object(O.g)(),s=Object(l.useState)(""),a=Object(d.a)(s,2),i=a[0],r=a[1],o=Object(l.useState)(""),j=Object(d.a)(o,2),b=j[0],x=j[1],p=Object(l.useState)(!1),f=Object(d.a)(p,2),g=f[0],v=f[1],N=function(e){e.tokenId&&fetch("/api/userLoginUsingSocial",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({googleToken:e.tokenId})}).then((function(e){return e.json()})).then((function(e){e.user?(n(t),c.push("/account/home")):401===e.code&&(v("No account is associated with this Google account."),setTimeout((function(){return v(null)}),2e3))}))};return Object(u.jsxs)("div",{className:"formWrapper login",children:[Object(u.jsx)("img",{className:"logo",onClick:function(){return c.push("")},src:"/logo_land.jpg",alt:"Delivery pay logo"}),Object(u.jsx)("p",{className:"title",children:"Login to your Delivery pay account"}),Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault(),g||fetch("/api/userLogin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:i,password:b})}).then((function(e){return e.json()})).then((function(e){e.user?(n(t),c.push("/account/home")):401===e.code&&v("Invalid credential!")}))},children:[Object(u.jsx)("input",{type:"text",name:"username",required:!0,placeholder:"Email  or Phone Number",value:i,onChange:function(e){v(!1),r(e.target.value)}}),Object(u.jsxs)("section",{className:"pass",children:[Object(u.jsx)("input",{type:"password",name:"password",required:!0,placeholder:"Password",value:b,onChange:function(e){v(!1),x(e.target.value)}}),Object(u.jsx)(m.b,{className:"passReset",to:"/u/resetPassword",children:"Forgot password?"})]}),Object(u.jsx)("button",{disabled:g,type:"submit",children:"Login"})]}),Object(u.jsx)("section",{className:"socials",children:Object(u.jsx)(E.GoogleLogin,{className:"google",clientId:"978249749020-kjq65au1n373ur5oap7n4ebo2fq1jdhq.apps.googleusercontent.com",buttonText:"Continue with Google",onSuccess:N,onFailure:N,cookiePolicy:"single_host_origin"})}),Object(u.jsxs)("p",{className:"links",children:["Don't have an account? ",Object(u.jsx)(m.b,{to:"/u/join",children:"Register"})]}),g&&Object(u.jsx)("p",{className:"errMsg",children:g})]})},V=function(){var e=Object(l.useContext)(h),t=e.user,n=e.setUser,c=Object(O.g)(),s=Object(l.useState)(1),a=Object(d.a)(s,2),i=a[0],r=a[1],o=Object(l.useState)(""),j=Object(d.a)(o,2),b=j[0],x=j[1],p=Object(l.useState)(!1),f=Object(d.a)(p,2),g=(f[0],f[1],Object(l.useState)(["","","","","",""])),N=Object(d.a)(g,2),y=N[0],C=N[1],w=Object(l.useState)(""),k=Object(d.a)(w,2),P=k[0],S=k[1],_=Object(l.useState)(""),M=Object(d.a)(_,2),L=M[0],F=M[1],D=Object(l.useState)(!1),A=Object(d.a)(D,2),R=A[0],q=A[1],B=Object(l.useRef)(null),T=Object(l.useRef)(null),Z=Object(l.useRef)(null),E=Object(l.useRef)(null),U=Object(l.useRef)(null),I=Object(l.useRef)(null);Object(l.useEffect)((function(){console.log(R)}),[R]);var H=function(e){if(e.preventDefault(),1===i){if(R)return;fetch("/api/sendUserForgotPassOTP",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone:b})}).then((function(e){200===e.status?r(2):q("User does does not exists.")}))}else if(2===i)fetch("/api/submitUserForgotPassOTP",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone:b,code:y.join("")})}).then((function(e){200===e.status?r(3):400===e.status?(C(["","","","","",""]),q("Wrong code!")):429===e.status?(r(1),x(""),C(["","","","","",""]),q("Too many tries. Start again.")):404===e.status&&(r(1),x(""),C(["","","","","",""]),q("Timeout. Start again"))}));else if(3===i){if(P!==L)return void q("Password did not match");fetch("/api/userResetPass",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone:b,code:y.join(""),newPass:P})}).then((function(e){return e.json()})).then((function(e){e.user&&(n(t),c.push("/account/home"))}))}};return Object(l.useEffect)((function(){y.join("")&&q(null)}),[y]),Object(u.jsxs)("div",{className:"formWrapper resetPass",children:[Object(u.jsx)("img",{className:"logo",src:"/logo_land.jpg",alt:"Delivery pay logo"}),Object(u.jsx)("p",{className:"title",children:"Password reset"}),1===i&&Object(u.jsxs)("form",{onSubmit:H,children:[Object(u.jsx)("input",{type:"tel",name:"phone",required:!0,placeholder:"Phone Number",value:b,onChange:function(e){q(null),x(e.target.value)}}),Object(u.jsx)("button",{disabled:R,type:"submit",children:"Next"})]}),2===i&&Object(u.jsxs)("form",{onSubmit:H,children:[Object(u.jsx)("label",{children:"A 6 digit code has been sent to your phone. Enter the code below."}),Object(u.jsxs)("section",{className:"code",children:[Object(u.jsx)("input",{ref:B,type:"number",value:y[0],required:!0,onChange:function(e){C((function(t){var n=Object(v.a)(t);return n[0]=e.target.value[0]||"",n})),1===e.target.value.length&&T.current.focus()}}),Object(u.jsx)("input",{ref:T,type:"number",value:y[1],required:!0,onChange:function(e){C((function(t){var n=Object(v.a)(t);return n[1]=e.target.value[0]||"",n})),1===e.target.value.length&&Z.current.focus()}}),Object(u.jsx)("input",{ref:Z,type:"number",value:y[2],required:!0,onChange:function(e){C((function(t){var n=Object(v.a)(t);return n[2]=e.target.value[0]||"",n})),1===e.target.value.length&&E.current.focus()}}),Object(u.jsx)("input",{ref:E,type:"number",value:y[3],required:!0,onChange:function(e){C((function(t){var n=Object(v.a)(t);return n[3]=e.target.value[0]||"",n})),1===e.target.value.length&&U.current.focus()}}),Object(u.jsx)("input",{ref:U,type:"number",value:y[4],required:!0,onChange:function(e){C((function(t){var n=Object(v.a)(t);return n[4]=e.target.value[0]||"",n})),1===e.target.value.length&&I.current.focus()}}),Object(u.jsx)("input",{ref:I,type:"number",value:y[5],required:!0,onChange:function(e){C((function(t){var n=Object(v.a)(t);return n[5]=e.target.value[0]||"",n}))}})]}),Object(u.jsx)("button",{disabled:R,type:"submit",children:"Next"})]}),3===i&&Object(u.jsxs)("form",{onSubmit:H,children:[Object(u.jsx)("input",{type:"password",name:"password",required:!0,placeholder:"Password","aria-autocomplete":"list",autoComplete:"new-password",onChange:function(e){q(null),S(e.target.value)}}),Object(u.jsx)("section",{className:"pass",children:Object(u.jsx)("input",{type:"password",name:"confirm_password",id:"confirm_password",required:!0,placeholder:"Confirm Password","aria-autocomplete":"list",autoComplete:"new-password",onChange:function(e){q(null),F(e.target.value)}})}),Object(u.jsx)("button",{disabled:R,type:"submit",children:3===i?"Submit":"Next"})]}),R&&Object(u.jsx)("p",{className:"errMsg",children:R}),Object(u.jsxs)("p",{className:"links",children:["Already have an account?",Object(u.jsx)(m.b,{to:"/u/login",children:"Login"})]})]})};var W=function(){var e=Object(l.useContext)(h),t=e.setUser,n=(e.user,Object(O.g)());return Object(l.useEffect)((function(){fetch("/api/authUser").then((function(e){return e.json()})).then((function(e){var c;e.user&&(t(e.user),n.push((null===(c=n.location.state)||void 0===c?void 0:c.from)||"/account/home"))}))}),[]),Object(u.jsxs)("div",{className:"userStart",children:[Object(u.jsxs)("div",{className:"banner",children:[Object(u.jsxs)("header",{children:[Object(u.jsx)("h3",{children:"Experience the best and secure Transactions"}),Object(u.jsx)("p",{children:"We ensure buyer and seller happiness"})]}),Object(u.jsx)("img",{className:"illustration",src:"/landingPage_illustration.svg",alt:"illustration"})]}),Object(u.jsx)("div",{className:"forms",children:Object(u.jsxs)(O.d,{children:[Object(u.jsx)(O.b,{path:"/u/join",children:Object(u.jsx)(I,{})}),Object(u.jsx)(O.b,{path:"/u/login",children:Object(u.jsx)(H,{})}),Object(u.jsx)(O.b,{path:"/u/resetPassword",children:Object(u.jsx)(V,{})})]})})]})},G=function(e){var t=e.milestone,n=e.setReleaseForm,c=e.onSuccess,s=Object(l.useState)(t.amount),a=Object(d.a)(s,2),i=a[0],r=a[1],o=Object(l.useState)(null),j=Object(d.a)(o,2),h=j[0],b=j[1];return Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault(),fetch("/api/releaseMilestone",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({_id:t._id,amount:i})}).then((function(e){return e.json()})).then((function(e){var t=e.milestone;t?null===c||void 0===c||c(t):b(Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("button",{onClick:function(){return b(null)},children:"Okay"}),Object(u.jsxs)("div",{children:[Object(u.jsx)(C,{}),Object(u.jsx)("h4",{children:"Could not release Milestone."})]})]}))})).catch((function(e){console.log(e),u.Fragment}))},children:[Object(u.jsx)("label",{children:"How much money you want to release?"}),Object(u.jsx)(Z,{defaultValue:i,onChange:function(e){return r(e.target.value)}}),Object(u.jsxs)("section",{className:"btns",children:[Object(u.jsx)("button",{type:"submit",children:"Confirm"}),Object(u.jsx)("button",{className:"cancel",type:"button",onClick:function(){return n(!1)},children:"Cancel"})]}),Object(u.jsx)(p,{open:h,className:"msg",children:h})]})},J=function(e){var t=e.milestone,n=(e.setDisputeForm,e.onSuccess),c=Object(l.useState)(""),s=Object(d.a)(c,2),a=s[0],i=s[1],r=Object(l.useState)(""),o=Object(d.a)(r,2),j=o[0],h=o[1],b=Object(l.useState)([]),O=Object(d.a)(b,2),m=O[0],x=O[1],f=Object(l.useState)(null),g=Object(d.a)(f,2),v=g[0],N=g[1];return Object(u.jsxs)("form",{className:"disputeForm",onSubmit:function(e){e.preventDefault();fetch("/api/fileDispute",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({issue:a,milestoneId:t._id,defendantId:t.client._id,_case:{dscr:j,caseFiles:[]}})}).then((function(e){200===e.status?e.json().then((function(e){var t=e.milestone;null===n||void 0===n||n(t)})):403===e.status?N(Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("button",{onClick:function(){return N(null)},children:"Okay"}),Object(u.jsxs)("div",{children:[Object(u.jsx)(C,{}),Object(u.jsx)("h4",{children:"Insufficient fund! you have to have \u20b9500 in your wallet to file a dispute."})]})]})):N(Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("button",{onClick:function(){return N(null)},children:"Okay"}),Object(u.jsxs)("div",{children:[Object(u.jsx)(C,{}),Object(u.jsx)("h4",{children:"Could not file dispute."})]})]}))})).catch((function(e){console.log(e),N(Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("button",{onClick:function(){return N(null)},children:"Okay"}),Object(u.jsxs)("div",{children:[Object(u.jsx)(C,{}),Object(u.jsx)("h4",{children:"Could not file dispute. make sure you're online."})]})]}))}))},children:[Object(u.jsx)("h4",{children:"You feel like you are getting scammed?"}),Object(u.jsxs)("section",{children:[Object(u.jsx)("label",{htmlFor:"issue",children:"Issue"}),Object(u.jsx)(T,{name:"issue",options:"buyer"===t.role?[{label:"Buyer Not Releasing Payments",value:"Buyer Not Releasing Payments"}]:[{label:"Goods Not Received",value:"Goods Not Received"},{label:"Services Not Received",value:"Services Not Received"},{label:"Damaged",value:"Damaged"},{label:"Not As Agreed",value:"Not As Agreed"},{label:"Not As Displayed",value:"Not As Displayed"}],onChange:function(e){i(e.value)}})]}),Object(u.jsxs)("section",{children:[Object(u.jsx)("label",{htmlFor:"description",children:"Description"}),Object(u.jsx)("textarea",{name:"description",value:j,required:!0,onChange:function(e){return h(e.target.value)}})]}),Object(u.jsxs)("section",{className:"fileInput",children:[Object(u.jsx)("label",{htmlFor:"for",children:"Upload images to prove your case. ie: Product of image, proof of delivery."}),m.length>0&&Object(u.jsx)("ul",{children:m.map((function(e,t){return Object(u.jsx)("li",{children:e.name},t)}))}),Object(u.jsx)("input",{type:"file",name:"files",required:!0,accept:"audio/*,video/*,image/*",multiple:!0,onChange:function(e){x(Object.values(e.target.files))}})]}),Object(u.jsxs)("section",{className:"btns",children:[Object(u.jsx)("button",{className:"submit",type:"submit",children:"Submit"}),Object(u.jsx)("button",{className:"cancel",type:"button",children:"Cancel"})]}),Object(u.jsx)("div",{className:"pBtm"}),Object(u.jsx)(p,{open:v,className:"msg",children:v})]})},Y=function(e){var t,n,c,s,a,i,r=e.milestone,o=e.setMilestones,j=Object(l.useState)(!1),h=Object(d.a)(j,2),b=h[0],O=h[1],g=Object(l.useState)(!1),v=Object(d.a)(g,2),N=v[0],y=v[1],w=Object(l.useState)(null),k=Object(d.a)(w,2),D=k[0],A=k[1],R=null,q=null;(null===(t=r.dispute)||void 0===t?void 0:t.plaintiff._id)===r.client._id?(R=null===(s=r.dispute)||void 0===s||null===(a=s.defendant)||void 0===a||null===(i=a.case)||void 0===i?void 0:i.dscr,q="client"):(null===(n=r.dispute)||void 0===n?void 0:n.defendant._id)===r.client._id&&(q="self");var B=function(){fetch("/api/approveMilestone",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({milestone_id:r._id,amount:r.amount})}).then((function(e){return e.json()})).then((function(e){"ok"===e.code?o((function(t){return t.map((function(t){return t._id===e.milestone._id?Object(x.a)(Object(x.a)({},e.milestone),{},{client:r.client,role:r.role}):t}))})):403===e.code?A(Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("button",{onClick:function(){return A(null)},children:"Okay"}),Object(u.jsxs)("div",{children:[Object(u.jsx)(C,{}),Object(u.jsx)("h4",{children:"Could not approve milestone due to low balance."})]})]})):A(Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("button",{onClick:function(){return A(null)},children:"Okay"}),Object(u.jsxs)("div",{children:[Object(u.jsx)(C,{}),Object(u.jsx)("h4",{children:"Could not approve milestone. Please try again."})]})]}))})).catch((function(e){console.log(e),A(Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("button",{onClick:function(){return A(null)},children:"Okay"}),Object(u.jsxs)("div",{children:[Object(u.jsx)(C,{}),Object(u.jsx)("h4",{children:"Could not approve milestone. Make sure you're online"})]})]}))}))};return Object(u.jsxs)("li",{className:"milestone ".concat(r.role),children:[Object(u.jsxs)("div",{className:"clientDetail",children:[Object(u.jsxs)("div",{className:"profile",children:[Object(u.jsx)("img",{src:r.client.profileImg}),Object(u.jsx)("p",{className:"name",children:r.client.firstName+" "+r.client.lastName})]}),Object(u.jsx)("div",{className:"milestoneDetail",children:Object(u.jsxs)("ul",{children:[Object(u.jsxs)("li",{children:[Object(u.jsx)("p",{children:"Role"}),"-",Object(u.jsx)("p",{className:"role",children:r.role})]}),Object(u.jsxs)("li",{children:[Object(u.jsx)("p",{children:"Product Detail"}),"-",Object(u.jsx)("p",{children:r.dscr})]}),Object(u.jsxs)("li",{children:[Object(u.jsx)("p",{children:"Transaction ID"}),"-",Object(u.jsx)("p",{children:r._id})]})]})})]}),Object(u.jsxs)("ul",{className:"steps ".concat(r.status," ").concat(null===(c=r.dispute)||void 0===c?void 0:c.status),children:[Object(u.jsxs)("li",{className:"step pending",children:[Object(u.jsxs)("div",{className:"icons",children:[Object(u.jsx)(P,{className:"default"}),Object(u.jsx)(S,{className:"blank"}),Object(u.jsx)(_,{className:"filled"})]}),Object(u.jsx)("p",{children:"Deposite recieved"})]}),Object(u.jsxs)("li",{className:"progress pending",children:[Object(u.jsx)(M,{}),Object(u.jsx)(L,{}),Object(u.jsx)(F,{})]}),Object(u.jsxs)("li",{className:"step onhold",children:[Object(u.jsxs)("div",{className:"icons",children:[Object(u.jsx)(P,{className:"default"}),Object(u.jsx)(S,{className:"blank"}),Object(u.jsx)(_,{className:"filled"})]}),Object(u.jsx)("p",{children:"Funds on Hold"})]}),Object(u.jsxs)("li",{className:"progress onhold",children:[Object(u.jsx)(M,{}),Object(u.jsx)(L,{}),Object(u.jsx)(F,{})]}),Object(u.jsxs)("li",{className:"step released",children:[Object(u.jsxs)("div",{className:"icons",children:[Object(u.jsx)(P,{className:"default"}),Object(u.jsx)(S,{className:"blank"}),Object(u.jsx)(_,{className:"filled"})]}),Object(u.jsx)("p",{children:"Released"})]})]}),Object(u.jsxs)("div",{className:"clas",children:[Object(u.jsxs)("h4",{children:["\u20b9",r.amount]}),"buyer"===r.role?Object(u.jsxs)("div",{className:"btns",children:[("pending"===r.status||"inProgress"===r.status)&&Object(u.jsx)(m.b,{className:"dispute",to:"#",onClick:function(){return y(!0)},children:"Manual verification"}),"released"===r.status&&Object(u.jsx)(m.b,{className:"released",to:"#",children:"Released"}),("client"===q&&R||"self"===q)&&Object(u.jsx)(m.b,{className:"disputed",to:"#",children:"Dispute"}),"client"===q&&!R&&Object(u.jsx)(m.b,{className:"disputeRes",to:"#",onClick:function(){return y(!0)},children:"Approve Dispute"})]}):Object(u.jsxs)("div",{className:"btns",children:["pending"===r.status&&Object(u.jsx)(m.b,{to:"/account/hold/".concat(r._id,"/approve"),onClick:function(){return f({label:"Milestone Approval",question:"You sure want to approve this milestone?",callback:B})},children:"Approve"}),"inProgress"===r.status&&Object(u.jsx)(m.b,{onClick:function(){return O(!0)},to:"/account/hold/".concat(r._id,"/release"),children:"Release"}),"released"===r.status&&Object(u.jsx)(m.b,{className:"dispute",to:"#",onClick:function(){return y(!0)},children:"Manual verification"}),("client"===q&&R||"self"===q)&&Object(u.jsx)(m.b,{className:"disputed",to:"#",children:"Dispute"}),"client"===q&&!R&&Object(u.jsx)(m.b,{className:"disputeRes",to:"#",onClick:function(){return y(!0)},children:"Approve Dispute"}),Object(u.jsx)(p,{open:D,className:"msg",children:D})]})]}),Object(u.jsxs)(p,{open:b,className:"milestoneReleaseForm",children:[Object(u.jsxs)("div",{className:"head",children:[Object(u.jsx)("p",{className:"modalName",children:"Release Money"}),Object(u.jsx)("button",{onClick:function(){return O(!1)},children:Object(u.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"15.557",height:"15.557",viewBox:"0 0 15.557 15.557",children:[Object(u.jsx)("defs",{children:Object(u.jsx)("clipPath",{id:"clip-path",children:Object(u.jsx)("rect",{width:"15.557",height:"15.557",fill:"none"})})}),Object(u.jsx)("g",{id:"Cancel",clipPath:"url(#clip-path)",children:Object(u.jsx)("path",{id:"Union_3","data-name":"Union 3",d:"M7.778,9.192,1.414,15.557,0,14.142,6.364,7.778,0,1.414,1.414,0,7.778,6.364,14.142,0l1.415,1.414L9.192,7.778l6.364,6.364-1.415,1.415Z",fill:"#2699fb"})})]})})]}),Object(u.jsx)(G,{milestone:r,setReleaseForm:O,onSuccess:function(e){o((function(t){return t.map((function(t){return t._id===e._id?Object(x.a)(Object(x.a)({},e),{},{client:t.client,role:t.role}):t}))})),O(!1)}})]}),Object(u.jsxs)(p,{open:N,className:"disputeForm",children:[Object(u.jsxs)("div",{className:"head",children:[Object(u.jsx)("p",{className:"modalName",children:"Manual Verification"}),Object(u.jsx)("button",{onClick:function(){return y(!1)},children:Object(u.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"15.557",height:"15.557",viewBox:"0 0 15.557 15.557",children:[Object(u.jsx)("defs",{children:Object(u.jsx)("clipPath",{id:"clip-path",children:Object(u.jsx)("rect",{width:"15.557",height:"15.557",fill:"none"})})}),Object(u.jsx)("g",{id:"Cancel",clipPath:"url(#clip-path)",children:Object(u.jsx)("path",{id:"Union_3","data-name":"Union 3",d:"M7.778,9.192,1.414,15.557,0,14.142,6.364,7.778,0,1.414,1.414,0,7.778,6.364,14.142,0l1.415,1.414L9.192,7.778l6.364,6.364-1.415,1.415Z",fill:"#2699fb"})})]})})]}),Object(u.jsx)(J,{milestone:r,setDisputeForm:y,onSuccess:function(e){o((function(t){return t.map((function(t){return t._id===e._id?Object(x.a)(Object(x.a)({},e),{},{client:t.client,role:t.role}):t}))})),y(!1)}})]})]},r._id)},z=function(e){e.history,e.location,e.match;var t=Object(l.useState)([]),n=Object(d.a)(t,2),c=n[0],s=n[1],a=Object(l.useState)(""),i=Object(d.a)(a,2),r=i[0],o=i[1],j=Object(l.useState)(null),h=Object(d.a)(j,2),b=h[0],O=h[1];return Object(l.useEffect)((function(){fetch("/api/milestone").then((function(e){return e.json()})).then((function(e){s(e)})).catch((function(e){console.log(e),O(Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("button",{onClick:function(){return O(null)},children:"Okay"}),Object(u.jsxs)("div",{children:[Object(u.jsx)(C,{}),Object(u.jsx)("h4",{children:"Could not update milestones."})]})]}))}))}),[]),Object(u.jsxs)("div",{className:"holdContainer",children:[Object(u.jsxs)("div",{className:"benner",children:[Object(u.jsx)("h4",{children:"Secure your transactions"}),Object(u.jsx)("p",{children:"All payments and transactions come here"})]}),Object(u.jsxs)("div",{className:"head",children:[Object(u.jsx)("p",{children:"Milestone Status"}),Object(u.jsx)("div",{className:"filters",children:Object(u.jsxs)("div",{className:"date",children:[Object(u.jsx)("input",{type:"date",value:r,onChange:function(e){return o(e.target.value)}}),Object(u.jsx)("svg",{className:"icon",xmlns:"http://www.w3.org/2000/svg",width:"30.971",height:"30.971",viewBox:"0 0 30.971 30.971",children:Object(u.jsx)("path",{id:"Path_299","data-name":"Path 299",d:"M3.992,2.42H6.775V.968a.968.968,0,1,1,1.936,0V2.42H22.26V.968a.968.968,0,1,1,1.936,0V2.42h2.783a4,4,0,0,1,3.992,3.992V26.978a4,4,0,0,1-3.992,3.992H3.992A4,4,0,0,1,0,26.978V6.412A4,4,0,0,1,3.992,2.42ZM26.978,4.355H24.2v.968a.968.968,0,1,1-1.936,0V4.355H8.71v.968a.968.968,0,1,1-1.936,0V4.355H3.992A2.059,2.059,0,0,0,1.936,6.412v2.3h27.1v-2.3A2.059,2.059,0,0,0,26.978,4.355ZM3.992,29.035H26.978a2.059,2.059,0,0,0,2.057-2.057V10.646H1.936V26.978A2.059,2.059,0,0,0,3.992,29.035Z",fill:"#336cf9"})})]})})]}),Object(u.jsxs)("ul",{className:"milestones",children:[c.map((function(e,t){return Object(u.jsx)(Y,{milestone:e,setMilestones:s},t)})),0===c.length&&Object(u.jsx)("p",{className:"placeholder",children:"No transaction yet."})]}),Object(u.jsx)(p,{className:"msg",open:b,children:b})]})},$=n(14),K=n.n($),X=function(e){var t,n,c,s,a=e.transaction,i=Object(l.useContext)(h).user;return Object(u.jsxs)("li",{className:"transaction ".concat(a.amount>0?"in":"out"),children:[Object(u.jsx)("div",{className:"transactionDetail",children:Object(u.jsx)("div",{className:"profile",children:a.client?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("img",{src:null===(t=a.client._id)||void 0===t?void 0:t.profileImg}),Object(u.jsx)("p",{className:"name",children:a.client.firstName+" "+a.client.lastName})]}):Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("img",{src:i.profileImg}),Object(u.jsx)("p",{className:"name",children:i.firstName+" "+i.lastName})]})})}),Object(u.jsxs)("ul",{children:[Object(u.jsxs)("li",{children:[Object(u.jsx)("p",{children:"Role"}),"-",Object(u.jsx)("p",{className:"role",children:a.amount>0?"Seller":"Buyer"})]}),Object(u.jsxs)("li",{children:[Object(u.jsx)("p",{children:"Product detail"}),"-",Object(u.jsx)("p",{children:a.dscr||"-"})]}),Object(u.jsxs)("li",{children:[Object(u.jsx)("p",{children:"Transaction ID"}),"-",Object(u.jsx)("p",{children:a._id})]})]}),Object(u.jsxs)("ul",{className:"amountDate",children:[Object(u.jsxs)("li",{children:[Object(u.jsx)("p",{children:"Amount"}),"-",Object(u.jsx)("p",{className:"amount",children:a.amount})]}),Object(u.jsxs)("li",{children:[Object(u.jsx)("p",{children:"Delivery pay Hold Date"}),"-",Object(u.jsx)("p",{children:Object(u.jsx)(K.a,{format:"MMM DD, YYYY, hh:mm a",children:a.createdAt})})]}),Object(u.jsxs)("li",{children:[Object(u.jsx)("p",{children:"Released Date"}),"-",Object(u.jsx)("p",{children:Object(u.jsx)(K.a,{format:"MMM DD, YYYY, hh:mm a",children:(null===(n=a.milestoneId)||void 0===n?void 0:n.releaseDate)||"--"})})]})]}),Object(u.jsxs)("ul",{className:"statusMethod",children:[Object(u.jsxs)("li",{children:[Object(u.jsx)("p",{children:"Status"}),"-",Object(u.jsx)("p",{className:"status",children:(null===(c=a.milestoneId)||void 0===c?void 0:c.status)||"--"})]}),Object(u.jsxs)("li",{children:[Object(u.jsx)("p",{children:"Released to"}),"-",Object(u.jsx)("p",{children:a.amount<0?"Seller":"--"})]}),Object(u.jsxs)("li",{children:[Object(u.jsx)("p",{children:"Verification Method"}),"-",Object(u.jsx)("p",{children:(null===(s=a.milestoneId)||void 0===s?void 0:s.verification)||"--"})]})]})]})},Q=function(e){e.history,e.location,e.match;var t=Object(l.useState)([]),n=Object(d.a)(t,2),c=n[0],s=n[1],a=Object(l.useState)(null),i=Object(d.a)(a,2),r=i[0],o=i[1];return Object(l.useEffect)((function(){fetch("/api/transactions?type=P2PTransaction").then((function(e){if(200===e.status)return e.json()})).then((function(e){e&&s(e)})).catch((function(e){console.log(e),o(Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("button",{onClick:function(){return o(null)},children:"Okay"}),Object(u.jsxs)("div",{children:[Object(u.jsx)(C,{}),Object(u.jsx)("h4",{children:"Could not get transactions."})]})]}))}))}),[]),Object(u.jsxs)("div",{className:"transcationContainer",children:[Object(u.jsx)("p",{className:"benner",children:"Completed Delivery pay Hold Transactions"}),Object(u.jsxs)("ul",{className:"transactions",children:[c.map((function(e){return Object(u.jsx)(X,{transaction:e},e._id)})),0===c.length&&Object(u.jsx)("p",{className:"placeholder",children:"No transaction yet."})]}),Object(u.jsx)(p,{className:"msg",open:r,children:r})]})},ee=n(28),te=n.n(ee);function ne(){var e=te()().format("HH");return e>=3&&e<12?"Good Morning":e>=12&&e<15?"Good Afternoon":e>=15&&e<20?"Good Evening":e>=20&&e<3?"Good Night":"Hello"}var ce=function(e){var t,n=e.data,c=null===(t=n.sort((function(e,t){return e.balance<t.balance?1:-1}))[0])||void 0===t?void 0:t.balance;return Object(u.jsxs)("div",{className:"graph",children:[Object(u.jsx)("p",{className:"label",children:"Analytics"}),Object(u.jsx)("ul",{className:"bars","data-max":"\u20b9 ".concat(c||0),children:n.map((function(e,t){return Object(u.jsxs)("li",{children:[Object(u.jsx)("div",{className:"bar",style:{height:"".concat(e.balance/(c/100),"%")}}),Object(u.jsx)("label",{className:"month",children:e._id})]},t)}))})]})},se=function(e){var t=e.label,n=e.action,c=Object(l.useContext)(h),s=c.user;c.setUser;return Object(u.jsxs)("div",{className:"paymentOptions",children:[Object(u.jsx)("p",{className:"label",children:t}),Object(u.jsxs)("div",{className:"options",children:[s.paymentMethods.map((function(e,t){return Object(u.jsxs)(l.Fragment,{children:["BankCard"===e.__t&&Object(u.jsx)(oe,{card:e,onClick:function(e){return n(e)}}),"BankAccount"===e.__t&&Object(u.jsx)(je,{account:e,onClick:function(e){return n(e)}})]},e._id)})),0===s.paymentMethods.length&&Object(u.jsx)("div",{className:"placeholder",children:"No payment method added."})]}),Object(u.jsx)(m.b,{className:"addMethodLink",to:"addMoney/addPaymentMethod",children:"Add payment method"})]})},ae=function(e){var t=e.onSuccess,n=Object(l.useState)("upi"),c=Object(d.a)(n,2),s=c[0],a=c[1];return Object(u.jsxs)("div",{className:"addPaymentMethod",children:[Object(u.jsxs)("section",{className:"paymentOption",children:[Object(u.jsxs)("div",{className:"header",onClick:function(){return a("upi")},children:[Object(u.jsx)("div",{className:"redial ".concat("upi"===s&&"active"),children:Object(u.jsx)("div",{className:"fill"})}),Object(u.jsxs)("label",{children:["UPI ",Object(u.jsx)("img",{src:"/payment_upi.png"})]})]}),"upi"===s&&Object(u.jsx)(ie,{})]}),Object(u.jsxs)("section",{className:"paymentOption",children:[Object(u.jsxs)("div",{className:"header",onClick:function(){return a("bankCard")},children:[Object(u.jsx)("div",{className:"redial ".concat("bankCard"===s&&"active"),children:Object(u.jsx)("div",{className:"fill"})}),Object(u.jsxs)("label",{children:["Add Debit/Credit Card ",Object(u.jsx)("img",{src:"/payment_visa.png"})," ",Object(u.jsx)("img",{src:"/payment_mc.png"})]})]}),"bankCard"===s&&Object(u.jsx)(le,{onSuccess:t})]}),Object(u.jsxs)("section",{className:"paymentOption",children:[Object(u.jsxs)("div",{className:"header",onClick:function(){return a("netBanking")},children:[Object(u.jsx)("div",{className:"redial ".concat("netBanking"===s&&"active"),children:Object(u.jsx)("div",{className:"fill"})}),Object(u.jsx)("label",{children:"Net Banking"})]}),"netBanking"===s&&Object(u.jsx)(re,{onSuccess:t})]})]})},ie=function(){var e=Object(l.useState)(""),t=Object(d.a)(e,2),n=t[0],c=t[1];return Object(u.jsxs)("form",{className:"paymentMethodForm upi",onSubmit:function(e){e.preventDefault(),c("Coming soon!")},children:[Object(u.jsx)("label",{children:"Please enter your UPI ID"}),Object(u.jsxs)("section",{children:[Object(u.jsx)("input",{type:"text",value:n,required:!0,name:"upiId",onChange:function(e){return c(e.target.value)},placeholder:"Ex: MobileNumber@upi"}),Object(u.jsx)("button",{type:"submit",children:"Verify"})]})]})},le=function(e){var t=e.prefill,n=e.onSuccess,c=Object(l.useContext)(h).setUser,s=Object(l.useState)((null===t||void 0===t?void 0:t.brand)||null),a=Object(d.a)(s,2),i=a[0],r=a[1],o=Object(l.useState)((null===t||void 0===t?void 0:t.nameOnCard)||""),j=Object(d.a)(o,2),b=j[0],O=j[1],m=Object(l.useState)((null===t||void 0===t?void 0:t.cardNumber)||""),f=Object(d.a)(m,2),g=f[0],N=f[1],y=Object(l.useState)(""),w=Object(d.a)(y,2),k=w[0],P=w[1],S=Object(l.useState)(""),_=Object(d.a)(S,2),M=_[0],L=_[1],F=Object(l.useState)((null===t||void 0===t?void 0:t.cvv)||""),D=Object(d.a)(F,2),A=D[0],R=D[1],q=Object(l.useState)(!1),B=Object(d.a)(q,2),Z=B[0],E=B[1],U=function(){for(var e=(new Date).getFullYear(),t=[],n=0;n<15;n++)t.push({label:e+n,value:(e+n).toString().substr(2)});return t}(),I=Object(l.useState)(null),H=Object(d.a)(I,2),V=H[0],W=H[1];Object(l.useEffect)((function(){}),[M,k]);return Object(u.jsxs)("form",{className:"paymentMethodForm bankCard",onSubmit:function(e){if(e.preventDefault(),null===i)return E(!0),void setTimeout((function(){return E(!1)}),1500);fetch(t?"/api/editPaymentMethod":"/api/addPaymentMethod",{method:t?"PATCH":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object(x.a)({type:"BankCard",brand:i,nameOnCard:b,cardNumber:g,exp:"".concat(k,"/").concat(M),cvv:A},t&&{_id:t._id}))}).then((function(e){return e.json()})).then((function(e){var s=e.paymentMethod;s?(c(t?function(e){return Object(x.a)(Object(x.a)({},e),{},{paymentMethods:e.paymentMethods.map((function(e){return e._id===s._id?s:e}))})}:function(e){return Object(x.a)(Object(x.a)({},e),{},{paymentMethods:[].concat(Object(v.a)(e.paymentMethods),[s])})}),null===n||void 0===n||n(s)):W(Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("button",{onClick:function(){return W(null)},children:"Okay"}),Object(u.jsxs)("div",{children:[Object(u.jsx)(C,{}),Object(u.jsxs)("h4",{children:["Payment method could not be ",t?"updated":"added",". Please try again."]})]})]}))})).catch((function(e){console.log(e),W(Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("button",{onClick:function(){return W(null)},children:"Okay"}),Object(u.jsxs)("div",{children:[Object(u.jsx)(C,{}),Object(u.jsx)("h4",{children:"Error happaned. Make sure you're online."})]})]}))}))},children:[!t&&Object(u.jsx)("p",{className:"note",children:"We\u2019ll save this card for your convenience. Remove it by going to Your Account section"}),Object(u.jsxs)("section",{className:"inputs",children:[Object(u.jsx)("input",{type:"text",name:"name",placeholder:"Name on your card",value:b,onChange:function(e){return O(e.target.value)},required:!0}),Object(u.jsx)("input",{type:"number",name:"cardNumber",placeholder:"Card Number",value:g,onChange:function(e){e.target.value.match(/^3[47][0-9]{13}$/)?r("amex"):e.target.value.match(/^4[0-9]{12}(?:[0-9]{3})?$$/)?r("visa"):e.target.value.match(/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14})$/)?r("masterCard"):r(null),N(e.target.value)},required:!0}),Object(u.jsxs)("section",{className:"exp",children:[Object(u.jsx)("label",{children:"Expiry Date"}),Object(u.jsx)(T,{placeholder:"Month",options:[{label:"Jan",value:"01"},{label:"Feb",value:"02"},{label:"Mar",value:"03"},{label:"Apr",value:"04"},{label:"May",value:"05"},{label:"Jun",value:"06"},{label:"Jul",value:"07"},{label:"Aug",value:"08"},{label:"Sep",value:"09"},{label:"Oct",value:"10"},{label:"Nov",value:"11"},{label:"Dec",value:"12"}],required:!0,onChange:function(e){return P(e.value)}}),Object(u.jsx)(T,{placeholder:"Year",options:U,required:!0,onChange:function(e){return L(e.value)}})]}),Object(u.jsxs)("section",{className:"cvv",children:[Object(u.jsx)("label",{children:"CVV"}),Object(u.jsx)("input",{type:"number",name:"cvv",required:!0,value:A,onChange:function(e){return R(e.target.value)}})]})]}),Object(u.jsx)("button",{children:"Save"}),Z&&Object(u.jsx)("p",{className:"cardErr",children:"Enter valid Visa/MasterCard"}),Object(u.jsx)(p,{className:"msg",open:V,children:V})]})},re=function(e){var t=e.prefill,n=e.onSuccess,c=Object(l.useContext)(h).setUser,s=Object(l.useState)((null===t||void 0===t?void 0:t.bank)||""),a=Object(d.a)(s,2),i=a[0],r=a[1],o=Object(l.useState)((null===t||void 0===t?void 0:t.name)||""),j=Object(d.a)(o,2),b=j[0],O=j[1],m=Object(l.useState)((null===t||void 0===t?void 0:t.ifsc)||""),f=Object(d.a)(m,2),g=f[0],N=f[1],y=Object(l.useState)(null),w=Object(d.a)(y,2),k=w[0],P=w[1],S=Object(l.useState)((null===t||void 0===t?void 0:t.accountNumber)||""),_=Object(d.a)(S,2),M=_[0],L=_[1];return Object(u.jsxs)("form",{className:"paymentMethodForm netBanking",onSubmit:function(e){e.preventDefault(),fetch(t?"/api/editPaymentMethod":"/api/addPaymentMethod",{method:t?"PATCH":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object(x.a)({type:"BankAccount",name:b,bank:i,ifsc:g,accountNumber:M},t&&{_id:t._id}))}).then((function(e){return e.json()})).then((function(e){var s=e.paymentMethod;s?(c(t?function(e){return Object(x.a)(Object(x.a)({},e),{},{paymentMethods:e.paymentMethods.map((function(e){return e._id===s._id?s:e}))})}:function(e){return Object(x.a)(Object(x.a)({},e),{},{paymentMethods:[].concat(Object(v.a)(e.paymentMethods),[s])})}),null===n||void 0===n||n(s)):P(Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("button",{onClick:function(){return P(null)},children:"Okay"}),Object(u.jsxs)("div",{children:[Object(u.jsx)(C,{}),Object(u.jsx)("h4",{children:"Could not update payment method. Please try again."})]})]}))})).catch((function(e){console.log(e),P(Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("button",{onClick:function(){return P(null)},children:"Okay"}),Object(u.jsxs)("div",{children:[Object(u.jsx)(C,{}),Object(u.jsx)("h4",{children:"Could not updated payment method. Make sure you're online."})]})]}))}))},children:[Object(u.jsxs)("section",{className:"inputs",children:[Object(u.jsx)("input",{type:"text",name:"bank",placeholder:"Bank",value:i,onChange:function(e){return r(e.target.value)},required:!0}),Object(u.jsx)("input",{type:"text",name:"name",placeholder:"Full name",value:b,onChange:function(e){return O(e.target.value)},required:!0}),Object(u.jsx)("input",{type:"text",name:"ifsc",placeholder:"IFSC",value:g,onChange:function(e){return N(e.target.value)},required:!0}),Object(u.jsx)("input",{type:"text",name:"accountNumber",placeholder:"Account Number",value:M,onChange:function(e){return L(e.target.value)},required:!0})]}),Object(u.jsx)("button",{type:"submit",children:"Save"}),Object(u.jsx)(p,{open:k,className:"msg",children:k})]})},oe=function(e){var t=e.card,n=e.onClick;return Object(u.jsxs)("div",{className:"paymentMethod card",onClick:function(){return null===n||void 0===n?void 0:n(t)},children:[Object(u.jsx)("img",{className:"logo",src:"visa"===t.brand?"/payment_visa.png":"/payment_mc.png"}),Object(u.jsxs)("p",{className:"cardNumber",children:["**** **** **** **** ",t.cardNumber.substr(-4)]}),Object(u.jsx)("p",{className:"cardHolder",children:t.nameOnCard}),Object(u.jsx)("p",{className:"exp",children:t.exp})]})},je=function(e){var t=e.account,n=e.onClick;return Object(u.jsxs)("div",{className:"paymentMethod bankAccount",onClick:function(){return null===n||void 0===n?void 0:n(t)},children:[Object(u.jsx)("p",{className:"bank",children:t.bank}),Object(u.jsx)("p",{className:"name",children:t.name}),Object(u.jsx)("p",{className:"accountNumber",children:t.accountNumber}),Object(u.jsx)("p",{className:"ifsc",children:t.ifsc})]})},de=function(e){var t=e.paymentMethods,n=Object(l.useRef)(null),c=Object(l.useState)({}),s=Object(d.a)(c,2),a=s[0],i=s[1],r=Object(l.useState)({}),o=Object(d.a)(r,2),j=o[0],h=o[1],b=Object(l.useState)(0),O=Object(d.a)(b,2),m=O[0],x=O[1],f=Object(l.useState)(!1),g=Object(d.a)(f,2),v=g[0],N=g[1];return Object(l.useLayoutEffect)((function(){var e=n.current.getBoundingClientRect().width;i({width:e,height:.55*e}),h({transform:"translateX(".concat(-e*m,"px)")})}),[m]),Object(u.jsxs)("div",{className:"savedCards",children:[Object(u.jsx)("p",{className:"label",children:"Saved Cards"}),Object(u.jsxs)("div",{className:"wrapper",ref:n,children:[Object(u.jsxs)("ul",{className:"cards",style:j,children:[t.map((function(e,t){return Object(u.jsxs)("li",{style:a,children:[e._id&&"BankCard"===e.__t&&Object(u.jsx)(oe,{card:e}),e._id&&"BankAccount"===e.__t&&Object(u.jsx)(je,{account:e})]},t)})),0===t.length&&Object(u.jsx)("li",{style:a,children:Object(u.jsx)("p",{className:"placeholder",children:"No payment method added."})})]}),Object(u.jsx)("button",{className:"addPaymentMethod",onClick:function(){return N(!0)},children:Object(u.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"15.999",viewBox:"0 0 16 15.999",children:Object(u.jsx)("path",{id:"Union_1","data-name":"Union 1",d:"M-4613,16V9h-7V7h7V0h2V7h7V9h-7v7Z",transform:"translate(4620)",fill:"#2699fb"})})})]}),m>0&&Object(u.jsx)("button",{className:"prev",onClick:function(){return x((function(e){return e-1}))},children:Object(u.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"31.818",height:"44.147",viewBox:"0 0 31.818 44.147",children:[Object(u.jsx)("defs",{children:Object(u.jsxs)("filter",{id:"Path_217",x:"0",y:"0",width:"31.818",height:"44.147",filterUnits:"userSpaceOnUse",children:[Object(u.jsx)("feOffset",{dx:"-3",dy:"3",input:"SourceAlpha"}),Object(u.jsx)("feGaussianBlur",{stdDeviation:"2.5",result:"blur"}),Object(u.jsx)("feFlood",{floodOpacity:"0.161"}),Object(u.jsx)("feComposite",{operator:"in",in2:"blur"}),Object(u.jsx)("feComposite",{in:"SourceGraphic"})]})}),Object(u.jsx)("g",{transform:"matrix(1, 0, 0, 1, 0, 0)",filter:"url(#Path_217)",children:Object(u.jsxs)("g",{id:"Path_217-2","data-name":"Path 217",transform:"translate(27.32 4.5) rotate(90)",fill:"#858585",children:[Object(u.jsx)("path",{d:"M 27.53220176696777 15.71776485443115 C 26.13888931274414 15.2262544631958 24.10462951660156 14.50919151306152 22.07958030700684 13.79734325408936 C 14.74783992767334 11.22007274627686 14.70039939880371 11.22007274627686 14.5736198425293 11.22007274627686 C 14.44684028625488 11.22007274627686 14.39939975738525 11.22007274627686 7.067659854888916 13.79734325408936 C 5.042610645294189 14.50919151306152 3.00835108757019 15.2262544631958 1.615038275718689 15.71776485443115 L 14.5736198425293 0.7635064125061035 L 27.53220176696777 15.71776485443115 Z",stroke:"none"}),Object(u.jsx)("path",{d:"M 14.5736198425293 1.526998519897461 L 3.229276657104492 14.61841773986816 C 4.349065780639648 14.22377777099609 5.627307891845703 13.77366733551025 6.901840209960938 13.32564258575439 C 14.31408023834229 10.72007274627686 14.33368015289307 10.72007274627686 14.5736198425293 10.72007274627686 C 14.81355953216553 10.72007274627686 14.83315944671631 10.72007274627686 22.24539947509766 13.32564258575439 C 23.51993179321289 13.77366733551025 24.79817390441895 14.22377777099609 25.9179630279541 14.61841773986816 L 14.5736198425293 1.526998519897461 M 14.5736198425293 1.9073486328125e-06 L 29.14723968505859 16.81802368164063 C 29.14723968505859 16.81802368164063 14.71584987640381 11.72007274627686 14.5736198425293 11.72007274627686 C 14.43138980865479 11.72007274627686 0 16.81802368164063 0 16.81802368164063 L 14.5736198425293 1.9073486328125e-06 Z",stroke:"none",fill:"#858585"})]})})]})}),m+1<t.length&&Object(u.jsx)("button",{className:"next",onClick:function(){return x((function(e){return e+1}))},children:Object(u.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"31.818",height:"44.147",viewBox:"0 0 31.818 44.147",children:[Object(u.jsx)("defs",{children:Object(u.jsxs)("filter",{id:"Path_217",x:"0",y:"0",width:"31.818",height:"44.147",filterUnits:"userSpaceOnUse",children:[Object(u.jsx)("feOffset",{dx:"-3",dy:"3",input:"SourceAlpha"}),Object(u.jsx)("feGaussianBlur",{stdDeviation:"2.5",result:"blur"}),Object(u.jsx)("feFlood",{floodOpacity:"0.161"}),Object(u.jsx)("feComposite",{operator:"in",in2:"blur"}),Object(u.jsx)("feComposite",{in:"SourceGraphic"})]})}),Object(u.jsx)("g",{transform:"matrix(1, 0, 0, 1, 0, 0)",filter:"url(#Path_217)",children:Object(u.jsxs)("g",{id:"Path_217-2","data-name":"Path 217",transform:"translate(27.32 4.5) rotate(90)",fill:"#858585",children:[Object(u.jsx)("path",{d:"M 27.53220176696777 15.71776485443115 C 26.13888931274414 15.2262544631958 24.10462951660156 14.50919151306152 22.07958030700684 13.79734325408936 C 14.74783992767334 11.22007274627686 14.70039939880371 11.22007274627686 14.5736198425293 11.22007274627686 C 14.44684028625488 11.22007274627686 14.39939975738525 11.22007274627686 7.067659854888916 13.79734325408936 C 5.042610645294189 14.50919151306152 3.00835108757019 15.2262544631958 1.615038275718689 15.71776485443115 L 14.5736198425293 0.7635064125061035 L 27.53220176696777 15.71776485443115 Z",stroke:"none"}),Object(u.jsx)("path",{d:"M 14.5736198425293 1.526998519897461 L 3.229276657104492 14.61841773986816 C 4.349065780639648 14.22377777099609 5.627307891845703 13.77366733551025 6.901840209960938 13.32564258575439 C 14.31408023834229 10.72007274627686 14.33368015289307 10.72007274627686 14.5736198425293 10.72007274627686 C 14.81355953216553 10.72007274627686 14.83315944671631 10.72007274627686 22.24539947509766 13.32564258575439 C 23.51993179321289 13.77366733551025 24.79817390441895 14.22377777099609 25.9179630279541 14.61841773986816 L 14.5736198425293 1.526998519897461 M 14.5736198425293 1.9073486328125e-06 L 29.14723968505859 16.81802368164063 C 29.14723968505859 16.81802368164063 14.71584987640381 11.72007274627686 14.5736198425293 11.72007274627686 C 14.43138980865479 11.72007274627686 0 16.81802368164063 0 16.81802368164063 L 14.5736198425293 1.9073486328125e-06 Z",stroke:"none",fill:"#858585"})]})})]})}),Object(u.jsxs)(p,{className:"paymentMethodsForm",open:v,children:[Object(u.jsxs)("div",{className:"head",children:[Object(u.jsx)("p",{className:"modalName",children:"Add Payment Method"}),Object(u.jsx)("button",{onClick:function(){return N(!1)},children:Object(u.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"15.557",height:"15.557",viewBox:"0 0 15.557 15.557",children:[Object(u.jsx)("defs",{children:Object(u.jsx)("clipPath",{id:"clip-path",children:Object(u.jsx)("rect",{width:"15.557",height:"15.557",fill:"none"})})}),Object(u.jsx)("g",{id:"Cancel",clipPath:"url(#clip-path)",children:Object(u.jsx)("path",{id:"Union_3","data-name":"Union 3",d:"M7.778,9.192,1.414,15.557,0,14.142,6.364,7.778,0,1.414,1.414,0,7.778,6.364,14.142,0l1.415,1.414L9.192,7.778l6.364,6.364-1.415,1.415Z",fill:"#2699fb"})})]})})]}),Object(u.jsx)(ae,{onSuccess:function(e){N(!1)}})]})]})},ue=function(){var e=Object(l.useState)([]),t=Object(d.a)(e,2),n=t[0],c=t[1],s=Object(l.useState)(null),a=Object(d.a)(s,2),i=a[0],r=a[1];return Object(l.useEffect)((function(){fetch("/api/transactions").then((function(e){if(200===e.status)return e.json()})).then((function(e){e?c(e):r(Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("button",{onClick:function(){return r(null)},children:"Okay"}),Object(u.jsxs)("div",{children:[Object(u.jsx)(C,{}),Object(u.jsx)("h4",{children:"Could not get transactions"})]})]}))})).catch((function(e){console.log(e),r(Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("button",{onClick:function(){return r(null)},children:"Okay"}),Object(u.jsxs)("div",{children:[Object(u.jsx)(C,{}),Object(u.jsx)("h4",{children:"Error happened. Make sure you're online."})]})]}))}))}),[]),Object(u.jsxs)("div",{className:"transactions",children:[Object(u.jsx)("div",{className:"head",children:Object(u.jsx)("p",{children:"All Transaction History"})}),Object(u.jsxs)("ul",{className:"allTransactions",children:[n.map((function(e){return Object(u.jsx)(he,{transaction:e},e._id)})),0===n.length&&Object(u.jsx)("p",{className:"placeholder",children:"No transaction yet."})]}),Object(u.jsx)(p,{className:"msg",open:i,children:i})]})},he=function(e){var t,n,c,s,a=e.transaction,i=null;switch(a.__t){case"AddMoney":i=Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{className:"icon",children:Object(u.jsx)(D,{})}),Object(u.jsx)("p",{className:"detail",children:"Money added to wallet"})]});break;case"WithdrawMoney":i=Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{className:"icon",children:Object(u.jsx)(A,{})}),Object(u.jsx)("p",{className:"detail",children:"Money withdrawal from Wallet"})]});break;case"P2PTransaction":i=a.amount<0?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{className:"icon",children:Object(u.jsx)(R,{})}),Object(u.jsxs)("p",{className:"detail",children:["Paid to"," ",Object(u.jsx)("span",{className:"userName",children:(null===(t=a.client)||void 0===t?void 0:t.firstName)+" "+(null===(n=a.client)||void 0===n?void 0:n.lastName)})]})]}):Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{className:"icon",children:Object(u.jsx)(q,{})}),Object(u.jsxs)("p",{className:"detail",children:["Received from"," ",Object(u.jsx)("span",{className:"userName",children:(null===(c=a.client)||void 0===c?void 0:c.firstName)+" "+(null===(s=a.client)||void 0===s?void 0:s.lastName)})]})]});break;default:i=a.amount<0?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{className:"icon",children:Object(u.jsx)(A,{})}),Object(u.jsx)("p",{className:"detail",children:a.note})]}):Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{className:"icon",children:Object(u.jsx)(D,{})}),Object(u.jsx)("p",{className:"detail",children:a.note})]})}return Object(u.jsxs)("li",{className:"transaction",children:[i,Object(u.jsxs)("p",{className:"amount",children:["\u20b9",Math.abs(a.amount)]})]})},be=function(e){var t=e.history,n=e.location,c=(e.match,Object(l.useContext)(h)),s=c.user,a=c.setUser,i=Object(l.useState)(0),r=Object(d.a)(i,2),o=r[0],j=r[1],b=Object(l.useState)([]),O=Object(d.a)(b,2),m=O[0],f=O[1],g=Object(l.useState)(""),v=Object(d.a)(g,2),N=v[0],y=v[1],k=Object(l.useState)([]),P=Object(d.a)(k,2),S=P[0],_=P[1],M=Object(l.useState)(!1),L=Object(d.a)(M,2),F=L[0],D=L[1],A=Object(l.useState)(!1),R=Object(d.a)(A,2),q=(R[0],R[1]),B=Object(l.useState)(""),T=Object(d.a)(B,2),Z=T[0],E=T[1],U=Object(l.useState)(!1),I=Object(d.a)(U,2),H=I[0],V=I[1],W=Object(l.useState)(!1),G=Object(d.a)(W,2),J=(G[0],G[1],Object(l.useState)(!1)),Y=Object(d.a)(J,2),z=Y[0],$=Y[1],X=Object(l.useState)(null),Q=Object(d.a)(X,2),ee=Q[0],te=Q[1],ie=function(e,n,c){var a=window.Razorpay;if(a){var i={key:n,amount:e.amount,currency:e.currency,accept_partial:!1,name:"".concat(s.firstName," ").concat(s.lastName),description:"add money to wallet",image:"/logo_big.jpg",order_id:e.id,handler:function(e){fetch("/api/addMoney",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({transactionId:e.razorpay_payment_id,razorSignature:e.razorpay_signature,razorOrderId:e.razorpay_order_id})}).then((function(e){return e.json()})).then((function(e){var n=e.code,c=(e.user,e.transaction);e.message;"ok"===n?(t.push("/account/wallet"),q(!1),D(c),j((function(e){return e+c.amount})),y(""),$(!1)):te(Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("button",{onClick:function(){return te(null)},children:"Okay"}),Object(u.jsxs)("div",{children:[Object(u.jsx)(C,{}),Object(u.jsx)("h4",{children:"Error happend. Make sure you're payment details are correct."})]})]}))})).catch((function(e){console.log(e),q(!0)}))},modal:{ondismiss:function(){return $(!1)}},theme:{color:"#336cf9"},customer:{name:c.name||c.nameOnCard,contact:s.phone,email:s.email},notify:{sms:!0,email:!0},reminder_enable:!0,options:{checkout:{prefill:Object(x.a)(Object(x.a)({},"BankCard"===c.__t&&{method:"card","card[name]":c.nameOnCard,"card[number]":+c.cardNumber,"card[expiry]":c.exp,"card[cvv]":+c.cvv}),"BankAccount"===c.__t&&{method:"netBanking",bank:"HDCF"})}}};console.log(i);var l=new a(i);l.on("payment.failed",(function(e){q(!0),$(!1)})),l.open()}};return Object(l.useEffect)((function(){!function(e){new Promise((function(t,n){if(document.querySelector('script[src="'.concat(e,'"]')))t(!0);else{var c=document.createElement("script");c.src=e,document.body.appendChild(c),c.onload=function(){return t(!0)},c.onerror=function(){return n(!0)}}}))}("https://checkout.razorpay.com/v1/checkout.js"),fetch("/api/dashboardData").then((function(e){return e.json()})).then((function(e){"ok"===e.code?(f(e.monthlyBalance),j(e.balance),_(e.rewards)):te(Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("button",{onClick:function(){return te(null)},children:"Okay"}),Object(u.jsxs)("div",{children:[Object(u.jsx)(C,{}),Object(u.jsx)("h4",{children:"Could not update balance."})]})]}))})).catch((function(e){console.log(e),te(Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("button",{onClick:function(){return te(null)},children:"Okay"}),Object(u.jsxs)("div",{children:[Object(u.jsx)(C,{}),Object(u.jsx)("h4",{children:"Could not update balance."})]})]}))}))}),[]),Object(l.useEffect)((function(){N||t.push("/account/wallet"),Z||t.push("/account/wallet"),$(!1)}),[N,Z]),Object(u.jsxs)("div",{className:"walletContainer",children:[Object(u.jsxs)("div",{className:"leftSection",children:[Object(u.jsxs)("div",{className:"nameTag",children:[Object(u.jsxs)("h2",{children:["Hello ",s.firstName,","]}),Object(u.jsx)("p",{className:"greetings",children:ne()})]}),Object(u.jsxs)("div",{className:"balance",children:[Object(u.jsxs)("div",{className:"currentBalance",children:[Object(u.jsx)("p",{className:"label",children:"Wallet Balance"}),Object(u.jsxs)("h1",{children:["\u20b9 ",o]}),Object(u.jsx)("p",{className:"updateTime",children:Object(u.jsx)(K.a,{format:"ddd, DD MM YYYY",children:new Date})})]}),Object(u.jsx)(ce,{data:m})]}),Object(u.jsxs)("div",{className:"addWithdraw",children:[Object(u.jsxs)("div",{className:"add money",children:[Object(u.jsx)("p",{className:"label",children:"Add Money"}),Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t.push("/account/wallet/addMoney")},children:[Object(u.jsx)("input",{type:"number",step:"0.01",min:"10",value:N,onChange:function(e){return y(e.target.value)},placeholder:"Enter ammount",required:!0}),Object(u.jsx)("button",{children:"Proceed"})]})]}),Object(u.jsxs)("div",{className:"withdraw money",children:[Object(u.jsx)("p",{className:"label",children:"Withdraw"}),Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault(),Z>o?te(Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("button",{onClick:function(){return te(null)},children:"Okay"}),Object(u.jsxs)("div",{children:[Object(u.jsx)(C,{}),Object(u.jsx)("h4",{children:"Enter an amount less or equal to currect balance."})]})]})):t.push("/account/wallet/withdrawMoney")},children:[Object(u.jsx)("input",{type:"number",step:"0.01",min:"10",placeholder:"Enter ammount",required:!0,value:Z,onChange:function(e){return E(e.target.value)}}),Object(u.jsx)("button",{children:"Proceed"})]})]})]}),Object(u.jsxs)("div",{className:"rewards",children:[Object(u.jsx)("p",{className:"label",children:"Rewards"}),Object(u.jsx)("ul",{className:"cards",children:S.map((function(e,t){return Object(u.jsxs)("li",{children:[Object(u.jsx)("p",{className:"rewardName",children:e.name}),Object(u.jsxs)("div",{children:[e.img&&Object(u.jsx)("img",{src:e.img}),e.amount&&Object(u.jsxs)("p",{className:"amount",children:["\u20b9",e.amount]}),Object(u.jsx)("p",{className:"rewardDscr",children:e.dscr})]}),!e.redeemed&&Object(u.jsx)("button",{className:"redeem",onClick:function(){te(Object(u.jsx)(u.Fragment,{children:Object(u.jsx)("div",{children:Object(u.jsx)("h4",{children:"Redeeming Reward..."})})})),fetch("/api/redeemReward",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({_id:e._id})}).then((function(e){return e.json()})).then((function(e){"ok"===e.code?(_((function(t){return t.map((function(t){return t._id===e.reward._id?e.reward:t}))})),te(Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("button",{onClick:function(){return te(null)},children:"Okay"}),Object(u.jsxs)("div",{children:[Object(u.jsx)(w,{}),Object(u.jsx)("h4",{children:"Reward succefully redeemed"})]})]}))):te(Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("button",{onClick:function(){return te(null)},children:"Okay"}),Object(u.jsxs)("div",{children:[Object(u.jsx)(C,{}),Object(u.jsx)("h4",{children:"Could not redeem reward."})]})]}))})).catch((function(e){console.log(e),te(Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("button",{onClick:function(){return te(null)},children:"Okay"}),Object(u.jsxs)("div",{children:[Object(u.jsx)(C,{}),Object(u.jsx)("h4",{children:"Could not redeem reward. Make sure you're online."})]})]}))}))},children:"Redeem"})]},t)}))})]})]}),Object(u.jsxs)("div",{className:"rightSection",children:[Object(u.jsx)(de,{paymentMethods:s.paymentMethods}),Object(u.jsx)(ue,{})]}),Object(u.jsxs)(p,{className:"addMoney",open:n.pathname.startsWith("/account/wallet/addMoney"),style:z?{filter:"grayscale(.4)",pointerEvents:"none"}:{},children:[Object(u.jsxs)("div",{className:"head",children:[Object(u.jsx)("p",{className:"modalName",children:"Add Money"}),Object(u.jsx)("button",{onClick:function(){t.push("/account/wallet")},children:Object(u.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"15.557",height:"15.557",viewBox:"0 0 15.557 15.557",children:[Object(u.jsx)("defs",{children:Object(u.jsx)("clipPath",{id:"clip-path",children:Object(u.jsx)("rect",{width:"15.557",height:"15.557",fill:"none"})})}),Object(u.jsx)("g",{id:"Cancel",clipPath:"url(#clip-path)",children:Object(u.jsx)("path",{id:"Union_3","data-name":"Union 3",d:"M7.778,9.192,1.414,15.557,0,14.142,6.364,7.778,0,1.414,1.414,0,7.778,6.364,14.142,0l1.415,1.414L9.192,7.778l6.364,6.364-1.415,1.415Z",fill:"#2699fb"})})]})})]}),Object(u.jsx)(se,{label:"Choose a payment method.",action:function(e){$(!0),fetch("/api/createAddMoneyOrder",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:N})}).then((function(e){return e.json()})).then((function(t){var n=t.order,c=t.key;$(!1),n?ie(n,c,e):te(Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("button",{onClick:function(){return te(null)},children:"Okay"}),Object(u.jsxs)("div",{children:[Object(u.jsx)(C,{}),Object(u.jsx)("h4",{children:"Error happend. Please try again."})]})]}))})).catch((function(e){console.log(e),$(!1),te(Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("button",{onClick:function(){return te(null)},children:"Okay"}),Object(u.jsxs)("div",{children:[Object(u.jsx)(C,{}),Object(u.jsx)("h4",{children:"Error happend. Make sure you're online."})]})]}))}))}})]}),Object(u.jsxs)(p,{className:"paymentMethodsForm",open:n.pathname.startsWith("/account/wallet/addMoney/addPaymentMethod"),children:[Object(u.jsxs)("div",{className:"head",children:[Object(u.jsx)("p",{className:"modalName",children:"Add Payment Method"}),Object(u.jsx)("button",{onClick:function(){t.push("/account/wallet/addMoney")},children:Object(u.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"15.557",height:"15.557",viewBox:"0 0 15.557 15.557",children:[Object(u.jsx)("defs",{children:Object(u.jsx)("clipPath",{id:"clip-path",children:Object(u.jsx)("rect",{width:"15.557",height:"15.557",fill:"none"})})}),Object(u.jsx)("g",{id:"Cancel",clipPath:"url(#clip-path)",children:Object(u.jsx)("path",{id:"Union_3","data-name":"Union 3",d:"M7.778,9.192,1.414,15.557,0,14.142,6.364,7.778,0,1.414,1.414,0,7.778,6.364,14.142,0l1.415,1.414L9.192,7.778l6.364,6.364-1.415,1.415Z",fill:"#2699fb"})})]})})]}),Object(u.jsx)(ae,{onSuccess:function(){return t.push("/account/wallet/addMoney")}})]}),Object(u.jsxs)(p,{className:"addMoney",open:n.pathname.startsWith("/account/wallet/withdrawMoney"),style:z?{filter:"grayscale(.4)",pointerEvents:"none"}:{},children:[Object(u.jsxs)("div",{className:"head",children:[Object(u.jsx)("p",{className:"modalName",children:"Withdraw Money"}),Object(u.jsx)("button",{onClick:function(){t.push("/account/wallet")},children:Object(u.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"15.557",height:"15.557",viewBox:"0 0 15.557 15.557",children:[Object(u.jsx)("defs",{children:Object(u.jsx)("clipPath",{id:"clip-path",children:Object(u.jsx)("rect",{width:"15.557",height:"15.557",fill:"none"})})}),Object(u.jsx)("g",{id:"Cancel",clipPath:"url(#clip-path)",children:Object(u.jsx)("path",{id:"Union_3","data-name":"Union 3",d:"M7.778,9.192,1.414,15.557,0,14.142,6.364,7.778,0,1.414,1.414,0,7.778,6.364,14.142,0l1.415,1.414L9.192,7.778l6.364,6.364-1.415,1.415Z",fill:"#2699fb"})})]})})]}),Object(u.jsx)(se,{label:"Where do you want to recieve your money?",action:function(e){var n={method:"POST",headers:{"Content-Type":"application/json"}};switch(e.__t){case"BankCard":n.body=JSON.stringify({paymentMethod:e.__t,amount:Z,accountDetail:{number:+e.cardNumber,name:e.nameOnCard}});break;case"BankAccount":n.body=JSON.stringify({paymentMethod:e.__t,amount:Z,accountDetail:{name:e.name,ifsc:e.ifsc,account_number:e.accountNumber}});break;case"VpaAccount":n.body=JSON.stringify({paymentMethod:e.__t,amount:Z,accountDetail:{address:e.address}});default:return}$(!0),fetch("/api/withdrawMoney",n).then((function(e){return e.json()})).then((function(e){var n;($(!1),"ok"===e.code)?(a((function(t){return Object(x.a)(Object(x.a)({},t),{},{balance:t.balance-e.transaction.amount})})),j((function(t){return t-e.transaction.amount})),t.push("/account/wallet"),te(Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("button",{onClick:function(){return te(null)},children:"Okay"}),Object(u.jsxs)("div",{children:[Object(u.jsx)(w,{}),Object(u.jsxs)("h4",{className:"amount",children:["\u20b9",null===(n=e.transaction)||void 0===n?void 0:n.amount]}),Object(u.jsx)("h4",{children:"Money withdrawed!"})]})]}))):403===e.code?te(Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("button",{onClick:function(){return te(null)},children:"Okay"}),Object(u.jsxs)("div",{children:[Object(u.jsx)(C,{}),Object(u.jsx)("h4",{children:"Insufficient fun."})]})]})):te(Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("button",{onClick:function(){return te(null)},children:"Okay"}),Object(u.jsxs)("div",{children:[Object(u.jsx)(C,{}),Object(u.jsx)("h4",{children:"Could not withdraw money. Please try again."})]})]}))})).catch((function(e){console.log(e),$(!1),V(!0)}))}})]}),Object(u.jsxs)(p,{open:F,className:"msg",children:[Object(u.jsx)("button",{onClick:function(){return D(null)},children:"Okay"}),Object(u.jsxs)("div",{children:[Object(u.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"158",height:"158",viewBox:"0 0 158 158",children:[Object(u.jsxs)("defs",{children:[Object(u.jsxs)("linearGradient",{id:"linear-gradient",x1:"-0.298",y1:"-0.669",x2:"1.224",y2:"1.588",gradientUnits:"objectBoundingBox",children:[Object(u.jsx)("stop",{offset:"0",stopColor:"#336cf9"}),Object(u.jsx)("stop",{offset:"1",stopColor:"#1be6d6"})]}),Object(u.jsx)("clipPath",{id:"clip-path",children:Object(u.jsx)("rect",{width:"64",height:"64",fill:"none"})})]}),Object(u.jsxs)("g",{id:"Group_163","data-name":"Group 163",transform:"translate(-0.426 -0.384)",children:[Object(u.jsx)("g",{id:"Group_103","data-name":"Group 103",transform:"translate(0 0)",children:Object(u.jsx)("rect",{id:"Rectangle_1104","data-name":"Rectangle 1104",width:"158",height:"158",rx:"79",transform:"translate(0.426 0.384)",fill:"url(#linear-gradient)"})}),Object(u.jsxs)("g",{id:"Component_148_2","data-name":"Component 148 \u2013 2",transform:"translate(47.426 58.384)",clipPath:"url(#clip-path)",children:[Object(u.jsx)("rect",{id:"Rectangle_460","data-name":"Rectangle 460",width:"64",height:"64",transform:"translate(0 0)",fill:"none"}),Object(u.jsx)("path",{id:"Checkbox",d:"M25.35,44.087,0,18.737l5.143-5.143L25.35,33.432,58.782,0l5.143,5.143Z",transform:"translate(0 1.728)",fill:"#fff"})]})]})]}),Object(u.jsxs)("h4",{className:"amount",children:["\u20b9",null===F||void 0===F?void 0:F.amount]}),Object(u.jsx)("h4",{children:"Money added!"})]})]}),Object(u.jsxs)(p,{open:H,className:"msg",children:[Object(u.jsx)("button",{onClick:function(){$(!1),V(null)},children:"Okay"}),Object(u.jsxs)("div",{children:[Object(u.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"158",height:"158",viewBox:"0 0 158 158",children:[Object(u.jsx)("defs",{children:Object(u.jsxs)("linearGradient",{id:"linear-gradient-red",x1:"-0.298",y1:"-0.669",x2:"1.224",y2:"1.588",gradientUnits:"objectBoundingBox",children:[Object(u.jsx)("stop",{offset:"0",stopColor:"#f93389"}),Object(u.jsx)("stop",{offset:"1",stopColor:"#e3003e"})]})}),Object(u.jsx)("rect",{id:"Rectangle_1104","data-name":"Rectangle 1104",width:"158",height:"158",rx:"79",fill:"url(#linear-gradient-red)"}),Object(u.jsx)("g",{id:"Component_85_8","data-name":"Component 85 \u2013 8",transform:"translate(49.472 49.472)",children:Object(u.jsx)("path",{id:"Union_3","data-name":"Union 3",d:"M29.527,34.9,5.368,59.057,0,53.686,24.158,29.527,0,5.368,5.368,0l24.16,24.158L53.686,0l5.371,5.368L34.9,29.527l24.16,24.158-5.371,5.371Z",fill:"#fff"})})]}),Object(u.jsx)("h4",{children:"Could not withdraw money."})]})]}),Object(u.jsxs)(p,{open:!1,className:"msg",children:[Object(u.jsx)("button",{onClick:function(){return q(null)},children:"Okay"}),Object(u.jsxs)("div",{children:[Object(u.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"158",height:"158",viewBox:"0 0 158 158",children:[Object(u.jsx)("defs",{children:Object(u.jsxs)("linearGradient",{id:"linear-gradient",x1:"-0.298",y1:"-0.669",x2:"1.224",y2:"1.588",gradientUnits:"objectBoundingBox",children:[Object(u.jsx)("stop",{offset:"0",stopColor:"#f93389"}),Object(u.jsx)("stop",{offset:"1",stopColor:"#e3003e"})]})}),Object(u.jsx)("rect",{id:"Rectangle_1104","data-name":"Rectangle 1104",width:"158",height:"158",rx:"79",fill:"url(#linear-gradient)"}),Object(u.jsx)("g",{id:"Component_85_8","data-name":"Component 85 \u2013 8",transform:"translate(49.472 49.472)",children:Object(u.jsx)("path",{id:"Union_3","data-name":"Union 3",d:"M29.527,34.9,5.368,59.057,0,53.686,24.158,29.527,0,5.368,5.368,0l24.16,24.158L53.686,0l5.371,5.368L34.9,29.527l24.16,24.158-5.371,5.371Z",fill:"#fff"})})]}),Object(u.jsx)("h4",{children:"Add money failed"})]})]}),Object(u.jsx)(p,{className:"msg",open:ee,children:ee})]})},Oe=function(e){var t=e.product,n=e.setProducts,c=(Object(l.useContext)(h).user,Object(l.useState)(!1)),s=Object(d.a)(c,2),a=s[0],i=s[1],r=Object(l.useState)(!1),o=Object(d.a)(r,2),j=o[0],b=o[1],O=function(){fetch("/api/removeProduct",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({_id:t._id})}).then((function(e){return e.json()})).then((function(e){"ok"===e.code?n((function(e){return e.filter((function(e){return e._id!==t._id}))})):b(Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("button",{onClick:function(){return b(null)},children:"Okay"}),Object(u.jsxs)("div",{children:[Object(u.jsx)(C,{}),Object(u.jsx)("h4",{children:"Product could not be removed. Please try again."})]})]}))})).catch((function(e){console.log(e),b(Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("button",{onClick:function(){return b(null)},children:"Okay"}),Object(u.jsxs)("div",{children:[Object(u.jsx)(C,{}),Object(u.jsx)("h4",{children:"Product could not be removed. Make sure you're online"})]})]}))}))};return Object(u.jsxs)("li",{className:"product",children:[Object(u.jsx)("img",{src:t.images[0]}),Object(u.jsxs)("div",{className:"detail",children:[Object(u.jsx)("p",{className:"name",children:t.name}),Object(u.jsx)("p",{className:"dscr",children:t.dscr}),Object(u.jsxs)("p",{className:"price",children:["\u20b9 ",t.price]})]}),Object(u.jsxs)("div",{className:"btns",children:[Object(u.jsx)("button",{className:"edit",onClick:function(){return i(!0)},children:"Edit"}),Object(u.jsx)("button",{className:"delete",onClick:function(){return f({label:"Removing Product",question:"You sure want to delete this product?",callback:O})},children:"Delete"})]}),Object(u.jsxs)(p,{open:a,className:"productForm",children:[Object(u.jsxs)("div",{className:"head",children:[Object(u.jsx)("p",{className:"modalName",children:"Edit Product/Service"}),Object(u.jsx)("button",{onClick:function(){i(!1)},children:Object(u.jsx)(k,{})})]}),Object(u.jsx)(me,{onSuccess:function(e){n((function(t){return t.map((function(t){return t._id===e._id?e:t}))})),i(!1),b(Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("button",{onClick:function(){return b(null)},children:"Okay"}),Object(u.jsxs)("div",{children:[Object(u.jsx)(w,{}),Object(u.jsx)("h4",{children:"Product updated."})]})]}))},prefill:t})]}),Object(u.jsx)(p,{className:"msg",open:j,children:j})]})},me=function(e){var t=e.prefill,n=e.onSuccess,c=Object(l.useState)((null===t||void 0===t?void 0:t.name)||""),s=Object(d.a)(c,2),a=s[0],i=s[1],r=Object(l.useState)((null===t||void 0===t?void 0:t.dscr)||""),o=Object(d.a)(r,2),j=o[0],h=o[1],b=Object(l.useState)((null===t||void 0===t?void 0:t.price)||""),O=Object(d.a)(b,2),m=O[0],f=O[1],g=Object(l.useState)((null===t||void 0===t?void 0:t.images)||[]),v=Object(d.a)(g,2),N=v[0],y=v[1],w=Object(l.useState)(null),k=Object(d.a)(w,2),P=k[0],S=k[1];return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault();fetch("/api/".concat(t?"edit":"add","Product"),{method:t?"PATCH":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object(x.a)({name:a,dscr:j,price:m,images:[]},t&&{_id:t._id}))}).then((function(e){return e.json()})).then((function(e){"ok"===e.code?null===n||void 0===n||n(e.product):403===e.code?S(Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("button",{onClick:function(){return S(null)},children:"Okay"}),Object(u.jsxs)("div",{children:[Object(u.jsx)(C,{}),Object(u.jsx)("h4",{children:"You can't add more that 100 product at a time. Delete a product/service and try again."})]})]})):S(Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("button",{onClick:function(){return S(null)},children:"Okay"}),Object(u.jsxs)("div",{children:[Object(u.jsx)(C,{}),Object(u.jsx)("h4",{children:"Could not add product. please try again."})]})]}))})).catch((function(e){console.log(e),S(Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("button",{onClick:function(){return S(null)},children:"Okay"}),Object(u.jsxs)("div",{children:[Object(u.jsx)(C,{}),Object(u.jsx)("h4",{children:"Could not add product. Make sure you're online."})]})]}))}))},children:[Object(u.jsxs)("section",{children:[Object(u.jsx)("label",{children:"Name of the product/service"}),Object(u.jsx)("input",{value:a,onChange:function(e){return i(e.target.value)},required:!0})]}),Object(u.jsxs)("section",{children:[Object(u.jsx)("label",{children:"Price"}),Object(u.jsx)("input",{type:"number",value:m,onChange:function(e){return f(e.target.value)},required:!0})]}),Object(u.jsxs)("section",{className:"dscr",children:[Object(u.jsx)("label",{children:"Description of the product/service"}),Object(u.jsx)("textarea",{value:j,onChange:function(e){return h(e.target.value)},required:!0})]}),Object(u.jsxs)("section",{className:"images",children:[Object(u.jsx)("label",{children:"Images of the product"}),Object(u.jsx)("ul",{children:N.map((function(e,t){return Object(u.jsx)("li",{children:e.name},t)}))}),Object(u.jsx)("input",{type:"file",accept:"image/*",multiple:!0,onChange:function(e){y(Object.values(e.target.files))}})]}),Object(u.jsx)("button",{type:"submit",children:"Submit"}),Object(u.jsx)("div",{className:"pBtm"})]}),Object(u.jsx)(p,{className:"msg",open:P,children:P})]})},xe=function(e){e.history,e.location,e.match;var t=Object(l.useState)([]),n=Object(d.a)(t,2),c=n[0],s=n[1],a=Object(l.useState)(null),i=Object(d.a)(a,2),r=i[0],o=i[1],j=Object(l.useState)(!1),h=Object(d.a)(j,2),b=h[0],O=h[1];return Object(l.useEffect)((function(){fetch("/api/products?perPage=100").then((function(e){if(200===e.status)return e.json()})).then((function(e){e&&s(e.products)})).catch((function(e){console.log(e),o(Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("button",{onClick:function(){return o(null)},children:"Okay"}),Object(u.jsxs)("div",{children:[Object(u.jsx)(C,{}),Object(u.jsx)("h4",{children:"Could not get products."})]})]}))}))}),[]),Object(u.jsxs)("div",{className:"productContainer",children:[Object(u.jsxs)("div",{className:"benner",children:[Object(u.jsx)("p",{children:"Product Management"}),Object(u.jsxs)("button",{onClick:function(){return O(!0)},children:[Object(u.jsx)(D,{})," Add Product"]})]}),Object(u.jsxs)("ul",{className:"products",children:[c.map((function(e){return Object(u.jsx)(Oe,{product:e,setProducts:s},e._id)})),0===c.length&&Object(u.jsx)("p",{className:"placeholder",children:"No product yet."})]}),Object(u.jsxs)(p,{open:b,className:"productForm",children:[Object(u.jsxs)("div",{className:"head",children:[Object(u.jsx)("p",{className:"modalName",children:"Add Product/Service"}),Object(u.jsx)("button",{onClick:function(){O(null)},children:Object(u.jsx)(k,{})})]}),Object(u.jsx)(me,{onSuccess:function(e){s((function(t){return[].concat(Object(v.a)(t),[e])})),O(!1),o(Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("button",{onClick:function(){return o(null)},children:"Okay"}),Object(u.jsxs)("div",{children:[Object(u.jsx)(w,{}),Object(u.jsx)("h4",{children:"Product added."})]})]}))}})]}),Object(u.jsx)(p,{className:"msg",open:r,children:r})]})},pe=function(e){e.history,e.location,e.match;return Object(u.jsxs)("div",{className:"supportContainer",children:[Object(u.jsxs)("div",{className:"benner",children:[Object(u.jsx)(m.b,{className:"ticketLink",to:"/support/ticket",children:"My Tickets"}),Object(u.jsx)("h1",{children:"Support portal"}),Object(u.jsx)("p",{children:"Search for an answer or browse help topics to create a ticket"}),Object(u.jsxs)("form",{children:[Object(u.jsx)("input",{type:"text",required:!0,placeholder:"Eg: How does the Delivery pay Hold Works"}),Object(u.jsx)("button",{type:"submit",children:Object(u.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"31.336",height:"31.336",viewBox:"0 0 31.336 31.336",children:Object(u.jsx)("path",{id:"Path_1935","data-name":"Path 1935",d:"M25.4,22.708H23.98l-.5-.484a11.663,11.663,0,1,0-1.254,1.254l.484.5V25.4l8.958,8.94,2.67-2.67Zm-10.75,0a8.062,8.062,0,1,1,8.063-8.063A8.052,8.052,0,0,1,14.646,22.708Z",transform:"translate(-3 -3)",fill:"#707070"})})})]})]}),Object(u.jsxs)("div",{className:"feedback",children:[Object(u.jsxs)("form",{children:[Object(u.jsx)("textarea",{required:!0}),Object(u.jsx)("button",{children:"Submit"})]}),Object(u.jsx)(m.b,{className:"feedbackLink",to:"/support/myFeedbacks",children:"Submitted Feedbacks"})]})]})},fe=n(22),ge=n.n(fe),ve=n(67),Ne=n(33);function ye(){return(ye=Object(Ne.a)(ge.a.mark((function e(t){return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("/api/editUserProfile",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ce=function(e){var t=e.method,n=e.setMsg,c=Object(l.useContext)(h).setUser,s=Object(l.useState)(!1),a=Object(d.a)(s,2),i=a[0],r=a[1],o=Object(l.useCallback)((function(e){fetch("/api/deletePaymentMethod",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({_id:e._id})}).then((function(e){return e.json()})).then((function(t){"ok"===t.code?c((function(t){return Object(x.a)(Object(x.a)({},t),{},{paymentMethods:t.paymentMethods.filter((function(t){return t._id!==e._id}))})})):n(Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("button",{onClick:function(){return n(null)},children:"Okay"}),Object(u.jsxs)("div",{children:[Object(u.jsx)(C,{}),Object(u.jsx)("h4",{children:"Payment method could not be deleted."})]})]}))}))}),[]);return Object(u.jsxs)("li",{children:[Object(u.jsxs)("div",{className:"actions",children:[Object(u.jsx)("button",{className:"edit",onClick:function(){return r(t.__t)},children:"Edit"}),Object(u.jsx)("button",{className:"delete",onClick:function(){return f({label:"Payment method delete",question:"Do you want to delete this payment method?",callback:function(){return o(t)}})},children:"Delete"})]}),"BankCard"===t.__t&&Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(oe,{card:t}),i===t.__t&&Object(u.jsxs)(p,{open:i,className:"editPaymentMethod",children:[Object(u.jsxs)("div",{className:"head",children:[Object(u.jsx)("p",{className:"modalName",children:"Edit Payment Method"}),Object(u.jsx)("button",{onClick:function(){return r(!1)},children:Object(u.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"15.557",height:"15.557",viewBox:"0 0 15.557 15.557",children:[Object(u.jsx)("defs",{children:Object(u.jsx)("clipPath",{id:"clip-path",children:Object(u.jsx)("rect",{width:"15.557",height:"15.557",fill:"none"})})}),Object(u.jsx)("g",{id:"Cancel",clipPath:"url(#clip-path)",children:Object(u.jsx)("path",{id:"Union_3","data-name":"Union 3",d:"M7.778,9.192,1.414,15.557,0,14.142,6.364,7.778,0,1.414,1.414,0,7.778,6.364,14.142,0l1.415,1.414L9.192,7.778l6.364,6.364-1.415,1.415Z",fill:"#2699fb"})})]})})]}),Object(u.jsx)(le,{prefill:t,onSuccess:function(e){e&&(r(!1),n(Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("button",{onClick:function(){return n(null)},children:"Okay"}),Object(u.jsxs)("div",{children:[Object(u.jsx)(w,{}),Object(u.jsx)("h4",{children:"Payment method updated."})]})]})))}})]})]}),"BankAccount"===t.__t&&Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(je,{account:t}),i===t.__t&&Object(u.jsxs)(p,{open:i,className:"editPaymentMethod",children:[Object(u.jsxs)("div",{className:"head",children:[Object(u.jsx)("p",{className:"modalName",children:"Edit Payment Method"}),Object(u.jsx)("button",{onClick:function(){return r(!1)},children:Object(u.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"15.557",height:"15.557",viewBox:"0 0 15.557 15.557",children:[Object(u.jsx)("defs",{children:Object(u.jsx)("clipPath",{id:"clip-path",children:Object(u.jsx)("rect",{width:"15.557",height:"15.557",fill:"none"})})}),Object(u.jsx)("g",{id:"Cancel",clipPath:"url(#clip-path)",children:Object(u.jsx)("path",{id:"Union_3","data-name":"Union 3",d:"M7.778,9.192,1.414,15.557,0,14.142,6.364,7.778,0,1.414,1.414,0,7.778,6.364,14.142,0l1.415,1.414L9.192,7.778l6.364,6.364-1.415,1.415Z",fill:"#2699fb"})})]})})]}),Object(u.jsx)(re,{prefill:t,onSuccess:function(e){e&&(r(!1),n(Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("button",{onClick:function(){return n(null)},children:"Okay"}),Object(u.jsxs)("div",{children:[Object(u.jsx)(w,{}),Object(u.jsx)("h4",{children:"Payment method updated."})]})]})))}})]})]})]})},we=function(e){var t=e.label,n=e.fields,c=e.value,s=e.onError,a=Object(l.useContext)(h).setUser,i=Object(l.useState)(!1),r=Object(d.a)(i,2),o=r[0],j=r[1],b=Object(l.useRef)(null);return Object(u.jsxs)("li",{children:[Object(u.jsx)("p",{className:"label",children:t}),Object(u.jsxs)("form",{ref:b,onSubmit:function(e){e.preventDefault();var t,n={},c=Object(ve.a)(new FormData(e.target).entries());try{for(c.s();!(t=c.n()).done;){var i=Object(d.a)(t.value,2),l=i[0],r=i[1];n[l]=r}}catch(o){c.e(o)}finally{c.f()}n.password&&n.password!==n.confirm_password?null===s||void 0===s||s():(n["address.city"]&&navigator.geolocation.getCurrentPosition((function(e){var t=e.coords.latitude,c=e.coords.longitude;n["address.location"]={type:"Point",coordinates:[c,t]}})),fetch("/api/editUserProfile",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){return e.json()})).then((function(e){var t=e.user;t?(a(t),j(!1)):alert("someting went wrong")})).catch((function(e){console.log(e),alert("someting went wrong")})))},children:[o?Object(u.jsx)("div",{className:"inputs",children:n}):Object(u.jsx)("p",{className:"currentValue",children:c}),Object(u.jsx)("div",{className:"btns",children:o?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("button",{type:"submit",children:"Save changes"},"submit"),Object(u.jsx)("button",{type:"button",onClick:function(){return j(!1)},children:"Cancel"},"cancel")]}):Object(u.jsx)("button",{type:"button",onClick:function(){return j(!0)},children:"Edit"},"edit")})]})]})},ke=function(e){e.history,e.match,e.location;var t,n,c,s,a=Object(l.useContext)(h),i=a.user,r=a.setUser,o=Object(l.useState)(!1),j=Object(d.a)(o,2),b=j[0],O=j[1],m=Object(l.useState)(null),f=Object(d.a)(m,2),g=f[0],v=f[1],N=function(e){(function(e){return ye.apply(this,arguments)})({googleId:e.googleId}).then((function(t){r((function(t){return Object(x.a)(Object(x.a)({},t),{},{googleId:e.googleId})})),v(Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("button",{onClick:function(){return v(null)},children:"Okay"}),Object(u.jsxs)("div",{children:[Object(u.jsx)(w,{}),Object(u.jsx)("h4",{children:"Google account successfully connected."})]})]}))})).catch((function(e){console.log(e),v(Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("button",{onClick:function(){return v(null)},children:"Okay"}),Object(u.jsxs)("div",{children:[Object(u.jsx)(C,{}),Object(u.jsx)("h4",{children:"Could not connect Google account."})]})]}))}))};return Object(u.jsxs)("div",{className:"profileContainer",children:[Object(u.jsxs)("div",{className:"benner",children:[Object(u.jsxs)("div",{className:"profileImg",children:[Object(u.jsx)("img",{src:i.profileImg}),Object(u.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"91.832",height:"25.468",viewBox:"0 0 91.832 25.468",children:Object(u.jsxs)("g",{id:"Path_1937","data-name":"Path 1937",transform:"translate(15.429 -9.647)",fill:"#fff",children:[Object(u.jsx)("path",{d:"M 29.79687690734863 34.6146240234375 C 22.21588897705078 34.6146240234375 13.43720626831055 32.0111198425293 5.0779709815979 27.28368377685547 C -2.8753981590271 22.78578186035156 -9.78753662109375 16.7585563659668 -14.48426628112793 10.24203777313232 C -13.95890235900879 10.24473857879639 -13.30369663238525 10.25548648834229 -12.80753517150879 10.26361274719238 C -12.44524097442627 10.26955413818359 -12.15906429290771 10.27424812316895 -12.02891159057617 10.27424812316895 C -11.93940830230713 10.27424812316895 -11.86373233795166 10.26253128051758 -11.79978466033936 10.24241733551025 C -11.48864650726318 10.21196746826172 -10.04010391235352 10.17821311950684 -5.149840831756592 10.17821311950684 C -1.226676225662231 10.17821311950684 4.093100070953369 10.19837760925293 9.725229263305664 10.21973037719727 C 16.20444107055664 10.24428367614746 23.54814720153809 10.27211856842041 29.79687690734863 10.27211856842041 C 31.89767646789551 10.27211856842041 43.68988800048828 10.22107124328613 56.17448806762695 10.16702461242676 L 59.24650192260742 10.15374183654785 C 60.32665252685547 10.14907169342041 61.61424255371094 10.14680099487305 63.18285369873047 10.14680099487305 C 64.99295043945313 10.14680099487305 66.92156219482422 10.14978885650635 68.78666687011719 10.15269470214844 C 70.55825042724609 10.1554479598999 72.23158264160156 10.15804767608643 73.72422027587891 10.15804767608643 C 74.4501953125 10.15804767608643 75.08247375488281 10.1574182510376 75.63590240478516 10.15613842010498 C 74.24596405029297 13.15391826629639 71.95748138427734 16.1362361907959 68.82386779785156 19.03109550476074 C 65.67525482177734 21.9398250579834 61.6738166809082 24.71903610229492 57.25215911865234 27.06828308105469 C 52.91740798950195 29.37135314941406 48.15610122680664 31.27616500854492 43.48295974731445 32.57678985595703 C 38.69290161132813 33.90995407104492 33.96032333374023 34.6146240234375 29.79687690734863 34.6146240234375 Z",stroke:"none"}),Object(u.jsx)("path",{d:"M 63.18235397338867 10.64679336547852 C 61.61428070068359 10.64679336547852 60.32755279541016 10.64906692504883 59.24865341186523 10.65373229980469 L 56.18099212646484 10.6670036315918 C 43.69374084472656 10.72105407714844 31.89901733398438 10.77211761474609 29.79687881469727 10.77211761474609 C 23.54719161987305 10.77211761474609 16.2029914855957 10.74428176879883 9.723331451416016 10.71971893310547 C 4.091693878173828 10.69837951660156 -1.227619171142578 10.67821884155273 -5.149848937988281 10.67821884155273 C -9.844169616699219 10.67821884155273 -11.33226013183594 10.70873641967773 -11.7083740234375 10.73677062988281 C -11.80277252197266 10.76053237915039 -11.90915679931641 10.77424240112305 -12.0289306640625 10.77424240112305 C -12.16323089599609 10.77424240112305 -12.45131683349609 10.7695198059082 -12.81605529785156 10.76354217529297 C -13.01943206787109 10.76021194458008 -13.24966430664063 10.75643920898438 -13.48653411865234 10.75296401977539 C -8.851593017578125 16.903076171875 -2.239547729492188 22.57095718383789 5.324104309082031 26.84845542907715 C 13.60947799682617 31.53411865234375 22.30074310302734 34.11461639404297 29.79687881469727 34.11461639404297 C 33.91565704345703 34.11461639404297 38.60186767578125 33.41628265380859 43.34890747070313 32.0950927734375 C 47.98773193359375 30.80401802062988 52.71426773071289 28.91309356689453 57.0175666809082 26.62672996520996 C 61.40182876586914 24.29735565185547 65.3670654296875 21.5438175201416 68.48458099365234 18.6638298034668 C 71.32099151611328 16.04351997375488 73.45128631591797 13.35661125183105 74.83492279052734 10.65748596191406 C 74.4908447265625 10.65786743164063 74.12125396728516 10.65805435180664 73.72370147705078 10.65805435180664 C 72.23068237304688 10.65805435180664 70.55716705322266 10.65545654296875 68.78539276123047 10.65269470214844 C 66.92047119140625 10.6497917175293 64.9920654296875 10.64679336547852 63.18235397338867 10.64679336547852 M 63.18235778808594 9.646797180175781 C 66.69034576416016 9.646797180175781 70.639892578125 9.658050537109375 73.72370910644531 9.658050537109375 C 74.72272491455078 9.658050537109375 75.63052368164063 9.656867980957031 76.4033203125 9.653743743896484 C 70.7041015625 23.3221435546875 47.19384002685547 35.11461639404297 29.79687881469727 35.11461639404297 C 13.80905532836914 35.11461639404297 -5.7138671875 23.84020614624023 -15.427734375 9.772117614746094 C -15.45098876953125 9.749141693115234 -15.14891815185547 9.741405487060547 -14.71451568603516 9.741401672363281 C -13.8193359375 9.741401672363281 -12.36181640625 9.774246215820313 -12.02893829345703 9.774246215820313 C -11.98212432861328 9.774246215820313 -11.95759582519531 9.773597717285156 -11.9599609375 9.772117614746094 C -12.07225799560547 9.701694488525391 -9.402595520019531 9.678211212158203 -5.14984130859375 9.678211212158203 C 3.356430053710938 9.678211212158203 18.19854354858398 9.772117614746094 29.79687881469727 9.772117614746094 C 32.07231903076172 9.772117614746094 46.01445388793945 9.710941314697266 59.24433135986328 9.653743743896484 C 60.42824935913086 9.648624420166016 61.76977157592773 9.646797180175781 63.18235778808594 9.646797180175781 Z",stroke:"none",fill:"#336cf9"})]})}),Object(u.jsx)("input",{type:"file",accept:".jpg, .png, .jpeg",onChange:function(e){if(e.target.files[0]){var t=URL.createObjectURL(e.target.files[0]);r((function(e){return Object(x.a)(Object(x.a)({},e),{},{profileImg:t})}))}}}),Object(u.jsx)("label",{children:"Edit"})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("p",{className:"name",children:i.firstName+" "+i.lastName}),Object(u.jsxs)("p",{className:"id",children:["Delivery pay ID: ",i.userId||i._id]})]})]}),Object(u.jsxs)("div",{className:"settings",children:[Object(u.jsx)("div",{className:"head",children:"Account Settings"}),Object(u.jsxs)("ul",{children:[Object(u.jsx)(we,{label:"Name",fields:Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("section",{children:Object(u.jsx)("input",{placeholder:"First name",defaultValue:i.firstName,name:"firstName",required:!0})}),Object(u.jsx)("section",{children:Object(u.jsx)("input",{placeholder:"last name",defaultValue:i.lastName,name:"lastName",required:!0})})]}),value:i.firstName+" "+i.lastName}),Object(u.jsx)(we,{label:"Phone Number",fields:Object(u.jsx)(u.Fragment,{children:Object(u.jsx)("section",{children:Object(u.jsx)("input",{placeholder:"Phone Number",defaultValue:i.phone,name:"phone",required:!0})})}),value:i.phone}),Object(u.jsx)(we,{label:"Email",fields:Object(u.jsx)(u.Fragment,{children:Object(u.jsx)("section",{children:Object(u.jsx)("input",{placeholder:"Phone Number",defaultValue:i.email,name:"email",required:!0})})}),value:i.email}),Object(u.jsx)(we,{label:"Password",onError:function(){return O(!0)},fields:Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("section",{children:Object(u.jsx)("input",{placeholder:"Password",name:"password",required:!0,type:"password",onChange:function(e){return O(!1)}})}),Object(u.jsx)("section",{children:Object(u.jsx)("input",{placeholder:"Confirm password",name:"confirm_password",required:!0,type:"password",onChange:function(e){return O(!1)}})}),b&&Object(u.jsx)("p",{className:"errMsg",children:"Password did not match."})]}),value:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"}),Object(u.jsx)(we,{label:"Gender",fields:Object(u.jsx)(u.Fragment,{children:Object(u.jsx)("section",{children:Object(u.jsx)("input",{placeholder:"Gender",defaultValue:i.gender,name:"gender",required:!0})})}),value:i.gender}),Object(u.jsx)(we,{label:"Age",fields:Object(u.jsx)(u.Fragment,{children:Object(u.jsx)("section",{children:Object(u.jsx)("input",{type:"number",placeholder:"Age",defaultValue:i.age,name:"age",required:!0})})}),value:i.age}),Object(u.jsx)(we,{label:"Address",fields:Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("section",{children:Object(u.jsx)("input",{type:"text",placeholder:"Address",defaultValue:i.address.street,name:"address.street",required:!0})}),Object(u.jsx)("section",{children:Object(u.jsx)("input",{type:"text",placeholder:"City",defaultValue:i.address.city,name:"address.city",required:!0})}),Object(u.jsx)("section",{children:Object(u.jsx)("input",{type:"text",placeholder:"State",defaultValue:i.address.state,name:"address.state",required:!0})}),Object(u.jsx)("section",{children:Object(u.jsx)("input",{type:"number",placeholder:"PIN Code",defaultValue:i.address.zip,name:"address.zip",required:!0})})]}),value:"".concat((null===(t=i.address)||void 0===t?void 0:t.street)||""," ").concat((null===(n=i.address)||void 0===n?void 0:n.city)||""," ").concat((null===(c=i.address)||void 0===c?void 0:c.state)||""," ").concat((null===(s=i.address)||void 0===s?void 0:s.zip)||"")})]})]}),Object(u.jsxs)("div",{className:"paymentMethods",children:[Object(u.jsx)("div",{className:"head",children:"Payment Methods"}),Object(u.jsx)("ul",{className:"methods",children:i.paymentMethods.map((function(e,t){return Object(u.jsx)(Ce,{setMsg:v,method:e},t)}))})]}),Object(u.jsxs)("div",{className:"socials",children:[Object(u.jsx)("div",{className:"head",children:"Connect Social Accounts"}),Object(u.jsx)("ul",{className:"providers",children:Object(u.jsx)(U.a,{disabled:i.googleId,className:"google",clientId:"978249749020-kjq65au1n373ur5oap7n4ebo2fq1jdhq.apps.googleusercontent.com",buttonText:"Connect with Google",onSuccess:N,onFailure:N,cookiePolicy:"single_host_origin"})})]}),Object(u.jsx)(p,{className:"msg",open:g,children:g})]})},Pe=n(32),Se=n(68),_e=Object(Se.io)(),Me=function(e){var t=e.client,n=e.messages,c=e.lastSeen,s=e.userCard,a=Object(O.g)(),i=Object(l.useState)(n.filter((function(e){return new Date(e.createdAt)>new Date(c)})).length||!1),r=Object(d.a)(i,2),o=r[0],j=r[1];return Object(l.useEffect)((function(){(null===t||void 0===t?void 0:t._id)!==(null===s||void 0===s?void 0:s._id)?j(n.filter((function(e){return new Date(e.createdAt)>new Date(c)})).length||!1):j(!1)}),[n]),Object(u.jsx)("li",{className:t._id===(null===s||void 0===s?void 0:s._id)?"active":void 0,onClick:function(){a.push("/account/deals/".concat(t.phone))},children:Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("img",{src:t.profileImg}),Object(u.jsxs)("div",{children:[Object(u.jsx)("p",{className:"name",children:t.firstName+" "+t.lastName}),n.length>0&&Object(u.jsx)("p",{className:"lastMessage",children:n[n.length-1].text}),o&&Object(u.jsx)("p",{className:"unread",children:o})]})]})})},Le=function(e){var t=e.chat,n=(e.setChat,e.userCard),c=e.user,s=e.socket,a=Object(l.useRef)(null),i=Object(O.g)(),r=Object(l.useState)(""),o=Object(d.a)(r,2),j=o[0],h=o[1],b=Object(l.useState)([]),x=Object(d.a)(b,2),f=x[0],g=x[1],v=Object(l.useState)(null),N=Object(d.a)(v,2),y=N[0],P=N[1];return Object(l.useEffect)((function(){var e;null===(e=a.current)||void 0===e||e.scrollBy(0,9999999999999)}),[t]),Object(l.useEffect)((function(){s.on("connectedToRoom",(function(e){var t=e.rooms;g(t)}))}),[]),Object(l.useEffect)((function(){return f.length&&fetch("/api/updateLastSeen",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({rooms:f})}),function(){f.length&&fetch("/api/updateLastSeen",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({rooms:f})})}}),[f]),Object(u.jsxs)("div",{className:"chat",children:[t?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("div",{className:"chatHead",children:[Object(u.jsxs)("div",{className:"profile",children:[Object(u.jsx)("img",{src:n.profileImg}),Object(u.jsxs)("p",{className:"name",children:[n.firstName+" "+n.lastName,Object(u.jsxs)("span",{className:"lastSeen",children:["Last seen:"," ",Object(u.jsx)(K.a,{format:"hh:mma, MMM DD",children:n.lastSeen})]})]})]}),Object(u.jsx)(m.b,{className:"pay",to:"/account/deals/".concat(n.phone,"/pay"),children:"Pay"})]}),Object(u.jsx)("div",{className:"chatWrapper",ref:a,children:Object(u.jsx)("ul",{className:"chats",children:t.map((function(e,n){var s,a;if(!e)return null;var i=Math.abs(new Date(e.createdAt).getTime()-new Date(null===(s=t[n+1])||void 0===s?void 0:s.createdAt).getTime())>12e4,l=te()(e.createdAt).format("YYYY-MM-DD")!==te()(null===(a=t[n-1])||void 0===a?void 0:a.createdAt).format("YYYY-MM-DD")||0===n;return Object(u.jsxs)("li",{className:"bubble ".concat(e.from===c._id?"user":"client"),children:[l&&Object(u.jsx)(K.a,{className:"dateStamp",format:"MMM DD, YYYY",children:e.createdAt}),Object(u.jsx)("p",{className:"text",children:e.text}),(i||n===t.length-1)&&Object(u.jsx)(K.a,{className:"timestamp",format:"hh:mm a",children:e.createdAt})]},n)}))})}),Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault(),j&&f.length&&(s.emit("messageToServer",{rooms:f,message:{to:n._id,text:j}}),h(""))},children:[Object(u.jsxs)("section",{children:[Object(u.jsx)("input",{type:"text",value:j,onChange:function(e){return h(e.target.value)}}),Object(u.jsx)("div",{className:"fileUpload",children:Object(u.jsx)("input",{type:"file"})})]}),Object(u.jsx)("button",{type:"submit",children:Object(u.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26.55",height:"25.219",viewBox:"0 0 26.55 25.219",children:Object(u.jsx)("path",{id:"Path_1","data-name":"Path 1",d:"M-242.2-184.285h-13l26.55-10.786-4.252,25.219-5.531-10.637-2.127,4.68v-6.382l7.659-9.148h2.34",transform:"translate(255.198 195.071)",fill:"#fff"})})})]})]}):Object(u.jsxs)("div",{className:"startChat",children:[Object(u.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26.55",height:"25.219",viewBox:"0 0 26.55 25.219",children:Object(u.jsx)("path",{id:"Path_1","data-name":"Path 1",d:"M-242.2-184.285h-13l26.55-10.786-4.252,25.219-5.531-10.637-2.127,4.68v-6.382l7.659-9.148h2.34",transform:"translate(255.198 195.071)",fill:"#707070"})}),Object(u.jsx)("p",{children:"start a chat"})]}),Object(u.jsxs)(p,{className:"milestoneRequest",open:i.location.pathname.match(/^\/account\/deals\/.+\/pay$/),children:[Object(u.jsxs)("div",{className:"head",children:[Object(u.jsx)("p",{className:"modalName",children:"Create Milestone"}),Object(u.jsx)("button",{onClick:function(){i.push("/account/deals/".concat(n.phone))},children:Object(u.jsx)(k,{})})]}),Object(u.jsx)(Nt,{userType:"buyer",searchClient:n,onSuccess:function(e){var t;e.milestone&&i.push("/account/deals/".concat(n.phone)),P(Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("button",{onClick:function(){return P(null)},children:"Okay"}),Object(u.jsxs)("div",{children:[e.milestone?Object(u.jsx)(w,{}):Object(u.jsx)(C,{}),e.milestone&&Object(u.jsxs)("h4",{className:"amount",children:["\u20b9",null===(t=e.milestone)||void 0===t?void 0:t.amount]}),Object(u.jsx)("h4",{children:e.message})]}),e.milestone&&Object(u.jsx)(m.b,{to:"/account/hold",onClick:function(){return P(null)},children:"Check your Delivery pay Hold"})]}))}})]}),Object(u.jsx)(p,{className:"msg",open:y,children:y})]})},Fe=function(e){var t,n=e.history,c=(e.location,e.match),s=Object(l.useContext)(h),a=s.user,i=(s.setUser,Object(l.useState)([])),r=Object(d.a)(i,2),o=r[0],j=r[1],b=Object(l.useState)(null),O=Object(d.a)(b,2),m=O[0],p=O[1],f=Object(l.useState)(null),g=Object(d.a)(f,2),N=g[0],y=g[1];return Object(l.useEffect)((function(){m&&(y(null===m||void 0===m?void 0:m.messages),_e.emit("initiateChat",{client_id:null===m||void 0===m?void 0:m._id}))}),[m]),Object(l.useEffect)((function(){fetch("/api/getChat").then((function(e){return e.json()})).then((function(e){j((function(){return e.map((function(e){return Object(x.a)(Object(x.a)({},e),"")}))})),n.push()})).catch((function(e){console.log(e)})),_e.on("connect",(function(){console.log("connected")})),_e.on("disconnect",(function(){console.log("disconnected from socket")}))}),[]),Object(l.useEffect)((function(){if(c.params.phone){var e=o.find((function(e){return e.client.phone===c.params.phone}));if(e){var t=e.client,n=e.messages,s=e.status,a=e.lastSeen;p(Object(x.a)(Object(x.a)({},t),{},{status:s,messages:n,lastSeen:a}))}}}),[c.params,o]),Object(l.useEffect)((function(){_e.on("messageToUser",(function(e){e.from&&j((function(t){return t.map((function(t){if(e.from===a._id){if(t.client._id===e.to)return Object(x.a)(Object(x.a)({},t),{},{messages:[].concat(Object(v.a)(t.messages),[e])})}else if(t.client._id===e.from)return Object(x.a)(Object(x.a)({},t),{},{messages:[].concat(Object(v.a)(t.messages),[e])});return t}))}))})),_e.emit("joinRooms",{rooms:o.map((function(e){return e._id}))})}),[]),Object(u.jsxs)("div",{className:"chatContainer",children:[Object(u.jsxs)("div",{className:"contactsContainer",children:[Object(u.jsx)("div",{className:"userCard",children:m?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("div",{className:"profile",children:[Object(u.jsx)("img",{src:m.profileImg}),Object(u.jsxs)("div",{className:"details",children:[Object(u.jsx)("p",{className:"name",children:m.firstName+" "+m.lastName}),Object(u.jsx)("a",(t={className:"phone",href:"tel:".concat(m.phone)},Object(Pe.a)(t,"className","phone"),Object(Pe.a)(t,"children",m.phone),t)),Object(u.jsx)("a",{href:"mailto:".concat(m.email),className:"email",children:m.email}),Object(u.jsx)("p",{className:"add",children:"".concat(m.address.city||""," ").concat(m.address.country||"")})]})]}),Object(u.jsxs)("div",{className:"clas",children:[Object(u.jsx)("p",{className:"status",children:m.status}),Object(u.jsx)("button",{children:"Chat"})]})]}):Object(u.jsx)("p",{className:"userCard placeholder",children:"User card"})}),Object(u.jsx)("p",{className:"label",children:"Messages"}),Object(u.jsx)("div",{className:"peopleWrapper",children:Object(u.jsxs)("ul",{className:"people",children:[o.map((function(e){var t=e.client,n=e.messages,c=e.status,s=e.lastSeen;return Object(u.jsx)(Me,{client:t,messages:n,status:c,lastSeen:s,userCard:m},t._id)})),0===o.length&&Object(u.jsx)("p",{className:"placeholder",children:"Start making payments now."})]})})]}),Object(u.jsx)(Le,{chat:N,userCard:m,user:a,socket:_e,setChat:y})]})},De=n(69),Ae=n.n(De),Re=n(128),qe=n(129),Be=n(130),Te=n(131),Ze=n(132),Ee=n(133),Ue=n(134),Ie=n(135),He=n(136),Ve=n(137),We=n(138),Ge=n(139),Je=n(140),Ye=n(141),ze=n(142),$e=n(143),Ke=n(144),Xe=n(145),Qe=n(146),et=n(147),tt=n(148),nt=n(149),ct=n(150),st=n(151),at=n(152),it=n(153),lt=n(154),rt=n(155),ot=n(156),jt=n(157),dt=n(158),ut=n(159),ht=n(160),bt=n(161),Ot=n(162),mt=n(163),xt=n(164),pt=n(165);n(125);var ft=function(){var e=Object(O.g)(),t=Object(l.useState)(""),n=Object(d.a)(t,2),c=n[0],s=n[1],a=Object(l.useState)(""),i=Object(d.a)(a,2),r=i[0],o=i[1],j=Object(l.useState)([]),h=Object(d.a)(j,2),b=h[0],x=h[1],f=Object(l.useState)([]),g=Object(d.a)(f,2),v=g[0],N=g[1],y=Object(l.useState)(null),P=Object(d.a)(y,2),S=P[0],_=P[1],M=Object(l.useState)(null),L=Object(d.a)(M,2),F=L[0],D=L[1],A=Object(l.useCallback)((function(e){s(e.target.value),fetch("/api/getUsers?q=".concat(c)).then((function(e){return e.json()})).then((function(e){e&&x(e)})),""===e.target.value&&x([])}),[c]),R=Object(l.useCallback)((function(){c.match(/^\+?[789]\d{9}$/)?fetch("/api/inviteUser?q=".concat(c,"origin=").concat(window.location.origin)).then((function(e){return e.json()})).then((function(e){"ok"===e.code?D(Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("button",{onClick:function(){return D(null)},children:"Okay"}),Object(u.jsxs)("div",{children:[Object(u.jsx)(w,{}),Object(u.jsx)("h4",{children:"Invitation sent."})]})]})):D(Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("button",{onClick:function(){return D(null)},children:"Okay"}),Object(u.jsxs)("div",{children:[Object(u.jsx)(C,{}),Object(u.jsx)("h4",{children:"Invitation could not be sent. Please try again."})]})]}))})).catch((function(e){console.log(e),D(Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("button",{onClick:function(){return D(null)},children:"Okay"}),Object(u.jsxs)("div",{children:[Object(u.jsx)(C,{}),Object(u.jsx)("h4",{children:"Invitation could not be sent. Make sure you're online."})]})]}))})):D(Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("button",{onClick:function(){return D(null)},children:"Okay"}),Object(u.jsxs)("div",{children:[Object(u.jsx)(C,{}),Object(u.jsx)("h4",{children:"Enter a valid phone number to send invitation."})]})]}))}),[c]);return Object(l.useEffect)((function(){fetch("/api/recentPayments").then((function(e){return e.json()})).then((function(e){N(e)})).catch((function(e){console.log(e)}))}),[]),Object(l.useEffect)((function(){"/account/home/pay"!==e.location.pathname||S||e.push("/account/home")}),[]),Object(u.jsxs)("div",{className:"homeContainer",children:[Object(u.jsxs)("div",{className:"benner",children:[Object(u.jsx)("h4",{children:"Start transactions with Delivery pay"}),Object(u.jsx)("p",{children:"Let us help you make the safest transaction"})]}),Object(u.jsxs)("div",{className:"userType",children:[Object(u.jsxs)("div",{className:"option buyer ".concat("buyer"===r&&"active"),children:[Object(u.jsx)("img",{src:"/buyer.png"}),Object(u.jsxs)("div",{className:"btn",onClick:function(e){return o("buyer")},children:[Object(u.jsx)("p",{children:"I am a Buyer "}),Object(u.jsx)("div",{className:"radial",children:"buyer"===r&&Object(u.jsx)("div",{className:"fill"})})]})]}),Object(u.jsxs)("div",{className:"option seller ".concat("seller"===r&&"active"),children:[Object(u.jsx)("img",{src:"/seller.png"}),Object(u.jsxs)("div",{className:"btn",onClick:function(e){return o("seller")},children:[Object(u.jsx)("p",{children:"I am a Seller "}),Object(u.jsx)("div",{className:"radial",children:"seller"===r&&Object(u.jsx)("div",{className:"fill"})})]})]})]}),"buyer"===r&&Object(u.jsx)("div",{className:"search",children:Object(u.jsxs)("form",{onSubmit:function(e){return e.preventDefault()},children:[Object(u.jsx)("label",{htmlFor:"search",children:"Start buying with Delivery pay"}),Object(u.jsxs)("section",{children:[Object(u.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"17.9",height:"17.9",viewBox:"0 0 17.9 17.9",children:Object(u.jsx)("path",{id:"Path_208","data-name":"Path 208",d:"M17.9,16.324l-3.715-3.715a7.708,7.708,0,0,0,1.576-4.728A7.832,7.832,0,0,0,7.881,0,7.832,7.832,0,0,0,0,7.881a7.832,7.832,0,0,0,7.881,7.881,7.708,7.708,0,0,0,4.728-1.576L16.324,17.9ZM2.252,7.881A5.574,5.574,0,0,1,7.881,2.252a5.574,5.574,0,0,1,5.629,5.629,5.574,5.574,0,0,1-5.629,5.629A5.574,5.574,0,0,1,2.252,7.881Z",transform:"translate(0)",fill:"#b9b9b9"})}),Object(u.jsx)("input",{label:"search",required:!0,placeholder:"Search with Delivery pay ID or Phone Number",onBlur:function(){setTimeout((function(){return x([])}),500)},onChange:A})]}),b.length?Object(u.jsxs)("ul",{className:"searchResult",children:[b.map((function(e,t){return Object(u.jsxs)("li",{children:[Object(u.jsxs)("div",{className:"profile",children:[Object(u.jsx)("img",{src:e.profileImg}),Object(u.jsxs)("p",{className:"name",children:[e.firstName+" "+e.lastName,Object(u.jsx)("span",{className:"phone",children:e.phone})]})]}),Object(u.jsx)(m.b,{className:"sendReq",to:{pathname:"/account/home/pay"},onClick:function(){return _(e)},children:"Create Milestone"})]},t)})),0===b.length&&Object(u.jsxs)("li",{children:[Object(u.jsx)("div",{className:"profile",children:Object(u.jsx)("p",{className:"name",children:c})}),Object(u.jsx)(m.b,{className:"sendReq",onClick:R,to:"#",children:"Invite"})]})]}):null,c&&0===b.length&&Object(u.jsx)("ul",{className:"searchResult",children:Object(u.jsxs)("li",{children:[Object(u.jsxs)("div",{className:"profile",children:[Object(u.jsx)("img",{src:"/profile-user.jpg"}),Object(u.jsx)("p",{className:"name",children:c})]}),Object(u.jsx)(m.b,{className:"sendReq",onClick:R,to:"#",children:"Invite"})]})})]})}),"seller"===r&&Object(u.jsx)("div",{className:"search",children:Object(u.jsxs)("form",{onSubmit:function(e){return e.preventDefault()},children:[Object(u.jsx)("label",{htmlFor:"search",children:"Start selling with Delivery pay"}),Object(u.jsxs)("section",{children:[Object(u.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"17.9",height:"17.9",viewBox:"0 0 17.9 17.9",children:Object(u.jsx)("path",{id:"Path_208","data-name":"Path 208",d:"M17.9,16.324l-3.715-3.715a7.708,7.708,0,0,0,1.576-4.728A7.832,7.832,0,0,0,7.881,0,7.832,7.832,0,0,0,0,7.881a7.832,7.832,0,0,0,7.881,7.881,7.708,7.708,0,0,0,4.728-1.576L16.324,17.9ZM2.252,7.881A5.574,5.574,0,0,1,7.881,2.252a5.574,5.574,0,0,1,5.629,5.629,5.574,5.574,0,0,1-5.629,5.629A5.574,5.574,0,0,1,2.252,7.881Z",transform:"translate(0)",fill:"#b9b9b9"})}),Object(u.jsx)("input",{label:"search",required:!0,placeholder:"Search with Delivery pay ID or Phone Number",onBlur:function(){setTimeout((function(){return x([])}),500)},onChange:A})]}),b.length?Object(u.jsx)("ul",{className:"searchResult",children:b.map((function(e,t){return Object(u.jsxs)("li",{children:[Object(u.jsxs)("div",{className:"profile",children:[Object(u.jsx)("img",{src:e.profileImg}),Object(u.jsxs)("p",{className:"name",children:[e.firstName+" "+e.lastName,Object(u.jsx)("span",{className:"phone",children:e.phone})]})]}),Object(u.jsx)(m.b,{className:"sendReq",onClick:function(){return _(e)},to:{pathname:"/account/home/pay"},children:"seller"===r?"Request milestone":"Create milestone"})]},t)}))}):null,c&&0===b.length&&Object(u.jsx)("ul",{className:"searchResult",children:Object(u.jsxs)("li",{children:[Object(u.jsxs)("div",{className:"profile",children:[Object(u.jsx)("img",{src:"/profile-user.jpg"}),Object(u.jsx)("p",{className:"name",children:c})]}),Object(u.jsx)(m.b,{className:"sendReq",onClick:R,to:"#",children:"Invite"})]})})]})}),v.length>0&&r&&Object(u.jsxs)("div",{className:"recentPayments",children:[Object(u.jsx)("p",{className:"label",children:"Recent Payments"}),Object(u.jsx)("ul",{className:"payments",children:v.map((function(e){return Object(u.jsx)("li",{children:Object(u.jsxs)(m.b,{to:"/account/home/pay",onClick:function(){_(e)},children:[Object(u.jsx)("img",{src:e.profileImg}),Object(u.jsx)("p",{className:"name",children:e.firstName+" "+e.lastName})]})},e._id)}))})]}),Object(u.jsx)(O.b,{path:"/account/home/pay",children:Object(u.jsxs)(p,{open:!0,className:"milestoneRequest",children:[Object(u.jsxs)("div",{className:"head",children:[Object(u.jsx)("p",{className:"modalName",children:"seller"===r?"Request Milestone":"Create Milestone"}),Object(u.jsx)("button",{onClick:function(){e.push("/account/home"),_(null)},children:Object(u.jsx)(k,{})})]}),Object(u.jsx)(Nt,{userType:r,searchClient:S,onSuccess:function(t){var n;e.push("/account/home"),D(Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("button",{onClick:function(){return D(null)},children:"Okay"}),Object(u.jsxs)("div",{children:[t.milestone?Object(u.jsx)(w,{}):Object(u.jsx)(C,{}),t.milestone&&Object(u.jsxs)("h4",{className:"amount",children:["\u20b9",null===(n=t.milestone)||void 0===n?void 0:n.amount]}),Object(u.jsx)("h4",{children:t.message})]}),t.milestone&&Object(u.jsx)(m.b,{to:"/account/hold",onClick:function(){return D(null)},children:"Check your Delivery pay Hold"})]}))}})]})}),Object(u.jsx)(p,{className:"msg",open:F,children:F})]})},gt=function(e){var t,n,c,s,a,i,r,o=e.client,j=e.onSuccess,h=e.onCancel,b=Object(l.useState)(o?o.firstName+" "+o.lastName:""),O=Object(d.a)(b,2),m=O[0],x=O[1],p=Object(l.useState)((null===o||void 0===o?void 0:o.phone)||""),f=Object(d.a)(p,2),g=f[0],v=f[1],N=Object(l.useState)((null===o||void 0===o||null===(t=o.address)||void 0===t?void 0:t.zip)||""),y=Object(d.a)(N,2),C=y[0],w=y[1],k=Object(l.useState)((null===o||void 0===o||null===(n=o.address)||void 0===n?void 0:n.locality)||""),P=Object(d.a)(k,2),S=P[0],_=P[1],M=Object(l.useState)((null===o||void 0===o||null===(c=o.address)||void 0===c?void 0:c.street)||""),L=Object(d.a)(M,2),F=L[0],D=L[1],A=Object(l.useState)((null===o||void 0===o||null===(s=o.address)||void 0===s?void 0:s.city)||""),R=Object(d.a)(A,2),q=R[0],B=R[1],T=Object(l.useState)((null===o||void 0===o||null===(a=o.address)||void 0===a?void 0:a.state)||""),Z=Object(d.a)(T,2),E=Z[0],U=Z[1],I=Object(l.useState)((null===o||void 0===o||null===(i=o.address)||void 0===i?void 0:i.landmark)||""),H=Object(d.a)(I,2),V=H[0],W=H[1],G=Object(l.useState)((null===o||void 0===o||null===(r=o.address)||void 0===r?void 0:r.altPhone)||""),J=Object(d.a)(G,2),Y=J[0],z=J[1];return Object(u.jsxs)("form",{className:"addressForm",onSubmit:function(e){e.preventDefault(),null===j||void 0===j||j({address:{name:m,phone:g,street:F,city:q,state:E,zip:C,locality:S,landmark:V}})},children:[Object(u.jsxs)("section",{children:[Object(u.jsx)("label",{htmlFor:"name",children:"Full Name"}),Object(u.jsx)("input",{value:m,onChange:function(e){return x(e.target.value)},type:"text",name:"name",required:!0})]}),Object(u.jsxs)("section",{children:[Object(u.jsx)("label",{htmlFor:"phone",children:"Phone Number"}),Object(u.jsx)("input",{value:g,onChange:function(e){return v(e.target.value)},type:"tel",name:"phone",required:!0})]}),Object(u.jsxs)("section",{children:[Object(u.jsx)("label",{htmlFor:"zip",children:"PIN Code"}),Object(u.jsx)("input",{value:C,onChange:function(e){return w(e.target.value)},type:"number",name:"zip",required:!0})]}),Object(u.jsxs)("section",{children:[Object(u.jsx)("label",{htmlFor:"locality",children:"Locality"}),Object(u.jsx)("input",{value:S,onChange:function(e){return _(e.target.value)},type:"text",name:"locality",required:!0})]}),Object(u.jsxs)("section",{className:"street",children:[Object(u.jsx)("label",{htmlFor:"address",children:"Address"}),Object(u.jsx)("textarea",{value:F,onChange:function(e){return D(e.target.value)},resiz:"off",type:"text",name:"address",required:!0})]}),Object(u.jsxs)("section",{children:[Object(u.jsx)("label",{htmlFor:"city",children:"City"}),Object(u.jsx)("input",{value:q,onChange:function(e){return B(e.target.value)},type:"text",name:"city",required:!0})]}),Object(u.jsxs)("section",{children:[Object(u.jsx)("label",{htmlFor:"state",children:"State"}),Object(u.jsx)("input",{value:E,onChange:function(e){return U(e.target.value)},type:"text",name:"state",required:!0})]}),Object(u.jsxs)("section",{children:[Object(u.jsx)("label",{htmlFor:"landmark",children:"Landmark (Optional)"}),Object(u.jsx)("input",{value:V,onChange:function(e){return W(e.target.value)},type:"text",name:"landmark"})]}),Object(u.jsxs)("section",{children:[Object(u.jsx)("label",{htmlFor:"altPhone",children:"Alternate Phone (Optional)"}),Object(u.jsx)("input",{value:Y,onChange:function(e){return z(e.target.value)},type:"tel",name:"altPhone"})]}),Object(u.jsx)("button",{className:"save",children:"Save"}),Object(u.jsx)("button",{className:"cancel",type:"button",onClick:function(){return null===h||void 0===h?void 0:h()},children:"Cancel"}),Object(u.jsx)("section",{className:"pBtm"})]})};var vt=function(){var e=Object(l.useContext)(h),t=e.user,n=e.setUser,c=Object(O.g)(),s=Object(l.useRef)(null),a=Object(l.useState)(!1),i=Object(d.a)(a,2),r=i[0],o=i[1],j=Object(l.useState)(!1),b=Object(d.a)(j,2),f=b[0],g=b[1],v=Object(l.useState)(!1),N=Object(d.a)(v,2),y=N[0],w=N[1],k=Object(l.useState)(!1),P=Object(d.a)(k,2),S=P[0],_=P[1],M=Object(l.useState)(null),L=Object(d.a)(M,2),F=(L[0],L[1]);Object(l.useEffect)((function(){y&&fetch("/api/editUserProfile",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({notificationLastRead:new Date})}).then((function(e){return e.json()})).then((function(e){console.log(e),e.user&&n((function(t){return Object(x.a)(Object(x.a)({},t),{},{notificationLastRead:e.user.notificationLastRead})}))})).catch((function(e){console.log(e)}))}),[y]),Object(l.useEffect)((function(){t.notifications.find((function(e){return new Date(e.createdAt)>new Date(t.notificationLastRead)}))&&_(!0),y&&_(!1)}),[y,t]);var D="".concat(window.location.origin,"/u/join?referer=").concat(t._id);return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("div",{className:"profile",children:[Object(u.jsx)("button",{className:"bell ".concat(S?"unread":""),onClick:function(){return w(!0)},children:Object(u.jsx)("svg",{id:"bell",xmlns:"http://www.w3.org/2000/svg",width:"15.918",height:"16",viewBox:"0 0 15.918 16",children:Object(u.jsx)("path",{id:"Path_1","data-name":"Path 1",d:"M15,14H10a2,2,0,0,1-4,0H1a.961.961,0,0,1-.9-.7,1.068,1.068,0,0,1,.3-1.1A4.026,4.026,0,0,0,2,9V6A6,6,0,0,1,14,6V9a4.026,4.026,0,0,0,1.6,3.2.947.947,0,0,1,.3,1.1A.961.961,0,0,1,15,14Z",transform:"translate(-0.063)",fill:"#fff",fillRule:"evenodd"})})}),Object(u.jsx)("p",{className:"name",children:(null===t||void 0===t?void 0:t.firstName)+" "+(null===t||void 0===t?void 0:t.lastName)||t.phone}),Object(u.jsx)("img",{src:null===t||void 0===t?void 0:t.profileImg,className:"avatar",onClick:function(){return o(!r)}}),r&&Object(u.jsxs)("div",{className:"menu",ref:s,children:[Object(u.jsx)(m.b,{className:"aboutUs",to:"/aboutUs",children:"More about us"}),Object(u.jsxs)("div",{className:"referral",children:[Object(u.jsx)("button",{onClick:function(){g(!0)},children:"Invite now"}),Object(u.jsx)("p",{children:"Refer and earn flat \u20b950/- cashback to your wallet"})]}),Object(u.jsxs)("button",{className:"logout",onClick:function(){fetch("/api/logout").then((function(e){return e.json()})).then((function(e){n(null),c.push("/")})).catch((function(e){console.log(e),F(Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("button",{onClick:function(){return F(null)},children:"Okay"}),Object(u.jsxs)("div",{children:[Object(u.jsx)(C,{}),Object(u.jsx)("h4",{children:"Could not logout."})]})]}))}))},children:["Logout",Object(u.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"31.702",height:"31.702",viewBox:"0 0 31.702 31.702",children:Object(u.jsx)("path",{id:"Path_1758","data-name":"Path 1758",d:"M15.487,25.174l2.483,2.483,8.806-8.806L17.97,10.045l-2.483,2.483,4.544,4.562H3v3.522H20.031ZM31.18,3H6.522A3.521,3.521,0,0,0,3,6.522v7.045H6.522V6.522H31.18V31.18H6.522V24.135H3V31.18A3.521,3.521,0,0,0,6.522,34.7H31.18A3.533,3.533,0,0,0,34.7,31.18V6.522A3.533,3.533,0,0,0,31.18,3Z",transform:"translate(-3 -3)",fill:"#fc0660"})})]})]}),y&&Object(u.jsx)("ul",{className:"notiWrapper",children:t.notifications.reverse().map((function(e,t){return Object(u.jsxs)("li",{children:[Object(u.jsx)(K.a,{format:"hh:mm",children:e.createdAt}),Object(u.jsx)("p",{className:"title",children:e.title}),Object(u.jsx)("p",{className:"body",children:e.body})]},t)}))})]}),(r||y)&&Object(u.jsx)("div",{className:"backdrop",onClick:function(){o(!1),w(!1)}}),Object(u.jsxs)(p,{className:"invite",open:f,onBackdropClick:function(){return g(!1)},children:[Object(u.jsx)("div",{className:"imgWrapper",children:Object(u.jsx)(Ae.a,{value:D,size:250,renderAs:"svg"})}),Object(u.jsxs)("div",{className:"shareBtns",children:[Object(u.jsx)(Re.a,{url:D,children:Object(u.jsx)(qe.a,{})}),Object(u.jsx)(Be.a,{url:D,children:Object(u.jsx)(Te.a,{})}),Object(u.jsx)(Ze.a,{url:D,children:Object(u.jsx)(Ee.a,{})}),Object(u.jsx)(Ue.a,{url:D,children:Object(u.jsx)(Ie.a,{})}),Object(u.jsx)(He.a,{url:D,children:Object(u.jsx)(Ve.a,{})}),Object(u.jsx)(We.a,{url:D,children:Object(u.jsx)(Ge.a,{})}),Object(u.jsx)(Je.a,{url:D,children:Object(u.jsx)(Ye.a,{})}),Object(u.jsx)(ze.a,{url:D,children:Object(u.jsx)($e.a,{})}),Object(u.jsx)(Ke.a,{url:D,children:Object(u.jsx)(Xe.a,{})}),Object(u.jsx)(Qe.a,{url:D,children:Object(u.jsx)(et.a,{})}),Object(u.jsx)(tt.a,{url:D,children:Object(u.jsx)(nt.a,{})}),Object(u.jsx)(ct.a,{url:D,children:Object(u.jsx)(st.a,{})}),Object(u.jsx)(at.a,{url:D,children:Object(u.jsx)(it.a,{})}),Object(u.jsx)(lt.a,{url:D,children:Object(u.jsx)(rt.a,{})}),Object(u.jsx)(ot.a,{url:D,children:Object(u.jsx)(jt.a,{})}),Object(u.jsx)(dt.a,{url:D,children:Object(u.jsx)(ut.a,{})}),Object(u.jsx)(ht.a,{url:D,children:Object(u.jsx)(bt.a,{})}),Object(u.jsx)(Ot.a,{url:D,children:Object(u.jsx)(mt.a,{})}),Object(u.jsx)(xt.a,{url:D,children:Object(u.jsx)(pt.a,{})})]})]})]})},Nt=function(e){var t,n,c,s,a=e.userType,i=e.searchClient,r=e.onSuccess,o=Object(l.useContext)(h),j=o.user,b=(o.setUser,Object(l.useState)("")),O=Object(d.a)(b,2),m=O[0],f=O[1],g=Object(l.useState)("product"),N=Object(d.a)(g,2),y=N[0],w=(N[1],Object(l.useState)(!1)),P=Object(d.a)(w,2),S=P[0],_=P[1],M=Object(l.useState)([]),L=Object(d.a)(M,2),F=L[0],R=L[1],q=Object(l.useState)(Object(x.a)({},"seller"===a?i:j)),B=Object(d.a)(q,2),T=B[0],E=B[1],U=Object(l.useState)((new Date).toISOString().substring(0,16)),I=Object(d.a)(U,2),H=I[0],V=I[1],W=Object(l.useState)(""),G=Object(d.a)(W,2),J=G[0],Y=G[1],z=Object(l.useState)(""),$=Object(d.a)(z,2),K=$[0],X=$[1],Q=Object(l.useState)(null),ee=Object(d.a)(Q,2),te=ee[0],ne=ee[1],ce=Object(l.useState)([]),se=Object(d.a)(ce,2),ae=se[0],ie=se[1],le=Object(l.useState)(!1),re=Object(d.a)(le,2),oe=re[0],je=re[1],de=Object(l.useRef)(null),ue=Object(l.useCallback)((function(e){e.preventDefault(),fetch("/api/requestMilestone",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({buyer_id:T._id,amount:K,products:F,dscr:J,deliveryDetail:Object(x.a)(Object(x.a)({phone:T.phone,name:T.firstName+" "+T.lastName},T.address),{},{timeOfDelivery:H})})}).then((function(e){return e.json()})).then((function(e){var t=e.message,n=e.milestone;n?null===r||void 0===r||r({message:t,milestone:n}):ne(Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("button",{onClick:function(){return ne(null)},children:"Okay"}),Object(u.jsxs)("div",{children:[Object(u.jsx)(C,{}),Object(u.jsx)("h4",{children:"Could not create milestone."})]})]}))})).catch((function(e){console.log(e),ne(Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("button",{onClick:function(){return ne(null)},children:"Okay"}),Object(u.jsxs)("div",{children:[Object(u.jsx)(C,{}),Object(u.jsx)("h4",{children:"Could not create milestone. Make sure you're online."})]})]}))}))}),[T,i,K,J,y,H]),he=Object(l.useCallback)((function(e){e.preventDefault(),fetch("/api/createMilestone",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({seller:Object(x.a)({},i),amount:K,dscr:J,deliveryDetail:Object(x.a)(Object(x.a)({phone:T.phone,name:T.firstName+" "+T.lastName},T.address),{},{timeOfDelivery:H})})}).then((function(e){return e.json()})).then((function(e){null===r||void 0===r||r(e)})).catch((function(e){console.log(e),ne(Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("button",{onClick:function(){return ne(null)},children:"Okay"}),Object(u.jsxs)("div",{children:[Object(u.jsx)(C,{}),Object(u.jsx)("h4",{children:"Could not create milestone. Make sure you're online."})]})]}))}))}),[T,i,K,J,y,H]);return Object(l.useEffect)((function(){m&&fetch("/api/products?q=".concat(m,"&perPage=8")).then((function(e){return e.json()})).then((function(e){e.products&&ie(e.products)}))}),[m]),Object(l.useEffect)((function(){0===F.length&&je(!1)}),[F]),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("form",{className:"milestonesForm",onSubmit:"seller"===a?ue:he,children:[Object(u.jsxs)("section",{className:"transactionDetail",children:["seller"===a&&Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("section",{className:"products",children:[Object(u.jsx)("label",{children:"Products"}),Object(u.jsxs)("div",{className:"count",children:[Object(u.jsxs)("p",{className:"totalProduct",children:[F.length," items selected."]}),F.length>0&&Object(u.jsx)("button",{type:"button",className:oe?"open":void 0,onClick:function(){return je(!oe)},children:Object(u.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"11.872",height:"18",viewBox:"0 0 11.872 18",children:Object(u.jsx)("path",{id:"Path_36","data-name":"Path 36",d:"M9,11.872,0,2.725,2.681,0,9,6.423,15.319,0,18,2.725Z",transform:"translate(11.872) rotate(90)",fill:"rgba(0, 0, 0, 0.5)"})})})]}),oe&&Object(u.jsx)("ul",{children:F.map((function(e){return Object(u.jsxs)("li",{children:[Object(u.jsx)("img",{src:e.images[0]}),Object(u.jsxs)("div",{className:"productDetail",children:[Object(u.jsx)("p",{className:"name",children:e.name}),Object(u.jsxs)("p",{className:"price",children:["\u20b9 ",e.price]})]}),Object(u.jsx)("button",{type:"button",className:"btn",onClick:function(){return R((function(t){return t.filter((function(t){return t._id!==e._id}))}))},children:Object(u.jsx)(A,{})})]},e._id)}))})]}),Object(u.jsxs)("section",{className:"productSearch",children:[Object(u.jsx)("label",{children:"Search products"}),Object(u.jsx)("input",{ref:de,type:"text",value:m,onChange:function(e){return f(e.target.value)}}),m&&ae.length>0&&Object(u.jsx)("ul",{className:"productSearchList",children:ae.map((function(e){return Object(u.jsxs)("li",{children:[Object(u.jsx)("img",{src:e.images[0]}),Object(u.jsxs)("div",{className:"productDetail",children:[Object(u.jsx)("p",{className:"name",children:e.name}),Object(u.jsxs)("p",{className:"price",children:["\u20b9 ",e.price]})]}),F.some((function(t){return t._id===e._id}))?Object(u.jsx)("p",{className:"addedLabel",children:"Added"}):Object(u.jsx)("button",{type:"button",className:"btn",onClick:function(){R((function(t){return[].concat(Object(v.a)(t),[e])})),de.current.focus()},children:Object(u.jsx)(D,{})})]},e._id)}))})]})," "]}),Object(u.jsxs)("section",{className:"amount",children:[Object(u.jsx)("label",{children:"Amount"}),Object(u.jsx)(Z,{min:10,defaultValue:0,required:!0,onChange:function(e){return X((+e.target.value).toString())}})]}),Object(u.jsxs)("section",{children:[Object(u.jsx)("label",{children:"Detail"}),Object(u.jsx)("input",{value:J,required:!0,onChange:function(e){return Y(e.target.value)}})]}),Object(u.jsx)("button",{type:"submit",children:"seller"===a?"Request Milestone":"Create Milestone"})]}),Object(u.jsxs)("section",{className:"clientDetail",children:[Object(u.jsx)("img",{src:null===T||void 0===T?void 0:T.profileImg}),Object(u.jsx)("label",{children:"Delivery Address"}),Object(u.jsxs)("div",{className:"detail",onClick:function(){return _(!0)},children:[Object(u.jsx)("button",{type:"button",children:"+ Add/Edit Address"}),Object(u.jsxs)("section",{className:"profileDetail",children:[Object(u.jsx)("p",{className:"name",children:(null===T||void 0===T?void 0:T.firstName)+" "+(null===T||void 0===T?void 0:T.lastName)}),Object(u.jsx)("p",{className:"phone",children:null===T||void 0===T?void 0:T.phone}),Object(u.jsx)("p",{className:"email",children:null===T||void 0===T?void 0:T.email})]}),(null===T||void 0===T||null===(t=T.address)||void 0===t?void 0:t.street)&&Object(u.jsx)("section",{className:"address",children:Object(u.jsxs)("p",{className:"street",children:[null===(n=T.address)||void 0===n?void 0:n.street,", ",null===(c=T.address)||void 0===c?void 0:c.city,","," ",null===(s=T.address)||void 0===s?void 0:s.zip]})})]}),"seller"===a?null:Object(u.jsxs)("div",{className:"sellerInfo",children:[Object(u.jsx)("img",{src:null===i||void 0===i?void 0:i.profileImg}),Object(u.jsx)("label",{children:"Seller Information"}),Object(u.jsx)("div",{className:"detail",children:Object(u.jsxs)("section",{className:"profileDetail",children:[Object(u.jsx)("p",{className:"name",children:(null===i||void 0===i?void 0:i.firstName)+" "+(null===i||void 0===i?void 0:i.lastName)}),Object(u.jsx)("p",{className:"phone",children:null===i||void 0===i?void 0:i.phone}),Object(u.jsx)("p",{className:"email",children:null===i||void 0===i?void 0:i.email})]})})]}),Object(u.jsxs)("div",{className:"deliveryTime",children:[Object(u.jsx)("p",{children:"Delivery Time"}),Object(u.jsx)("input",{value:H,type:"datetime-local",onChange:function(e){return V(e.target.value)}})]})]})]}),Object(u.jsxs)(p,{open:S,className:"addAddress",children:[Object(u.jsxs)("div",{className:"head",children:[Object(u.jsx)("p",{className:"modalName",children:"Add/Edit Address"}),Object(u.jsx)("button",{onClick:function(){_(!1)},children:Object(u.jsx)(k,{})})]}),Object(u.jsx)(gt,{client:T,setClient:E,onSuccess:function(e){E((function(t){return Object(x.a)(Object(x.a)({},t),e)})),_(!1)},onCancel:function(){return _(!1)}})]}),Object(u.jsx)(p,{className:"msg",open:te,children:te})]})},yt=function(e){var t=e.location,n=Object(l.useContext)(h).user;return Object(u.jsxs)("div",{className:"account",children:[Object(u.jsxs)("header",{children:[Object(u.jsx)(m.b,{to:"/",children:Object(u.jsx)("img",{className:"logo",src:"/logo_land.jpg",alt:"Delivery pay logo"})}),Object(u.jsx)(vt,{})]}),Object(u.jsxs)("div",{className:"content",children:[Object(u.jsxs)("ul",{className:"sidebar",children:[Object(u.jsx)("li",{className:"/account"===t.pathname||t.pathname.startsWith("/account/home")?"active":void 0,children:Object(u.jsxs)(m.b,{to:"/account/home",children:[Object(u.jsx)("div",{className:"icon",children:Object(u.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"21.648",height:"21.513",viewBox:"0 0 21.648 21.513",children:Object(u.jsx)("path",{id:"Path_287","data-name":"Path 287",d:"M21.387,10.488A1.079,1.079,0,0,0,21.3,8.979L11.626.289a1.185,1.185,0,0,0-1.576,0L.342,9.44A1.073,1.073,0,0,0,.3,10.95l.245.258A1.043,1.043,0,0,0,2,11.321l.724-.665v9.762A1.071,1.071,0,0,0,3.78,21.5H7.563A1.071,1.071,0,0,0,8.62,20.418V13.591h4.81v6.828a1.04,1.04,0,0,0,.269.761.987.987,0,0,0,.723.323H18.45a1.071,1.071,0,0,0,1.057-1.084V10.776l.449.4c.245.222.765.042,1.168-.4Z",transform:"translate(-0.008 0.011)",fill:"#fff"})})}),"Home"]})}),Object(u.jsx)("li",{className:"deals ".concat(t.pathname.startsWith("/account/deals")?"active":void 0),children:Object(u.jsxs)(m.b,{to:"/account/deals",children:[Object(u.jsx)("div",{className:"icon",children:Object(u.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26.55",height:"25.219",viewBox:"0 0 26.55 25.219",children:Object(u.jsx)("path",{id:"Path_1","data-name":"Path 1",d:"M-242.2-184.285h-13l26.55-10.786-4.252,25.219-5.531-10.637-2.127,4.68v-6.382l7.659-9.148h2.34",transform:"translate(255.198 195.071)",fill:"#fff"})})}),"Deals"]})}),Object(u.jsx)("li",{className:t.pathname.startsWith("/account/wallet")?"active":void 0,children:Object(u.jsxs)(m.b,{to:"/account/wallet",children:[Object(u.jsx)("div",{className:"icon",children:Object(u.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20.886",height:"22.948",viewBox:"0 0 20.886 22.948",children:[Object(u.jsxs)("g",{id:"Rectangle_2","data-name":"Rectangle 2",fill:"none",stroke:"#fff",strokeWidth:"2",children:[Object(u.jsx)("rect",{width:"20.886",height:"16.244",rx:"2",stroke:"none"}),Object(u.jsx)("rect",{x:"1",y:"1",width:"18.886",height:"14.244",rx:"1",fill:"none"})]}),Object(u.jsxs)("g",{id:"Rectangle_3","data-name":"Rectangle 3",transform:"translate(0 9.283)",fill:"none",stroke:"#fff",strokeWidth:"2",children:[Object(u.jsx)("rect",{width:"20.886",height:"6.962",rx:"2",stroke:"none"}),Object(u.jsx)("rect",{x:"1",y:"1",width:"18.886",height:"4.962",rx:"1",fill:"none"})]}),Object(u.jsx)("path",{id:"Path_2","data-name":"Path 2",d:"M-180.174-182v7.923l4.1-4.653,3.932,4.653V-182Z",transform:"translate(186.6 197.025)",fill:"#fff"})]})}),"Wallet"]})}),Object(u.jsx)("li",{className:"hold ".concat(t.pathname.startsWith("/account/hold")?"active":void 0),children:Object(u.jsxs)(m.b,{to:"/account/hold",children:[Object(u.jsx)("div",{className:"icon",children:Object(u.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"27",viewBox:"0 0 22 27",children:[Object(u.jsx)("text",{id:"_3","data-name":"3",transform:"translate(14 14) rotate(180)",fill:"#fff",fontSize:"10",fontFamily:"Ebrima-Bold, Ebrima",fontWeight:"700",children:Object(u.jsx)("tspan",{x:"0",y:"0",children:"3"})}),Object(u.jsxs)("g",{id:"Group_166","data-name":"Group 166",transform:"translate(-534.967 -611.816)",children:[Object(u.jsxs)("g",{id:"Rectangle_1132","data-name":"Rectangle 1132",transform:"translate(534.967 620.816)",fill:"none",stroke:"#fff",strokeWidth:"2",children:[Object(u.jsx)("rect",{width:"22",height:"18",rx:"4",stroke:"none"}),Object(u.jsx)("rect",{x:"1",y:"1",width:"20",height:"16",rx:"3",fill:"none"})]}),Object(u.jsxs)("g",{id:"Rectangle_1133","data-name":"Rectangle 1133",transform:"translate(539.967 611.816)",fill:"none",stroke:"#fff",strokeWidth:"2",children:[Object(u.jsx)("path",{d:"M6.5,0h0A6.5,6.5,0,0,1,13,6.5V11a0,0,0,0,1,0,0H0a0,0,0,0,1,0,0V6.5A6.5,6.5,0,0,1,6.5,0Z",stroke:"none"}),Object(u.jsx)("path",{d:"M6.5,1h0A5.5,5.5,0,0,1,12,6.5V9.214a.786.786,0,0,1-.786.786H1.786A.786.786,0,0,1,1,9.214V6.5A5.5,5.5,0,0,1,6.5,1Z",fill:"none"})]})]})]})}),"Delivery pay Hold"]})}),Object(u.jsx)("li",{className:"trans ".concat(t.pathname.startsWith("/account/transactions")?"active":void 0),children:Object(u.jsxs)(m.b,{to:"/account/transactions",children:[Object(u.jsx)("div",{className:"icon",children:Object(u.jsxs)("svg",{id:"Group_283","data-name":"Group 283",xmlns:"http://www.w3.org/2000/svg",width:"28.407",height:"25.407",viewBox:"0 0 28.407 25.407",children:[Object(u.jsxs)("g",{id:"Path_4","data-name":"Path 4",transform:"translate(3)",fill:"none",children:[Object(u.jsx)("path",{d:"M12.7,0A12.7,12.7,0,1,1,0,12.7,12.7,12.7,0,0,1,12.7,0Z",stroke:"none"}),Object(u.jsx)("path",{d:"M 12.70325660705566 1.999996185302734 C 9.844316482543945 1.999996185302734 7.156496047973633 3.113327026367188 5.134906768798828 5.134906768798828 C 3.113327026367188 7.156496047973633 1.999996185302734 9.844316482543945 1.999996185302734 12.70325660705566 C 1.999996185302734 15.56219673156738 3.113327026367188 18.2500171661377 5.134906768798828 20.2716064453125 C 7.156496047973633 22.29318618774414 9.844316482543945 23.40651702880859 12.70325660705566 23.40651702880859 C 15.56219673156738 23.40651702880859 18.2500171661377 22.29318618774414 20.2716064453125 20.2716064453125 C 22.29318618774414 18.2500171661377 23.40651702880859 15.56219673156738 23.40651702880859 12.70325660705566 C 23.40651702880859 9.844316482543945 22.29318618774414 7.156496047973633 20.2716064453125 5.134906768798828 C 18.2500171661377 3.113327026367188 15.56219673156738 1.999996185302734 12.70325660705566 1.999996185302734 M 12.70325660705566 -3.814697265625e-06 C 19.71906661987305 -3.814697265625e-06 25.40651702880859 5.687446594238281 25.40651702880859 12.70325660705566 C 25.40651702880859 19.71906661987305 19.71906661987305 25.40651702880859 12.70325660705566 25.40651702880859 C 5.687446594238281 25.40651702880859 -3.814697265625e-06 19.71906661987305 -3.814697265625e-06 12.70325660705566 C -3.814697265625e-06 5.687446594238281 5.687446594238281 -3.814697265625e-06 12.70325660705566 -3.814697265625e-06 Z",stroke:"none",fill:"#fff"})]}),Object(u.jsxs)("g",{id:"Polygon_1","data-name":"Polygon 1",transform:"translate(6.001 12.353) rotate(-150)",fill:"#fff",children:[Object(u.jsx)("path",{d:"M 4.929044723510742 3.619362831115723 L 2.000004529953003 3.619362831115723 L 3.464524507522583 1.666669487953186 L 4.929044723510742 3.619362831115723 Z",stroke:"none"}),Object(u.jsx)("path",{d:"M 3.464524507522583 2.86102294921875e-06 L 6.929044723510742 4.619362831115723 L 4.291534423828125e-06 4.619362831115723 L 3.464524507522583 2.86102294921875e-06 Z",stroke:"none",fill:"#fff"})]}),Object(u.jsxs)("g",{id:"Rectangle_4","data-name":"Rectangle 4",transform:"translate(0 11.86) rotate(-22)",fill:"#336cf9",stroke:"#336cf9",strokeWidth:"1",children:[Object(u.jsx)("rect",{width:"6.929",height:"4.619",stroke:"none"}),Object(u.jsx)("rect",{x:"0.5",y:"0.5",width:"5.929",height:"3.619",fill:"none"})]}),Object(u.jsxs)("g",{id:"Group_5","data-name":"Group 5",transform:"translate(15.704 4.888)",children:[Object(u.jsx)("line",{id:"Line_3","data-name":"Line 3",y2:"9.239",transform:"translate(0 0)",fill:"none",stroke:"#fff",strokeWidth:"2"}),Object(u.jsx)("line",{id:"Line_4","data-name":"Line 4",x2:"6.929",y2:"2.31",transform:"translate(0 9.239)",fill:"none",stroke:"#fff",strokeWidth:"2"})]})]})}),"Delivery pay Transactions"]})}),Object(u.jsx)("li",{className:"products ".concat(t.pathname.startsWith("/account/products")?"active":void 0),children:Object(u.jsxs)(m.b,{to:"/account/products",children:[Object(u.jsx)("div",{className:"icon",children:Object(u.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"19.872",height:"21.086",viewBox:"0 0 19.872 21.086",children:[Object(u.jsxs)("g",{id:"Group_4","data-name":"Group 4",transform:"translate(0 5.63)",children:[Object(u.jsxs)("g",{id:"Path_288","data-name":"Path 288",fill:"none",children:[Object(u.jsx)("path",{d:"M1,0H18.872a1,1,0,0,1,1,1V14.456a1,1,0,0,1-1,1H1a1,1,0,0,1-1-1V1A1,1,0,0,1,1,0Z",stroke:"none"}),Object(u.jsx)("path",{d:"M 2 2.000001907348633 L 2 13.45590209960938 L 17.87188148498535 13.45590209960938 L 17.87188148498535 2.000001907348633 L 2 2.000001907348633 M 1 1.9073486328125e-06 L 18.87188148498535 1.9073486328125e-06 C 19.42416000366211 1.9073486328125e-06 19.87188148498535 0.4477119445800781 19.87188148498535 1.000001907348633 L 19.87188148498535 14.45590209960938 C 19.87188148498535 15.00819206237793 19.42416000366211 15.45590209960938 18.87188148498535 15.45590209960938 L 1 15.45590209960938 C 0.4477100372314453 15.45590209960938 0 15.00819206237793 0 14.45590209960938 L 0 1.000001907348633 C 0 0.4477119445800781 0.4477100372314453 1.9073486328125e-06 1 1.9073486328125e-06 Z",stroke:"none",fill:"#fff"})]}),Object(u.jsxs)("g",{id:"Rectangle_3","data-name":"Rectangle 3",transform:"translate(0 8.832)",fill:"none",stroke:"#fff",strokeWidth:"2",children:[Object(u.jsx)("rect",{width:"19.872",height:"6.624",rx:"2",stroke:"none"}),Object(u.jsx)("rect",{x:"1",y:"1",width:"17.872",height:"4.624",rx:"1",fill:"none"})]})]}),Object(u.jsxs)("g",{id:"Rectangle_1134","data-name":"Rectangle 1134",transform:"translate(4)",fill:"none",stroke:"#fff",strokeWidth:"2",children:[Object(u.jsx)("path",{d:"M2,0h8a2,2,0,0,1,2,2V7a0,0,0,0,1,0,0H0A0,0,0,0,1,0,7V2A2,2,0,0,1,2,0Z",stroke:"none"}),Object(u.jsx)("rect",{x:"1",y:"1",width:"10",height:"5",rx:"1",fill:"none"})]})]})}),"Products"]})}),Object(u.jsx)("li",{className:"support ".concat(t.pathname.startsWith("/account/support")?"active":void 0),children:Object(u.jsxs)(m.b,{to:"/account/support",children:[Object(u.jsx)("div",{className:"icon",children:Object(u.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"19.872",height:"21.086",viewBox:"0 0 19.872 21.086",children:[Object(u.jsxs)("g",{id:"Group_4","data-name":"Group 4",transform:"translate(0 5.63)",children:[Object(u.jsxs)("g",{id:"Path_288","data-name":"Path 288",fill:"none",children:[Object(u.jsx)("path",{d:"M1,0H18.872a1,1,0,0,1,1,1V14.456a1,1,0,0,1-1,1H1a1,1,0,0,1-1-1V1A1,1,0,0,1,1,0Z",stroke:"none"}),Object(u.jsx)("path",{d:"M 2 2.000001907348633 L 2 13.45590209960938 L 17.87188148498535 13.45590209960938 L 17.87188148498535 2.000001907348633 L 2 2.000001907348633 M 1 1.9073486328125e-06 L 18.87188148498535 1.9073486328125e-06 C 19.42416000366211 1.9073486328125e-06 19.87188148498535 0.4477119445800781 19.87188148498535 1.000001907348633 L 19.87188148498535 14.45590209960938 C 19.87188148498535 15.00819206237793 19.42416000366211 15.45590209960938 18.87188148498535 15.45590209960938 L 1 15.45590209960938 C 0.4477100372314453 15.45590209960938 0 15.00819206237793 0 14.45590209960938 L 0 1.000001907348633 C 0 0.4477119445800781 0.4477100372314453 1.9073486328125e-06 1 1.9073486328125e-06 Z",stroke:"none",fill:"#fff"})]}),Object(u.jsxs)("g",{id:"Rectangle_3","data-name":"Rectangle 3",transform:"translate(0 8.832)",fill:"none",stroke:"#fff",strokeWidth:"2",children:[Object(u.jsx)("rect",{width:"19.872",height:"6.624",rx:"2",stroke:"none"}),Object(u.jsx)("rect",{x:"1",y:"1",width:"17.872",height:"4.624",rx:"1",fill:"none"})]})]}),Object(u.jsxs)("g",{id:"Rectangle_1134","data-name":"Rectangle 1134",transform:"translate(4)",fill:"none",stroke:"#fff",strokeWidth:"2",children:[Object(u.jsx)("path",{d:"M2,0h8a2,2,0,0,1,2,2V7a0,0,0,0,1,0,0H0A0,0,0,0,1,0,7V2A2,2,0,0,1,2,0Z",stroke:"none"}),Object(u.jsx)("rect",{x:"1",y:"1",width:"10",height:"5",rx:"1",fill:"none"})]})]})}),"Customer Support"]})}),Object(u.jsx)("li",{className:t.pathname.startsWith("/account/profile")?"active":void 0,children:Object(u.jsxs)(m.b,{to:"/account/profile",children:[Object(u.jsx)("div",{className:"icon acc",children:Object(u.jsx)("img",{src:null===n||void 0===n?void 0:n.profileImg})}),"Account"]})})]}),Object(u.jsx)("main",{children:Object(u.jsxs)(O.d,{children:[Object(u.jsx)(O.b,{path:"/account/deals/:phone?",component:Fe}),Object(u.jsx)(O.b,{path:"/account/wallet",component:be}),Object(u.jsx)(O.b,{path:"/account/hold",component:z}),Object(u.jsx)(O.b,{path:"/account/transactions",component:Q}),Object(u.jsx)(O.b,{path:"/account/products",component:xe}),Object(u.jsx)(O.b,{path:"/account/support",component:pe}),Object(u.jsx)(O.b,{path:"/account/profile",component:ke}),Object(u.jsx)(O.b,{path:"/",component:ft})]})})]})]})};n(44);var Ct=function(){Object(l.useContext)(h).user;var e=Object(O.g)(),t=(new URLSearchParams(Object(O.h)().search),Object(l.useState)("")),n=Object(d.a)(t,2),c=n[0],s=n[1],a=Object(l.useState)(""),i=Object(d.a)(a,2),r=i[0],o=i[1],j=Object(l.useState)(""),b=Object(d.a)(j,2),x=b[0],f=b[1],g=Object(l.useState)("+91"),v=Object(d.a)(g,2),N=v[0],y=v[1],k=Object(l.useState)(""),P=Object(d.a)(k,2),S=P[0],_=P[1],M=Object(l.useState)(null),L=Object(d.a)(M,2),F=L[0],D=L[1],A=Object(l.useState)(null),R=Object(d.a)(A,2),q=R[0],T=R[1];return Object(u.jsxs)("div",{className:"formWrapper",children:[Object(u.jsx)("img",{className:"logo",onClick:function(){return e.push("")},src:"/logo_land.jpg",alt:"Delivery pay logo"}),Object(u.jsx)("p",{className:"title",children:"Introduce yourself"}),Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault(),N.match(/^\+91\d{10}$/)?F||fetch("/api/workRequest",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({firstName:c,lastName:r,phone:N,email:x,dscr:S})}).then((function(e){return e.json()})).then((function(e){"ok"===e.code?T(Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("div",{children:[Object(u.jsx)(w,{}),Object(u.jsx)("h4",{children:"Request submitted"})]}),Object(u.jsx)(m.b,{to:"/",onClick:function(){return T(null)},children:"Go home"})]})):T(Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("button",{onClick:function(){return T(null)},children:"Okay"}),Object(u.jsxs)("div",{children:[Object(u.jsx)(C,{}),Object(u.jsx)("h4",{children:"Could not submit request. Please try again."})]})]}))})).catch((function(e){console.log(e),T(Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("button",{onClick:function(){return T(null)},children:"Okay"}),Object(u.jsxs)("div",{children:[Object(u.jsx)(C,{}),Object(u.jsx)("h4",{children:"Could not submit request. Make sure you're online."})]})]}))})):D("Enter valid phone number")},children:[Object(u.jsx)("input",{type:"text",name:"firstName",required:!0,placeholder:"First name",value:c,onChange:function(e){return s(e.target.value)}}),Object(u.jsx)("input",{type:"text",name:"lastName",required:!0,placeholder:"Last name",value:r,onChange:function(e){return o(e.target.value)}}),Object(u.jsx)("input",{type:"email",name:"email",required:!0,placeholder:"Email",value:x,onChange:function(e){D(null),f(e.target.value)}}),Object(u.jsx)("input",{type:"tel",name:"phone",required:!0,placeholder:"Phone number",value:N,onChange:function(e){D(null),e.target.value.match(/^\+91\d{0,10}$/)&&y(e.target.value)}}),Object(u.jsx)("textarea",{className:"dscr",name:"dscr",required:!0,placeholder:"Why join Delivery Pay team?",value:S,onChange:function(e){_(e.target.value)}}),Object(u.jsxs)("section",{className:"checkbox",children:[Object(u.jsx)(B,{required:!0}),Object(u.jsx)("label",{children:"I accept to the Terms and Conditions and Privacy Policy"})]}),Object(u.jsx)("button",{disabled:F,type:"submit",children:"Submit"})]}),F&&Object(u.jsx)("p",{className:"errMsg",children:F}),Object(u.jsx)(p,{className:"msg",open:q,children:q})]})};var wt=function(){var e=Object(l.useContext)(h);return e.setUser,e.user,Object(O.g)(),Object(u.jsxs)("div",{className:"userStart",children:[Object(u.jsxs)("div",{className:"banner",children:[Object(u.jsxs)("header",{children:[Object(u.jsx)("h3",{children:"Help us make Delivery Pay better."}),Object(u.jsx)("p",{children:"Join our team of hard working people."})]}),Object(u.jsx)("img",{className:"illustration",src:"/landingPage_illustration.svg",alt:"illustration"})]}),Object(u.jsx)("div",{className:"forms",children:Object(u.jsx)(Ct,{})})]})};function kt(e){var t=e.children,n=e.path,c=e.component,s=Object(l.useContext)(h).user,a=Object(O.g)();return s?Object(u.jsx)(u.Fragment,{children:Object(u.jsx)(O.b,{path:n,component:c,children:t})}):Object(u.jsx)(O.a,{to:{pathname:"/u/login",state:{from:a.location.pathname}}})}var Pt=function(){var e=Object(l.useState)(window.innerWidth<=480),t=Object(d.a)(e,2),n=t[0],c=t[1];return Object(u.jsx)("div",{className:"App",children:Object(u.jsxs)(m.a,{children:[Object(u.jsxs)(p,{open:n,className:"mobileApp",children:[Object(u.jsx)("button",{onClick:function(){return c(!1)},children:"I don't like better things."}),Object(u.jsxs)("div",{className:"wrapper",children:[Object(u.jsx)(m.b,{to:"#",children:Object(u.jsx)("img",{src:"/logo_big.jpg"})}),Object(u.jsx)("p",{children:"Download our mobile app for a better experience."})]})]}),Object(u.jsxs)(O.d,{children:[Object(u.jsx)(O.b,{path:"/",exact:!0,component:g}),Object(u.jsx)(O.b,{path:"/u",component:W}),Object(u.jsx)(kt,{path:"/account",component:yt}),Object(u.jsx)(O.b,{path:"/JobApplication",component:wt},"job"),Object(u.jsx)(O.b,{path:"/",children:Object(u.jsx)("h1",{children:"404"})})]})]})})},St=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,166)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),c(e),s(e),a(e),i(e)}))},_t=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Mt(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=window.atob(t),c=new Uint8Array(n.length),s=0;s<n.length;++s)c[s]=n.charCodeAt(s);return c}function Lt(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)),navigator.serviceWorker.ready.then(function(){var e=Object(Ne.a)(ge.a.mark((function e(t){return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Mt("BOAary6p08dAK6T2GSg0zRGrWKk5qs-sz_-f62My0JXMPG52fqQfzzJlePyF0snUvrdeEg4RSWOVGhrtVc1v3Lo")}).then((function(e){fetch("/api/subscribe",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var Ft,Dt=function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e)).state={hasError:!1,reported:!1},s}return Object(s.a)(n,[{key:"componentDidCatch",value:function(e,t){var n=this,c={method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({err:e.name,message:e.message,dscr:t})};fetch("/api/bugReportAuto",c).then((function(e){return e.json()})).then((function(e){"ok"===e.code&&(n.reported=!0)}))}},{key:"render",value:function(){return this.state.hasError?Object(u.jsx)("div",{className:"deathPage",children:Object(u.jsxs)("div",{className:"content",children:[Object(u.jsx)("ion-icon",{name:"skull-outline"}),Object(u.jsx)("h2",{children:"Oops."}),Object(u.jsx)("a",{href:"/",children:Object(u.jsx)("ion-icon",{name:"refresh-outline"})}),this.reported&&Object(u.jsx)("p",{children:"successfully reported"})]})}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),n}(r.a.Component);j.a.render(Object(u.jsx)(r.a.StrictMode,{children:Object(u.jsx)(Dt,{children:Object(u.jsx)(b,{children:Object(u.jsx)(Pt,{})})})}),document.getElementById("root")),"serviceWorker"in navigator&&window.addEventListener("load",(function(){var e="/service-worker.js";_t?(function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var c=n.headers.get("content-type");404===n.status||null!=c&&-1===c.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Lt(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e,Ft),navigator.serviceWorker.ready.then(function(){var e=Object(Ne.a)(ge.a.mark((function e(t){return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Mt("BOAary6p08dAK6T2GSg0zRGrWKk5qs-sz_-f62My0JXMPG52fqQfzzJlePyF0snUvrdeEg4RSWOVGhrtVc1v3Lo")}).then((function(e){fetch("/api/subscribe",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())):Lt(e,Ft)})),St()},44:function(e,t,n){},77:function(e,t,n){},79:function(e,t,n){},87:function(e,t,n){}},[[126,1,2]]]);
//# sourceMappingURL=main.83cc7d76.chunk.js.map