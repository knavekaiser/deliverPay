(this["webpackJsonpdeliveryPay-react"]=this["webpackJsonpdeliveryPay-react"]||[]).push([[3],{128:function(e,t,n){"use strict";n.r(t);var c=n(71),s=n(72),a=n(76),r=n(75),i=n(1),l=n.n(i),o=n(26),j=n.n(o),d=(n(85),function(e){e&&e instanceof Function&&n.e(33).then(n.bind(null,282)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,a=t.getLCP,r=t.getTTFB;n(e),c(e),s(e),a(e),r(e)}))}),u=n(8),b=(n(79),n(0)),h=Object(i.lazy)((function(){return n.e(22).then(n.bind(null,281))})),O=function(e){Object(a.a)(n,e);var t=Object(r.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e)).state={hasError:!1,reported:!1},s}return Object(s.a)(n,[{key:"componentDidCatch",value:function(e,t){var n=this,c={method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({issue:e.toString(),dscr:t})};fetch("/api/bugReport",c).then((function(e){return e.json()})).then((function(e){"ok"===e.code&&(n.reported=!0)}))}},{key:"render",value:function(){return this.state.hasError?Object(b.jsx)("div",{className:"deathPage",children:Object(b.jsxs)("div",{className:"content",children:[Object(b.jsx)("ion-icon",{name:"skull-outline"}),Object(b.jsx)("h2",{children:"Oops."}),Object(b.jsx)("a",{href:"/",children:"RELOAD"}),this.reported&&Object(b.jsx)("p",{children:"successfully reported"})]})}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),n}(l.a.Component);j.a.render(Object(b.jsx)(l.a.StrictMode,{children:Object(b.jsx)(O,{children:Object(b.jsx)(u.c,{children:Object(b.jsx)(i.Suspense,{fallback:Object(b.jsx)("p",{children:"Loading..."}),children:Object(b.jsx)(h,{})})})})}),document.getElementById("root")),d()},2:function(e,t,n){"use strict";n.d(t,"i",(function(){return ae})),n.d(t,"E",(function(){return re})),n.d(t,"J",(function(){return ie})),n.d(t,"D",(function(){return le})),n.d(t,"B",(function(){return oe})),n.d(t,"C",(function(){return je})),n.d(t,"o",(function(){return de})),n.d(t,"w",(function(){return ue})),n.d(t,"x",(function(){return be})),n.d(t,"y",(function(){return he})),n.d(t,"v",(function(){return Oe})),n.d(t,"r",(function(){return xe})),n.d(t,"d",(function(){return fe})),n.d(t,"b",(function(){return me})),n.d(t,"c",(function(){return pe})),n.d(t,"g",(function(){return ve})),n.d(t,"j",(function(){return ge})),n.d(t,"e",(function(){return Ce})),n.d(t,"z",(function(){return Ne})),n.d(t,"n",(function(){return we})),n.d(t,"f",(function(){return ke})),n.d(t,"h",(function(){return Se})),n.d(t,"t",(function(){return _e})),n.d(t,"k",(function(){return Me})),n.d(t,"O",(function(){return Pe})),n.d(t,"u",(function(){return Le})),n.d(t,"m",(function(){return Fe})),n.d(t,"l",(function(){return Ae})),n.d(t,"H",(function(){return Re})),n.d(t,"q",(function(){return De})),n.d(t,"a",(function(){return Te})),n.d(t,"F",(function(){return qe})),n.d(t,"I",(function(){return Be})),n.d(t,"A",(function(){return Ee})),n.d(t,"N",(function(){return Ie})),n.d(t,"s",(function(){return He})),n.d(t,"M",(function(){return Ze})),n.d(t,"L",(function(){return We})),n.d(t,"p",(function(){return Ve})),n.d(t,"K",(function(){return Ue})),n.d(t,"G",(function(){return ze}));var c=n(52),s=n(13),a=n(4),r=n(46),i=n(3),l=n(14),o=n.n(l),j=n(16),d=n(1),u=n(8),b=n(7),h=n(6),O=n(5),x=n(51),f=n(129),m=n(130),p=n(131),v=n(132),g=n(133),y=n(134),C=n(135),N=n(136),w=n(137),k=n(138),S=n(139),_=n(140),M=n(141),P=n(142),L=n(143),F=n(144),A=n(145),R=n(146),D=n(147),T=n(148),q=n(149),B=n(150),E=n(151),I=n(152),H=n(153),Z=n(154),W=n(155),V=n(156),U=n(157),z=n(158),G=n(159),Y=n(160),J=n(161),$=n(162),K=n(163),X=n(164),Q=n(165),ee=n(166),te=n(0),ne=["src"],ce=["format","children"],se=Object(d.lazy)(Object(j.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(20).then(n.t.bind(null,172,7));case 2:return e.next=4,n.e(21).then(n.t.bind(null,173,7));case 4:return e.abrupt("return",n.e(6).then(n.t.bind(null,174,7)).then((function(e){return{default:e.DateRange}})));case 5:case"end":return e.stop()}}),e)}))));n(99);var ae=function(){return Object(te.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"158",height:"158",viewBox:"0 0 158 158",children:[Object(te.jsx)("defs",{children:Object(te.jsxs)("linearGradient",{id:"linear-gradient-red",x1:"-0.298",y1:"-0.669",x2:"1.224",y2:"1.588",gradientUnits:"objectBoundingBox",children:[Object(te.jsx)("stop",{offset:"0",stopColor:"#f93389"}),Object(te.jsx)("stop",{offset:"1",stopColor:"#e3003e"})]})}),Object(te.jsx)("rect",{id:"Rectangle_1104","data-name":"Rectangle 1104",width:"158",height:"158",rx:"79",fill:"url(#linear-gradient-red)"}),Object(te.jsx)("g",{id:"Component_85_8","data-name":"Component 85 \u2013 8",transform:"translate(49.472 49.472)",children:Object(te.jsx)("path",{id:"Union_3","data-name":"Union 3",d:"M29.527,34.9,5.368,59.057,0,53.686,24.158,29.527,0,5.368,5.368,0l24.16,24.158L53.686,0l5.371,5.368L34.9,29.527l24.16,24.158-5.371,5.371Z",fill:"#fff"})})]})},re=function(){return Object(te.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"158",height:"158",viewBox:"0 0 158 158",children:[Object(te.jsxs)("defs",{children:[Object(te.jsxs)("linearGradient",{id:"linear-gradient",x1:"-0.298",y1:"-0.669",x2:"1.224",y2:"1.588",gradientUnits:"objectBoundingBox",children:[Object(te.jsx)("stop",{offset:"0",stopColor:"#336cf9"}),Object(te.jsx)("stop",{offset:"1",stopColor:"#1be6d6"})]}),Object(te.jsx)("clipPath",{id:"clip-path",children:Object(te.jsx)("rect",{width:"64",height:"64",fill:"none"})})]}),Object(te.jsxs)("g",{id:"Group_163","data-name":"Group 163",transform:"translate(-0.426 -0.384)",children:[Object(te.jsx)("g",{id:"Group_103","data-name":"Group 103",transform:"translate(0 0)",children:Object(te.jsx)("rect",{id:"Rectangle_1104","data-name":"Rectangle 1104",width:"158",height:"158",rx:"79",transform:"translate(0.426 0.384)",fill:"url(#linear-gradient)"})}),Object(te.jsxs)("g",{id:"Component_148_2","data-name":"Component 148 \u2013 2",transform:"translate(47.426 58.384)",clipPath:"url(#clip-path)",children:[Object(te.jsx)("rect",{id:"Rectangle_460","data-name":"Rectangle 460",width:"64",height:"64",transform:"translate(0 0)",fill:"none"}),Object(te.jsx)("path",{id:"Checkbox",d:"M25.35,44.087,0,18.737l5.143-5.143L25.35,33.432,58.782,0l5.143,5.143Z",transform:"translate(0 1.728)",fill:"#fff"})]})]})]})},ie=function(){return Object(te.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"15.557",height:"15.557",viewBox:"0 0 15.557 15.557",children:[Object(te.jsx)("defs",{children:Object(te.jsx)("clipPath",{id:"clip-path",children:Object(te.jsx)("rect",{width:"15.557",height:"15.557",fill:"none"})})}),Object(te.jsx)("g",{id:"Cancel",clipPath:"url(#clip-path)",children:Object(te.jsx)("path",{id:"Union_3","data-name":"Union 3",d:"M7.778,9.192,1.414,15.557,0,14.142,6.364,7.778,0,1.414,1.414,0,7.778,6.364,14.142,0l1.415,1.414L9.192,7.778l6.364,6.364-1.415,1.415Z",fill:"#2699fb"})})]})},le=function(e){var t=e.className;return Object(te.jsxs)("svg",{className:t,xmlns:"http://www.w3.org/2000/svg",width:"65",height:"65",viewBox:"0 0 65 65",children:[Object(te.jsxs)("g",{id:"Ellipse_110","data-name":"Ellipse 110",fill:"#fff",stroke:"#336cf9",strokeWidth:"1",children:[Object(te.jsx)("circle",{cx:"32.5",cy:"32.5",r:"32.5",stroke:"none"}),Object(te.jsx)("circle",{cx:"32.5",cy:"32.5",r:"32",fill:"none"})]}),Object(te.jsx)("path",{id:"Checkbox",d:"M12.267,23.067,0,9.8,2.489,7.112l9.778,10.38L28.444,0l2.489,2.691Z",transform:"translate(17.034 20.967)",fill:"#336cf9"})]})},oe=function(e){var t=e.className;return Object(te.jsx)("svg",{className:t,xmlns:"http://www.w3.org/2000/svg",width:"65",height:"65",viewBox:"0 0 65 65",children:Object(te.jsxs)("g",{id:"Ellipse_229","data-name":"Ellipse 229",fill:"#fff",stroke:"#707070",strokeWidth:"1",children:[Object(te.jsx)("circle",{cx:"32.5",cy:"32.5",r:"32.5",stroke:"none"}),Object(te.jsx)("circle",{cx:"32.5",cy:"32.5",r:"32",fill:"none"})]})})},je=function(e){var t=e.className;return Object(te.jsxs)("svg",{className:t,xmlns:"http://www.w3.org/2000/svg",width:"65",height:"65",viewBox:"0 0 65 65",children:[Object(te.jsxs)("g",{id:"Ellipse_110","data-name":"Ellipse 110",fill:"#336cf9",stroke:"#336cf9",strokeWidth:"1",children:[Object(te.jsx)("circle",{cx:"32.5",cy:"32.5",r:"32.5",stroke:"none"}),Object(te.jsx)("circle",{cx:"32.5",cy:"32.5",r:"32",fill:"none"})]}),Object(te.jsx)("path",{id:"Checkbox",d:"M12.267,23.067,0,9.8,2.489,7.112l9.778,10.38L28.444,0l2.489,2.691Z",transform:"translate(17.034 20.967)",fill:"#fff"})]})},de=function(e){var t=e.dateRange,n=e.onChange,c=e.required,s=Object(d.useRef)(),a=Object(d.useState)(t||{startDate:new Date,endDate:new Date}),r=Object(i.a)(a,2),l=r[0],o=r[1],j=Object(d.useState)({}),u=Object(i.a)(j,2),h=u[0],O=u[1],x=Object(d.useState)(!!t),f=Object(i.a)(x,2),m=f[0],p=f[1],v=Object(d.useState)(!1),g=Object(i.a)(v,2),y=g[0],C=g[1];return Object(d.useLayoutEffect)((function(){var e=s.current.getBoundingClientRect(),t=e.height,n=e.y,c=e.width,a=e.x;e.bottom;O({position:"fixed",top:Math.min(t+n+4,window.innerHeight-350),right:Math.min(window.innerWidth-a-c,window.innerWidth-335)})}),[y]),Object(d.useEffect)((function(){m?null===n||void 0===n||n(l):null===n||void 0===n||n(null)}),[l]),Object(te.jsxs)(te.Fragment,{children:[Object(te.jsxs)("section",{className:"date ".concat(m?"open":""),ref:s,onClick:function(){return C(!0)},children:[Object(te.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"30.971",height:"30.971",viewBox:"0 0 30.971 30.971",children:Object(te.jsx)("path",{id:"Path_299","data-name":"Path 299",d:"M3.992,2.42H6.775V.968a.968.968,0,1,1,1.936,0V2.42H22.26V.968a.968.968,0,1,1,1.936,0V2.42h2.783a4,4,0,0,1,3.992,3.992V26.978a4,4,0,0,1-3.992,3.992H3.992A4,4,0,0,1,0,26.978V6.412A4,4,0,0,1,3.992,2.42ZM26.978,4.355H24.2v.968a.968.968,0,1,1-1.936,0V4.355H8.71v.968a.968.968,0,1,1-1.936,0V4.355H3.992A2.059,2.059,0,0,0,1.936,6.412v2.3h27.1v-2.3A2.059,2.059,0,0,0,26.978,4.355ZM3.992,29.035H26.978a2.059,2.059,0,0,0,2.057-2.057V10.646H1.936V26.978A2.059,2.059,0,0,0,3.992,29.035Z",fill:"#336cf9"})}),Object(te.jsx)("input",{className:"dateInput",type:"date",style:{width:"100%",height:"100%"},value:m?Ie({time:l.startDate,format:"YYYY-MM-DD"}):"",required:c,onChange:function(){}}),m&&Object(te.jsxs)(te.Fragment,{children:[Object(te.jsxs)("div",{className:"dates",children:[Object(te.jsxs)("p",{children:["From:"," ",Object(te.jsx)(He,{format:"DD MMM, YYYY",children:l.startDate})]}),Object(te.jsxs)("p",{children:["To: ",Object(te.jsx)(He,{format:"DD MMM, YYYY",children:l.endDate})]})]}),Object(te.jsx)("button",{className:"clearDateFilter",onClick:function(){o({startDate:new Date,endDate:new Date}),p(!1)},children:Object(te.jsx)(ie,{})})]})]}),Object(te.jsx)(b.Modal,{open:y,onBackdropClick:function(){return C(!1)},backdropClass:"datePicker",className:"datePicker",style:h,children:Object(te.jsx)(d.Suspense,{fallback:Object(te.jsx)(te.Fragment,{children:"Loading"}),children:Object(te.jsx)(se,{className:"dateRange",ranges:[l],onChange:function(e){o(e.range1),e.range1.endDate!==e.range1.startDate&&(C(!1),p(!0))}})})})]})},ue=function(){return Object(te.jsx)("svg",{className:"done",xmlns:"http://www.w3.org/2000/svg",width:"214.5",height:"2",viewBox:"0 0 214.5 2",children:Object(te.jsx)("line",{id:"Line_22","data-name":"Line 22",x2:"214.5",transform:"translate(0 1)",fill:"none",stroke:"#1be6d6",strokeWidth:"2"})})},be=function(){return Object(te.jsx)("svg",{className:"running",xmlns:"http://www.w3.org/2000/svg",width:"200",height:"16.55",viewBox:"0 0 200 16.55",children:Object(te.jsxs)("g",{id:"Group_203","data-name":"Group 203",transform:"translate(-5063.943 -1197)",children:[Object(te.jsx)("path",{id:"Path_301","data-name":"Path 301",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5063.943 1213.55) rotate(-90)",fill:"#1be6d6"}),Object(te.jsx)("path",{id:"Path_302","data-name":"Path 302",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5073.943 1213.55) rotate(-90)",fill:"#1be6d6"}),Object(te.jsx)("path",{id:"Path_303","data-name":"Path 303",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5083.943 1213.55) rotate(-90)",fill:"#1be6d6"}),Object(te.jsx)("path",{id:"Path_304","data-name":"Path 304",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5093.943 1213.55) rotate(-90)",fill:"#1be6d6"}),Object(te.jsx)("path",{id:"Path_305","data-name":"Path 305",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5103.943 1213.55) rotate(-90)",fill:"#1be6d6"}),Object(te.jsx)("path",{id:"Path_306","data-name":"Path 306",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5113.943 1213.55) rotate(-90)",fill:"#1be6d6"}),Object(te.jsx)("path",{id:"Path_307","data-name":"Path 307",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5123.943 1213.55) rotate(-90)",fill:"#1be6d6"}),Object(te.jsx)("path",{id:"Path_308","data-name":"Path 308",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5133.943 1213.55) rotate(-90)",fill:"#1be6d6"}),Object(te.jsx)("path",{id:"Path_309","data-name":"Path 309",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5143.943 1213.55) rotate(-90)",fill:"#1be6d6"}),Object(te.jsx)("path",{id:"Path_310","data-name":"Path 310",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5153.943 1213.55) rotate(-90)",fill:"#1be6d6"}),Object(te.jsx)("path",{id:"Path_311","data-name":"Path 311",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5163.943 1213.55) rotate(-90)",fill:"#1be6d6"}),Object(te.jsx)("path",{id:"Path_312","data-name":"Path 312",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5173.943 1213.55) rotate(-90)",fill:"#1be6d6"}),Object(te.jsx)("path",{id:"Path_313","data-name":"Path 313",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5183.943 1213.55) rotate(-90)",fill:"#1be6d6"}),Object(te.jsx)("path",{id:"Path_314","data-name":"Path 314",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5193.943 1213.55) rotate(-90)",fill:"#1be6d6"}),Object(te.jsx)("path",{id:"Path_315","data-name":"Path 315",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5203.943 1213.55) rotate(-90)",fill:"#1be6d6"}),Object(te.jsx)("path",{id:"Path_316","data-name":"Path 316",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5213.943 1213.55) rotate(-90)",fill:"#1be6d6"}),Object(te.jsx)("path",{id:"Path_317","data-name":"Path 317",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5223.943 1213.55) rotate(-90)",fill:"#1be6d6"}),Object(te.jsx)("path",{id:"Path_318","data-name":"Path 318",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5233.943 1213.55) rotate(-90)",fill:"#1be6d6"}),Object(te.jsx)("path",{id:"Path_319","data-name":"Path 319",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5243.943 1213.55) rotate(-90)",fill:"#1be6d6"}),Object(te.jsx)("path",{id:"Path_320","data-name":"Path 320",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5253.943 1213.55) rotate(-90)",fill:"#1be6d6"})]})})},he=function(){return Object(te.jsx)("svg",{className:"runningBack",xmlns:"http://www.w3.org/2000/svg",width:"200",height:"16.55",viewBox:"0 0 200 16.55",children:Object(te.jsxs)("g",{id:"Group_226","data-name":"Group 226",transform:"translate(5263.943 1213.55) rotate(-180)",children:[Object(te.jsx)("path",{id:"Path_301","data-name":"Path 301",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5063.943 1213.55) rotate(-90)",fill:"#f6577c"}),Object(te.jsx)("path",{id:"Path_302","data-name":"Path 302",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5073.943 1213.55) rotate(-90)",fill:"#f6577c"}),Object(te.jsx)("path",{id:"Path_303","data-name":"Path 303",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5083.943 1213.55) rotate(-90)",fill:"#f6577c"}),Object(te.jsx)("path",{id:"Path_304","data-name":"Path 304",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5093.943 1213.55) rotate(-90)",fill:"#f6577c"}),Object(te.jsx)("path",{id:"Path_305","data-name":"Path 305",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5103.943 1213.55) rotate(-90)",fill:"#f6577c"}),Object(te.jsx)("path",{id:"Path_306","data-name":"Path 306",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5113.943 1213.55) rotate(-90)",fill:"#f6577c"}),Object(te.jsx)("path",{id:"Path_307","data-name":"Path 307",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5123.943 1213.55) rotate(-90)",fill:"#f6577c"}),Object(te.jsx)("path",{id:"Path_308","data-name":"Path 308",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5133.943 1213.55) rotate(-90)",fill:"#f6577c"}),Object(te.jsx)("path",{id:"Path_309","data-name":"Path 309",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5143.943 1213.55) rotate(-90)",fill:"#f6577c"}),Object(te.jsx)("path",{id:"Path_310","data-name":"Path 310",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5153.943 1213.55) rotate(-90)",fill:"#f6577c"}),Object(te.jsx)("path",{id:"Path_311","data-name":"Path 311",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5163.943 1213.55) rotate(-90)",fill:"#f6577c"}),Object(te.jsx)("path",{id:"Path_312","data-name":"Path 312",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5173.943 1213.55) rotate(-90)",fill:"#f6577c"}),Object(te.jsx)("path",{id:"Path_313","data-name":"Path 313",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5183.943 1213.55) rotate(-90)",fill:"#f6577c"}),Object(te.jsx)("path",{id:"Path_314","data-name":"Path 314",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5193.943 1213.55) rotate(-90)",fill:"#f6577c"}),Object(te.jsx)("path",{id:"Path_315","data-name":"Path 315",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5203.943 1213.55) rotate(-90)",fill:"#f6577c"}),Object(te.jsx)("path",{id:"Path_316","data-name":"Path 316",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5213.943 1213.55) rotate(-90)",fill:"#f6577c"}),Object(te.jsx)("path",{id:"Path_317","data-name":"Path 317",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5223.943 1213.55) rotate(-90)",fill:"#f6577c"}),Object(te.jsx)("path",{id:"Path_318","data-name":"Path 318",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5233.943 1213.55) rotate(-90)",fill:"#f6577c"}),Object(te.jsx)("path",{id:"Path_319","data-name":"Path 319",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5243.943 1213.55) rotate(-90)",fill:"#f6577c"}),Object(te.jsx)("path",{id:"Path_320","data-name":"Path 320",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5253.943 1213.55) rotate(-90)",fill:"#f6577c"})]})})},Oe=function(){return Object(te.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",children:[Object(te.jsx)("line",{id:"Line_29","data-name":"Line 29",y2:"20",transform:"translate(10)",fill:"none",stroke:"#006dff",strokeWidth:"2"}),Object(te.jsx)("line",{id:"Line_30","data-name":"Line 30",x2:"20",transform:"translate(0 10)",fill:"none",stroke:"#006dff",strokeWidth:"2"})]})},xe=function(){return Object(te.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",children:Object(te.jsx)("line",{id:"Line_30","data-name":"Line 30",x2:"20",transform:"translate(0 10)",fill:"none",stroke:"#006dff",strokeWidth:"2"})})},fe=function(){return Object(te.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 18 18",children:Object(te.jsx)("g",{id:"Symbol_82","data-name":"Symbol 82",transform:"translate(-507 1272) rotate(-90)",children:Object(te.jsx)("path",{id:"Path_10","data-name":"Path 10",d:"M9,0,7.364,1.636l6.195,6.195H0v2.338H13.558L7.364,16.364,9,18l9-9Z",transform:"translate(1254 507)",fill:"#336cf9"})})})},me=function(){return Object(te.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 18 18",children:Object(te.jsx)("g",{id:"_1","data-name":" 1",transform:"translate(525 -1254) rotate(90)",children:Object(te.jsx)("path",{id:"Path_10","data-name":"Path 10",d:"M9,0,7.364,1.636l6.195,6.195H0v2.338H13.558L7.364,16.364,9,18l9-9Z",transform:"translate(1254 507)",fill:"#ff0080"})})})},pe=function(){return Object(te.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",children:Object(te.jsx)("path",{id:"Path_10","data-name":"Path 10",d:"M8,0,6.545,1.455l5.506,5.506H0V9.039H12.052L6.545,14.545,8,16l8-8Z",transform:"translate(16 16) rotate(180)",fill:"#2699fb"})})},ve=function(e){var t=e.className;return Object(te.jsx)("svg",{className:t||"",xmlns:"http://www.w3.org/2000/svg",width:"23.616",height:"13.503",viewBox:"0 0 23.616 13.503",children:Object(te.jsx)("path",{id:"Icon_ionic-ios-arrow-down","data-name":"Icon ionic-ios-arrow-down",d:"M18,20.679l8.93-8.937a1.681,1.681,0,0,1,2.384,0,1.7,1.7,0,0,1,0,2.391L19.2,24.258a1.685,1.685,0,0,1-2.327.049L6.68,14.14a1.688,1.688,0,0,1,2.384-2.391Z",transform:"translate(-6.188 -11.246)",fill:"#53aefc"})})},ge=function(){return Object(te.jsx)("span",{className:"externalLinkIcon","aria-label":"(opens a new window)",children:Object(te.jsx)("svg",{viewBox:"0 0 20 20",className:"Polaris-Icon__Svg_375hu",focusable:"false","aria-hidden":"true",children:Object(te.jsx)("path",{d:"M14 13v1a1 1 0 0 1-1 1H6c-.575 0-1-.484-1-1V7a1 1 0 0 1 1-1h1c1.037 0 1.04 1.5 0 1.5-.178.005-.353 0-.5 0v6h6V13c0-1 1.5-1 1.5 0zm-3.75-7.25A.75.75 0 0 1 11 5h4v4a.75.75 0 0 1-1.5 0V7.56l-3.22 3.22a.75.75 0 1 1-1.06-1.06l3.22-3.22H11a.75.75 0 0 1-.75-.75z"})})})},ye=function(){return Object(te.jsx)("svg",{className:"tick",xmlns:"http://www.w3.org/2000/svg",width:"15.1",height:"10.8",viewBox:"0 0 15.1 10.8",children:Object(te.jsx)("path",{id:"Path_207","data-name":"Path 207",d:"M6.5,10.8,0,4.3,2.1,2.2,6.5,6.5,13,0l2.1,2.1Z",fill:"#2699fb"})})},Ce=function(){return Object(te.jsx)("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 122.9 107.5",children:Object(te.jsx)("g",{children:Object(te.jsx)("path",{d:"M3.9,7.9C1.8,7.9,0,6.1,0,3.9C0,1.8,1.8,0,3.9,0h10.2c0.1,0,0.3,0,0.4,0c3.6,0.1,6.8,0.8,9.5,2.5c3,1.9,5.2,4.8,6.4,9.1 c0,0.1,0,0.2,0.1,0.3l1,4H119c2.2,0,3.9,1.8,3.9,3.9c0,0.4-0.1,0.8-0.2,1.2l-10.2,41.1c-0.4,1.8-2,3-3.8,3v0H44.7 c1.4,5.2,2.8,8,4.7,9.3c2.3,1.5,6.3,1.6,13,1.5h0.1v0h45.2c2.2,0,3.9,1.8,3.9,3.9c0,2.2-1.8,3.9-3.9,3.9H62.5v0 c-8.3,0.1-13.4-0.1-17.5-2.8c-4.2-2.8-6.4-7.6-8.6-16.3l0,0L23,13.9c0-0.1,0-0.1-0.1-0.2c-0.6-2.2-1.6-3.7-3-4.5 c-1.4-0.9-3.3-1.3-5.5-1.3c-0.1,0-0.2,0-0.3,0H3.9L3.9,7.9z M96,88.3c5.3,0,9.6,4.3,9.6,9.6c0,5.3-4.3,9.6-9.6,9.6 c-5.3,0-9.6-4.3-9.6-9.6C86.4,92.6,90.7,88.3,96,88.3L96,88.3z M53.9,88.3c5.3,0,9.6,4.3,9.6,9.6c0,5.3-4.3,9.6-9.6,9.6 c-5.3,0-9.6-4.3-9.6-9.6C44.3,92.6,48.6,88.3,53.9,88.3L53.9,88.3z M33.7,23.7l8.9,33.5h63.1l8.3-33.5H33.7L33.7,23.7z"})})})},Ne=function(){return Object(te.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"512",height:"512",children:Object(te.jsx)("g",{id:"Outline",children:Object(te.jsx)("path",{d:"M488.2,409.63l-15.921,1.592,5.945,59.448L432,436V176h16.76l21.7,217.054,15.921-1.592L463.96,167.2A8,8,0,0,0,456,160H368V96A79.96,79.96,0,0,0,256,22.7,79.96,79.96,0,0,0,144,96v64H56a8,8,0,0,0-7.96,7.2l-5.335,53.347,15.921,1.592L63.24,176H104v75.056L76.422,264.845A8,8,0,0,0,72,272v32H88V276.944l16-8V288h16V268.944l16,8V360H88V320H72v48a8,8,0,0,0,8,8h64a8,8,0,0,0,8-8V272a8,8,0,0,0-4.422-7.155L120,251.056V176h24v18.165a16,16,0,1,0,16,0V176H288v18.165a16,16,0,1,0,16,0V176h79.16l-30.4,304H32.84l23.8-237.957-15.921-1.592L16.04,487.2A8,8,0,0,0,24,496H488a8,8,0,0,0,7.96-8.8ZM208,160H160V96a63.953,63.953,0,0,1,78.054-62.426A79.871,79.871,0,0,0,208,96Zm80,0H224V96a64.023,64.023,0,0,1,32-55.39A64.023,64.023,0,0,1,288,96Zm64,0H304V96a79.871,79.871,0,0,0-30.054-62.426A63.953,63.953,0,0,1,352,96Zm47.24,16H416V436l-46.227,34.67ZM384,480l40-30,40,30Z"})})})},we=function(e){var t=e.src,n=Object(r.a)(e,ne),c=Object(d.useState)(t),s=Object(i.a)(c,2),l=s[0],o=s[1];return Object(d.useEffect)((function(){o(t)}),[t]),Object(te.jsx)("img",Object(a.a)(Object(a.a)({alt:n.alt||"",src:l,onError:function(){return o("/img_err.png")}},n),{},{onClick:n.onClick||function(){}}))},ke=function(e){var t=e.defaultValue,n=e.value,c=e.required,s=e.onChange,a=Object(d.useState)(!!t),r=Object(i.a)(a,2),l=r[0],o=r[1];return Object(d.useEffect)((function(){o(n)}),[n]),Object(te.jsx)("section",{className:"checkbox",children:Object(te.jsxs)("div",{className:"ticks",onClick:function(){return o(!l)},children:[Object(te.jsx)("input",{type:"checkbox",value:l,required:c,onChange:function(e){o(!l),null===s||void 0===s||s(!l)}}),Object(te.jsx)("svg",{className:"border",xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",viewBox:"0 0 30 30",children:Object(te.jsxs)("g",{id:"Rectangle_661","data-name":"Rectangle 661",fill:"none",stroke:"#7fc4fd",strokeWidth:"3",children:[Object(te.jsx)("rect",{width:"30",height:"30",rx:"4",stroke:"none"}),Object(te.jsx)("rect",{x:"1.5",y:"1.5",width:"27",height:"27",rx:"2.5",fill:"none"})]})}),l&&Object(te.jsx)(ye,{})]})})},Se=function(e){var t=e.options,n=e.defaultValue,c=e.onChange,s=e.maxHeight,a=e.required,r=(e.disabled,e.dataId,e.validationMessage,e.className,e.placeholder),l=Object(d.useState)((function(){return n>-1&&t[n]?t[n].label:t.find((function(e){return e.value===n}))?t.find((function(e){return e.value===n})).label:"object"===typeof n?null===n||void 0===n?void 0:n.label:""})),o=Object(i.a)(l,2),j=o[0],u=o[1],h=Object(d.useState)(!1),O=Object(i.a)(h,2),x=O[0],f=O[1],m=Object(d.useState)(""),p=Object(i.a)(m,2),v=(p[0],p[1]),g=Object(d.useState)({}),y=Object(i.a)(g,2),C=y[0],N=y[1],w=Object(d.useRef)(),k=Object(d.useRef)();return Object(d.useLayoutEffect)((function(){var e=k.current.getBoundingClientRect(),n=e.width,c=e.height,s=e.x,a=e.y;window.innerHeight;N({position:"absolute",left:s,top:Math.max(Math.min(a+c,window.innerHeight-(37*t.length+8)),8),width:n,height:37*t.length,maxHeight:window.innerHeight-16})}),[x]),Object(te.jsxs)("section",{className:"combobox ".concat(x?"open":""),ref:k,onClick:function(){return f(!x)},children:[r&&!j&&Object(te.jsx)("label",{children:r}),Object(te.jsx)("input",{ref:w,required:a,value:j,autoComplete:"off",onFocus:function(e){return e.target.blur()},onChange:function(){}}),Object(te.jsx)("button",{type:"button",children:Object(te.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"13",height:"8.872",viewBox:"0 0 13 8.872",children:[Object(te.jsx)("defs",{children:Object(te.jsx)("clipPath",{id:"clip-path",children:Object(te.jsx)("rect",{width:"8.872",height:"13",fill:"none"})})}),Object(te.jsx)("g",{id:"Component_47_7","data-name":"Component 47 \u2013 7",transform:"translate(0 8.872) rotate(-90)",clipPath:"url(#clip-path)",children:Object(te.jsx)("path",{id:"Path_36","data-name":"Path 36",d:"M6.5,8.872,0,2.036,1.936,0,6.5,4.8,11.064,0,13,2.036Z",transform:"translate(8.872) rotate(90)",fill:"#336cf9"})})]})}),Object(te.jsx)(b.Modal,{className:"sectionOptions",open:x,setOpen:f,backdropClass:"selectionOptionBack",onBackdropClick:function(){return f(!1)},style:C,children:Object(te.jsx)("ul",{style:{width:"100%",maxHeight:x?s:0,zIndex:100},className:"options",children:t.map((function(e){return Object(te.jsx)("li",{onClick:function(t){v(e.value),u(e.label),c&&c(e),f(!1),w.current.setCustomValidity("")},className:"option ".concat(e.className||""," ").concat(j===e.label?"selected":""),children:e.label},e.label)}))})})]})},_e=function(e){var t=e.defaultValue,n=e.min,c=e.max,s=e.required,a=e.onChange,r=e.step,l=e.placeholder,o=e.readOnly,j=Object(d.useState)(t||0),u=Object(i.a)(j,2),b=u[0],h=u[1];return Object(te.jsxs)("section",{className:"number",children:[Object(te.jsx)("input",{type:"number",step:r||"0.01",required:s,value:b,readOnly:o,onChange:function(e){h((+e.target.value).toString()),null===a||void 0===a||a(e)},placeholder:l||"0.00",min:n,max:c}),Object(te.jsxs)("div",{className:"ticker",children:[Object(te.jsx)("button",{type:"button",onClick:function(){return h(+b+1)},children:Object(te.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"13",height:"8.872",viewBox:"0 0 13 8.872",children:[Object(te.jsx)("defs",{children:Object(te.jsx)("clipPath",{id:"clip-path",children:Object(te.jsx)("rect",{width:"8.872",height:"13",fill:"none"})})}),Object(te.jsx)("g",{id:"Component_47_8","data-name":"Component 47 \u2013 8",transform:"translate(13) rotate(90)",clipPath:"url(#clip-path)",children:Object(te.jsx)("path",{id:"Path_36","data-name":"Path 36",d:"M6.5,8.872,0,2.036,1.936,0,6.5,4.8,11.064,0,13,2.036Z",transform:"translate(8.872) rotate(90)",fill:"#336cf9"})})]})}),Object(te.jsx)("button",{type:"button",onClick:function(){return h(+b-1)},children:Object(te.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"13",height:"8.872",viewBox:"0 0 13 8.872",children:[Object(te.jsx)("defs",{children:Object(te.jsx)("clipPath",{id:"clip-path",children:Object(te.jsx)("rect",{width:"8.872",height:"13",fill:"none"})})}),Object(te.jsx)("g",{id:"Component_47_7","data-name":"Component 47 \u2013 7",transform:"translate(0 8.872) rotate(-90)",clipPath:"url(#clip-path)",children:Object(te.jsx)("path",{id:"Path_36","data-name":"Path 36",d:"M6.5,8.872,0,2.036,1.936,0,6.5,4.8,11.064,0,13,2.036Z",transform:"translate(8.872) rotate(90)",fill:"#336cf9"})})]})})]})]})},Me=function(e){var t=e.required,n=e.onChange,c=e.prefill,a=(e.label,e.multiple),r=e.accept,l=e.name,o=Object(d.useState)(c||[]),j=Object(i.a)(o,2),u=j[0],b=j[1];return Object(d.useEffect)((function(){null===n||void 0===n||n(u)}),[u]),Object(te.jsxs)("section",{className:"fileInput",children:[u.map((function(e,t){var n="string"===typeof e?{type:"url",url:e}:{type:e.type,name:e.name,url:URL.createObjectURL(e)},c=n.type.startsWith("image")||n.url.match(/(\.gif|\.png|\.jpg|\.jpeg|\.webp)$/);return Object(te.jsxs)("div",{className:"file ".concat(c?"thumb":"any"),children:[Object(te.jsx)("button",{className:"close",type:"button",onClick:function(){return b((function(e){return e.filter((function(e,n){return n!==t}))}))},children:Object(te.jsx)(ie,{})}),Object(te.jsx)(we,{className:c?"thumb":"",src:c?n.url:"/file_icon.png"}),!c&&Object(te.jsx)("p",{className:"filename",children:e.name})]},t)})),(0===u.length||a)&&Object(te.jsxs)("div",{className:"uploadBtn",children:[Object(te.jsx)(Oe,{}),Object(te.jsx)("input",{name:l,type:"file",multiple:a,required:t,accept:r,onChange:function(e){b((function(t){return[].concat(Object(s.a)(t),Object(s.a)(Object(s.a)(e.target.files).filter((function(e){return!u.some((function(t){return t.name===e.name}))}))))}))}})]})]})},Pe=function(e){var t=Object(d.useRef)(),n=Object(d.useState)(!1),c=Object(i.a)(n,2),s=c[0],a=c[1];return Object(d.useEffect)((function(){var n=new IntersectionObserver((function(e){var t=Object(i.a)(e,1)[0];a(t.isIntersecting)}),e);return t.current&&n.observe(t.current),function(){t.current&&n.unobserve(t.current)}}),[t,e]),[t,s]},Le=function(e){var t=e.total,n=e.btns,c=e.perPage,a=e.currentPage,r=(e.setCurrentPage,e.setPage),l=Object(d.useState)([]),o=Object(i.a)(l,2),j=o[0],u=o[1],b=Object(d.useState)([]),h=Object(i.a)(b,2),O=h[0],x=h[1];return Object(d.useEffect)((function(){u(Object(s.a)(Array(Math.ceil(t/c)).keys()).map((function(e){return e+1}))),x(Object(s.a)(Array(n).keys()).map((function(e){return e+1})))}),[t,c]),t<=c?Object(te.jsx)(te.Fragment,{}):Object(te.jsxs)("div",{className:"pagination",children:[Object(te.jsx)("button",{disabled:a<=1,onClick:function(){return r((function(e){return e-1}))},children:"<"}),Object(te.jsxs)("ul",{className:"pages",children:[j.length<=n&&j.map((function(e){return Object(te.jsx)("li",{className:e===+a?"active":"",children:Object(te.jsx)("button",{onClick:function(){return r(e)},children:e})},e)})),j.length>n&&O.map((function(e){var t=j.length-n,c=Math.ceil(n/2),s=0;a>c&&(s=a-c+n<=j.length?a-c:t);var i=e+s;return Object(te.jsx)("li",{className:i===a?"active":"",children:Object(te.jsx)("button",{onClick:function(){return r(e)},children:i})},i)}))]}),Object(te.jsx)("button",{disabled:a>=j.length,onClick:function(){return r((function(e){return e+1}))},children:">"})]})},Fe=function(){var e=Object(d.useContext)(u.d),t=e.user,n=e.setUser,c=(e.cart,e.setCart,e.userType,Object(h.g)()),s=Object(d.useState)(!1),a=Object(i.a)(s,2);a[0],a[1];return Object(d.useEffect)((function(){fetch("/api/authUser").then((function(e){return e.json()})).then((function(e){e.user&&n(e.user)}))}),[]),Object(te.jsxs)("header",{className:"genericHeader",children:[Object(te.jsxs)(O.b,{className:"logoLink",to:"/",children:[Object(te.jsx)(we,{className:"logo",src:"/logo_land.jpg",alt:"Delivery pay logo"}),Object(te.jsx)(we,{className:"logo_small",src:"/logo_sqr.jpg",alt:"Delivery pay logo"})]}),Object(te.jsx)("div",{className:"links",children:Object(te.jsx)(O.b,{to:"/",className:"home",children:"Home"})}),Object(te.jsx)("div",{className:"clas",children:t?Object(te.jsx)(x.ProfileAvatar,{},"genericHeader"):Object(te.jsx)(te.Fragment,{children:"/u/login"===c.location.pathname?Object(te.jsx)(O.b,{to:"/u/join",children:"Register"}):Object(te.jsx)(O.b,{to:"/u/login",children:"Login"})})})]})},Ae=function(){return Object(te.jsx)("footer",{children:Object(te.jsxs)("div",{className:"links",children:[Object(te.jsx)(O.b,{to:"/aboutUs",children:"About us"}),Object(te.jsx)(O.b,{to:"/privacyPolicy",children:"Privacy Policy"}),Object(te.jsx)(O.b,{to:"/codeOfConduct",children:"Code of Conduct"}),Object(te.jsx)(O.b,{to:"/copyrightPolicy",children:"Copyright Policy"}),Object(te.jsx)(O.b,{to:"/fees&Charges",children:"Fees & Charges"}),Object(te.jsx)(O.b,{to:"/terms",children:"User Agreement"}),Object(te.jsx)(O.b,{to:"/howItWorks",children:"How it works"}),Object(te.jsx)(O.b,{to:"/contactUs",children:"Contact us"}),Object(te.jsx)(O.b,{to:"/employment-opportunities",children:"Work with us"}),Object(te.jsx)(O.b,{to:"/refundCancellationPolicy",children:"Refund & Cancellation Policy"}),Object(te.jsx)(O.b,{to:"/shippingDeliveryPolicy",children:"Shipping & Delivery Policy"})]})})},Re=function(e){var t,n=e.files,a=e.setMsg,r="https://cdn.deliverypay.in",i=new FormData,l=[],o=Object(c.a)(n);try{for(o.s();!(t=o.n()).done;){var j=t.value;"string"===typeof j?l.push(j):i.append("file",j)}}catch(d){o.e(d)}finally{o.f()}return fetch("".concat(r,"/upload"),{method:"POST",body:i}).then((function(e){return e.json()})).then((function(e){return"ok"===e.code?[].concat(l,Object(s.a)(e.files.map((function(e){return r+"/"+e})))):null})).catch((function(e){console.log(e),a(Object(te.jsxs)(te.Fragment,{children:[Object(te.jsx)("button",{onClick:function(){return a(null)},children:"Okay"}),Object(te.jsxs)("div",{children:[Object(te.jsx)(ae,{}),Object(te.jsx)("h4",{children:"File upload failed. Make sure you're online."})]})]}))}))},De=function(e){var t=e.links,n=Object(d.useState)(!1),c=Object(i.a)(n,2),s=c[0],a=c[1],r=Object(d.useState)(null),l=Object(i.a)(r,2),o=l[0],j=l[1],u=Object(d.useState)(0),h=Object(i.a)(u,2),O=h[0],x=h[1],f=(null===t||void 0===t?void 0:t.map((function(e,t){var n=null,c=null,s=function(e){a(!0),j(c),x(t)};return e.match(/(\.gif|\.png|\.jpg|\.jpeg|\.webp)$/)||e.startsWith("https://image")?(n=Object(te.jsx)(we,{className:O===t?"active":"",src:e,onClick:s},t),c=Object(te.jsx)(we,{src:e},t)):e.match(/(\.mp3|\.ogg|\.amr|\.m4a|\.flac|\.wav|\.aac)$/i)?(n=Object(te.jsx)("div",{className:"audioThumb ".concat(O===t?"active":""),onClick:s,children:Object(te.jsx)(we,{src:"/play_btn.png"})},t),c=Object(te.jsx)("audio",{src:e,controls:"on",autoPlay:"on"},t)):e.match(/(\.mp4|\.mov|\.avi|\.flv|\.wmv|\.webm)$/i)?(n=Object(te.jsxs)("div",{className:"videoThumb ".concat(O===t?"active":""),children:[Object(te.jsx)("video",{src:e,onClick:s}),Object(te.jsx)(we,{src:"/play_btn.png"})]},t),c=Object(te.jsx)("video",{src:e,controls:"on",autoPlay:"on"},t)):n=Object(te.jsx)("a",{href:t,children:e},t),n})))||"N/A";return Object(te.jsxs)(te.Fragment,{children:[f,Object(te.jsxs)(b.Modal,{className:"mediaModal",open:s,backdropClass:"disputeMediaViewBack",children:[Object(te.jsx)("button",{className:"close",onClick:function(){return a(!1)},children:Object(te.jsx)(ie,{})}),Object(te.jsx)("div",{className:"view",children:o}),Object(te.jsx)("div",{className:"thumbs",children:f})]})]})},Te=function(e){var t=e.icon,n=e.children,c=e.className,s=e.wrapperClassName,r=e.clickable,l=e.onClick,o=Object(d.useState)(!1),j=Object(i.a)(o,2),u=j[0],h=j[1],O=Object(d.useState)({}),x=Object(i.a)(O,2),f=x[0],m=x[1],p=Object(d.useRef)(),v=Object(d.useRef)();return Object(d.useLayoutEffect)((function(){var e,t,n=null===(e=p.current)||void 0===e?void 0:e.getBoundingClientRect(),c=n.height,s=n.y,r=n.width,i=n.x,l=window.innerHeight-(s+c),o=null===(t=v.current)||void 0===t?void 0:t.getBoundingClientRect();m(Object(a.a)(Object(a.a)({position:"fixed"},(null===o||void 0===o?void 0:o.height)>l?c>s?{}:{bottom:window.innerHeight-s}:{top:c+s+4}),{},{right:window.innerWidth-i-r}))}),[u]),Object(te.jsxs)("div",{className:"actions ".concat(c||""),children:[Object(te.jsx)("button",{type:"button",className:"btn",ref:p,onClick:function(e){e.stopPropagation(),h(!0),null===l||void 0===l||l()},children:t||Object(te.jsx)(we,{src:"/menu_dot.png"})}),Object(te.jsx)(b.Modal,{className:"actions",backdropClass:"actionsBackdrop",open:u,style:f,onBackdropClick:function(){return h(!1)},children:Object(te.jsx)("ul",{ref:v,className:s,onClick:function(e){e.stopPropagation(),!r&&h(!1)},children:n})})]})},qe=function(e){var t=e.basepath,n=e.tabs,c=Object(h.g)();return Object(te.jsx)("ul",{className:"tabs",children:n.map((function(e,n){return Object(te.jsx)(O.b,{to:t+e.path,onClick:function(){var t;return null===(t=e.onClick)||void 0===t?void 0:t.call(e)},children:Object(te.jsx)("li",{className:c.location.pathname.startsWith(t+e.path)?"active":"",children:e.label})},n)}))})},Be=function(e){var t=e.user;return Object(te.jsxs)("div",{className:"profile",children:[Object(te.jsx)(we,{src:t.profileImg||"/profile-user.jpg"}),Object(te.jsxs)("p",{className:"name",children:[t.name||t.firstName+" "+t.lastName,Object(te.jsx)("span",{className:"contact",children:t.phone})]})]})},Ee=function(e){var t=e.url;return Object(te.jsxs)("div",{className:"shareBtns",children:[Object(te.jsx)(f.a,{url:t,children:Object(te.jsx)(m.a,{})}),Object(te.jsx)(p.a,{url:t,children:Object(te.jsx)(v.a,{})}),Object(te.jsx)(g.a,{url:t,children:Object(te.jsx)(y.a,{})}),Object(te.jsx)(C.a,{url:t,children:Object(te.jsx)(N.a,{})}),Object(te.jsx)(w.a,{url:t,children:Object(te.jsx)(k.a,{})}),Object(te.jsx)(S.a,{url:t,children:Object(te.jsx)(_.a,{})}),Object(te.jsx)(M.a,{url:t,children:Object(te.jsx)(P.a,{})}),Object(te.jsx)(L.a,{url:t,children:Object(te.jsx)(F.a,{})}),Object(te.jsx)(A.a,{url:t,children:Object(te.jsx)(R.a,{})}),Object(te.jsx)(D.a,{url:t,children:Object(te.jsx)(T.a,{})}),Object(te.jsx)(q.a,{url:t,children:Object(te.jsx)(B.a,{})}),Object(te.jsx)(E.a,{url:t,children:Object(te.jsx)(I.a,{})}),Object(te.jsx)(H.a,{url:t,children:Object(te.jsx)(Z.a,{})}),Object(te.jsx)(W.a,{url:t,children:Object(te.jsx)(V.a,{})}),Object(te.jsx)(U.a,{url:t,children:Object(te.jsx)(z.a,{})}),Object(te.jsx)(G.a,{url:t,children:Object(te.jsx)(Y.a,{})}),Object(te.jsx)(J.a,{url:t,children:Object(te.jsx)($.a,{})}),Object(te.jsx)(K.a,{url:t,children:Object(te.jsx)(X.a,{})}),Object(te.jsx)(Q.a,{url:t,children:Object(te.jsx)(ee.a,{})})]})},Ie=function(e){var t=e.time,n=e.format;if("Invalid Date"===new Date(t).toString())return t;var c={year:n.includes("YYYY")?"numeric":"2-digit",month:n.includes("MMMM")?"long":n.includes("MMM")?"short":n.includes("MM")?"2-digit":"long",weekday:n.includes("dddd")?"long":n.includes("ddd")?"short":"narrow",day:n.includes("DD")?"2-digit":"numeric",hour:n.includes("hh")?"2-digit":"numeric",minute:n.includes("mm")?"2-digit":"numeric",second:n.includes("ss")?"2-digit":"numeric"},s={};return new Intl.DateTimeFormat("en-IN",c).formatToParts(new Date(t||new Date)).map((function(e){var t=e.type,n=e.value;s[t]=n})),n.replace(/Y+/g,s.year).replace(/M+/g,s.month).replace(/D+/g,s.day).replace(/h+/g,s.hour).replace(/m+/g,s.minute).replace(/s+/g,s.second).replace(/a+/g,s.dayPeriod).replace(/d+/g,s.weekday)},He=function(e){var t=e.format,n=e.children,c=Object(r.a)(e,ce);return Object(te.jsx)("time",Object(a.a)(Object(a.a)({},c),{},{children:Ie({time:n,format:t})}))},Ze=function(e){var t,n=e.product,c=e.gst,s=e.discount,a=n.price;return!1!==s&&(null===(t=n.discount)||void 0===t?void 0:t.amount)&&(a-=We(n)),(null===c||void 0===c?void 0:c.verified)&&(a+=a*((n.gst||c.amount)/100)),!0===c&&(a+=a*(n.gst/100)),a.fix()},We=function(e){var t=e.discount,n=e.price;return(null===t||void 0===t?void 0:t.amount)?"flat"===t.type?(+t.amount).fix():"percent"===t.type?(+n/100*t.amount).fix():0:0},Ve={set:function(e,t){return localStorage.setItem(e,t)},get:function(e){return localStorage.getItem(e)},remove:function(e){return e.push?e.forEach((function(e){return localStorage.removeItem(e)})):localStorage.removeItem(e)}},Ue=function(e,t,n){return e.find((function(e){return"seller"===n?e.product._id===t._id&&e.buyer===Ve.get("buyer"):e.product._id===t._id}))?e.map((function(e){return e.product._id===t._id?Object(a.a)(Object(a.a)({},e),{},{qty:e.qty+1},"seller"===n&&Ve.get("buyer")&&{buyer:Ve.get("buyer")}):e})):[].concat(Object(s.a)(e),[Object(a.a)({product:t,qty:1},"seller"===n&&Ve.get("buyer")&&{buyer:Ve.get("buyer")})])},ze=function(e){var t=e.className,n=e.children;return Object(te.jsx)(Te,{className:"".concat(t||""," tip"),wrapperClassName:"tipWrapper",icon:Object(te.jsx)(we,{src:"/help.png"}),children:n})}},29:function(e,t,n){"use strict";n.r(t),n.d(t,"MilestoneForm",(function(){return x})),n.d(t,"MilestoneReleaseForm",(function(){return f})),n.d(t,"AddressForm",(function(){return m})),n.d(t,"DisputeForm",(function(){return p})),n.d(t,"TicketForm",(function(){return v})),n.d(t,"TicketReplyForm",(function(){return g}));var c=n(14),s=n.n(c),a=n(16),r=n(4),i=n(3),l=n(1),o=n(8),j=n(2),d=n(5),u=n(7),b=n(25),h=n(40),O=(n(88),n(0)),x=function(e){var t,n,c,s,a=e.action,b=e.client,x=e.onSuccess,f=e.definedAmount,m=e.order,p=e.refund,v=e.strict,g=Object(l.useContext)(o.d),y=g.user,C=(g.setUser,g.config),N=Object(l.useState)(!1),w=Object(i.a)(N,2),k=w[0],S=w[1],_=Object(l.useState)(""),M=Object(i.a)(_,2),P=(M[0],M[1],Object(l.useState)(!1)),L=Object(i.a)(P,2),F=(L[0],L[1],Object(l.useState)(Object(r.a)({},y))),A=Object(i.a)(F,2),R=A[0],D=(A[1],Object(l.useState)(Object(r.a)({},b))),T=Object(i.a)(D,2),q=T[0],B=(T[1],Object(l.useState)("")),E=Object(i.a)(B,2),I=E[0],H=E[1],Z=Object(l.useState)(f||""),W=Object(i.a)(Z,2),V=W[0],U=W[1],z=Object(l.useState)(0),G=Object(i.a)(z,2),Y=G[0],J=G[1],$=Object(l.useState)(null),K=Object(i.a)($,2),X=K[0],Q=K[1],ee=Object(l.useRef)(),te=Object(l.useCallback)((function(){fetch("/api/requestMilestone",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({buyer_id:b._id,amount:V,dscr:I,order:m,refund:p})}).then((function(e){return e.json()})).then((function(e){S(!1),"ok"===e.code?null===x||void 0===x||x(Object(r.a)({},e)):Q(Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("button",{onClick:function(){return Q(null)},children:"Okay"}),Object(O.jsxs)("div",{children:[Object(O.jsx)(j.i,{}),Object(O.jsx)("h4",{children:"Could not request milestone. Try again."})]})]}))})).catch((function(e){S(!1),console.log(e),Q(Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("button",{onClick:function(){return Q(null)},children:"Okay"}),Object(O.jsxs)("div",{children:[Object(O.jsx)(j.i,{}),Object(O.jsx)("h4",{children:"Could not request milestone. Make sure you're online."})]})]}))}))}),[q,R,V,I]),ne=Object(l.useCallback)((function(){fetch("/api/createMilestone",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({seller:Object(r.a)({},q),amount:V,dscr:I,order:m,refund:p})}).then((function(e){return e.json()})).then((function(e){S(!1),"ok"===e.code?null===x||void 0===x||x(Object(r.a)({},e)):403===e.code?Q(Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("button",{onClick:function(){return Q(null)},children:"Okay"}),Object(O.jsxs)("div",{children:[Object(O.jsx)(j.i,{}),Object(O.jsx)("h4",{children:"Insufficient fund"}),Object(O.jsx)(d.b,{to:"/account/profile/wallet",children:"Add Money to your wallet now."})]})]})):Q(Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("button",{onClick:function(){return Q(null)},children:"Okay"}),Object(O.jsxs)("div",{children:[Object(O.jsx)(j.i,{}),Object(O.jsx)("h4",{children:"Could not create milestone. Try again"})]})]}))})).catch((function(e){S(!1),console.log(e),Q(Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("button",{onClick:function(){return Q(null)},children:"Okay"}),Object(O.jsxs)("div",{children:[Object(O.jsx)(j.i,{}),Object(O.jsx)("h4",{children:"Could not create milestone. Make sure you're online."})]})]}))}))}),[q,R,V,I]);return Object(l.useEffect)((function(){J((function(){return(+V/100*C.fee).fix()}))}),[V]),Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("form",{className:"milestonesForm",onSubmit:function(e){S(!0),e.preventDefault(),Object(h.b)(Object(O.jsxs)("div",{className:"toast",children:["Milestone is being"," ","create"===a?"created.":"requested."," ",Object(O.jsx)("button",{className:"undo",onClick:function(){ee.current=null},children:"Undo"})]}),{position:"bottom-center",autoClose:8e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,onClose:function(){var e;null===(e=ee.current)||void 0===e||e.call(ee),S(!1)},draggable:!0,progress:void 0}),ee.current="create"===a?ne:te},children:[Object(O.jsxs)("section",{className:"transactionDetail",children:[Object(O.jsxs)("section",{className:"amount",children:[Object(O.jsx)("label",{children:"Amount"}),Object(O.jsx)(j.t,{readOnly:v,min:10,defaultValue:f||0,required:!0,onChange:function(e){return U((+e.target.value).toString())}})]}),V&&Object(O.jsxs)(O.Fragment,{children:["create"===a&&Object(O.jsxs)("label",{className:"receivable",children:[b.firstName," ",b.lastName," will recieve \u20b9",(V-Y).fix()]}),"request"===a&&Object(O.jsxs)("label",{className:"receivable",children:["You will recieve \u20b9",(V-Y).fix()]})]}),Object(O.jsxs)("section",{children:[Object(O.jsx)("label",{children:"Detail"}),Object(O.jsx)("input",{value:I,required:!0,onChange:function(e){return H(e.target.value)}})]}),Object(O.jsx)("button",{type:"submit",children:"create"===a?"Create Milestone":"Request Milestone"})]}),Object(O.jsxs)("section",{className:"clientDetail",children:["request"===a&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(j.n,{src:(null===b||void 0===b?void 0:b.profileImg)||"/profile-user.jpg"}),Object(O.jsx)("label",{children:"Buyer Information"}),Object(O.jsxs)("div",{className:"detail",children:[Object(O.jsxs)("section",{className:"profileDetail",children:[Object(O.jsx)("p",{className:"name",children:(null===b||void 0===b?void 0:b.firstName)+" "+(null===b||void 0===b?void 0:b.lastName)}),Object(O.jsx)("p",{className:"phone",children:null===b||void 0===b?void 0:b.phone}),Object(O.jsx)("p",{className:"email",children:null===b||void 0===b?void 0:b.email})]}),(null===b||void 0===b||null===(t=b.address)||void 0===t?void 0:t.street)&&Object(O.jsx)("section",{className:"address",children:Object(O.jsxs)("p",{className:"street",children:[null===(n=b.address)||void 0===n?void 0:n.street,", ",null===(c=b.address)||void 0===c?void 0:c.city,","," ",null===(s=b.address)||void 0===s?void 0:s.zip]})})]})]}),"request"===a?null:Object(O.jsxs)("div",{className:"sellerInfo",children:[Object(O.jsx)(j.n,{src:(null===q||void 0===q?void 0:q.profileImg)||"/profile-user.jpg"}),Object(O.jsx)("label",{children:"Seller Information"}),Object(O.jsx)("div",{className:"detail",children:Object(O.jsxs)("section",{className:"profileDetail",children:[Object(O.jsxs)("p",{className:"name",children:[null===q||void 0===q?void 0:q.firstName," ",null===q||void 0===q?void 0:q.lastName]}),Object(O.jsx)("p",{className:"phone",children:null===q||void 0===q?void 0:q.phone}),Object(O.jsx)("p",{className:"email",children:null===q||void 0===q?void 0:q.email})]})})]})]})]}),k&&Object(O.jsx)("div",{className:"spinnerContainer",children:Object(O.jsx)("div",{className:"spinner"})}),Object(O.jsx)(u.Modal,{className:"msg",open:X,children:X})]})},f=function(e){var t=e.milestone,n=e.setReleaseForm,c=e.onSuccess,s=Object(l.useState)(t.amount),a=Object(i.a)(s,2),r=a[0],o=(a[1],Object(l.useState)(null)),d=Object(i.a)(o,2),b=d[0],h=d[1];return Object(O.jsxs)("form",{onSubmit:function(e){e.preventDefault(),fetch("/api/releaseMilestone",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({_id:t._id,amount:r})}).then((function(e){return e.json()})).then((function(e){var t=e.code,n=e.milestone;n?null===c||void 0===c||c(n):h(403===t?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("button",{onClick:function(){return h(null)},children:"Okay"}),Object(O.jsxs)("div",{children:[Object(O.jsx)(j.i,{}),Object(O.jsx)("h4",{children:"Could not release Milestone due to low balance."})]})]}):Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("button",{onClick:function(){return h(null)},children:"Okay"}),Object(O.jsxs)("div",{children:[Object(O.jsx)(j.i,{}),Object(O.jsx)("h4",{children:"Could not release Milestone."})]})]}))})).catch((function(e){console.log(e),O.Fragment,j.i}))},children:["You sure want to release this Milestone?",Object(O.jsxs)("section",{className:"btns",children:[Object(O.jsx)("button",{type:"submit",children:"Confirm"}),Object(O.jsx)("button",{className:"cancel",type:"button",onClick:function(){return n(!1)},children:"Cancel"})]}),Object(O.jsx)(u.Modal,{open:b,className:"msg",children:b})]})},m=function(e){var t,n,c,s,a,r,o,j=e.client,d=e.onSuccess,u=e.onCancel,b=Object(l.useState)(j?j.name||j.firstName+" "+j.lastName:""),h=Object(i.a)(b,2),x=h[0],f=h[1],m=Object(l.useState)((null===j||void 0===j?void 0:j.phone)||""),p=Object(i.a)(m,2),v=p[0],g=p[1],y=Object(l.useState)((null===j||void 0===j||null===(t=j.address)||void 0===t?void 0:t.zip)||""),C=Object(i.a)(y,2),N=C[0],w=C[1],k=Object(l.useState)((null===j||void 0===j||null===(n=j.address)||void 0===n?void 0:n.locality)||""),S=Object(i.a)(k,2),_=S[0],M=S[1],P=Object(l.useState)((null===j||void 0===j||null===(c=j.address)||void 0===c?void 0:c.street)||""),L=Object(i.a)(P,2),F=L[0],A=L[1],R=Object(l.useState)((null===j||void 0===j||null===(s=j.address)||void 0===s?void 0:s.city)||""),D=Object(i.a)(R,2),T=D[0],q=D[1],B=Object(l.useState)((null===j||void 0===j||null===(a=j.address)||void 0===a?void 0:a.state)||""),E=Object(i.a)(B,2),I=E[0],H=E[1],Z=Object(l.useState)((null===j||void 0===j||null===(r=j.address)||void 0===r?void 0:r.landmark)||""),W=Object(i.a)(Z,2),V=W[0],U=W[1],z=Object(l.useState)((null===j||void 0===j||null===(o=j.address)||void 0===o?void 0:o.altPhone)||""),G=Object(i.a)(z,2),Y=G[0],J=G[1];return Object(O.jsxs)("form",{className:"addressForm",onSubmit:function(e){e.preventDefault(),null===d||void 0===d||d({address:{name:x,phone:v,street:F,city:T,state:I,zip:N,locality:_,landmark:V,altPhone:Y}})},children:[Object(O.jsxs)("section",{children:[Object(O.jsx)("label",{htmlFor:"name",children:"Full Name"}),Object(O.jsx)("input",{value:x,onChange:function(e){return f(e.target.value)},type:"text",name:"name",required:!0})]}),Object(O.jsxs)("section",{children:[Object(O.jsx)("label",{htmlFor:"phone",children:"Phone Number"}),Object(O.jsx)("input",{value:v,onChange:function(e){return g(e.target.value)},type:"tel",name:"phone",required:!0})]}),Object(O.jsxs)("section",{children:[Object(O.jsx)("label",{htmlFor:"zip",children:"PIN Code"}),Object(O.jsx)("input",{value:N,onChange:function(e){return w(e.target.value)},type:"number",name:"zip",required:!0})]}),Object(O.jsxs)("section",{children:[Object(O.jsx)("label",{htmlFor:"locality",children:"Locality"}),Object(O.jsx)("input",{value:_,onChange:function(e){return M(e.target.value)},type:"text",name:"locality",required:!0})]}),Object(O.jsxs)("section",{className:"street",children:[Object(O.jsx)("label",{htmlFor:"address",children:"Address"}),Object(O.jsx)("textarea",{value:F,onChange:function(e){return A(e.target.value)},resiz:"off",type:"text",name:"address",required:!0})]}),Object(O.jsxs)("section",{children:[Object(O.jsx)("label",{htmlFor:"city",children:"City"}),Object(O.jsx)("input",{value:T,onChange:function(e){return q(e.target.value)},type:"text",name:"city",required:!0})]}),Object(O.jsxs)("section",{children:[Object(O.jsx)("label",{htmlFor:"state",children:"State"}),Object(O.jsx)("input",{value:I,onChange:function(e){return H(e.target.value)},type:"text",name:"state",required:!0})]}),Object(O.jsxs)("section",{children:[Object(O.jsx)("label",{htmlFor:"landmark",children:"Landmark (Optional)"}),Object(O.jsx)("input",{value:V,onChange:function(e){return U(e.target.value)},type:"text",name:"landmark"})]}),Object(O.jsxs)("section",{children:[Object(O.jsx)("label",{htmlFor:"altPhone",children:"Alternate Phone (Optional)"}),Object(O.jsx)("input",{value:Y,onChange:function(e){return J(e.target.value)},type:"tel",name:"altPhone"})]}),Object(O.jsx)("button",{className:"save",children:"Save"}),Object(O.jsx)("button",{className:"cancel",type:"button",onClick:function(){return null===u||void 0===u?void 0:u()},children:"Cancel"}),Object(O.jsx)("section",{className:"pBtm"})]})},p=function(e){var t=e.milestone,n=(e.setDisputeForm,e.onSuccess),c=Object(l.useState)(""),r=Object(i.a)(c,2),o=r[0],d=r[1],h=Object(l.useState)(!1),x=Object(i.a)(h,2),f=x[0],m=x[1],p=Object(l.useState)(""),v=Object(i.a)(p,2),g=v[0],y=v[1],C=Object(l.useState)([]),N=Object(i.a)(C,2),w=N[0],k=N[1],S=Object(l.useState)(null),_=Object(i.a)(S,2),M=_[0],P=_[1],L=function(){var e=Object(a.a)(s.a.mark((function e(c){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.preventDefault(),m(!0),!w.length){e.next=8;break}return e.next=5,Object(j.H)({files:w,setMsg:P});case 5:e.t0=e.sent,e.next=9;break;case 8:e.t0=[];case 9:a=e.t0,fetch("/api/fileDispute",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({issue:o,milestoneId:t._id,defendantId:t.client._id,_case:{dscr:g,files:a}})}).then((function(e){return e.json()})).then((function(e){m(!1),"ok"===e.code?null===n||void 0===n||n(e.milestone):403===e.code?P(Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("button",{onClick:function(){return P(null)},children:"Okay"}),Object(O.jsxs)("div",{children:[Object(O.jsx)(j.i,{}),Object(O.jsx)("h4",{children:"Insufficient fund! you have to have \u20b9500 in your wallet to file a dispute."})]})]})):P(Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("button",{onClick:function(){return P(null)},children:"Okay"}),Object(O.jsxs)("div",{children:[Object(O.jsx)(j.i,{}),Object(O.jsx)("h4",{children:"Could not file dispute."})]})]}))})).catch((function(e){m(!0),console.log(e),P(Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("button",{onClick:function(){return P(null)},children:"Okay"}),Object(O.jsxs)("div",{children:[Object(O.jsx)(j.i,{}),Object(O.jsx)("h4",{children:"Could not file dispute. make sure you're online."})]})]}))}));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("form",{className:"disputeForm",onSubmit:L,children:[Object(O.jsx)("h4",{children:"You feel like you are getting scammed?"}),Object(O.jsxs)("section",{children:[Object(O.jsx)("label",{htmlFor:"issue",children:"Issue"}),Object(O.jsx)(j.h,{name:"issue",options:"buyer"===t.role?[{label:"Buyer Not Releasing Payments",value:"Buyer Not Releasing Payments"}]:[{label:"Goods Not Received",value:"Goods Not Received"},{label:"Services Not Received",value:"Services Not Received"},{label:"Damaged",value:"Damaged"},{label:"Not As Agreed",value:"Not As Agreed"},{label:"Not As Displayed",value:"Not As Displayed"}],onChange:function(e){d(e.value)}})]}),Object(O.jsxs)("section",{children:[Object(O.jsx)("label",{htmlFor:"description",children:"Description"}),Object(O.jsx)(b.a,{name:"description",value:g,required:!0,onChange:function(e){return y(e.target.value)}})]}),Object(O.jsxs)("section",{children:[Object(O.jsx)("label",{htmlFor:"for",children:"Upload images to prove your case. ie: Product of image, proof of delivery."}),Object(O.jsx)(j.k,{multiple:!0,accept:"audio/*,video/*,image/*",onChange:function(e){return k(e)}})]}),Object(O.jsxs)("section",{className:"btns",children:[Object(O.jsx)("button",{className:"submit",type:"submit",children:"Submit"}),Object(O.jsx)("button",{className:"cancel",type:"button",children:"Cancel"})]}),Object(O.jsx)("div",{className:"pBtm"})]}),f&&Object(O.jsx)("div",{className:"spinnerContainer",children:Object(O.jsx)("div",{className:"spinner"})}),Object(O.jsx)(u.Modal,{open:M,className:"msg",children:M})]})},v=function(e){var t=e.onSuccess,n=Object(l.useState)(!1),c=Object(i.a)(n,2),r=c[0],o=c[1],d=Object(l.useState)(!1),h=Object(i.a)(d,2),x=h[0],f=h[1],m=Object(l.useState)(""),p=Object(i.a)(m,2),v=p[0],g=p[1],y=Object(l.useState)(""),C=Object(i.a)(y,2),N=C[0],w=C[1],k=Object(l.useState)(""),S=Object(i.a)(k,2),_=S[0],M=S[1],P=Object(l.useState)(""),L=Object(i.a)(P,2),F=L[0],A=L[1],R=Object(l.useState)(""),D=Object(i.a)(R,2),T=D[0],q=D[1],B=function(){var e=Object(a.a)(s.a.mark((function e(n){var c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),o(!0),!F.length){e.next=8;break}return e.next=5,Object(j.H)({files:F,setMsg:f});case 5:e.t0=e.sent,e.next=9;break;case 8:e.t0=[];case 9:c=e.t0,fetch("/api/openTicket",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({issue:v,milestone:N,transaction:_,message:{body:T,files:c}})}).then((function(e){return e.json()})).then((function(e){o(!1),"ok"===e.code?null===t||void 0===t||t(e.ticket):"milestone ID is invalid"===e.message?f(Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("button",{onClick:function(){return f(null)},children:"Okay"}),Object(O.jsxs)("div",{children:[Object(O.jsx)(j.i,{}),Object(O.jsx)("h4",{children:"Milestone Id is invalid."})]})]})):f(Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("button",{onClick:function(){return f(null)},children:"Okay"}),Object(O.jsxs)("div",{children:[Object(O.jsx)(j.i,{}),Object(O.jsx)("h4",{children:"Ticket could not be submitted."})]})]}))})).catch((function(e){o(!1),console.log(e),f(Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("button",{onClick:function(){return f(null)},children:"Okay"}),Object(O.jsxs)("div",{children:[Object(O.jsx)(j.i,{}),Object(O.jsx)("h4",{children:"Ticket could not be submitted. Make sure you're online."})]})]}))}));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("form",{className:"ticketForm",onSubmit:B,children:[Object(O.jsxs)("section",{children:[Object(O.jsx)("label",{children:"Issue"}),Object(O.jsx)("input",{value:v,required:!0,onChange:function(e){return g(e.target.value)}})]}),Object(O.jsxs)("section",{children:[Object(O.jsx)("label",{children:"Milestone ID (optional)"}),Object(O.jsx)("input",{value:N,onChange:function(e){return w(e.target.value)}})]}),Object(O.jsxs)("section",{children:[Object(O.jsx)("label",{children:"Transaction ID (optional)"}),Object(O.jsx)("input",{value:_,onChange:function(e){return M(e.target.value)}})]}),Object(O.jsxs)("section",{children:[Object(O.jsx)("label",{children:"Detail"}),Object(O.jsx)(b.a,{required:!0,value:T,onChange:function(e){return q(e.target.value)}})]}),Object(O.jsxs)("section",{children:[Object(O.jsx)("label",{htmlFor:"for",children:"Upload relevant files (optional)"}),Object(O.jsx)(j.k,{onChange:function(e){return A(e)}})]}),Object(O.jsxs)("section",{className:"btns",children:[Object(O.jsx)("button",{className:"submit",type:"submit",children:"Submit"}),Object(O.jsx)("button",{className:"cancel",type:"button",children:"Cancel"})]}),Object(O.jsx)("div",{className:"pBtm"})]}),r&&Object(O.jsx)("div",{className:"spinnerContainer",children:Object(O.jsx)("div",{className:"spinner"})}),Object(O.jsx)(u.Modal,{open:x,className:"msg",children:x})]})},g=function(e){var t=e._id,n=e.onSuccess,c=Object(l.useState)(!1),r=Object(i.a)(c,2),o=r[0],d=r[1],h=Object(l.useState)(!1),x=Object(i.a)(h,2),f=x[0],m=x[1],p=Object(l.useState)([]),v=Object(i.a)(p,2),g=v[0],y=v[1],C=Object(l.useState)(""),N=Object(i.a)(C,2),w=N[0],k=N[1],S=function(){var e=Object(a.a)(s.a.mark((function e(c){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.preventDefault(),d(!0),!g.length){e.next=8;break}return e.next=5,Object(j.H)({files:g,setMsg:m});case 5:e.t0=e.sent,e.next=9;break;case 8:e.t0=[];case 9:a=e.t0,fetch("/api/addTicketReply",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({_id:t,message:{body:w,files:a}})}).then((function(e){return e.json()})).then((function(e){d(!1),"ok"===e.code?null===n||void 0===n||n(e.ticket):m(Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("button",{onClick:function(){return m(null)},children:"Okay"}),Object(O.jsxs)("div",{children:[Object(O.jsx)(j.i,{}),Object(O.jsx)("h4",{children:"Reply could not be submitted."})]})]}))})).catch((function(e){d(!1),console.log(e),m(Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("button",{onClick:function(){return m(null)},children:"Okay"}),Object(O.jsxs)("div",{children:[Object(O.jsx)(j.i,{}),Object(O.jsx)("h4",{children:"Reply could not be submitted. Make sure you're online."})]})]}))}));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("form",{className:"ticketReplyForm",onSubmit:S,children:[Object(O.jsxs)("section",{children:[Object(O.jsx)("label",{children:"Message"}),Object(O.jsx)(b.a,{required:!0,value:w,onChange:function(e){return k(e.target.value)}})]}),Object(O.jsxs)("section",{children:[Object(O.jsx)("label",{htmlFor:"for",children:"Upload relevant files (optional)"}),Object(O.jsx)(j.k,{accept:"audio/*,video/*,image/*",multiple:!0,onChange:function(e){return y(e)}})]}),Object(O.jsxs)("section",{className:"btns",children:[Object(O.jsx)("button",{className:"submit",type:"submit",children:"Submit"}),Object(O.jsx)("button",{className:"cancel",type:"button",children:"Cancel"})]}),Object(O.jsx)("div",{className:"pBtm"})]}),o&&Object(O.jsx)("div",{className:"spinnerContainer",children:Object(O.jsx)("div",{className:"spinner"})}),Object(O.jsx)(u.Modal,{open:f,className:"msg",children:f})]})}},33:function(e,t,n){"use strict";n.r(t),n.d(t,"SingleProduct",(function(){return w})),n.d(t,"Cart",(function(){return _})),n.d(t,"SellerCart",(function(){return M})),n.d(t,"CartItem",(function(){return F}));var c=n(14),s=n.n(c),a=n(16),r=n(4),i=n(13),l=n(3),o=n(1),j=n(2),d=n(29),u=n(8),b=n(5),h=n(6),O=n(7),x=n(45),f=n(28),m=n.n(f),p=n(25),v=n(0),g=Object(o.lazy)((function(){return n.e(1).then(n.bind(null,169))})),y=Object(o.lazy)((function(){return Promise.resolve().then(n.bind(null,29)).then((function(e){return{default:e.MilestoneForm}}))}));n(54);var C=function(e){var t=e.client,n=e.onToggle,c=Object(o.useContext)(u.d).user,s=Object(o.useContext)(u.a),a=s.contacts,d=s.setContacts,h=Object(o.useState)(!1),O=Object(l.a)(h,2),f=O[0],m=O[1],p=Object(o.useState)(null),g=Object(l.a)(p,2),y=g[0],C=g[1],N=Object(o.useState)(null),w=Object(l.a)(N,2),k=w[0],S=w[1];return Object(o.useEffect)((function(){if(c&&t){var e=a.find((function(e){return e.client._id===t._id}));e&&(C(Object(r.a)(Object(r.a)({},e.client),{},{status:e.userBlock?"blocked":""})),S(e.messages),u.e.emit("initiateChat",Object(r.a)({client_id:t._id},void 0===e.messages&&{newChat:!0})))}}),[t,a]),Object(o.useEffect)((function(){null===n||void 0===n||n(f)}),[f]),t?f?c?Object(v.jsxs)("div",{className:"chatWrapper",children:[Object(v.jsx)("button",{className:"closeChat",onClick:function(){return m(!1)},children:Object(v.jsx)(j.c,{})}),Object(v.jsx)(x.Chat,{chat:k,setContacts:d,userCard:y,setUserCard:C,user:c,setChat:S})]}):Object(v.jsxs)("div",{className:"chatWrapper",children:[Object(v.jsx)("button",{className:"closeChat",onClick:function(){return m(!1)},children:Object(v.jsx)(j.c,{})}),Object(v.jsx)("div",{className:"chat",children:Object(v.jsx)("div",{className:"startChat",children:Object(v.jsx)(b.b,{to:"/u/login",children:Object(v.jsx)("p",{children:"Login to start chat with this seller."})})})})]}):Object(v.jsx)("button",{className:"chatBtn",onClick:function(){if(c&&!y){var e=a.find((function(e){return e.client._id===t._id}));console.log(e),e?(C(Object(r.a)(Object(r.a)({},e.client),{},{status:e.userBlock?"blocked":""})),S(e.messages),u.e.emit("initiateChat",Object(r.a)({client_id:t._id},void 0===e.messages&&{newChat:!0}))):(d((function(e){return[].concat(Object(i.a)(e),[{client:t,messages:[],status:""}])})),u.e.emit("initiateChat",{client_id:t._id,newChat:!0}))}m(!0)},children:Object(v.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26.55",height:"25.219",viewBox:"0 0 26.55 25.219",children:Object(v.jsx)("path",{id:"Path_1","data-name":"Path 1",d:"M-242.2-184.285h-13l26.55-10.786-4.252,25.219-5.531-10.637-2.127,4.68v-6.382l7.659-9.148h2.34",transform:"translate(255.198 195.071)",fill:"#fff"})})}):null},N=function(e){var t,n,c=e.data,s=Object(o.useContext)(u.d),a=s.user,r=s.userType,i=s.setCart,l=s.setSellerCart,d=Object(j.M)({product:c,gst:null===(t=c.user)||void 0===t?void 0:t.gst});return Object(v.jsxs)("div",{className:"product",children:[Object(v.jsx)(b.b,{to:"/marketplace/".concat(c._id),children:Object(v.jsx)("div",{className:"thumb ".concat(c.images[0]?"":"noThumb"),children:Object(v.jsx)(j.n,{src:c.images[0]||"/open_box.png"})})}),Object(v.jsxs)("div",{className:"detail",children:[Object(v.jsx)("h3",{children:c.name}),Object(v.jsx)("p",{className:"dscr",children:c.dscr}),Object(v.jsxs)("div",{className:"price",children:[Object(v.jsx)("span",{className:"symbol",children:"\u20b9 "}),d," ",d!==Object(j.M)({product:c,gst:c.user.gst,discount:!1})&&Object(v.jsx)("span",{className:"originalPrice",children:Object(j.M)({product:c,gst:null===(n=c.user)||void 0===n?void 0:n.gst,discount:!1})})]})]}),Object(v.jsxs)("div",{className:"actions",children:["buyer"===r&&(null===c||void 0===c?void 0:c.user._id)===(null===a||void 0===a?void 0:a._id)&&Object(v.jsx)("p",{className:"note",children:"Can't buy product from self."}),Object(v.jsx)("button",{disabled:!c.available||(null===c||void 0===c?void 0:c.user._id)===(null===a||void 0===a?void 0:a._id)&&"buyer"===r,onClick:function(){(null===c||void 0===c?void 0:c.user._id)===(null===a||void 0===a?void 0:a._id)?l((function(e){return Object(j.K)(e,c,"seller")})):i((function(e){return Object(j.K)(e,c)}))},children:(null===c||void 0===c?void 0:c.user._id)===(null===a||void 0===a?void 0:a._id)?"Add to order":"Add to Cart"})]})]})},w=function(e){var t,n,c,r,i,d,h,x,f,m,p,y=e.match,N=Object(o.useContext)(u.d),w=N.user,S=N.setCart,_=N.setSellerCart,M=N.userType,P=Object(o.useState)(!1),L=Object(l.a)(P,2),F=(L[0],L[1]),A=Object(o.useState)(!1),R=Object(l.a)(A,2),D=R[0],T=R[1],q=Object(o.useState)(null),B=Object(l.a)(q,2),E=B[0],I=B[1],H=Object(o.useState)(null),Z=Object(l.a)(H,2),W=Z[0],V=Z[1],U=Object(o.useState)(!1),z=Object(l.a)(U,2),G=z[0],Y=z[1];return Object(o.useEffect)((function(){fetch("/api/singleProduct?_id=".concat(y.params._id)).then((function(e){return e.json()})).then((function(e){"ok"===e.code?I(e.product):V(Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("button",{onClick:function(){return V(null)},children:"Okay"}),Object(v.jsxs)("div",{children:[Object(v.jsx)(j.i,{}),Object(v.jsx)("h4",{children:"Product does not exists."})]})]}))})).catch((function(e){console.log(e),V(Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("button",{onClick:function(){return V(null)},children:"Okay"}),Object(v.jsxs)("div",{children:[Object(v.jsx)(j.i,{}),Object(v.jsx)("h4",{children:"Could not get product. Make sure you're online."})]})]}))})),navigator.share&&F(!0)}),[]),E?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)(g,{children:[Object(v.jsxs)("title",{children:[E.name," | Delivery Pay"]}),Object(v.jsx)("meta",{name:"description",content:E.dscr}),Object(v.jsx)("meta",{property:"og:url",content:"https://deliverypay.in/marketplace/".concat(E._id)}),Object(v.jsx)("meta",{property:"og:type",content:"product"}),Object(v.jsx)("meta",{property:"og:title",content:"".concat(E.name," | Delivery Pay")}),Object(v.jsx)("meta",{property:"og:description",content:E.dscr}),Object(v.jsx)("meta",{property:"og:image",content:E.images[0]})]}),Object(v.jsxs)("div",{className:"generic singleProduct ".concat(G?"chatOpen":""),children:[Object(v.jsx)(j.m,{}),Object(v.jsxs)("div",{className:"content",children:[Object(v.jsx)(k,{images:E.images}),Object(v.jsxs)("div",{className:"detail",children:[Object(v.jsx)("h1",{children:E.name}),Object(v.jsx)("p",{children:E.dscr}),Object(v.jsxs)("p",{className:"price",children:[Object(v.jsx)("label",{children:"Price: "})," ",Object(v.jsx)("span",{className:"symbol",children:"\u20b9"}),Object(j.M)({product:E,gst:null===(t=E.user)||void 0===t?void 0:t.gst})," ",Object(j.M)({product:E,gst:null===(n=E.user)||void 0===n?void 0:n.gst})!==Object(j.M)({product:E,gst:null===(c=E.user)||void 0===c?void 0:c.gst,discount:!1})&&Object(v.jsx)("span",{className:"originalPrice",children:Object(j.M)({product:E,gst:null===(r=E.user)||void 0===r?void 0:r.gst,discount:!1})})]}),Object(v.jsxs)("p",{children:["product"===E.type&&Object(v.jsxs)(v.Fragment,{children:["Available: ",E.available&&E.available," ",0===E.available&&Object(v.jsx)(v.Fragment,{children:"Out of stock"}),E.available<7&&E.available>0&&Object(v.jsx)(v.Fragment,{children:"Low stock"})]}),"product"!==E.type&&Object(v.jsxs)(v.Fragment,{children:["Availability:"," ",E.available?"Available":"Unavailable"]})]}),Object(v.jsxs)("div",{className:"actions",children:[Object(v.jsx)("button",{disabled:!E.available||"buyer"===M&&(null===(i=E.user)||void 0===i?void 0:i._id)===(null===w||void 0===w?void 0:w._id),onClick:function(){var e;(null===E||void 0===E||null===(e=E.user)||void 0===e?void 0:e._id)===(null===w||void 0===w?void 0:w._id)?_((function(e){return Object(j.K)(e,E,"seller")})):S((function(e){return Object(j.K)(e,E)}))},children:(null===E||void 0===E||null===(d=E.user)||void 0===d?void 0:d._id)===(null===w||void 0===w?void 0:w._id)?"Add to order":"Add to Cart"}),Object(v.jsx)("button",{onClick:Object(a.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:T(!0);case 1:case"end":return e.stop()}}),e)}))),children:"Share this Product"}),"seller"===M&&(null===E||void 0===E||null===(h=E.user)||void 0===h?void 0:h._id)!==(null===w||void 0===w?void 0:w._id)&&Object(v.jsx)("p",{className:"note",children:"Switch to buyer profile to buy this product."}),"buyer"===M&&(null===E||void 0===E||null===(x=E.user)||void 0===x?void 0:x._id)===(null===w||void 0===w?void 0:w._id)&&Object(v.jsx)("p",{className:"note",children:"Can't buy product from self."})]}),E.user&&Object(v.jsxs)("div",{className:"seller",children:[Object(v.jsx)("label",{children:"Being sold by:"}),Object(v.jsx)(b.b,{to:"/marketplace?seller=".concat(E.user._id),children:Object(v.jsxs)("div",{className:"profile",children:[(null===(f=E.user.shopInfo)||void 0===f?void 0:f.logo)&&Object(v.jsx)(j.n,{src:null===(m=E.user.shopInfo)||void 0===m?void 0:m.logo}),(null===(p=E.user.shopInfo)||void 0===p?void 0:p.name)?Object(v.jsx)("p",{className:"name",children:E.user.shopInfo.name}):Object(v.jsxs)("p",{className:"name",children:[E.user.firstName," ",E.user.lastName]})]})})]})]}),Object(v.jsx)(O.Modal,{open:D,setOpen:T,label:"Share this page",head:!0,className:"shareModal",children:Object(v.jsx)(j.A,{url:window.location.href})}),Object(v.jsx)(O.Modal,{className:"msg",open:W,children:W})]}),E&&Object(v.jsx)(C,{client:"seller"===M?{_id:j.p.get("buyer")}:E.user,onToggle:Y}),Object(v.jsx)(j.l,{})]})]}):Object(v.jsxs)("div",{className:"generic singleProduct ".concat(G?"chatOpen":""),children:[Object(v.jsx)(j.m,{}),"loading",Object(v.jsx)(O.Modal,{className:"msg",open:W,children:W}),Object(v.jsx)(j.l,{})]})},k=function(e){var t=e.images,n=Object(o.useState)(t[0]),c=Object(l.a)(n,2),s=c[0],a=c[1];return Object(v.jsxs)("div",{className:"gallery",children:[Object(v.jsx)(S,{img:s}),Object(v.jsxs)("div",{className:"thumbs",children:[t.map((function(e,t){return Object(v.jsx)(j.n,{src:e,onClick:function(){return a(e)}},t)})),0===t.length&&Object(v.jsx)("p",{children:"No image was provided by the seller."})]})]})},S=function(e){var t=e.img,n=Object(o.useState)(t||"/open_box.png"),c=Object(l.a)(n,2),s=c[0],a=c[1],r=Object(o.useState)(null),i=Object(l.a)(r,2),j=i[0],d=i[1],u=Object(o.useState)(!1),b=Object(l.a)(u,2),h=b[0],O=b[1],x=Object(o.useState)({}),f=Object(l.a)(x,2),m=f[0],p=f[1],g=Object(o.useRef)();return Object(o.useEffect)((function(){a(t||"/open_box.png")}),[t]),Object(v.jsx)("div",{ref:g,className:"mainView ".concat(t?"":"noImg"),onMouseMove:function(e){if(t){var n=.65*Math.abs(Math.round((e.clientX-(null===j||void 0===j?void 0:j.x))/((null===j||void 0===j?void 0:j.width)/100))),c=.65*Math.round((e.clientY-(null===j||void 0===j?void 0:j.y))/((null===j||void 0===j?void 0:j.height)/100));p({transform:"scale(2) translateY(".concat(Math.max(30-c,-30),"%) translateX(").concat(Math.max(30-n,-30),"%)")})}},onTouchStart:function(e){var t;document.querySelector("body").style.overflow="hidden",d(null===(t=g.current)||void 0===t?void 0:t.getBoundingClientRect()),O(!0)},onTouchEnd:function(e){document.querySelector("body").style.overflow="auto",O(!1)},onTouchMove:function(e){if(t){var n=.65*Math.abs(Math.round((e.touches[0].clientX-j.x)/(j.width/100))),c=.65*Math.round((e.touches[0].clientY-j.y)/(j.height/100));p({transform:"scale(2) translateY(".concat(Math.max(30-c,-30),"%) translateX(").concat(Math.max(30-n,-30),"%)"),transition:"none"})}},onMouseEnter:function(){var e;O(!0),d(null===(e=g.current)||void 0===e?void 0:e.getBoundingClientRect())},onMouseLeave:function(){return O(!1)},children:Object(v.jsx)("img",{className:h?"scale":"",style:h?m:{},src:s,onError:function(){return a("/img_err.png")}})})},_=function(){var e=Object(o.useContext)(u.d),t=(e.setCart,e.cart),n=e.userType,c=Object(o.useState)(!0),s=Object(l.a)(c,2),a=s[0],r=s[1],i=Object(o.useState)(null),d=Object(l.a)(i,2),b=d[0],x=d[1],f=Object(o.useState)(null),m=Object(l.a)(f,2),p=m[0],g=m[1];return Object(o.useEffect)((function(){r(!0),fetch("/api/getCartDetail",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({cart:t})}).then((function(e){return e.json()})).then((function(e){r(!1),"ok"===e.code&&x(e.carts)})).catch((function(e){console.log(e),r(!1),g(Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("button",{onClick:function(){return g(null)},children:"Okay"}),Object(v.jsxs)("div",{children:[Object(v.jsx)(j.i,{}),Object(v.jsx)("h4",{children:"Could not get cart detail. Make sure you're online."})]})]}))}))}),[t]),b?Object(v.jsxs)("div",{className:"fullCart",children:["seller"===n&&Object(v.jsx)(h.a,{to:"/account/sellerCart"}),Object(v.jsx)("div",{className:"head",children:Object(v.jsx)("h1",{children:"Cart"})}),Object(v.jsxs)("div",{className:"allCarts",children:[b.map((function(e){var t=e.seller,n=e.products;return t&&(null===n||void 0===n?void 0:n.length)?Object(v.jsx)(P,{seller:t,products:n,loading:a},t._id):null})),0===(null===b||void 0===b?void 0:b.length)&&Object(v.jsx)("p",{children:"Cart is empty"})]}),Object(v.jsx)(O.Modal,{open:p,className:"msg",children:p})]}):Object(v.jsxs)("div",{className:"fullCart",children:["seller"===n&&Object(v.jsx)(h.a,{to:"/account/sellerCart"}),Object(v.jsx)("div",{className:"head",children:Object(v.jsx)("h1",{children:"Cart"})}),Object(v.jsx)("div",{className:"allCarts",children:"Cart is empty."}),Object(v.jsx)(O.Modal,{open:p,className:"msg",children:p})]})},M=function(){var e=Object(o.useContext)(u.d),t=e.sellerCart,n=(e.setSellerCart,e.userType),c=Object(o.useState)(!0),s=Object(l.a)(c,2),a=s[0],r=s[1],i=Object(o.useState)(null),d=Object(l.a)(i,2),b=d[0],x=d[1],f=Object(o.useState)(null),m=Object(l.a)(f,2),p=m[0],g=m[1];return Object(o.useEffect)((function(){r(!0),fetch("/api/getSellerCartDetail",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({cart:t})}).then((function(e){return e.json()})).then((function(e){r(!1),"ok"===e.code&&x(e.carts)})).catch((function(e){console.log(e),r(!1),g(Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("button",{onClick:function(){return g(null)},children:"Okay"}),Object(v.jsxs)("div",{children:[Object(v.jsx)(j.i,{}),Object(v.jsx)("h4",{children:"Could not get cart detail. Make sure you're online."})]})]}))}))}),[t]),b?Object(v.jsxs)("div",{className:"fullCart",children:["buyer"===n&&Object(v.jsx)(h.a,{to:"/account/cart"}),Object(v.jsx)("div",{className:"head",children:Object(v.jsx)("h1",{children:"Create Orders"})}),Object(v.jsxs)("div",{className:"allCarts",children:[b.map((function(e){var t=e.buyer,n=e.products;return t&&(null===n||void 0===n?void 0:n.length)?Object(v.jsx)(L,{buyer:t,products:n,loading:a},t._id):null})),0===(null===b||void 0===b?void 0:b.length)&&Object(v.jsx)("p",{children:"Cart is empty"})]}),Object(v.jsx)(O.Modal,{open:p,className:"msg",children:p})]}):Object(v.jsxs)("div",{className:"fullCart",children:["buyer"===n&&Object(v.jsx)(h.a,{to:"/account/cart"}),Object(v.jsx)("div",{className:"head",children:Object(v.jsx)("h1",{children:"Create Orders"})}),Object(v.jsx)("div",{className:"allCarts",children:"Cart is empty."}),Object(v.jsx)(O.Modal,{open:p,className:"msg",children:p})]})},P=function(e){var t,n,c,s,a,i,h,x,f,m,g=e.seller,C=e.products,N=e.loading,w=Object(o.useContext)(u.d),k=w.user,S=w.setCart,_=w.config,M=Object(o.useState)(null),P=Object(l.a)(M,2),L=P[0],A=P[1],R=Object(o.useState)({name:k.firstName+" "+k.lastName,phone:k.phone}),D=Object(l.a)(R,2),T=D[0],q=D[1],B=Object(o.useState)(!1),E=Object(l.a)(B,2),I=E[0],H=E[1],Z=Object(o.useState)(!1),W=Object(l.a)(Z,2),V=W[0],U=W[1],z=Object(o.useState)(!1),G=Object(l.a)(z,2),Y=G[0],J=G[1],$=Object(o.useState)(""),K=Object(l.a)($,2),X=K[0],Q=K[1],ee=Object(o.useState)(!1),te=Object(l.a)(ee,2),ne=te[0],ce=te[1],se=Object(o.useState)(!1),ae=Object(l.a)(se,2),re=ae[0],ie=ae[1],le=Object(o.useState)(""),oe=Object(l.a)(le,2),je=oe[0],de=oe[1],ue=C.reduce((function(e,t){return(e+Object(j.M)({product:t.product,gst:g.gst})*t.qty).fix()}),0),be="percent"===(null===ne||void 0===ne?void 0:ne.type)&&Math.min(ue/100*ne.amount,ne.maxDiscount)||"flat"===(null===ne||void 0===ne?void 0:ne.type)&&(null===ne||void 0===ne?void 0:ne.amount)||0,he=+(ue-be)+((null===(t=g.shopInfo)||void 0===t?void 0:t.shippingCost)||0).fix(),Oe=(he*((100+_.fee)/100)-he).fix();return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{className:"shop",children:[Object(v.jsx)("div",{className:"seller",children:Object(v.jsxs)("div",{className:"profile",children:[(null===(n=g.shopInfo)||void 0===n?void 0:n.logo)&&Object(v.jsx)(j.n,{src:null===(c=g.shopInfo)||void 0===c?void 0:c.logo}),Object(v.jsxs)("p",{className:"name",children:[(null===(s=g.shopInfo)||void 0===s?void 0:s.name)||g.firstName+" "+g.lastName," ","\u2022 ",Object(v.jsx)("span",{className:"role",children:"Seller"}),Object(v.jsx)("span",{className:"contact",children:(null===(a=g.shopInfo)||void 0===a?void 0:a.phone)||g.phone})]})]})}),Object(v.jsxs)("div",{className:"cart",children:[Object(v.jsxs)("ul",{className:"items",children:[C.map((function(e,t){var n=e.product,c=e.qty;return Object(v.jsx)(F,{gst:g.gst,product:n,qty:c},t)})),Object(v.jsxs)("div",{className:"total",children:[Object(v.jsxs)("p",{children:[Object(v.jsx)("label",{children:"Total"}),"\u20b9",ue]}),Object(v.jsx)("hr",{}),Object(v.jsxs)("div",{className:"coupon",children:[ne?Object(v.jsxs)("label",{children:["Coupon Code ",ne.code,Object(v.jsx)("br",{}),"Discount"," ","percent"===ne.type?Object(v.jsxs)(v.Fragment,{children:[ne.amount,"% (Upto \u20b9",ne.maxDiscount,")"]}):Object(v.jsx)(v.Fragment,{children:"flat"})]}):Object(v.jsx)("label",{children:"Coupon"}),!re&&!ne&&Object(v.jsx)("button",{onClick:function(){return ie(!0)},children:"Add Coupon"}),ne&&Object(v.jsxs)("span",{children:["\u20b9",be]}),re&&Object(v.jsxs)("form",{onSubmit:function(e){e.preventDefault(),fetch("/api/getCoupon/".concat(X)).then((function(e){return e.json()})).then((function(e){var t,n=e.code,c=e.coupon;"ok"===n?c.sellers&&0!==(null===(t=c.sellers)||void 0===t?void 0:t.filter((function(e){return e===g._id})).length)?he<c.threshold?A(Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("button",{onClick:function(){return A(null)},children:"Okay"}),Object(v.jsxs)("div",{children:[Object(v.jsx)(j.i,{}),Object(v.jsxs)("h4",{children:["Coupon code ",X," can only be applied on order more that \u20b9",c.threshold,"."]})]})]})):c.usage>=c.validPerUser?A(Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("button",{onClick:function(){return A(null)},children:"Okay"}),Object(v.jsxs)("div",{children:[Object(v.jsx)(j.i,{}),Object(v.jsxs)("h4",{children:["Each user can use this Coupon"," ",c.validPerUser," times."]})]})]})):(ce(c),ie(!1),A(Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("button",{onClick:function(){return A(null)},children:"Okay"}),Object(v.jsxs)("div",{children:[Object(v.jsx)(j.E,{}),Object(v.jsxs)("h4",{children:["Coupon code ",X," has been applied."]})]})]}))):A(Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("button",{onClick:function(){return A(null)},children:"Okay"}),Object(v.jsxs)("div",{children:[Object(v.jsx)(j.i,{}),Object(v.jsx)("h4",{children:"This seller does not accept this coupon code."})]})]})):A(Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("button",{onClick:function(){return A(null)},children:"Okay"}),Object(v.jsxs)("div",{children:[Object(v.jsx)(j.i,{}),Object(v.jsx)("h4",{children:"Invalid Coupon code."})]})]}))})).catch((function(e){console.log(e),A(Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("button",{onClick:function(){return A(null)},children:"Okay"}),Object(v.jsxs)("div",{children:[Object(v.jsx)(j.i,{}),Object(v.jsx)("h4",{children:"Could not apply Coupon code. Make sure you're online."})]})]}))}))},children:[Object(v.jsx)("input",{required:!0,value:X,onBlur:function(e){X||ie(!1)},onChange:function(e){return Q(e.target.value.toUpperCase())}}),Object(v.jsx)("button",{children:"Apply"})]})]}),Object(v.jsx)("hr",{}),Object(v.jsxs)("p",{children:[Object(v.jsx)("label",{children:"Shipping"}),"\u20b9",null===(i=g.shopInfo)||void 0===i?void 0:i.shippingCost]}),Object(v.jsxs)("p",{children:[Object(v.jsxs)("label",{children:["Delivery Pay Fee ",_.fee,"%"]}),"\u20b9",Oe]}),Object(v.jsx)("hr",{}),Object(v.jsxs)("p",{children:[Object(v.jsx)("label",{children:"Grand total"}),"\u20b9",(he+Oe).fix()]})]}),Object(v.jsxs)("div",{className:"terms",children:[Object(v.jsxs)("p",{children:[Object(v.jsx)("label",{children:"Refundable: "}),(null===(h=g.shopInfo)||void 0===h?void 0:h.refundable)||"N/A"]}),Object(v.jsxs)("p",{children:["By proceeding, I agree to seller's all"," ",Object(v.jsx)("span",{className:"btn",onClick:function(){return J(!0)},children:"Terms"})]})]})]}),Object(v.jsx)("span",{className:"devider"}),Object(v.jsxs)("div",{className:"deliveryDetail",children:[Object(v.jsxs)("div",{className:"head",children:[Object(v.jsx)("h3",{children:"Delivery Information"}),Object(v.jsx)("button",{onClick:function(){return H(!0)},children:"Edit"})]}),Object(v.jsx)("ul",{children:Object.entries(T).map((function(e,t){var n=Object(l.a)(e,2),c=n[0],s=n[1];return Object(v.jsxs)("li",{children:[Object(v.jsx)("label",{children:c}),s]},t)}))}),Object(v.jsx)("div",{className:"head",children:Object(v.jsx)("h3",{children:"Note to Seller"})}),Object(v.jsx)(p.a,{value:je,onChange:function(e){return de(e.target.value)}})]})]}),Object(v.jsx)("div",{className:"actions",children:Object(v.jsx)("button",{onClick:function(){return U(!0)},children:"Place order"})}),Object(v.jsx)(O.Modal,{open:I,head:!0,label:"Delivery Address",setOpen:H,className:"addAddress",children:Object(v.jsx)(d.AddressForm,{client:{name:T.name,phone:T.phone,address:T},onSuccess:function(e){q((function(t){return Object(r.a)(Object(r.a)({},t),e.address)})),H(!1)},onCancel:function(){return H(!1)}})}),Object(v.jsx)(O.Modal,{className:"milestoneRequest",head:!0,label:"Checkout",open:V,setOpen:U,children:Object(v.jsx)(y,{action:"create",client:g,definedAmount:he+Oe,order:Object(r.a)(Object(r.a)({products:C,deliveryDetail:Object(r.a)(Object(r.a)({},T),{},{deliveryWithin:null===(x=g.shopInfo)||void 0===x?void 0:x.deliveryWithin})},je&&{note:je}),ne&&{couponCode:null===ne||void 0===ne?void 0:ne.code}),onSuccess:function(e){e.milestone;var t=e.order;S((function(e){return e.filter((function(e){var n=e.product;return!t.products.some((function(e){return e.product._id===n._id}))}))})),U(!1),A(Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("button",{onClick:function(){return A(null)},children:"Okay"}),Object(v.jsxs)("div",{children:[Object(v.jsx)(j.E,{}),Object(v.jsx)("h4",{children:"Order successfully submitted."}),Object(v.jsx)(b.b,{to:"/account/myShopping/orders",children:"View All orders"})]})]}))}})}),Object(v.jsx)(O.Modal,{open:Y,setOpen:J,head:!0,label:"Seller's Terms",className:"shopTerms",children:Object(v.jsx)("ul",{children:null===(f=g.shopInfo)||void 0===f||null===(m=f.terms)||void 0===m?void 0:m.map((function(e,t){return Object(v.jsx)("li",{children:e},t)}))})}),Object(v.jsx)(O.Modal,{className:"msg",open:L,children:L})]}),N&&Object(v.jsx)("div",{className:"spinnerContainer",children:Object(v.jsx)("div",{className:"spinner"})})]})},L=function(e){var t,n,c,s,a,i,h=e.buyer,x=e.products,f=e.loading,m=Object(o.useContext)(u.d),g=m.user,C=m.setSellerCart,N=m.config,w=Object(o.useState)(null),k=Object(l.a)(w,2),S=k[0],_=k[1],M=Object(o.useState)({name:h.firstName+" "+h.lastName,phone:h.phone}),P=Object(l.a)(M,2),L=P[0],A=P[1],R=Object(o.useState)(!1),D=Object(l.a)(R,2),T=D[0],q=D[1],B=Object(o.useState)(!1),E=Object(l.a)(B,2),I=E[0],H=E[1],Z=Object(o.useState)(!1),W=Object(l.a)(Z,2),V=W[0],U=W[1],z=Object(o.useState)(""),G=Object(l.a)(z,2),Y=G[0],J=G[1],$=Object(o.useState)(!1),K=Object(l.a)($,2),X=K[0],Q=K[1],ee=Object(o.useState)(!1),te=Object(l.a)(ee,2),ne=te[0],ce=te[1],se=Object(o.useState)(""),ae=Object(l.a)(se,2),re=ae[0],ie=ae[1],le=x.reduce((function(e,t){return(e+Object(j.M)({product:t.product,gst:g.gst})*t.qty).fix()}),0),oe="percent"===(null===X||void 0===X?void 0:X.type)&&Math.min(le/100*X.amount,X.maxDiscount)||"flat"===(null===X||void 0===X?void 0:X.type)&&(null===X||void 0===X?void 0:X.amount)||0,je=+(le-oe)+((null===(t=g.shopInfo)||void 0===t?void 0:t.shippingCost)||0).fix(),de=(je*((100+N.fee)/100)-je).fix();return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{className:"shop",children:[Object(v.jsx)("div",{className:"seller",children:Object(v.jsxs)("div",{className:"profile",children:[Object(v.jsx)(j.n,{src:h.profileImg||"/profile-user.jpg"}),Object(v.jsxs)("p",{className:"name",children:[h.firstName," ",h.lastName," \u2022"," ",Object(v.jsx)("span",{className:"role",children:"Buyer"}),Object(v.jsx)("span",{className:"contact",children:h.phone})]})]})}),Object(v.jsxs)("div",{className:"cart",children:[Object(v.jsxs)("ul",{className:"items",children:[x.map((function(e,t){var n=e.product,c=e.qty;return Object(v.jsx)(F,{gst:g.gst,product:n,qty:c},t)})),Object(v.jsxs)("div",{className:"total",children:[Object(v.jsxs)("p",{children:[Object(v.jsx)("label",{children:"Total"}),"\u20b9",le]}),Object(v.jsx)("hr",{}),Object(v.jsxs)("div",{className:"coupon",children:[X?Object(v.jsxs)("label",{children:["Coupon Code ",X.code,Object(v.jsx)("br",{}),"Discount"," ","percent"===X.type?Object(v.jsxs)(v.Fragment,{children:[X.amount,"% (Upto \u20b9",X.maxDiscount,")"]}):Object(v.jsx)(v.Fragment,{children:"flat"})]}):Object(v.jsx)("label",{children:"Coupon"}),!ne&&!X&&Object(v.jsx)("button",{onClick:function(){return ce(!0)},children:"Add Coupon"}),X&&Object(v.jsxs)("span",{children:["\u20b9",oe]}),ne&&Object(v.jsxs)("form",{onSubmit:function(e){e.preventDefault(),fetch("/api/getCoupon/".concat(Y)).then((function(e){return e.json()})).then((function(e){var t,n=e.code,c=e.coupon;"ok"===n?c.sellers&&0!==(null===(t=c.sellers)||void 0===t?void 0:t.filter((function(e){return e===g._id})).length)?je<c.threshold?_(Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("button",{onClick:function(){return _(null)},children:"Okay"}),Object(v.jsxs)("div",{children:[Object(v.jsx)(j.i,{}),Object(v.jsxs)("h4",{children:["Coupon code ",Y," can only be applied on order more that \u20b9",c.threshold,"."]})]})]})):c.usage>=c.validPerUser?_(Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("button",{onClick:function(){return _(null)},children:"Okay"}),Object(v.jsxs)("div",{children:[Object(v.jsx)(j.i,{}),Object(v.jsxs)("h4",{children:["Each user can use this Coupon"," ",c.validPerUser," times."]})]})]})):(Q(c),ce(!1),_(Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("button",{onClick:function(){return _(null)},children:"Okay"}),Object(v.jsxs)("div",{children:[Object(v.jsx)(j.E,{}),Object(v.jsxs)("h4",{children:["Coupon code ",Y," has been applied."]})]})]}))):_(Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("button",{onClick:function(){return _(null)},children:"Okay"}),Object(v.jsxs)("div",{children:[Object(v.jsx)(j.i,{}),Object(v.jsx)("h4",{children:"This seller does not accept this coupon code."})]})]})):_(Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("button",{onClick:function(){return _(null)},children:"Okay"}),Object(v.jsxs)("div",{children:[Object(v.jsx)(j.i,{}),Object(v.jsx)("h4",{children:"Invalid Coupon code."})]})]}))})).catch((function(e){console.log(e),_(Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("button",{onClick:function(){return _(null)},children:"Okay"}),Object(v.jsxs)("div",{children:[Object(v.jsx)(j.i,{}),Object(v.jsx)("h4",{children:"Could not apply Coupon code. Make sure you're online."})]})]}))}))},children:[Object(v.jsx)("input",{required:!0,value:Y,onBlur:function(e){Y||ce(!1)},onChange:function(e){return J(e.target.value.toUpperCase())}}),Object(v.jsx)("button",{children:"Apply"})]})]}),Object(v.jsx)("hr",{}),Object(v.jsxs)("p",{children:[Object(v.jsx)("label",{children:"Shipping"}),"\u20b9",null===(n=g.shopInfo)||void 0===n?void 0:n.shippingCost]}),Object(v.jsxs)("p",{children:[Object(v.jsxs)("label",{children:["Delivery Pay Fee ",N.fee,"%"]}),"\u20b9",de]}),Object(v.jsx)("hr",{}),Object(v.jsxs)("p",{children:[Object(v.jsx)("label",{children:"Grand total"}),"\u20b9",(je+de).fix()]})]}),Object(v.jsxs)("div",{className:"terms",children:[Object(v.jsxs)("p",{children:[Object(v.jsx)("label",{children:"Refundable: "}),(null===(c=g.shopInfo)||void 0===c?void 0:c.refundable)||"N/A"]}),Object(v.jsxs)("p",{children:["By proceeding, I agree to seller's all"," ",Object(v.jsx)("span",{className:"btn",onClick:function(){return U(!0)},children:"Terms"})]})]})]}),Object(v.jsx)("span",{className:"devider"}),Object(v.jsxs)("div",{className:"deliveryDetail",children:[Object(v.jsxs)("div",{className:"head",children:[Object(v.jsx)("h3",{children:"Delivery Information"}),Object(v.jsx)("button",{onClick:function(){return q(!0)},children:"Edit"})]}),Object(v.jsx)("ul",{children:Object.entries(L).map((function(e,t){var n=Object(l.a)(e,2),c=n[0],s=n[1];return Object(v.jsxs)("li",{children:[Object(v.jsx)("label",{children:c}),s]},t)}))}),Object(v.jsx)("div",{className:"head",children:Object(v.jsx)("h3",{children:"Note to Buyer"})}),Object(v.jsx)(p.a,{value:re,onChange:function(e){return ie(e.target.value)}})]})]}),Object(v.jsx)("div",{className:"actions",children:Object(v.jsx)("button",{onClick:function(){return H(!0)},children:"Create order"})}),Object(v.jsx)(O.Modal,{open:T,head:!0,label:"Delivery Address",setOpen:q,className:"addAddress",children:Object(v.jsx)(d.AddressForm,{client:{name:L.name,phone:L.phone,address:L},onSuccess:function(e){A((function(t){return Object(r.a)(Object(r.a)({},t),e.address)})),q(!1)},onCancel:function(){return q(!1)}})}),Object(v.jsx)(O.Modal,{className:"milestoneRequest",head:!0,label:"Checkout",open:I,setOpen:H,children:Object(v.jsx)(y,{action:"request",client:h,definedAmount:(je+de).fix(),order:Object(r.a)(Object(r.a)({products:x,deliveryDetail:Object(r.a)(Object(r.a)({},L),{},{deliveryWithin:null===(s=g.shopInfo)||void 0===s?void 0:s.deliveryWithin})},re&&{note:re}),X&&{couponCode:null===X||void 0===X?void 0:X.code}),onSuccess:function(e){var t=e.milestone,n=e.order;C((function(e){return e.filter((function(e){var c=e.product,s=e.buyer;return!n.products.find((function(e){return e.product._id===c._id&&s===t.buyer._id}))}))})),H(!1),_(Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("button",{onClick:function(){return _(null)},children:"Okay"}),Object(v.jsxs)("div",{children:[Object(v.jsx)(j.E,{}),Object(v.jsx)("h4",{children:"Order successfully submitted."}),Object(v.jsx)(b.b,{to:"/account/myShop/orders",children:"Manage orders"})]})]}))}})}),Object(v.jsx)(O.Modal,{open:V,setOpen:U,head:!0,label:"Seller's Terms",className:"shopTerms",children:Object(v.jsx)("ul",{children:null===(a=g.shopInfo)||void 0===a||null===(i=a.terms)||void 0===i?void 0:i.map((function(e,t){return Object(v.jsx)("li",{children:e},t)}))})}),Object(v.jsx)(O.Modal,{className:"msg",open:S,children:S})]}),f&&Object(v.jsx)("div",{className:"spinnerContainer",children:Object(v.jsx)("div",{className:"spinner"})})]})},F=function(e){var t,n=e.product,c=e.gst,s=e.qty,a=Object(o.useContext)(u.d),i=a.setCart,l=a.setSellerCart,d=a.userType,b=Object(j.M)({product:n,gst:c||(null===(t=n.user)||void 0===t?void 0:t.gst)});return Object(v.jsxs)("li",{className:"item ".concat(!n.images.length&&"noImg"),children:[Object(v.jsx)(j.n,{src:n.images[0]||"/open_box.png"}),Object(v.jsxs)("div",{className:"detail",children:[Object(v.jsx)("p",{className:"name",children:n.name}),Object(v.jsxs)("div",{className:"qty",children:["QTY:"," ",Object(v.jsxs)("div",{className:"addRemove",children:[Object(v.jsx)("button",{onClick:function(){"seller"===d?l((function(e){return e.map((function(e){return e.product._id===n._id?Object(r.a)(Object(r.a)({},e),{},{qty:e.qty-1}):e})).filter((function(e){return e.qty>0}))})):i((function(e){return e.map((function(e){return e.product._id===n._id?Object(r.a)(Object(r.a)({},e),{},{qty:e.qty-1}):e})).filter((function(e){return e.qty>0}))}))},children:Object(v.jsx)(j.r,{})}),s,Object(v.jsx)("button",{onClick:function(){"seller"===d?l((function(e){return e.map((function(e){return e.product._id===n._id?Object(r.a)(Object(r.a)({},e),{},{qty:e.qty+1}):e}))})):i((function(e){return e.map((function(e){return e.product._id===n._id?Object(r.a)(Object(r.a)({},e),{},{qty:e.qty+1}):e}))}))},children:Object(v.jsx)(j.v,{})})]})]})]}),Object(v.jsxs)("div",{className:"price",children:[Object(v.jsxs)("span",{className:"qty",children:[b," x ",s]}),"\u20b9",(b*s).fix()]}),(null===c||void 0===c?void 0:c.verified)&&Object(v.jsxs)(j.G,{children:["Including ",n.gst,"% GST."]})]})};t.default=function(e){var t,n,c=e.history,d=e.location,b=(e.match,Object(o.useContext)(u.d).userType),h=Object(o.useState)(!1),x=Object(l.a)(h,2),f=x[0],p=x[1],g=Object(o.useState)(!1),y=Object(l.a)(g,2),w=y[0],k=y[1],S=Object(j.O)({rootMargin:"100px"}),_=Object(l.a)(S,2),M=_[0],P=_[1],L=Object(o.useRef)([{label:"Newest first",value:{column:"createdAt",order:"dsc"}},{label:"Oldest first",value:{column:"createdAt",order:"asc"}},{label:"Price high-low",value:{column:"price",order:"dsc"}},{label:"Price low-high",value:{column:"price",order:"asc"}}]),F=Object(o.useState)([]),A=Object(l.a)(F,2),R=A[0],D=A[1],T=Object(o.useState)(0),q=Object(l.a)(T,2),B=q[0],E=q[1],I=Object(o.useState)(!1),H=Object(l.a)(I,2),Z=(H[0],H[1],Object(o.useState)(m.a.parse(d.search).type||"")),W=Object(l.a)(Z,2),V=W[0],U=(W[1],Object(o.useState)(m.a.parse(d.search).perPage||20)),z=Object(l.a)(U,2),G=z[0],Y=(z[1],Object(o.useState)(1)),J=Object(l.a)(Y,2),$=J[0],K=J[1],X=Object(o.useState)(m.a.parse(d.search).q||""),Q=Object(l.a)(X,2),ee=Q[0],te=Q[1],ne=Object(o.useState)({column:m.a.parse(d.search).sort||"createdAt",order:m.a.parse(d.search).order||"dsc"}),ce=Object(l.a)(ne,2),se=ce[0],ae=ce[1],re=Object(o.useState)([]),ie=Object(l.a)(re,2),le=ie[0],oe=ie[1],je=Object(o.useState)(null),de=Object(l.a)(je,2),ue=de[0],be=de[1],he=Object(o.useState)(""),Oe=Object(l.a)(he,2),xe=Oe[0],fe=Oe[1],me=Object(o.useState)(m.a.parse(d.search).seller),pe=Object(l.a)(me,2),ve=pe[0],ge=(pe[1],Object(o.useState)(null)),ye=Object(l.a)(ge,2),Ce=ye[0],Ne=ye[1],we=Object(o.useState)(null),ke=Object(l.a)(we,2),Se=ke[0],_e=ke[1],Me=Object(o.useState)(!1),Pe=Object(l.a)(Me,2),Le=(Pe[0],Pe[1]),Fe=Object(o.useState)(!1),Ae=Object(l.a)(Fe,2),Re=Ae[0],De=Ae[1];return Object(o.useEffect)((function(){fetch("/api/getProducts?".concat(d.search.replace("?",""),"&page=",1)).then((function(e){return e.json()})).then((function(e){"ok"===e.code?(E(e.total),oe(e.products),e.seller?(Ne(e.seller),e.categories&&D(e.categories)):Ne(null),e.buyer?_e(e.buyer):_e(null)):be(Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("button",{onClick:function(){return be(null)},children:"Okay"}),Object(v.jsxs)("div",{children:[Object(v.jsx)(j.i,{}),Object(v.jsx)("h4",{children:"Could not get products. Please try again."})]})]}))})).catch((function(e){console.log(e,156),be(Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("button",{onClick:function(){return be(null)},children:"Okay"}),Object(v.jsxs)("div",{children:[Object(v.jsx)(j.i,{}),Object(v.jsx)("h4",{children:"Could not get products. Make sure you're online."})]})]}))}))}),[d.search]),Object(o.useEffect)((function(){c.replace({pathname:c.location.pathname,search:"?"+new URLSearchParams(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)({},ve&&{seller:ve}),ee.length>=4&&{q:ee}),{},{perPage:G,sort:se.column,order:se.order},V&&{type:V}),xe&&{category:xe}),"seller"===b&&j.p.get("buyer")&&{buyer:j.p.get("buyer")})).toString()})}),[$,ee,se,ve,V,xe]),Object(o.useEffect)((function(){P&&B>le.length&&(Le(!0),fetch("/api/getProducts".concat(d.search,"&page=").concat($+1)).then((function(e){return e.json()})).then((function(e){Le(!1),"ok"===e.code?e.products.length&&(oe((function(t){return[].concat(Object(i.a)(t),Object(i.a)(e.products))})),K((function(e){return e+1}))):be(Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("button",{onClick:function(){return be(null)},children:"Okay"}),Object(v.jsxs)("div",{children:[Object(v.jsx)(j.i,{}),Object(v.jsx)("h4",{children:"Could not get products. Please try again."})]})]}))})).catch((function(e){Le(!1),console.log(e),be(Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("button",{onClick:function(){return be(null)},children:"Okay"}),Object(v.jsxs)("div",{children:[Object(v.jsx)(j.i,{}),Object(v.jsx)("h4",{children:"Could not get products. Make sure you're online."})]})]}))})))}),[P]),Object(o.useEffect)((function(){navigator.share&&p(!0)}),[]),Object(v.jsxs)("div",{className:"generic marketplace ".concat(Re?"chatOpen":""),children:[Object(v.jsx)(j.m,{}),Object(v.jsx)("div",{style:{display:"none"},children:Object(v.jsx)(j.J,{})}),Object(v.jsx)("div",{className:"benner",children:Object(v.jsx)("h1",{children:"Delivery Pay Marketplace"})}),Object(v.jsxs)("div",{className:"content",children:[Object(v.jsxs)("div",{className:"mainContent",children:[Ce&&Object(v.jsxs)("div",{className:"sellerDetail",children:[(null===Ce||void 0===Ce||null===(t=Ce.shopInfo)||void 0===t?void 0:t.logo)&&Object(v.jsx)(j.n,{className:"logo",src:Ce.shopInfo.logo}),Object(v.jsx)("p",{children:(null===(n=Ce.shopInfo)||void 0===n?void 0:n.name)||Ce.firstName+" "+Ce.lastName})]}),Object(v.jsxs)("div",{className:"filters",children:[Object(v.jsxs)("section",{className:"categories",children:[Object(v.jsx)("label",{children:"Category"}),Object(v.jsx)(j.h,{defaultValue:0,options:[{label:"All",value:""}].concat(Object(i.a)(R.map((function(e){return{label:e,value:e}})))),onChange:function(e){fe(e.value)}})]}),Object(v.jsxs)("section",{className:"search",children:[Object(v.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"23",height:"23",viewBox:"0 0 23 23",children:Object(v.jsx)("path",{id:"Icon_ionic-ios-search","data-name":"Icon ionic-ios-search",d:"M27.23,25.828l-6.4-6.455a9.116,9.116,0,1,0-1.384,1.4L25.8,27.188a.985.985,0,0,0,1.39.036A.99.99,0,0,0,27.23,25.828ZM13.67,20.852a7.2,7.2,0,1,1,5.091-2.108A7.155,7.155,0,0,1,13.67,20.852Z",transform:"translate(-4.5 -4.493)",fill:"#707070",opacity:"0.74"})}),Object(v.jsx)("input",{value:ee,onChange:function(e){te(e.target.value)},placeholder:"Search for products or services"}),ee&&Object(v.jsx)("button",{onClick:function(){return te("")},children:Object(v.jsx)(j.J,{})})]}),Object(v.jsxs)("section",{className:"sort",children:[Object(v.jsx)("label",{children:"Sort by:"}),Object(v.jsx)(j.h,{defaultValue:L.current.find((function(e){return e.value.column===se.column&&e.value.order===se.order})),options:L.current,onChange:function(e){return ae(e.value)}})]}),f&&Object(v.jsx)("section",{className:"share",children:Object(v.jsx)("button",{onClick:Object(a.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:k(!0);case 1:case"end":return e.stop()}}),e)}))),children:"Share this page"})})]}),Object(v.jsxs)("div",{className:"products ".concat(0===le.length?"empty":""),children:[le.map((function(e){return Object(v.jsx)(N,{data:e},e._id)})),B>le.length&&Object(v.jsx)("div",{className:"placeholder",children:"Loading"}),0===le.length&&Object(v.jsxs)("div",{className:"placeholder",children:[Object(v.jsx)(j.n,{src:"/open_box.png"}),Object(v.jsx)("p",{children:"No Product Found"})]})]})]}),Object(v.jsx)(O.Modal,{open:w,setOpen:k,label:"Share this page",head:!0,className:"shareModal",children:Object(v.jsx)(j.A,{url:window.location.href})}),Object(v.jsx)(O.Modal,{className:"msg",open:ue,children:ue})]}),Object(v.jsx)("div",{ref:M}),Ce&&Object(v.jsx)(C,{client:"seller"===b?Se:Ce,onToggle:De}),Object(v.jsx)(j.l,{})]})}},45:function(e,t,n){"use strict";n.r(t),n.d(t,"Chat",(function(){return g}));var c=n(14),s=n.n(c),a=n(16),r=n(13),i=n(4),l=n(3),o=n(1),j=n(6),d=n(5),u=n(8),b=n(7),h=n(2),O=n(25),x=n(0),f=Object(o.lazy)((function(){return Promise.resolve().then(n.bind(null,29)).then((function(e){return{default:e.MilestoneForm}}))}));n(96);var m=function(e){fetch("/api/updateLastSeen",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({rooms:e})})},p=function(e){var t=e.setUserCard,n=e.setContacts,c=Object(j.g)(),s=Object(o.useState)(null),a=Object(l.a)(s,2),i=a[0],u=a[1],O=Object(o.useState)([]),f=Object(l.a)(O,2),m=f[0],p=f[1],v=Object(o.useState)(""),g=Object(l.a)(v,2),y=g[0],C=g[1],N=Object(o.useState)(!1),w=Object(l.a)(N,2),k=w[0],S=w[1],_=Object(o.useRef)(),M=Object(o.useCallback)((function(){new RegExp(/^(\+91|91|1|)(?=\d{10}$)/gi).test(y.toLowerCase())?fetch("/api/inviteUser?".concat(new URLSearchParams({q:"+91"+y.replace(/^(\+91|91|1|)(?=\d{10}$)/g,""),origin:window.location.origin}).toString())).then((function(e){return e.json()})).then((function(e){"ok"===e.code?u(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return u(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(h.E,{}),Object(x.jsxs)("h4",{children:["An invitaion has been sent to"," ","+91"+y.replace(/^(\+91|91|1|)(?=\d{10}$)/g,""),"."]})]})]})):u(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return u(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(h.i,{}),Object(x.jsx)("h4",{children:"Invitation could not be sent. Please try again."})]})]}))})).catch((function(e){console.log(e),u(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return u(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(h.i,{}),Object(x.jsx)("h4",{children:"Invitation could not be sent. Make sure you're online."})]})]}))})):u(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return u(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(h.i,{}),Object(x.jsx)("h4",{children:"Enter a valid phone number to send invitation."})]})]}))}),[y]),P=function(e){e.path.includes(_.current)||S(!1)};return Object(o.useEffect)((function(){return document.addEventListener("click",P),function(){document.removeEventListener("click",P)}}),[]),Object(o.useEffect)((function(){y?(fetch("/api/getUsers?q=".concat(encodeURIComponent(y))).then((function(e){return e.json()})).then((function(e){e&&p(e)})),""===y&&p([])):p([])}),[y]),Object(x.jsxs)("div",{className:"search",children:[Object(x.jsxs)("form",{onSubmit:function(e){return e.preventDefault()},ref:_,children:[Object(x.jsxs)("section",{children:[Object(x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"17.9",height:"17.9",viewBox:"0 0 17.9 17.9",children:Object(x.jsx)("path",{id:"Path_208","data-name":"Path 208",d:"M17.9,16.324l-3.715-3.715a7.708,7.708,0,0,0,1.576-4.728A7.832,7.832,0,0,0,7.881,0,7.832,7.832,0,0,0,0,7.881a7.832,7.832,0,0,0,7.881,7.881,7.708,7.708,0,0,0,4.728-1.576L16.324,17.9ZM2.252,7.881A5.574,5.574,0,0,1,7.881,2.252a5.574,5.574,0,0,1,5.629,5.629,5.574,5.574,0,0,1-5.629,5.629A5.574,5.574,0,0,1,2.252,7.881Z",transform:"translate(0)",fill:"#b9b9b9"})}),Object(x.jsx)("input",{label:"search",required:!0,placeholder:"Phone Number",onFocus:function(){return S(!0)},value:y,onChange:function(e){return C(e.target.value)}}),Object(x.jsx)(d.b,{className:"sendReq ".concat(m.length>0||!y?"disabled":""),onClick:M,to:"#",children:"Invite"})]}),k&&m.length?Object(x.jsx)("ul",{className:"searchResult",children:m.map((function(e,s){return Object(x.jsx)("a",{onClick:function(){t(e),n((function(t){return[].concat(Object(r.a)(t),[{client:e,messages:[],status:""}])})),c.push("/account/deals/".concat(e._id)),S(!1)},children:Object(x.jsx)("li",{children:Object(x.jsxs)("div",{className:"profile",children:[Object(x.jsx)(h.n,{src:e.profileImg}),Object(x.jsxs)("p",{className:"name",children:[e.firstName+" "+e.lastName,Object(x.jsx)("span",{className:"phone",children:e.phone})]})]})},s)},s)}))}):null]}),Object(x.jsx)(b.Modal,{className:"msg",open:i,children:i})]})},v=function(e){var t=e.client,n=e.messages,c=(e.lastSeen,e.userCard),s=e.unread,a=Object(o.useContext)(u.a).setContacts,r=Object(j.g)();return Object(x.jsx)("li",{className:t._id===(null===c||void 0===c?void 0:c._id)?"active":void 0,onClick:function(){r.push("/account/deals/".concat(t._id)),a((function(e){return e.map((function(e){var n;return(null===t||void 0===t?void 0:t._id)===(null===(n=e.client)||void 0===n?void 0:n._id)?Object(i.a)(Object(i.a)({},e),{},{lastSeen:(new Date).toISOString(),unread:null}):e}))}))},children:Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(h.n,{src:t.profileImg||"/profile-user.jpg"}),Object(x.jsxs)("div",{children:[Object(x.jsx)("p",{className:"name",children:t.firstName?t.firstName+" "+t.lastName:"Deleted User"}),n.length>0&&Object(x.jsx)("p",{className:"lastMessage",children:n[n.length-1].text}),s?Object(x.jsx)("p",{className:"unread",children:s}):null]})]})})},g=function(e){var t=e.chat,n=e.setChat,c=e.userCard,s=e.setUserCard,a=e.user,O=e.setContacts,p=Object(o.useContext)(u.d),v=p.setUser,g=p.userType,C=Object(o.useContext)(u.a),k=C.rooms,S=(C.setRooms,Object(o.useRef)(null)),_=Object(o.useRef)(null),M=Object(j.g)(),P=Object(o.useState)(!1),L=Object(l.a)(P,2),F=L[0],A=L[1],R=Object(o.useState)(!((null===t||void 0===t?void 0:t.length)>=50)),D=Object(l.a)(R,2),T=D[0],q=D[1],B=Object(o.useState)(2),E=Object(l.a)(B,2),I=E[0],H=E[1],Z=Object(o.useState)(null),W=Object(l.a)(Z,2),V=W[0],U=W[1];Object(o.useEffect)((function(){return k.length&&m(k),function(){k.length&&m(k)}}),[k]);return Object(o.useEffect)((function(){(null===t||void 0===t?void 0:t.length)>=50?q(!1):q(!0)}),[t]),Object(x.jsxs)("div",{className:"chat",children:[t?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("div",{className:"chatHead",children:[Object(x.jsxs)("div",{className:"profile",children:[Object(x.jsx)("button",{className:"back",onClick:function(){M.push("/account/deals"),n(null),s(null)},children:Object(x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",children:Object(x.jsx)("path",{id:"Path_10","data-name":"Path 10",d:"M8,0,6.545,1.455l5.506,5.506H0V9.039H12.052L6.545,14.545,8,16l8-8Z",transform:"translate(16 16) rotate(180)",fill:"#2699fb"})})}),Object(x.jsx)(h.n,{src:c.profileImg||"/profile-user.jpg"}),Object(x.jsxs)("p",{className:"name",children:[c.firstName?c.firstName+" "+c.lastName:"Deleted user",c.lastSeen&&Object(x.jsx)("span",{className:"lastSeen",children:Object(x.jsx)(h.s,{format:"hh:mma, MMM DD",children:c.lastSeen})})]})]}),(""===c.status||"blocked"===c.status)&&Object(x.jsxs)(x.Fragment,{children:["seller"===g?Object(x.jsx)(d.b,{className:"pay",target:"_blank",to:"/marketplace?seller=".concat(a._id),onClick:function(){return h.p.set("buyer",c._id)},children:"Create an Order"}):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(d.b,{className:"pay",to:"/account/deals/".concat(c._id,"/payment"),children:"Pay"}),Object(x.jsx)(d.b,{className:"viewShop",to:"/marketplace?seller=".concat(c._id),children:"View Shop"})]}),Object(x.jsxs)(h.a,{children:[""===c.status&&null,Object(x.jsx)(d.b,{to:"/account/deals/".concat(c._id,"/report"),children:"Report"}),Object(x.jsx)("button",{onClick:function(){Object(b.Confirm)({label:" ".concat("blocked"===c.status?"Unblock":"Block"," User"),question:"You sure want to ".concat("blocked"===c.status?"un":"","block this user?"),callback:function(){var e="blocked"===c.status;fetch("/api/".concat(e?"unblockUser":"blockUser"),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({_id:c._id})}).then((function(e){return e.json()})).then((function(t){"ok"===t.code?(v((function(e){return Object(i.a)(Object(i.a)({},e),{},{blockList:t.blockList})})),O((function(t){return t.map((function(t){return t.client._id===c._id?Object(i.a)(Object(i.a)({},t),{},{status:e?"":"blocked"}):t}))})),U(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return U(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(h.E,{}),Object(x.jsxs)("h4",{children:["User successfully ",e&&"un","blocked."]})]})]}))):U(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return U(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(h.i,{}),Object(x.jsxs)("h4",{children:["Could not ",e&&"un","block user. try again."]})]})]}))})).catch((function(t){console.log(t),U(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return U(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(h.i,{}),Object(x.jsxs)("h4",{children:["Could not ",e&&"un","block user. Make sure you're online."]})]})]}))}))}})},children:"blocked"===c.status?"Unblock":"Block"})]})]})]}),Object(x.jsxs)("ul",{className:"chats",ref:S,onScroll:function(e){var t;((null===(t=_.current)||void 0===t?void 0:t.getBoundingClientRect())||{}).y>0&&!F&&(A(!0),fetch("/api/getMessages?client=".concat(c._id,"&page=").concat(I)).then((function(e){return e.json()})).then((function(e){A(!1),"ok"===e.code&&(O((function(t){return t.map((function(t){var n;return t._id===(null===(n=e.contact)||void 0===n?void 0:n._id)?Object(i.a)(Object(i.a)({},t),{},{messages:e.contact.messages}):t}))})),H((function(e){return e+1})),e.contact.total===e.contact.messages.length&&q(!0))})).catch((function(e){A(!1),console.log(e),U(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return U(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(h.i,{}),Object(x.jsx)("h4",{children:"Could not get messages. Make sure you're online."})]})]}))})))},children:[Object(r.a)(t.map((function(e,n){return Object(x.jsx)(y,{chat:t,msg:e,i:n,user:a},e._id)}))).reverse(),!T&&Object(x.jsx)("li",{className:"loading",ref:_,children:"Loading"})]}),""===c.status&&Object(x.jsx)(N,{onSuccess:function(){var e;null===(e=S.current)||void 0===e||e.scrollBy(0,2*S.current.scrollHeight)},rooms:k,user:c._id,newChat:!c.lastSeen})]}):Object(x.jsxs)("div",{className:"startChat",children:[Object(x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26.55",height:"25.219",viewBox:"0 0 26.55 25.219",children:Object(x.jsx)("path",{id:"Path_1","data-name":"Path 1",d:"M-242.2-184.285h-13l26.55-10.786-4.252,25.219-5.531-10.637-2.127,4.68v-6.382l7.659-9.148h2.34",transform:"translate(255.198 195.071)",fill:"#707070"})}),Object(x.jsx)("p",{children:"start a chat"})]}),Object(x.jsx)(b.Modal,{className:"milestoneRequest",head:!0,label:"seller"===g?"Request Milestone":"Create Milestone",open:c&&M.location.pathname.match(/^\/account\/deals\/.+\/payment$/),setOpen:function(){return M.push("/account/deals/".concat(c._id))},children:Object(x.jsx)(f,{action:"seller"===g?"request":"create",client:c,onSuccess:function(e){var t;M.push("/account/deals/".concat(c._id)),U(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return U(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(h.E,{}),Object(x.jsxs)("h4",{className:"amount",children:["\u20b9",null===(t=e.milestone)||void 0===t?void 0:t.amount]}),Object(x.jsx)("h4",{children:"Milestone has been created"})]}),Object(x.jsx)(d.b,{to:"/account/hold",onClick:function(){return U(null)},children:"Check your Delivery pay Hold"})]}))}})}),Object(x.jsx)(j.b,{path:"/account/deals/:_id/report",component:function(e){var t=e.location;return Object(x.jsx)(b.Modal,{open:!0,head:!0,label:"Report User",className:"userReport",setOpen:function(){return M.push(t.pathname.replace(/\/report/,""))},children:Object(x.jsx)("div",{className:"content",children:Object(x.jsx)(w,{user:c,onSuccess:function(){M.push(M.location.pathname.replace(/\/report/,"")),U(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return U(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(h.E,{}),Object(x.jsx)("h4",{children:"User has been reported."})]})]}))}})})})}}),Object(x.jsx)(b.Modal,{className:"msg",open:V,children:V})]})},y=function(e){var t,n,c=e.chat,s=e.msg,a=e.i,r=e.user,i=Object(j.g)(),d=Object(o.useState)(null),u=Object(l.a)(d,2),b=u[0],O=u[1];if(Object(o.useEffect)((function(){s.milestoneId&&fetch("/api/milestone?q=".concat(s.milestoneId)).then((function(e){return e.json()})).then((function(e){e.milestones.length&&O(e.milestones[0])}))}),[]),!s)return null;var f=Math.abs(new Date(s.createdAt).getTime()-new Date(null===(t=c[a+1])||void 0===t?void 0:t.createdAt).getTime())>12e4,m=Object(h.N)({time:s.createdAt,format:"YYYY-MM-DD"})!==Object(h.N)({time:null===(n=c[a-1])||void 0===n?void 0:n.createdAt,format:"YYYY-MM-DD"})||0===a;return Object(x.jsxs)("li",{className:"bubble ".concat(s.from===r._id?"user":"client"," ").concat(b?"milestone":""),children:[m&&Object(x.jsx)(h.s,{className:"dateStamp",format:"MMM DD, YYYY",children:s.createdAt}),s.text&&Object(x.jsxs)("p",{className:"text",onClick:function(){b&&i.push("/account/hold?q=".concat(b._id))},children:[b&&Object(x.jsxs)("span",{className:"amount",children:["\u20b9",b.amount]}),s.text]}),s.media&&Object(x.jsx)(C,{link:s.media}),(f||a===c.length-1)&&Object(x.jsx)(h.s,{className:"timestamp",format:"hh:mm a",children:s.createdAt})]})},C=function(e){var t=e.link,n=null,c=null,s=Object(o.useState)(!1),a=Object(l.a)(s,2),r=a[0],i=a[1];return t.match(/(\.gif|\.png|\.jpg|\.jpeg|\.webp)$/i)?n=Object(x.jsx)(h.n,{src:t,onClick:function(){return i(!0)}}):t.match(/(\.mp3|\.ogg|\.amr|\.m4a|\.flac|\.wav|\.aac)$/i)?n=Object(x.jsx)("audio",{src:t,controls:"on"}):t.match(/(\.mp4|\.mov|\.avi|\.flv|\.wmv|\.webm)$/i)?(n=Object(x.jsxs)("div",{className:"videoThumb",children:[Object(x.jsx)("video",{src:t,onClick:function(){return i(!0)}}),Object(x.jsx)(h.n,{src:"/play_btn.png"})]}),c=Object(x.jsx)("video",{src:t,controls:"on",autoPlay:"on"})):n=Object(x.jsxs)("a",{href:t,target:"_blank",className:"link",children:[Object(x.jsx)(h.n,{src:"/file_icon.png"}),t]}),Object(x.jsxs)("div",{className:"file",children:[n,Object(x.jsxs)(b.Modal,{open:r,className:"chatMediaView",children:[Object(x.jsx)("button",{className:"close",onClick:function(){return i(!1)},children:Object(x.jsx)(h.J,{})}),c||n]})]})},N=function(e){var t=e.rooms,n=e.user,c=e.newChat,j=Object(o.useRef)(null),d=Object(o.useRef)(null),f=Object(o.useState)(null),m=Object(l.a)(f,2),p=m[0],v=m[1],g=Object(o.useState)(!1),y=Object(l.a)(g,2),C=y[0],N=(y[1],Object(o.useState)("")),w=Object(l.a)(N,2),S=w[0],_=w[1],M=Object(o.useState)([]),P=Object(l.a)(M,2),L=P[0],F=P[1],A=function(){var e=Object(a.a)(s.a.mark((function e(a){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),u.e.connected){e.next=4;break}return v(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return v(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(h.i,{}),Object(x.jsx)("h4",{children:"Could not connect to server. Make sure you're online."})]})]})),e.abrupt("return");case 4:if("https://cdn.deliverypay.in",!L.length){e.next=11;break}return e.next=8,Object(h.H)({files:L,setMsg:v});case 8:e.t0=e.sent,e.next=12;break;case 11:e.t0=[];case 12:if(r=e.t0,!L.length||r.length){e.next=16;break}return v(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return v(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(h.i,{}),Object(x.jsx)("h4",{children:"Could not send files. please try again."})]})]})),e.abrupt("return");case 16:r.length&&(r.forEach((function(e,s){u.e.emit("messageToServer",Object(i.a)(Object(i.a)({rooms:t},c&&{newChat:c}),{},{message:{to:n,media:e}}))})),F([])),S&&t.length&&(u.e.emit("messageToServer",Object(i.a)(Object(i.a)({rooms:t},c&&{newChat:c}),{},{message:{to:n,text:S}})),j.current.focus(),_(""));case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){u.e.on("sendFail",(function(e){var t=e.err;v(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return v(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(h.i,{}),Object(x.jsx)("h4",{children:t})]})]}))}))}),[]),Object(o.useEffect)((function(){u.e.connected||u.e.connect()}),[S,L]),Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("form",{onSubmit:A,ref:d,className:C?"loading":"",children:[Object(x.jsx)(k,{files:L,setFiles:F}),Object(x.jsxs)("section",{children:[Object(x.jsx)(O.a,{autoFocus:!0,ref:j,type:"text",value:S,style:{height:"100px"},onChange:function(e){return _(e.target.value)},onKeyDown:function(e){13!==e.keyCode||e.altKey?13===e.keyCode&&e.altKey&&_(S+"\n"):A(e)}}),Object(x.jsxs)("div",{className:"fileUpload",children:[Object(x.jsx)("input",{type:"file",multiple:!0,onChange:function(e){F((function(t){return[].concat(Object(r.a)(t),Object(r.a)(Object(r.a)(e.target.files).filter((function(e){return!L.some((function(t){return t.name===e.name}))}))))}))}}),Object(x.jsx)(h.n,{src:"/paperclip.svg"})]})]}),Object(x.jsx)("button",{type:"submit",disabled:C,children:Object(x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26.55",height:"25.219",viewBox:"0 0 26.55 25.219",children:Object(x.jsx)("path",{id:"Path_1","data-name":"Path 1",d:"M-242.2-184.285h-13l26.55-10.786-4.252,25.219-5.531-10.637-2.127,4.68v-6.382l7.659-9.148h2.34",transform:"translate(255.198 195.071)",fill:"#fff"})})})]}),Object(x.jsx)(b.Modal,{open:p,className:"msg",children:p})]})},w=function(e){var t=e.user,n=e.onSuccess,c=Object(o.useState)(!1),s=Object(l.a)(c,2),a=s[0],r=s[1],i=Object(o.useState)(""),j=Object(l.a)(i,2),d=j[0],u=j[1],f=Object(o.useState)(null),m=Object(l.a)(f,2),p=m[0],v=m[1];return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("form",{onSubmit:function(e){e.preventDefault(),r(!0),fetch("/api/reportUser",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:t._id,message:d})}).then((function(e){return e.json()})).then((function(e){"ok"===e.code?null===n||void 0===n||n(e):v(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return v(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(h.i,{}),Object(x.jsx)("h4",{children:"Report could not be submitted. try again."})]})]}))})).catch((function(e){console.log(e),v(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return v(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(h.i,{}),Object(x.jsx)("h4",{children:"Report could not be submitted. Make sure you're online."})]})]}))}))},children:[Object(x.jsxs)("section",{children:[Object(x.jsx)("label",{children:"Messag"}),Object(x.jsx)(O.a,{required:!0,onChange:function(e){return u(e.target.value)}})]}),Object(x.jsx)("section",{className:"btns",children:Object(x.jsx)("button",{className:"submit",children:"Submit"})})]}),a&&Object(x.jsx)("div",{className:"spinnerContainer",children:Object(x.jsx)("div",{className:"spinner"})}),Object(x.jsx)(b.Modal,{className:"msg",open:p,children:p})]})},k=function(e){var t=e.files,n=e.setFiles;return 0===t.length?null:Object(x.jsx)("div",{className:"preview",children:t.map((function(e){var t={type:e.type,name:e.name,url:URL.createObjectURL(e)},c=t.type.startsWith("image");return Object(x.jsxs)("div",{className:"file ".concat(c?"thumb":"any"),children:[Object(x.jsx)("button",{className:"close",type:"button",onClick:function(){return n((function(e){return e.filter((function(e){return t.name!==e.name}))}))},children:Object(x.jsx)(h.J,{})}),Object(x.jsx)(h.n,{className:c?"thumb":"",src:c?t.url:"/file_icon.png"}),!c&&Object(x.jsx)("p",{className:"filename",children:e.name})]},e.name)}))})};t.default=function(e){e.history,e.location;var t=e.match,n=Object(o.useContext)(u.d).user,c=Object(o.useContext)(u.a),s=c.contacts,a=c.setContacts,r=Object(o.useRef)(),j=Object(o.useState)(null),d=Object(l.a)(j,2),b=d[0],h=d[1],O=Object(o.useState)(null),f=Object(l.a)(O,2),m=f[0],y=f[1];return Object(o.useEffect)((function(){b&&b._id!==r.current&&(u.e.emit("initiateChat",Object(i.a)({client_id:b._id},void 0===b.messages&&{newChat:!0})),r.current=b._id),b&&y(b.messages)}),[b]),Object(o.useEffect)((function(){if(t.params._id){var e=s.find((function(e){return e.client._id.toString()===t.params._id}));if(e){var n=e.client,c=e.messages,a=e.status;e.lastSeen;h(Object(i.a)(Object(i.a)({},n),{},{status:a,messages:c}))}}}),[t.params,s]),Object(x.jsxs)("div",{className:"chatContainer ".concat(b?"chatOpen":""),children:[Object(x.jsxs)("div",{className:"contactsContainer",children:[Object(x.jsx)(p,{setUserCard:h,setContacts:a}),Object(x.jsx)("p",{className:"label",children:"Messages"}),Object(x.jsx)("div",{className:"peopleWrapper",children:Object(x.jsxs)("ul",{className:"people",children:[s.map((function(e){var t=e.client,n=e.messages,c=e.status,s=e.lastSeen,a=e.unread;return Object(x.jsx)(v,{client:t,messages:n,status:c,lastSeen:s,userCard:b,unread:a},t._id)})),0===s.length&&Object(x.jsx)("p",{className:"placeholder",children:"Start making payments now."})]})})]}),Object(x.jsx)(g,{chat:m,setContacts:a,userCard:b,setUserCard:h,user:n,setChat:y})]})}},51:function(e,t,n){"use strict";n.r(t),n.d(t,"UserSearch",(function(){return _})),n.d(t,"ProfileAvatar",(function(){return M}));var c=n(13),s=n(4),a=n(3),r=n(1),i=n(8),l=n(6),o=n(5),j=n(7),d=n(2),u=n(33),b=n(0);n(54),n(55);var h=Object(r.lazy)((function(){return Promise.resolve().then(n.bind(null,29)).then((function(e){return{default:e.MilestoneForm}}))})),O=Object(r.lazy)((function(){return n.e(28).then(n.bind(null,175))})),x=Object(r.lazy)((function(){return Promise.resolve().then(n.bind(null,33)).then((function(e){return{default:e.Cart}}))})),f=Object(r.lazy)((function(){return Promise.resolve().then(n.bind(null,33)).then((function(e){return{default:e.SellerCart}}))})),m=Object(r.lazy)((function(){return n.e(2).then(n.bind(null,80)).then((function(e){return{default:e.StartTransaction}}))})),p=Object(r.lazy)((function(){return n.e(2).then(n.bind(null,80))})),v=Object(r.lazy)((function(){return n.e(9).then(n.bind(null,176))})),g=Object(r.lazy)((function(){return n.e(8).then(n.t.bind(null,177,7))})),y=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(14)]).then(n.bind(null,167))})),C=Object(r.lazy)((function(){return n.e(12).then(n.bind(null,178))})),N=Object(r.lazy)((function(){return n.e(0).then(n.bind(null,168))})),w=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(7)]).then(n.bind(null,170))})),k=Object(r.lazy)((function(){return Promise.resolve().then(n.bind(null,45))}));n(55),n(98);var S=function(){var e=Object(r.useContext)(i.d),t=e.user,n=e.userType,c=e.setUserType,s=Object(l.g)(),u=Object(r.useState)([]),O=Object(a.a)(u,2),x=O[0],f=O[1],m=Object(r.useState)([]),p=Object(a.a)(m,2),v=p[0],g=p[1],y=Object(r.useState)(null),C=Object(a.a)(y,2),N=C[0],w=C[1],k=Object(r.useState)(null),S=Object(a.a)(k,2),M=S[0],P=S[1];return Object(r.useEffect)((function(){fetch("/api/recentPayments").then((function(e){return e.json()})).then((function(e){f(e)})).catch((function(e){console.log(e)})),fetch("/api/getOrders?".concat(new URLSearchParams({user:"buyer",perPage:5}))).then((function(e){return e.json()})).then((function(e){"ok"===e.code&&g(e.orders)}))}),[]),Object(r.useEffect)((function(){"/account/home/pay"!==s.location.pathname||N||s.push("/account/home")}),[]),Object(b.jsxs)("div",{className:"homeContainer",children:[Object(b.jsxs)("div",{className:"benner",children:[Object(b.jsx)("h4",{children:"Start transactions with Delivery pay"}),Object(b.jsx)("p",{children:"Connect with new buyers/sellers."})]}),Object(b.jsxs)("div",{className:"userType",children:[Object(b.jsxs)("div",{className:"option buyer ".concat("buyer"===n&&"active"),children:[Object(b.jsx)(d.n,{src:"/buyer.png"}),Object(b.jsxs)("div",{className:"btn",onClick:function(e){return c("buyer")},children:[Object(b.jsx)("p",{children:"I am a Buyer "}),Object(b.jsx)("div",{className:"radial",children:"buyer"===n&&Object(b.jsx)("div",{className:"fill"})})]})]}),Object(b.jsxs)("div",{className:"option seller ".concat("seller"===n&&"active"),children:[Object(b.jsx)(d.n,{src:"/seller.png"}),Object(b.jsxs)("div",{className:"btn",onClick:function(e){return c("seller")},children:[Object(b.jsx)("p",{children:"I am a Seller "}),Object(b.jsx)("div",{className:"radial",children:"seller"===n&&Object(b.jsx)("div",{className:"fill"})})]})]})]}),n&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(_,{setClient:w}),Object(b.jsxs)("div",{className:"recentPayments",children:[Object(b.jsxs)("p",{className:"label",children:["Recently Contacted",Object(b.jsx)("span",{className:"note",children:"buyer"===n?"Click to start chatting.":"Click to create an order."})]}),Object(b.jsxs)("ul",{className:"payments",children:[x.map((function(e){return Object(b.jsx)("li",{children:Object(b.jsxs)(o.b,{target:"seller"===n?"_blank":"",to:"buyer"===n?"/account/deals/".concat(e._id):"/marketplace?".concat(new URLSearchParams({seller:t._id,buyer:e._id}).toString()),onClick:function(){w(e),d.p.set("buyer",e._id)},children:[Object(b.jsx)(d.n,{src:e.profileImg}),Object(b.jsx)("p",{className:"name",children:e.firstName+" "+e.lastName})]})},e._id)})),0===x.length&&Object(b.jsx)("p",{children:"Nothing for now."})]})]}),Object(b.jsxs)("div",{className:"recentOrders",children:[Object(b.jsxs)("p",{className:"label",children:["Recent Orders",Object(b.jsx)("span",{className:"note",children:"Click to view order details."})]}),Object(b.jsxs)("ul",{className:"orders",children:[v.map((function(e){return Object(b.jsx)(o.b,{to:"/account/orders/".concat("pending"===e.status?"pending":"current","/").concat(e._id),children:Object(b.jsx)("li",{children:Object(b.jsxs)("ul",{children:[Object(b.jsxs)("li",{children:[Object(b.jsx)("label",{children:"Seller"}),Object(b.jsx)("p",{children:e.seller.firstName+" "+e.seller.lastName})]}),Object(b.jsxs)("li",{children:[Object(b.jsx)("label",{children:"QTY"}),Object(b.jsx)("p",{children:e.products.length})]}),Object(b.jsxs)("li",{children:[Object(b.jsx)("label",{children:"Total"}),Object(b.jsxs)("h3",{children:["\u20b9",e.total]})]})]})})},e._id)})),0===v.length&&Object(b.jsx)("p",{children:"Nothing for now."})]})]})]}),Object(b.jsx)(d.l,{}),Object(b.jsx)(l.b,{path:"/account/home/createMilestone",children:Object(b.jsx)(j.Modal,{open:N,head:!0,label:"Create Milestone",setOpen:function(){s.push("/account/home"),w(null)},className:"milestoneRequest",children:Object(b.jsx)(h,{action:"create",client:N,onSuccess:function(e){s.push("/account/home"),P(Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("button",{onClick:function(){return P(null)},children:"Okay"}),Object(b.jsxs)("div",{children:[Object(b.jsx)(d.E,{}),Object(b.jsxs)("h4",{className:"amount",children:["\u20b9",null===e||void 0===e?void 0:e.amount]}),Object(b.jsx)("h4",{children:"Milestone has been created"})]}),Object(b.jsx)(o.b,{to:"/account/hold",onClick:function(){return P(null)},children:"Check your Delivery pay Hold"})]}))}})})}),Object(b.jsx)(l.b,{path:"/account/home/requestMilestone",children:Object(b.jsx)(j.Modal,{open:N,head:!0,label:"Request Milestone",setOpen:function(){s.push("/account/home"),w(null)},className:"milestoneRequest",children:Object(b.jsx)(h,{action:"request",client:N,onSuccess:function(e){s.push("/account/home"),P(Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("button",{onClick:function(){return P(null)},children:"Okay"}),Object(b.jsxs)("div",{children:[Object(b.jsx)(d.E,{}),Object(b.jsxs)("h4",{className:"amount",children:["\u20b9",null===e||void 0===e?void 0:e.amount]}),Object(b.jsx)("h4",{children:"Milestone has been requested"})]}),Object(b.jsx)(o.b,{to:"/account/hold",onClick:function(){return P(null)},children:"Check your Delivery pay Hold"})]}))}})})}),Object(b.jsx)(j.Modal,{className:"msg",open:M,children:M})]})},_=function(e){var t=e.setClient,n=Object(r.useContext)(i.d),c=n.userType,s=n.user,l=Object(r.useState)(null),u=Object(a.a)(l,2),h=u[0],O=u[1],x=Object(r.useState)([]),f=Object(a.a)(x,2),m=f[0],p=f[1],v=Object(r.useState)(""),g=Object(a.a)(v,2),y=g[0],C=g[1],N=Object(r.useState)(!1),w=Object(a.a)(N,2),k=w[0],S=w[1],_=Object(r.useRef)(),M=Object(r.useCallback)((function(){new RegExp(/^(\+91|91|1|)(?=\d{10}$)/gi).test(y.toLowerCase())?fetch("/api/inviteUser?".concat(new URLSearchParams({q:"+91"+y.replace(/^(\+91|91|1|)(?=\d{10}$)/g,""),origin:window.location.origin}).toString())).then((function(e){return e.json()})).then((function(e){"ok"===e.code?O(Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("button",{onClick:function(){return O(null)},children:"Okay"}),Object(b.jsxs)("div",{children:[Object(b.jsx)(d.E,{}),Object(b.jsxs)("h4",{children:["An invitaion has been sent to"," ","+91"+y.replace(/^(\+91|91|1|)(?=\d{10}$)/g,""),"."]})]})]})):O(Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("button",{onClick:function(){return O(null)},children:"Okay"}),Object(b.jsxs)("div",{children:[Object(b.jsx)(d.i,{}),Object(b.jsx)("h4",{children:"Invitation could not be sent. Please try again."})]})]}))})).catch((function(e){console.log(e),O(Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("button",{onClick:function(){return O(null)},children:"Okay"}),Object(b.jsxs)("div",{children:[Object(b.jsx)(d.i,{}),Object(b.jsx)("h4",{children:"Invitation could not be sent. Make sure you're online."})]})]}))})):O(Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("button",{onClick:function(){return O(null)},children:"Okay"}),Object(b.jsxs)("div",{children:[Object(b.jsx)(d.i,{}),Object(b.jsx)("h4",{children:"Enter a valid phone number to send invitation."})]})]}))}),[y]),P=function(e){e.path.includes(_.current)||S(!1)};return Object(r.useEffect)((function(){return document.addEventListener("click",P),function(){document.removeEventListener("click",P)}}),[]),Object(r.useEffect)((function(){(null===y||void 0===y?void 0:y.length)>=4?(fetch("/api/getUsers?q=".concat(encodeURIComponent(y))).then((function(e){return e.json()})).then((function(e){e&&p(e)})),""===y&&p([])):p([])}),[y]),Object(b.jsxs)("div",{className:"search",children:[Object(b.jsxs)("form",{onSubmit:function(e){return e.preventDefault()},ref:_,children:[Object(b.jsxs)("section",{children:[Object(b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"17.9",height:"17.9",viewBox:"0 0 17.9 17.9",children:Object(b.jsx)("path",{id:"Path_208","data-name":"Path 208",d:"M17.9,16.324l-3.715-3.715a7.708,7.708,0,0,0,1.576-4.728A7.832,7.832,0,0,0,7.881,0,7.832,7.832,0,0,0,0,7.881a7.832,7.832,0,0,0,7.881,7.881,7.708,7.708,0,0,0,4.728-1.576L16.324,17.9ZM2.252,7.881A5.574,5.574,0,0,1,7.881,2.252a5.574,5.574,0,0,1,5.629,5.629,5.574,5.574,0,0,1-5.629,5.629A5.574,5.574,0,0,1,2.252,7.881Z",transform:"translate(0)",fill:"#b9b9b9"})}),Object(b.jsx)("input",{label:"search",required:!0,placeholder:"Search with Phone Number or Delivery pay ID",onFocus:function(){return S(!0)},value:y,onChange:function(e){C(e.target.value),S(!0)}}),Object(b.jsx)(o.b,{className:"sendReq ".concat(m.length>0||!y?"disabled":""),onClick:M,to:"#",children:"Invite"})]}),k&&m.length?Object(b.jsx)("ul",{className:"searchResult",children:m.map((function(e,n){return Object(b.jsx)(o.b,{target:"_blank",onClick:function(){t(e),d.p.set("buyer",e._id)},to:{pathname:"seller"===c?"/marketplace?".concat(new URLSearchParams({seller:s._id,buyer:e._id}).toString()):"/marketplace?seller=".concat(e._id)},children:Object(b.jsxs)("li",{children:[Object(b.jsx)(d.I,{user:e}),Object(b.jsx)("span",{className:"sendReq",children:"seller"===c?"Request milestone":"Show Products & Services"})]},n)},n)}))}):null]}),Object(b.jsx)(j.Modal,{className:"msg",open:h,children:h})]})};var M=function(){var e=Object(r.useContext)(i.d),t=e.user,n=e.setUser,h=e.cart,O=e.sellerCart,x=e.userType,f=e.setUserType,m=Object(l.g)(),p=Object(r.useState)(!1),v=Object(a.a)(p,2),y=v[0],C=v[1],N=Object(r.useState)(!1),w=Object(a.a)(N,2),k=w[0],S=w[1],_=Object(r.useState)(!1),M=Object(a.a)(_,2),P=M[0],F=M[1],A=Object(r.useState)(!1),R=Object(a.a)(A,2),D=(R[0],R[1],Object(r.useState)(null)),T=Object(a.a)(D,2),q=(T[0],T[1]);Object(r.useEffect)((function(){P&&fetch("/api/editUserProfile",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({notificationLastRead:new Date})}).then((function(e){return e.json()})).then((function(e){e.user&&n((function(t){return Object(s.a)(Object(s.a)({},t),{},{notificationLastRead:e.user.notificationLastRead})}))})).catch((function(e){console.log(e)}))}),[P]),Object(r.useEffect)((function(){var e;null===(e=t.notifications)||void 0===e||e.find((function(e){return new Date(e.createdAt)>new Date(t.notificationLastRead)}))}),[P,t]);var B="".concat(window.location.origin,"/u/join?referer=").concat(t._id);return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("div",{className:"profile",children:["buyer"===x?Object(b.jsxs)(d.a,{className:"cart",icon:Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(d.e,{}),h.length>0&&Object(b.jsx)("span",{className:"itemCount",children:h.reduce((function(e,t){return e+t.qty}),0)})]}),clickable:!0,wrapperClassName:"popupCart",children:[h.map((function(e,t){var n=e.product,c=e.qty;return Object(b.jsx)(u.CartItem,{product:n,qty:c},t)})),h.length>0&&Object(b.jsx)("li",{className:"actions",children:Object(b.jsx)(o.b,{to:"/account/cart",children:"View Cart"})}),0===h.length&&Object(b.jsx)("p",{className:"placeholder",children:"cart is empty"})]}):Object(b.jsxs)(d.a,{className:"cart",icon:Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(d.z,{}),O.length>0&&Object(b.jsx)("span",{className:"itemCount",children:O.reduce((function(e,t){return e+t.qty}),0)})]}),clickable:!0,wrapperClassName:"popupCart",children:[O.map((function(e,t){var n=e.product,c=e.qty;return Object(b.jsx)(u.CartItem,{product:n,qty:c},t)})),O.length>0&&Object(b.jsx)("li",{className:"actions",children:Object(b.jsx)(o.b,{to:"/account/sellerCart",children:"View Order"})}),0===O.length&&Object(b.jsx)("p",{className:"placeholder",children:"cart is empty"})]}),Object(b.jsx)(d.a,{icon:Object(b.jsx)("svg",{id:"bell",xmlns:"http://www.w3.org/2000/svg",width:"15.918",height:"16",viewBox:"0 0 15.918 16",children:Object(b.jsx)("path",{id:"Path_1","data-name":"Path 1",d:"M15,14H10a2,2,0,0,1-4,0H1a.961.961,0,0,1-.9-.7,1.068,1.068,0,0,1,.3-1.1A4.026,4.026,0,0,0,2,9V6A6,6,0,0,1,14,6V9a4.026,4.026,0,0,0,1.6,3.2.947.947,0,0,1,.3,1.1A.961.961,0,0,1,15,14Z",transform:"translate(-0.063)",fill:"#fff",fillRule:"evenodd"})}),wrapperClassName:"notiWrapper",onClick:function(){return F(!0)},children:Object(c.a)(t.notifications).reverse().map((function(e,t){return Object(b.jsxs)("li",{onClick:function(){e.link&&(e.link.includes("/myShop/")&&f("seller"),e.link.includes("/account/orders")&&f("buyer"),m.push({pathname:e.link,target:"_blank"}))},children:[Object(b.jsx)(d.s,{format:"hh:mm",children:e.createdAt}),Object(b.jsx)("p",{className:"title",children:e.title}),Object(b.jsx)("p",{className:"body",children:e.body})]},t)}))}),Object(b.jsxs)(d.a,{wrapperClassName:"menu",className:"avatar",icon:Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(d.n,{src:(null===t||void 0===t?void 0:t.profileImg)||"/profile-user.jpg",onClick:function(){return C(!y)}}),x&&Object(b.jsx)("p",{className:"userTypeTag",children:x})]}),children:[Object(b.jsx)("p",{className:"name",children:(null===t||void 0===t?void 0:t.firstName)+" "+(null===t||void 0===t?void 0:t.lastName)||t.phone}),Object(b.jsx)(L,{tip:!0}),Object(b.jsx)(o.b,{className:"link",to:"/account",children:"Dashboard"}),Object(b.jsx)(o.b,{className:"link trans",to:"/account/transactions",children:"Transactions"}),Object(b.jsx)(o.b,{className:"link settings",to:"/account/profile",children:"Settings"}),Object(b.jsx)(o.b,{className:"link",to:"/aboutUs",children:"More about us"}),Object(b.jsxs)("div",{className:"referral",children:[Object(b.jsx)("button",{onClick:function(){S(!0)},children:"Invite now"}),Object(b.jsx)("p",{children:"Refer and earn flat \u20b950/- cashback to your wallet"})]}),Object(b.jsxs)("button",{className:"logout",onClick:function(){fetch("/api/logout").then((function(e){return e.json()})).then((function(e){n(null),m.push("/"),d.p.remove(["userType","buyer","localSellerCart"])})).catch((function(e){console.log(e),q(Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("button",{onClick:function(){return q(null)},children:"Okay"}),Object(b.jsxs)("div",{children:[Object(b.jsx)(d.i,{}),Object(b.jsx)("h4",{children:"Could not logout."})]})]}))}))},children:["Logout",Object(b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"31.702",height:"31.702",viewBox:"0 0 31.702 31.702",children:Object(b.jsx)("path",{id:"Path_1758","data-name":"Path 1758",d:"M15.487,25.174l2.483,2.483,8.806-8.806L17.97,10.045l-2.483,2.483,4.544,4.562H3v3.522H20.031ZM31.18,3H6.522A3.521,3.521,0,0,0,3,6.522v7.045H6.522V6.522H31.18V31.18H6.522V24.135H3V31.18A3.521,3.521,0,0,0,6.522,34.7H31.18A3.533,3.533,0,0,0,34.7,31.18V6.522A3.533,3.533,0,0,0,31.18,3Z",transform:"translate(-3 -3)",fill:"#fc0660"})})]})]})]}),Object(b.jsxs)(j.Modal,{className:"invite",open:k,onBackdropClick:function(){return S(!1)},children:[Object(b.jsx)("div",{className:"imgWrapper",onClick:function(){return S(!1)},children:Object(b.jsx)(g,{value:B,size:250,renderAs:"svg"})}),Object(b.jsx)(d.A,{url:B})]})]})},P=function(e){var t=e.label,n=e.className,c=e.location,s=e.link,a=e.path,r=e.children;return Object(b.jsxs)("li",{className:"accordion ".concat(n||""," ").concat(c.pathname.startsWith(s)&&"open"),children:[Object(b.jsx)(o.b,{to:a,children:t}),c.pathname.startsWith(s)&&Object(b.jsxs)("ul",{children:[Object(b.jsx)("li",{children:Object(b.jsx)(d.g,{})}),r]})]})},L=function(e){var t=e.tip,n=Object(r.useContext)(i.d),c=n.userType,s=n.setUserType;return Object(b.jsxs)("div",{className:"userTypeSwitch",children:[Object(b.jsx)("label",{children:"Browse as"}),Object(b.jsxs)("ul",{className:"options",children:[Object(b.jsx)("li",{className:"buyer"===c?"active":"",onClick:function(){return s("buyer")},children:"Buyer"}),Object(b.jsx)("li",{className:"seller"===c?"active":"",onClick:function(){return s("seller")},children:"Seller"})]}),t&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("div",{className:"break"}),"seller"===c?Object(b.jsxs)("p",{className:"note",children:["As a seller, you can manage your",Object(b.jsx)("br",{})," product listing, order, refunds and general shop settings."]}):Object(b.jsxs)("p",{className:"note",children:["As a buyer, you can manage your",Object(b.jsx)("br",{})," perchase orders, payments and deals."]})]})]})};t.default=function(){var e=Object(r.useContext)(i.d),t=e.user,n=e.userType,c=Object(r.useContext)(i.a).unread,s=Object(l.h)();return Object(r.useEffect)((function(){i.e.connected||i.e.connect()}),[]),Object(b.jsxs)("div",{className:"account ".concat(s.pathname.startsWith("/account/deals/")?"chatSection":""),children:[Object(b.jsxs)("header",{children:[Object(b.jsxs)(o.b,{to:"/",children:[Object(b.jsx)(d.n,{className:"logo",src:"/logo_land.jpg",alt:"Delivery pay logo"}),Object(b.jsx)(d.n,{className:"logo_small",src:"/logo_sqr.jpg",alt:"Delivery pay logo"})]}),Object(b.jsx)("div",{className:"links",children:Object(b.jsx)(o.b,{to:"/",className:"home",children:"Home"})}),Object(b.jsx)(L,{}),Object(b.jsx)(M,{})]}),Object(b.jsxs)("div",{className:"content",children:[Object(b.jsxs)("ul",{className:"sidebar",children:[Object(b.jsx)("li",{className:"/account"===s.pathname||s.pathname.startsWith("/account/home")?"active":void 0,children:Object(b.jsxs)(o.b,{to:"/account/home",children:[Object(b.jsx)("div",{className:"icon",children:Object(b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"21.648",height:"21.513",viewBox:"0 0 21.648 21.513",children:Object(b.jsx)("path",{id:"Path_287","data-name":"Path 287",d:"M21.387,10.488A1.079,1.079,0,0,0,21.3,8.979L11.626.289a1.185,1.185,0,0,0-1.576,0L.342,9.44A1.073,1.073,0,0,0,.3,10.95l.245.258A1.043,1.043,0,0,0,2,11.321l.724-.665v9.762A1.071,1.071,0,0,0,3.78,21.5H7.563A1.071,1.071,0,0,0,8.62,20.418V13.591h4.81v6.828a1.04,1.04,0,0,0,.269.761.987.987,0,0,0,.723.323H18.45a1.071,1.071,0,0,0,1.057-1.084V10.776l.449.4c.245.222.765.042,1.168-.4Z",transform:"translate(-0.008 0.011)",fill:"#fff"})})}),"Home"]})}),Object(b.jsxs)(P,{className:"".concat(s.pathname.startsWith("/account/transaction")?"active":""),location:s,label:Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("div",{className:"icon",children:Object(b.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20.886",height:"22.948",viewBox:"0 0 20.886 22.948",children:[Object(b.jsxs)("g",{id:"Rectangle_2","data-name":"Rectangle 2",fill:"none",stroke:"#fff",strokeWidth:"2",children:[Object(b.jsx)("rect",{width:"20.886",height:"16.244",rx:"2",stroke:"none"}),Object(b.jsx)("rect",{x:"1",y:"1",width:"18.886",height:"14.244",rx:"1",fill:"none"})]}),Object(b.jsxs)("g",{id:"Rectangle_3","data-name":"Rectangle 3",transform:"translate(0 9.283)",fill:"none",stroke:"#fff",strokeWidth:"2",children:[Object(b.jsx)("rect",{width:"20.886",height:"6.962",rx:"2",stroke:"none"}),Object(b.jsx)("rect",{x:"1",y:"1",width:"18.886",height:"4.962",rx:"1",fill:"none"})]}),Object(b.jsx)("path",{id:"Path_2","data-name":"Path 2",d:"M-180.174-182v7.923l4.1-4.653,3.932,4.653V-182Z",transform:"translate(186.6 197.025)",fill:"#fff"})]})}),Object(b.jsx)("p",{className:"label",children:"Start Transaction"})]}),link:"/account/transaction",path:"/account/transaction/new",children:[Object(b.jsx)("li",{className:s.pathname.startsWith("/account/transaction/new")?"active":void 0,children:Object(b.jsx)(o.b,{to:"/account/transaction/new",children:"Start New"})}),Object(b.jsx)("li",{className:s.pathname.startsWith("/account/transaction/history")?"active":void 0,children:Object(b.jsx)(o.b,{to:"/account/transaction/history",children:"Transaction History"})})]}),"buyer"===n&&Object(b.jsxs)(P,{className:"".concat(s.pathname.startsWith("/account/orders")?"active":""),location:s,label:Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("div",{className:"icon",children:Object(b.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20.886",height:"22.948",viewBox:"0 0 20.886 22.948",children:[Object(b.jsxs)("g",{id:"Rectangle_2","data-name":"Rectangle 2",fill:"none",stroke:"#fff",strokeWidth:"2",children:[Object(b.jsx)("rect",{width:"20.886",height:"16.244",rx:"2",stroke:"none"}),Object(b.jsx)("rect",{x:"1",y:"1",width:"18.886",height:"14.244",rx:"1",fill:"none"})]}),Object(b.jsxs)("g",{id:"Rectangle_3","data-name":"Rectangle 3",transform:"translate(0 9.283)",fill:"none",stroke:"#fff",strokeWidth:"2",children:[Object(b.jsx)("rect",{width:"20.886",height:"6.962",rx:"2",stroke:"none"}),Object(b.jsx)("rect",{x:"1",y:"1",width:"18.886",height:"4.962",rx:"1",fill:"none"})]}),Object(b.jsx)("path",{id:"Path_2","data-name":"Path 2",d:"M-180.174-182v7.923l4.1-4.653,3.932,4.653V-182Z",transform:"translate(186.6 197.025)",fill:"#fff"})]})}),Object(b.jsx)("p",{className:"label",children:"My Orders"})]}),link:"/account/orders",path:"/account/orders/current",children:[Object(b.jsx)("li",{className:s.pathname.startsWith("/account/orders/current")?"active":void 0,children:Object(b.jsx)(o.b,{to:"/account/orders/current",children:"Current Order"})}),Object(b.jsx)("li",{className:s.pathname.startsWith("/account/orders/pending")?"active":void 0,children:Object(b.jsx)(o.b,{to:"/account/orders/pending",children:"Pending Order"})}),Object(b.jsx)("li",{className:s.pathname.startsWith("/account/orders/history")?"active":void 0,children:Object(b.jsx)(o.b,{to:"/account/orders/history",children:"Order History"})}),Object(b.jsx)("li",{className:s.pathname.startsWith("/account/orders/dispute")?"active":void 0,children:Object(b.jsx)(o.b,{to:"/account/orders/dispute",children:"Dispute Resolution"})})]}),Object(b.jsx)("li",{className:"hold ".concat(s.pathname.startsWith("/account/hold")?"active":void 0),children:Object(b.jsxs)(o.b,{to:"/account/hold",children:[Object(b.jsx)("div",{className:"icon",children:Object(b.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"27",viewBox:"0 0 22 27",children:[Object(b.jsx)("text",{id:"_3","data-name":"3",transform:"translate(14 14) rotate(180)",fill:"#fff",fontSize:"10",fontFamily:"Ebrima-Bold, Ebrima",fontWeight:"700",children:Object(b.jsx)("tspan",{x:"0",y:"0",children:"3"})}),Object(b.jsxs)("g",{id:"Group_166","data-name":"Group 166",transform:"translate(-534.967 -611.816)",children:[Object(b.jsxs)("g",{id:"Rectangle_1132","data-name":"Rectangle 1132",transform:"translate(534.967 620.816)",fill:"none",stroke:"#fff",strokeWidth:"2",children:[Object(b.jsx)("rect",{width:"22",height:"18",rx:"4",stroke:"none"}),Object(b.jsx)("rect",{x:"1",y:"1",width:"20",height:"16",rx:"3",fill:"none"})]}),Object(b.jsxs)("g",{id:"Rectangle_1133","data-name":"Rectangle 1133",transform:"translate(539.967 611.816)",fill:"none",stroke:"#fff",strokeWidth:"2",children:[Object(b.jsx)("path",{d:"M6.5,0h0A6.5,6.5,0,0,1,13,6.5V11a0,0,0,0,1,0,0H0a0,0,0,0,1,0,0V6.5A6.5,6.5,0,0,1,6.5,0Z",stroke:"none"}),Object(b.jsx)("path",{d:"M6.5,1h0A5.5,5.5,0,0,1,12,6.5V9.214a.786.786,0,0,1-.786.786H1.786A.786.786,0,0,1,1,9.214V6.5A5.5,5.5,0,0,1,6.5,1Z",fill:"none"})]})]})]})}),"Milestones"]})}),"seller"===n&&Object(b.jsx)("li",{className:"products ".concat(s.pathname.startsWith("/account/myShop")?"active":void 0),children:Object(b.jsxs)(o.b,{to:"/account/myShop/products",children:[Object(b.jsx)("div",{className:"icon",children:Object(b.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"19.872",height:"21.086",viewBox:"0 0 19.872 21.086",children:[Object(b.jsxs)("g",{id:"Group_4","data-name":"Group 4",transform:"translate(0 5.63)",children:[Object(b.jsxs)("g",{id:"Path_288","data-name":"Path 288",fill:"none",children:[Object(b.jsx)("path",{d:"M1,0H18.872a1,1,0,0,1,1,1V14.456a1,1,0,0,1-1,1H1a1,1,0,0,1-1-1V1A1,1,0,0,1,1,0Z",stroke:"none"}),Object(b.jsx)("path",{d:"M 2 2.000001907348633 L 2 13.45590209960938 L 17.87188148498535 13.45590209960938 L 17.87188148498535 2.000001907348633 L 2 2.000001907348633 M 1 1.9073486328125e-06 L 18.87188148498535 1.9073486328125e-06 C 19.42416000366211 1.9073486328125e-06 19.87188148498535 0.4477119445800781 19.87188148498535 1.000001907348633 L 19.87188148498535 14.45590209960938 C 19.87188148498535 15.00819206237793 19.42416000366211 15.45590209960938 18.87188148498535 15.45590209960938 L 1 15.45590209960938 C 0.4477100372314453 15.45590209960938 0 15.00819206237793 0 14.45590209960938 L 0 1.000001907348633 C 0 0.4477119445800781 0.4477100372314453 1.9073486328125e-06 1 1.9073486328125e-06 Z",stroke:"none",fill:"#fff"})]}),Object(b.jsxs)("g",{id:"Rectangle_3","data-name":"Rectangle 3",transform:"translate(0 8.832)",fill:"none",stroke:"#fff",strokeWidth:"2",children:[Object(b.jsx)("rect",{width:"19.872",height:"6.624",rx:"2",stroke:"none"}),Object(b.jsx)("rect",{x:"1",y:"1",width:"17.872",height:"4.624",rx:"1",fill:"none"})]})]}),Object(b.jsxs)("g",{id:"Rectangle_1134","data-name":"Rectangle 1134",transform:"translate(4)",fill:"none",stroke:"#fff",strokeWidth:"2",children:[Object(b.jsx)("path",{d:"M2,0h8a2,2,0,0,1,2,2V7a0,0,0,0,1,0,0H0A0,0,0,0,1,0,7V2A2,2,0,0,1,2,0Z",stroke:"none"}),Object(b.jsx)("rect",{x:"1",y:"1",width:"10",height:"5",rx:"1",fill:"none"})]})]})}),"My Shop"]})}),Object(b.jsxs)("li",{className:"deals ".concat(s.pathname.startsWith("/account/deals")?"active":void 0),children:[Object(b.jsxs)(o.b,{to:"/account/deals",children:[Object(b.jsx)("div",{className:"icon",children:Object(b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26.55",height:"25.219",viewBox:"0 0 26.55 25.219",children:Object(b.jsx)("path",{id:"Path_1","data-name":"Path 1",d:"M-242.2-184.285h-13l26.55-10.786-4.252,25.219-5.531-10.637-2.127,4.68v-6.382l7.659-9.148h2.34",transform:"translate(255.198 195.071)",fill:"#fff"})})}),"My Chat"]}),c?Object(b.jsx)("span",{className:"unred",children:c}):null]}),Object(b.jsx)(P,{className:"profile ".concat(s.pathname.startsWith("/account/profile")?"active":""),location:s,label:Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("div",{className:"icon acc",children:Object(b.jsx)(d.n,{src:(null===t||void 0===t?void 0:t.profileImg)||"/profile-user.jpg"})}),Object(b.jsx)("p",{className:"label",children:"Account"})]}),link:"/account/profile",path:"/account/profile/wallet",children:Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("li",{className:s.pathname.startsWith("/account/profile/wallet")?"active":void 0,children:Object(b.jsx)(o.b,{to:"/account/profile/wallet",children:"Wallet"})}),Object(b.jsx)("li",{className:s.pathname.startsWith("/account/profile/edit")?"active":void 0,children:Object(b.jsx)(o.b,{to:"/account/profile/edit",children:"Edit Profile"})})]})}),Object(b.jsx)("li",{className:"support ".concat(s.pathname.startsWith("/account/support")?"active":void 0),children:Object(b.jsxs)(o.b,{to:"/account/support",children:[Object(b.jsx)("div",{className:"icon",children:Object(b.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"19.872",height:"21.086",viewBox:"0 0 19.872 21.086",children:[Object(b.jsxs)("g",{id:"Group_4","data-name":"Group 4",transform:"translate(0 5.63)",children:[Object(b.jsxs)("g",{id:"Path_288","data-name":"Path 288",fill:"none",children:[Object(b.jsx)("path",{d:"M1,0H18.872a1,1,0,0,1,1,1V14.456a1,1,0,0,1-1,1H1a1,1,0,0,1-1-1V1A1,1,0,0,1,1,0Z",stroke:"none"}),Object(b.jsx)("path",{d:"M 2 2.000001907348633 L 2 13.45590209960938 L 17.87188148498535 13.45590209960938 L 17.87188148498535 2.000001907348633 L 2 2.000001907348633 M 1 1.9073486328125e-06 L 18.87188148498535 1.9073486328125e-06 C 19.42416000366211 1.9073486328125e-06 19.87188148498535 0.4477119445800781 19.87188148498535 1.000001907348633 L 19.87188148498535 14.45590209960938 C 19.87188148498535 15.00819206237793 19.42416000366211 15.45590209960938 18.87188148498535 15.45590209960938 L 1 15.45590209960938 C 0.4477100372314453 15.45590209960938 0 15.00819206237793 0 14.45590209960938 L 0 1.000001907348633 C 0 0.4477119445800781 0.4477100372314453 1.9073486328125e-06 1 1.9073486328125e-06 Z",stroke:"none",fill:"#fff"})]}),Object(b.jsxs)("g",{id:"Rectangle_3","data-name":"Rectangle 3",transform:"translate(0 8.832)",fill:"none",stroke:"#fff",strokeWidth:"2",children:[Object(b.jsx)("rect",{width:"19.872",height:"6.624",rx:"2",stroke:"none"}),Object(b.jsx)("rect",{x:"1",y:"1",width:"17.872",height:"4.624",rx:"1",fill:"none"})]})]}),Object(b.jsxs)("g",{id:"Rectangle_1134","data-name":"Rectangle 1134",transform:"translate(4)",fill:"none",stroke:"#fff",strokeWidth:"2",children:[Object(b.jsx)("path",{d:"M2,0h8a2,2,0,0,1,2,2V7a0,0,0,0,1,0,0H0A0,0,0,0,1,0,7V2A2,2,0,0,1,2,0Z",stroke:"none"}),Object(b.jsx)("rect",{x:"1",y:"1",width:"10",height:"5",rx:"1",fill:"none"})]})]})}),"Customer Support"]})})]}),Object(b.jsx)("main",{children:Object(b.jsx)(r.Suspense,{fallback:Object(b.jsx)(b.Fragment,{children:"Loading"}),children:Object(b.jsxs)(l.d,{children:[Object(b.jsx)(l.b,{path:"/account/deals/:_id?",component:k}),Object(b.jsx)(l.b,{path:"/account/transaction/history",component:p}),Object(b.jsx)(l.b,{path:"/account/transaction",component:m}),Object(b.jsx)(l.b,{path:"/account/orders",component:O}),Object(b.jsx)(l.b,{path:"/account/wallet",component:N}),Object(b.jsx)(l.b,{path:"/account/hold",component:C}),Object(b.jsx)(l.b,{path:"/account/transactions",component:p}),Object(b.jsx)(l.b,{path:"/account/myShop",component:w}),Object(b.jsx)(l.b,{path:"/account/cart",component:x}),Object(b.jsx)(l.b,{path:"/account/sellerCart",component:f}),Object(b.jsx)(l.b,{path:"/account/support",component:v}),Object(b.jsx)(l.b,{path:"/account/profile/edit",component:y}),Object(b.jsx)(l.b,{path:"/account/profile/kyc",component:y}),Object(b.jsx)(l.b,{path:"/account/profile/wallet",component:N}),Object(b.jsx)(l.b,{path:"/account/profile/customerCare",component:y}),Object(b.jsx)(l.b,{path:"/",component:S})]})})})]}),Object(b.jsxs)("ul",{className:"mobileMenu",children:[Object(b.jsx)("li",{className:"/account"===s.pathname||s.pathname.startsWith("/account/home")?"active":void 0,children:Object(b.jsxs)(o.b,{to:"/account/home",children:[Object(b.jsx)("div",{className:"icon",children:Object(b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"21.648",height:"21.513",viewBox:"0 0 21.648 21.513",children:Object(b.jsx)("path",{id:"Path_287","data-name":"Path 287",d:"M21.387,10.488A1.079,1.079,0,0,0,21.3,8.979L11.626.289a1.185,1.185,0,0,0-1.576,0L.342,9.44A1.073,1.073,0,0,0,.3,10.95l.245.258A1.043,1.043,0,0,0,2,11.321l.724-.665v9.762A1.071,1.071,0,0,0,3.78,21.5H7.563A1.071,1.071,0,0,0,8.62,20.418V13.591h4.81v6.828a1.04,1.04,0,0,0,.269.761.987.987,0,0,0,.723.323H18.45a1.071,1.071,0,0,0,1.057-1.084V10.776l.449.4c.245.222.765.042,1.168-.4Z",transform:"translate(-0.008 0.011)",fill:"#fff"})})}),"Home"]})}),Object(b.jsx)("li",{className:"deals ".concat(s.pathname.startsWith("/account/deals")?"active":void 0),children:Object(b.jsxs)(o.b,{to:"/account/deals",children:[Object(b.jsx)("div",{className:"icon",children:Object(b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26.55",height:"25.219",viewBox:"0 0 26.55 25.219",children:Object(b.jsx)("path",{id:"Path_1","data-name":"Path 1",d:"M-242.2-184.285h-13l26.55-10.786-4.252,25.219-5.531-10.637-2.127,4.68v-6.382l7.659-9.148h2.34",transform:"translate(255.198 195.071)",fill:"#fff"})})}),"Deals"]})}),Object(b.jsx)("li",{className:s.pathname.startsWith("/account/wallet")?"active":void 0,children:Object(b.jsxs)(o.b,{to:"/account/wallet",children:[Object(b.jsx)("div",{className:"icon",children:Object(b.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20.886",height:"22.948",viewBox:"0 0 20.886 22.948",children:[Object(b.jsxs)("g",{id:"Rectangle_2","data-name":"Rectangle 2",fill:"none",stroke:"#fff",strokeWidth:"2",children:[Object(b.jsx)("rect",{width:"20.886",height:"16.244",rx:"2",stroke:"none"}),Object(b.jsx)("rect",{x:"1",y:"1",width:"18.886",height:"14.244",rx:"1",fill:"none"})]}),Object(b.jsxs)("g",{id:"Rectangle_3","data-name":"Rectangle 3",transform:"translate(0 9.283)",fill:"none",stroke:"#fff",strokeWidth:"2",children:[Object(b.jsx)("rect",{width:"20.886",height:"6.962",rx:"2",stroke:"none"}),Object(b.jsx)("rect",{x:"1",y:"1",width:"18.886",height:"4.962",rx:"1",fill:"none"})]}),Object(b.jsx)("path",{id:"Path_2","data-name":"Path 2",d:"M-180.174-182v7.923l4.1-4.653,3.932,4.653V-182Z",transform:"translate(186.6 197.025)",fill:"#fff"})]})}),"Wallet"]})}),Object(b.jsx)("li",{className:"hold ".concat(s.pathname.startsWith("/account/hold")?"active":void 0),children:Object(b.jsxs)(o.b,{to:"/account/hold",children:[Object(b.jsx)("div",{className:"icon",children:Object(b.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"27",viewBox:"0 0 22 27",children:[Object(b.jsx)("text",{id:"_3","data-name":"3",transform:"translate(14 14) rotate(180)",fill:"#fff",fontSize:"10",fontFamily:"Ebrima-Bold, Ebrima",fontWeight:"700",children:Object(b.jsx)("tspan",{x:"0",y:"0",children:"3"})}),Object(b.jsxs)("g",{id:"Group_166","data-name":"Group 166",transform:"translate(-534.967 -611.816)",children:[Object(b.jsxs)("g",{id:"Rectangle_1132","data-name":"Rectangle 1132",transform:"translate(534.967 620.816)",fill:"none",stroke:"#fff",strokeWidth:"2",children:[Object(b.jsx)("rect",{width:"22",height:"18",rx:"4",stroke:"none"}),Object(b.jsx)("rect",{x:"1",y:"1",width:"20",height:"16",rx:"3",fill:"none"})]}),Object(b.jsxs)("g",{id:"Rectangle_1133","data-name":"Rectangle 1133",transform:"translate(539.967 611.816)",fill:"none",stroke:"#fff",strokeWidth:"2",children:[Object(b.jsx)("path",{d:"M6.5,0h0A6.5,6.5,0,0,1,13,6.5V11a0,0,0,0,1,0,0H0a0,0,0,0,1,0,0V6.5A6.5,6.5,0,0,1,6.5,0Z",stroke:"none"}),Object(b.jsx)("path",{d:"M6.5,1h0A5.5,5.5,0,0,1,12,6.5V9.214a.786.786,0,0,1-.786.786H1.786A.786.786,0,0,1,1,9.214V6.5A5.5,5.5,0,0,1,6.5,1Z",fill:"none"})]})]})]})}),"Hold"]})}),"seller"===n?Object(b.jsx)("li",{className:"trans ".concat(s.pathname.startsWith("/account/myShop")?"active":void 0),children:Object(b.jsxs)(o.b,{to:"/account/myShop/products",children:[Object(b.jsx)("div",{className:"icon",children:Object(b.jsxs)("svg",{id:"Group_283","data-name":"Group 283",xmlns:"http://www.w3.org/2000/svg",width:"28.407",height:"25.407",viewBox:"0 0 28.407 25.407",children:[Object(b.jsxs)("g",{id:"Path_4","data-name":"Path 4",transform:"translate(3)",fill:"none",children:[Object(b.jsx)("path",{d:"M12.7,0A12.7,12.7,0,1,1,0,12.7,12.7,12.7,0,0,1,12.7,0Z",stroke:"none"}),Object(b.jsx)("path",{d:"M 12.70325660705566 1.999996185302734 C 9.844316482543945 1.999996185302734 7.156496047973633 3.113327026367188 5.134906768798828 5.134906768798828 C 3.113327026367188 7.156496047973633 1.999996185302734 9.844316482543945 1.999996185302734 12.70325660705566 C 1.999996185302734 15.56219673156738 3.113327026367188 18.2500171661377 5.134906768798828 20.2716064453125 C 7.156496047973633 22.29318618774414 9.844316482543945 23.40651702880859 12.70325660705566 23.40651702880859 C 15.56219673156738 23.40651702880859 18.2500171661377 22.29318618774414 20.2716064453125 20.2716064453125 C 22.29318618774414 18.2500171661377 23.40651702880859 15.56219673156738 23.40651702880859 12.70325660705566 C 23.40651702880859 9.844316482543945 22.29318618774414 7.156496047973633 20.2716064453125 5.134906768798828 C 18.2500171661377 3.113327026367188 15.56219673156738 1.999996185302734 12.70325660705566 1.999996185302734 M 12.70325660705566 -3.814697265625e-06 C 19.71906661987305 -3.814697265625e-06 25.40651702880859 5.687446594238281 25.40651702880859 12.70325660705566 C 25.40651702880859 19.71906661987305 19.71906661987305 25.40651702880859 12.70325660705566 25.40651702880859 C 5.687446594238281 25.40651702880859 -3.814697265625e-06 19.71906661987305 -3.814697265625e-06 12.70325660705566 C -3.814697265625e-06 5.687446594238281 5.687446594238281 -3.814697265625e-06 12.70325660705566 -3.814697265625e-06 Z",stroke:"none",fill:"#fff"})]}),Object(b.jsxs)("g",{id:"Polygon_1","data-name":"Polygon 1",transform:"translate(6.001 12.353) rotate(-150)",fill:"#fff",children:[Object(b.jsx)("path",{d:"M 4.929044723510742 3.619362831115723 L 2.000004529953003 3.619362831115723 L 3.464524507522583 1.666669487953186 L 4.929044723510742 3.619362831115723 Z",stroke:"none"}),Object(b.jsx)("path",{d:"M 3.464524507522583 2.86102294921875e-06 L 6.929044723510742 4.619362831115723 L 4.291534423828125e-06 4.619362831115723 L 3.464524507522583 2.86102294921875e-06 Z",stroke:"none",fill:"#fff"})]}),Object(b.jsxs)("g",{id:"Rectangle_4","data-name":"Rectangle 4",transform:"translate(0 11.86) rotate(-22)",fill:"#336cf9",stroke:"#336cf9",strokeWidth:"1",children:[Object(b.jsx)("rect",{width:"6.929",height:"4.619",stroke:"none"}),Object(b.jsx)("rect",{x:"0.5",y:"0.5",width:"5.929",height:"3.619",fill:"none"})]}),Object(b.jsxs)("g",{id:"Group_5","data-name":"Group 5",transform:"translate(15.704 4.888)",children:[Object(b.jsx)("line",{id:"Line_3","data-name":"Line 3",y2:"9.239",transform:"translate(0 0)",fill:"none",stroke:"#fff",strokeWidth:"2"}),Object(b.jsx)("line",{id:"Line_4","data-name":"Line 4",x2:"6.929",y2:"2.31",transform:"translate(0 9.239)",fill:"none",stroke:"#fff",strokeWidth:"2"})]})]})}),"My Shop"]})}):Object(b.jsx)("li",{className:"trans ".concat(s.pathname.startsWith("/account/orders")?"active":void 0),children:Object(b.jsxs)(o.b,{to:"/account/orders/current",children:[Object(b.jsx)("div",{className:"icon",children:Object(b.jsxs)("svg",{id:"Group_283","data-name":"Group 283",xmlns:"http://www.w3.org/2000/svg",width:"28.407",height:"25.407",viewBox:"0 0 28.407 25.407",children:[Object(b.jsxs)("g",{id:"Path_4","data-name":"Path 4",transform:"translate(3)",fill:"none",children:[Object(b.jsx)("path",{d:"M12.7,0A12.7,12.7,0,1,1,0,12.7,12.7,12.7,0,0,1,12.7,0Z",stroke:"none"}),Object(b.jsx)("path",{d:"M 12.70325660705566 1.999996185302734 C 9.844316482543945 1.999996185302734 7.156496047973633 3.113327026367188 5.134906768798828 5.134906768798828 C 3.113327026367188 7.156496047973633 1.999996185302734 9.844316482543945 1.999996185302734 12.70325660705566 C 1.999996185302734 15.56219673156738 3.113327026367188 18.2500171661377 5.134906768798828 20.2716064453125 C 7.156496047973633 22.29318618774414 9.844316482543945 23.40651702880859 12.70325660705566 23.40651702880859 C 15.56219673156738 23.40651702880859 18.2500171661377 22.29318618774414 20.2716064453125 20.2716064453125 C 22.29318618774414 18.2500171661377 23.40651702880859 15.56219673156738 23.40651702880859 12.70325660705566 C 23.40651702880859 9.844316482543945 22.29318618774414 7.156496047973633 20.2716064453125 5.134906768798828 C 18.2500171661377 3.113327026367188 15.56219673156738 1.999996185302734 12.70325660705566 1.999996185302734 M 12.70325660705566 -3.814697265625e-06 C 19.71906661987305 -3.814697265625e-06 25.40651702880859 5.687446594238281 25.40651702880859 12.70325660705566 C 25.40651702880859 19.71906661987305 19.71906661987305 25.40651702880859 12.70325660705566 25.40651702880859 C 5.687446594238281 25.40651702880859 -3.814697265625e-06 19.71906661987305 -3.814697265625e-06 12.70325660705566 C -3.814697265625e-06 5.687446594238281 5.687446594238281 -3.814697265625e-06 12.70325660705566 -3.814697265625e-06 Z",stroke:"none",fill:"#fff"})]}),Object(b.jsxs)("g",{id:"Polygon_1","data-name":"Polygon 1",transform:"translate(6.001 12.353) rotate(-150)",fill:"#fff",children:[Object(b.jsx)("path",{d:"M 4.929044723510742 3.619362831115723 L 2.000004529953003 3.619362831115723 L 3.464524507522583 1.666669487953186 L 4.929044723510742 3.619362831115723 Z",stroke:"none"}),Object(b.jsx)("path",{d:"M 3.464524507522583 2.86102294921875e-06 L 6.929044723510742 4.619362831115723 L 4.291534423828125e-06 4.619362831115723 L 3.464524507522583 2.86102294921875e-06 Z",stroke:"none",fill:"#fff"})]}),Object(b.jsxs)("g",{id:"Rectangle_4","data-name":"Rectangle 4",transform:"translate(0 11.86) rotate(-22)",fill:"#336cf9",stroke:"#336cf9",strokeWidth:"1",children:[Object(b.jsx)("rect",{width:"6.929",height:"4.619",stroke:"none"}),Object(b.jsx)("rect",{x:"0.5",y:"0.5",width:"5.929",height:"3.619",fill:"none"})]}),Object(b.jsxs)("g",{id:"Group_5","data-name":"Group 5",transform:"translate(15.704 4.888)",children:[Object(b.jsx)("line",{id:"Line_3","data-name":"Line 3",y2:"9.239",transform:"translate(0 0)",fill:"none",stroke:"#fff",strokeWidth:"2"}),Object(b.jsx)("line",{id:"Line_4","data-name":"Line 4",x2:"6.929",y2:"2.31",transform:"translate(0 9.239)",fill:"none",stroke:"#fff",strokeWidth:"2"})]})]})}),"My Orders"]})})]})]})}},54:function(e,t,n){},55:function(e,t,n){},7:function(e,t,n){"use strict";n.r(t),n.d(t,"Modal",(function(){return o})),n.d(t,"Confirm",(function(){return j}));var c=n(4),s=n(1),a=n(26),r=n.n(a),i=n(2),l=n(0),o=Object(s.forwardRef)((function(e,t){var n=e.containerClass,r=e.open,o=e.setOpen,j=e.children,d=e.className,u=e.onBackdropClick,b=e.backdropClass,h=e.style,O=e.head,x=e.label;return Object(s.useEffect)((function(){if(n){var e=document.querySelector("#portal");return e.classList.add(n),function(){return e.classList.remove(n)}}})),r?Object(a.createPortal)(Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("div",{className:"modalBackdrop ".concat(b),onClick:function(e){e.stopPropagation(),null===u||void 0===u||u()}}),Object(l.jsxs)("div",{style:Object(c.a)({},h),ref:t,className:"modal ".concat(d||""),children:[O&&Object(l.jsxs)("div",{className:"head",children:[Object(l.jsx)("p",{className:"modalName",children:x}),Object(l.jsx)("button",{onClick:function(){return null===o||void 0===o?void 0:o(!1)},children:Object(l.jsx)(i.J,{})})]}),j]})]}),document.querySelector("#portal")):null})),j=function(e){var t=e.className,n=e.label,c=e.question,s=e.callback,a=function(){return r.a.render(Object(l.jsx)(l.Fragment,{}),document.querySelector("#confirm"))},o=function(){return a()};r.a.render(Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("div",{className:"modalBackdrop"}),Object(l.jsxs)("div",{className:"modal confirm ".concat(t||""),children:[Object(l.jsxs)("div",{className:"head",children:[Object(l.jsx)("p",{className:"modalName",children:n}),Object(l.jsx)("button",{onClick:o,children:Object(l.jsx)(i.J,{})})]}),Object(l.jsxs)("div",{className:"content",children:[Object(l.jsx)("p",{className:"question",children:c}),Object(l.jsxs)("div",{className:"actions",children:[Object(l.jsx)("button",{className:"yes",onClick:function(){s(),a()},children:"Confirm"}),Object(l.jsx)("button",{className:"no",onClick:o,children:"Decline"})]})]})]})]}),document.querySelector("#confirm"))}},79:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var c=n(14),s=n.n(c),a=n(16),r=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function i(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=window.atob(t),c=new Uint8Array(n.length),s=0;s<n.length;++s)c[s]=n.charCodeAt(s);return c}function l(e){if("serviceWorker"in navigator){var t="/service-worker.js";r?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var c=n.headers.get("content-type");404===n.status||null!=c&&-1===c.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):o(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then(function(){var e=Object(a.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:i("BOAary6p08dAK6T2GSg0zRGrWKk5qs-sz_-f62My0JXMPG52fqQfzzJlePyF0snUvrdeEg4RSWOVGhrtVc1v3Lo")}).then((function(e){fetch("/api/subscribe",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())):o(t,e)}else console.log("serviceWorker is no supported")}function o(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)),navigator.serviceWorker.ready.then(function(){var e=Object(a.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:i("BOAary6p08dAK6T2GSg0zRGrWKk5qs-sz_-f62My0JXMPG52fqQfzzJlePyF0snUvrdeEg4RSWOVGhrtVc1v3Lo")}).then((function(e){fetch("/api/subscribe",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}},8:function(e,t,n){"use strict";n.d(t,"e",(function(){return d})),n.d(t,"d",(function(){return u})),n.d(t,"c",(function(){return b})),n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return O}));var c=n(13),s=n(4),a=n(3),r=n(1),i=n(6),l=n(2),o=n(74),j=n(0),d=Object(o.io)(),u=Object(r.createContext)(),b=function(e){var t=e.children,n=window,c=n.gtag,s=n.ga,i=Object(r.useState)(null),o=Object(a.a)(i,2),d=o[0],b=o[1],h=Object(r.useState)(!1),O=Object(a.a)(h,2),x=O[0],f=O[1],m=Object(r.useState)(l.p.get("userType")||""),p=Object(a.a)(m,2),v=p[0],g=p[1],y=Object(r.useState)(JSON.parse(l.p.get("localCart"))||[]),C=Object(a.a)(y,2),N=C[0],w=C[1],k=Object(r.useState)(JSON.parse(l.p.get("localSellerCart"))||[]),S=Object(a.a)(k,2),_=S[0],M=S[1],P=Object(r.useState)({}),L=Object(a.a)(P,2),F=L[0],A=L[1];return Object(r.useEffect)((function(){l.p.set("localCart",JSON.stringify(N))}),[N]),Object(r.useEffect)((function(){l.p.set("localSellerCart",JSON.stringify(_))}),[_]),Object(r.useEffect)((function(){"seller"===v?document.body.style.setProperty("--blue","#2598b6"):document.body.style.setProperty("--blue","#3b2ab4"),l.p.set("userType",v)}),[v]),Object(r.useEffect)((function(){fetch("/api/siteConfig").then((function(e){return e.json()})).then((function(e){"ok"===e.code&&A(e.config||{})})).catch((function(e){console.log(e)}))}),[]),Object(r.useEffect)((function(){d&&(c("set",{user_id:d._id}),s("set","userId",d._id))}),[d]),Object(j.jsx)(u.Provider,{value:{user:d,setUser:b,isAuthenticated:x,setIsAuthenticated:f,cart:N,setCart:w,sellerCart:_,setSellerCart:M,userType:v,setUserType:g,config:F},children:t})},h=Object(r.createContext)(),O=function(e){var t=e.children,n=Object(i.g)(),l=Object(r.useContext)(u).user,o=Object(r.useState)(!0),b=Object(a.a)(o,2),O=(b[0],b[1]),x=Object(r.useState)([]),f=Object(a.a)(x,2),m=f[0],p=f[1],v=Object(r.useState)([]),g=Object(a.a)(v,2),y=g[0],C=g[1],N=Object(r.useState)([]),w=Object(a.a)(N,2),k=w[0],S=w[1],_=Object(r.useState)(0),M=Object(a.a)(_,2),P=M[0],L=M[1],F=Object(r.useRef)(!1);return Object(r.useEffect)((function(){l&&0===k.length&&fetch("/api/getChat").then((function(e){return e.json()})).then((function(e){S((function(){return e.map((function(e){var t,n=(null===(t=l.blockList)||void 0===t?void 0:t.some((function(t){return t===e.client._id})))?"blocked":e.clientBlock?"blockedByClient":"";return Object(s.a)(Object(s.a)(Object(s.a)({},e),e.client.phone&&{status:n}),{},{unread:e.messages.filter((function(t){return new Date(t.createdAt)>new Date(e.lastSeen)})).length})})).sort((function(e,t){var n,c;return new Date(null===(n=e.messages[e.messages.length-1])||void 0===n?void 0:n.createdAt)>new Date(null===(c=t.messages[t.messages.length-1])||void 0===c?void 0:c.createdAt)?-1:1}))}))})).catch((function(e){console.log(e)}))}),[l]),Object(r.useEffect)((function(){var e=function(e){return O(!0)},t=function(e){return O(!1)};return window.addEventListener("focus",e),window.addEventListener("blur",t),function(){window.removeEventListener("focus",e),window.removeEventListener("blur",t)}}),[]),Object(r.useEffect)((function(){!F.current&&l&&(d.on("connect",(function(){console.log("connected")})),d.on("disconnect",(function(){console.log("disconnected from socket")})),d.on("connectedToRoom",(function(e){var t=e.rooms,n=e.newChat,c=e.client,a=e.clientRoom_id;n&&S((function(e){return e.map((function(e){return e.client._id===c?Object(s.a)(Object(s.a)({},e),{},{_id:a}):e}))})),C(t)})),d.on("messageToUser",(function(e){var t=O&&n.location.pathname.replace("/account/deals/","")===e.from;e.from&&(S((function(t){return t.map((function(t){var n=[].concat(Object(c.a)(t.messages),[Object(s.a)(Object(s.a)({},e),{},{createdAt:new Date,updatedAt:new Date})]);if(e.from===(null===l||void 0===l?void 0:l._id)){if(t.client._id===e.to)return Object(s.a)(Object(s.a)({},t),{},{lastSeen:(new Date).toISOString(),unread:null,messages:n})}else if(t.client._id===e.from)return Object(s.a)(Object(s.a)({},t),{},{messages:n,unread:n.filter((function(e){return new Date(e.createdAt)>new Date(t.lastSeen)})).length});return t})).sort((function(e,t){var n,c;return new Date(null===(n=e.messages[e.messages.length-1])||void 0===n?void 0:n.createdAt)>new Date(null===(c=t.messages[t.messages.length-1])||void 0===c?void 0:c.createdAt)?-1:1}))})),t||d.emit("clientAway",e))})),d.on("newChat",(function(e){S((function(t){return[Object(s.a)({},e.chat)].concat(Object(c.a)(t.filter((function(t){var n;return t._id!==(null===(n=e.chat)||void 0===n?void 0:n._id)}))))}))})),F.current=!0)}),[l]),Object(r.useEffect)((function(){k.map((function(e){return e._id})).join("")!==m.join("")&&(d.emit("joinRooms",{rooms:k.map((function(e){return e._id}))}),p(k.map((function(e){return e._id}))))}),[k]),Object(r.useEffect)((function(){L(k.reduce((function(e,t){return e+t.unread}),0))}),[k]),Object(j.jsx)(h.Provider,{value:{contacts:k,setContacts:S,unread:P,rooms:y,setRooms:C},children:t})}},85:function(e,t,n){},96:function(e,t,n){},98:function(e,t,n){},99:function(e,t,n){}},[[128,4,5]]]);
//# sourceMappingURL=main.c474b135.chunk.js.map