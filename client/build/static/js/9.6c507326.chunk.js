(this["webpackJsonpdeliveryPay-react"]=this["webpackJsonpdeliveryPay-react"]||[]).push([[9],{163:function(e,t,c){"use strict";c.r(t),c.d(t,"FullOrder",(function(){return p}));var n=c(23),s=c.n(n),r=c(28),i=c(13),l=c(10),j=c(3),o=c(1),a=c(9),d=c(4),u=c(2),b=c(12),O=c(17),h=(c(160),c(0)),x=Object(o.lazy)((function(){return Promise.all([c.e(0),c.e(5)]).then(c.bind(null,158)).then((function(e){return{default:e.MilestoneForm}}))})),f=function(e){var t=e.order,c=e.setOrders,n=e.selectAll,s=e.setBatch,r=e.batch,x=Object(o.useRef)(),f=Object(o.useRef)(),p=Object(d.g)(),m=(Object(o.useContext)(b.d).user,Object(o.useState)(n||!1)),v=Object(j.a)(m,2),g=v[0],y=v[1],k=Object(o.useState)(!1),C=Object(j.a)(k,2),N=(C[0],C[1],Object(o.useState)(!1)),S=Object(j.a)(N,2),M=S[0],F=S[1],D=function(){fetch("/api/declineOrder",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({_id:t._id})}).then((function(e){return e.json()})).then((function(e){"ok"===e.code?c((function(c){return c.map((function(c){var n;return c._id===t._id?Object(l.a)(Object(l.a)({},c),{},{status:null===(n=e.order)||void 0===n?void 0:n.status}):c}))})):F(Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("button",{onClick:function(){return F(null)},children:"Okay"}),Object(h.jsxs)("div",{children:[Object(h.jsx)(a.i,{}),Object(h.jsx)("h4",{children:"Could not cancel order. Please try again."})]})]}))})).catch((function(e){console.log(e),F(Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("button",{onClick:function(){return F(null)},children:"Okay"}),Object(h.jsxs)("div",{children:[Object(h.jsx)(a.i,{}),Object(h.jsx)("h4",{children:"Could not cancel order. Make sure you're online"})]})]}))}))},_=function(){fetch("/api/acceptOrder",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({_id:t._id})}).then((function(e){return e.json()})).then((function(e){"ok"===e.code?c((function(c){return c.map((function(c){var n;return c._id===t._id?Object(l.a)(Object(l.a)({},c),{},{status:null===(n=e.order)||void 0===n?void 0:n.status}):c}))})):F(Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("button",{onClick:function(){return F(null)},children:"Okay"}),Object(h.jsxs)("div",{children:[Object(h.jsx)(a.i,{}),Object(h.jsx)("h4",{children:"Orders does not exist."})]})]}))})).catch((function(e){console.log(e),F(Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("button",{onClick:function(){return F(null)},children:"Okay"}),Object(h.jsxs)("div",{children:[Object(h.jsx)(a.i,{}),Object(h.jsx)("h4",{children:"Could not accept order. Make sure you're online."})]})]}))}))},Y=function(){fetch("/api/requestCancellation",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({_id:t._id})}).then((function(e){return e.json()})).then((function(e){"ok"===e.code?c((function(c){return c.map((function(c){var n;return c._id===t._id?Object(l.a)(Object(l.a)({},c),{},{status:null===(n=e.order)||void 0===n?void 0:n.status}):c}))})):F(Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("button",{onClick:function(){return F(null)},children:"Okay"}),Object(h.jsxs)("div",{children:[Object(h.jsx)(a.i,{}),Object(h.jsx)("h4",{children:"Could not cancel order. Please try again."})]})]}))})).catch((function(e){console.log(e),F(Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("button",{onClick:function(){return F(null)},children:"Okay"}),Object(h.jsxs)("div",{children:[Object(h.jsx)(a.i,{}),Object(h.jsx)("h4",{children:"Could not cancel order. Make sure you're online"})]})]}))}))};return Object(o.useEffect)((function(){y(n)}),[n]),Object(o.useEffect)((function(){s(g?function(e){return[].concat(Object(i.a)(e),[t._id])}:function(e){return e.filter((function(e){return e!==t._id}))})}),[g]),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("tr",{className:"order ".concat(g?"selected":""),onClick:function(e){e.nativeEvent.path.includes(x.current)||e.nativeEvent.path.includes(f.current)||r.length>0||p.push("/account/myShop/orders/".concat(t._id))},children:[Object(h.jsx)("td",{className:"date",children:Object(h.jsx)(a.s,{format:"DD MMM YYYY, hh:mm a",children:t.createdAt})}),Object(h.jsx)("td",{className:"user",children:Object(h.jsx)(a.G,{user:t.buyer})}),Object(h.jsx)("td",{children:t.products.reduce((function(e,t){return e+t.qty}),0)}),Object(h.jsx)("td",{children:t.refundable||"N/A"}),Object(h.jsx)("td",{children:t.milestones.length||"N/A"}),Object(h.jsx)("td",{children:t.status}),Object(h.jsxs)("td",{children:["\u20b9",t.total]}),Object(h.jsx)("td",{ref:x,children:0===r.length&&Object(h.jsxs)(a.a,{icon:Object(h.jsx)(a.g,{}),children:[Object(h.jsx)(u.b,{to:"/account/myShopping/orders/".concat(t._id),children:"View Detail"}),"pending"===t.status&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(u.b,{to:"#",onClick:function(e){Object(O.Confirm)({label:"Accept Order",question:"You sure want to accept this order?",callback:_})},children:"Accept order"}),Object(h.jsx)(u.b,{to:"#",onClick:function(e){Object(O.Confirm)({label:"Order Cancellation",question:"You sure want to cancel this order?",callback:D})},children:"Cancel order"})]}),"approved"===t.status&&Object(h.jsx)(u.b,{to:"#",onClick:function(e){Object(O.Confirm)({label:"Order Cancellation",question:"You sure want to request cancellation for this order?",callback:Y})},children:"Request Cancellation"})]})})]}),Object(h.jsx)(O.Modal,{className:"msg",open:M,children:M})]})},p=function(e){var t,c=e.history,n=e.match,s=Object(o.useContext)(b.d),r=s.user,d=s.userType,f=Object(o.useState)(null),p=Object(j.a)(f,2),v=p[0],g=p[1],y=Object(o.useState)(null),k=Object(j.a)(y,2),C=k[0],N=k[1],S=Object(o.useState)((null===(t=r.shopInfo)||void 0===t?void 0:t.shippingCost)||0),M=Object(j.a)(S,2),F=(M[0],M[1]),D=Object(o.useState)(null),_=Object(j.a)(D,2),Y=(_[0],_[1],Object(o.useState)("")),A=Object(j.a)(Y,2),T=(A[0],A[1],Object(o.useState)(!1)),P=Object(j.a)(T,2),q=P[0],w=P[1],H=Object(o.useState)(!1),J=Object(j.a)(H,2),R=J[0],E=J[1],B=(Object(o.useRef)(),function(){fetch("/api/acceptOrder",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({_id:C._id})}).then((function(e){return e.json()})).then((function(e){"ok"===e.code?(N((function(e){return Object(l.a)(Object(l.a)({},e),{},{status:"approved"})})),g(Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("button",{onClick:function(){return g(null)},children:"Okay"}),Object(h.jsxs)("div",{children:[Object(h.jsx)(a.C,{}),Object(h.jsx)("h4",{children:"Order approved."})]})]}))):g(Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("button",{onClick:function(){return g(null)},children:"Okay"}),Object(h.jsxs)("div",{children:[Object(h.jsx)(a.i,{}),Object(h.jsx)("h4",{children:"Orders does not exist."})]})]}))})).catch((function(e){console.log(e),g(Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("button",{onClick:function(){return g(null)},children:"Okay"}),Object(h.jsxs)("div",{children:[Object(h.jsx)(a.i,{}),Object(h.jsx)("h4",{children:"Could not accept order. Make sure you're online."})]})]}))}))}),U=function(){fetch("/api/declineOrder",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({_id:C._id})}).then((function(e){return e.json()})).then((function(e){"ok"===e.code?(N((function(e){return Object(l.a)(Object(l.a)({},e),{},{status:"declined"})})),g(Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("button",{onClick:function(){return g(null)},children:"Okay"}),Object(h.jsxs)("div",{children:[Object(h.jsx)(a.C,{}),Object(h.jsx)("h4",{children:"Order declined."})]})]}))):g(Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("button",{onClick:function(){return g(null)},children:"Okay"}),Object(h.jsxs)("div",{children:[Object(h.jsx)(a.i,{}),Object(h.jsx)("h4",{children:"Orders does not exist."})]})]}))})).catch((function(e){console.log(e),g(Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("button",{onClick:function(){return g(null)},children:"Okay"}),Object(h.jsxs)("div",{children:[Object(h.jsx)(a.i,{}),Object(h.jsx)("h4",{children:"Could not decline order. Make sure you're online."})]})]}))}))},I=function(){fetch("/api/updateOrder",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({_id:C._id,status:"shipped"})}).then((function(e){return e.json()})).then((function(e){"ok"===e.code?(N((function(e){return Object(l.a)(Object(l.a)({},C),{},{status:"shipped"})})),g(Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("button",{onClick:function(){return g(null)},children:"Okay"}),Object(h.jsxs)("div",{children:[Object(h.jsx)(a.C,{}),Object(h.jsx)("h4",{children:"Order has been updated. Don't forget to upload proof of shipping below."})]})]}))):g(Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("button",{onClick:function(){return g(null)},children:"Okay"}),Object(h.jsxs)("div",{children:[Object(h.jsx)(a.i,{}),Object(h.jsx)("h4",{children:"Order could not be updated. Try again."})]})]}))})).catch((function(e){console.log(e),g(Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("button",{onClick:function(){return g(null)},children:"Okay"}),Object(h.jsxs)("div",{children:[Object(h.jsx)(a.i,{}),Object(h.jsx)("h4",{children:"Order could not be updated. Make sure you're online."})]})]}))}))},L=function(){fetch("/api/updateOrder",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({_id:C._id,status:"delivered"})}).then((function(e){return e.json()})).then((function(e){"ok"===e.code?(N((function(e){return Object(l.a)(Object(l.a)({},C),{},{status:"delivered"})})),g(Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("button",{onClick:function(){return g(null)},children:"Okay"}),Object(h.jsxs)("div",{children:[Object(h.jsx)(a.C,{}),Object(h.jsx)("h4",{children:"Order has been updated. Don't forget to upload proof of delivery below."})]})]}))):g(Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("button",{onClick:function(){return g(null)},children:"Okay"}),Object(h.jsxs)("div",{children:[Object(h.jsx)(a.i,{}),Object(h.jsx)("h4",{children:"Order could not be updated. Try again."})]})]}))})).catch((function(e){console.log(e),g(Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("button",{onClick:function(){return g(null)},children:"Okay"}),Object(h.jsxs)("div",{children:[Object(h.jsx)(a.i,{}),Object(h.jsx)("h4",{children:"Order could not be updated. Make sure you're online."})]})]}))}))};if(Object(o.useEffect)((function(){fetch("/api/singleOrder?_id=".concat(n.params._id)).then((function(e){return e.json()})).then((function(e){"ok"===e.code?(N(e.order),F(e.shippingCost)):g(Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("button",{onClick:function(){return g(null)},children:"Okay"}),Object(h.jsxs)("div",{children:[Object(h.jsx)(a.i,{}),Object(h.jsx)("h4",{children:"Orders does not exist."})]})]}))})).catch((function(e){console.log(e),g(Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("button",{onClick:function(){return g(null)},children:"Okay"}),Object(h.jsxs)("div",{children:[Object(h.jsx)(a.i,{}),Object(h.jsx)("h4",{children:"Could not get order. Make sure you're online."})]})]}))}))}),[]),C){var K,G,V,Q,W,Z=C.products.reduce((function(e,t){return(e+Object(a.K)({product:t.product,gst:!0})*t.qty).fix()}),0),z="percent"===(null===(K=C.coupon)||void 0===K?void 0:K.type)&&Math.min(Z/100*C.coupon.amount,C.coupon.maxDiscount)||"flat"===(null===(G=C.coupon)||void 0===G?void 0:G.type)&&(null===(V=C.coupon)||void 0===V?void 0:V.amount)||0;((Z-z+C.shippingCost)/100*C.fee).fix();return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("div",{className:"actions",children:[Object(h.jsxs)(u.b,{to:"/account/".concat("seller"===d?"myShop":"myShopping","/orders"),className:"back",children:[Object(h.jsx)(a.c,{}),"Back"]}),"approved"===C.status&&Object(h.jsx)("button",{onClick:function(){return Object(O.Confirm)({label:"Mark Order as Shipped",question:"Did you ship the order?",callback:I})},children:"Mark as Shipped"}),"shipped"===C.status&&Object(h.jsx)("button",{onClick:function(){return Object(O.Confirm)({label:"Mark Order as Delivered",question:"Has the order been delivered?",callback:L})},children:"Mark as Delivered"}),"pending"===C.status&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("button",{onClick:function(){Object(O.Confirm)({lable:"Accept Order",question:Object(h.jsx)(h.Fragment,{children:"You sure want to accept this order?"}),callback:B})},children:"Accept"}),Object(h.jsx)("button",{onClick:function(){return Object(O.Confirm)({label:"Decline Order",question:"You sure want to decline this order?",callback:U})},children:"Decline"})]})]}),Object(h.jsxs)("div",{className:"singleOrder",children:[Object(h.jsxs)("div",{className:"summery",children:[Object(h.jsx)("h3",{children:"Order Summery"}),Object(h.jsxs)("ul",{children:[Object(h.jsxs)("li",{children:[Object(h.jsx)("label",{children:"Buyer"}),Object(h.jsx)(a.G,{user:C.buyer})]}),Object(h.jsxs)("li",{children:[Object(h.jsx)("label",{children:"Order ID"}),C._id]}),Object(h.jsxs)("li",{children:[Object(h.jsx)("label",{children:"Status"}),C.status]}),Object(h.jsxs)("li",{children:[Object(h.jsx)("label",{children:"Submitted at"}),Object(h.jsx)(a.s,{format:"DD MMM YYYY, hh:mma",children:C.createdAt})]}),Object(h.jsx)("li",{}),Object(h.jsxs)("li",{className:"devide",children:[Object(h.jsx)("label",{children:"Delivery Address"}),Object(h.jsx)("span",{})]}),Object.entries(C.deliveryDetail).map((function(e,t){var c=Object(j.a)(e,2),n=c[0],s=c[1];return"deliveryWithin"===n?Object(h.jsxs)("li",{children:[Object(h.jsx)("label",{children:"Delivery within"}),C.deliveryDetail.deliveryWithin," days"]},t):Object(h.jsxs)("li",{children:[Object(h.jsx)("label",{children:n}),s]},t)}))]})]}),Object(h.jsxs)("div",{className:"products",children:[Object(h.jsx)("h3",{children:"Products"}),Object(h.jsx)("ul",{children:C.products.map((function(e,t){var c=e.product,n=e.qty,s=e.available;return Object(h.jsxs)("li",{children:[Object(h.jsx)(a.n,{src:c.images[0]||"/open_box.png"}),Object(h.jsxs)("div",{className:"detail",children:[Object(h.jsx)("p",{children:c.name}),Object(h.jsxs)("p",{className:"qty",children:["QTY: ",n]}),"pending"===C.status&&Object(h.jsxs)("p",{className:"available",children:["Available: ",s.toString()]})]}),Object(h.jsxs)("div",{className:"price",children:[Object(h.jsxs)("span",{children:[Object(a.K)({product:c,gst:!0})," x ",n]}),"\u20b9",(Object(a.K)({product:c,gst:!0})*n).fix()]})]},t)}))}),Object(h.jsxs)("div",{className:"total",children:[Object(h.jsxs)("div",{className:"data",children:[Object(h.jsx)("label",{children:"Total"}),"\u20b9",Z]}),C.coupon&&Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)("div",{className:"data",children:[Object(h.jsxs)("label",{children:["Coupon Code ",C.coupon.code,Object(h.jsx)("br",{}),"Discount"," ","percent"===C.coupon.type?Object(h.jsxs)(h.Fragment,{children:[C.coupon.amount,"% (Upto \u20b9",C.coupon.maxDiscount,")"]}):Object(h.jsx)(h.Fragment,{children:"flat"})]}),Object(h.jsxs)("span",{children:["\u20b9",z]})]})}),Object(h.jsxs)("div",{className:"data",children:[Object(h.jsx)("label",{children:"Shipping"}),"\u20b9",C.shippingCost]}),Object(h.jsx)("hr",{}),Object(h.jsxs)("div",{className:"data",children:[Object(h.jsxs)("label",{children:["Delivery Pay fee ",C.fee,"%"]}),"\u20b9",(C.total-C.total/(C.fee+100)*100).fix()]}),Object(h.jsx)("hr",{}),Object(h.jsxs)("div",{className:"data",children:[Object(h.jsx)("label",{children:"Grand Total"}),"\u20b9",C.total.fix()]}),Object(h.jsx)("hr",{}),Object(h.jsxs)("div",{className:"data",children:[Object(h.jsx)("label",{children:"You'll recieve"}),"\u20b9",(C.total/(C.fee+100)*100).fix()]})]})]}),Object(h.jsxs)("div",{className:"milestones",children:[Object(h.jsx)("h3",{children:"Milestones"}),Object(h.jsx)("p",{className:"subtitle",children:"Click to view milestone detail."}),Object(h.jsxs)("table",{children:[Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:"Date"}),Object(h.jsx)("td",{children:"Descrption"}),Object(h.jsx)("td",{children:"Amount"}),Object(h.jsx)("td",{children:"Status"})]})}),Object(h.jsxs)("tbody",{children:[C.milestones.map((function(e){return Object(h.jsxs)("tr",{onClick:function(){return c.push("/account/hold?q=".concat(e._id))},children:[Object(h.jsx)("td",{children:Object(h.jsx)(a.s,{format:"DD MMM YYYY, hh:mma",children:e.createdAt})}),Object(h.jsx)("td",{children:e.dscr}),Object(h.jsxs)("td",{children:["\u20b9",e.amount]}),Object(h.jsx)("td",{children:e.status})]},e._id)})),0===C.milestones.length&&Object(h.jsx)("tr",{className:"placeholdert",children:Object(h.jsx)("td",{children:"Nothing yet."})})]})]})]}),Object(h.jsxs)("div",{className:"delivery",children:[Object(h.jsxs)("h3",{children:["Proof of delivery",("approved"===C.status||"shipped"===C.status)&&Object(h.jsx)("button",{onClick:function(){return E(!0)},children:"Upload proof of delivery"})]}),(null===(Q=C.files)||void 0===Q?void 0:Q.length)>0?Object(h.jsx)("div",{className:"thumbs",children:Object(h.jsx)(a.q,{links:C.files})}):Object(h.jsx)(h.Fragment,{children:"No files added."})]}),Object(h.jsxs)("section",{className:"terms",children:[Object(h.jsx)("h3",{children:"Return Policy Terms"}),Object(h.jsx)("ul",{children:null===(W=C.terms)||void 0===W?void 0:W.map((function(e,t){return Object(h.jsxs)("li",{children:[e," "]},t)}))})]})]}),Object(h.jsx)(O.Modal,{head:!0,label:"Create Milestone",setOpen:w,className:"milestoneRequest",open:q,children:Object(h.jsx)(x,{action:"request",definedAmount:C.total,client:C.buyer,order:C._id,onSuccess:function(e){w(!1),g(Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("button",{onClick:function(){return g(null)},children:"Okay"}),Object(h.jsxs)("div",{children:[Object(h.jsx)(a.C,{}),Object(h.jsxs)("h4",{className:"amount",children:["\u20b9",null===e||void 0===e?void 0:e.amount]}),Object(h.jsx)("h4",{children:"Milestone has been requested"})]}),Object(h.jsx)(u.b,{to:"/account/hold",onClick:function(){return g(null)},children:"Check your Delivery pay Hold"})]})),N((function(t){return Object(l.a)(Object(l.a)({},t),{},{milestones:[].concat(Object(i.a)(t.milestones),[e])})}))}})}),Object(h.jsx)(O.Modal,{head:!0,label:"Upload proof of shipping & delivery",setOpen:E,open:R,className:"fileUpload",children:Object(h.jsx)(m,{order:C,onSuccess:function(e){E(!1),N((function(t){return Object(l.a)(Object(l.a)({},t),{},{files:e.files})}))}})}),Object(h.jsx)(O.Modal,{className:"msg",open:v,children:v})]})}return Object(h.jsx)(h.Fragment,{children:"Loading"})},m=function(e){var t=e.order,c=e.onSuccess,n=Object(o.useState)(!1),i=Object(j.a)(n,2),l=i[0],d=i[1],u=Object(o.useState)([]),b=Object(j.a)(u,2),x=b[0],f=b[1],p=Object(o.useState)(null),m=Object(j.a)(p,2),v=m[0],g=m[1],y=function(){var e=Object(r.a)(s.a.mark((function e(){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d(!0),!x.length){e.next=7;break}return e.next=4,Object(a.F)({files:x,setMsg:g});case 4:e.t0=e.sent,e.next=8;break;case 7:e.t0=[];case 8:n=e.t0,fetch("/api/updateOrder",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({_id:t._id,files:n})}).then((function(e){return e.json()})).then((function(e){d(!1),"ok"===e.code?null===c||void 0===c||c(e.order):g(Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("button",{onClick:function(){return g(null)},children:"Okay"}),Object(h.jsxs)("div",{children:[Object(h.jsx)(a.i,{}),Object(h.jsx)("h4",{children:"Could not upload files. Try again."})]})]}))})).catch((function(e){d(!1),console.log(e),g(Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("button",{onClick:function(){return g(null)},children:"Okay"}),Object(h.jsxs)("div",{children:[Object(h.jsx)(a.i,{}),Object(h.jsx)("h4",{children:"Could not upload files. Make sure you're online."})]})]}))}));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("form",{onSubmit:function(e){e.preventDefault(),Object(O.Confirm)({title:"Upload Proof of Shipping & Delivery",question:Object(h.jsxs)(h.Fragment,{children:["You sure want to upload these files?",Object(h.jsx)("span",{className:"note",children:"Keep in mind these files can not be deleted later."})]}),callback:y})},children:[Object(h.jsxs)("section",{children:[Object(h.jsx)("label",{children:"Upload Images of the products, shipment reciept etc."}),Object(h.jsx)(a.k,{multiple:!0,accept:"image/*",required:!0,onChange:function(e){return f(e)}})]}),Object(h.jsx)("section",{className:"btns",children:Object(h.jsx)("button",{className:"submit",children:"Submit"})})]}),l&&Object(h.jsx)("div",{className:"spinnerContainer",children:Object(h.jsx)("div",{className:"spinner"})}),Object(h.jsx)(O.Modal,{className:"msg",open:v,children:v})]})};t.default=function(e){e.categories;var t=Object(o.useState)(0),c=Object(j.a)(t,2),n=c[0],s=c[1],r=Object(o.useState)(1),i=Object(j.a)(r,2),d=i[0],u=i[1],b=Object(o.useState)(20),x=Object(j.a)(b,2),p=x[0],m=x[1],v=Object(o.useState)(""),g=Object(j.a)(v,2),y=g[0],k=g[1],C=Object(o.useState)(""),N=Object(j.a)(C,2),S=N[0],M=N[1],F=Object(o.useState)({column:"createdAt",order:"dsc"}),D=Object(j.a)(F,2),_=D[0],Y=(D[1],Object(o.useState)(null)),A=Object(j.a)(Y,2),T=A[0],P=A[1],q=Object(o.useState)([]),w=Object(j.a)(q,2),H=w[0],J=w[1],R=Object(o.useState)(!1),E=Object(j.a)(R,2),B=E[0],U=E[1],I=Object(o.useState)([]),L=Object(j.a)(I,2),K=L[0],G=L[1],V=Object(o.useState)(null),Q=Object(j.a)(V,2),W=Q[0],Z=Q[1];return Object(o.useEffect)((function(){var e=Object(a.L)({time:null===T||void 0===T?void 0:T.startDate,format:"YYYY-MM-DD"}),t=Object(a.L)({time:null===T||void 0===T?void 0:T.endDate.setHours(24,0,0,0),format:"YYYY-MM-DD"});fetch("/api/getOrders?".concat(new URLSearchParams(Object(l.a)(Object(l.a)(Object(l.a)({user:"seller"},S&&{q:S}),{},{page:d,perPage:p,sort:_.column,order:_.order},T&&{dateFrom:e,dateTo:t}),y&&{status:y})))).then((function(e){return e.json()})).then((function(e){"ok"===e.code&&(J(e.orders),s(e.total))})).catch((function(e){console.log(e),Z(Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("button",{onClick:function(){return Z(null)},children:"Okay"}),Object(h.jsxs)("div",{children:[Object(h.jsx)(a.i,{}),Object(h.jsx)("h4",{children:"Could not get orders."})]})]}))}))}),[y,S,d,p,T]),Object(o.useEffect)((function(){B||G([])}),[B]),Object(o.useEffect)((function(){0===K.length&&U(!1)}),[K]),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{className:"benner",children:Object(h.jsx)("p",{children:"Order Management"})}),Object(h.jsxs)("div",{className:"filters",children:[Object(h.jsxs)("section",{children:[Object(h.jsx)("label",{children:"Total:"}),n]}),Object(h.jsxs)("section",{children:[Object(h.jsx)("label",{children:"Per Page:"}),Object(h.jsx)(a.h,{defaultValue:0,options:[{label:"20",value:20},{label:"30",value:30},{label:"50",value:50}],onChange:function(e){return m(e.value)}})]}),Object(h.jsxs)("section",{className:"search",children:[Object(h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"23",height:"23",viewBox:"0 0 23 23",children:Object(h.jsx)("path",{id:"Icon_ionic-ios-search","data-name":"Icon ionic-ios-search",d:"M27.23,25.828l-6.4-6.455a9.116,9.116,0,1,0-1.384,1.4L25.8,27.188a.985.985,0,0,0,1.39.036A.99.99,0,0,0,27.23,25.828ZM13.67,20.852a7.2,7.2,0,1,1,5.091-2.108A7.155,7.155,0,0,1,13.67,20.852Z",transform:"translate(-4.5 -4.493)",fill:"#707070",opacity:"0.74"})}),Object(h.jsx)("input",{value:S,onChange:function(e){return M(e.target.value)},placeholder:"Search for Buyer"}),S&&Object(h.jsx)("button",{onClick:function(){return M("")},children:Object(h.jsx)(a.H,{})})]}),Object(h.jsxs)("section",{className:"category",children:[Object(h.jsx)("label",{children:"Status:"}),Object(h.jsx)(a.h,{defaultValue:0,options:[{label:"All",value:""},{label:"Pending",value:"pending"},{label:"Approved",value:"approved"},{label:"Cancelled",value:"cancelled"},{label:"Hold",value:"Hold"},{label:"Shipped",value:"shipped"},{label:"Delivered",value:"delivered"},{label:"Refunded",value:"refunded"}],onChange:function(e){return k(e.value)}})]}),Object(h.jsx)("section",{className:"date",children:Object(h.jsx)(a.o,{dateRange:T,onChange:function(e){return P(e)}})})]}),K.length>0&&Object(h.jsx)("div",{className:"batchAction",children:Object(h.jsx)("button",{onClick:function(){return console.log("batch delete")},children:"Delete"})}),Object(h.jsxs)("table",{className:"table orders",children:[Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{className:"date",children:"Date"}),Object(h.jsx)("th",{children:"Buyer"}),Object(h.jsx)("th",{children:"QTY"}),Object(h.jsx)("th",{children:"Refundable"}),Object(h.jsx)("th",{children:"Milestone"}),Object(h.jsx)("th",{children:"Status"}),Object(h.jsx)("th",{children:"Total Price"}),Object(h.jsx)("th",{children:"Actions"})]})}),Object(h.jsxs)("tbody",{children:[H.map((function(e,t){return Object(h.jsx)(f,{order:e,setOrders:J,selectAll:B,setBatch:G,batch:K},t)})),0===H.length&&Object(h.jsx)("tr",{className:"placeholder",children:Object(h.jsx)("td",{children:"No product yet."})})]})]}),Object(h.jsx)(a.u,{total:n,btns:5,currentPage:d,perPage:p,setPage:u}),Object(h.jsx)(O.Modal,{className:"msg",open:W,children:W})]})}}}]);
//# sourceMappingURL=9.6c507326.chunk.js.map