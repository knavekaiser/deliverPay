{"version":3,"sources":["components/Profile.js","components/seller/OrderManagement.js","components/seller/RefundManagement.js","components/seller/CampaignManagement.js","components/seller/fbMarketplace.js","components/seller/MyShop.js","../node_modules/use-isomorphic-layout-effect/dist/use-isomorphic-layout-effect.browser.esm.js","../node_modules/use-latest/dist/use-latest.esm.js","../node_modules/use-composed-ref/dist/use-composed-ref.esm.js","../node_modules/react-textarea-autosize/dist/react-textarea-autosize.browser.esm.js","../node_modules/react-csv/lib/core.js","../node_modules/react-csv/lib/metaProps.js","../node_modules/react-csv/index.js","../node_modules/react-csv/lib/index.js","../node_modules/react-csv/lib/components/Download.js","../node_modules/react-csv/lib/components/Link.js"],"names":["updateProfileInfo","newData","a","fetch","method","headers","body","JSON","stringify","then","res","json","require","SinglePaymentMethod","setMsg","setUser","useContext","SiteContext","useState","edit","setEdit","deletePaymentMethod","useCallback","_id","code","prev","paymentMethods","filter","item","onClick","className","__t","Confirm","label","question","callback","card","open","head","setOpen","prefill","onSuccess","paymentMethod","account","DataEdit","fields","value","onError","formData","form","useRef","submit","e","preventDefault","allData","FormData","target","entries","field","password","confirm_password","navigator","geolocation","getCurrentPosition","position","lat","coords","latitude","long","longitude","type","coordinates","UploadFiles","files","user","alert","catch","err","console","log","ref","onSubmit","Profile","history","match","location","mismatchPass","setMismatchPass","msg","kycFiles","setKycFiles","src","profileImg","xmlns","width","height","viewBox","id","transform","fill","d","stroke","accept","onChange","file","cdn","process","_file","append","data","firstName","lastName","userId","placeholder","defaultValue","name","required","phone","pattern","email","gender","age","address","street","city","state","zip","multiple","kyc","verified","links","map","i","length","MilestoneForm","lazy","mod","default","SingleOrder","order","setOrders","selectAll","setBatch","batch","actionsRef","checkRef","useHistory","selected","setSelected","cancelOrder","status","acceptOrder","requestCancellation","useEffect","nativeEvent","path","includes","current","push","format","createdAt","total","icon","to","Modal","FullOrder","userType","setOrder","shopInfo","shippingCost","setShipping","milestoneForm","setMilestoneForm","fileUpload","setFileUpload","declineOrder","markAsShipped","markAsDelivered","params","productPrice","products","reduce","c","calculatePrice","product","gst","qty","fix","couponCodeDiscount","coupon","Math","min","amount","maxDiscount","fee","lable","buyer","note","Object","deliveryDetail","key","deliveryWithin","available","images","toString","milestones","milestone","dscr","terms","action","definedAmount","client","FileUploadForm","loading","setLoading","setFiles","fileLinks","title","Orders","categories","setTotal","page","setPage","perPage","setPerPage","setStatus","search","setSearch","column","sort","dateRange","setDateRange","orders","setSelectAll","startDate","moment","time","endDate","setHours","URLSearchParams","q","dateFrom","dateTo","options","opacity","range","btns","currentPage","SingleRefund","refund","setRefunds","seller","FullRefund","setRefund","refundTill","setRefundTill","updateRefund","acceptRefund","declineRefund","refundable","days","Date","getTime","deliveredAt","issue","deliveryTime","shipping","cellSpacing","cellPadding","Refunds","refunds","SingleCoupon","setCoupons","couponDetail","setCouponDetail","threshold","date","from","termsUrl","term","Coupons","coupons","Step","defaultStatus","children","disabled","step","BusinessManager","FB","window","businessManagers","setBusinessManagers","setErr","fbMarket","business","api","access_token","businesses","businessManager","href","created_time","newUser","picture","url","business_id","asset_id","vertical","error","error_user_msg","message","FbPage","fbPages","setFbPages","createNew","setCreateNew","facebookPage","category","InstagramAccount","setStep","insta","setInsta","instagramAccount","instagram_business_account","profile_picture_url","username","CommerceAccount","commerceAccount","catalog","setCatalog","find","delCatalog","Marketplace","undefined","userAgreement","logout","LS","remove","login","authResponse","accessToken","scope","return_scopes","ProductForm","setType","setCategory","discount","setDiscount","setName","setDscr","price","setPrice","setGst","hsn","setHsn","setAvailable","tags","setTags","tag","onKeyPress","trim","charCode","focus","input","previousElementSibling","Products","shopSetupComplete","productForm","setProductForm","setProducts","addMany","setAddMany","deleteItems","items","_ids","some","deleteMany","addToFbMarket","fb_products","success","failed","forEach","prod","fbMarketId","removeFromFbMarket","get","SingleProduct","showInstaForm","setShowInstaForm","calculateDiscount","FacebookShareButton","resetButtonStyle","InstaForm","img","setImg","caption","setCaption","image_url","creation_id","maxLength","BatchUpload","batchItems","setBatchItems","setImages","csvDraft","setCsvDraft","addBatchProducts","updated","uploadImages","imgLinks","Images","Name","Description","Material","Category","Type","filename","toLowerCase","newItems","splice","cb","reader","FileReader","onload","evt","bstr","result","XLSX","wb","read","wsname","SheetNames","ws","Sheets","utils","sheet_to_json","header","arr","cols","shift","row","col","j","readAsBinaryString","parseXLSXtoJSON","split","defaultTerms","Settings","setCategories","gstEdit","setGstEdit","shippingEdit","setShippingEdit","termsEdit","setTermsEdit","editPayment","setEditPayment","values","cat","querySelector","detail","reg","bank","accountType","accountNumber","ifsc","GstEditForm","gstFiles","setGstFiles","gstReg","setGstReg","setAmount","ShippingEditForm","setShippingCost","setDeliveryWithin","setRefundable","TermsEditForm","setTerms","addTerm","setAddTerm","PaymentMethodForm","setBank","setIfsc","setCity","setAccountNumber","MyShop","setShopSetupComplete","style","display","basepath","tabs","component","OrderManagement","RefundManagement","Campaigns","FBMarket","index","useLayoutEffect","useLatest","useIsomorphicLayoutEffect","updateRef","useComposedRef","libRef","userRef","prevUserRef","instance","HIDDEN_TEXTAREA_STYLE","visibility","overflow","top","right","forceHiddenStyles","node","keys","setProperty","hiddenTextarea","noop","SIZING_STYLE","isIE","document","documentElement","currentStyle","TextareaAutosize","_ref","cacheMeasurements","maxRows","minRows","_ref$onChange","_ref$onHeightChange","onHeightChange","props","_objectWithoutPropertiesLoose","isControlled","heightRef","measurementsCacheRef","resizeTextarea","nodeSizingData","getComputedStyle","obj","sizingStyle","acc","prop","boxSizing","parseFloat","borderRightWidth","borderLeftWidth","paddingRight","paddingLeft","paddingSize","paddingBottom","paddingTop","borderSize","borderBottomWidth","borderTopWidth","getSizingData","_calculateNodeHeight","sizingData","Infinity","createElement","setAttribute","parentNode","appendChild","_key","scrollHeight","getHeight","rowHeight","minHeight","max","maxHeight","calculateNodeHeight","listener","latestListener","handler","event","addEventListener","removeEventListener","useWindowResizeListener","_extends","forwardRef","defineProperty","exports","_typeof","Symbol","iterator","constructor","prototype","_toConsumableArray","Array","isArray","arr2","isSafari","test","userAgent","isJsons","array","every","isArrays","jsonsHeaders","b","Set","concat","jsons2arrays","jsons","headerLabels","headerKeys","object","getHeaderValue","property","foundValue","replace","o","p","elementOrEmpty","element","joiner","separator","arguments","enclosingCharacter","join","arrays2csv","jsons2csv","string2csv","toCSV","TypeError","buildURI","uFEFF","csv","blob","Blob","dataURI","URL","webkitURL","createObjectURL","PropsNotForwarded","defaultProps","propTypes","_react","_propTypes","__esModule","oneOfType","string","isRequired","bool","func","asyncOnClick","module","CSVLink","CSVDownload","_Download2","_interopRequireDefault","_Link2","_createClass","defineProperties","descriptor","enumerable","configurable","writable","Constructor","protoProps","staticProps","_react2","_core","_metaProps","_React$Component","_classCallCheck","this","_this","self","call","ReferenceError","_possibleConstructorReturn","__proto__","getPrototypeOf","subClass","superClass","create","setPrototypeOf","_inherits","apply","_props","specs","Component","assign","source","hasOwnProperty","bind","setState","prevProps","_props2","msSaveOrOpenBlob","_props3","msSaveBlob","_this2","proceed","handleLegacy","_this3","handleAsyncClick","handleSyncClick","_this4","_props4","rest","indexOf","_objectWithoutProperties","download","link","handleClick"],"mappings":"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","file":"static/js/12.05e3e7c9.chunk.js","sourcesContent":["import { useState, useEffect, useContext, useRef, useCallback } from \"react\";\nimport { SiteContext } from \"../SiteContext\";\nimport { BankCard, BankAccount, BankCardForm, NetBankingForm } from \"./Wallet\";\nimport { Modal, Confirm } from \"./Modal\";\nimport {\n  Err_svg,\n  Succ_svg,\n  FileInput,\n  Media,\n  UploadFiles,\n  Img,\n} from \"./Elements\";\n// import GoogleLogin from \"react-google-login\";\nrequire(\"./styles/profile.scss\");\n\nexport async function updateProfileInfo(newData) {\n  return fetch(\"/api/editUserProfile\", {\n    method: \"PATCH\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify({ ...newData }),\n  }).then((res) => res.json());\n}\n\nconst Profile = ({ history, match, location }) => {\n  const { user, setUser } = useContext(SiteContext);\n  const [mismatchPass, setMismatchPass] = useState(false);\n  const [msg, setMsg] = useState(null);\n  const [kycFiles, setKycFiles] = useState([]);\n  const [gstFiles, setGstFiles] = useState([]);\n  // const addGoogleId = (e) => {\n  //   if (e.googleId) {\n  //     updateProfileInfo({ googleId: e.googleId })\n  //       .then((data) => {\n  //         setUser((prev) => ({ ...prev, googleId: e.googleId }));\n  //         setMsg(\n  //           <>\n  //             <button onClick={() => setMsg(null)}>Okay</button>\n  //             <div>\n  //               <Succ_svg />\n  //               <h4>Google account successfully connected.</h4>\n  //             </div>\n  //           </>\n  //         );\n  //       })\n  //       .catch((err) => {\n  //         console.log(err);\n  //         setMsg(\n  //           <>\n  //             <button onClick={() => setMsg(null)}>Okay</button>\n  //             <div>\n  //               <Err_svg />\n  //               <h4>Could not connect Google account.</h4>\n  //             </div>\n  //           </>\n  //         );\n  //       });\n  //   }\n  // };\n  // const disconnectFromGoogle = (e) => {\n  //   updateProfileInfo({ googleId: null })\n  //     .then((data) => {\n  //       if (data.user) {\n  //         setUser((prev) => ({ ...prev, googleId: null }));\n  //         setMsg(\n  //           <>\n  //             <button onClick={() => setMsg(null)}>Okay</button>\n  //             <div>\n  //               <Succ_svg />\n  //               <h4>Successfully disconnected Google.</h4>\n  //             </div>\n  //           </>\n  //         );\n  //       } else {\n  //         setMsg(\n  //           <>\n  //             <button onClick={() => setMsg(null)}>Okay</button>\n  //             <div>\n  //               <Err_svg />\n  //               <h4>Could not disconnect Google account. Please try again.</h4>\n  //             </div>\n  //           </>\n  //         );\n  //       }\n  //     })\n  //     .catch((err) => {\n  //       console.log(err);\n  //       setMsg(\n  //         <>\n  //           <button onClick={() => setMsg(null)}>Okay</button>\n  //           <div>\n  //             <Err_svg />\n  //             <h4>Could not disconnect Google account.</h4>\n  //           </div>\n  //         </>\n  //       );\n  //     });\n  // };\n  return (\n    <div className=\"profileContainer\">\n      <div className=\"benner\">\n        <div className=\"profileImg\">\n          <Img src={user.profileImg || \"/profile-user.jpg\"} />\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            width=\"91.832\"\n            height=\"25.468\"\n            viewBox=\"0 0 91.832 25.468\"\n          >\n            <g\n              id=\"Path_1937\"\n              data-name=\"Path 1937\"\n              transform=\"translate(15.429 -9.647)\"\n              fill=\"#fff\"\n            >\n              <path\n                d=\"M 29.79687690734863 34.6146240234375 C 22.21588897705078 34.6146240234375 13.43720626831055 32.0111198425293 5.0779709815979 27.28368377685547 C -2.8753981590271 22.78578186035156 -9.78753662109375 16.7585563659668 -14.48426628112793 10.24203777313232 C -13.95890235900879 10.24473857879639 -13.30369663238525 10.25548648834229 -12.80753517150879 10.26361274719238 C -12.44524097442627 10.26955413818359 -12.15906429290771 10.27424812316895 -12.02891159057617 10.27424812316895 C -11.93940830230713 10.27424812316895 -11.86373233795166 10.26253128051758 -11.79978466033936 10.24241733551025 C -11.48864650726318 10.21196746826172 -10.04010391235352 10.17821311950684 -5.149840831756592 10.17821311950684 C -1.226676225662231 10.17821311950684 4.093100070953369 10.19837760925293 9.725229263305664 10.21973037719727 C 16.20444107055664 10.24428367614746 23.54814720153809 10.27211856842041 29.79687690734863 10.27211856842041 C 31.89767646789551 10.27211856842041 43.68988800048828 10.22107124328613 56.17448806762695 10.16702461242676 L 59.24650192260742 10.15374183654785 C 60.32665252685547 10.14907169342041 61.61424255371094 10.14680099487305 63.18285369873047 10.14680099487305 C 64.99295043945313 10.14680099487305 66.92156219482422 10.14978885650635 68.78666687011719 10.15269470214844 C 70.55825042724609 10.1554479598999 72.23158264160156 10.15804767608643 73.72422027587891 10.15804767608643 C 74.4501953125 10.15804767608643 75.08247375488281 10.1574182510376 75.63590240478516 10.15613842010498 C 74.24596405029297 13.15391826629639 71.95748138427734 16.1362361907959 68.82386779785156 19.03109550476074 C 65.67525482177734 21.9398250579834 61.6738166809082 24.71903610229492 57.25215911865234 27.06828308105469 C 52.91740798950195 29.37135314941406 48.15610122680664 31.27616500854492 43.48295974731445 32.57678985595703 C 38.69290161132813 33.90995407104492 33.96032333374023 34.6146240234375 29.79687690734863 34.6146240234375 Z\"\n                stroke=\"none\"\n              />\n              <path\n                d=\"M 63.18235397338867 10.64679336547852 C 61.61428070068359 10.64679336547852 60.32755279541016 10.64906692504883 59.24865341186523 10.65373229980469 L 56.18099212646484 10.6670036315918 C 43.69374084472656 10.72105407714844 31.89901733398438 10.77211761474609 29.79687881469727 10.77211761474609 C 23.54719161987305 10.77211761474609 16.2029914855957 10.74428176879883 9.723331451416016 10.71971893310547 C 4.091693878173828 10.69837951660156 -1.227619171142578 10.67821884155273 -5.149848937988281 10.67821884155273 C -9.844169616699219 10.67821884155273 -11.33226013183594 10.70873641967773 -11.7083740234375 10.73677062988281 C -11.80277252197266 10.76053237915039 -11.90915679931641 10.77424240112305 -12.0289306640625 10.77424240112305 C -12.16323089599609 10.77424240112305 -12.45131683349609 10.7695198059082 -12.81605529785156 10.76354217529297 C -13.01943206787109 10.76021194458008 -13.24966430664063 10.75643920898438 -13.48653411865234 10.75296401977539 C -8.851593017578125 16.903076171875 -2.239547729492188 22.57095718383789 5.324104309082031 26.84845542907715 C 13.60947799682617 31.53411865234375 22.30074310302734 34.11461639404297 29.79687881469727 34.11461639404297 C 33.91565704345703 34.11461639404297 38.60186767578125 33.41628265380859 43.34890747070313 32.0950927734375 C 47.98773193359375 30.80401802062988 52.71426773071289 28.91309356689453 57.0175666809082 26.62672996520996 C 61.40182876586914 24.29735565185547 65.3670654296875 21.5438175201416 68.48458099365234 18.6638298034668 C 71.32099151611328 16.04351997375488 73.45128631591797 13.35661125183105 74.83492279052734 10.65748596191406 C 74.4908447265625 10.65786743164063 74.12125396728516 10.65805435180664 73.72370147705078 10.65805435180664 C 72.23068237304688 10.65805435180664 70.55716705322266 10.65545654296875 68.78539276123047 10.65269470214844 C 66.92047119140625 10.6497917175293 64.9920654296875 10.64679336547852 63.18235397338867 10.64679336547852 M 63.18235778808594 9.646797180175781 C 66.69034576416016 9.646797180175781 70.639892578125 9.658050537109375 73.72370910644531 9.658050537109375 C 74.72272491455078 9.658050537109375 75.63052368164063 9.656867980957031 76.4033203125 9.653743743896484 C 70.7041015625 23.3221435546875 47.19384002685547 35.11461639404297 29.79687881469727 35.11461639404297 C 13.80905532836914 35.11461639404297 -5.7138671875 23.84020614624023 -15.427734375 9.772117614746094 C -15.45098876953125 9.749141693115234 -15.14891815185547 9.741405487060547 -14.71451568603516 9.741401672363281 C -13.8193359375 9.741401672363281 -12.36181640625 9.774246215820313 -12.02893829345703 9.774246215820313 C -11.98212432861328 9.774246215820313 -11.95759582519531 9.773597717285156 -11.9599609375 9.772117614746094 C -12.07225799560547 9.701694488525391 -9.402595520019531 9.678211212158203 -5.14984130859375 9.678211212158203 C 3.356430053710938 9.678211212158203 18.19854354858398 9.772117614746094 29.79687881469727 9.772117614746094 C 32.07231903076172 9.772117614746094 46.01445388793945 9.710941314697266 59.24433135986328 9.653743743896484 C 60.42824935913086 9.648624420166016 61.76977157592773 9.646797180175781 63.18235778808594 9.646797180175781 Z\"\n                stroke=\"none\"\n                fill=\"#336cf9\"\n              />\n            </g>\n          </svg>\n          <input\n            type=\"file\"\n            accept=\".jpg, .png, .jpeg\"\n            onChange={(e) => {\n              const file = e.target.files[0];\n              const cdn = process.env.REACT_APP_CDN_HOST;\n              if (file) {\n                let imgLink = \"\";\n                const formData = new FormData();\n                for (var _file of e.target.files) {\n                  formData.append(\"file\", _file);\n                }\n                fetch(`${cdn}/upload`, {\n                  method: \"POST\",\n                  body: formData,\n                })\n                  .then((res) => res.json())\n                  .then((data) => {\n                    if (data.code === \"ok\") {\n                      imgLink = cdn + \"/\" + data.files[0];\n                      updateProfileInfo({ profileImg: imgLink }).then(\n                        (data) => {\n                          if (data.user) {\n                            setUser((prev) => ({\n                              ...prev,\n                              profileImg: data.user.profileImg,\n                            }));\n                          }\n                        }\n                      );\n                    } else {\n                      setMsg(\n                        <>\n                          <button onClick={() => setMsg(null)}>Okay</button>\n                          <div>\n                            <Err_svg />\n                            <h4>Image upload failed</h4>\n                          </div>\n                        </>\n                      );\n                    }\n                  })\n                  .catch((err) => {\n                    setMsg(\n                      <>\n                        <button onClick={() => setMsg(null)}>Okay</button>\n                        <div>\n                          <Err_svg />\n                          <h4>Image upload failed. Make sure you're online.</h4>\n                        </div>\n                      </>\n                    );\n                  });\n              }\n            }}\n          />\n          <label>Edit</label>\n        </div>\n        <div>\n          <p className=\"name\">{user.firstName + \" \" + user.lastName}</p>\n          <p className=\"id\">Delivery pay ID: {user.userId || user._id}</p>\n        </div>\n      </div>\n      <div className=\"settings\">\n        <div className=\"head\">Account Settings</div>\n        <ul>\n          <DataEdit\n            label=\"Name\"\n            fields={\n              <>\n                <section>\n                  <input\n                    placeholder=\"First name\"\n                    defaultValue={user.firstName}\n                    name=\"firstName\"\n                    required={true}\n                  />\n                </section>\n                <section>\n                  <input\n                    placeholder=\"last name\"\n                    defaultValue={user.lastName}\n                    name=\"lastName\"\n                    required={true}\n                  />\n                </section>\n              </>\n            }\n            value={user.firstName + \" \" + user.lastName}\n          />\n          <DataEdit\n            label=\"Phone Number\"\n            fields={\n              <>\n                <section>\n                  <input\n                    placeholder=\"Phone Number\"\n                    defaultValue={user.phone}\n                    name=\"phone\"\n                    required={true}\n                    pattern=\"^(\\+91|91|1|)\\d{10}$\"\n                  />\n                </section>\n              </>\n            }\n            value={user.phone}\n          />\n          <DataEdit\n            label=\"Email\"\n            fields={\n              <>\n                <section>\n                  <input\n                    type=\"email\"\n                    placeholder=\"Phone Number\"\n                    defaultValue={user.email}\n                    name=\"email\"\n                    required={true}\n                  />\n                </section>\n              </>\n            }\n            value={user.email}\n          />\n          <DataEdit\n            label=\"Password\"\n            onError={() => setMismatchPass(true)}\n            fields={\n              <>\n                <section>\n                  <input\n                    placeholder=\"Password\"\n                    name=\"password\"\n                    required={true}\n                    type=\"password\"\n                    onChange={(e) => setMismatchPass(false)}\n                  />\n                </section>\n                <section>\n                  <input\n                    placeholder=\"Confirm password\"\n                    name=\"confirm_password\"\n                    required={true}\n                    type=\"password\"\n                    onChange={(e) => setMismatchPass(false)}\n                  />\n                </section>\n                {mismatchPass && (\n                  <p className=\"errMsg\">Password did not match.</p>\n                )}\n              </>\n            }\n            value=\"\"\n          />\n          <DataEdit\n            label=\"Gender\"\n            fields={\n              <>\n                <section>\n                  <input\n                    placeholder=\"Gender\"\n                    defaultValue={user.gender}\n                    name=\"gender\"\n                    required={true}\n                  />\n                </section>\n              </>\n            }\n            value={user.gender}\n          />\n          <DataEdit\n            label=\"Age\"\n            fields={\n              <>\n                <section>\n                  <input\n                    type=\"number\"\n                    placeholder=\"Age\"\n                    defaultValue={user.age}\n                    name=\"age\"\n                    required={true}\n                  />\n                </section>\n              </>\n            }\n            value={user.age}\n          />\n          <DataEdit\n            label=\"Address\"\n            fields={\n              <>\n                <section>\n                  <input\n                    type=\"text\"\n                    placeholder=\"Address\"\n                    defaultValue={user.address.street}\n                    name=\"address.street\"\n                    required={true}\n                  />\n                </section>\n                <section>\n                  <input\n                    type=\"text\"\n                    placeholder=\"City\"\n                    defaultValue={user.address.city}\n                    name=\"address.city\"\n                    required={true}\n                  />\n                </section>\n                <section>\n                  <input\n                    type=\"text\"\n                    placeholder=\"State\"\n                    defaultValue={user.address.state}\n                    name=\"address.state\"\n                    required={true}\n                  />\n                </section>\n                <section>\n                  <input\n                    type=\"number\"\n                    placeholder=\"PIN Code\"\n                    defaultValue={user.address.zip}\n                    name=\"address.zip\"\n                    required={true}\n                  />\n                </section>\n              </>\n            }\n            value={`${user.address?.street || \"\"} ${user.address?.city || \"\"} ${\n              user.address?.state || \"\"\n            } ${user.address?.zip || \"\"}`}\n          />\n        </ul>\n      </div>\n      <div className=\"kyc\">\n        <div className=\"head\">KYC</div>\n        <ul>\n          <DataEdit\n            label=\"KYC\"\n            setMsg={setMsg}\n            formData={kycFiles}\n            fields={\n              <>\n                <section>\n                  <label>Upload files for verification.</label>\n                  <FileInput\n                    multiple={true}\n                    prefill={user.kyc?.files}\n                    name=\"kyc.files\"\n                    onChange={(files) => setKycFiles(files)}\n                  />\n                </section>\n              </>\n            }\n            value={\n              <>\n                <p>Status: {user.kyc?.verified ? \"Verified\" : \"Unverified\"}</p>\n                <label>Files for verification:</label>\n                <ul className=\"thumbs\">\n                  <Media links={user.kyc?.files} />\n                </ul>\n              </>\n            }\n          />\n        </ul>\n      </div>\n      <div className=\"paymentMethods\">\n        <div className=\"head\">Payment Methods</div>\n        <ul className=\"methods\">\n          {user.paymentMethods.map((method, i) => (\n            <SinglePaymentMethod key={i} setMsg={setMsg} method={method} />\n          ))}\n          {user.paymentMethods?.length === 0 && <p>No payment method added.</p>}\n        </ul>\n      </div>\n      {\n        //   <div className=\"socials\">\n        //   <div className=\"head\">Connect Social Accounts</div>\n        //   <ul className=\"providers\">\n        //     {user.googleId ? (\n        //       <GoogleLogin\n        //         className=\"google\"\n        //         clientId=\"978249749020-kjq65au1n373ur5oap7n4ebo2fq1jdhq.apps.googleusercontent.com\"\n        //         buttonText=\"Disconnect from Google\"\n        //         onSuccess={disconnectFromGoogle}\n        //         onFailure={disconnectFromGoogle}\n        //         cookiePolicy={\"single_host_origin\"}\n        //       />\n        //     ) : (\n        //       <GoogleLogin\n        //         className=\"google\"\n        //         clientId=\"978249749020-kjq65au1n373ur5oap7n4ebo2fq1jdhq.apps.googleusercontent.com\"\n        //         buttonText=\"Connect with Google\"\n        //         onSuccess={addGoogleId}\n        //         onFailure={addGoogleId}\n        //         cookiePolicy={\"single_host_origin\"}\n        //       />\n        //     )}\n        //   </ul>\n        // </div>\n      }\n      <Modal className=\"msg\" open={msg}>\n        {msg}\n      </Modal>\n    </div>\n  );\n};\nconst SinglePaymentMethod = ({ method, setMsg }) => {\n  const { setUser } = useContext(SiteContext);\n  const [edit, setEdit] = useState(false);\n  const deletePaymentMethod = useCallback((method) => {\n    fetch(\"/api/deletePaymentMethod\", {\n      method: \"DELETE\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ _id: method._id }),\n    })\n      .then((res) => res.json())\n      .then(({ code }) => {\n        if (code === \"ok\") {\n          setUser((prev) => ({\n            ...prev,\n            paymentMethods: prev.paymentMethods.filter(\n              (item) => item._id !== method._id\n            ),\n          }));\n        } else {\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                <Err_svg />\n                <h4>Payment method could not be deleted.</h4>\n              </div>\n            </>\n          );\n        }\n      });\n  }, []);\n  return (\n    <li>\n      <div className=\"actions\">\n        <button className=\"edit\" onClick={() => setEdit(method.__t)}>\n          Edit\n        </button>\n        <button\n          className=\"delete\"\n          onClick={() => {\n            return Confirm({\n              label: \"Payment method delete\",\n              question: \"Do you want to delete this payment method?\",\n              callback: () => deletePaymentMethod(method),\n            });\n          }}\n        >\n          Delete\n        </button>\n      </div>\n      {method.__t === \"BankCard\" && (\n        <>\n          <BankCard card={method} />\n          {edit === method.__t && (\n            <Modal\n              open={edit}\n              head={true}\n              label=\"Edit Payment Method\"\n              setOpen={setEdit}\n              className=\"editPaymentMethod\"\n            >\n              <BankCardForm\n                prefill={method}\n                onSuccess={(paymentMethod) => {\n                  if (paymentMethod) {\n                    setEdit(false);\n                    setMsg(\n                      <>\n                        <button onClick={() => setMsg(null)}>Okay</button>\n                        <div>\n                          <Succ_svg />\n                          <h4>Payment method updated.</h4>\n                        </div>\n                      </>\n                    );\n                  }\n                }}\n              />\n            </Modal>\n          )}\n        </>\n      )}\n      {method.__t === \"BankAccount\" && (\n        <>\n          <BankAccount account={method} />\n          {edit === method.__t && (\n            <Modal\n              open={edit}\n              head={true}\n              label=\"Edit Payment Method\"\n              setOpen={setEdit}\n              className=\"editPaymentMethod\"\n            >\n              <NetBankingForm\n                prefill={method}\n                onSuccess={(paymentMethod) => {\n                  if (paymentMethod) {\n                    setEdit(false);\n                    setMsg(\n                      <>\n                        <button onClick={() => setMsg(null)}>Okay</button>\n                        <div>\n                          <Succ_svg />\n                          <h4>Payment method updated.</h4>\n                        </div>\n                      </>\n                    );\n                  }\n                }}\n              />\n            </Modal>\n          )}\n        </>\n      )}\n    </li>\n  );\n};\n\nconst DataEdit = ({ label, fields, value, onError, setMsg, formData }) => {\n  const { setUser } = useContext(SiteContext);\n  const [edit, setEdit] = useState(false);\n  const form = useRef(null);\n  const submit = async (e) => {\n    e.preventDefault();\n    let allData = {};\n    for (var [field, value] of new FormData(e.target).entries()) {\n      allData[field] = value;\n    }\n    if (allData.password && allData.password !== allData.confirm_password) {\n      onError?.();\n      return;\n    }\n    if (allData[\"address.city\"]) {\n      navigator.geolocation.getCurrentPosition(function (position) {\n        let lat = position.coords.latitude;\n        let long = position.coords.longitude;\n        allData[\"address.location\"] = {\n          type: \"Point\",\n          coordinates: [long, lat],\n        };\n      });\n    }\n    if (allData[\"kyc.files\"]) {\n      allData[\"kyc.files\"] =\n        (await UploadFiles({ files: formData, setMsg })) || [];\n    }\n    if (allData[\"gst.detail.files\"]) {\n      allData[\"gst.detail.files\"] =\n        (await UploadFiles({ files: formData, setMsg })) || [];\n    }\n    fetch(\"/api/editUserProfile\", {\n      method: \"PATCH\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify(allData),\n    })\n      .then((res) => res.json())\n      .then(({ user }) => {\n        if (user) {\n          setUser(user);\n          setEdit(false);\n        } else {\n          alert(\"someting went wrong\");\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        alert(\"someting went wrong\");\n      });\n  };\n  return (\n    <li>\n      <p className=\"label\">{label}</p>\n      <form ref={form} onSubmit={submit}>\n        {edit ? (\n          <div className=\"inputs\">{fields}</div>\n        ) : (\n          <div className=\"currentValue\">{value}</div>\n        )}\n        <div className=\"btns\">\n          {edit ? (\n            <>\n              <button key=\"submit\" type=\"submit\">\n                Save changes\n              </button>\n              <button key=\"cancel\" type=\"button\" onClick={() => setEdit(false)}>\n                Cancel\n              </button>\n            </>\n          ) : (\n            <button key=\"edit\" type=\"button\" onClick={() => setEdit(true)}>\n              Edit\n            </button>\n          )}\n        </div>\n      </form>\n    </li>\n  );\n};\n\nexport default Profile;\n","import {\n  useState,\n  useEffect,\n  useRef,\n  useLayoutEffect,\n  useContext,\n  lazy,\n} from \"react\";\nimport {\n  Succ_svg,\n  Err_svg,\n  Plus_svg,\n  X_svg,\n  Combobox,\n  Pagination,\n  Checkbox,\n  calculateDiscount,\n  calculatePrice,\n  Actions,\n  Chev_down_svg,\n  User,\n  Arrow_left_svg,\n  NumberInput,\n  Media,\n  UploadFiles,\n  FileInput,\n  Img,\n  Moment,\n  moment,\n  InputDateRange,\n} from \"../Elements\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport { SiteContext } from \"../../SiteContext\";\nimport { Modal, Confirm } from \"../Modal\";\nimport TextareaAutosize from \"react-textarea-autosize\";\nimport { toast } from \"react-toastify\";\nconst MilestoneForm = lazy(() =>\n  import(\"../Forms\").then((mod) => ({ default: mod.MilestoneForm }))\n);\n\nconst Orders = ({ categories }) => {\n  const [total, setTotal] = useState(0);\n  const [page, setPage] = useState(1);\n  const [perPage, setPerPage] = useState(20);\n  const [status, setStatus] = useState(\"\");\n  const [search, setSearch] = useState(\"\");\n  const [sort, setSort] = useState({\n    column: \"createdAt\",\n    order: \"dsc\",\n  });\n  const [dateRange, setDateRange] = useState(null);\n  const [orders, setOrders] = useState([]);\n  const [selectAll, setSelectAll] = useState(false);\n  const [batch, setBatch] = useState([]);\n  const [msg, setMsg] = useState(null);\n  useEffect(() => {\n    const startDate = moment({\n      time: dateRange?.startDate,\n      format: \"YYYY-MM-DD\",\n    });\n    const endDate = moment({\n      time: dateRange?.endDate.setHours(24, 0, 0, 0),\n      format: \"YYYY-MM-DD\",\n    });\n    fetch(\n      `/api/getOrders?${new URLSearchParams({\n        user: \"seller\",\n        ...(search && { q: search }),\n        page,\n        perPage,\n        sort: sort.column,\n        order: sort.order,\n        ...(dateRange && {\n          dateFrom: startDate,\n          dateTo: endDate,\n        }),\n        ...(status && { status }),\n      })}`\n    )\n      .then((res) => res.json())\n      .then((data) => {\n        if (data.code === \"ok\") {\n          setOrders(data.orders);\n          setTotal(data.total);\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        setMsg(\n          <>\n            <button onClick={() => setMsg(null)}>Okay</button>\n            <div>\n              <Err_svg />\n              <h4>Could not get orders.</h4>\n            </div>\n          </>\n        );\n      });\n  }, [status, search, page, perPage, dateRange]);\n  useEffect(() => {\n    if (selectAll) {\n    } else {\n      setBatch([]);\n    }\n  }, [selectAll]);\n  useEffect(() => {\n    if (batch.length === 0) {\n      setSelectAll(false);\n    }\n  }, [batch]);\n  return (\n    <>\n      <div className=\"benner\">\n        <p>Order Management</p>\n      </div>\n      <div className=\"filters\">\n        <section>\n          <label>Total:</label>\n          {total}\n        </section>\n        <section>\n          <label>Per Page:</label>\n          <Combobox\n            defaultValue={0}\n            options={[\n              { label: \"20\", value: 20 },\n              { label: \"30\", value: 30 },\n              { label: \"50\", value: 50 },\n            ]}\n            onChange={(e) => setPerPage(e.value)}\n          />\n        </section>\n        <section className=\"search\">\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            width=\"23\"\n            height=\"23\"\n            viewBox=\"0 0 23 23\"\n          >\n            <path\n              id=\"Icon_ionic-ios-search\"\n              data-name=\"Icon ionic-ios-search\"\n              d=\"M27.23,25.828l-6.4-6.455a9.116,9.116,0,1,0-1.384,1.4L25.8,27.188a.985.985,0,0,0,1.39.036A.99.99,0,0,0,27.23,25.828ZM13.67,20.852a7.2,7.2,0,1,1,5.091-2.108A7.155,7.155,0,0,1,13.67,20.852Z\"\n              transform=\"translate(-4.5 -4.493)\"\n              fill=\"#707070\"\n              opacity=\"0.74\"\n            />\n          </svg>\n          <input\n            value={search}\n            onChange={(e) => setSearch(e.target.value)}\n            placeholder=\"Search for Buyer\"\n          />\n          {search && (\n            <button onClick={() => setSearch(\"\")}>\n              <X_svg />\n            </button>\n          )}\n        </section>\n        <section className=\"category\">\n          <label>Status:</label>\n          <Combobox\n            defaultValue={0}\n            options={[\n              { label: \"All\", value: \"\" },\n              { label: \"Pending\", value: \"pending\" },\n              { label: \"Approved\", value: \"approved\" },\n              { label: \"Cancelled\", value: \"cancelled\" },\n              { label: \"Hold\", value: \"Hold\" },\n              { label: \"Shipped\", value: \"shipped\" },\n              { label: \"Delivered\", value: \"delivered\" },\n              { label: \"Refunded\", value: \"refunded\" },\n            ]}\n            onChange={(e) => setStatus(e.value)}\n          />\n        </section>\n        <section className={`date`}>\n          <InputDateRange\n            dateRange={dateRange}\n            onChange={(range) => setDateRange(range)}\n          />\n        </section>\n      </div>\n      {batch.length > 0 && (\n        <div className=\"batchAction\">\n          <button onClick={() => console.log(\"batch delete\")}>Delete</button>\n        </div>\n      )}\n      <table className=\"table orders\">\n        <thead>\n          <tr>\n            {\n              //   <th className=\"checkContainer\">\n              //   <Checkbox\n              //     value={selectAll}\n              //     defaultValue={selectAll}\n              //     onChange={(e) => setSelectAll(e)}\n              //   />\n              // </th>\n            }\n            <th>Order</th>\n            <th className=\"date\">Date</th>\n            {\n              // <th>Buyer</th>\n              // <th>QTY</th>\n              // <th>Refundable</th>\n              // <th>Milestone</th>\n            }\n            <th>Total Price</th>\n            <th>Status</th>\n            <th>Actions</th>\n          </tr>\n        </thead>\n        <tbody>\n          {orders.map((order, i) => (\n            <SingleOrder\n              key={i}\n              order={order}\n              setOrders={setOrders}\n              selectAll={selectAll}\n              setBatch={setBatch}\n              batch={batch}\n            />\n          ))}\n          {orders.length === 0 && (\n            <tr className=\"placeholder\">\n              <td>No product yet.</td>\n            </tr>\n          )}\n        </tbody>\n      </table>\n      <Pagination\n        total={total}\n        btns={5}\n        currentPage={page}\n        perPage={perPage}\n        setPage={setPage}\n      />\n      <Modal className=\"msg\" open={msg}>\n        {msg}\n      </Modal>\n    </>\n  );\n};\nconst SingleOrder = ({ order, setOrders, selectAll, setBatch, batch }) => {\n  const actionsRef = useRef();\n  const checkRef = useRef();\n  const history = useHistory();\n  const { user } = useContext(SiteContext);\n  const [selected, setSelected] = useState(selectAll || false);\n  const [edit, setEdit] = useState(false);\n  const [msg, setMsg] = useState(false);\n  const cancelOrder = () => {\n    fetch(\"/api/declineOrder\", {\n      method: \"PATCH\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ _id: order._id }),\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        if (data.code === \"ok\") {\n          setOrders((prev) =>\n            prev.map((item) => {\n              if (item._id === order._id) {\n                return {\n                  ...item,\n                  status: data.order?.status,\n                };\n              } else {\n                return item;\n              }\n            })\n          );\n        } else {\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                <Err_svg />\n                <h4>Could not cancel order. Please try again.</h4>\n              </div>\n            </>\n          );\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        setMsg(\n          <>\n            <button onClick={() => setMsg(null)}>Okay</button>\n            <div>\n              <Err_svg />\n              <h4>Could not cancel order. Make sure you're online</h4>\n            </div>\n          </>\n        );\n      });\n  };\n  const acceptOrder = () => {\n    fetch(\"/api/acceptOrder\", {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ _id: order._id }),\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        if (data.code === \"ok\") {\n          setOrders((prev) =>\n            prev.map((item) => {\n              if (item._id === order._id) {\n                return {\n                  ...item,\n                  status: data.order?.status,\n                };\n              } else {\n                return item;\n              }\n            })\n          );\n        } else {\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                <Err_svg />\n                <h4>Orders does not exist.</h4>\n              </div>\n            </>\n          );\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        setMsg(\n          <>\n            <button onClick={() => setMsg(null)}>Okay</button>\n            <div>\n              <Err_svg />\n              <h4>Could not accept order. Make sure you're online.</h4>\n            </div>\n          </>\n        );\n      });\n  };\n  const requestCancellation = () => {\n    fetch(\"/api/requestCancellation\", {\n      method: \"PATCH\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ _id: order._id }),\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        if (data.code === \"ok\") {\n          setOrders((prev) =>\n            prev.map((item) => {\n              if (item._id === order._id) {\n                return {\n                  ...item,\n                  status: data.order?.status,\n                };\n              } else {\n                return item;\n              }\n            })\n          );\n        } else {\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                <Err_svg />\n                <h4>Could not cancel order. Please try again.</h4>\n              </div>\n            </>\n          );\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        setMsg(\n          <>\n            <button onClick={() => setMsg(null)}>Okay</button>\n            <div>\n              <Err_svg />\n              <h4>Could not cancel order. Make sure you're online</h4>\n            </div>\n          </>\n        );\n      });\n  };\n  useEffect(() => {\n    setSelected(selectAll);\n  }, [selectAll]);\n  useEffect(() => {\n    if (selected) {\n      setBatch((prev) => [...prev, order._id]);\n    } else {\n      setBatch((prev) => prev.filter((item) => item !== order._id));\n    }\n  }, [selected]);\n  return (\n    <>\n      <tr\n        className={`order ${selected ? \"selected\" : \"\"}`}\n        onClick={(e) => {\n          if (\n            e.nativeEvent.path.includes(actionsRef.current) ||\n            e.nativeEvent.path.includes(checkRef.current) ||\n            batch.length > 0\n          ) {\n          } else {\n            history.push(`/account/myShop/orders/${order._id}`);\n          }\n        }}\n      >\n        {\n          //   <td className=\"checkContainer\" ref={checkRef}>\n          //   <Checkbox\n          //     defaultValue={selected}\n          //     value={selected}\n          //     onChange={(e) => {\n          //       setSelected(e);\n          //     }}\n          //   />\n          // </td>\n        }\n        <td>{order._id}</td>\n        <td className=\"date\">\n          <Moment format=\"DD MMM YYYY, hh:mm a\">{order.createdAt}</Moment>\n        </td>\n        {\n          //   <td className=\"user\">\n          //   <User user={order.buyer} />\n          // </td>\n          // <td>{order.products.reduce((a, c) => a + c.qty, 0)}</td>\n          // <td>{order.refundable || \"N/A\"}</td>\n          // <td>{order.milestones.length || \"N/A\"}</td>\n        }\n        <td>{order.total}</td>\n        <td>{order.status}</td>\n        <td ref={actionsRef}>\n          {batch.length === 0 && (\n            <Actions icon={<Chev_down_svg />}>\n              <Link to={`/account/myShopping/orders/${order._id}`}>\n                View Detail\n              </Link>\n              {order.status === \"pending\" && (\n                <>\n                  <Link\n                    to=\"#\"\n                    onClick={(e) => {\n                      Confirm({\n                        label: \"Accept Order\",\n                        question: \"You sure want to accept this order?\",\n                        callback: acceptOrder,\n                      });\n                    }}\n                  >\n                    Accept order\n                  </Link>\n                  <Link\n                    to=\"#\"\n                    onClick={(e) => {\n                      Confirm({\n                        label: \"Order Cancellation\",\n                        question: \"You sure want to cancel this order?\",\n                        callback: cancelOrder,\n                      });\n                    }}\n                  >\n                    Cancel order\n                  </Link>\n                </>\n              )}\n              {order.status === \"approved\" && (\n                <Link\n                  to=\"#\"\n                  onClick={(e) => {\n                    Confirm({\n                      label: \"Order Cancellation\",\n                      question:\n                        \"You sure want to request cancellation for this order?\",\n                      callback: requestCancellation,\n                    });\n                  }}\n                >\n                  Request Cancellation\n                </Link>\n              )}\n            </Actions>\n          )}\n        </td>\n      </tr>\n      <Modal className=\"msg\" open={msg}>\n        {msg}\n      </Modal>\n    </>\n  );\n};\n\nexport const FullOrder = ({ history, match }) => {\n  const { user, userType } = useContext(SiteContext);\n  const [msg, setMsg] = useState(null);\n  const [order, setOrder] = useState(null);\n  const [shipping, setShipping] = useState(user.shopInfo?.shippingCost || 0);\n  const [refundable, setRefundable] = useState(null);\n  const [addTerm, setAddTerm] = useState(\"\");\n  const [milestoneForm, setMilestoneForm] = useState(false);\n  const [fileUpload, setFileUpload] = useState(false);\n  const milestoneTimeout = useRef();\n  const acceptOrder = () => {\n    fetch(\"/api/acceptOrder\", {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({\n        _id: order._id,\n        // products: order.products,\n        // shippingCost: shipping,\n        // refundable,\n        // terms,\n        // total,\n      }),\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        if (data.code === \"ok\") {\n          setOrder((prev) => ({ ...prev, status: \"approved\" }));\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                <Succ_svg />\n                <h4>Order approved.</h4>\n              </div>\n            </>\n          );\n        } else {\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                <Err_svg />\n                <h4>Orders does not exist.</h4>\n              </div>\n            </>\n          );\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        setMsg(\n          <>\n            <button onClick={() => setMsg(null)}>Okay</button>\n            <div>\n              <Err_svg />\n              <h4>Could not accept order. Make sure you're online.</h4>\n            </div>\n          </>\n        );\n      });\n  };\n  const declineOrder = () => {\n    fetch(\"/api/declineOrder\", {\n      method: \"PATCH\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ _id: order._id }),\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        if (data.code === \"ok\") {\n          setOrder((prev) => ({ ...prev, status: \"declined\" }));\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                <Succ_svg />\n                <h4>Order declined.</h4>\n              </div>\n            </>\n          );\n        } else {\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                <Err_svg />\n                <h4>Orders does not exist.</h4>\n              </div>\n            </>\n          );\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        setMsg(\n          <>\n            <button onClick={() => setMsg(null)}>Okay</button>\n            <div>\n              <Err_svg />\n              <h4>Could not decline order. Make sure you're online.</h4>\n            </div>\n          </>\n        );\n      });\n  };\n  const markAsShipped = () => {\n    fetch(\"/api/updateOrder\", {\n      method: \"PATCH\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({\n        _id: order._id,\n        status: \"shipped\",\n      }),\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        if (data.code === \"ok\") {\n          setOrder((prev) => ({ ...order, status: \"shipped\" }));\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                <Succ_svg />\n                <h4>\n                  Order has been updated. Don't forget to upload proof of\n                  shipping below.\n                </h4>\n              </div>\n            </>\n          );\n        } else {\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                <Err_svg />\n                <h4>Order could not be updated. Try again.</h4>\n              </div>\n            </>\n          );\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        setMsg(\n          <>\n            <button onClick={() => setMsg(null)}>Okay</button>\n            <div>\n              <Err_svg />\n              <h4>Order could not be updated. Make sure you're online.</h4>\n            </div>\n          </>\n        );\n      });\n  };\n  const markAsDelivered = () => {\n    fetch(\"/api/updateOrder\", {\n      method: \"PATCH\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({\n        _id: order._id,\n        status: \"delivered\",\n      }),\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        if (data.code === \"ok\") {\n          setOrder((prev) => ({ ...order, status: \"delivered\" }));\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                <Succ_svg />\n                <h4>\n                  Order has been updated. Don't forget to upload proof of\n                  delivery below.\n                </h4>\n              </div>\n            </>\n          );\n        } else {\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                <Err_svg />\n                <h4>Order could not be updated. Try again.</h4>\n              </div>\n            </>\n          );\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        setMsg(\n          <>\n            <button onClick={() => setMsg(null)}>Okay</button>\n            <div>\n              <Err_svg />\n              <h4>Order could not be updated. Make sure you're online.</h4>\n            </div>\n          </>\n        );\n      });\n  };\n  useEffect(() => {\n    fetch(`/api/singleOrder?_id=${match.params._id}`)\n      .then((res) => res.json())\n      .then((data) => {\n        if (data.code === \"ok\") {\n          setOrder(data.order);\n          setShipping(data.shippingCost);\n        } else {\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                <Err_svg />\n                <h4>Orders does not exist.</h4>\n              </div>\n            </>\n          );\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        setMsg(\n          <>\n            <button onClick={() => setMsg(null)}>Okay</button>\n            <div>\n              <Err_svg />\n              <h4>Could not get order. Make sure you're online.</h4>\n            </div>\n          </>\n        );\n      });\n  }, []);\n  if (order) {\n    const productPrice = order.products.reduce(\n      (a, c) =>\n        (a + calculatePrice({ product: c.product, gst: true }) * c.qty).fix(),\n      0\n    );\n    const couponCodeDiscount =\n      (order.coupon?.type === \"percent\" &&\n        Math.min(\n          (productPrice / 100) * order.coupon.amount,\n          order.coupon.maxDiscount\n        )) ||\n      (order.coupon?.type === \"flat\" && order.coupon?.amount) ||\n      0;\n    const fee = (\n      ((productPrice - couponCodeDiscount + order.shippingCost) / 100) *\n      order.fee\n    ).fix();\n    return (\n      <>\n        <div className=\"actions\">\n          <Link\n            to={`/account/${\n              userType === \"seller\" ? \"myShop\" : \"myShopping\"\n            }/orders`}\n            className=\"back\"\n          >\n            <Arrow_left_svg />\n            Back\n          </Link>\n          {order.status === \"approved\" && (\n            <button\n              onClick={() =>\n                Confirm({\n                  label: \"Mark Order as Shipped\",\n                  question: \"Did you ship the order?\",\n                  callback: markAsShipped,\n                })\n              }\n            >\n              Mark as Shipped\n            </button>\n          )}\n          {order.status === \"shipped\" && (\n            <button\n              onClick={() =>\n                Confirm({\n                  label: \"Mark Order as Delivered\",\n                  question: \"Has the order been delivered?\",\n                  callback: markAsDelivered,\n                })\n              }\n            >\n              Mark as Delivered\n            </button>\n          )}\n          {order.status === \"pending\" && (\n            <>\n              <button\n                onClick={() => {\n                  Confirm({\n                    lable: \"Accept Order\",\n                    question: <>You sure want to accept this order?</>,\n                    callback: acceptOrder,\n                  });\n                }}\n              >\n                Accept\n              </button>\n              <button\n                onClick={() =>\n                  Confirm({\n                    label: \"Decline Order\",\n                    question: \"You sure want to decline this order?\",\n                    callback: declineOrder,\n                  })\n                }\n              >\n                Decline\n              </button>\n            </>\n          )}\n        </div>\n        <div className=\"singleOrder\">\n          <div className=\"summery\">\n            <h3>Order Summery</h3>\n            <ul>\n              <li>\n                <label>Buyer</label>\n                <User user={order.buyer} />\n              </li>\n              <li>\n                <label>Order ID</label>\n                {order._id}\n              </li>\n              <li>\n                <label>Status</label>\n                {order.status}\n              </li>\n              <li>\n                <label>Submitted at</label>\n                <Moment format=\"DD MMM YYYY, hh:mma\">{order.createdAt}</Moment>\n              </li>\n              <li>\n                <label>Note</label>\n                {order.note}\n              </li>\n              <li></li>\n              <li className=\"devide\">\n                <label>Delivery Address</label>\n                <span />\n              </li>\n              {Object.entries(order.deliveryDetail).map(([key, value], i) =>\n                key === \"deliveryWithin\" ? (\n                  <li key={i}>\n                    <label>Delivery within</label>\n                    {order.deliveryDetail.deliveryWithin} days\n                  </li>\n                ) : (\n                  <li key={i}>\n                    <label>{key}</label>\n                    {value}\n                  </li>\n                )\n              )}\n            </ul>\n          </div>\n          <div className=\"products\">\n            <h3>Products</h3>\n            <ul>\n              {order.products.map(({ product, qty, available }, i) => (\n                <li key={i}>\n                  <Img src={product.images[0] || \"/open_box.png\"} />\n                  <div className=\"detail\">\n                    <p>{product.name}</p>\n                    <p className=\"qty\">QTY: {qty}</p>\n                    {order.status === \"pending\" && (\n                      <p className=\"available\">\n                        Available: {available.toString()}\n                      </p>\n                    )}\n                  </div>\n                  <div className=\"price\">\n                    <span>\n                      {calculatePrice({ product, gst: true })} x {qty}\n                    </span>\n                    {(calculatePrice({ product, gst: true }) * qty).fix()}\n                  </div>\n                  {\n                    //   order.status === \"pending\" && (\n                    //   <div className=\"remove\">\n                    //     <button\n                    //       onClick={() => {\n                    //         setOrder((prev) => ({\n                    //           ...prev,\n                    //           products: prev.products.filter((cartProduct) => {\n                    //             console.log(cartProduct, product);\n                    //             return cartProduct.product._id !== product._id;\n                    //           }),\n                    //         }));\n                    //       }}\n                    //     >\n                    //       <X_svg />\n                    //     </button>\n                    //   </div>\n                    // )\n                  }\n                </li>\n              ))}\n            </ul>\n            <div className=\"total\">\n              <div className=\"data\">\n                <label>Total</label>{productPrice}\n              </div>\n              {order.coupon && (\n                <>\n                  <div className=\"data\">\n                    <label>\n                      Coupon Code {order.coupon.code}\n                      <br />\n                      Discount{\" \"}\n                      {order.coupon.type === \"percent\" ? (\n                        <>\n                          {order.coupon.amount}% (Upto \n                          {order.coupon.maxDiscount})\n                        </>\n                      ) : (\n                        <>flat</>\n                      )}\n                    </label>\n                    <span>{couponCodeDiscount}</span>\n                  </div>\n                </>\n              )}\n              <div className=\"data\">\n                <label>Shipping</label>\n                {\n                  //   order.status === \"pending\" ? (\n                  //   <NumberInput\n                  //     value={shipping}\n                  //     onChange={(e) => setShipping(e.target.value)}\n                  //   />\n                  // ) : (\n                  //   <>{shipping || 0}</>\n                  // )\n                  order.shippingCost\n                }\n              </div>\n              <hr />\n              <div className=\"data\">\n                <label>Delivery Pay fee {order.fee}%</label>\n                {(order.total - (order.total / (order.fee + 100)) * 100).fix()}\n              </div>\n              <hr />\n              <div className=\"data\">\n                <label>Grand Total</label>{order.total.fix()}\n              </div>\n              <hr />\n              <div className=\"data\">\n                <label>You'll recieve</label>\n                {((order.total / (order.fee + 100)) * 100).fix()}\n              </div>\n            </div>\n            {\n              //   <div className=\"deliveryInfo\">\n              //   <section>\n              //     <label>Delivery Time</label>\n              //     {order.status === \"pending\" ? (\n              //       <input\n              //         type=\"datetime-local\"\n              //         value={deliveryTime}\n              //         onChange={(e) => setDeliveryTime(e.target.value)}\n              //       />\n              //     ) : order.deliveryDetail?.deliveryTime ? (\n              //       <Moment format=\"DD MMM YYYY hh:mma\">\n              //         order.deliveryDetail?.deliveryTime\n              //       </Moment>\n              //     ) : (\n              //       <>N/A</>\n              //     )}\n              //   </section>\n              //   <section>\n              //     <label>Refundable</label>\n              //     {order.status === \"pending\" ? (\n              //       <Combobox\n              //         required={true}\n              //         defaultValue={0}\n              //         onChange={(e) => setRefundable(e.value)}\n              //         options={[\n              //           { label: \"No\", value: null },\n              //           {\n              //             label: \"Upto 24 Hours After Delivery\",\n              //             value: \"Upto 24 Hours After Delivery\",\n              //           },\n              //           {\n              //             label: \"Upto 7 Days After Delivery\",\n              //             value: \"Upto 7 Days After Delivery\",\n              //           },\n              //           {\n              //             label: \"Upto 15 Days After Delivery\",\n              //             value: \"Upto 15 Days After Delivery\",\n              //           },\n              //         ]}\n              //       />\n              //     ) : (\n              //       <>{order.refundable || \"N/A\"}</>\n              //     )}\n              //   </section>\n              // </div>\n            }\n          </div>\n          <div className=\"milestones\">\n            <h3>\n              Milestones\n              {\n                //   (order.status === \"approved\" ||\n                //   order.status === \"shipped\" ||\n                //   order.status === \"delivered\") && (\n                //   <button onClick={() => setMilestoneForm(true)}>\n                //     Request Milestone\n                //   </button>\n                // )\n              }\n            </h3>\n            <p className=\"subtitle\">Click to view milestone detail.</p>\n            {\n              // {order.status === \"pending\" ? (\n              //   <p>Buyer can create milestones after you accept the order.</p>\n              // ) : (\n            }\n            <table>\n              <thead>\n                <tr>\n                  <td>Date</td>\n                  <td>Descrption</td>\n                  <td>Amount</td>\n                  <td>Status</td>\n                </tr>\n              </thead>\n              <tbody>\n                {order.milestones.map((milestone) => (\n                  <tr\n                    key={milestone._id}\n                    onClick={() =>\n                      history.push(`/account/hold?q=${milestone._id}`)\n                    }\n                  >\n                    <td>\n                      <Moment format=\"DD MMM YYYY, hh:mma\">\n                        {milestone.createdAt}\n                      </Moment>\n                    </td>\n                    <td>{milestone.dscr}</td>\n                    <td>{milestone.amount}</td>\n                    <td>{milestone.status}</td>\n                  </tr>\n                ))}\n                {order.milestones.length === 0 && (\n                  <tr className=\"placeholdert\">\n                    <td>Nothing yet.</td>\n                  </tr>\n                )}\n              </tbody>\n            </table>\n            {\n              // )}\n            }\n          </div>\n          <div className=\"delivery\">\n            <h3>\n              Proof of delivery\n              {(order.status === \"approved\" || order.status === \"shipped\") && (\n                <button onClick={() => setFileUpload(true)}>\n                  Upload proof of delivery\n                </button>\n              )}\n            </h3>\n            {order.files?.length > 0 ? (\n              <div className=\"thumbs\">\n                <Media links={order.files} />\n              </div>\n            ) : (\n              <>No files added.</>\n            )}\n          </div>\n          <section className=\"terms\">\n            <h3>Return Policy Terms</h3>\n            <ul>\n              {order.terms?.map((item, i) => (\n                <li key={i}>\n                  {item}{\" \"}\n                  {\n                    //   order.status === \"pending\" && (\n                    //   <button\n                    //     type=\"button\"\n                    //     onClick={() =>\n                    //       setTerms((prev) => prev.filter((term) => term !== item))\n                    //     }\n                    //   >\n                    //     <X_svg />\n                    //   </button>\n                    // )\n                  }\n                </li>\n              ))}\n              {\n                //   order.status === \"pending\" && (\n                //   <section className=\"addTerm\">\n                //     <TextareaAutosize\n                //       value={addTerm}\n                //       placeholder=\"Add auditional term\"\n                //       onChange={(e) => setAddTerm(e.target.value)}\n                //     />\n                //     <button\n                //       type=\"button\"\n                //       onClick={() => {\n                //         setTerms((prev) =>\n                //           addTerm\n                //             ? [\n                //                 ...prev.filter((term) => term !== addTerm),\n                //                 addTerm,\n                //               ]\n                //             : prev\n                //         );\n                //         setAddTerm(\"\");\n                //       }}\n                //     >\n                //       Add Term\n                //     </button>\n                //   </section>\n                // )\n              }\n            </ul>\n          </section>\n        </div>\n        <Modal\n          head={true}\n          label=\"Create Milestone\"\n          setOpen={setMilestoneForm}\n          className=\"milestoneRequest\"\n          open={milestoneForm}\n        >\n          <MilestoneForm\n            action=\"request\"\n            definedAmount={order.total}\n            client={order.buyer}\n            order={order._id}\n            onSuccess={(milestone) => {\n              setMilestoneForm(false);\n              setMsg(\n                <>\n                  <button onClick={() => setMsg(null)}>Okay</button>\n                  <div>\n                    <Succ_svg />\n                    <h4 className=\"amount\">{milestone?.amount}</h4>\n                    <h4>Milestone has been requested</h4>\n                  </div>\n                  <Link to=\"/account/hold\" onClick={() => setMsg(null)}>\n                    Check your Delivery pay Hold\n                  </Link>\n                </>\n              );\n              setOrder((prev) => ({\n                ...prev,\n                milestones: [...prev.milestones, milestone],\n              }));\n            }}\n          />\n        </Modal>\n        <Modal\n          head={true}\n          label=\"Upload proof of shipping & delivery\"\n          setOpen={setFileUpload}\n          open={fileUpload}\n          className=\"fileUpload\"\n        >\n          <FileUploadForm\n            order={order}\n            onSuccess={(order) => {\n              setFileUpload(false);\n              setOrder((prev) => ({ ...prev, files: order.files }));\n            }}\n          />\n        </Modal>\n        <Modal className=\"msg\" open={msg}>\n          {msg}\n        </Modal>\n      </>\n    );\n  }\n  return <>Loading</>;\n};\nconst FileUploadForm = ({ order, onSuccess }) => {\n  const [loading, setLoading] = useState(false);\n  const [files, setFiles] = useState([]);\n  const [msg, setMsg] = useState(null);\n  const submit = async () => {\n    setLoading(true);\n    const fileLinks = files.length ? await UploadFiles({ files, setMsg }) : [];\n    fetch(\"/api/updateOrder\", {\n      method: \"PATCH\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ _id: order._id, files: fileLinks }),\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        setLoading(false);\n        if (data.code === \"ok\") {\n          onSuccess?.(data.order);\n        } else {\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                <Err_svg />\n                <h4>Could not upload files. Try again.</h4>\n              </div>\n            </>\n          );\n        }\n      })\n      .catch((err) => {\n        setLoading(false);\n        console.log(err);\n        setMsg(\n          <>\n            <button onClick={() => setMsg(null)}>Okay</button>\n            <div>\n              <Err_svg />\n              <h4>Could not upload files. Make sure you're online.</h4>\n            </div>\n          </>\n        );\n      });\n  };\n  return (\n    <>\n      <form\n        onSubmit={(e) => {\n          e.preventDefault();\n          Confirm({\n            title: \"Upload Proof of Shipping & Delivery\",\n            question: (\n              <>\n                You sure want to upload these files?\n                <span className=\"note\">\n                  Keep in mind these files can not be deleted later.\n                </span>\n              </>\n            ),\n            callback: submit,\n          });\n        }}\n      >\n        <section>\n          <label>Upload Images of the products, shipment reciept etc.</label>\n          <FileInput\n            multiple={true}\n            accept=\"image/*\"\n            required={true}\n            onChange={(files) => setFiles(files)}\n          />\n        </section>\n        <section className=\"btns\">\n          <button className=\"submit\">Submit</button>\n        </section>\n      </form>\n      {loading && (\n        <div className=\"spinnerContainer\">\n          <div className=\"spinner\" />\n        </div>\n      )}\n      <Modal className=\"msg\" open={msg}>\n        {msg}\n      </Modal>\n    </>\n  );\n};\n\nexport default Orders;\n","import {\n  useState,\n  useEffect,\n  useRef,\n  useLayoutEffect,\n  useContext,\n  lazy,\n} from \"react\";\nimport {\n  Succ_svg,\n  Err_svg,\n  Plus_svg,\n  X_svg,\n  Combobox,\n  Pagination,\n  Checkbox,\n  calculateDiscount,\n  calculatePrice,\n  Actions,\n  Chev_down_svg,\n  User,\n  Arrow_left_svg,\n  Media,\n  Img,\n  Moment,\n  moment,\n  InputDateRange,\n} from \"../Elements\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport { SiteContext } from \"../../SiteContext\";\nimport { Modal, Confirm } from \"../Modal\";\nimport { toast } from \"react-toastify\";\nconst MilestoneForm = lazy(() =>\n  import(\"../Forms\").then((mod) => ({ default: mod.MilestoneForm }))\n);\n\nconst Refunds = ({ history, location }) => {\n  const { userType } = useContext(SiteContext);\n  const [total, setTotal] = useState(0);\n  const [page, setPage] = useState(1);\n  const [perPage, setPerPage] = useState(20);\n  const [search, setSearch] = useState(\"\");\n  const [status, setStatus] = useState(\"\");\n  const [sort, setSort] = useState({\n    column: \"createdAt\",\n    order: \"dsc\",\n  });\n  const [dateRange, setDateRange] = useState(null);\n  const [refunds, setRefunds] = useState([]);\n  const [selectAll, setSelectAll] = useState(false);\n  const [batch, setBatch] = useState([]);\n  const [msg, setMsg] = useState(null);\n  useEffect(() => {\n    const startDate = moment({\n      time: dateRange?.startDate,\n      format: \"YYYY-MM-DD\",\n    });\n    const endDate = moment({\n      time: new Date(dateRange?.endDate)?.setHours(24, 0, 0, 0),\n      format: \"YYYY-MM-DD\",\n    });\n    fetch(\n      `/api/getRefunds?${new URLSearchParams({\n        user: userType,\n        ...(search && { q: search }),\n        page,\n        perPage,\n        sort: sort.column,\n        order: sort.order,\n        ...(dateRange && {\n          dateFrom: startDate,\n          dateTo: endDate,\n        }),\n        ...(status && { status }),\n      })}`\n    )\n      .then((res) => res.json())\n      .then((data) => {\n        if (data.code === \"ok\") {\n          setRefunds(data.refunds);\n          setTotal(data.total);\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        setMsg(\n          <>\n            <button onClick={() => setMsg(null)}>Okay</button>\n            <div>\n              <Err_svg />\n              <h4>Could not get orders.</h4>\n            </div>\n          </>\n        );\n      });\n  }, [search, page, perPage, dateRange, status]);\n  useEffect(() => {\n    if (selectAll) {\n    } else {\n      setBatch([]);\n    }\n  }, [selectAll]);\n  useEffect(() => {\n    if (batch.length === 0) {\n      setSelectAll(false);\n    }\n  }, [batch]);\n  return (\n    <>\n      <div className=\"benner\">\n        <p>My Refunds</p>\n      </div>\n      <div className=\"filters\">\n        <section>\n          <label>Total:</label>\n          {total}\n        </section>\n        <section>\n          <label>Per Page:</label>\n          <Combobox\n            defaultValue={0}\n            options={[\n              { label: \"20\", value: 20 },\n              { label: \"30\", value: 30 },\n              { label: \"50\", value: 50 },\n            ]}\n            onChange={(e) => setPerPage(e.value)}\n          />\n        </section>\n        <section className=\"search\">\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            width=\"23\"\n            height=\"23\"\n            viewBox=\"0 0 23 23\"\n          >\n            <path\n              id=\"Icon_ionic-ios-search\"\n              data-name=\"Icon ionic-ios-search\"\n              d=\"M27.23,25.828l-6.4-6.455a9.116,9.116,0,1,0-1.384,1.4L25.8,27.188a.985.985,0,0,0,1.39.036A.99.99,0,0,0,27.23,25.828ZM13.67,20.852a7.2,7.2,0,1,1,5.091-2.108A7.155,7.155,0,0,1,13.67,20.852Z\"\n              transform=\"translate(-4.5 -4.493)\"\n              fill=\"#707070\"\n              opacity=\"0.74\"\n            />\n          </svg>\n          <input\n            value={search}\n            onChange={(e) => setSearch(e.target.value)}\n            placeholder=\"Search for Customer\"\n          />\n          {search && (\n            <button onClick={() => setSearch(\"\")}>\n              <X_svg />\n            </button>\n          )}\n        </section>\n        <section className=\"category\">\n          <label>Status:</label>\n          <Combobox\n            defaultValue={0}\n            options={[\n              { label: \"All\", value: \"\" },\n              { label: \"Pending\", value: \"pending\" },\n              { label: \"Approved\", value: \"approved\" },\n              { label: \"Product Sent\", value: \"productSent\" },\n              { label: \"Product Recieved\", value: \"productRecieved\" },\n              { label: \"Resolved\", value: \"resolved\" },\n            ]}\n            onChange={(e) => setStatus(e.value)}\n          />\n        </section>\n        <section className={`date`}>\n          <InputDateRange\n            dateRange={dateRange}\n            onChange={(range) => setDateRange(range)}\n          />\n        </section>\n      </div>\n      {batch.length > 0 && (\n        <div className=\"batchAction\">\n          <button onClick={() => console.log(\"batch delete\")}>Delete</button>\n        </div>\n      )}\n      <table className=\"table refunds\">\n        <thead>\n          <tr>\n            {\n              //   <th className=\"checkContainer\">\n              //   <Checkbox\n              //     value={selectAll}\n              //     defaultValue={selectAll}\n              //     onChange={(e) => setSelectAll(e)}\n              //   />\n              // </th>\n            }\n            <th className=\"date\">Date</th>\n            <th>Customer</th>\n            <th>QTY</th>\n            <th>Status</th>\n            <th>Total Price</th>\n            {\n              // <th>Actions</th>\n            }\n          </tr>\n        </thead>\n        <tbody>\n          {refunds.map((refund) => (\n            <SingleRefund\n              key={refund._id}\n              refund={refund}\n              setRefunds={setRefunds}\n              selectAll={selectAll}\n              setBatch={setBatch}\n              batch={batch}\n            />\n          ))}\n          {refunds.length === 0 && (\n            <tr className=\"placeholder\">\n              <td>No product yet.</td>\n            </tr>\n          )}\n        </tbody>\n      </table>\n      <Pagination\n        total={total}\n        btns={5}\n        currentPage={page}\n        perPage={perPage}\n        setPage={setPage}\n      />\n      <Modal className=\"msg\" open={msg}>\n        {msg}\n      </Modal>\n    </>\n  );\n};\nconst SingleRefund = ({ refund, setRefunds, selectAll, setBatch, batch }) => {\n  const history = useHistory();\n  const { user } = useContext(SiteContext);\n  const [selected, setSelected] = useState(selectAll || false);\n  const [edit, setEdit] = useState(false);\n  const [msg, setMsg] = useState(false);\n  useEffect(() => {\n    setSelected(selectAll);\n  }, [selectAll]);\n  useEffect(() => {\n    if (selected) {\n      setBatch((prev) => [...prev, refund._id]);\n    } else {\n      setBatch((prev) => prev.filter((item) => item !== refund._id));\n    }\n  }, [selected]);\n  return (\n    <>\n      <tr\n        className={`refund ${selected ? \"selected\" : \"\"}`}\n        onClick={() => history.push(`/account/myShop/refunds/${refund._id}`)}\n      >\n        {\n          //   <td className=\"checkContainer\">\n          //   <Checkbox\n          //     defaultValue={selected}\n          //     value={selected}\n          //     onChange={(e) => {\n          //       setSelected(e);\n          //     }}\n          //   />\n          // </td>\n        }\n        <td className=\"date\">\n          <Moment format=\"DD MMM YYYY, hh:mm a\">{refund.createdAt}</Moment>\n        </td>\n        <td>\n          <User user={refund.seller} />\n        </td>\n        <td>{refund.order?.products.reduce((a, c) => a + c.qty, 0)}</td>\n        <td>{refund.status}</td>\n        <td>{refund.order.total}</td>\n        {\n          //   <td>\n          //   {batch.length === 0 && (\n          //     <Actions icon={<Chev_down_svg />}>\n          //       <Link to=\"#\" className=\"edit\" onClick={() => setEdit(true)}>\n          //         Edit\n          //       </Link>\n          //       <Link\n          //         to=\"#\"\n          //         className=\"delete\"\n          //         onClick={() =>\n          //           Confirm({\n          //             label: \"Removing Product\",\n          //             question: \"You sure want to delete this product?\",\n          //             callback: removeProduct,\n          //           })\n          //         }\n          //       >\n          //         Delete\n          //       </Link>\n          //     </Actions>\n          //   )}\n          // </td>\n        }\n      </tr>\n      <Modal className=\"msg\" open={msg}>\n        {msg}\n      </Modal>\n    </>\n  );\n};\nexport const FullRefund = ({ history, match }) => {\n  const { userType } = useContext(SiteContext);\n  const [msg, setMsg] = useState(null);\n  const [refund, setRefund] = useState(null);\n  const [order, setOrder] = useState(null);\n  const [milestoneForm, setMilestoneForm] = useState(false);\n  const [refundTill, setRefundTill] = useState(false);\n  const milestoneTimeout = useRef();\n  // const updateOrder = async (newData) => {\n  //   return fetch(\"/api/updateRefund\", {\n  //     method: \"PATCH\",\n  //     headers: { \"Content-Type\": \"application/json\" },\n  //     body: JSON.stringify(newData),\n  //   })\n  //     .then((res) => res.json())\n  //     .then((data) => {\n  //       if (data.code === \"ok\") {\n  //         return data.order;\n  //       } else {\n  //         setMsg(\n  //           <>\n  //             <button onClick={() => setMsg(null)}>Okay</button>\n  //             <div>\n  //               <Err_svg />\n  //               <h4>Orders does not exist.</h4>\n  //             </div>\n  //           </>\n  //         );\n  //       }\n  //     })\n  //     .catch((err) => {\n  //       console.log(err);\n  //       setMsg(\n  //         <>\n  //           <button onClick={() => setMsg(null)}>Okay</button>\n  //           <div>\n  //             <Err_svg />\n  //             <h4>Could not update order. Make sure you're online.</h4>\n  //           </div>\n  //         </>\n  //       );\n  //     });\n  // };\n  const updateRefund = async (newData) => {\n    return fetch(\"/api/updateRefund\", {\n      method: \"PATCH\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ ...newData, _id: refund._id }),\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        if (data.code === \"ok\") {\n          return data.order;\n        } else {\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                <Err_svg />\n                <h4>Refund request does not exist.</h4>\n              </div>\n            </>\n          );\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        setMsg(\n          <>\n            <button onClick={() => setMsg(null)}>Okay</button>\n            <div>\n              <Err_svg />\n              <h4>Could not update refund. Make sure you're online.</h4>\n            </div>\n          </>\n        );\n      });\n  };\n  const acceptRefund = async () => {\n    fetch(\"/api/acceptRefund\", {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ _id: refund._id }),\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        if (data.code === \"ok\") {\n          setRefund((prev) => ({ ...prev, status: \"approved\" }));\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                <Succ_svg />\n                <h4>Refund request has been approved.</h4>\n              </div>\n            </>\n          );\n        } else {\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                <Err_svg />\n                <h4>Refund request does not exist.</h4>\n              </div>\n            </>\n          );\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        setMsg(\n          <>\n            <button onClick={() => setMsg(null)}>Okay</button>\n            <div>\n              <Err_svg />\n              <h4>Could not accept refund request. Make sure you're online.</h4>\n            </div>\n          </>\n        );\n      });\n  };\n  const declineRefund = async () => {\n    fetch(\"/api/declineRefund\", {\n      method: \"PATCH\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ _id: refund._id }),\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        if (data.code === \"ok\") {\n          setRefund((prev) => ({ ...prev, status: \"declined\" }));\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                <Succ_svg />\n                <h4>Refund request has been declined.</h4>\n              </div>\n            </>\n          );\n        } else {\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                <Err_svg />\n                <h4>Refund request does not exist.</h4>\n              </div>\n            </>\n          );\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        setMsg(\n          <>\n            <button onClick={() => setMsg(null)}>Okay</button>\n            <div>\n              <Err_svg />\n              <h4>\n                Could not decline refund request. Make sure you're online.\n              </h4>\n            </div>\n          </>\n        );\n      });\n  };\n  useEffect(() => {\n    fetch(`/api/singleRefund?_id=${match.params._id}`)\n      .then((res) => res.json())\n      .then((data) => {\n        if (data.code === \"ok\") {\n          setOrder(data.refund.order);\n          setRefund(data.refund);\n        } else {\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                <Err_svg />\n                <h4>Refund does not exist.</h4>\n              </div>\n            </>\n          );\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        setMsg(\n          <>\n            <button onClick={() => setMsg(null)}>Okay</button>\n            <div>\n              <Err_svg />\n              <h4>Could not get Refund. Make sure you're online.</h4>\n            </div>\n          </>\n        );\n      });\n  }, []);\n  useEffect(() => {\n    if (order?.refundable) {\n      let days = 0;\n      switch (order.refundable) {\n        case \"Upto 24 Hours After Delivery\":\n          days = 1;\n          break;\n        case \"Upto 7 Days After Delivery\":\n          days = 7;\n          break;\n        case \"Upto 15 Days After Delivery\":\n          days = 15;\n          break;\n        default:\n          return;\n      }\n      const refundTill = new Date(\n        new Date().getTime() + 1000 * 60 * 60 * 24 * days\n      );\n      if (new Date() < refundTill) {\n        setRefundTill(refundTill);\n      } else {\n        setRefundTill(null);\n      }\n    } else {\n      setRefundTill(null);\n    }\n  }, [refund]);\n  if (refund) {\n    return (\n      <>\n        <div className=\"actions\">\n          <Link\n            to={`/account/${\n              userType === \"seller\" ? \"myShop\" : \"myShopping\"\n            }/refunds`}\n            className=\"back\"\n          >\n            <Arrow_left_svg />\n            Back\n          </Link>\n          {refund.status === \"productSent\" && (\n            <button\n              onClick={() =>\n                Confirm({\n                  label: \"Refund Resolved\",\n                  question: \"You sure want to mark this refund resolved?\",\n                  callback: () => {\n                    updateRefund({ status: \"productRecieved\" }).then(\n                      (refund) => {\n                        setRefund((prev) => ({\n                          ...prev,\n                          status: \"productRecieved\",\n                        }));\n                      }\n                    );\n                  },\n                })\n              }\n            >\n              Mark as Recieved\n            </button>\n          )}\n          {refund.status === \"pending\" && (\n            <>\n              <button\n                onClick={() =>\n                  Confirm({\n                    label: \"Accepting Refund\",\n                    question: \"Do you accept this refund request?\",\n                    callback: acceptRefund,\n                  })\n                }\n              >\n                Accept\n              </button>\n              <button\n                onClick={() =>\n                  Confirm({\n                    label: \"Declining Refund\",\n                    question: \"Do you decline this refund?\",\n                    callback: declineRefund,\n                  })\n                }\n              >\n                Decline\n              </button>\n            </>\n          )}\n        </div>\n        <div className=\"singleOrder\">\n          <div className=\"summery\">\n            <h3>Summery</h3>\n            <ul>\n              <li className=\"devide\">\n                <label>Order</label>\n                <span />\n              </li>\n              <li>\n                <label>Seller</label>\n                <User user={order.seller} />\n              </li>\n              <li>\n                <label>Order ID</label>\n                {order._id}\n              </li>\n              <li>\n                <label>Status</label>\n                {order.status}\n              </li>\n              <li>\n                <label>Ordered at</label>\n                <Moment format=\"DD MMM YYYY, hh:mma\">{order.createdAt}</Moment>\n              </li>\n              <li>\n                <label>Delivered at</label>\n                <Moment format=\"DD MMM YYYY, hh:mm a\">\n                  {order.deliveredAt}\n                </Moment>\n              </li>\n              <li>\n                <label>Refundable</label>\n                {order.refundable || \"N/A\"}\n              </li>\n              <li>\n                <label>Proof of delivery</label>\n                {order.files?.length > 0 ? (\n                  <div className=\"thumbs\">\n                    <Media links={order.files} />\n                  </div>\n                ) : (\n                  <>No files added.</>\n                )}\n              </li>\n              {refundTill && (\n                <li>\n                  <label>Refund till</label>\n                  <Moment format=\"DD MMM YYYY, hh:mm a\">{refundTill}</Moment>\n                </li>\n              )}\n              <li></li>\n              <li className=\"devide\">\n                <label>Refund</label>\n                <span />\n              </li>\n              <li>\n                <label>Refund ID</label>\n                {refund._id}\n              </li>\n              <li>\n                <label>Status</label>\n                {refund.status}\n              </li>\n              <li>\n                <label>Submitted at</label>\n                <Moment format=\"DD MMM YYYY, hh:mma\">{refund.createdAt}</Moment>\n              </li>\n              <li>\n                <label>Issue</label>\n                {refund.issue}\n              </li>\n              <li>\n                <label>Descrption</label>\n                {refund.dscr}\n              </li>\n              <li>\n                <label>Images</label>\n                <div className=\"thumbs\">\n                  {refund.files.length ? (\n                    <Media links={refund.files} />\n                  ) : (\n                    <>No Images has been provided.</>\n                  )}\n                </div>\n              </li>\n              <li></li>\n              <li className=\"devide\">\n                <label>Delivery Address</label>\n                <span />\n              </li>\n              <>\n                {Object.entries(order.deliveryDetail).map(([key, value], i) =>\n                  key === \"deliveryTime\" ? (\n                    <li key={i}>\n                      <label>Delivery date</label>\n                      {order.deliveryDetail.deliveryTime ? (\n                        <Moment format=\"DD MMM, YYYY hh:mma\">\n                          {order.deliveryDetail.deliveryTime}\n                        </Moment>\n                      ) : (\n                        \"N/A\"\n                      )}\n                    </li>\n                  ) : (\n                    <li key={i}>\n                      <label>{key}</label>\n                      {value}\n                    </li>\n                  )\n                )}\n              </>\n            </ul>\n          </div>\n          <div className=\"products\">\n            <h3>Products</h3>\n            <ul>\n              {order.products.map(({ product, qty }, i) => (\n                <li key={i}>\n                  <Img src={product.images[0] || \"/open_box.png\"} />\n                  <div className=\"detail\">\n                    <p>{product.name}</p>\n                    <p className=\"qty\">QTY: {qty}</p>\n                  </div>\n                  <div className=\"price\">\n                    <span>\n                      {calculatePrice({ product, gst: true })} x {qty}\n                    </span>\n                    {calculatePrice({ product, gst: true }) * qty}\n                  </div>\n                </li>\n              ))}\n            </ul>\n            <div className=\"total\">\n              <div className=\"data\">\n                <label>Total</label>\n                {order.products.reduce(\n                  (a, c) =>\n                    a +\n                    calculatePrice({ product: c.product, gst: true }) * c.qty,\n                  0\n                )}\n              </div>\n              <div className=\"data\">\n                <label>Shipping</label>\n                {order.shipping || \"N/A\"}\n              </div>\n              <div className=\"data\">\n                <label>Grand Total</label>\n                {order.products.reduce(\n                  (a, c) =>\n                    a +\n                    calculatePrice({ product: c.product, gst: true }) * c.qty,\n                  0\n                ) + (+order.shipping || 0)}\n              </div>\n            </div>\n          </div>\n          <div className=\"milestones\">\n            <h3>\n              Milestones\n              {(refund.status === \"approved\" ||\n                refund.status === \"productSent\" ||\n                refund.status === \"productRecieved\") && (\n                <button onClick={() => setMilestoneForm(true)}>\n                  Create Milestone\n                </button>\n              )}\n            </h3>\n            {refund.status === \"pending\" && (\n              <p>\n                You can create milestones once you accept the refund request.\n              </p>\n            )}\n            {refund.status === \"declined\" && (\n              <p>This refund request has been declined.</p>\n            )}\n            {!(refund.status === \"declined\" || refund.status === \"pending\") && (\n              <table cellSpacing={0} cellPadding={0}>\n                <thead>\n                  <tr>\n                    <td>Date</td>\n                    <td>Descrption</td>\n                    <td>Amount</td>\n                    <td>Status</td>\n                  </tr>\n                </thead>\n                <tbody>\n                  {refund.milestones.map((milestone) => (\n                    <tr\n                      key={milestone._id}\n                      onClick={() =>\n                        history.push(`/account/hold?q=${milestone._id}`)\n                      }\n                    >\n                      <td>\n                        <Moment format=\"DD MMM YYYY, hh:mma\">\n                          {milestone.createdAt}\n                        </Moment>\n                      </td>\n                      <td>{milestone.dscr}</td>\n                      <td>{milestone.amount}</td>\n                      <td>{milestone.status}</td>\n                    </tr>\n                  ))}\n                  {refund.milestones.length === 0 && (\n                    <tr className=\"placeholdert\">\n                      <td>Nothing yet.</td>\n                    </tr>\n                  )}\n                </tbody>\n              </table>\n            )}\n          </div>\n          <section className=\"terms\">\n            <h3>Return Policy Terms</h3>\n            <ul>\n              {order.terms?.map((item, i) => (\n                <li key={i}>{item}</li>\n              ))}\n              {!order.terms?.length && (\n                <li>No terms has been set by the seller yet.</li>\n              )}\n            </ul>\n          </section>\n        </div>\n        <Modal\n          head={true}\n          label=\"Create Milestone\"\n          setOpen={setMilestoneForm}\n          className=\"milestoneRequest\"\n          open={milestoneForm}\n        >\n          <MilestoneForm\n            action=\"create\"\n            definedAmount={order.total}\n            client={refund.seller}\n            refund={refund._id}\n            onSuccess={(milestone) => {\n              setMilestoneForm(false);\n              setMsg(\n                <>\n                  <button onClick={() => setMsg(null)}>Okay</button>\n                  <div>\n                    <Succ_svg />\n                    <h4 className=\"amount\">{milestone?.amount}</h4>\n                    <h4>Milestone has been created</h4>\n                  </div>\n                  <Link to=\"/account/hold\" onClick={() => setMsg(null)}>\n                    Check your Delivery pay Hold\n                  </Link>\n                </>\n              );\n              setRefund((prev) => ({\n                ...prev,\n                milestones: [...prev.milestones, milestone],\n              }));\n            }}\n          />\n        </Modal>\n        <Modal className=\"msg\" open={msg}>\n          {msg}\n        </Modal>\n      </>\n    );\n  }\n  return <>Loading</>;\n};\n\nexport default Refunds;\n","import {\n  useState,\n  useEffect,\n  useRef,\n  useLayoutEffect,\n  useContext,\n  lazy,\n} from \"react\";\nimport {\n  Succ_svg,\n  Err_svg,\n  Plus_svg,\n  X_svg,\n  Combobox,\n  Pagination,\n  Checkbox,\n  calculateDiscount,\n  calculatePrice,\n  Actions,\n  Chev_down_svg,\n  User,\n  Arrow_left_svg,\n  NumberInput,\n  Media,\n  UploadFiles,\n  FileInput,\n  Img,\n  Moment,\n  moment,\n} from \"../Elements\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport { SiteContext } from \"../../SiteContext\";\nimport { Modal, Confirm } from \"../Modal\";\nimport TextareaAutosize from \"react-textarea-autosize\";\nimport { MilestoneForm } from \"../Account\";\nimport { toast } from \"react-toastify\";\n\nconst Coupons = ({ categories }) => {\n  const [total, setTotal] = useState(0);\n  const [page, setPage] = useState(1);\n  const [perPage, setPerPage] = useState(20);\n  const [status, setStatus] = useState(\"\");\n  const [search, setSearch] = useState(\"\");\n  const [sort, setSort] = useState({\n    column: \"createdAt\",\n    coupon: \"dsc\",\n  });\n  const [coupons, setCoupons] = useState([]);\n  const [selectAll, setSelectAll] = useState(false);\n  const [batch, setBatch] = useState([]);\n  const [msg, setMsg] = useState(null);\n  useEffect(() => {\n    fetch(\n      `/api/getCoupons?${new URLSearchParams({\n        ...(search && { q: search }),\n        page,\n        perPage,\n        sort: sort.column,\n        order: sort.order,\n        ...(status && { status }),\n      })}`\n    )\n      .then((res) => res.json())\n      .then((data) => {\n        if (data.code === \"ok\") {\n          setCoupons(data.coupons);\n          setTotal(data.total);\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        setMsg(\n          <>\n            <button onClick={() => setMsg(null)}>Okay</button>\n            <div>\n              <Err_svg />\n              <h4>Could not get coupons.</h4>\n            </div>\n          </>\n        );\n      });\n  }, [status, search, page, perPage]);\n  useEffect(() => {\n    if (selectAll) {\n    } else {\n      setBatch([]);\n    }\n  }, [selectAll]);\n  useEffect(() => {\n    if (batch.length === 0) {\n      setSelectAll(false);\n    }\n  }, [batch]);\n  return (\n    <>\n      <div className=\"benner\">\n        <p>Order Management</p>\n      </div>\n      <div className=\"filters\">\n        <section>\n          <label>Total:</label>\n          {total}\n        </section>\n        <section>\n          <label>Per Page:</label>\n          <Combobox\n            defaultValue={0}\n            options={[\n              { label: \"20\", value: 20 },\n              { label: \"30\", value: 30 },\n              { label: \"50\", value: 50 },\n            ]}\n            onChange={(e) => setPerPage(e.value)}\n          />\n        </section>\n        <section className=\"search\">\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            width=\"23\"\n            height=\"23\"\n            viewBox=\"0 0 23 23\"\n          >\n            <path\n              id=\"Icon_ionic-ios-search\"\n              data-name=\"Icon ionic-ios-search\"\n              d=\"M27.23,25.828l-6.4-6.455a9.116,9.116,0,1,0-1.384,1.4L25.8,27.188a.985.985,0,0,0,1.39.036A.99.99,0,0,0,27.23,25.828ZM13.67,20.852a7.2,7.2,0,1,1,5.091-2.108A7.155,7.155,0,0,1,13.67,20.852Z\"\n              transform=\"translate(-4.5 -4.493)\"\n              fill=\"#707070\"\n              opacity=\"0.74\"\n            />\n          </svg>\n          <input\n            value={search}\n            onChange={(e) => setSearch(e.target.value)}\n            placeholder=\"Search for Buyer\"\n          />\n          {search && (\n            <button onClick={() => setSearch(\"\")}>\n              <X_svg />\n            </button>\n          )}\n        </section>\n        <section className=\"category\">\n          <label>Status:</label>\n          <Combobox\n            defaultValue={0}\n            options={[\n              { label: \"All\", value: \"\" },\n              { label: \"Pending\", value: \"draft\" },\n              { label: \"Active\", value: \"active\" },\n              { label: \"Inactive\", value: \"inactive\" },\n            ]}\n            onChange={(e) => setStatus(e.value)}\n          />\n        </section>\n      </div>\n      {batch.length > 0 && (\n        <div className=\"batchAction\">\n          <button onClick={() => console.log(\"batch delete\")}>Delete</button>\n        </div>\n      )}\n      <table className=\"table coupons\">\n        <thead>\n          <tr>\n            {\n              //   <th className=\"checkContainer\">\n              //   <Checkbox\n              //     value={selectAll}\n              //     defaultValue={selectAll}\n              //     onChange={(e) => setSelectAll(e)}\n              //   />\n              // </th>\n            }\n            <th className=\"date\">Date</th>\n            <th>Title</th>\n            <th>Status</th>\n            <th>Code</th>\n            <th>Discount</th>\n            <th>Threshold</th>\n            <th>Validity</th>\n            <th>Accept</th>\n            <th>Actions</th>\n          </tr>\n        </thead>\n        <tbody>\n          {coupons.map((coupon, i) => (\n            <SingleCoupon\n              key={i}\n              coupon={coupon}\n              setCoupons={setCoupons}\n              selectAll={selectAll}\n              setBatch={setBatch}\n              batch={batch}\n            />\n          ))}\n          {coupons.length === 0 && (\n            <tr className=\"placeholder\">\n              <td>No Campaign yet.</td>\n            </tr>\n          )}\n        </tbody>\n      </table>\n      <Pagination\n        total={total}\n        btns={5}\n        currentPage={page}\n        perPage={perPage}\n        setPage={setPage}\n      />\n      <Modal className=\"msg\" open={msg}>\n        {msg}\n      </Modal>\n    </>\n  );\n};\nconst SingleCoupon = ({ coupon, setCoupons, selectAll, setBatch, batch }) => {\n  const actionsRef = useRef();\n  const checkRef = useRef();\n  const history = useHistory();\n  const { user } = useContext(SiteContext);\n  const [selected, setSelected] = useState(selectAll || false);\n  const [edit, setEdit] = useState(false);\n  const [msg, setMsg] = useState(false);\n  const [couponDetail, setCouponDetail] = useState(false);\n  const declineCoupon = (_id) => {\n    fetch(\"/api/declineCoupon\", {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ _id }),\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        if (data.code === \"ok\") {\n          setCoupons((prev) =>\n            prev.map((item) => {\n              if (item._id === _id) {\n                return {\n                  ...item,\n                  accept: false,\n                };\n              }\n              return item;\n            })\n          );\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                <Succ_svg />\n                <h4>\n                  Coupon code declined. Buyers can no longer apply this coupon\n                  code on your shop.\n                </h4>\n              </div>\n            </>\n          );\n        } else {\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                <Err_svg />\n                <h4>Could not decline Coupon code. please try again.</h4>\n              </div>\n            </>\n          );\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        setMsg(\n          <>\n            <button onClick={() => setMsg(null)}>Okay</button>\n            <div>\n              <Err_svg />\n              <h4>Could not decline Coupon code. Make sure you're online.</h4>\n            </div>\n          </>\n        );\n      });\n  };\n  const acceptCoupon = (_id) => {\n    fetch(\"/api/acceptCoupon\", {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ _id }),\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        if (data.code === \"ok\") {\n          setCoupons((prev) =>\n            prev.map((item) => {\n              if (item._id === _id) {\n                return {\n                  ...item,\n                  accept: true,\n                };\n              }\n              return item;\n            })\n          );\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                <Succ_svg />\n                <h4>\n                  Coupon code accepted. Now Buyers can apply this coupon code on\n                  your shop.\n                </h4>\n              </div>\n            </>\n          );\n        } else {\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                <Err_svg />\n                <h4>Could not accept Coupon code. please try again.</h4>\n              </div>\n            </>\n          );\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        setMsg(\n          <>\n            <button onClick={() => setMsg(null)}>Okay</button>\n            <div>\n              <Err_svg />\n              <h4>Could not accept Coupon code. Make sure you're online.</h4>\n            </div>\n          </>\n        );\n      });\n  };\n  useEffect(() => {\n    setSelected(selectAll);\n  }, [selectAll]);\n  useEffect(() => {\n    if (selected) {\n      setBatch((prev) => [...prev, coupon._id]);\n    } else {\n      setBatch((prev) => prev.filter((item) => item !== coupon._id));\n    }\n  }, [selected]);\n  return (\n    <>\n      <tr\n        className={`coupon ${selected ? \"selected\" : \"\"}`}\n        onClick={(e) => {\n          if (\n            e.nativeEvent.path.includes(actionsRef.current) ||\n            e.nativeEvent.path.includes(checkRef.current) ||\n            batch.length > 0\n          ) {\n          } else {\n            setCouponDetail(coupon);\n          }\n        }}\n      >\n        {\n          //   <td className=\"checkContainer\" ref={checkRef}>\n          //   <Checkbox\n          //     defaultValue={selected}\n          //     value={selected}\n          //     onChange={(e) => {\n          //       setSelected(e);\n          //     }}\n          //   />\n          // </td>\n        }\n        <td className=\"date\">\n          <Moment format=\"DD MMM YY\">{coupon.createdAt}</Moment>\n        </td>\n        <td>{coupon.title}</td>\n        <td>{coupon.status}</td>\n        <td>{coupon.code}</td>\n        <td className=\"discount\">\n          {coupon.type === \"percent\" ? (\n            <>\n              {coupon.amount}%<span>Up to {coupon.maxDiscount}</span>\n            </>\n          ) : (\n            <>{coupon.amount}</>\n          )}\n        </td>\n        <td>{coupon.threshold}</td>\n        <td>\n          <Moment format=\"DD MMM YY\">{coupon.date?.from}</Moment>-\n          <Moment format=\"DD MMM YY\">{coupon.date?.to}</Moment>\n        </td>\n        <td>{coupon.accept ? \"Yes\" : \"No\"}</td>\n        <td ref={actionsRef}>\n          {batch.length === 0 && (\n            <Actions icon={<Chev_down_svg />}>\n              <button onClick={() => setCouponDetail(coupon)}>\n                View Detail\n              </button>\n              {coupon.accept && (\n                <button\n                  onClick={() =>\n                    Confirm({\n                      label: \"Accepting Coupon code\",\n                      question:\n                        \"You sure want to take part in this campaign and accept this coupon code?\",\n                      callback: () => declineCoupon(coupon._id),\n                    })\n                  }\n                >\n                  Decline\n                </button>\n              )}\n              {new Date(coupon.date?.to) >=\n                new Date(moment({ time: new Date(), format: \"YYYY-MM-DD\" })) &&\n                !coupon.accept && (\n                  <button\n                    onClick={() =>\n                      Confirm({\n                        label: \"Accepting Coupon code\",\n                        question:\n                          \"You sure want to take part in this campaign and accept this coupon code?\",\n                        callback: () => acceptCoupon(coupon._id),\n                      })\n                    }\n                  >\n                    Accept\n                  </button>\n                )}\n            </Actions>\n          )}\n        </td>\n      </tr>\n      <Modal className=\"msg\" open={msg}>\n        {msg}\n      </Modal>\n      <Modal\n        open={couponDetail}\n        head={true}\n        label=\"Coupon Detail\"\n        setOpen={setCouponDetail}\n        className=\"couponDetail\"\n      >\n        <div className=\"content\">\n          <section>\n            <label>Campaign Title</label>\n            <p>{couponDetail?.title}</p>\n          </section>\n          <section>\n            <label>Campaign Description</label>\n            <p>{couponDetail?.dscr}</p>\n          </section>\n          <section>\n            <label>Coupon Code</label>\n            <p>{couponDetail?.code}</p>\n          </section>\n          <section>\n            <label>Coupon code status</label>\n            <p>{couponDetail?.status}</p>\n          </section>\n          <section>\n            <label>Discount</label>\n            <p>\n              {couponDetail?.type === \"percent\" ? (\n                <>\n                  {couponDetail?.amount}% up to {couponDetail.maxDiscount}\n                </>\n              ) : (\n                <>{couponDetail?.amount}</>\n              )}\n            </p>\n          </section>\n          <section>\n            <label>Validity</label>\n            <p>\n              <Moment format=\"DD MMM YY\">{couponDetail.date?.from}</Moment>-\n              <Moment format=\"DD MMM YY\">{couponDetail.date?.to}</Moment>\n            </p>\n          </section>\n          <section>\n            <label>Accept</label>\n            <p>{couponDetail.accept ? \"Yes\" : \"No\"}</p>\n          </section>\n          {couponDetail.termsUrl && (\n            <section className=\"termsUrl\">\n              <label>Terms</label>\n              <Link to={couponDetail.termsUrl} target=\"_blank\">\n                Terms of the Campaign\n              </Link>\n            </section>\n          )}\n          {couponDetail.terms?.length ? (\n            <section>\n              <label>Terms</label>\n              <ul>\n                {couponDetail.terms.map((term, i) => (\n                  <li key={i}>{term}</li>\n                ))}\n              </ul>\n            </section>\n          ) : null}\n        </div>\n      </Modal>\n    </>\n  );\n};\n\nexport default Coupons;\n","import { useEffect, useState, useContext } from \"react\";\nimport { SiteContext } from \"../../SiteContext\";\nimport { updateProfileInfo } from \"../Profile\";\nimport { Modal } from \"../Modal\";\nimport { Link } from \"react-router-dom\";\nimport {\n  Chev_down_svg,\n  Checkbox,\n  Combobox,\n  Step_fill,\n  Img,\n  LS,\n  Succ_svg,\n  External_link_icon,\n  Moment,\n} from \"../Elements\";\nrequire(\"../styles/fbMarketplace.scss\");\n\nexport const Step = ({\n  label,\n  defaultStatus,\n  children,\n  disabled,\n  className,\n  data,\n  step,\n}) => {\n  const [open, setOpen] = useState(data ? !data : null);\n  useEffect(() => {\n    setOpen(defaultStatus);\n  }, [defaultStatus]);\n  return (\n    <div\n      className={`step ${open || defaultStatus ? \"open\" : \"\"} ${\n        disabled ? \"disabled\" : \"\"\n      } ${className || \"\"}`}\n    >\n      <div\n        className=\"head\"\n        onClick={() => {\n          if (!defaultStatus) {\n            setOpen(!open);\n          }\n        }}\n      >\n        <Chev_down_svg className=\"chev\" /> {label}\n        <div className=\"status\">{data && <Step_fill />}</div>\n      </div>\n      {(open || defaultStatus) && <div className=\"body\">{children}</div>}\n    </div>\n  );\n};\n\nconst Marketplace = () => {\n  const [msg, setMsg] = useState(null);\n  const { user, setUser } = useContext(SiteContext);\n  const { FB } = window;\n  const [step, setStep] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  useEffect(() => {\n    console.log(user.fbMarket);\n    if (!user.fbMarket?.user?.id) {\n      setStep(\"account\");\n    } else if (!user.fbMarket?.businessManager?.id) {\n      setStep(\"businessManager\");\n    } else if (!user.fbMarket?.facebookPage?.id) {\n      setStep(\"fbPage\");\n    } else if (user.fbMarket?.instagramAccount === undefined) {\n      setStep(\"instagramAccount\");\n    }\n    // else if (!user.fbMarket?.dataSharing) {\n    // setStep(\"dataSharing\");\n    // }\n    else if (!user.fbMarket?.commerceAccount?.catalog?.id) {\n      setStep(\"commerceAccount\");\n    } else if (!user.fbMarket?.userAgreement) {\n      setStep(\"terms\");\n    }\n  }, [user]);\n  return (\n    <div className=\"fbMarket\">\n      <h1>Facebook marketplace</h1>\n      <div className=\"setup\">\n        <Step\n          data={user.fbMarket?.user?.id ? user.fbMarket.user : null}\n          defaultStatus={step === \"account\"}\n          step={step}\n          label=\"Facebook Account\"\n        >\n          <p className=\"note\">\n            Delivery Pay uses your personal Facebook account to access your\n            business accounts.\n          </p>\n          {\n            //   user.fbMarket?.user?.id && (\n            //   <p>Now you can log into Delivery Pay using this account.</p>\n            // )\n          }\n          <div className=\"profile\">\n            <div className=\"user\">\n              {user.fbMarket?.user?.id ? (\n                <>\n                  <Img\n                    key=\"img\"\n                    src={user.fbMarket.user.profileImg || \"/profile-user.jpg\"}\n                  />\n                  <p>{user.fbMarket.user.name}</p>\n                </>\n              ) : (\n                <>\n                  <Img key=\"placeholder\" src=\"/profile-user.jpg\" />\n                  <p>Connect your Facebook account to get started</p>\n                </>\n              )}\n            </div>\n            {user.fbMarket?.user?.id ? (\n              <button\n                className=\"btn\"\n                onClick={() => {\n                  FB.logout((res) => {\n                    console.log(res);\n                  });\n                  LS.remove(\"facebook_user_accessToken\");\n                  LS.remove(\"facebook_page_accessToken\");\n                  updateProfileInfo({\n                    \"fbMarket.user\": {},\n                    \"fbMarket.businessManager\": {},\n                    \"fbMarket.facebookPage\": {},\n                    \"fbMarket.dataSharing\": null,\n                    \"fbMarket.instagramAccount\": {},\n                    \"fbMarket.commerceAccount\": {},\n                    \"fbMarket.userAgreement\": false,\n                  }).then(({ user: newUser }) => {\n                    setUser((prev) => ({\n                      ...prev,\n                      fbMarket: newUser.fbMarket,\n                    }));\n                  });\n                }}\n              >\n                Disconnect\n              </button>\n            ) : (\n              <button\n                className=\"btn\"\n                onClick={() => {\n                  FB.login(\n                    (res) => {\n                      if (res.authResponse?.accessToken) {\n                        const accessToken = res.authResponse.accessToken;\n                        fetch(\"/api/addFbMarketUser\", {\n                          method: \"POST\",\n                          headers: { \"Content-Type\": \"application/json\" },\n                          body: JSON.stringify({ accessToken }),\n                        })\n                          .then((res) => res.json())\n                          .then((data) => {\n                            if (data.code === \"ok\") {\n                              setUser((prev) => ({\n                                ...prev,\n                                fbMarket: data.fbMarket,\n                              }));\n                            }\n                          });\n                      }\n                    },\n                    {\n                      scope:\n                        \"business_management,catalog_management,pages_read_engagement,pages_show_list,instagram_basic,instagram_content_publish\",\n                      return_scopes: true,\n                    }\n                  );\n                }}\n              >\n                Connect Account\n              </button>\n            )}\n          </div>\n        </Step>\n        <Step\n          disabled={!user.fbMarket?.user?.id}\n          data={\n            user.fbMarket?.businessManager?.id\n              ? user.fbMarket.businessManager\n              : null\n          }\n          defaultStatus={step === \"businessManager\"}\n          label=\"Business Manager\"\n          className=\"businessManager\"\n        >\n          <BusinessManager setLoading={setLoading} />\n        </Step>\n        <Step\n          data={\n            user.fbMarket?.facebookPage?.id ? user.fbMarket.facebookPage : null\n          }\n          defaultStatus={step === \"fbPage\"}\n          label=\"Facebook Page\"\n          className=\"page\"\n          disabled={!user.fbMarket?.businessManager?.id}\n        >\n          <FbPage />\n        </Step>\n        <Step\n          data={\n            user.fbMarket?.instagramAccount?.id\n              ? user.fbMarket.instagramAccount\n              : null\n          }\n          disabled={!user.fbMarket?.facebookPage?.id}\n          label=\"Instagram Account\"\n          defaultStatus={step === \"instagramAccount\"}\n          className=\"instagramAccount\"\n        >\n          <InstagramAccount setStep={setStep} />\n        </Step>\n        <Step\n          data={\n            user.fbMarket?.commerceAccount?.catalog?.id\n              ? user.fbMarket.commerceAccount\n              : null\n          }\n          disabled={!user.fbMarket?.facebookPage?.id}\n          label=\"Facebook Commerce Account\"\n          defaultStatus={step === \"commerceAccount\"}\n          className=\"commerceAccount\"\n        >\n          <CommerceAccount setStep={setStep} />\n        </Step>\n        <Step\n          disabled={!user.fbMarket?.commerceAccount?.catalog?.id}\n          data={user.fbMarket?.userAgreement || null}\n          defaultStatus={step === \"terms\"}\n          label=\"Terms and Conditions\"\n        >\n          <p>\n            By proceeding, you accept{\" \"}\n            <a\n              target=\"_blank\"\n              href=\"https://www.facebook.com/legal/commerce_product_merchant_agreement\"\n            >\n              Facebook Commerce Terms <External_link_icon />\n            </a>\n            .\n          </p>\n          {!user.fbMarket?.userAgreement && (\n            <button\n              className=\"btn\"\n              onClick={() => {\n                updateProfileInfo({\n                  \"fbMarket.userAgreement\": true,\n                }).then(({ user: newUser }) => {\n                  setUser((prev) => ({ ...prev, fbMarket: newUser.fbMarket }));\n                  setStep(\"\");\n                  setMsg(\n                    <>\n                      <button onClick={() => setMsg(null)}>Okay</button>\n                      <div>\n                        <Succ_svg />\n                        <h4>\n                          Facebook marketplace has been setup successfully. Now\n                          you can add products to facebook marketplace directly\n                          from Delivery Pay.\n                        </h4>\n                        <Link to=\"/account/myShop/products\">\n                          Add your first product\n                        </Link>\n                      </div>\n                    </>\n                  );\n                });\n              }}\n            >\n              Finish setup\n            </button>\n          )}\n        </Step>\n      </div>\n      <Modal open={msg} className=\"msg\">\n        {msg}\n      </Modal>\n    </div>\n  );\n};\n\nconst BusinessManager = ({ setLoading }) => {\n  const { user, setUser } = useContext(SiteContext);\n  const { FB } = window;\n  const [businessManagers, setBusinessManagers] = useState([]);\n  const [err, setErr] = useState(null);\n  useEffect(() => {\n    if (!user.fbMarket?.business?.id) {\n      FB.api(\n        \"/me\",\n        \"GET\",\n        {\n          fields: \"businesses{picture{url},name,id,created_time}\",\n          access_token: user.fbMarket.user.access_token,\n        },\n        function (res) {\n          if (res.businesses) {\n            setBusinessManagers(res.businesses.data);\n          }\n        }\n      );\n    }\n  }, [user]);\n  return (\n    <>\n      {user.fbMarket?.businessManager?.id ? (\n        <>\n          <p className=\"note\">\n            The Business Manager that owns all your Facebook business accounts.\n          </p>\n          <ul>\n            <li>\n              <div className=\"profile\">\n                <Img src={user.fbMarket.businessManager.profileImg} />\n                <div className=\"detail\">\n                  <a\n                    href={`https://business.facebook.com/latest/home?nav_ref=bm_home_redirect&business_id=${user.fbMarket.businessManager.id}`}\n                  >\n                    {user.fbMarket.businessManager.name} <External_link_icon />\n                  </a>\n                  <span>ID: {user.fbMarket.businessManager.id}</span>\n                  <span>\n                    Created at:{\" \"}\n                    <Moment format=\"DD MMM YYYY, hh:mm a\">\n                      {user.fbMarket.businessManager.created_time}\n                    </Moment>\n                  </span>\n                </div>\n              </div>\n              <button\n                onClick={() => {\n                  updateProfileInfo({\n                    \"fbMarket.businessManager\": {},\n                    \"fbMarket.facebookPage\": {},\n                    \"fbMarket.commerceAccount\": {},\n                    \"fbMarket.userAgreement\": false,\n                  }).then(({ user: newUser }) => {\n                    setUser((prev) => ({\n                      ...prev,\n                      fbMarket: newUser.fbMarket,\n                    }));\n                  });\n                }}\n                className=\"btn\"\n              >\n                Disconnect\n              </button>\n            </li>\n          </ul>\n        </>\n      ) : (\n        <>\n          <p className=\"note\">\n            Connect the Business Manager you use to manage your business Page,\n            accounts, and product catalog. You can only connect a Business\n            Manager you have admin access to.\n          </p>\n          <p className=\"note\">\n            After you connect, you may receive a verification email from\n            Facebook. If so, youll need to confirm your business email address\n            before proceeding.\n          </p>\n          {err && <div className=\"err\">{err}</div>}\n          <ul>\n            {businessManagers.map((item, i) => (\n              <li key={i}>\n                <div className=\"profile\">\n                  <Img src={item.picture.data.url} />\n                  <div className=\"detail\">\n                    <a\n                      href={`https://business.facebook.com/latest/home?nav_ref=bm_home_redirect&business_id=${item.business_id}&asset_id=${item.asset_id}`}\n                    >\n                      {item.name} <External_link_icon />\n                    </a>\n                    <span>ID: {item.id}</span>\n                    <span>\n                      Created at:{\" \"}\n                      <Moment format=\"DD MMM YYYY, hh:mm a\">\n                        {item.created_time}\n                      </Moment>\n                    </span>\n                  </div>\n                </div>\n                <button\n                  className=\"btn\"\n                  onClick={() => {\n                    updateProfileInfo({\n                      \"fbMarket.businessManager.id\": item.id,\n                      \"fbMarket.businessManager.name\": item.name,\n                      \"fbMarket.businessManager.createdAt\": item.created_time,\n                      \"fbMarket.businessManager.profileImg\":\n                        item.picture.data.url,\n                    }).then(({ user: newUser }) => {\n                      setUser((prev) => ({\n                        ...prev,\n                        fbMarket: newUser.fbMarket,\n                      }));\n                    });\n                  }}\n                >\n                  Connect\n                </button>\n              </li>\n            ))}\n            <li>\n              <div className=\"profile\">\n                <Img src=\"/profile-user.jpg\" />\n                <p>Create Business Manager</p>\n              </div>\n              <button\n                className=\"btn\"\n                onClick={() => {\n                  setLoading(true);\n                  console.log(`/${user.fbMarket?.user?.id}/businesses`);\n                  FB.api(\n                    `/${user.fbMarket?.user?.id}/businesses`,\n                    \"POST\",\n                    {\n                      name: \"Delivery Pay Business Manager\",\n                      vertical: \"ECOMMERCE\",\n                    },\n                    function (res) {\n                      setLoading(false);\n                      console.log(res);\n                      if (res.id) {\n                        FB.api(\n                          \"/me\",\n                          \"GET\",\n                          {\n                            fields:\n                              \"businesses{picture{url},name,id,created_time}\",\n                          },\n                          function (res) {\n                            if (res.businesses) {\n                              setBusinessManagers(res.businesses.data);\n                            }\n                          }\n                        );\n                      }\n                      if (res.error) {\n                        if (res.error.code === 1) {\n                          setErr(\n                            <>\n                              You have reached maximum number of business\n                              manager one user can have. Use one of existing\n                              business manager instead of creating a new one.\n                            </>\n                          );\n                        } else if (res.error.code === 3947) {\n                          setErr(\n                            <>\n                              You already have a Business Manager with the same\n                              name. Select \"Delivery Pay Business Manager\"\n                              instead of creating a new one. or Choose another.\n                            </>\n                          );\n                        } else {\n                          setErr(\n                            <>{res.error.error_user_msg || res.error.message}</>\n                          );\n                        }\n                      }\n                    }\n                  );\n                }}\n              >\n                Create new\n              </button>\n            </li>\n          </ul>\n        </>\n      )}\n    </>\n  );\n};\nconst FbPage = () => {\n  const { FB } = window;\n  const { user, setUser } = useContext(SiteContext);\n  const [fbPages, setFbPages] = useState([]);\n  const [createNew, setCreateNew] = useState(false);\n  useEffect(() => {\n    if (!user.fbMarket?.business?.id) {\n      FB.api(\n        \"/me/accounts\",\n        \"GET\",\n        {\n          fields: \"picture{url},access_token,name,category,business\",\n          access_token: user.fbMarket.user.access_token,\n        },\n        function (res) {\n          console.log(\"facebook pages:\", res);\n          if (res.data) {\n            setFbPages(res.data);\n          }\n        }\n      );\n    }\n  }, [user]);\n  return (\n    <>\n      {user.fbMarket?.facebookPage?.id ? (\n        <>\n          <p className=\"note\">\n            The Facebook business Page that you use to sell your products or\n            post ads.\n          </p>\n          <ul>\n            <li>\n              <div className=\"profile\">\n                <Img src={user.fbMarket.facebookPage.profileImg} />\n                <div className=\"detail\">\n                  <a\n                    href={`https://business.facebook.com/latest/home?nav_ref=bm_home_redirect&business_id=${user.fbMarket.businessManager.id}`}\n                  >\n                    {user.fbMarket.facebookPage.name} <External_link_icon />\n                  </a>\n                  <span>Category: {user.fbMarket.facebookPage.category}</span>\n                </div>\n              </div>\n              <button\n                onClick={() => {\n                  updateProfileInfo({\n                    fbMarket: {\n                      user: user.fbMarket.user,\n                      businessManager: user.fbMarket.businessManager,\n                    },\n                  }).then(({ user: newUser }) => {\n                    setUser((prev) => ({\n                      ...prev,\n                      fbMarket: newUser.fbMarket,\n                    }));\n                  });\n                }}\n                className=\"btn\"\n              >\n                Disconnect\n              </button>\n            </li>\n          </ul>\n        </>\n      ) : (\n        <>\n          <p className=\"note\">\n            Connect the business Page you use to sell products or post ads. You\n            can only connect a Page you have admin access to.\n          </p>\n          <ul>\n            {fbPages.map((item, i) => (\n              <li key={i}>\n                <div className=\"profile\">\n                  <Img src={item.picture.data.url} />\n                  <div className=\"detail\">\n                    <a\n                      href={`https://business.facebook.com/latest/home?nav_ref=bm_home_redirect&business_id=${item.business_id}&asset_id=${item.asset_id}`}\n                    >\n                      {item.name} <External_link_icon />\n                    </a>\n                    <span>{item.category}</span>\n                  </div>\n                </div>\n                <button\n                  className=\"btn\"\n                  onClick={() => {\n                    updateProfileInfo({\n                      \"fbMarket.facebookPage.id\": item.id,\n                      \"fbMarket.facebookPage.name\": item.name,\n                      \"fbMarket.facebookPage.access_token\": item.access_token,\n                      \"fbMarket.facebookPage.profileImg\": item.picture.data.url,\n                      \"fbMarket.facebookPage.category\": item.category,\n                    }).then(({ user: newUser }) => {\n                      setUser((prev) => ({\n                        ...prev,\n                        fbMarket: newUser.fbMarket,\n                      }));\n                    });\n                  }}\n                >\n                  Connect\n                </button>\n              </li>\n            ))}\n            <li>\n              <div className=\"profile\">\n                <Img src=\"/profile-user.jpg\" />\n                <p>Create Page</p>\n              </div>\n              <button className=\"btn\" onClick={() => setCreateNew(true)}>\n                Create new\n              </button>\n            </li>\n          </ul>\n        </>\n      )}\n      <Modal\n        head={true}\n        label=\"Create a new Facebook business Page\"\n        open={createNew}\n        setOpen={() => {\n          setCreateNew(false);\n          FB.api(\n            \"/me/accounts\",\n            \"GET\",\n            {\n              fields: \"picture{url},access_token,name,category,business\",\n              access_token: user.fbMarket.user.access_token,\n            },\n            function (res) {\n              console.log(\"facebook pages:\", res);\n              if (res.data) {\n                setFbPages(res.data);\n              }\n            }\n          );\n        }}\n        className=\"createNewPage\"\n      >\n        <div className=\"content\">\n          <p>\n            You'll be redirected to Facebook where you can create a new business\n            Page. All you need for now are basic details such as:\n          </p>\n          <ul>\n            <li>Business Page name</li>\n            <li>Business Page category</li>\n            <li>Profile Photo</li>\n            <li>Cover photo</li>\n            <li>Store description</li>\n          </ul>\n          <p>\n            As soon as you add these details, return to Delivery Pay and finish\n            setup. You can always update your Page later.\n          </p>\n          <a\n            target=\"_blank\"\n            href=\"https://www.facebook.com/pages/create/?ref_type=hc\"\n          >\n            <External_link_icon /> Go to Facebook\n          </a>\n        </div>\n      </Modal>\n    </>\n  );\n};\nconst InstagramAccount = ({ setStep }) => {\n  const { FB } = window;\n  const { user, setUser } = useContext(SiteContext);\n  const [insta, setInsta] = useState(null);\n  useEffect(async () => {\n    if (!user.fbMarket?.instagramAccount) {\n      FB.api(\n        `/${user.fbMarket.facebookPage?.id}`,\n        \"GET\",\n        {\n          fields: \"instagram_business_account\",\n          access_token: user.fbMarket?.user.access_token,\n        },\n        (res) => {\n          if (res.instagram_business_account) {\n            console.log(\"insta id\", res);\n            FB.api(\n              `/${res.instagram_business_account.id}`,\n              \"GET\",\n              {\n                fields: \"username,profile_picture_url\",\n                access_token: user.fbMarket?.user.access_token,\n              },\n              function (res) {\n                console.log(\"ig account\", res);\n                if (res.id) {\n                  setInsta(res);\n                  updateProfileInfo({\n                    \"fbMarket.instagramAccount\": insta,\n                  }).then(({ user: newUser }) => {\n                    console.log(\"updated\");\n                    setUser((prev) => ({\n                      ...prev,\n                      fbMarket: newUser.fbMarket,\n                    }));\n                  });\n                }\n              }\n            );\n          }\n        }\n      );\n    }\n  }, [user]);\n  return (\n    <>\n      {user.fbMarket?.instagramAccount?.id ? (\n        <>\n          <p className=\"note\">\n            Post on Instagram directly from the product dashboard.\n          </p>\n          <ul>\n            <li>\n              <div className=\"profile\">\n                <Img\n                  src={user.fbMarket.instagramAccount?.profile_picture_url}\n                />\n                <div className=\"detail\">\n                  {user.fbMarket.instagramAccount.username}\n                </div>\n              </div>\n            </li>\n          </ul>\n        </>\n      ) : (\n        <>\n          <p className=\"note\">\n            Connect Instagram account to post about your product directly from\n            Delivery Pay product dashboard.\n          </p>\n          {insta && (\n            <ul>\n              <li>\n                <div className=\"profile\">\n                  <Img src={insta.profile_picture_url} />\n                  <div className=\"detail\">{insta.username}</div>\n                </div>\n              </li>\n            </ul>\n          )}\n          {!insta && (\n            <>\n              <div className=\"err\">\n                <p>\n                  The connected Business Manager doesnt own any Instagram\n                  accounts connected to the Facebook Page. Add your Instagram\n                  account to the connected Business Manager and Facebook Page or\n                  learn more about{\" \"}\n                  <a\n                    href=\"https://help.instagram.com/502981923235522\"\n                    target=\"_blank\"\n                  >\n                    how to create a new business account on Instagram\n                  </a>{\" \"}\n                  <External_link_icon />\n                </p>\n              </div>\n              <p>\n                If you cant find an Instagram account, learn more about how to{\" \"}\n                <a\n                  href=\"https://help.instagram.com/502981923235522\"\n                  target=\"_blank\"\n                >\n                  create a new account <External_link_icon />\n                </a>{\" \"}\n                or how to{\" \"}\n                <a\n                  href=\"https://www.facebook.com/business/help/1125825714110549?id=420299598837059\"\n                  target=\"_blank\"\n                >\n                  add an account to your Business Manager <External_link_icon />\n                </a>\n                .\n              </p>\n            </>\n          )}\n          <div className=\"btns\">\n            <button\n              className=\"btn_clear\"\n              onClick={() => {\n                setStep(\"commerceAccount\");\n                updateProfileInfo({\n                  \"fbMarket.instagramAccount\": null,\n                }).then(({ user: newUser }) => {\n                  setUser((prev) => ({\n                    ...prev,\n                    fbMarket: newUser.fbMarket,\n                  }));\n                });\n              }}\n            >\n              Skip\n            </button>\n          </div>\n        </>\n      )}\n    </>\n  );\n};\nconst CommerceAccount = ({ setStep }) => {\n  const { FB } = window;\n  const { user, setUser } = useContext(SiteContext);\n  const [commerceAccounts, setCommerceAccounts] = useState([]);\n  const [catalog, setCatalog] = useState(\n    user.fbMarket?.commerceAccount?.catalog\n  );\n  const [err, setErr] = useState(null);\n  useEffect(() => {\n    setCatalog(user.fbMarket?.commerceAccount?.catalog);\n  }, [user]);\n  return (\n    <>\n      <p className=\"note\">\n        Create a Commerce account to start selling on Facebook, Instagram, or\n        both. Once you have an account youll be able to customize your Shop and\n        collections in the{\" \"}\n        <a\n          target=\"_blank\"\n          href=\"https://www.facebook.com/business/help/2371372636254534\"\n        >\n          Facebook Commerce Manager <External_link_icon />\n        </a>\n        .\n      </p>\n      {err && <div className=\"err\">{err}</div>}\n      <ul>\n        {\n          //   commerceAccounts.map((item, i) => (\n          //   <li key={i}>\n          //     {i}\n          //     <div className=\"facebookPage\">\n          //       <div className=\"thumb\" />\n          //       <p>{item.name}</p>\n          //       <span>ID: {item.id}</span>\n          //       <span>Created at: {item.createdAt}</span>\n          //     </div>\n          //     <button>Connect</button>\n          //   </li>\n          // ))\n        }\n        {catalog && (\n          <li className=\"catalog\">\n            <p>PRODUCTS WILL BE SYNCED TO THIS CATALOG</p>\n            <p>{catalog.name}</p>\n            <span>ID: {catalog.id}</span>\n          </li>\n        )}\n        {!catalog && (\n          <li>\n            <div className=\"profile\">\n              <Img src=\"/profile-user.jpg\" />\n              <p>Create a new Commerce Account</p>\n            </div>\n            <button\n              className=\"btn\"\n              onClick={() => {\n                FB.api(\n                  `/${user.fbMarket.businessManager.id}/owned_product_catalogs`,\n                  \"GET\",\n                  {\n                    access_token: user.fbMarket.user.access_token,\n                  },\n                  async function ({ data, error }) {\n                    console.log(data, error);\n                    if (error) {\n                      setErr(error.message);\n                    }\n                    const delCatalog =\n                      data?.find(\n                        (item) => item.name === \"Delivery Pay Product Catalog\"\n                      ) ||\n                      (await FB.api(\n                        `/${user.fbMarket.businessManager.id}/owned_product_catalogs`,\n                        \"POST\",\n                        {\n                          name: \"Delivery Pay Product Catalog\",\n                          access_token: user.fbMarket.user.access_token,\n                        },\n                        function (res) {\n                          console.log(res.id);\n                          if (res.id) {\n                            return {\n                              ...res,\n                              name: \"Delivery Pay Product Catalog\",\n                            };\n                          } else {\n                            return null;\n                          }\n                          if (res.error) {\n                            console.log(res.error);\n                          }\n                        }\n                      ));\n                    if (delCatalog) {\n                      setCatalog(delCatalog);\n                      updateProfileInfo({\n                        \"fbMarket.commerceAccount.catalog\": delCatalog,\n                      }).then(({ user: newUser }) => {\n                        setUser((prev) => ({\n                          ...prev,\n                          fbMarket: newUser.fbMarket,\n                        }));\n                        setStep(\"terms\");\n                      });\n                    }\n                  }\n                );\n              }}\n            >\n              Create new\n            </button>\n          </li>\n        )}\n      </ul>\n    </>\n  );\n};\n\nexport default Marketplace;\n","import {\n  useEffect,\n  useState,\n  useContext,\n  useRef,\n  useLayoutEffect,\n  lazy,\n} from \"react\";\nimport { SiteContext } from \"../../SiteContext\";\nimport {\n  Err_svg,\n  Plus_svg,\n  X_svg,\n  Succ_svg,\n  FileInput,\n  NumberInput,\n  UploadFiles,\n  Combobox,\n  Tabs,\n  Checkbox,\n  Chev_down_svg,\n  Actions,\n  Pagination,\n  calculateDiscount,\n  calculatePrice,\n  Tip,\n  Media,\n  LS,\n  Moment,\n  moment,\n  InputDateRange,\n  Img,\n} from \"../Elements\";\nimport { Modal, Confirm } from \"../Modal\";\nimport { Link, Route, Switch, Redirect } from \"react-router-dom\";\nimport TextareaAutosize from \"react-textarea-autosize\";\nimport OrderManagement, { FullOrder } from \"./OrderManagement\";\nimport RefundManagement, { FullRefund } from \"./RefundManagement\";\nimport Campaigns from \"./CampaignManagement\";\nimport FBMarket from \"./fbMarketplace\";\nimport { updateProfileInfo } from \"../Profile\";\nimport { FacebookShareButton } from \"react-share\";\nimport { Step } from \"./fbMarketplace\";\nimport { CSVLink } from \"react-csv\";\n\nrequire(\"../styles/products.scss\");\n\nconst parseXLSXtoJSON = (file, cb) => {\n  var name = file.name;\n  const reader = new FileReader();\n  reader.onload = async (evt) => {\n    const bstr = evt.target.result;\n    const XLSX = await import(\"xlsx\");\n    const wb = XLSX.read(bstr, { type: \"binary\" });\n    const wsname = wb.SheetNames[0];\n    const ws = wb.Sheets[wsname];\n    const data = XLSX.utils.sheet_to_json(ws, { header: 1 });\n    const arr = [];\n    const cols = data.shift();\n    data.forEach((row, i) => {\n      const item = {};\n      cols.forEach((col, j) => {\n        let label;\n        switch (col) {\n          case \"Images\":\n            label = \"images\";\n            break;\n          case \"Name\":\n            label = \"name\";\n            break;\n          case \"Description\":\n            label = \"dscr\";\n            break;\n          case \"Material\":\n            label = \"material\";\n            break;\n          case \"Size [Please specify mm, cm, inch or KG]\":\n            label = \"size\";\n            break;\n          case \"Category\":\n            label = \"category\";\n            break;\n          case \"Type\":\n            label = \"type\";\n            break;\n          case \"Price in INR.\":\n            label = \"price\";\n            break;\n          case \"Units Available\":\n            label = \"available\";\n            break;\n          case \"HSN Code\":\n            label = \"hsn\";\n            break;\n          case \"GST %\":\n            label = \"gst\";\n            break;\n          case \"id\":\n            label = \"_id\";\n            break;\n          default:\n        }\n        item[label] = row[j];\n      });\n      arr.push(item);\n    });\n    cb(arr);\n  };\n  reader.readAsBinaryString(file);\n};\n\nconst MyShop = ({ history, location, match }) => {\n  const { user, userType } = useContext(SiteContext);\n  const { FB } = window;\n  const [msg, setMsg] = useState(null);\n  const [categories, setCategories] = useState([]);\n  const [shopSetupComplete, setShopSetupComplete] = useState(false);\n  useEffect(() => {\n    fetch(\"/api/categories\")\n      .then((res) => res.json())\n      .then((data) => {\n        setCategories(data.categories);\n      });\n  }, []);\n  useEffect(() => {\n    if (\n      !categories?.length ||\n      !user.shopInfo?.terms?.length ||\n      user.shopInfo?.shippingCost === undefined ||\n      user.shopInfo?.shippingCost === null ||\n      user.shopInfo?.deliveryWithin === undefined ||\n      user.shopInfo?.deliveryWithin === null ||\n      user.shopInfo?.refundable === undefined ||\n      Object.values(user.shopInfo?.paymentMethod || {}).length < 6\n    ) {\n      setShopSetupComplete(false);\n    } else {\n      setShopSetupComplete(true);\n    }\n  }, [categories, user]);\n  useEffect(() => {\n    // FB.getLoginStatus(function (response) {\n    //   if (response.status === \"connected\") {\n    //     console.log(response);\n    //     const accessToken = response.authResponse.accessToken;\n    //     LS.set(\"facebook_user_accessToken\", accessToken);\n    //   }\n    // });\n    // FB.api(\n    //   `/${user.fbMarket?.facebookPage?.id}`,\n    //   \"GET\",\n    //   { fields: \"access_token\" },\n    //   (res) => {\n    //     if (res.access_token) {\n    //       LS.set(\"facebook_page_accessToken\", res.access_token);\n    //     }\n    //   }\n    // );\n  }, [user]);\n  return (\n    <>\n      {userType === \"buyer\" && <Redirect to=\"/account/orders/current\" />}\n      <div className=\"myShop\">\n        <div style={{ display: \"none\" }}>\n          <X_svg />\n        </div>\n        <Tabs\n          basepath=\"/account/myShop/\"\n          tabs={[\n            { label: \"Products & Services\", path: \"products\" },\n            { label: \"Orders\", path: \"orders\" },\n            { label: \"Refunds\", path: \"refunds\" },\n            { label: \"Campaigns\", path: \"campaigns\" },\n            { label: \"FB Marketplace\", path: \"fbMarketplace\" },\n            { label: \"Settings\", path: \"settings\" },\n          ]}\n        />\n        <Switch>\n          <Route path=\"/account/myShop/products\">\n            <Products\n              categories={categories}\n              shopSetupComplete={shopSetupComplete}\n            />\n          </Route>\n          <Route path=\"/account/myShop/orders/:_id\" component={FullOrder} />\n          <Route path=\"/account/myShop/orders\">\n            <OrderManagement categories={categories} />\n          </Route>\n          <Route path=\"/account/myShop/refunds/:_id\" component={FullRefund} />\n          <Route path=\"/account/myShop/refunds\" component={RefundManagement} />\n          <Route path=\"/account/myShop/campaigns\" component={Campaigns} />\n          <Route path=\"/account/myShop/fbMarketplace\" component={FBMarket} />\n          <Route path=\"/account/myShop/settings\">\n            <Settings categories={categories} setCategories={setCategories} />\n          </Route>\n        </Switch>\n        <Modal className=\"msg\" open={msg}>\n          {msg}\n        </Modal>\n      </div>\n    </>\n  );\n};\nconst ProductForm = ({ prefill, onSuccess, categories }) => {\n  const { user } = useContext(SiteContext);\n  const [loading, setLoading] = useState(false);\n  const [type, setType] = useState(prefill?.type || \"product\");\n  const [category, setCategory] = useState(prefill?.category || \"\");\n  const [discount, setDiscount] = useState({\n    type: prefill?.discount?.type || null,\n    amount: prefill?.discount?.amount || 0,\n    dscr: prefill?.discount?.dscr || \"\",\n  });\n  const [name, setName] = useState(prefill?.name || \"\");\n  const [dscr, setDscr] = useState(prefill?.dscr || \"\");\n  const [price, setPrice] = useState(prefill?.price || \"\");\n  const [files, setFiles] = useState(prefill?.images || []);\n  const [gst, setGst] = useState(\n    prefill?.gst || user.gst?.verified ? user.gst.amount : 0\n  );\n  const [hsn, setHsn] = useState(prefill?.hsn || \"\");\n  const [available, setAvailable] = useState(prefill?.available);\n  const [msg, setMsg] = useState(null);\n  const [tags, setTags] = useState(prefill?.tags || []);\n  const submit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    const images = files.length\n      ? await UploadFiles({\n          files,\n          setMsg,\n        })\n      : [];\n    fetch(`/api/${prefill ? \"edit\" : \"add\"}Product`, {\n      method: prefill ? \"PATCH\" : \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({\n        type,\n        name,\n        dscr,\n        price: +price,\n        images,\n        category,\n        tags,\n        available:\n          available === true || available === false ? available : +available,\n        gst,\n        discount,\n        ...(prefill && { _id: prefill._id }),\n      }),\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        setLoading(false);\n        if (data.code === \"ok\") {\n          onSuccess?.(data.product);\n        } else if (data.code === 403) {\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                <Err_svg />\n                <h4>\n                  You can't add more that 100 product at a time. Delete a\n                  product/service and try again.\n                </h4>\n              </div>\n            </>\n          );\n        } else {\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                <Err_svg />\n                <h4>Could not add product. please try again.</h4>\n              </div>\n            </>\n          );\n        }\n      })\n      .catch((err) => {\n        setLoading(false);\n        console.log(err);\n        setMsg(\n          <>\n            <button onClick={() => setMsg(null)}>Okay</button>\n            <div>\n              <Err_svg />\n              <h4>Could not add product. Make sure you're online.</h4>\n            </div>\n          </>\n        );\n      });\n  };\n  return (\n    <>\n      <form onSubmit={submit} className={loading ? \"loading\" : \"\"}>\n        <section className=\"type\">\n          <label>Type</label>\n          <Combobox\n            defaultValue={type}\n            options={[\n              { label: \"Product\", value: \"product\" },\n              { label: \"Service\", value: \"service\" },\n              { label: \"Other\", value: \"other\" },\n            ]}\n            onChange={(e) => {\n              setType(e.value);\n            }}\n          />\n        </section>\n        <section className=\"name\">\n          <label>Name of the product/service</label>\n          <input\n            value={name}\n            onChange={(e) => setName(e.target.value)}\n            required={true}\n          />\n        </section>\n        <section className=\"category\">\n          <label>\n            Category{\" \"}\n            <Tip>\n              You can Add/Edit/Delete your categories{\" \"}\n              <Link to=\"/account/myShop/settings\">here</Link>\n            </Tip>\n          </label>\n          <Combobox\n            required={true}\n            defaultValue={category}\n            options={categories.map((item) => ({ label: item, value: item }))}\n            onChange={(e) => setCategory(e.value)}\n          />\n        </section>\n        <section>\n          <label>Price </label>\n          <NumberInput\n            defaultValue={price}\n            onChange={(e) => setPrice(e.target.value)}\n            required={true}\n          />\n        </section>\n        <section className=\"available\">\n          {type === \"product\" ? (\n            <>\n              <label>Available in stock</label>\n              <NumberInput\n                required={true}\n                defaultValue={available}\n                onChange={(e) => setAvailable(e.target.value)}\n              />\n            </>\n          ) : (\n            <>\n              <label>Availability</label>\n              <Combobox\n                defaultValue={available}\n                required={true}\n                options={[\n                  { label: \"Available\", value: true },\n                  { label: \"Not available\", value: false },\n                ]}\n                onChange={(e) => setAvailable(e.value)}\n              />\n            </>\n          )}\n        </section>\n        <section className=\"dscr\">\n          <label>Description of the product/service</label>\n          <TextareaAutosize\n            value={dscr}\n            onChange={(e) => setDscr(e.target.value)}\n            required={true}\n          />\n        </section>\n        <section className=\"tags\">\n          <label>Tags</label>\n          <ul>\n            {tags.map((item) => (\n              <li key={item}>\n                {item}\n                <button\n                  onClick={() => {\n                    setTags((prev) => prev.filter((tag) => tag !== item));\n                  }}\n                >\n                  <X_svg />\n                </button>\n              </li>\n            ))}\n            <li className=\"form\">\n              <input\n                placeholder=\"addNewTag\"\n                onKeyPress={(e) => {\n                  const value = `${e.target.value.trim()}`;\n                  if (e.charCode === 13) {\n                    e.preventDefault();\n                    if (!value) return;\n                    setTags((prev) => [\n                      ...prev.filter((tag) => tag !== value),\n                      value,\n                    ]);\n                    e.target.focus();\n                    e.target.value = \"\";\n                  }\n                }}\n              />\n              <button\n                type=\"button\"\n                onClick={(e) => {\n                  const input = e.target.previousElementSibling;\n                  const value = `${e.target.previousElementSibling.value.trim()}`;\n                  if (!value) return;\n                  setTags((prev) => [\n                    ...prev.filter((tag) => tag !== value),\n                    value,\n                  ]);\n                  input.value = \"\";\n                  input.focus();\n                }}\n              >\n                Add Tag\n              </button>\n            </li>\n          </ul>\n        </section>\n        <section className=\"images\">\n          <label>Images of the product</label>\n          <FileInput\n            multiple={true}\n            prefill={prefill?.images}\n            accept=\"image/*\"\n            onChange={(files) => setFiles(files)}\n          />\n        </section>\n        <section>\n          <label>HSN Code</label>\n          <input value={hsn} onChange={(e) => setHsn(e.target.value)} />\n        </section>\n        {user.gst?.verified && (\n          <section>\n            <label>GST (%)</label>\n            <NumberInput\n              defaultValue={gst}\n              onChange={(e) => setGst(e.target.value)}\n            />\n          </section>\n        )}\n        <section className=\"discountType\">\n          <label>Discount Type</label>\n          <Combobox\n            defaultValue={discount.type}\n            options={[\n              { label: \"None\", value: null },\n              { label: \"Percent\", value: \"percent\" },\n              { label: \"Flat\", value: \"flat\" },\n            ]}\n            onChange={(e) =>\n              setDiscount((prev) => ({ ...prev, type: e.value }))\n            }\n          />\n        </section>\n        {discount.type !== null && (\n          <>\n            <section className=\"discountAmount\">\n              <label>Amount {discount.type === \"percent\" && \"(%)\"}</label>\n              <NumberInput\n                defaultValue={discount.amount}\n                onChange={(e) =>\n                  setDiscount((prev) => ({ ...prev, amount: e.target.value }))\n                }\n              />\n            </section>\n            <section className=\"discountDscr\">\n              <label>Discount description</label>\n              <TextareaAutosize\n                defaultValue={discount.dscr}\n                onChange={(e) =>\n                  setDiscount((prev) => ({ ...prev, dscr: e.target.value }))\n                }\n              />\n            </section>\n          </>\n        )}\n        {price && (\n          <section className=\"finalPrice\">\n            <p>\n              <label>Input price</label>\n              {price}\n            </p>\n            {+gst > 0 && (\n              <p className=\"gst\">\n                <label>GST {gst}%</label>+{((+price / 100) * +gst).fix()}\n              </p>\n            )}\n            {\n              //   <p>\n              //   <label>Delivery Pay fee 10%</label>+\n              //   {((+price + (+price / 100) * +gst) * 0.1).fix(2)}\n              // </p>\n            }\n            {discount.amount > 0 && discount.type === \"flat\" && (\n              <p>\n                <label>Discount flat</label>- {(+discount.amount).fix()}\n              </p>\n            )}\n            {discount.amount > 0 && discount.type === \"percent\" && (\n              <p>\n                <label>Discount {discount.amount}%</label>- \n                {((+price / 100) * discount.amount).fix()}\n              </p>\n            )}\n            <p className=\"final\">\n              <label>Listing Price</label>\n              {(\n                +price +\n                (+price / 100) * +gst -\n                (discount.type === \"percent\"\n                  ? (+price / 100) * discount.amount\n                  : 0) -\n                (discount.type === \"flat\" ? discount.amount : 0)\n              ).fix()}\n            </p>\n          </section>\n        )}\n        <section className=\"btns\">\n          <button className=\"submit\" type=\"submit\">\n            Submit\n          </button>\n        </section>\n        <div className=\"pBtm\" />\n      </form>\n      {loading && (\n        <div className=\"spinnerContainer\">\n          <div className=\"spinner\" />\n        </div>\n      )}\n      <Modal className=\"msg\" open={msg}>\n        {msg}\n      </Modal>\n    </>\n  );\n};\n\nconst Products = ({ categories, shopSetupComplete }) => {\n  const { user } = useContext(SiteContext);\n  const { FB } = window;\n  const [productForm, setProductForm] = useState(false);\n  const [total, setTotal] = useState(0);\n  const [page, setPage] = useState(1);\n  const [perPage, setPerPage] = useState(20);\n  const [category, setCategory] = useState(\"\");\n  const [search, setSearch] = useState(\"\");\n  const [sort, setSort] = useState({\n    column: \"createdAt\",\n    order: \"dsc\",\n  });\n  const [dateRange, setDateRange] = useState(null);\n  const [type, setType] = useState(\"\");\n  const [products, setProducts] = useState([]);\n  const [selectAll, setSelectAll] = useState(false);\n  const [batch, setBatch] = useState([]);\n  const [addMany, setAddMany] = useState(false);\n  const [msg, setMsg] = useState(null);\n  const deleteItems = (items) => {\n    if (items.length) {\n      fetch(\"/api/deleteProducts\", {\n        method: \"DELETE\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ _ids: items }),\n      })\n        .then((res) => res.json())\n        .then((data) => {\n          if (data.code === \"ok\") {\n            setBatch([]);\n            setProducts((prev) =>\n              prev.filter((item) => !items.some((_id) => _id === item._id))\n            );\n          } else {\n            setMsg(\n              <>\n                <button onClick={() => setMsg(null)}>Okay</button>\n                <div>\n                  <Err_svg />\n                  <h4>Could not delete products. Try again.</h4>\n                </div>\n              </>\n            );\n          }\n        })\n        .catch((err) => {\n          console.log(err);\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                <Err_svg />\n                <h4>Could not delete products. Make sure you're online.</h4>\n              </div>\n            </>\n          );\n        });\n    }\n  };\n  const deleteMany = () => deleteItems(batch);\n  const addToFbMarket = (_ids) => {\n    fetch(\"/api/addToFbMarket\", {\n      method: \"PUT\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ _ids }),\n    })\n      .then((res) => res.json())\n      .then(({ code, fb_products }) => {\n        if (code === \"ok\") {\n          const success = [];\n          const failed = [];\n          fb_products.forEach((item, i) => {\n            if (item.success) {\n              success.push(item);\n            } else {\n              failed.push(item);\n            }\n          });\n          setProducts((prev) =>\n            prev.map((item) => {\n              const prod = fb_products.find(\n                (product) => product._id === item._id\n              );\n              if (prod) {\n                return {\n                  ...item,\n                  fbMarketId: prod.fbMarketId,\n                };\n              } else {\n                return item;\n              }\n            })\n          );\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                {failed.length === 0 ? (\n                  <>\n                    <Succ_svg />\n                    <h4>{success.length} products has been added.</h4>\n                  </>\n                ) : (\n                  <>\n                    <Err_svg />\n                    <h4>{failed.length} products failed.</h4>\n                  </>\n                )}\n              </div>\n            </>\n          );\n        } else {\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                <Err_svg />\n                <h4>Could not add products to Facebook Marketplace.</h4>\n              </div>\n            </>\n          );\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        setMsg(\n          <>\n            <button onClick={() => setMsg(null)}>Okay</button>\n            <div>\n              <Err_svg />\n              <h4>\n                Could not add products to Facebook Marketplace. Make sure you're\n                online.\n              </h4>\n            </div>\n          </>\n        );\n      });\n  };\n  const removeFromFbMarket = (_ids) => {\n    fetch(\"/api/removeFromFbMarket\", {\n      method: \"DELETE\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({\n        _ids,\n        access_token: LS.get(\"facebook_user_accessToken\"),\n      }),\n    })\n      .then((res) => res.json())\n      .then(({ code, fb_products }) => {\n        if (code === \"ok\") {\n          const success = [];\n          const failed = [];\n          fb_products.forEach((item, i) => {\n            if (item.success) {\n              success.push(item);\n            } else {\n              failed.push(item);\n            }\n          });\n          setProducts((prev) =>\n            prev.map((item) => {\n              const prod = fb_products.find(\n                (product) => product._id === item._id\n              );\n              if (prod) {\n                return {\n                  ...item,\n                  fbMarketId: prod.fbMarketId,\n                };\n              } else {\n                return item;\n              }\n            })\n          );\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                {failed.length === 0 ? (\n                  <>\n                    <Succ_svg />\n                    <h4>{success.length} products has been removed.</h4>\n                  </>\n                ) : (\n                  <>\n                    <Err_svg />\n                    <h4>{failed.length} products failed to remove.</h4>\n                  </>\n                )}\n              </div>\n            </>\n          );\n          // console.log(data);\n        } else {\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                <Err_svg />\n                <h4>Could not remove products from Facebook Marketplace.</h4>\n              </div>\n            </>\n          );\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        setMsg(\n          <>\n            <button onClick={() => setMsg(null)}>Okay</button>\n            <div>\n              <Err_svg />\n              <h4>\n                Could not remove products from Facebook Marketplace. Make sure\n                you're online.\n              </h4>\n            </div>\n          </>\n        );\n      });\n  };\n  useEffect(() => {\n    const startDate = moment({\n      time: dateRange?.startDate,\n      format: \"YYYY-MM-DD\",\n    });\n    const endDate = moment({\n      time: new Date(dateRange?.endDate)?.setHours(24, 0, 0, 0),\n      format: \"YYYY-MM-DD\",\n    });\n    fetch(\n      `/api/products?${new URLSearchParams({\n        ...(search && { q: search }),\n        page,\n        perPage,\n        sort: sort.column,\n        order: sort.order,\n        ...(dateRange && {\n          dateFrom: startDate,\n          dateTo: endDate,\n        }),\n        ...(category && { category }),\n        ...(type && { type }),\n      })}`\n    )\n      .then((res) => res.json())\n      .then((data) => {\n        if (data.code === \"ok\") {\n          setProducts(data.products);\n          setTotal(data.total);\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        setMsg(\n          <>\n            <button onClick={() => setMsg(null)}>Okay</button>\n            <div>\n              <Err_svg />\n              <h4>Could not get products.</h4>\n            </div>\n          </>\n        );\n      });\n  }, [category, search, page, perPage, type, addMany, dateRange]);\n  useEffect(() => {\n    if (selectAll) {\n      // setBatch(products.map((item) => item._id));\n    } else {\n      setBatch([]);\n    }\n  }, [selectAll]);\n  useEffect(() => {\n    if (batch.length === 0) {\n      setSelectAll(false);\n    }\n  }, [batch]);\n  return (\n    <>\n      <div className=\"benner\">\n        <p>Product Management</p>\n        {shopSetupComplete ? (\n          <>\n            <button className=\"pill\" onClick={() => setProductForm(true)}>\n              <Plus_svg /> Add Product\n            </button>\n            <button\n              className=\"pill batchUpload\"\n              onClick={() => setAddMany(true)}\n            >\n              <Plus_svg /> Batch Upload\n            </button>\n          </>\n        ) : (\n          <Link to=\"/account/myShop/settings\" className=\"err\">\n            <p>Please complete your shop information to add product.</p>\n          </Link>\n        )}\n      </div>\n      <div className=\"filters\">\n        <section>\n          <label>Total:</label>\n          {total}\n        </section>\n        <section>\n          <label>Per Page:</label>\n          <Combobox\n            defaultValue={0}\n            options={[\n              { label: \"20\", value: 20 },\n              { label: \"30\", value: 30 },\n              { label: \"50\", value: 50 },\n            ]}\n            onChange={(e) => setPerPage(e.value)}\n          />\n        </section>\n        <section className=\"search\">\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            width=\"23\"\n            height=\"23\"\n            viewBox=\"0 0 23 23\"\n          >\n            <path\n              id=\"Icon_ionic-ios-search\"\n              data-name=\"Icon ionic-ios-search\"\n              d=\"M27.23,25.828l-6.4-6.455a9.116,9.116,0,1,0-1.384,1.4L25.8,27.188a.985.985,0,0,0,1.39.036A.99.99,0,0,0,27.23,25.828ZM13.67,20.852a7.2,7.2,0,1,1,5.091-2.108A7.155,7.155,0,0,1,13.67,20.852Z\"\n              transform=\"translate(-4.5 -4.493)\"\n              fill=\"#707070\"\n              opacity=\"0.74\"\n            />\n          </svg>\n          <input\n            value={search}\n            onChange={(e) => setSearch(e.target.value)}\n            placeholder=\"Search for products & services\"\n          />\n          {search && (\n            <button onClick={() => setSearch(\"\")}>\n              <X_svg />\n            </button>\n          )}\n        </section>\n        <section className=\"type\">\n          <label>Type:</label>\n          <Combobox\n            defaultValue={0}\n            options={[\n              { label: \"All\", value: \"\" },\n              { label: \"Product\", value: \"product\" },\n              { label: \"Service\", value: \"service\" },\n              { label: \"Other\", value: \"other\" },\n            ]}\n            onChange={(e) => setType(e.value)}\n          />\n        </section>\n        <section className=\"category\">\n          <label>Category:</label>\n          <Combobox\n            defaultValue={0}\n            options={[\n              { label: \"All\", value: \"\" },\n              ...categories.map((item) => ({\n                label: item,\n                value: item,\n              })),\n            ]}\n            onChange={(e) => setCategory(e.value)}\n          />\n        </section>\n        <section className={`date`}>\n          <InputDateRange\n            dateRange={dateRange}\n            onChange={(range) => setDateRange(range)}\n          />\n        </section>\n      </div>\n      <table className=\"table products\">\n        <thead>\n          {batch.length > 0 ? (\n            <tr className=\"batchAction\">\n              <th className=\"checkContainer\">\n                <Checkbox\n                  value={selectAll}\n                  defaultValue={selectAll}\n                  onChange={(e) => setSelectAll(e)}\n                />\n              </th>\n              <th>\n                <button\n                  onClick={() =>\n                    Confirm({\n                      label: \"Batch delete\",\n                      question: `You sure you want to delete these ${batch.length} items?`,\n                      callback: deleteMany,\n                    })\n                  }\n                >\n                  Delete\n                </button>\n              </th>\n              {user.fbMarket?.userAgreement && (\n                <>\n                  <th>\n                    <button\n                      onClick={() => {\n                        addToFbMarket(batch);\n                        setBatch([]);\n                      }}\n                    >\n                      Add to Facebook\n                    </button>\n                  </th>\n                  <th>\n                    <button\n                      onClick={() => {\n                        removeFromFbMarket(batch);\n                        setBatch([]);\n                      }}\n                    >\n                      Remove from Facebook\n                    </button>\n                  </th>\n                </>\n              )}\n            </tr>\n          ) : (\n            <tr>\n              <th className=\"checkContainer\">\n                <Checkbox\n                  value={selectAll}\n                  defaultValue={selectAll}\n                  onChange={(e) => setSelectAll(e)}\n                />\n              </th>\n              <th className=\"date\">Date</th>\n              <th>Image</th>\n              <th className=\"name\">Name</th>\n              <th>Type</th>\n              <th>Facebook Marketplace</th>\n              <th>Available</th>\n              <th>Price</th>\n              <th>GST</th>\n              <th>Discount</th>\n              <th>Listing Price</th>\n              {\n                // <th>Sold</th>\n              }\n              <th>Actions</th>\n            </tr>\n          )}\n        </thead>\n        <tbody>\n          {products.map((product) => (\n            <SingleProduct\n              categories={categories}\n              key={product._id}\n              product={product}\n              setProducts={setProducts}\n              selectAll={selectAll}\n              setBatch={setBatch}\n              batch={batch}\n              deleteItems={deleteItems}\n              addToFbMarket={addToFbMarket}\n              removeFromFbMarket={removeFromFbMarket}\n            />\n          ))}\n          {products.length === 0 && (\n            <tr className=\"placeholder\">\n              <td>No product yet.</td>\n            </tr>\n          )}\n        </tbody>\n      </table>\n      <Pagination\n        total={total}\n        btns={5}\n        currentPage={page}\n        perPage={perPage}\n        setPage={setPage}\n      />\n      <Modal className=\"msg\" open={msg}>\n        {msg}\n      </Modal>\n      <Modal\n        head={true}\n        label=\"Edit Product/Service\"\n        setOpen={setProductForm}\n        open={productForm}\n        className=\"productForm\"\n      >\n        <ProductForm\n          categories={categories}\n          onSuccess={(product) => {\n            setProducts((prev) => [...prev, product]);\n            setProductForm(false);\n            setMsg(\n              <>\n                <button onClick={() => setMsg(null)}>Okay</button>\n                <div>\n                  <Succ_svg />\n                  <h4>Product added.</h4>\n                </div>\n              </>\n            );\n          }}\n        />\n      </Modal>\n      <Modal\n        open={addMany}\n        head={true}\n        label=\"Batch product upload\"\n        setOpen={setAddMany}\n        className=\"batchItemPreview\"\n      >\n        <BatchUpload\n          categories={categories}\n          onSuccess={() => {\n            setAddMany(false);\n          }}\n        />\n      </Modal>\n    </>\n  );\n};\nconst SingleProduct = ({\n  product,\n  setProducts,\n  categories,\n  selectAll,\n  setBatch,\n  batch,\n  deleteItems,\n  addToFbMarket,\n  removeFromFbMarket,\n}) => {\n  const { user } = useContext(SiteContext);\n  const [selected, setSelected] = useState(selectAll || false);\n  const [edit, setEdit] = useState(false);\n  const [showInstaForm, setShowInstaForm] = useState(false);\n  const [msg, setMsg] = useState(false);\n  useEffect(() => {\n    setSelected(selectAll);\n  }, [selectAll]);\n  useEffect(() => {\n    if (selected) {\n      setBatch((prev) => [...prev, product._id]);\n    } else {\n      setBatch((prev) => prev.filter((item) => item !== product._id));\n    }\n  }, [selected]);\n  return (\n    <tr className={`product ${selected ? \"selected\" : \"\"}`}>\n      <td className=\"checkContainer\">\n        <Checkbox\n          defaultValue={selected}\n          value={selected}\n          onChange={(e) => {\n            setSelected(e);\n          }}\n        />\n      </td>\n      <td className=\"date\">\n        <Moment format=\"DD-MM-YY\">{product.createdAt}</Moment>\n      </td>\n      <td className=\"thumbs\">\n        <Media links={product.images} />\n      </td>\n      <td className=\"name\">{product.name}</td>\n      <td>{product.type}</td>\n      <td>{product.fbMarketId ? \"Added\" : \"N/A\"}</td>\n      <td>\n        {product.available} {product.available === true && \"Available\"}\n        {product.available === false && \"Unavailable\"}\n      </td>\n      <td>{product.price}</td>\n      <td>\n        {user.gst?.verified\n          ? (product.gst || user.gst?.amount || 0) + \"%\"\n          : \"N/A\"}\n      </td>\n      <td>{calculateDiscount(product) || 0}</td>\n      <td>{calculatePrice({ product, gst: user.gst }) || 0}</td>\n      {\n        // <td>{product.popularity || 0}</td>\n      }\n      <td>\n        {batch.length === 0 && (\n          <Actions icon={<Chev_down_svg />}>\n            <Link to={`/marketplace/${product._id}`} target=\"_blank\">\n              View\n            </Link>\n            {user.fbMarket?.userAgreement && (\n              // LS.get(\"facebook_user_accessToken\") &&\n              <>\n                {product.fbMarketId ? (\n                  <button onClick={() => removeFromFbMarket([product._id])}>\n                    Remove from Facebook\n                  </button>\n                ) : (\n                  <button onClick={() => addToFbMarket([product._id])}>\n                    Add to Facebook\n                  </button>\n                )}\n              </>\n            )}\n            {user.fbMarket?.instagramAccount?.id && (\n              <button onClick={() => setShowInstaForm(true)}>\n                Post to instagram\n              </button>\n            )}\n            {!user.fbMarket?.userAgreement && (\n              <Link to=\"/account/myShop/fbMarketplace\" className=\"edit\">\n                Setup FB Marketplace\n              </Link>\n            )}\n            <FacebookShareButton\n              resetButtonStyle={false}\n              url={`deliverypay.in/marketplace/${product._id}`}\n            >\n              Post on Facebook\n            </FacebookShareButton>\n            <button className=\"edit\" onClick={() => setEdit(true)}>\n              Edit\n            </button>\n            <button\n              className=\"delete\"\n              onClick={() =>\n                Confirm({\n                  label: \"Removing Product\",\n                  question: \"You sure want to delete this product?\",\n                  callback: () => deleteItems([product._id]),\n                })\n              }\n            >\n              Delete\n            </button>\n          </Actions>\n        )}\n      </td>\n      <Modal\n        head={true}\n        label=\"Edit Product/Service\"\n        open={edit}\n        setOpen={setEdit}\n        className=\"productForm\"\n      >\n        <ProductForm\n          categories={categories}\n          onSuccess={(product) => {\n            setProducts((prev) =>\n              prev.map((item) => {\n                if (item._id === product._id) {\n                  return product;\n                } else {\n                  return item;\n                }\n              })\n            );\n            setEdit(false);\n            setMsg(\n              <>\n                <button onClick={() => setMsg(null)}>Okay</button>\n                <div>\n                  <Succ_svg />\n                  <h4>Product updated.</h4>\n                </div>\n              </>\n            );\n          }}\n          prefill={product}\n        />\n      </Modal>\n      <Modal\n        head={true}\n        label=\"Post to Instagram\"\n        open={showInstaForm}\n        setOpen={setShowInstaForm}\n        className=\"instaForm\"\n      >\n        <InstaForm\n          product={product}\n          onSuccess={() => setShowInstaForm(false)}\n        />\n      </Modal>\n      <Modal className=\"msg\" open={msg}>\n        {msg}\n      </Modal>\n    </tr>\n  );\n};\nconst InstaForm = ({ product, onSuccess }) => {\n  const { FB } = window;\n  const { user } = useContext(SiteContext);\n  const [msg, setMsg] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [img, setImg] = useState(product.images[0]);\n  const [caption, setCaption] = useState(\"\");\n  const submit = (e) => {\n    e.preventDefault();\n    setLoading(true);\n    FB.api(\n      `/${user.fbMarket?.instagramAccount?.id}/media`,\n      \"POST\",\n      {\n        caption,\n        image_url: img,\n        access_token: user.fbMarket.user.access_token,\n      },\n      (res) => {\n        if (res.error) {\n          console.log(res.error);\n          setMsg(\n            <>\n              <button\n                onClick={() => {\n                  setMsg(null);\n                }}\n              >\n                Okay\n              </button>\n              <div>\n                <Err_svg />\n                <h4>{res.error.message}</h4>\n              </div>\n            </>\n          );\n          setLoading(false);\n          return;\n        }\n        FB.api(\n          `/${user.fbMarket?.instagramAccount?.id}/media_publish`,\n          \"POST\",\n          {\n            creation_id: res.id,\n            access_token: user.fbMarket.user.access_token,\n          },\n          (res) => {\n            setLoading(false);\n            if (res.error) {\n              console.log(res.error);\n              setMsg(\n                <>\n                  <button\n                    onClick={() => {\n                      setMsg(null);\n                    }}\n                  >\n                    Okay\n                  </button>\n                  <div>\n                    <Err_svg />\n                    <h4>{res.error.message}</h4>\n                  </div>\n                </>\n              );\n              return;\n            }\n            console.log(res);\n            setMsg(\n              <>\n                <button\n                  onClick={() => {\n                    setMsg(null);\n                    onSuccess?.();\n                  }}\n                >\n                  Okay\n                </button>\n                <div>\n                  <Succ_svg />\n                  <h4>Successfully posted.</h4>\n                </div>\n              </>\n            );\n          }\n        );\n      }\n    );\n  };\n  return (\n    <>\n      <form className=\"content\" onSubmit={submit}>\n        <div className=\"profile\">\n          <Img src={user.fbMarket?.instagramAccount?.profile_picture_url} />\n          <p>{user.fbMarket?.instagramAccount?.username}</p>\n        </div>\n        <Img src={img} className=\"main\" />\n        <div className=\"thumbs\">\n          {product.images?.map((img, i) => (\n            <Img key={i} src={img} onClick={() => setImg(img)} />\n          ))}\n        </div>\n        <section>\n          <label>Caption</label>\n          <TextareaAutosize\n            value={caption}\n            onChange={(e) => setCaption(e.target.value)}\n            maxLength={2200}\n          />\n        </section>\n        <section className=\"btns\">\n          <button className=\"submit pill\">Post</button>\n        </section>\n      </form>\n      <Modal className=\"msg\" open={msg}>\n        {msg}\n      </Modal>\n      {loading && (\n        <div className=\"spinnerContainer\">\n          <div className=\"spinner\" />\n        </div>\n      )}\n    </>\n  );\n};\n\nconst BatchUpload = ({ onSuccess, categories }) => {\n  const [loading, setLoading] = useState(false);\n  const [step, setStep] = useState(1);\n  const [batchItems, setBatchItems] = useState(null);\n  const [images, setImages] = useState([]);\n  const [msg, setMsg] = useState(null);\n  const [category, setCategory] = useState(\"\");\n  const [csvDraft, setCsvDraft] = useState(null);\n  const addBatchProducts = () => {\n    setLoading(true);\n    fetch(\"/api/updateDraft\", {\n      method: \"PATCH\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ items: batchItems }),\n    })\n      .then((res) => res.json())\n      .then(({ code, updated }) => {\n        setLoading(false);\n        if (code === \"ok\") {\n          setMsg(\n            <>\n              <button\n                onClick={() => {\n                  setMsg(null);\n                  onSuccess?.();\n                }}\n              >\n                Okay\n              </button>\n              <div>\n                {updated ? <Succ_svg /> : <Err_svg />}\n                <h4>{updated} items has been updated.</h4>\n              </div>\n            </>\n          );\n        } else {\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                <Err_svg />\n                <h4>Could not add products. Try again.</h4>\n              </div>\n            </>\n          );\n        }\n      })\n      .catch((err) => {\n        setLoading(false);\n        console.log(err);\n        setMsg(\n          <>\n            <button onClick={() => setMsg(null)}>Okay</button>\n            <div>\n              <Err_svg />\n              <h4>Could not add products. Make sure you're online.</h4>\n            </div>\n          </>\n        );\n      });\n  };\n  const uploadImages = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    const imgLinks = (await UploadFiles({ files: images, setMsg })) || [];\n    if (imgLinks.length !== images.length) {\n      setMsg(\n        <>\n          <button onClick={() => setMsg(null)}>Okay</button>\n          <div>\n            <Err_svg />\n            <h4>Could not upload images. Please try again.</h4>\n          </div>\n        </>\n      );\n      return;\n    }\n    fetch(\"/api/uploadProductImg\", {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({\n        images: imgLinks,\n        category,\n      }),\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        if (data.code === \"ok\") {\n          const headers = Object.entries({\n            Images: \"images\",\n            id: \"_id\",\n            Name: \"name\",\n            Description: \"dscr\",\n            Material: \"material\",\n            \"Size [Please specify mm, cm, inch or KG]\": \"size\",\n            Category: \"category\",\n            Type: \"type\",\n            \"Price in INR.\": \"price\",\n            \"Units Available\": \"available\",\n            \"HSN Code\": \"hsn\",\n            \"GST %\": \"gst\",\n          }).map(([key, value]) => ({\n            label: key,\n            key: value,\n          }));\n          setCsvDraft({\n            headers,\n            data: data.products,\n            filename: `Delivery Pay Product Draft.csv`,\n          });\n        } else {\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                <Err_svg />\n                <h4>Could not add products. Make sure you're online.</h4>\n              </div>\n            </>\n          );\n        }\n      })\n      .catch((err) => {\n        setLoading(false);\n        console.log(err);\n        setMsg(\n          <>\n            <button onClick={() => setMsg(null)}>Okay</button>\n            <div>\n              <Err_svg />\n              <h4>Could not add products. Make sure you're online.</h4>\n            </div>\n          </>\n        );\n      });\n  };\n  return (\n    <div className=\"content\">\n      <Step\n        label=\"Create Draft\"\n        className=\"createDraft\"\n        defaultStatus={step === 1}\n        data={csvDraft}\n      >\n        <>\n          <form onSubmit={uploadImages}>\n            <section className=\"category\">\n              <label>Choose category</label>\n              <Combobox\n                options={categories.map((item) => ({\n                  label: item,\n                  value: item.toLowerCase(),\n                }))}\n                required={true}\n                onChange={(e) => setCategory(e.value)}\n              />\n            </section>\n            <p>\n              Choose images{\" \"}\n              <span>\n                Choose 1 image for each product. you can add multiple images\n                later.\n              </span>\n            </p>\n            <FileInput onChange={(files) => setImages(files)} multiple={true} />\n            <section className=\"btns\">\n              <button\n                className=\"clean\"\n                type=\"button\"\n                onClick={() => setStep(3)}\n              >\n                Already have a draft\n              </button>\n              {csvDraft ? (\n                <CSVLink\n                  {...csvDraft}\n                  className=\"submit\"\n                  type=\"submit\"\n                  onClick={() => {\n                    setCsvDraft(null);\n                    setStep(2);\n                  }}\n                >\n                  Download Draft\n                </CSVLink>\n              ) : (\n                <button className=\"submit\">Create Draft</button>\n              )}\n            </section>\n          </form>\n        </>\n      </Step>\n      <Step label=\"Populate With data\" defaultStatus={step === 2}>\n        <p>\n          Populate the Sheet with real product data. Don't Change the header.\n        </p>\n        <button className=\"submit\" onClick={() => setStep(3)}>\n          Next\n        </button>\n      </Step>\n      <Step label=\"Upload Draft\" defaultStatus={step === 3}>\n        {!!batchItems?.length && (\n          <table className=\"table\">\n            <thead>\n              <tr>\n                <th>Type</th>\n                <th>Images</th>\n                <th className=\"name\">Name</th>\n                <th className=\"dscr\">Description</th>\n                <th>Available</th>\n                <th>Price</th>\n                <th>GST</th>\n                <th>Action</th>\n              </tr>\n            </thead>\n            <tbody>\n              {batchItems?.map((item, i) => (\n                <tr key={i}>\n                  <td>{item.type}</td>\n                  <td className=\"thumbs\">\n                    <Media links={item.images} />\n                  </td>\n                  <td className=\"name\">{item.name}</td>\n                  <td className=\"dscr\">{item.dscr}</td>\n                  <td>\n                    {item.available}\n                    {item.available === true && \"Available\"}\n                    {item.available === false && \"Unavailable\"}\n                  </td>\n                  <td>{item.price}</td>\n                  <td>{item.gst}</td>\n                  <td>\n                    <button\n                      className=\"remove\"\n                      onClick={() =>\n                        setBatchItems((prev) => {\n                          const newItems = [...prev];\n                          newItems.splice(i, 1);\n                          return newItems;\n                        })\n                      }\n                    >\n                      <X_svg />\n                    </button>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        )}\n        {!batchItems?.length && (\n          <div className=\"uploadFile\">\n            <p>\n              Upload xlsx/csv file in. See the example file{\" \"}\n              <a\n                href=\"/batch_product_upload_xlsx_file_example.csv\"\n                target=\"_blank\"\n              >\n                here\n              </a>\n              .\n            </p>\n            <input\n              type=\"file\"\n              accept=\".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\"\n              onChange={(e) => {\n                if (e.target.files[0]) {\n                  parseXLSXtoJSON(e.target.files[0], (result) => {\n                    if (result?.length) {\n                      setBatchItems(\n                        result\n                          .filter(\n                            (item) =>\n                              item.type &&\n                              item.category &&\n                              item.name &&\n                              item.dscr &&\n                              item.price !== undefined\n                          )\n                          .map((item) => ({\n                            ...item,\n                            status: \"\",\n                            images: item.images\n                              .split(/,( |\\n)/)\n                              .filter((item) => item.trim()),\n                          }))\n                      );\n                    }\n                  });\n                }\n                e.target.value = null;\n              }}\n            />\n          </div>\n        )}\n        {!!batchItems?.length && (\n          <button\n            className=\"submit\"\n            onClick={() =>\n              Confirm({\n                label: \"Adding Batch products\",\n                question: \"You sure want to add all these items?\",\n                callback: addBatchProducts,\n              })\n            }\n          >\n            Add\n          </button>\n        )}\n      </Step>\n      {loading && (\n        <div className=\"spinnerContainer\">\n          <div className=\"spinner\" />\n        </div>\n      )}\n      <Modal className=\"msg\" open={msg}>\n        {msg}\n      </Modal>\n    </div>\n  );\n};\n\nconst defaultTerms = [\n  \"Buyer will be responsible for paying for shipping costs & for returning the item.\",\n  \"Shipping costs are nonrefundable.\",\n  \"Orders must be returned with Original Packaging & Securely.\",\n  \"Orders must be Returned Via Trackable / Traceable Courier Services Only.\",\n  \"Proof of Return via Photo of Tracking Number & Dispatch Ticket is Required.\",\n  \"Refund is Only Issued Upon Delivery of Return Package.\",\n];\nconst Settings = ({ categories, setCategories }) => {\n  const { user, setUser } = useContext(SiteContext);\n  const [gstEdit, setGstEdit] = useState(false);\n  const [shippingEdit, setShippingEdit] = useState(false);\n  const [termsEdit, setTermsEdit] = useState();\n  const [editPayment, setEditPayment] = useState(false);\n  const [msg, setMsg] = useState(null);\n  return (\n    <div className=\"settings\">\n      <div className=\"caution\">\n        {!categories?.length && <p className=\"err\">Add at least 1 category.</p>}\n        {!user.shopInfo?.terms?.length && (\n          <p className=\"err\">Add Return policy terms</p>\n        )}\n        {(user.shopInfo?.shippingCost === undefined ||\n          user.shopInfo?.shippingCost === null ||\n          user.shopInfo?.deliveryWithin === undefined ||\n          user.shopInfo?.deliveryWithin === null ||\n          user.shopInfo?.refundable === undefined) && (\n          <p className=\"err\">Add Shipping & Delivery detail</p>\n        )}\n        {Object.values(user.shopInfo?.paymentMethod || {}).length < 6 && (\n          <p className=\"err\">Add valid payment method</p>\n        )}\n      </div>\n      <div className=\"cat\">\n        <h2 className=\"head\">Categories</h2>\n        <ul className=\"categories\">\n          {categories.map((item, i) => (\n            <li key={i}>\n              {item}{\" \"}\n              <button\n                onClick={() =>\n                  Confirm({\n                    label: \"Remove Category\",\n                    question: \"You sure want to remove this category?\",\n                    callback: () => {\n                      fetch(\"/api/categories\", {\n                        method: \"DELETE\",\n                        headers: { \"Content-Type\": \"application/json\" },\n                        body: JSON.stringify({\n                          category: item,\n                        }),\n                      })\n                        .then((res) => res.json())\n                        .then((data) => {\n                          if (data.code === \"ok\") {\n                            setCategories((prev) =>\n                              prev.filter((cat) => cat !== item)\n                            );\n                          } else {\n                            setMsg(\n                              <>\n                                <button onClick={() => setMsg(null)}>\n                                  Okay\n                                </button>\n                                <div>\n                                  <Err_svg />\n                                  <h4>Could not delete category. Try again.</h4>\n                                </div>\n                              </>\n                            );\n                          }\n                        })\n                        .catch((err) => {\n                          console.log(err);\n                          setMsg(\n                            <>\n                              <button onClick={() => setMsg(null)}>Okay</button>\n                              <div>\n                                <Err_svg />\n                                <h4>\n                                  Could not delete category. Make sure you're\n                                  online.\n                                </h4>\n                              </div>\n                            </>\n                          );\n                        });\n                    },\n                  })\n                }\n              >\n                <X_svg />\n              </button>\n            </li>\n          ))}\n          {categories.length === 0 && (\n            <li className=\"placeholder\">No category found.</li>\n          )}\n        </ul>\n        <form\n          onSubmit={(e) => {\n            e.preventDefault();\n            const input = e.target.querySelector(\"input\");\n            fetch(\"/api/addCategory\", {\n              method: \"POST\",\n              headers: { \"Content-Type\": \"application/json\" },\n              body: JSON.stringify({\n                category: input.value,\n              }),\n            })\n              .then((res) => res.json())\n              .then((data) => {\n                if (data.code === \"ok\") {\n                  setCategories(data.categories);\n                  input.value = \"\";\n                } else {\n                  setMsg(\n                    <>\n                      <button onClick={() => setMsg(null)}>Okay</button>\n                      <div>\n                        <Err_svg />\n                        <h4>Could not add category. Try again.</h4>\n                      </div>\n                    </>\n                  );\n                }\n              })\n              .catch((err) => {\n                console.log(err);\n                setMsg(\n                  <>\n                    <button onClick={() => setMsg(null)}>Okay</button>\n                    <div>\n                      <Err_svg />\n                      <h4>Could not add category. Make sure you're online.</h4>\n                    </div>\n                  </>\n                );\n              });\n          }}\n        >\n          <input\n            type=\"text\"\n            required={true}\n            placeholder=\"New Category. ie Mobile\"\n          />\n          <button>Add category</button>\n        </form>\n      </div>\n      <div className=\"gst\">\n        <h2 className=\"head\">\n          GST{\" \"}\n          {!gstEdit && <button onClick={() => setGstEdit(true)}>Edit</button>}\n        </h2>\n        <p className=\"status\">\n          Status:{\" \"}\n          <strong>{user.gst?.verified ? \"Verified\" : \"Unverified\"}</strong>\n        </p>\n        {gstEdit ? (\n          <GstEditForm setOpen={setGstEdit} setMsg={setMsg} />\n        ) : (\n          <>\n            <p>GST Registration number: {user.gst?.detail?.reg || \"N/A\"}</p>\n            <p>\n              GST amount: {user.gst?.amount ? user.gst.amount + \"%\" : \"N/A\"}\n            </p>\n            <p>\n              Files for verification:{\" \"}\n              {!user.gst?.detail?.files?.length && \"N/A\"}\n            </p>\n            {user.gst?.detail?.files?.length && (\n              <ul className=\"thumbs\">\n                <Media links={user.gst?.detail?.files} />\n              </ul>\n            )}\n          </>\n        )}\n        {!user.gst?.verified && (\n          <p className=\"note\">\n            *GST will apply once we review and verify your GST registraion.\n          </p>\n        )}\n      </div>\n      <div className=\"payment\">\n        <h2 className=\"head\">\n          Payment Method{\" \"}\n          {!editPayment && (\n            <button onClick={() => setEditPayment(true)}>Edit</button>\n          )}\n        </h2>\n        {editPayment ? (\n          <PaymentMethodForm\n            prefill={user.shopInfo?.paymentMethod}\n            setOpen={setEditPayment}\n            setMsg={setMsg}\n          />\n        ) : (\n          <>\n            <p>Name: {user.shopInfo?.paymentMethod?.name || \"--\"}</p>\n            <p>Bank: {user.shopInfo?.paymentMethod?.bank || \"--\"}</p>\n            <p>City: {user.shopInfo?.paymentMethod?.city || \"--\"}</p>\n            <p>\n              Account type: {user.shopInfo?.paymentMethod?.accountType || \"--\"}\n            </p>\n            <p>\n              Account Number:{\" \"}\n              {user.shopInfo?.paymentMethod?.accountNumber || \"--\"}\n            </p>\n            <p>ifsc: {user.shopInfo?.paymentMethod?.ifsc || \"--\"}</p>\n          </>\n        )}\n      </div>\n      <div className=\"terms shipping\">\n        <h2 className=\"head\">\n          Shipping & Delivery{\" \"}\n          {!shippingEdit && (\n            <button onClick={() => setShippingEdit(true)}>Edit</button>\n          )}\n        </h2>\n        {shippingEdit ? (\n          <ShippingEditForm setOpen={setShippingEdit} setMsg={setMsg} />\n        ) : (\n          <>\n            <p>\n              Shipping cost:{\" \"}\n              {user.shopInfo?.shippingCost\n                ? \"\" + user.shopInfo?.shippingCost\n                : \"N/A\"}\n            </p>\n            <p>\n              Delivery within (days): {user.shopInfo?.deliveryWithin || \"N/A\"}\n            </p>\n            <p>Refundable: {user.shopInfo?.refundable?.toString() || \"N/A\"}</p>\n          </>\n        )}\n      </div>\n      {\n        //   <div className=\"terms payment\">\n        //   <h2 className=\"head\">Deposit & Payment Terms</h2>\n        //   <p>\n        //     Refundable [ I will accept Returns ] / Non Refundable [ I will not\n        //     accept returns , My payment should be released as soon as my Order is\n        //     Delivered ] as Options before Requesting for a Payment.\n        //   </p>\n        // </div>\n      }\n      <div className=\"terms return\">\n        <h2 className=\"head\">\n          Return Policy Terms{\" \"}\n          {!termsEdit && (\n            <button onClick={() => setTermsEdit(true)}>Edit</button>\n          )}\n        </h2>\n        <TermsEditForm\n          setOpen={setTermsEdit}\n          termsEdit={termsEdit}\n          setMsg={setMsg}\n        />\n      </div>\n      <Modal className=\"msg\" open={msg}>\n        {msg}\n      </Modal>\n    </div>\n  );\n};\n\nconst GstEditForm = ({ setOpen, setMsg }) => {\n  const { user, setUser } = useContext(SiteContext);\n  const [loading, setLoading] = useState(false);\n  const [gstFiles, setGstFiles] = useState([]);\n  const [gstReg, setGstReg] = useState(user.gst?.detail?.reg);\n  const [amount, setAmount] = useState(user.gst?.amount);\n  const submit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    const fileLinks = (await UploadFiles({ files: gstFiles, setMsg })) || [];\n    updateProfileInfo({\n      \"gst.detail.files\": fileLinks,\n      \"gst.detail.reg\": gstReg,\n      \"gst.amount\": amount,\n    })\n      .then(({ user: newUser }) => {\n        setLoading(false);\n        if (newUser) {\n          setUser((prev) => ({ ...prev, gst: newUser.gst }));\n          setOpen(false);\n        }\n      })\n      .catch((err) => {\n        setLoading(false);\n        console.log(err);\n        setMsg(\n          <>\n            <button onClick={() => setMsg(null)}>Okay</button>\n            <div>\n              <Err_svg />\n              <h4>Could not upadte GST Information. Make sure you're online</h4>\n            </div>\n          </>\n        );\n      });\n  };\n  return (\n    <form onSubmit={submit}>\n      <section>\n        <label>GST Registration Nubmer</label>\n        <input\n          required={true}\n          type=\"text\"\n          defaultValue={user.gst?.detail.reg}\n          name=\"gst.detail.reg\"\n          onChange={(e) => setGstReg(e.target.value)}\n        />\n      </section>\n      <section>\n        <label>GST percentage (%)</label>\n        <NumberInput\n          required={true}\n          defaultValue={user.gst?.amount}\n          name=\"gst.detail.reg\"\n          onChange={(e) => setAmount(e.target.value)}\n        />\n      </section>\n      <section>\n        <label>Upload files for verification</label>\n        <FileInput\n          multiple={true}\n          prefill={user.gst?.detail?.files}\n          name=\"gst.detail.files\"\n          onChange={(files) => setGstFiles(files)}\n        />\n      </section>\n      <section className=\"btns\">\n        <button>Save Changes</button>\n        <button type=\"button\" onClick={() => setOpen(false)}>\n          Cancel\n        </button>\n      </section>\n    </form>\n  );\n};\nconst ShippingEditForm = ({ setOpen, setMsg }) => {\n  const { user, setUser } = useContext(SiteContext);\n  const [shippingCost, setShippingCost] = useState(\n    user.shopInfo?.shippingCost || 0\n  );\n  const [deliveryWithin, setDeliveryWithin] = useState(\n    user.shopInfo?.deliveryWithin\n  );\n  const [refundable, setRefundable] = useState(\n    user.shopInfo?.refundable || null\n  );\n  const submit = (e) => {\n    e.preventDefault();\n    updateProfileInfo({\n      \"shopInfo.shippingCost\": shippingCost,\n      \"shopInfo.deliveryWithin\": deliveryWithin,\n      \"shopInfo.refundable\": refundable,\n    })\n      .then(({ user: newUser }) => {\n        if (newUser) {\n          setUser((prev) => ({ ...prev, shopInfo: newUser.shopInfo }));\n          setOpen(false);\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        setMsg(\n          <>\n            <button onClick={() => setMsg(null)}>Okay</button>\n            <div>\n              <Err_svg />\n              <h4>Could not upadte Terms. Make sure you're online</h4>\n            </div>\n          </>\n        );\n      });\n  };\n  return (\n    <form onSubmit={submit}>\n      <section>\n        <label>Shipping Cost </label>\n        <NumberInput\n          required={true}\n          defaultValue={shippingCost}\n          name=\"shippingCost\"\n          onChange={(e) => setShippingCost(e.target.value)}\n        />\n      </section>\n      <section>\n        <label>Delivery Within (days)</label>\n        <NumberInput\n          required={true}\n          defaultValue={deliveryWithin}\n          name=\"deliveryWithin\"\n          min={1}\n          step=\"0\"\n          placeholder=\"ie. 4 Days\"\n          onChange={(e) => setDeliveryWithin(e.target.value)}\n        />\n      </section>\n      <section>\n        <label>Refundable</label>\n        <Combobox\n          required={true}\n          defaultValue={0}\n          onChange={(e) => setRefundable(e.value)}\n          options={[\n            { label: \"No\", value: null },\n            {\n              label: \"Upto 24 Hours After Delivery\",\n              value: \"Upto 24 Hours After Delivery\",\n            },\n            {\n              label: \"Upto 7 Days After Delivery\",\n              value: \"Upto 7 Days After Delivery\",\n            },\n            {\n              label: \"Upto 15 Days After Delivery\",\n              value: \"Upto 15 Days After Delivery\",\n            },\n          ]}\n        />\n      </section>\n      <section className=\"btns\">\n        <button>Save Changes</button>\n        <button type=\"button\" onClick={() => setOpen(false)}>\n          Cancel\n        </button>\n      </section>\n    </form>\n  );\n};\nconst TermsEditForm = ({ setOpen, termsEdit, setMsg }) => {\n  const { user, setUser } = useContext(SiteContext);\n  const [terms, setTerms] = useState(user.shopInfo?.terms || []);\n  const [addTerm, setAddTerm] = useState(\"\");\n  const submit = (e) => {\n    e.preventDefault();\n    updateProfileInfo({\n      \"shopInfo.terms\": terms,\n    })\n      .then(({ user: newUser }) => {\n        if (newUser) {\n          setUser((prev) => ({ ...prev, shopInfo: newUser.shopInfo }));\n          setOpen(false);\n          setTerms(newUser.shopInfo?.terms);\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        setMsg(\n          <>\n            <button onClick={() => setMsg(null)}>Okay</button>\n            <div>\n              <Err_svg />\n              <h4>Could not upadte Terms. Make sure you're online</h4>\n            </div>\n          </>\n        );\n      });\n  };\n  useEffect(() => {\n    if (termsEdit) {\n      if (terms.length === 0) {\n        setTerms(defaultTerms);\n      }\n    } else {\n      setTerms(user.shopInfo?.terms || []);\n    }\n  }, [termsEdit]);\n  return (\n    <form onSubmit={submit}>\n      <ul>\n        {terms.map((item, i) => (\n          <li key={i}>\n            {item}{\" \"}\n            {termsEdit && (\n              <button\n                type=\"button\"\n                onClick={() =>\n                  setTerms((prev) => prev.filter((term) => term !== item))\n                }\n              >\n                <X_svg />\n              </button>\n            )}\n          </li>\n        ))}\n        {terms.length === 0 && <li>No terms has been added.</li>}\n      </ul>\n      {termsEdit && (\n        <>\n          <section className=\"addTerm\">\n            <TextareaAutosize\n              value={addTerm}\n              placeholder=\"Add auditional term\"\n              onChange={(e) => setAddTerm(e.target.value)}\n            />\n            <button\n              type=\"button\"\n              onClick={() => {\n                setTerms((prev) =>\n                  addTerm\n                    ? [...prev.filter((term) => term !== addTerm), addTerm]\n                    : prev\n                );\n                setAddTerm(\"\");\n              }}\n            >\n              Add Term\n            </button>\n          </section>\n          <section className=\"btns\">\n            <button>Save Changes</button>\n            <button\n              type=\"button\"\n              onClick={() => {\n                setOpen(false);\n                setTerms(\n                  user.shopInfo?.terms?.length\n                    ? user.shopInfo.terms\n                    : defaultTerms\n                );\n              }}\n            >\n              Cancel\n            </button>\n          </section>\n        </>\n      )}\n    </form>\n  );\n};\nconst PaymentMethodForm = ({ prefill, onSuccess, setMsg, setOpen }) => {\n  const { setUser } = useContext(SiteContext);\n  const [bank, setBank] = useState(prefill?.bank || \"\");\n  const [name, setName] = useState(prefill?.name || \"\");\n  const [ifsc, setIfsc] = useState(prefill?.ifsc || \"\");\n  const [city, setCity] = useState(prefill?.city || \"\");\n  const [type, setType] = useState(prefill?.accountType || \"\");\n  const [accountNumber, setAccountNumber] = useState(\n    prefill?.accountNumber || \"\"\n  );\n  const submit = (e) => {\n    e.preventDefault();\n    updateProfileInfo({\n      \"shopInfo.paymentMethod\": {\n        name,\n        bank,\n        city,\n        accountType: type,\n        ifsc,\n        accountNumber,\n      },\n    })\n      .then(({ user: newUser }) => {\n        if (newUser) {\n          setUser((prev) => ({\n            ...prev,\n            shopInfo: newUser.shopInfo,\n          }));\n          setOpen(false);\n        } else {\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                <Err_svg />\n                <h4>Could not update payment method. Please try again.</h4>\n              </div>\n            </>\n          );\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        setMsg(\n          <>\n            <button onClick={() => setMsg(null)}>Okay</button>\n            <div>\n              <Err_svg />\n              <h4>\n                Could not updated payment method. Make sure you're online.\n              </h4>\n            </div>\n          </>\n        );\n      });\n  };\n  return (\n    <form className=\"paymentMethodForm netBanking\" onSubmit={submit}>\n      <section className=\"inputs\">\n        <input\n          type=\"text\"\n          name=\"name\"\n          placeholder=\"Full name\"\n          value={name}\n          onChange={(e) => setName(e.target.value)}\n          required={true}\n        />\n        <input\n          type=\"text\"\n          name=\"bank\"\n          placeholder=\"Bank\"\n          value={bank}\n          onChange={(e) => setBank(e.target.value)}\n          required={true}\n        />\n        <input\n          type=\"text\"\n          name=\"city\"\n          placeholder=\"City\"\n          value={city}\n          onChange={(e) => setCity(e.target.value)}\n          required={true}\n        />\n        <input\n          type=\"text\"\n          name=\"type\"\n          placeholder=\"Account type ie. Savings / Current\"\n          value={type}\n          onChange={(e) => setType(e.target.value)}\n          required={true}\n        />\n        <input\n          type=\"text\"\n          name=\"accountNumber\"\n          placeholder=\"Account Number\"\n          value={accountNumber}\n          onChange={(e) => setAccountNumber(e.target.value)}\n          required={true}\n        />\n        <input\n          type=\"text\"\n          name=\"ifsc\"\n          placeholder=\"IFSC\"\n          value={ifsc}\n          onChange={(e) => setIfsc(e.target.value)}\n          required={true}\n        />\n      </section>\n      <section className=\"btns\">\n        <button type=\"submit\">Save Changes</button>\n        <button type=\"button\" onClick={() => setOpen(false)}>\n          Cancel\n        </button>\n      </section>\n    </form>\n  );\n};\n\nexport default MyShop;\n","import { useLayoutEffect } from 'react';\n\nvar index =  useLayoutEffect ;\n\nexport default index;\n","import { useRef } from 'react';\nimport useIsomorphicLayoutEffect from 'use-isomorphic-layout-effect';\n\nvar useLatest = function useLatest(value) {\n  var ref = useRef(value);\n  useIsomorphicLayoutEffect(function () {\n    ref.current = value;\n  });\n  return ref;\n};\n\nexport default useLatest;\n","import { useRef, useCallback } from 'react';\n\nvar updateRef = function updateRef(ref, value) {\n  if (typeof ref === 'function') {\n    ref(value);\n    return;\n  }\n  ref.current = value;\n};\n\nvar useComposedRef = function useComposedRef(libRef, userRef) {\n  var prevUserRef = useRef();\n  return useCallback(function (instance) {\n    libRef.current = instance;\n\n    if (prevUserRef.current) {\n      updateRef(prevUserRef.current, null);\n    }\n\n    prevUserRef.current = userRef;\n\n    if (!userRef) {\n      return;\n    }\n\n    updateRef(userRef, instance);\n  }, [userRef]);\n};\n\nexport default useComposedRef;\n","import _extends from '@babel/runtime/helpers/esm/extends';\nimport _objectWithoutPropertiesLoose from '@babel/runtime/helpers/esm/objectWithoutPropertiesLoose';\nimport { useLayoutEffect, forwardRef, useRef, createElement } from 'react';\nimport useLatest from 'use-latest';\nimport useComposedRef from 'use-composed-ref';\n\nvar HIDDEN_TEXTAREA_STYLE = {\n  'min-height': '0',\n  'max-height': 'none',\n  height: '0',\n  visibility: 'hidden',\n  overflow: 'hidden',\n  position: 'absolute',\n  'z-index': '-1000',\n  top: '0',\n  right: '0'\n};\n\nvar forceHiddenStyles = function forceHiddenStyles(node) {\n  Object.keys(HIDDEN_TEXTAREA_STYLE).forEach(function (key) {\n    node.style.setProperty(key, HIDDEN_TEXTAREA_STYLE[key], 'important');\n  });\n};\n\n//   export type CalculatedNodeHeights = [height: number, rowHeight: number];\n// https://github.com/microsoft/TypeScript/issues/28259\n\nvar hiddenTextarea = null;\n\nvar getHeight = function getHeight(node, sizingData) {\n  var height = node.scrollHeight;\n\n  if (sizingData.sizingStyle.boxSizing === 'border-box') {\n    // border-box: add border, since height = content + padding + border\n    return height + sizingData.borderSize;\n  } // remove padding, since height = content\n\n\n  return height - sizingData.paddingSize;\n};\n\nfunction calculateNodeHeight(sizingData, value, minRows, maxRows) {\n  if (minRows === void 0) {\n    minRows = 1;\n  }\n\n  if (maxRows === void 0) {\n    maxRows = Infinity;\n  }\n\n  if (!hiddenTextarea) {\n    hiddenTextarea = document.createElement('textarea');\n    hiddenTextarea.setAttribute('tabindex', '-1');\n    hiddenTextarea.setAttribute('aria-hidden', 'true');\n    forceHiddenStyles(hiddenTextarea);\n  }\n\n  if (hiddenTextarea.parentNode === null) {\n    document.body.appendChild(hiddenTextarea);\n  }\n\n  var paddingSize = sizingData.paddingSize,\n      borderSize = sizingData.borderSize,\n      sizingStyle = sizingData.sizingStyle;\n  var boxSizing = sizingStyle.boxSizing;\n  Object.keys(sizingStyle).forEach(function (_key) {\n    var key = _key;\n    hiddenTextarea.style[key] = sizingStyle[key];\n  });\n  forceHiddenStyles(hiddenTextarea);\n  hiddenTextarea.value = value;\n  var height = getHeight(hiddenTextarea, sizingData); // measure height of a textarea with a single row\n\n  hiddenTextarea.value = 'x';\n  var rowHeight = hiddenTextarea.scrollHeight - paddingSize;\n  var minHeight = rowHeight * minRows;\n\n  if (boxSizing === 'border-box') {\n    minHeight = minHeight + paddingSize + borderSize;\n  }\n\n  height = Math.max(minHeight, height);\n  var maxHeight = rowHeight * maxRows;\n\n  if (boxSizing === 'border-box') {\n    maxHeight = maxHeight + paddingSize + borderSize;\n  }\n\n  height = Math.min(maxHeight, height);\n  return [height, rowHeight];\n}\n\nvar noop = function noop() {};\nvar pick = function pick(props, obj) {\n  return props.reduce(function (acc, prop) {\n    acc[prop] = obj[prop];\n    return acc;\n  }, {});\n};\n\nvar SIZING_STYLE = ['borderBottomWidth', 'borderLeftWidth', 'borderRightWidth', 'borderTopWidth', 'boxSizing', 'fontFamily', 'fontSize', 'fontStyle', 'fontWeight', 'letterSpacing', 'lineHeight', 'paddingBottom', 'paddingLeft', 'paddingRight', 'paddingTop', // non-standard\n'tabSize', 'textIndent', // non-standard\n'textRendering', 'textTransform', 'width', 'wordBreak'];\nvar isIE = !!document.documentElement.currentStyle ;\n\nvar getSizingData = function getSizingData(node) {\n  var style = window.getComputedStyle(node);\n\n  if (style === null) {\n    return null;\n  }\n\n  var sizingStyle = pick(SIZING_STYLE, style);\n  var boxSizing = sizingStyle.boxSizing; // probably node is detached from DOM, can't read computed dimensions\n\n  if (boxSizing === '') {\n    return null;\n  } // IE (Edge has already correct behaviour) returns content width as computed width\n  // so we need to add manually padding and border widths\n\n\n  if (isIE && boxSizing === 'border-box') {\n    sizingStyle.width = parseFloat(sizingStyle.width) + parseFloat(sizingStyle.borderRightWidth) + parseFloat(sizingStyle.borderLeftWidth) + parseFloat(sizingStyle.paddingRight) + parseFloat(sizingStyle.paddingLeft) + 'px';\n  }\n\n  var paddingSize = parseFloat(sizingStyle.paddingBottom) + parseFloat(sizingStyle.paddingTop);\n  var borderSize = parseFloat(sizingStyle.borderBottomWidth) + parseFloat(sizingStyle.borderTopWidth);\n  return {\n    sizingStyle: sizingStyle,\n    paddingSize: paddingSize,\n    borderSize: borderSize\n  };\n};\n\nvar useWindowResizeListener = function useWindowResizeListener(listener) {\n  var latestListener = useLatest(listener);\n  useLayoutEffect(function () {\n    var handler = function handler(event) {\n      latestListener.current(event);\n    };\n\n    window.addEventListener('resize', handler);\n    return function () {\n      window.removeEventListener('resize', handler);\n    };\n  }, []);\n};\n\nvar TextareaAutosize = function TextareaAutosize(_ref, userRef) {\n  var cacheMeasurements = _ref.cacheMeasurements,\n      maxRows = _ref.maxRows,\n      minRows = _ref.minRows,\n      _ref$onChange = _ref.onChange,\n      onChange = _ref$onChange === void 0 ? noop : _ref$onChange,\n      _ref$onHeightChange = _ref.onHeightChange,\n      onHeightChange = _ref$onHeightChange === void 0 ? noop : _ref$onHeightChange,\n      props = _objectWithoutPropertiesLoose(_ref, [\"cacheMeasurements\", \"maxRows\", \"minRows\", \"onChange\", \"onHeightChange\"]);\n\n  if (process.env.NODE_ENV !== 'production' && props.style) {\n    if ('maxHeight' in props.style) {\n      throw new Error('Using `style.maxHeight` for <TextareaAutosize/> is not supported. Please use `maxRows`.');\n    }\n\n    if ('minHeight' in props.style) {\n      throw new Error('Using `style.minHeight` for <TextareaAutosize/> is not supported. Please use `minRows`.');\n    }\n  }\n\n  var isControlled = props.value !== undefined;\n  var libRef = useRef(null);\n  var ref = useComposedRef(libRef, userRef);\n  var heightRef = useRef(0);\n  var measurementsCacheRef = useRef();\n\n  var resizeTextarea = function resizeTextarea() {\n    var node = libRef.current;\n    var nodeSizingData = cacheMeasurements && measurementsCacheRef.current ? measurementsCacheRef.current : getSizingData(node);\n\n    if (!nodeSizingData) {\n      return;\n    }\n\n    measurementsCacheRef.current = nodeSizingData;\n\n    var _calculateNodeHeight = calculateNodeHeight(nodeSizingData, node.value || node.placeholder || 'x', minRows, maxRows),\n        height = _calculateNodeHeight[0],\n        rowHeight = _calculateNodeHeight[1];\n\n    if (heightRef.current !== height) {\n      heightRef.current = height;\n      node.style.setProperty('height', height + \"px\", 'important');\n      onHeightChange(height, {\n        rowHeight: rowHeight\n      });\n    }\n  };\n\n  var handleChange = function handleChange(event) {\n    if (!isControlled) {\n      resizeTextarea();\n    }\n\n    onChange(event);\n  };\n\n  {\n    useLayoutEffect(resizeTextarea);\n    useWindowResizeListener(resizeTextarea);\n  }\n\n  return /*#__PURE__*/createElement(\"textarea\", _extends({}, props, {\n    onChange: handleChange,\n    ref: ref\n  }));\n};\n\nvar index = /* #__PURE__ */forwardRef(TextareaAutosize);\n\nexport default index;\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nvar isSafari = exports.isSafari = function isSafari() {\n  return (/^((?!chrome|android).)*safari/i.test(navigator.userAgent)\n  );\n};\n\nvar isJsons = exports.isJsons = function isJsons(array) {\n  return Array.isArray(array) && array.every(function (row) {\n    return (typeof row === \"undefined\" ? \"undefined\" : _typeof(row)) === 'object' && !(row instanceof Array);\n  });\n};\n\nvar isArrays = exports.isArrays = function isArrays(array) {\n  return Array.isArray(array) && array.every(function (row) {\n    return Array.isArray(row);\n  });\n};\n\nvar jsonsHeaders = exports.jsonsHeaders = function jsonsHeaders(array) {\n  return Array.from(array.map(function (json) {\n    return Object.keys(json);\n  }).reduce(function (a, b) {\n    return new Set([].concat(_toConsumableArray(a), _toConsumableArray(b)));\n  }, []));\n};\n\nvar jsons2arrays = exports.jsons2arrays = function jsons2arrays(jsons, headers) {\n  headers = headers || jsonsHeaders(jsons);\n\n  var headerLabels = headers;\n  var headerKeys = headers;\n  if (isJsons(headers)) {\n    headerLabels = headers.map(function (header) {\n      return header.label;\n    });\n    headerKeys = headers.map(function (header) {\n      return header.key;\n    });\n  }\n\n  var data = jsons.map(function (object) {\n    return headerKeys.map(function (header) {\n      return getHeaderValue(header, object);\n    });\n  });\n  return [headerLabels].concat(_toConsumableArray(data));\n};\n\nvar getHeaderValue = exports.getHeaderValue = function getHeaderValue(property, obj) {\n  var foundValue = property.replace(/\\[([^\\]]+)]/g, \".$1\").split(\".\").reduce(function (o, p, i, arr) {\n    if (o[p] === undefined) {\n      arr.splice(1);\n    } else {\n      return o[p];\n    }\n  }, obj);\n\n  return foundValue === undefined ? property in obj ? obj[property] : '' : foundValue;\n};\n\nvar elementOrEmpty = exports.elementOrEmpty = function elementOrEmpty(element) {\n  return element || element === 0 ? element : '';\n};\n\nvar joiner = exports.joiner = function joiner(data) {\n  var separator = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : ',';\n  var enclosingCharacter = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '\"';\n\n  return data.filter(function (e) {\n    return e;\n  }).map(function (row) {\n    return row.map(function (element) {\n      return elementOrEmpty(element);\n    }).map(function (column) {\n      return \"\" + enclosingCharacter + column + enclosingCharacter;\n    }).join(separator);\n  }).join(\"\\n\");\n};\n\nvar arrays2csv = exports.arrays2csv = function arrays2csv(data, headers, separator, enclosingCharacter) {\n  return joiner(headers ? [headers].concat(_toConsumableArray(data)) : data, separator, enclosingCharacter);\n};\n\nvar jsons2csv = exports.jsons2csv = function jsons2csv(data, headers, separator, enclosingCharacter) {\n  return joiner(jsons2arrays(data, headers), separator, enclosingCharacter);\n};\n\nvar string2csv = exports.string2csv = function string2csv(data, headers, separator, enclosingCharacter) {\n  return headers ? headers.join(separator) + \"\\n\" + data : data;\n};\n\nvar toCSV = exports.toCSV = function toCSV(data, headers, separator, enclosingCharacter) {\n  if (isJsons(data)) return jsons2csv(data, headers, separator, enclosingCharacter);\n  if (isArrays(data)) return arrays2csv(data, headers, separator, enclosingCharacter);\n  if (typeof data === 'string') return string2csv(data, headers, separator);\n  throw new TypeError(\"Data should be a \\\"String\\\", \\\"Array of arrays\\\" OR \\\"Array of objects\\\" \");\n};\n\nvar buildURI = exports.buildURI = function buildURI(data, uFEFF, headers, separator, enclosingCharacter) {\n  var csv = toCSV(data, headers, separator, enclosingCharacter);\n  var type = isSafari() ? 'application/csv' : 'text/csv';\n  var blob = new Blob([uFEFF ? \"\\uFEFF\" : '', csv], { type: type });\n  var dataURI = \"data:\" + type + \";charset=utf-8,\" + (uFEFF ? \"\\uFEFF\" : '') + csv;\n\n  var URL = window.URL || window.webkitURL;\n\n  return typeof URL.createObjectURL === 'undefined' ? dataURI : URL.createObjectURL(blob);\n};","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.PropsNotForwarded = exports.defaultProps = exports.propTypes = undefined;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar propTypes = exports.propTypes = {\n  data: (0, _propTypes.oneOfType)([_propTypes.string, _propTypes.array]).isRequired,\n  headers: _propTypes.array,\n  target: _propTypes.string,\n  separator: _propTypes.string,\n  filename: _propTypes.string,\n  uFEFF: _propTypes.bool,\n  onClick: _propTypes.func,\n  asyncOnClick: _propTypes.bool\n};\n\nvar defaultProps = exports.defaultProps = {\n  separator: ',',\n  filename: 'generatedBy_react-csv.csv',\n  uFEFF: true,\n  asyncOnClick: false\n};\n\nvar PropsNotForwarded = exports.PropsNotForwarded = ['data', 'headers'];","module.exports = require('./lib/index.js');\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CSVLink = exports.CSVDownload = undefined;\n\nvar _Download = require('./components/Download');\n\nvar _Download2 = _interopRequireDefault(_Download);\n\nvar _Link = require('./components/Link');\n\nvar _Link2 = _interopRequireDefault(_Link);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar CSVDownload = exports.CSVDownload = _Download2.default;\nvar CSVLink = exports.CSVLink = _Link2.default;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _core = require('../core');\n\nvar _metaProps = require('../metaProps');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar defaultProps = {\n  target: '_blank'\n};\n\nvar CSVDownload = function (_React$Component) {\n  _inherits(CSVDownload, _React$Component);\n\n  function CSVDownload(props) {\n    _classCallCheck(this, CSVDownload);\n\n    var _this = _possibleConstructorReturn(this, (CSVDownload.__proto__ || Object.getPrototypeOf(CSVDownload)).call(this, props));\n\n    _this.state = {};\n    return _this;\n  }\n\n  _createClass(CSVDownload, [{\n    key: 'buildURI',\n    value: function buildURI() {\n      return _core.buildURI.apply(undefined, arguments);\n    }\n  }, {\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      var _props = this.props,\n          data = _props.data,\n          headers = _props.headers,\n          separator = _props.separator,\n          enclosingCharacter = _props.enclosingCharacter,\n          uFEFF = _props.uFEFF,\n          target = _props.target,\n          specs = _props.specs,\n          replace = _props.replace;\n\n      this.state.page = window.open(this.buildURI(data, uFEFF, headers, separator, enclosingCharacter), target, specs, replace);\n    }\n  }, {\n    key: 'getWindow',\n    value: function getWindow() {\n      return this.state.page;\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      return null;\n    }\n  }]);\n\n  return CSVDownload;\n}(_react2.default.Component);\n\nCSVDownload.defaultProps = Object.assign(_metaProps.defaultProps, defaultProps);\nCSVDownload.propTypes = _metaProps.propTypes;\nexports.default = CSVDownload;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _core = require('../core');\n\nvar _metaProps = require('../metaProps');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar CSVLink = function (_React$Component) {\n  _inherits(CSVLink, _React$Component);\n\n  function CSVLink(props) {\n    _classCallCheck(this, CSVLink);\n\n    var _this = _possibleConstructorReturn(this, (CSVLink.__proto__ || Object.getPrototypeOf(CSVLink)).call(this, props));\n\n    _this.buildURI = _this.buildURI.bind(_this);\n    _this.state = { href: '' };\n    return _this;\n  }\n\n  _createClass(CSVLink, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      var _props = this.props,\n          data = _props.data,\n          headers = _props.headers,\n          separator = _props.separator,\n          uFEFF = _props.uFEFF,\n          enclosingCharacter = _props.enclosingCharacter;\n\n      this.setState({ href: this.buildURI(data, uFEFF, headers, separator, enclosingCharacter) });\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate(prevProps) {\n      if (this.props !== prevProps) {\n        var _props2 = this.props,\n            data = _props2.data,\n            headers = _props2.headers,\n            separator = _props2.separator,\n            uFEFF = _props2.uFEFF;\n\n        this.setState({ href: this.buildURI(data, uFEFF, headers, separator) });\n      }\n    }\n  }, {\n    key: 'buildURI',\n    value: function buildURI() {\n      return _core.buildURI.apply(undefined, arguments);\n    }\n  }, {\n    key: 'handleLegacy',\n    value: function handleLegacy(event) {\n      if (window.navigator.msSaveOrOpenBlob) {\n        event.preventDefault();\n\n        var _props3 = this.props,\n            data = _props3.data,\n            headers = _props3.headers,\n            separator = _props3.separator,\n            filename = _props3.filename,\n            enclosingCharacter = _props3.enclosingCharacter,\n            uFEFF = _props3.uFEFF;\n\n\n        var blob = new Blob([uFEFF ? '\\uFEFF' : '', (0, _core.toCSV)(data, headers, separator, enclosingCharacter)]);\n        window.navigator.msSaveBlob(blob, filename);\n\n        return false;\n      }\n    }\n  }, {\n    key: 'handleAsyncClick',\n    value: function handleAsyncClick(event) {\n      var _this2 = this;\n\n      var done = function done(proceed) {\n        if (proceed === false) {\n          event.preventDefault();\n          return;\n        }\n        _this2.handleLegacy(event);\n      };\n\n      this.props.onClick(event, done);\n    }\n  }, {\n    key: 'handleSyncClick',\n    value: function handleSyncClick(event) {\n      var stopEvent = this.props.onClick(event) === false;\n      if (stopEvent) {\n        event.preventDefault();\n        return;\n      }\n      this.handleLegacy(event);\n    }\n  }, {\n    key: 'handleClick',\n    value: function handleClick() {\n      var _this3 = this;\n\n      return function (event) {\n        if (typeof _this3.props.onClick === 'function') {\n          return _this3.props.asyncOnClick ? _this3.handleAsyncClick(event) : _this3.handleSyncClick(event);\n        }\n        _this3.handleLegacy(event);\n      };\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this4 = this;\n\n      var _props4 = this.props,\n          data = _props4.data,\n          headers = _props4.headers,\n          separator = _props4.separator,\n          filename = _props4.filename,\n          uFEFF = _props4.uFEFF,\n          children = _props4.children,\n          onClick = _props4.onClick,\n          asyncOnClick = _props4.asyncOnClick,\n          enclosingCharacter = _props4.enclosingCharacter,\n          rest = _objectWithoutProperties(_props4, ['data', 'headers', 'separator', 'filename', 'uFEFF', 'children', 'onClick', 'asyncOnClick', 'enclosingCharacter']);\n\n      return _react2.default.createElement(\n        'a',\n        _extends({\n          download: filename\n        }, rest, {\n          ref: function ref(link) {\n            return _this4.link = link;\n          },\n          target: '_self',\n          href: this.state.href,\n          onClick: this.handleClick()\n        }),\n        children\n      );\n    }\n  }]);\n\n  return CSVLink;\n}(_react2.default.Component);\n\nCSVLink.defaultProps = _metaProps.defaultProps;\nCSVLink.propTypes = _metaProps.propTypes;\nexports.default = CSVLink;"],"sourceRoot":""}