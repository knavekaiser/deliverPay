{"version":3,"sources":["components/Forms.js","../node_modules/use-isomorphic-layout-effect/dist/use-isomorphic-layout-effect.browser.esm.js","../node_modules/use-latest/dist/use-latest.esm.js","../node_modules/use-composed-ref/dist/use-composed-ref.esm.js","../node_modules/react-textarea-autosize/dist/react-textarea-autosize.browser.esm.js"],"names":["MilestoneForm","action","client","onSuccess","definedAmount","order","refund","strict","useContext","SiteContext","user","config","setUser","useState","loading","setLoading","userDetail","clientDetail","dscr","setDscr","amount","setAmount","fee","setFee","msg","setMsg","onTimeout","useRef","requestMilestone","useCallback","fetch","method","headers","body","JSON","stringify","buyer_id","_id","then","res","json","data","code","milestone","onClick","catch","err","console","log","createMilestone","seller","to","useEffect","fix","className","onSubmit","e","preventDefault","toast","current","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","onClose","draggable","progress","undefined","readOnly","min","defaultValue","required","onChange","target","value","toString","firstName","lastName","type","src","profileImg","phone","email","address","street","city","zip","open","MilestoneReleaseForm","setReleaseForm","AddressForm","onCancel","name","setName","setPhone","setZip","locality","setLocatily","setStreet","setCity","state","setState","landmark","setLandmark","altPhone","setAltPhone","htmlFor","resiz","DisputeForm","setDisputeForm","issue","setIssue","caseFiles","setCaseFiles","submit","a","length","UploadFiles","files","fileLinks","milestoneId","defendantId","_case","options","role","label","multiple","accept","TicketForm","setMilestone","transaction","setTransaction","setFiles","message","setMessage","ticket","TicketReplyForm","index","useLayoutEffect","useLatest","ref","useIsomorphicLayoutEffect","updateRef","useComposedRef","libRef","userRef","prevUserRef","instance","HIDDEN_TEXTAREA_STYLE","height","visibility","overflow","top","right","forceHiddenStyles","node","Object","keys","forEach","key","style","setProperty","hiddenTextarea","noop","SIZING_STYLE","isIE","document","documentElement","currentStyle","TextareaAutosize","_ref","cacheMeasurements","maxRows","minRows","_ref$onChange","_ref$onHeightChange","onHeightChange","props","_objectWithoutPropertiesLoose","isControlled","heightRef","measurementsCacheRef","resizeTextarea","nodeSizingData","window","getComputedStyle","obj","sizingStyle","reduce","acc","prop","boxSizing","width","parseFloat","borderRightWidth","borderLeftWidth","paddingRight","paddingLeft","paddingSize","paddingBottom","paddingTop","borderSize","borderBottomWidth","borderTopWidth","getSizingData","_calculateNodeHeight","sizingData","Infinity","createElement","setAttribute","parentNode","appendChild","_key","scrollHeight","getHeight","rowHeight","minHeight","Math","max","maxHeight","calculateNodeHeight","placeholder","listener","latestListener","handler","event","addEventListener","removeEventListener","useWindowResizeListener","_extends","forwardRef"],"mappings":"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","file":"static/js/6.b844258c.chunk.js","sourcesContent":["import { useState, useEffect, useContext, useRef, useCallback } from \"react\";\nimport { SiteContext } from \"../SiteContext\";\nimport {\n  NumberInput,\n  Combobox,\n  Err_svg,\n  FileInput,\n  UploadFiles,\n  Img,\n} from \"./Elements\";\nimport { Link } from \"react-router-dom\";\nimport { Modal } from \"./Modal\";\nimport TextareaAutosize from \"react-textarea-autosize\";\nimport { toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\n\nexport const MilestoneForm = ({\n  action,\n  client,\n  onSuccess,\n  definedAmount,\n  order,\n  refund,\n  strict,\n}) => {\n  const { user, setUser, config } = useContext(SiteContext);\n  const [loading, setLoading] = useState(false);\n  const [search, setSearch] = useState(\"\");\n  const [addressForm, setAddressForm] = useState(false);\n  const [userDetail, setUserDetail] = useState({ ...user });\n  const [clientDetail, setClientDetail] = useState({ ...client });\n  const [dscr, setDscr] = useState(\"\");\n  const [amount, setAmount] = useState(definedAmount || \"\");\n  const [fee, setFee] = useState(0);\n  const [msg, setMsg] = useState(null);\n  const onTimeout = useRef();\n  const requestMilestone = useCallback(() => {\n    fetch(\"/api/requestMilestone\", {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({\n        buyer_id: client._id,\n        amount,\n        dscr,\n        order,\n        refund,\n      }),\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        setLoading(false);\n        if (data.code === \"ok\") {\n          onSuccess?.(data.milestone);\n        } else {\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                <Err_svg />\n                <h4>Could not request milestone. Try again.</h4>\n              </div>\n            </>\n          );\n        }\n      })\n      .catch((err) => {\n        setLoading(false);\n        console.log(err);\n        setMsg(\n          <>\n            <button onClick={() => setMsg(null)}>Okay</button>\n            <div>\n              <Err_svg />\n              <h4>Could not request milestone. Make sure you're online.</h4>\n            </div>\n          </>\n        );\n      });\n  }, [clientDetail, userDetail, amount, dscr]);\n  const createMilestone = useCallback(() => {\n    fetch(\"/api/createMilestone\", {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({\n        seller: { ...clientDetail },\n        amount,\n        dscr,\n        order,\n        refund,\n      }),\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        setLoading(false);\n        if (data.code === \"ok\") {\n          onSuccess?.({ ...data });\n        } else if (data.code === 403) {\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                <Err_svg />\n                <h4>Insufficient fund</h4>\n                <Link to=\"/account/profile/wallet\">\n                  Add Money to your wallet now.\n                </Link>\n              </div>\n            </>\n          );\n        } else {\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                <Err_svg />\n                <h4>Could not create milestone. Try again</h4>\n              </div>\n            </>\n          );\n        }\n      })\n      .catch((err) => {\n        setLoading(false);\n        console.log(err);\n        setMsg(\n          <>\n            <button onClick={() => setMsg(null)}>Okay</button>\n            <div>\n              <Err_svg />\n              <h4>Could not create milestone. Make sure you're online.</h4>\n            </div>\n          </>\n        );\n      });\n  }, [clientDetail, userDetail, amount, dscr]);\n  useEffect(() => {\n    setFee(() => {\n      return ((+amount / 100) * config.fee).fix();\n    });\n  }, [amount]);\n  return (\n    <>\n      <form\n        className=\"milestonesForm\"\n        onSubmit={(e) => {\n          setLoading(true);\n          e.preventDefault();\n          toast(\n            <div className=\"toast\">\n              Milestone is being{\" \"}\n              {action === \"create\" ? \"created.\" : \"requested.\"}{\" \"}\n              <button\n                className=\"undo\"\n                onClick={() => {\n                  onTimeout.current = null;\n                }}\n              >\n                Undo\n              </button>\n            </div>,\n            {\n              position: \"bottom-center\",\n              autoClose: 8000,\n              hideProgressBar: false,\n              closeOnClick: true,\n              pauseOnHover: true,\n              onClose: () => {\n                onTimeout.current?.();\n                setLoading(false);\n              },\n              draggable: true,\n              progress: undefined,\n            }\n          );\n          if (action === \"create\") {\n            onTimeout.current = createMilestone;\n          } else {\n            onTimeout.current = requestMilestone;\n          }\n        }}\n      >\n        <section className=\"transactionDetail\">\n          <section className=\"amount\">\n            <label>Amount</label>\n            <NumberInput\n              readOnly={strict}\n              min={10}\n              defaultValue={definedAmount || 0}\n              required={true}\n              onChange={(e) => setAmount((+e.target.value).toString())}\n            />\n          </section>\n          {amount && (\n            <>\n              {action === \"create\" && (\n                <label className=\"receivable\">\n                  {client.firstName} {client.lastName} will recieve ₹\n                  {(amount - fee).fix()}\n                </label>\n              )}\n              {action === \"request\" && (\n                <label className=\"receivable\">\n                  You will recieve ₹{(amount - fee).fix()}\n                </label>\n              )}\n            </>\n          )}\n          <section>\n            <label>Detail</label>\n            <input\n              value={dscr}\n              required={true}\n              onChange={(e) => setDscr(e.target.value)}\n            />\n          </section>\n          <button type=\"submit\">\n            {action === \"create\" ? \"Create Milestone\" : \"Request Milestone\"}\n          </button>\n        </section>\n        <section className=\"clientDetail\">\n          {action === \"request\" && (\n            <>\n              <Img src={client?.profileImg || \"/profile-user.jpg\"} />\n              <label>Buyer Information</label>\n              <div className=\"detail\">\n                <section className=\"profileDetail\">\n                  <p className=\"name\">\n                    {client?.firstName + \" \" + client?.lastName}\n                  </p>\n                  <p className=\"phone\">{client?.phone}</p>\n                  <p className=\"email\">{client?.email}</p>\n                </section>\n                {client?.address?.street && (\n                  <section className=\"address\">\n                    <p className=\"street\">\n                      {client.address?.street}, {client.address?.city},{\" \"}\n                      {client.address?.zip}\n                    </p>\n                  </section>\n                )}\n              </div>\n            </>\n          )}\n          {action === \"request\" ? null : (\n            <div className=\"sellerInfo\">\n              <Img src={clientDetail?.profileImg || \"/profile-user.jpg\"} />\n              <label>Seller Information</label>\n              <div className=\"detail\">\n                <section className=\"profileDetail\">\n                  <p className=\"name\">\n                    {clientDetail?.firstName} {clientDetail?.lastName}\n                  </p>\n                  <p className=\"phone\">{clientDetail?.phone}</p>\n                  <p className=\"email\">{clientDetail?.email}</p>\n                </section>\n              </div>\n            </div>\n          )}\n        </section>\n      </form>\n      {loading && (\n        <div className=\"spinnerContainer\">\n          <div className=\"spinner\" />\n        </div>\n      )}\n      <Modal className=\"msg\" open={msg}>\n        {msg}\n      </Modal>\n    </>\n  );\n};\nexport const MilestoneReleaseForm = ({\n  milestone,\n  setReleaseForm,\n  onSuccess,\n}) => {\n  const [amount, setAmount] = useState(milestone.amount);\n  const [msg, setMsg] = useState(null);\n  return (\n    <form\n      onSubmit={(e) => {\n        e.preventDefault();\n        fetch(\"/api/releaseMilestone\", {\n          method: \"PATCH\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify({ _id: milestone._id, amount }),\n        })\n          .then((res) => res.json())\n          .then(({ code, milestone }) => {\n            if (milestone) {\n              onSuccess?.(milestone);\n            } else if (code === 403) {\n              setMsg(\n                <>\n                  <button onClick={() => setMsg(null)}>Okay</button>\n                  <div>\n                    <Err_svg />\n                    <h4>Could not release Milestone due to low balance.</h4>\n                  </div>\n                </>\n              );\n            } else {\n              setMsg(\n                <>\n                  <button onClick={() => setMsg(null)}>Okay</button>\n                  <div>\n                    <Err_svg />\n                    <h4>Could not release Milestone.</h4>\n                  </div>\n                </>\n              );\n            }\n          })\n          .catch((err) => {\n            console.log(err);\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                <Err_svg />\n                <h4>Could not release Milestone. Make sure you're online.</h4>\n              </div>\n            </>;\n          });\n      }}\n    >\n      You sure want to release this Milestone?\n      {\n        // <label>How much money you want to release?</label>\n        //   <NumberInput\n        //   defaultValue={amount}\n        //   onChange={(e) => setAmount(e.target.value)}\n        // />\n      }\n      <section className=\"btns\">\n        <button type=\"submit\">Confirm</button>\n        <button\n          className=\"cancel\"\n          type=\"button\"\n          onClick={() => setReleaseForm(false)}\n        >\n          Cancel\n        </button>\n      </section>\n      <Modal open={msg} className=\"msg\">\n        {msg}\n      </Modal>\n    </form>\n  );\n};\n\nexport const AddressForm = ({ client, onSuccess, onCancel }) => {\n  const [name, setName] = useState(\n    client ? client.name || client.firstName + \" \" + client.lastName : \"\"\n  );\n  const [phone, setPhone] = useState(client?.phone || \"\");\n  const [zip, setZip] = useState(client?.address?.zip || \"\");\n  const [locality, setLocatily] = useState(client?.address?.locality || \"\");\n  const [street, setStreet] = useState(client?.address?.street || \"\");\n  const [city, setCity] = useState(client?.address?.city || \"\");\n  const [state, setState] = useState(client?.address?.state || \"\");\n  const [landmark, setLandmark] = useState(client?.address?.landmark || \"\");\n  const [altPhone, setAltPhone] = useState(client?.address?.altPhone || \"\");\n  return (\n    <form\n      className=\"addressForm\"\n      onSubmit={(e) => {\n        e.preventDefault();\n        onSuccess?.({\n          address: {\n            name,\n            phone,\n            street,\n            city,\n            state,\n            zip,\n            locality,\n            landmark,\n            altPhone,\n          },\n        });\n      }}\n    >\n      <section>\n        <label htmlFor=\"name\">Full Name</label>\n        <input\n          value={name}\n          onChange={(e) => setName(e.target.value)}\n          type=\"text\"\n          name=\"name\"\n          required={true}\n        />\n      </section>\n      <section>\n        <label htmlFor=\"phone\">Phone Number</label>\n        <input\n          value={phone}\n          onChange={(e) => setPhone(e.target.value)}\n          type=\"tel\"\n          name=\"phone\"\n          required={true}\n        />\n      </section>\n      <section>\n        <label htmlFor=\"zip\">PIN Code</label>\n        <input\n          value={zip}\n          onChange={(e) => setZip(e.target.value)}\n          type=\"number\"\n          name=\"zip\"\n          required={true}\n        />\n      </section>\n      <section>\n        <label htmlFor=\"locality\">Locality</label>\n        <input\n          value={locality}\n          onChange={(e) => setLocatily(e.target.value)}\n          type=\"text\"\n          name=\"locality\"\n          required={true}\n        />\n      </section>\n      <section className=\"street\">\n        <label htmlFor=\"address\">Address</label>\n        <textarea\n          value={street}\n          onChange={(e) => setStreet(e.target.value)}\n          resiz=\"off\"\n          type=\"text\"\n          name=\"address\"\n          required={true}\n        />\n      </section>\n      <section>\n        <label htmlFor=\"city\">City</label>\n        <input\n          value={city}\n          onChange={(e) => setCity(e.target.value)}\n          type=\"text\"\n          name=\"city\"\n          required={true}\n        />\n      </section>\n      <section>\n        <label htmlFor=\"state\">State</label>\n        <input\n          value={state}\n          onChange={(e) => setState(e.target.value)}\n          type=\"text\"\n          name=\"state\"\n          required={true}\n        />\n      </section>\n      <section>\n        <label htmlFor=\"landmark\">Landmark (Optional)</label>\n        <input\n          value={landmark}\n          onChange={(e) => setLandmark(e.target.value)}\n          type=\"text\"\n          name=\"landmark\"\n        />\n      </section>\n      <section>\n        <label htmlFor=\"altPhone\">Alternate Phone (Optional)</label>\n        <input\n          value={altPhone}\n          onChange={(e) => setAltPhone(e.target.value)}\n          type=\"tel\"\n          name=\"altPhone\"\n        />\n      </section>\n      <button className=\"save\">Save</button>\n      <button className=\"cancel\" type=\"button\" onClick={() => onCancel?.()}>\n        Cancel\n      </button>\n      <section className=\"pBtm\" />\n    </form>\n  );\n};\n\nexport const DisputeForm = ({ milestone, setDisputeForm, onSuccess }) => {\n  const [issue, setIssue] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [dscr, setDscr] = useState(\"\");\n  const [caseFiles, setCaseFiles] = useState([]);\n  const [msg, setMsg] = useState(null);\n  const submit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    const fileLinks = caseFiles.length\n      ? await UploadFiles({\n          files: caseFiles,\n          setMsg,\n        })\n      : [];\n    fetch(\"/api/fileDispute\", {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({\n        issue,\n        milestoneId: milestone._id,\n        defendantId: milestone.client._id,\n        _case: { dscr, files: fileLinks },\n      }),\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        setLoading(false);\n        if (data.code === \"ok\") {\n          onSuccess?.(data.milestone);\n        } else if (data.code === 403) {\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                <Err_svg />\n                <h4>\n                  Insufficient fund! you have to have ₹500 in your wallet to\n                  file a dispute.\n                </h4>\n              </div>\n            </>\n          );\n        } else {\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                <Err_svg />\n                <h4>Could not file dispute.</h4>\n              </div>\n            </>\n          );\n        }\n      })\n      .catch((err) => {\n        setLoading(true);\n        console.log(err);\n        setMsg(\n          <>\n            <button onClick={() => setMsg(null)}>Okay</button>\n            <div>\n              <Err_svg />\n              <h4>Could not file dispute. make sure you're online.</h4>\n            </div>\n          </>\n        );\n      });\n  };\n  return (\n    <>\n      <form className=\"disputeForm\" onSubmit={submit}>\n        <h4>You feel like you are getting scammed?</h4>\n        <section>\n          <label htmlFor=\"issue\">Issue</label>\n          <Combobox\n            name=\"issue\"\n            options={\n              milestone.role === \"buyer\"\n                ? [\n                    {\n                      label: \"Buyer Not Releasing Payments\",\n                      value: \"Buyer Not Releasing Payments\",\n                    },\n                  ]\n                : [\n                    {\n                      label: \"Goods Not Received\",\n                      value: \"Goods Not Received\",\n                    },\n                    {\n                      label: \"Services Not Received\",\n                      value: \"Services Not Received\",\n                    },\n                    {\n                      label: \"Damaged\",\n                      value: \"Damaged\",\n                    },\n                    {\n                      label: \"Not As Agreed\",\n                      value: \"Not As Agreed\",\n                    },\n                    {\n                      label: \"Not As Displayed\",\n                      value: \"Not As Displayed\",\n                    },\n                  ]\n            }\n            onChange={(e) => {\n              setIssue(e.value);\n            }}\n          />\n        </section>\n        <section>\n          <label htmlFor=\"description\">Description</label>\n          <TextareaAutosize\n            name=\"description\"\n            value={dscr}\n            required={true}\n            onChange={(e) => setDscr(e.target.value)}\n          />\n        </section>\n        <section>\n          <label htmlFor=\"for\">\n            Upload images to prove your case. ie: Product of image, proof of\n            delivery.\n          </label>\n          <FileInput\n            multiple={true}\n            accept=\"audio/*,video/*,image/*\"\n            onChange={(e) => setCaseFiles(e)}\n          />\n        </section>\n        <section className=\"btns\">\n          <button className=\"submit\" type=\"submit\">\n            Submit\n          </button>\n          <button className=\"cancel\" type=\"button\">\n            Cancel\n          </button>\n        </section>\n        <div className=\"pBtm\" />\n      </form>\n      {loading && (\n        <div className=\"spinnerContainer\">\n          <div className=\"spinner\" />\n        </div>\n      )}\n      <Modal open={msg} className=\"msg\">\n        {msg}\n      </Modal>\n    </>\n  );\n};\n\nexport const TicketForm = ({ onSuccess }) => {\n  const [loading, setLoading] = useState(false);\n  const [msg, setMsg] = useState(false);\n  const [issue, setIssue] = useState(\"\");\n  const [milestone, setMilestone] = useState(\"\");\n  const [transaction, setTransaction] = useState(\"\");\n  const [files, setFiles] = useState(\"\");\n  const [message, setMessage] = useState(\"\");\n  const submit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    const fileLinks = files.length ? await UploadFiles({ files, setMsg }) : [];\n    fetch(\"/api/openTicket\", {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({\n        issue,\n        milestone,\n        transaction,\n        message: {\n          body: message,\n          files: fileLinks,\n        },\n      }),\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        setLoading(false);\n        if (data.code === \"ok\") {\n          onSuccess?.(data.ticket);\n        } else if (data.message === \"milestone ID is invalid\") {\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                <Err_svg />\n                <h4>Milestone Id is invalid.</h4>\n              </div>\n            </>\n          );\n        } else {\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                <Err_svg />\n                <h4>Ticket could not be submitted.</h4>\n              </div>\n            </>\n          );\n        }\n      })\n      .catch((err) => {\n        setLoading(false);\n        console.log(err);\n        setMsg(\n          <>\n            <button onClick={() => setMsg(null)}>Okay</button>\n            <div>\n              <Err_svg />\n              <h4>Ticket could not be submitted. Make sure you're online.</h4>\n            </div>\n          </>\n        );\n      });\n  };\n  return (\n    <>\n      <form className=\"ticketForm\" onSubmit={submit}>\n        <section>\n          <label>Issue</label>\n          <input\n            value={issue}\n            required={true}\n            onChange={(e) => setIssue(e.target.value)}\n          />\n        </section>\n        <section>\n          <label>Milestone ID (optional)</label>\n          <input\n            value={milestone}\n            onChange={(e) => setMilestone(e.target.value)}\n          />\n        </section>\n        <section>\n          <label>Transaction ID (optional)</label>\n          <input\n            value={transaction}\n            onChange={(e) => setTransaction(e.target.value)}\n          />\n        </section>\n        <section>\n          <label>Detail</label>\n          <TextareaAutosize\n            required={true}\n            value={message}\n            onChange={(e) => setMessage(e.target.value)}\n          />\n        </section>\n        <section>\n          <label htmlFor=\"for\">Upload relevant files (optional)</label>\n          <FileInput onChange={(files) => setFiles(files)} />\n        </section>\n        <section className=\"btns\">\n          <button className=\"submit\" type=\"submit\">\n            Submit\n          </button>\n          <button className=\"cancel\" type=\"button\">\n            Cancel\n          </button>\n        </section>\n        <div className=\"pBtm\" />\n      </form>\n      {loading && (\n        <div className=\"spinnerContainer\">\n          <div className=\"spinner\" />\n        </div>\n      )}\n      <Modal open={msg} className=\"msg\">\n        {msg}\n      </Modal>\n    </>\n  );\n};\nexport const TicketReplyForm = ({ _id, onSuccess }) => {\n  const [loading, setLoading] = useState(false);\n  const [msg, setMsg] = useState(false);\n  const [files, setFiles] = useState([]);\n  const [message, setMessage] = useState(\"\");\n  const submit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    const fileLinks = files.length ? await UploadFiles({ files, setMsg }) : [];\n    fetch(\"/api/addTicketReply\", {\n      method: \"PATCH\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({\n        _id,\n        message: { body: message, files: fileLinks },\n      }),\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        setLoading(false);\n        if (data.code === \"ok\") {\n          onSuccess?.(data.ticket);\n        } else {\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                <Err_svg />\n                <h4>Reply could not be submitted.</h4>\n              </div>\n            </>\n          );\n        }\n      })\n      .catch((err) => {\n        setLoading(false);\n        console.log(err);\n        setMsg(\n          <>\n            <button onClick={() => setMsg(null)}>Okay</button>\n            <div>\n              <Err_svg />\n              <h4>Reply could not be submitted. Make sure you're online.</h4>\n            </div>\n          </>\n        );\n      });\n  };\n  return (\n    <>\n      <form className=\"ticketReplyForm\" onSubmit={submit}>\n        <section>\n          <label>Message</label>\n          <TextareaAutosize\n            required={true}\n            value={message}\n            onChange={(e) => setMessage(e.target.value)}\n          />\n        </section>\n        <section>\n          <label htmlFor=\"for\">Upload relevant files (optional)</label>\n          <FileInput\n            accept=\"audio/*,video/*,image/*\"\n            multiple={true}\n            onChange={(files) => setFiles(files)}\n          />\n        </section>\n        <section className=\"btns\">\n          <button className=\"submit\" type=\"submit\">\n            Submit\n          </button>\n          <button className=\"cancel\" type=\"button\">\n            Cancel\n          </button>\n        </section>\n        <div className=\"pBtm\" />\n      </form>\n      {loading && (\n        <div className=\"spinnerContainer\">\n          <div className=\"spinner\" />\n        </div>\n      )}\n      <Modal open={msg} className=\"msg\">\n        {msg}\n      </Modal>\n    </>\n  );\n};\n","import { useLayoutEffect } from 'react';\n\nvar index =  useLayoutEffect ;\n\nexport default index;\n","import { useRef } from 'react';\nimport useIsomorphicLayoutEffect from 'use-isomorphic-layout-effect';\n\nvar useLatest = function useLatest(value) {\n  var ref = useRef(value);\n  useIsomorphicLayoutEffect(function () {\n    ref.current = value;\n  });\n  return ref;\n};\n\nexport default useLatest;\n","import { useRef, useCallback } from 'react';\n\nvar updateRef = function updateRef(ref, value) {\n  if (typeof ref === 'function') {\n    ref(value);\n    return;\n  }\n  ref.current = value;\n};\n\nvar useComposedRef = function useComposedRef(libRef, userRef) {\n  var prevUserRef = useRef();\n  return useCallback(function (instance) {\n    libRef.current = instance;\n\n    if (prevUserRef.current) {\n      updateRef(prevUserRef.current, null);\n    }\n\n    prevUserRef.current = userRef;\n\n    if (!userRef) {\n      return;\n    }\n\n    updateRef(userRef, instance);\n  }, [userRef]);\n};\n\nexport default useComposedRef;\n","import _extends from '@babel/runtime/helpers/esm/extends';\nimport _objectWithoutPropertiesLoose from '@babel/runtime/helpers/esm/objectWithoutPropertiesLoose';\nimport { useLayoutEffect, forwardRef, useRef, createElement } from 'react';\nimport useLatest from 'use-latest';\nimport useComposedRef from 'use-composed-ref';\n\nvar HIDDEN_TEXTAREA_STYLE = {\n  'min-height': '0',\n  'max-height': 'none',\n  height: '0',\n  visibility: 'hidden',\n  overflow: 'hidden',\n  position: 'absolute',\n  'z-index': '-1000',\n  top: '0',\n  right: '0'\n};\n\nvar forceHiddenStyles = function forceHiddenStyles(node) {\n  Object.keys(HIDDEN_TEXTAREA_STYLE).forEach(function (key) {\n    node.style.setProperty(key, HIDDEN_TEXTAREA_STYLE[key], 'important');\n  });\n};\n\n//   export type CalculatedNodeHeights = [height: number, rowHeight: number];\n// https://github.com/microsoft/TypeScript/issues/28259\n\nvar hiddenTextarea = null;\n\nvar getHeight = function getHeight(node, sizingData) {\n  var height = node.scrollHeight;\n\n  if (sizingData.sizingStyle.boxSizing === 'border-box') {\n    // border-box: add border, since height = content + padding + border\n    return height + sizingData.borderSize;\n  } // remove padding, since height = content\n\n\n  return height - sizingData.paddingSize;\n};\n\nfunction calculateNodeHeight(sizingData, value, minRows, maxRows) {\n  if (minRows === void 0) {\n    minRows = 1;\n  }\n\n  if (maxRows === void 0) {\n    maxRows = Infinity;\n  }\n\n  if (!hiddenTextarea) {\n    hiddenTextarea = document.createElement('textarea');\n    hiddenTextarea.setAttribute('tabindex', '-1');\n    hiddenTextarea.setAttribute('aria-hidden', 'true');\n    forceHiddenStyles(hiddenTextarea);\n  }\n\n  if (hiddenTextarea.parentNode === null) {\n    document.body.appendChild(hiddenTextarea);\n  }\n\n  var paddingSize = sizingData.paddingSize,\n      borderSize = sizingData.borderSize,\n      sizingStyle = sizingData.sizingStyle;\n  var boxSizing = sizingStyle.boxSizing;\n  Object.keys(sizingStyle).forEach(function (_key) {\n    var key = _key;\n    hiddenTextarea.style[key] = sizingStyle[key];\n  });\n  forceHiddenStyles(hiddenTextarea);\n  hiddenTextarea.value = value;\n  var height = getHeight(hiddenTextarea, sizingData); // measure height of a textarea with a single row\n\n  hiddenTextarea.value = 'x';\n  var rowHeight = hiddenTextarea.scrollHeight - paddingSize;\n  var minHeight = rowHeight * minRows;\n\n  if (boxSizing === 'border-box') {\n    minHeight = minHeight + paddingSize + borderSize;\n  }\n\n  height = Math.max(minHeight, height);\n  var maxHeight = rowHeight * maxRows;\n\n  if (boxSizing === 'border-box') {\n    maxHeight = maxHeight + paddingSize + borderSize;\n  }\n\n  height = Math.min(maxHeight, height);\n  return [height, rowHeight];\n}\n\nvar noop = function noop() {};\nvar pick = function pick(props, obj) {\n  return props.reduce(function (acc, prop) {\n    acc[prop] = obj[prop];\n    return acc;\n  }, {});\n};\n\nvar SIZING_STYLE = ['borderBottomWidth', 'borderLeftWidth', 'borderRightWidth', 'borderTopWidth', 'boxSizing', 'fontFamily', 'fontSize', 'fontStyle', 'fontWeight', 'letterSpacing', 'lineHeight', 'paddingBottom', 'paddingLeft', 'paddingRight', 'paddingTop', // non-standard\n'tabSize', 'textIndent', // non-standard\n'textRendering', 'textTransform', 'width', 'wordBreak'];\nvar isIE = !!document.documentElement.currentStyle ;\n\nvar getSizingData = function getSizingData(node) {\n  var style = window.getComputedStyle(node);\n\n  if (style === null) {\n    return null;\n  }\n\n  var sizingStyle = pick(SIZING_STYLE, style);\n  var boxSizing = sizingStyle.boxSizing; // probably node is detached from DOM, can't read computed dimensions\n\n  if (boxSizing === '') {\n    return null;\n  } // IE (Edge has already correct behaviour) returns content width as computed width\n  // so we need to add manually padding and border widths\n\n\n  if (isIE && boxSizing === 'border-box') {\n    sizingStyle.width = parseFloat(sizingStyle.width) + parseFloat(sizingStyle.borderRightWidth) + parseFloat(sizingStyle.borderLeftWidth) + parseFloat(sizingStyle.paddingRight) + parseFloat(sizingStyle.paddingLeft) + 'px';\n  }\n\n  var paddingSize = parseFloat(sizingStyle.paddingBottom) + parseFloat(sizingStyle.paddingTop);\n  var borderSize = parseFloat(sizingStyle.borderBottomWidth) + parseFloat(sizingStyle.borderTopWidth);\n  return {\n    sizingStyle: sizingStyle,\n    paddingSize: paddingSize,\n    borderSize: borderSize\n  };\n};\n\nvar useWindowResizeListener = function useWindowResizeListener(listener) {\n  var latestListener = useLatest(listener);\n  useLayoutEffect(function () {\n    var handler = function handler(event) {\n      latestListener.current(event);\n    };\n\n    window.addEventListener('resize', handler);\n    return function () {\n      window.removeEventListener('resize', handler);\n    };\n  }, []);\n};\n\nvar TextareaAutosize = function TextareaAutosize(_ref, userRef) {\n  var cacheMeasurements = _ref.cacheMeasurements,\n      maxRows = _ref.maxRows,\n      minRows = _ref.minRows,\n      _ref$onChange = _ref.onChange,\n      onChange = _ref$onChange === void 0 ? noop : _ref$onChange,\n      _ref$onHeightChange = _ref.onHeightChange,\n      onHeightChange = _ref$onHeightChange === void 0 ? noop : _ref$onHeightChange,\n      props = _objectWithoutPropertiesLoose(_ref, [\"cacheMeasurements\", \"maxRows\", \"minRows\", \"onChange\", \"onHeightChange\"]);\n\n  if (process.env.NODE_ENV !== 'production' && props.style) {\n    if ('maxHeight' in props.style) {\n      throw new Error('Using `style.maxHeight` for <TextareaAutosize/> is not supported. Please use `maxRows`.');\n    }\n\n    if ('minHeight' in props.style) {\n      throw new Error('Using `style.minHeight` for <TextareaAutosize/> is not supported. Please use `minRows`.');\n    }\n  }\n\n  var isControlled = props.value !== undefined;\n  var libRef = useRef(null);\n  var ref = useComposedRef(libRef, userRef);\n  var heightRef = useRef(0);\n  var measurementsCacheRef = useRef();\n\n  var resizeTextarea = function resizeTextarea() {\n    var node = libRef.current;\n    var nodeSizingData = cacheMeasurements && measurementsCacheRef.current ? measurementsCacheRef.current : getSizingData(node);\n\n    if (!nodeSizingData) {\n      return;\n    }\n\n    measurementsCacheRef.current = nodeSizingData;\n\n    var _calculateNodeHeight = calculateNodeHeight(nodeSizingData, node.value || node.placeholder || 'x', minRows, maxRows),\n        height = _calculateNodeHeight[0],\n        rowHeight = _calculateNodeHeight[1];\n\n    if (heightRef.current !== height) {\n      heightRef.current = height;\n      node.style.setProperty('height', height + \"px\", 'important');\n      onHeightChange(height, {\n        rowHeight: rowHeight\n      });\n    }\n  };\n\n  var handleChange = function handleChange(event) {\n    if (!isControlled) {\n      resizeTextarea();\n    }\n\n    onChange(event);\n  };\n\n  {\n    useLayoutEffect(resizeTextarea);\n    useWindowResizeListener(resizeTextarea);\n  }\n\n  return /*#__PURE__*/createElement(\"textarea\", _extends({}, props, {\n    onChange: handleChange,\n    ref: ref\n  }));\n};\n\nvar index = /* #__PURE__ */forwardRef(TextareaAutosize);\n\nexport default index;\n"],"sourceRoot":""}