(this["webpackJsonpdeliveryPay-react"]=this["webpackJsonpdeliveryPay-react"]||[]).push([[0],{123:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var c=n(11),s=n.n(c),a=n(19),r=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function i(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=window.atob(t),c=new Uint8Array(n.length),s=0;s<n.length;++s)c[s]=n.charCodeAt(s);return c}function l(e){if("serviceWorker"in navigator){var t="/service-worker.js";r?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var c=n.headers.get("content-type");404===n.status||null!=c&&-1===c.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):o(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then(function(){var e=Object(a.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:i("BOAary6p08dAK6T2GSg0zRGrWKk5qs-sz_-f62My0JXMPG52fqQfzzJlePyF0snUvrdeEg4RSWOVGhrtVc1v3Lo")}).then((function(e){fetch("/api/subscribe",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())):o(t,e)}else console.log("serviceWorker is no supported")}function o(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)),navigator.serviceWorker.ready.then(function(){var e=Object(a.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:i("BOAary6p08dAK6T2GSg0zRGrWKk5qs-sz_-f62My0JXMPG52fqQfzzJlePyF0snUvrdeEg4RSWOVGhrtVc1v3Lo")}).then((function(e){fetch("/api/subscribe",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}},128:function(e,t,n){},148:function(e,t,n){},154:function(e,t,n){},155:function(e,t,n){},159:function(e,t,n){},160:function(e,t,n){},161:function(e,t,n){},190:function(e,t,n){},194:function(e,t,n){},195:function(e,t,n){},196:function(e,t,n){},197:function(e,t,n){},199:function(e,t,n){"use strict";n.r(t);var c=n(114),s=n(115),a=n(120),r=n(119),i=n(1),l=n.n(i),o=n(40),j=n.n(o),d=(n(128),function(e){e&&e instanceof Function&&n.e(19).then(n.bind(null,259)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,a=t.getLCP,r=t.getTTFB;n(e),c(e),s(e),a(e),r(e)}))}),u=n(9),b=(n(123),n(0)),h=Object(i.lazy)((function(){return n.e(4).then(n.bind(null,274))})),O=function(e){Object(a.a)(n,e);var t=Object(r.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e)).state={hasError:!1,reported:!1},s}return Object(s.a)(n,[{key:"componentDidCatch",value:function(e,t){var n=this,c={method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({issue:e.toString(),dscr:t})};fetch("/api/bugReport",c).then((function(e){return e.json()})).then((function(e){"ok"===e.code&&(n.reported=!0)}))}},{key:"render",value:function(){return this.state.hasError?Object(b.jsx)("div",{className:"deathPage",children:Object(b.jsxs)("div",{className:"content",children:[Object(b.jsx)("ion-icon",{name:"skull-outline"}),Object(b.jsx)("h2",{children:"Oops."}),Object(b.jsx)("a",{href:"/",children:"RELOAD"}),this.reported&&Object(b.jsx)("p",{children:"successfully reported"})]})}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),n}(l.a.Component);j.a.render(Object(b.jsx)(l.a.StrictMode,{children:Object(b.jsx)(O,{children:Object(b.jsx)(u.c,{children:Object(b.jsx)(i.Suspense,{fallback:Object(b.jsx)("p",{children:"Loading..."}),children:Object(b.jsx)(h,{})})})})}),document.getElementById("root")),d()},2:function(e,t,n){"use strict";n.d(t,"i",(function(){return x})),n.d(t,"A",(function(){return f})),n.d(t,"F",(function(){return m})),n.d(t,"z",(function(){return p})),n.d(t,"x",(function(){return v})),n.d(t,"y",(function(){return g})),n.d(t,"u",(function(){return y})),n.d(t,"v",(function(){return k})),n.d(t,"w",(function(){return N})),n.d(t,"t",(function(){return C})),n.d(t,"q",(function(){return S})),n.d(t,"d",(function(){return w})),n.d(t,"b",(function(){return M})),n.d(t,"c",(function(){return D})),n.d(t,"g",(function(){return _})),n.d(t,"j",(function(){return P})),n.d(t,"e",(function(){return A})),n.d(t,"n",(function(){return Y})),n.d(t,"f",(function(){return T})),n.d(t,"h",(function(){return R})),n.d(t,"r",(function(){return q})),n.d(t,"k",(function(){return I})),n.d(t,"s",(function(){return L})),n.d(t,"m",(function(){return B})),n.d(t,"l",(function(){return E})),n.d(t,"D",(function(){return V})),n.d(t,"p",(function(){return H})),n.d(t,"a",(function(){return U})),n.d(t,"B",(function(){return Z})),n.d(t,"E",(function(){return W})),n.d(t,"I",(function(){return G})),n.d(t,"H",(function(){return J})),n.d(t,"o",(function(){return z})),n.d(t,"G",(function(){return $})),n.d(t,"C",(function(){return K}));var c=n(55),s=n(12),a=n(4),r=n(3),i=n(113),l=n(1),o=n(9),j=n(5),d=n(18),u=n(6),b=(n(46),n(48)),h=n(0),O=["src"];n(197);var x=function(){return Object(h.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"158",height:"158",viewBox:"0 0 158 158",children:[Object(h.jsx)("defs",{children:Object(h.jsxs)("linearGradient",{id:"linear-gradient-red",x1:"-0.298",y1:"-0.669",x2:"1.224",y2:"1.588",gradientUnits:"objectBoundingBox",children:[Object(h.jsx)("stop",{offset:"0",stopColor:"#f93389"}),Object(h.jsx)("stop",{offset:"1",stopColor:"#e3003e"})]})}),Object(h.jsx)("rect",{id:"Rectangle_1104","data-name":"Rectangle 1104",width:"158",height:"158",rx:"79",fill:"url(#linear-gradient-red)"}),Object(h.jsx)("g",{id:"Component_85_8","data-name":"Component 85 \u2013 8",transform:"translate(49.472 49.472)",children:Object(h.jsx)("path",{id:"Union_3","data-name":"Union 3",d:"M29.527,34.9,5.368,59.057,0,53.686,24.158,29.527,0,5.368,5.368,0l24.16,24.158L53.686,0l5.371,5.368L34.9,29.527l24.16,24.158-5.371,5.371Z",fill:"#fff"})})]})},f=function(){return Object(h.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"158",height:"158",viewBox:"0 0 158 158",children:[Object(h.jsxs)("defs",{children:[Object(h.jsxs)("linearGradient",{id:"linear-gradient",x1:"-0.298",y1:"-0.669",x2:"1.224",y2:"1.588",gradientUnits:"objectBoundingBox",children:[Object(h.jsx)("stop",{offset:"0",stopColor:"#336cf9"}),Object(h.jsx)("stop",{offset:"1",stopColor:"#1be6d6"})]}),Object(h.jsx)("clipPath",{id:"clip-path",children:Object(h.jsx)("rect",{width:"64",height:"64",fill:"none"})})]}),Object(h.jsxs)("g",{id:"Group_163","data-name":"Group 163",transform:"translate(-0.426 -0.384)",children:[Object(h.jsx)("g",{id:"Group_103","data-name":"Group 103",transform:"translate(0 0)",children:Object(h.jsx)("rect",{id:"Rectangle_1104","data-name":"Rectangle 1104",width:"158",height:"158",rx:"79",transform:"translate(0.426 0.384)",fill:"url(#linear-gradient)"})}),Object(h.jsxs)("g",{id:"Component_148_2","data-name":"Component 148 \u2013 2",transform:"translate(47.426 58.384)",clipPath:"url(#clip-path)",children:[Object(h.jsx)("rect",{id:"Rectangle_460","data-name":"Rectangle 460",width:"64",height:"64",transform:"translate(0 0)",fill:"none"}),Object(h.jsx)("path",{id:"Checkbox",d:"M25.35,44.087,0,18.737l5.143-5.143L25.35,33.432,58.782,0l5.143,5.143Z",transform:"translate(0 1.728)",fill:"#fff"})]})]})]})},m=function(){return Object(h.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"15.557",height:"15.557",viewBox:"0 0 15.557 15.557",children:[Object(h.jsx)("defs",{children:Object(h.jsx)("clipPath",{id:"clip-path",children:Object(h.jsx)("rect",{width:"15.557",height:"15.557",fill:"none"})})}),Object(h.jsx)("g",{id:"Cancel",clipPath:"url(#clip-path)",children:Object(h.jsx)("path",{id:"Union_3","data-name":"Union 3",d:"M7.778,9.192,1.414,15.557,0,14.142,6.364,7.778,0,1.414,1.414,0,7.778,6.364,14.142,0l1.415,1.414L9.192,7.778l6.364,6.364-1.415,1.415Z",fill:"#2699fb"})})]})},p=function(e){var t=e.className;return Object(h.jsxs)("svg",{className:t,xmlns:"http://www.w3.org/2000/svg",width:"65",height:"65",viewBox:"0 0 65 65",children:[Object(h.jsxs)("g",{id:"Ellipse_110","data-name":"Ellipse 110",fill:"#fff",stroke:"#336cf9",strokeWidth:"1",children:[Object(h.jsx)("circle",{cx:"32.5",cy:"32.5",r:"32.5",stroke:"none"}),Object(h.jsx)("circle",{cx:"32.5",cy:"32.5",r:"32",fill:"none"})]}),Object(h.jsx)("path",{id:"Checkbox",d:"M12.267,23.067,0,9.8,2.489,7.112l9.778,10.38L28.444,0l2.489,2.691Z",transform:"translate(17.034 20.967)",fill:"#336cf9"})]})},v=function(e){var t=e.className;return Object(h.jsx)("svg",{className:t,xmlns:"http://www.w3.org/2000/svg",width:"65",height:"65",viewBox:"0 0 65 65",children:Object(h.jsxs)("g",{id:"Ellipse_229","data-name":"Ellipse 229",fill:"#fff",stroke:"#707070",strokeWidth:"1",children:[Object(h.jsx)("circle",{cx:"32.5",cy:"32.5",r:"32.5",stroke:"none"}),Object(h.jsx)("circle",{cx:"32.5",cy:"32.5",r:"32",fill:"none"})]})})},g=function(e){var t=e.className;return Object(h.jsxs)("svg",{className:t,xmlns:"http://www.w3.org/2000/svg",width:"65",height:"65",viewBox:"0 0 65 65",children:[Object(h.jsxs)("g",{id:"Ellipse_110","data-name":"Ellipse 110",fill:"#336cf9",stroke:"#336cf9",strokeWidth:"1",children:[Object(h.jsx)("circle",{cx:"32.5",cy:"32.5",r:"32.5",stroke:"none"}),Object(h.jsx)("circle",{cx:"32.5",cy:"32.5",r:"32",fill:"none"})]}),Object(h.jsx)("path",{id:"Checkbox",d:"M12.267,23.067,0,9.8,2.489,7.112l9.778,10.38L28.444,0l2.489,2.691Z",transform:"translate(17.034 20.967)",fill:"#fff"})]})},y=function(){return Object(h.jsx)("svg",{className:"done",xmlns:"http://www.w3.org/2000/svg",width:"214.5",height:"2",viewBox:"0 0 214.5 2",children:Object(h.jsx)("line",{id:"Line_22","data-name":"Line 22",x2:"214.5",transform:"translate(0 1)",fill:"none",stroke:"#1be6d6",strokeWidth:"2"})})},k=function(){return Object(h.jsx)("svg",{className:"running",xmlns:"http://www.w3.org/2000/svg",width:"200",height:"16.55",viewBox:"0 0 200 16.55",children:Object(h.jsxs)("g",{id:"Group_203","data-name":"Group 203",transform:"translate(-5063.943 -1197)",children:[Object(h.jsx)("path",{id:"Path_301","data-name":"Path 301",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5063.943 1213.55) rotate(-90)",fill:"#1be6d6"}),Object(h.jsx)("path",{id:"Path_302","data-name":"Path 302",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5073.943 1213.55) rotate(-90)",fill:"#1be6d6"}),Object(h.jsx)("path",{id:"Path_303","data-name":"Path 303",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5083.943 1213.55) rotate(-90)",fill:"#1be6d6"}),Object(h.jsx)("path",{id:"Path_304","data-name":"Path 304",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5093.943 1213.55) rotate(-90)",fill:"#1be6d6"}),Object(h.jsx)("path",{id:"Path_305","data-name":"Path 305",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5103.943 1213.55) rotate(-90)",fill:"#1be6d6"}),Object(h.jsx)("path",{id:"Path_306","data-name":"Path 306",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5113.943 1213.55) rotate(-90)",fill:"#1be6d6"}),Object(h.jsx)("path",{id:"Path_307","data-name":"Path 307",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5123.943 1213.55) rotate(-90)",fill:"#1be6d6"}),Object(h.jsx)("path",{id:"Path_308","data-name":"Path 308",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5133.943 1213.55) rotate(-90)",fill:"#1be6d6"}),Object(h.jsx)("path",{id:"Path_309","data-name":"Path 309",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5143.943 1213.55) rotate(-90)",fill:"#1be6d6"}),Object(h.jsx)("path",{id:"Path_310","data-name":"Path 310",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5153.943 1213.55) rotate(-90)",fill:"#1be6d6"}),Object(h.jsx)("path",{id:"Path_311","data-name":"Path 311",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5163.943 1213.55) rotate(-90)",fill:"#1be6d6"}),Object(h.jsx)("path",{id:"Path_312","data-name":"Path 312",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5173.943 1213.55) rotate(-90)",fill:"#1be6d6"}),Object(h.jsx)("path",{id:"Path_313","data-name":"Path 313",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5183.943 1213.55) rotate(-90)",fill:"#1be6d6"}),Object(h.jsx)("path",{id:"Path_314","data-name":"Path 314",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5193.943 1213.55) rotate(-90)",fill:"#1be6d6"}),Object(h.jsx)("path",{id:"Path_315","data-name":"Path 315",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5203.943 1213.55) rotate(-90)",fill:"#1be6d6"}),Object(h.jsx)("path",{id:"Path_316","data-name":"Path 316",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5213.943 1213.55) rotate(-90)",fill:"#1be6d6"}),Object(h.jsx)("path",{id:"Path_317","data-name":"Path 317",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5223.943 1213.55) rotate(-90)",fill:"#1be6d6"}),Object(h.jsx)("path",{id:"Path_318","data-name":"Path 318",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5233.943 1213.55) rotate(-90)",fill:"#1be6d6"}),Object(h.jsx)("path",{id:"Path_319","data-name":"Path 319",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5243.943 1213.55) rotate(-90)",fill:"#1be6d6"}),Object(h.jsx)("path",{id:"Path_320","data-name":"Path 320",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5253.943 1213.55) rotate(-90)",fill:"#1be6d6"})]})})},N=function(){return Object(h.jsx)("svg",{className:"runningBack",xmlns:"http://www.w3.org/2000/svg",width:"200",height:"16.55",viewBox:"0 0 200 16.55",children:Object(h.jsxs)("g",{id:"Group_226","data-name":"Group 226",transform:"translate(5263.943 1213.55) rotate(-180)",children:[Object(h.jsx)("path",{id:"Path_301","data-name":"Path 301",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5063.943 1213.55) rotate(-90)",fill:"#f6577c"}),Object(h.jsx)("path",{id:"Path_302","data-name":"Path 302",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5073.943 1213.55) rotate(-90)",fill:"#f6577c"}),Object(h.jsx)("path",{id:"Path_303","data-name":"Path 303",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5083.943 1213.55) rotate(-90)",fill:"#f6577c"}),Object(h.jsx)("path",{id:"Path_304","data-name":"Path 304",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5093.943 1213.55) rotate(-90)",fill:"#f6577c"}),Object(h.jsx)("path",{id:"Path_305","data-name":"Path 305",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5103.943 1213.55) rotate(-90)",fill:"#f6577c"}),Object(h.jsx)("path",{id:"Path_306","data-name":"Path 306",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5113.943 1213.55) rotate(-90)",fill:"#f6577c"}),Object(h.jsx)("path",{id:"Path_307","data-name":"Path 307",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5123.943 1213.55) rotate(-90)",fill:"#f6577c"}),Object(h.jsx)("path",{id:"Path_308","data-name":"Path 308",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5133.943 1213.55) rotate(-90)",fill:"#f6577c"}),Object(h.jsx)("path",{id:"Path_309","data-name":"Path 309",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5143.943 1213.55) rotate(-90)",fill:"#f6577c"}),Object(h.jsx)("path",{id:"Path_310","data-name":"Path 310",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5153.943 1213.55) rotate(-90)",fill:"#f6577c"}),Object(h.jsx)("path",{id:"Path_311","data-name":"Path 311",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5163.943 1213.55) rotate(-90)",fill:"#f6577c"}),Object(h.jsx)("path",{id:"Path_312","data-name":"Path 312",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5173.943 1213.55) rotate(-90)",fill:"#f6577c"}),Object(h.jsx)("path",{id:"Path_313","data-name":"Path 313",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5183.943 1213.55) rotate(-90)",fill:"#f6577c"}),Object(h.jsx)("path",{id:"Path_314","data-name":"Path 314",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5193.943 1213.55) rotate(-90)",fill:"#f6577c"}),Object(h.jsx)("path",{id:"Path_315","data-name":"Path 315",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5203.943 1213.55) rotate(-90)",fill:"#f6577c"}),Object(h.jsx)("path",{id:"Path_316","data-name":"Path 316",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5213.943 1213.55) rotate(-90)",fill:"#f6577c"}),Object(h.jsx)("path",{id:"Path_317","data-name":"Path 317",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5223.943 1213.55) rotate(-90)",fill:"#f6577c"}),Object(h.jsx)("path",{id:"Path_318","data-name":"Path 318",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5233.943 1213.55) rotate(-90)",fill:"#f6577c"}),Object(h.jsx)("path",{id:"Path_319","data-name":"Path 319",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5243.943 1213.55) rotate(-90)",fill:"#f6577c"}),Object(h.jsx)("path",{id:"Path_320","data-name":"Path 320",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5253.943 1213.55) rotate(-90)",fill:"#f6577c"})]})})},C=function(){return Object(h.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",children:[Object(h.jsx)("line",{id:"Line_29","data-name":"Line 29",y2:"20",transform:"translate(10)",fill:"none",stroke:"#006dff",strokeWidth:"2"}),Object(h.jsx)("line",{id:"Line_30","data-name":"Line 30",x2:"20",transform:"translate(0 10)",fill:"none",stroke:"#006dff",strokeWidth:"2"})]})},S=function(){return Object(h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",children:Object(h.jsx)("line",{id:"Line_30","data-name":"Line 30",x2:"20",transform:"translate(0 10)",fill:"none",stroke:"#006dff",strokeWidth:"2"})})},w=function(){return Object(h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 18 18",children:Object(h.jsx)("g",{id:"Symbol_82","data-name":"Symbol 82",transform:"translate(-507 1272) rotate(-90)",children:Object(h.jsx)("path",{id:"Path_10","data-name":"Path 10",d:"M9,0,7.364,1.636l6.195,6.195H0v2.338H13.558L7.364,16.364,9,18l9-9Z",transform:"translate(1254 507)",fill:"#336cf9"})})})},M=function(){return Object(h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 18 18",children:Object(h.jsx)("g",{id:"_1","data-name":" 1",transform:"translate(525 -1254) rotate(90)",children:Object(h.jsx)("path",{id:"Path_10","data-name":"Path 10",d:"M9,0,7.364,1.636l6.195,6.195H0v2.338H13.558L7.364,16.364,9,18l9-9Z",transform:"translate(1254 507)",fill:"#ff0080"})})})},D=function(){return Object(h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",children:Object(h.jsx)("path",{id:"Path_10","data-name":"Path 10",d:"M8,0,6.545,1.455l5.506,5.506H0V9.039H12.052L6.545,14.545,8,16l8-8Z",transform:"translate(16 16) rotate(180)",fill:"#2699fb"})})},_=function(e){var t=e.className;return Object(h.jsx)("svg",{className:t||"",xmlns:"http://www.w3.org/2000/svg",width:"23.616",height:"13.503",viewBox:"0 0 23.616 13.503",children:Object(h.jsx)("path",{id:"Icon_ionic-ios-arrow-down","data-name":"Icon ionic-ios-arrow-down",d:"M18,20.679l8.93-8.937a1.681,1.681,0,0,1,2.384,0,1.7,1.7,0,0,1,0,2.391L19.2,24.258a1.685,1.685,0,0,1-2.327.049L6.68,14.14a1.688,1.688,0,0,1,2.384-2.391Z",transform:"translate(-6.188 -11.246)",fill:"#53aefc"})})},P=function(){return Object(h.jsx)("span",{className:"externalLinkIcon","aria-label":"(opens a new window)",children:Object(h.jsx)("svg",{viewBox:"0 0 20 20",className:"Polaris-Icon__Svg_375hu",focusable:"false","aria-hidden":"true",children:Object(h.jsx)("path",{d:"M14 13v1a1 1 0 0 1-1 1H6c-.575 0-1-.484-1-1V7a1 1 0 0 1 1-1h1c1.037 0 1.04 1.5 0 1.5-.178.005-.353 0-.5 0v6h6V13c0-1 1.5-1 1.5 0zm-3.75-7.25A.75.75 0 0 1 11 5h4v4a.75.75 0 0 1-1.5 0V7.56l-3.22 3.22a.75.75 0 1 1-1.06-1.06l3.22-3.22H11a.75.75 0 0 1-.75-.75z"})})})},F=function(){return Object(h.jsx)("svg",{className:"tick",xmlns:"http://www.w3.org/2000/svg",width:"15.1",height:"10.8",viewBox:"0 0 15.1 10.8",children:Object(h.jsx)("path",{id:"Path_207","data-name":"Path 207",d:"M6.5,10.8,0,4.3,2.1,2.2,6.5,6.5,13,0l2.1,2.1Z",fill:"#2699fb"})})},A=function(){return Object(h.jsx)("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 122.9 107.5",children:Object(h.jsx)("g",{children:Object(h.jsx)("path",{d:"M3.9,7.9C1.8,7.9,0,6.1,0,3.9C0,1.8,1.8,0,3.9,0h10.2c0.1,0,0.3,0,0.4,0c3.6,0.1,6.8,0.8,9.5,2.5c3,1.9,5.2,4.8,6.4,9.1 c0,0.1,0,0.2,0.1,0.3l1,4H119c2.2,0,3.9,1.8,3.9,3.9c0,0.4-0.1,0.8-0.2,1.2l-10.2,41.1c-0.4,1.8-2,3-3.8,3v0H44.7 c1.4,5.2,2.8,8,4.7,9.3c2.3,1.5,6.3,1.6,13,1.5h0.1v0h45.2c2.2,0,3.9,1.8,3.9,3.9c0,2.2-1.8,3.9-3.9,3.9H62.5v0 c-8.3,0.1-13.4-0.1-17.5-2.8c-4.2-2.8-6.4-7.6-8.6-16.3l0,0L23,13.9c0-0.1,0-0.1-0.1-0.2c-0.6-2.2-1.6-3.7-3-4.5 c-1.4-0.9-3.3-1.3-5.5-1.3c-0.1,0-0.2,0-0.3,0H3.9L3.9,7.9z M96,88.3c5.3,0,9.6,4.3,9.6,9.6c0,5.3-4.3,9.6-9.6,9.6 c-5.3,0-9.6-4.3-9.6-9.6C86.4,92.6,90.7,88.3,96,88.3L96,88.3z M53.9,88.3c5.3,0,9.6,4.3,9.6,9.6c0,5.3-4.3,9.6-9.6,9.6 c-5.3,0-9.6-4.3-9.6-9.6C44.3,92.6,48.6,88.3,53.9,88.3L53.9,88.3z M33.7,23.7l8.9,33.5h63.1l8.3-33.5H33.7L33.7,23.7z"})})})},Y=function(e){var t=e.src,n=Object(i.a)(e,O),c=Object(l.useState)(t),s=Object(r.a)(c,2),o=s[0],j=s[1];return Object(h.jsx)("img",Object(a.a)(Object(a.a)({src:o,onError:function(){return j("/img_err.png")}},n),{},{onClick:n.onClick||function(){}}))},T=function(e){var t=e.defaultValue,n=e.value,c=e.required,s=e.onChange,a=Object(l.useState)(!!t),i=Object(r.a)(a,2),o=i[0],j=i[1];return Object(l.useEffect)((function(){j(n)}),[n]),Object(h.jsx)("section",{className:"checkbox",children:Object(h.jsxs)("div",{className:"ticks",onClick:function(){return j(!o)},children:[Object(h.jsx)("input",{type:"checkbox",value:o,required:c,onChange:function(e){j(!o),null===s||void 0===s||s(!o)}}),Object(h.jsx)("svg",{className:"border",xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",viewBox:"0 0 30 30",children:Object(h.jsxs)("g",{id:"Rectangle_661","data-name":"Rectangle 661",fill:"none",stroke:"#7fc4fd",strokeWidth:"3",children:[Object(h.jsx)("rect",{width:"30",height:"30",rx:"4",stroke:"none"}),Object(h.jsx)("rect",{x:"1.5",y:"1.5",width:"27",height:"27",rx:"2.5",fill:"none"})]})}),o&&Object(h.jsx)(F,{})]})})},R=function(e){var t=e.options,n=e.defaultValue,c=e.onChange,s=e.maxHeight,a=e.required,i=(e.disabled,e.dataId,e.validationMessage,e.className,e.placeholder),o=Object(l.useState)((function(){return n>-1&&t[n]?t[n].label:t.find((function(e){return e.value===n}))?t.find((function(e){return e.value===n})).label:"object"===typeof n?n:""})),d=Object(r.a)(o,2),u=d[0],b=d[1],O=Object(l.useState)(!1),x=Object(r.a)(O,2),f=x[0],m=x[1],p=Object(l.useState)(""),v=Object(r.a)(p,2),g=(v[0],v[1]),y=Object(l.useState)({}),k=Object(r.a)(y,2),N=k[0],C=k[1],S=Object(l.useRef)(),w=Object(l.useRef)();return Object(l.useLayoutEffect)((function(){var e=w.current.getBoundingClientRect(),n=e.width,c=e.height,s=e.x,a=e.y;C({position:"absolute",left:s,top:a+c,width:n,height:37*t.length,maxHeight:window.innerHeight-(a+c)-16})}),[f]),Object(h.jsxs)("section",{className:"combobox ".concat(f?"open":""),ref:w,onClick:function(){return m(!f)},children:[i&&!u&&Object(h.jsx)("label",{children:i}),Object(h.jsx)("input",{ref:S,required:a,value:u,onFocus:function(e){return e.target.blur()},onChange:function(){}}),Object(h.jsx)("button",{type:"button",children:Object(h.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"13",height:"8.872",viewBox:"0 0 13 8.872",children:[Object(h.jsx)("defs",{children:Object(h.jsx)("clipPath",{id:"clip-path",children:Object(h.jsx)("rect",{width:"8.872",height:"13",fill:"none"})})}),Object(h.jsx)("g",{id:"Component_47_7","data-name":"Component 47 \u2013 7",transform:"translate(0 8.872) rotate(-90)",clipPath:"url(#clip-path)",children:Object(h.jsx)("path",{id:"Path_36","data-name":"Path 36",d:"M6.5,8.872,0,2.036,1.936,0,6.5,4.8,11.064,0,13,2.036Z",transform:"translate(8.872) rotate(90)",fill:"#336cf9"})})]})}),Object(h.jsx)(j.b,{className:"sectionOptions",open:f,setOpen:m,backdropClass:"selectionOptionBack",onBackdropClick:function(){return m(!1)},style:N,children:Object(h.jsx)("ul",{style:{width:"100%",maxHeight:f?s:0,zIndex:100},className:"options",children:t.map((function(e){return Object(h.jsx)("li",{onClick:function(t){g(e.value),b(e.label),c&&c(e),m(!1),S.current.setCustomValidity("")},className:"option".concat(" ",u===e.label?"selected":""),children:e.label},e.label)}))})})]})},q=function(e){var t=e.defaultValue,n=e.min,c=e.max,s=e.required,a=e.onChange,i=e.step,o=e.placeholder,j=e.readOnly,d=Object(l.useState)(t||0),u=Object(r.a)(d,2),b=u[0],O=u[1];return Object(h.jsxs)("section",{className:"number",children:[Object(h.jsx)("input",{type:"number",step:i||"0.01",required:s,value:b,readOnly:j,onChange:function(e){O((+e.target.value).toString()),null===a||void 0===a||a(e)},placeholder:o||"0.00",min:n,max:c}),Object(h.jsxs)("div",{className:"ticker",children:[Object(h.jsx)("button",{type:"button",onClick:function(){return O(+b+1)},children:Object(h.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"13",height:"8.872",viewBox:"0 0 13 8.872",children:[Object(h.jsx)("defs",{children:Object(h.jsx)("clipPath",{id:"clip-path",children:Object(h.jsx)("rect",{width:"8.872",height:"13",fill:"none"})})}),Object(h.jsx)("g",{id:"Component_47_8","data-name":"Component 47 \u2013 8",transform:"translate(13) rotate(90)",clipPath:"url(#clip-path)",children:Object(h.jsx)("path",{id:"Path_36","data-name":"Path 36",d:"M6.5,8.872,0,2.036,1.936,0,6.5,4.8,11.064,0,13,2.036Z",transform:"translate(8.872) rotate(90)",fill:"#336cf9"})})]})}),Object(h.jsx)("button",{type:"button",onClick:function(){return O(+b-1)},children:Object(h.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"13",height:"8.872",viewBox:"0 0 13 8.872",children:[Object(h.jsx)("defs",{children:Object(h.jsx)("clipPath",{id:"clip-path",children:Object(h.jsx)("rect",{width:"8.872",height:"13",fill:"none"})})}),Object(h.jsx)("g",{id:"Component_47_7","data-name":"Component 47 \u2013 7",transform:"translate(0 8.872) rotate(-90)",clipPath:"url(#clip-path)",children:Object(h.jsx)("path",{id:"Path_36","data-name":"Path 36",d:"M6.5,8.872,0,2.036,1.936,0,6.5,4.8,11.064,0,13,2.036Z",transform:"translate(8.872) rotate(90)",fill:"#336cf9"})})]})})]})]})},I=function(e){var t=e.required,n=e.onChange,c=e.prefill,a=(e.label,e.multiple),i=e.accept,o=e.name,j=Object(l.useState)(c||[]),d=Object(r.a)(j,2),u=d[0],b=d[1];return Object(l.useEffect)((function(){null===n||void 0===n||n(u)}),[u]),Object(h.jsxs)("section",{className:"fileInput",children:[u.map((function(e,t){var n="string"===typeof e?{type:"url",url:e}:{type:e.type,name:e.name,url:URL.createObjectURL(e)},c=n.type.startsWith("image")||n.url.match(/(\.gif|\.png|\.jpg|\.jpeg|\.webp)$/);return Object(h.jsxs)("div",{className:"file ".concat(c?"thumb":"any"),children:[Object(h.jsx)("button",{className:"close",type:"button",onClick:function(){return b((function(e){return e.filter((function(e,n){return n!==t}))}))},children:Object(h.jsx)(m,{})}),Object(h.jsx)(Y,{className:c?"thumb":"",src:c?n.url:"/file_icon.png"}),!c&&Object(h.jsx)("p",{className:"filename",children:e.name})]},t)})),Object(h.jsxs)("div",{className:"uploadBtn",children:[Object(h.jsx)(C,{}),Object(h.jsx)("input",{name:o,type:"file",multiple:a,required:t,accept:i,onChange:function(e){b((function(t){return[].concat(Object(s.a)(t),Object(s.a)(Object(s.a)(e.target.files).filter((function(e){return!u.some((function(t){return t.name===e.name}))}))))}))}})]})]})},L=function(e){var t=e.total,n=e.btns,c=e.perPage,a=e.currentPage,i=(e.setCurrentPage,e.setPage),o=Object(l.useState)([]),j=Object(r.a)(o,2),d=j[0],u=j[1],b=Object(l.useState)([]),O=Object(r.a)(b,2),x=O[0],f=O[1];return Object(l.useEffect)((function(){u(Object(s.a)(Array(Math.ceil(t/c)).keys()).map((function(e){return e+1}))),f(Object(s.a)(Array(n).keys()).map((function(e){return e+1})))}),[t,c]),t<=c?Object(h.jsx)(h.Fragment,{}):Object(h.jsxs)("div",{className:"paginaiton",children:[Object(h.jsx)("button",{disabled:a<=1,onClick:function(){return i((function(e){return e-1}))},children:"<"}),Object(h.jsxs)("ul",{className:"pages",children:[d.length<=n&&d.map((function(e){return Object(h.jsx)("li",{className:e===+a?"active":"",children:Object(h.jsx)("button",{onClick:function(){return i(e)},children:e})},e)})),d.length>n&&x.map((function(e){var t=d.length-n,c=Math.ceil(n/2),s=0;a>c&&(s=a-c+n<=d.length?a-c:t);var r=e+s;return Object(h.jsx)("li",{className:r===a?"active":"",children:Object(h.jsx)("button",{onClick:function(){return i(e)},children:r})},r)}))]}),Object(h.jsx)("button",{disabled:a>=d.length,onClick:function(){return i((function(e){return e+1}))},children:">"})]})},B=function(){var e=Object(l.useContext)(o.d),t=e.user,n=e.setUser,c=(e.cart,e.setCart,e.userType,Object(d.g)()),s=Object(l.useState)(!1),a=Object(r.a)(s,2);a[0],a[1];return Object(l.useEffect)((function(){fetch("/api/authUser").then((function(e){return e.json()})).then((function(e){e.user&&n(e.user)}))}),[]),Object(h.jsxs)("header",{className:"genericHeader",children:[Object(h.jsxs)(u.b,{className:"logoLink",to:"/",children:[Object(h.jsx)(Y,{className:"logo",src:"/logo_land.jpg",alt:"Delivery pay logo"}),Object(h.jsx)(Y,{className:"logo_small",src:"/logo_sqr.jpg",alt:"Delivery pay logo"})]}),Object(h.jsxs)("div",{className:"links",children:[Object(h.jsx)(u.b,{to:"/",className:"home",children:"Home"}),Object(h.jsx)(u.b,{to:"/marketplace",children:"Browse"})]}),Object(h.jsx)("div",{className:"clas",children:t?Object(h.jsx)(b.ProfileAvatar,{},"genericHeader"):Object(h.jsx)(h.Fragment,{children:"/u/login"===c.location.pathname?Object(h.jsx)(u.b,{to:"/u/join",children:"Register"}):Object(h.jsx)(u.b,{to:"/u/login",children:"Login"})})})]})},E=function(){return Object(h.jsx)("footer",{children:Object(h.jsxs)("div",{className:"links",children:[Object(h.jsx)(u.b,{to:"/aboutUs",children:"About us"}),Object(h.jsx)(u.b,{to:"/privacyPolicy",children:"Privacy Policy"}),Object(h.jsx)(u.b,{to:"/codeOfConduct",children:"Code of Conduct"}),Object(h.jsx)(u.b,{to:"/copyrightPolicy",children:"Copyright Policy"}),Object(h.jsx)(u.b,{to:"/fees&Charges",children:"Fees & Charges"}),Object(h.jsx)(u.b,{to:"/terms",children:"User Agreement"}),Object(h.jsx)(u.b,{to:"/howItWorks",children:"How it works"}),Object(h.jsx)(u.b,{to:"/contactUs",children:"Contact us"}),Object(h.jsx)(u.b,{to:"/employment-opportunities",children:"Work with us"}),Object(h.jsx)(u.b,{to:"/refundCancellationPolicy",children:"Refund & Cancellation Policy"}),Object(h.jsx)(u.b,{to:"/shippingDeliveryPolicy",children:"Shipping & Delivery Policy"})]})})},V=function(e){var t,n=e.files,a=e.setMsg,r="https://cdn.deliverypay.in",i=new FormData,l=[],o=Object(c.a)(n);try{for(o.s();!(t=o.n()).done;){var j=t.value;"string"===typeof j?l.push(j):i.append("file",j)}}catch(d){o.e(d)}finally{o.f()}return fetch("".concat(r,"/upload"),{method:"POST",body:i}).then((function(e){return e.json()})).then((function(e){return"ok"===e.code?[].concat(l,Object(s.a)(e.files.map((function(e){return r+"/"+e})))):null})).catch((function(e){console.log(e),a(Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("button",{onClick:function(){return a(null)},children:"Okay"}),Object(h.jsxs)("div",{children:[Object(h.jsx)(x,{}),Object(h.jsx)("h4",{children:"File upload failed. Make sure you're online."})]})]}))}))},H=function(e){var t=e.links,n=Object(l.useState)(!1),c=Object(r.a)(n,2),s=c[0],a=c[1],i=Object(l.useState)(null),o=Object(r.a)(i,2),d=o[0],u=o[1],b=Object(l.useState)(0),O=Object(r.a)(b,2),x=O[0],f=O[1],p=(null===t||void 0===t?void 0:t.map((function(e,t){var n=null,c=null,s=function(e){a(!0),u(c),f(t)};return e.match(/(\.gif|\.png|\.jpg|\.jpeg|\.webp)$/)||e.startsWith("https://image")?(n=Object(h.jsx)(Y,{className:x===t?"active":"",src:e,onClick:s},t),c=Object(h.jsx)(Y,{src:e},t)):e.match(/(\.mp3|\.ogg|\.amr|\.m4a|\.flac|\.wav|\.aac)$/i)?(n=Object(h.jsx)("div",{className:"audioThumb ".concat(x===t?"active":""),onClick:s,children:Object(h.jsx)(Y,{src:"/play_btn.png"})},t),c=Object(h.jsx)("audio",{src:e,controls:"on",autoPlay:"on"},t)):e.match(/(\.mp4|\.mov|\.avi|\.flv|\.wmv|\.webm)$/i)?(n=Object(h.jsxs)("div",{className:"videoThumb ".concat(x===t?"active":""),children:[Object(h.jsx)("video",{src:e,onClick:s}),Object(h.jsx)(Y,{src:"/play_btn.png"})]},t),c=Object(h.jsx)("video",{src:e,controls:"on",autoPlay:"on"},t)):n=Object(h.jsx)("a",{href:t,children:e},t),n})))||"N/A";return Object(h.jsxs)(h.Fragment,{children:[p,Object(h.jsxs)(j.b,{className:"mediaModal",open:s,backdropClass:"disputeMediaViewBack",children:[Object(h.jsx)("button",{className:"close",onClick:function(){return a(!1)},children:Object(h.jsx)(m,{})}),Object(h.jsx)("div",{className:"view",children:d}),Object(h.jsx)("div",{className:"thumbs",children:p})]})]})},U=function(e){var t=e.icon,n=e.children,c=e.className,s=e.wrapperClassName,i=e.clickable,o=e.onClick,d=Object(l.useState)(!1),u=Object(r.a)(d,2),b=u[0],O=u[1],x=Object(l.useState)({}),f=Object(r.a)(x,2),m=f[0],p=f[1],v=Object(l.useRef)(),g=Object(l.useRef)();return Object(l.useLayoutEffect)((function(){var e,t,n=null===(e=v.current)||void 0===e?void 0:e.getBoundingClientRect(),c=n.height,s=n.y,r=n.width,i=n.x,l=window.innerHeight-(s+c),o=null===(t=g.current)||void 0===t?void 0:t.getBoundingClientRect();p(Object(a.a)(Object(a.a)({position:"fixed"},(null===o||void 0===o?void 0:o.height)>l?{bottom:window.innerHeight-s}:{top:c+s+4}),{},{right:window.innerWidth-i-r}))}),[b]),Object(h.jsxs)("div",{className:"actions ".concat(c||""),children:[Object(h.jsx)("button",{type:"button",className:"btn",ref:v,onClick:function(e){e.stopPropagation(),O(!0),null===o||void 0===o||o()},children:t||Object(h.jsx)(Y,{src:"/menu_dot.png"})}),Object(h.jsx)(j.b,{className:"actions",backdropClass:"actionsBackdrop",open:b,style:m,onBackdropClick:function(){return O(!1)},children:Object(h.jsx)("ul",{ref:g,className:s,onClick:function(e){e.stopPropagation(),!i&&O(!1)},children:n})})]})},Z=function(e){var t=e.basepath,n=e.tabs,c=Object(d.g)();return Object(h.jsx)("ul",{className:"tabs",children:n.map((function(e,n){return Object(h.jsx)(u.b,{to:t+e.path,onClick:function(){var t;return null===(t=e.onClick)||void 0===t?void 0:t.call(e)},children:Object(h.jsx)("li",{className:c.location.pathname.startsWith(t+e.path)?"active":"",children:e.label})},n)}))})},W=function(e){var t=e.user;return Object(h.jsxs)("div",{className:"profile",children:[Object(h.jsx)(Y,{src:t.profileImg||"/profile-user.jpg"}),Object(h.jsxs)("p",{className:"name",children:[t.name||t.firstName+" "+t.lastName,Object(h.jsx)("span",{className:"contact",children:t.phone})]})]})},G=function(e){var t,n=e.product,c=e.gst,s=e.discount,a=n.price;return!1!==s&&(null===(t=n.discount)||void 0===t?void 0:t.amount)&&(a-=J(n)),(null===c||void 0===c?void 0:c.verified)&&(a+=a*((n.gst||c.amount)/100)),!0===c&&(a+=a*(n.gst/100)),a.fix()},J=function(e){var t=e.discount,n=e.price;return(null===t||void 0===t?void 0:t.amount)?"flat"===t.type?(+t.amount).fix():"percent"===t.type?(+n/100*t.amount).fix():0:null},z={set:function(e,t){return localStorage.setItem(e,t)},get:function(e){return localStorage.getItem(e)},remove:function(e){return localStorage.removeItem(e)}},$=function(e,t){return e.some((function(e){return e.product._id===t._id}))?e.map((function(e){return e.product._id===t._id?Object(a.a)(Object(a.a)({},e),{},{qty:e.qty+1}):e})):[].concat(Object(s.a)(e),[{product:t,qty:1}])},K=function(e){var t=e.className,n=e.children;return Object(h.jsx)(U,{className:"".concat(t||""," tip"),wrapperClassName:"tipWrapper",icon:Object(h.jsx)(Y,{src:"/help.png"}),children:n})}},27:function(e,t,n){"use strict";n.d(t,"b",(function(){return y}));var c=n(11),s=n.n(c),a=n(19),r=n(12),i=n(4),l=n(3),o=n(1),j=n(18),d=n(6),u=n(9),b=n(5),h=n(2),O=n(118),x=n(48),f=n(22),m=n(17),p=n.n(m),v=n(0),g=Object(o.lazy)((function(){return Promise.resolve().then(n.t.bind(null,52,7))}));n(190);var y=Object(O.io)(),k=function(e){var t=e.setUserCard,n=e.setContacts,c=Object(j.g)(),s=Object(o.useState)(null),a=Object(l.a)(s,2),i=a[0],u=a[1],O=Object(o.useState)([]),x=Object(l.a)(O,2),f=x[0],m=x[1],p=Object(o.useState)(""),g=Object(l.a)(p,2),y=g[0],k=g[1],N=Object(o.useState)(!1),C=Object(l.a)(N,2),S=C[0],w=C[1],M=Object(o.useRef)(),D=Object(o.useCallback)((function(){new RegExp(/^(\+91|91|1|)(?=\d{10}$)/gi).test(y.toLowerCase())?fetch("/api/inviteUser?".concat(new URLSearchParams({q:"+91"+y.replace(/^(\+91|91|1|)(?=\d{10}$)/g,""),origin:window.location.origin}).toString())).then((function(e){return e.json()})).then((function(e){"ok"===e.code?u(Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("button",{onClick:function(){return u(null)},children:"Okay"}),Object(v.jsxs)("div",{children:[Object(v.jsx)(h.A,{}),Object(v.jsxs)("h4",{children:["An invitaion has been sent to"," ","+91"+y.replace(/^(\+91|91|1|)(?=\d{10}$)/g,""),"."]})]})]})):u(Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("button",{onClick:function(){return u(null)},children:"Okay"}),Object(v.jsxs)("div",{children:[Object(v.jsx)(h.i,{}),Object(v.jsx)("h4",{children:"Invitation could not be sent. Please try again."})]})]}))})).catch((function(e){console.log(e),u(Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("button",{onClick:function(){return u(null)},children:"Okay"}),Object(v.jsxs)("div",{children:[Object(v.jsx)(h.i,{}),Object(v.jsx)("h4",{children:"Invitation could not be sent. Make sure you're online."})]})]}))})):u(Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("button",{onClick:function(){return u(null)},children:"Okay"}),Object(v.jsxs)("div",{children:[Object(v.jsx)(h.i,{}),Object(v.jsx)("h4",{children:"Enter a valid phone number to send invitation."})]})]}))}),[y]),_=function(e){e.path.includes(M.current)||w(!1)};return Object(o.useEffect)((function(){return document.addEventListener("click",_),function(){document.removeEventListener("click",_)}}),[]),Object(o.useEffect)((function(){y?(fetch("/api/getUsers?q=".concat(encodeURIComponent(y))).then((function(e){return e.json()})).then((function(e){e&&m(e)})),""===y&&m([])):m([])}),[y]),Object(v.jsxs)("div",{className:"search",children:[Object(v.jsxs)("form",{onSubmit:function(e){return e.preventDefault()},ref:M,children:[Object(v.jsxs)("section",{children:[Object(v.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"17.9",height:"17.9",viewBox:"0 0 17.9 17.9",children:Object(v.jsx)("path",{id:"Path_208","data-name":"Path 208",d:"M17.9,16.324l-3.715-3.715a7.708,7.708,0,0,0,1.576-4.728A7.832,7.832,0,0,0,7.881,0,7.832,7.832,0,0,0,0,7.881a7.832,7.832,0,0,0,7.881,7.881,7.708,7.708,0,0,0,4.728-1.576L16.324,17.9ZM2.252,7.881A5.574,5.574,0,0,1,7.881,2.252a5.574,5.574,0,0,1,5.629,5.629,5.574,5.574,0,0,1-5.629,5.629A5.574,5.574,0,0,1,2.252,7.881Z",transform:"translate(0)",fill:"#b9b9b9"})}),Object(v.jsx)("input",{label:"search",required:!0,placeholder:"Phone Number",onFocus:function(){return w(!0)},value:y,onChange:function(e){return k(e.target.value)}}),Object(v.jsx)(d.b,{className:"sendReq ".concat(f.length>0||!y?"disabled":""),onClick:D,to:"#",children:"Invite"})]}),S&&f.length?Object(v.jsx)("ul",{className:"searchResult",children:f.map((function(e,s){return Object(v.jsx)("a",{onClick:function(){t(e),n((function(t){return[].concat(Object(r.a)(t),[{client:e,messages:[],status:""}])})),c.push("/account/home/deals/".concat(e._id)),w(!1)},children:Object(v.jsx)("li",{children:Object(v.jsxs)("div",{className:"profile",children:[Object(v.jsx)(h.n,{src:e.profileImg}),Object(v.jsxs)("p",{className:"name",children:[e.firstName+" "+e.lastName,Object(v.jsx)("span",{className:"phone",children:e.phone})]})]})},s)},s)}))}):null]}),Object(v.jsx)(b.b,{className:"msg",open:i,children:i})]})},N=function(e){var t=e.client,n=e.messages,c=(e.lastSeen,e.userCard),s=e.unread,a=Object(o.useContext)(u.a).setContacts,r=Object(j.g)();return Object(v.jsx)("li",{className:t._id===(null===c||void 0===c?void 0:c._id)?"active":void 0,onClick:function(){r.push("/account/home/deals/".concat(t._id)),a((function(e){return e.map((function(e){var n;return(null===t||void 0===t?void 0:t._id)===(null===(n=e.client)||void 0===n?void 0:n._id)?Object(i.a)(Object(i.a)({},e),{},{lastSeen:(new Date).toISOString(),unread:null}):e}))}))},children:Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(h.n,{src:t.profileImg||"/profile-user.jpg"}),Object(v.jsxs)("div",{children:[Object(v.jsx)("p",{className:"name",children:t.firstName?t.firstName+" "+t.lastName:"Deleted User"}),n.length>0&&Object(v.jsx)("p",{className:"lastMessage",children:n[n.length-1].text}),s?Object(v.jsx)("p",{className:"unread",children:s}):null]})]})})},C=function(e){var t=e.chat,n=e.setChat,c=e.userCard,s=e.setUserCard,a=e.user,O=e.socket,f=e.setContacts,m=Object(o.useContext)(u.d),p=m.setUser,y=m.userType,k=Object(o.useRef)(null),N=Object(o.useRef)(null),C=Object(j.g)(),w=Object(o.useState)([]),_=Object(l.a)(w,2),P=_[0],F=_[1],A=Object(o.useState)(!1),Y=Object(l.a)(A,2),T=Y[0],R=Y[1],q=Object(o.useState)(!((null===t||void 0===t?void 0:t.length)>=50)),I=Object(l.a)(q,2),L=I[0],B=I[1],E=Object(o.useState)(2),V=Object(l.a)(E,2),H=V[0],U=V[1],Z=Object(o.useState)(null),W=Object(l.a)(Z,2),G=W[0],J=W[1];Object(o.useEffect)((function(){O.on("connectedToRoom",(function(e){var t=e.rooms;F(t)}))}),[]),Object(o.useEffect)((function(){return P.length&&fetch("/api/updateLastSeen",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({rooms:P})}),function(){P.length&&fetch("/api/updateLastSeen",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({rooms:P})})}}),[P]);return Object(o.useEffect)((function(){(null===t||void 0===t?void 0:t.length)>=50?B(!1):B(!0)}),[t]),Object(v.jsxs)("div",{className:"chat",children:[t?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{className:"chatHead",children:[Object(v.jsxs)("div",{className:"profile",children:[Object(v.jsx)("button",{className:"back",onClick:function(){C.push("/account/home/deals"),n(null),s(null)},children:Object(v.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",children:Object(v.jsx)("path",{id:"Path_10","data-name":"Path 10",d:"M8,0,6.545,1.455l5.506,5.506H0V9.039H12.052L6.545,14.545,8,16l8-8Z",transform:"translate(16 16) rotate(180)",fill:"#2699fb"})})}),Object(v.jsx)(h.n,{src:c.profileImg||"/profile-user.jpg"}),Object(v.jsxs)("p",{className:"name",children:[c.firstName?c.firstName+" "+c.lastName:"Deleted user",c.lastSeen&&Object(v.jsx)("span",{className:"lastSeen",children:Object(v.jsx)(g,{format:"hh:mma, MMM DD",children:c.lastSeen})})]})]}),(""===c.status||"blocked"===c.status)&&Object(v.jsxs)(v.Fragment,{children:["seller"===y?Object(v.jsx)(d.b,{className:"pay",to:"/account/home/deals/".concat(c._id,"/payment"),children:"Request Milestone"}):Object(v.jsx)(d.b,{className:"pay",to:"/account/home/deals/".concat(c._id,"/payment"),children:"Pay"}),Object(v.jsxs)(h.a,{children:[""===c.status&&null,Object(v.jsx)(d.b,{to:"/account/home/deals/".concat(c._id,"/report"),children:"Report"}),Object(v.jsx)("button",{onClick:function(){Object(b.a)({label:" ".concat("blocked"===c.status?"Unblock":"Block"," User"),question:"You sure want to ".concat("blocked"===c.status?"un":"","block this user?"),callback:function(){var e="blocked"===c.status;fetch("/api/".concat(e?"unblockUser":"blockUser"),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({_id:c._id})}).then((function(e){return e.json()})).then((function(t){"ok"===t.code?(p((function(e){return Object(i.a)(Object(i.a)({},e),{},{blockList:t.blockList})})),f((function(t){return t.map((function(t){return t.client._id===c._id?Object(i.a)(Object(i.a)({},t),{},{status:e?"":"blocked"}):t}))})),J(Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("button",{onClick:function(){return J(null)},children:"Okay"}),Object(v.jsxs)("div",{children:[Object(v.jsx)(h.A,{}),Object(v.jsxs)("h4",{children:["User successfully ",e&&"un","blocked."]})]})]}))):J(Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("button",{onClick:function(){return J(null)},children:"Okay"}),Object(v.jsxs)("div",{children:[Object(v.jsx)(h.i,{}),Object(v.jsxs)("h4",{children:["Could not ",e&&"un","block user. try again."]})]})]}))})).catch((function(t){console.log(t),J(Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("button",{onClick:function(){return J(null)},children:"Okay"}),Object(v.jsxs)("div",{children:[Object(v.jsx)(h.i,{}),Object(v.jsxs)("h4",{children:["Could not ",e&&"un","block user. Make sure you're online."]})]})]}))}))}})},children:"blocked"===c.status?"Unblock":"Block"})]})]})]}),Object(v.jsxs)("ul",{className:"chats",ref:k,onScroll:function(e){var t;((null===(t=N.current)||void 0===t?void 0:t.getBoundingClientRect())||{}).y>0&&!T&&(R(!0),fetch("/api/getMessages?client=".concat(c._id,"&page=").concat(H)).then((function(e){return e.json()})).then((function(e){R(!1),"ok"===e.code&&(f((function(t){return t.map((function(t){var n;return t._id===(null===(n=e.contact)||void 0===n?void 0:n._id)?Object(i.a)(Object(i.a)({},t),{},{messages:e.contact.messages}):t}))})),U((function(e){return e+1})),e.contact.total===e.contact.messages.length&&B(!0))})).catch((function(e){R(!1),console.log(e),J(Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("button",{onClick:function(){return J(null)},children:"Okay"}),Object(v.jsxs)("div",{children:[Object(v.jsx)(h.i,{}),Object(v.jsx)("h4",{children:"Could not get messages. Make sure you're online."})]})]}))})))},children:[Object(r.a)(t.map((function(e,n){return Object(v.jsx)(S,{chat:t,msg:e,i:n,user:a},e._id)}))).reverse(),!L&&Object(v.jsx)("li",{className:"loading",ref:N,children:"Loading"})]}),""===c.status&&Object(v.jsx)(M,{onSuccess:function(){var e;null===(e=k.current)||void 0===e||e.scrollBy(0,2*k.current.scrollHeight)},rooms:P,user:c._id,newChat:!c.lastSeen})]}):Object(v.jsxs)("div",{className:"startChat",children:[Object(v.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26.55",height:"25.219",viewBox:"0 0 26.55 25.219",children:Object(v.jsx)("path",{id:"Path_1","data-name":"Path 1",d:"M-242.2-184.285h-13l26.55-10.786-4.252,25.219-5.531-10.637-2.127,4.68v-6.382l7.659-9.148h2.34",transform:"translate(255.198 195.071)",fill:"#707070"})}),Object(v.jsx)("p",{children:"start a chat"})]}),Object(v.jsx)(b.b,{className:"milestoneRequest",head:!0,label:"seller"===y?"Request Milestone":"Create Milestone",open:C.location.pathname.match(/^\/account\/home\/deals\/.+\/payment$/),setOpen:function(){return C.push("/account/home/deals/".concat(c._id))},children:Object(v.jsx)(x.MilestoneForm,{action:"seller"===y?"request":"create",client:c,onSuccess:function(e){var t;C.push("/account/home/deals/".concat(c._id)),J(Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("button",{onClick:function(){return J(null)},children:"Okay"}),Object(v.jsxs)("div",{children:[Object(v.jsx)(h.A,{}),Object(v.jsxs)("h4",{className:"amount",children:["\u20b9",null===(t=e.milestone)||void 0===t?void 0:t.amount]}),Object(v.jsx)("h4",{children:"Milestone has been created"})]}),Object(v.jsx)(d.b,{to:"/account/hold",onClick:function(){return J(null)},children:"Check your Delivery pay Hold"})]}))}})}),Object(v.jsx)(j.b,{path:"/account/home/deals/:_id/report",component:function(e){var t=e.location;return Object(v.jsx)(b.b,{open:!0,head:!0,label:"Report User",className:"userReport",setOpen:function(){return C.push(t.pathname.replace(/\/report/,""))},children:Object(v.jsx)("div",{className:"content",children:Object(v.jsx)(D,{user:c,onSuccess:function(){C.push(C.location.pathname.replace(/\/report/,"")),J(Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("button",{onClick:function(){return J(null)},children:"Okay"}),Object(v.jsxs)("div",{children:[Object(v.jsx)(h.A,{}),Object(v.jsx)("h4",{children:"User has been reported."})]})]}))}})})})}}),Object(v.jsx)(b.b,{className:"msg",open:G,children:G})]})},S=function(e){var t,n,c=e.chat,s=e.msg,a=e.i,r=e.user,i=Object(j.g)(),d=Object(o.useState)(null),u=Object(l.a)(d,2),b=u[0],h=u[1];if(Object(o.useEffect)((function(){s.milestoneId&&fetch("/api/milestone?q=".concat(s.milestoneId)).then((function(e){return e.json()})).then((function(e){e.milestones.length&&h(e.milestones[0])}))}),[]),!s)return null;var O=Math.abs(new Date(s.createdAt).getTime()-new Date(null===(t=c[a+1])||void 0===t?void 0:t.createdAt).getTime())>12e4,x=p()(s.createdAt).format("YYYY-MM-DD")!==p()(null===(n=c[a-1])||void 0===n?void 0:n.createdAt).format("YYYY-MM-DD")||0===a;return Object(v.jsxs)("li",{className:"bubble ".concat(s.from===r._id?"user":"client"," ").concat(b?"milestone":""),children:[x&&Object(v.jsx)(g,{className:"dateStamp",format:"MMM DD, YYYY",children:s.createdAt}),s.text&&Object(v.jsxs)("p",{className:"text",onClick:function(){b&&i.push("/account/hold?q=".concat(b._id))},children:[b&&Object(v.jsxs)("span",{className:"amount",children:["\u20b9",b.amount]}),s.text]}),s.media&&Object(v.jsx)(w,{link:s.media}),(O||a===c.length-1)&&Object(v.jsx)(g,{className:"timestamp",format:"hh:mm a",children:s.createdAt})]})},w=function(e){var t=e.link,n=null,c=null,s=Object(o.useState)(!1),a=Object(l.a)(s,2),r=a[0],i=a[1];return t.match(/(\.gif|\.png|\.jpg|\.jpeg|\.webp)$/i)?n=Object(v.jsx)(h.n,{src:t,onClick:function(){return i(!0)}}):t.match(/(\.mp3|\.ogg|\.amr|\.m4a|\.flac|\.wav|\.aac)$/i)?n=Object(v.jsx)("audio",{src:t,controls:"on"}):t.match(/(\.mp4|\.mov|\.avi|\.flv|\.wmv|\.webm)$/i)?(n=Object(v.jsxs)("div",{className:"videoThumb",children:[Object(v.jsx)("video",{src:t,onClick:function(){return i(!0)}}),Object(v.jsx)(h.n,{src:"/play_btn.png"})]}),c=Object(v.jsx)("video",{src:t,controls:"on",autoPlay:"on"})):n=Object(v.jsxs)("a",{href:t,target:"_blank",className:"link",children:[Object(v.jsx)(h.n,{src:"/file_icon.png"}),t]}),Object(v.jsxs)("div",{className:"file",children:[n,Object(v.jsxs)(b.b,{open:r,className:"chatMediaView",children:[Object(v.jsx)("button",{className:"close",onClick:function(){return i(!1)},children:Object(v.jsx)(h.F,{})}),c||n]})]})},M=function(e){var t=e.rooms,n=e.user,c=e.newChat,j=Object(o.useRef)(null),d=Object(o.useRef)(null),u=Object(o.useState)(null),O=Object(l.a)(u,2),x=O[0],m=O[1],p=Object(o.useState)(!1),g=Object(l.a)(p,2),k=g[0],N=(g[1],Object(o.useState)("")),C=Object(l.a)(N,2),S=C[0],w=C[1],M=Object(o.useState)([]),D=Object(l.a)(M,2),P=D[0],F=D[1],A=function(){var e=Object(a.a)(s.a.mark((function e(a){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),y.connected){e.next=4;break}return m(Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("button",{onClick:function(){return m(null)},children:"Okay"}),Object(v.jsxs)("div",{children:[Object(v.jsx)(h.i,{}),Object(v.jsx)("h4",{children:"Could not connect to server. Make sure you're online."})]})]})),e.abrupt("return");case 4:if("https://cdn.deliverypay.in",!P.length){e.next=11;break}return e.next=8,Object(h.D)({files:P,setMsg:m});case 8:e.t0=e.sent,e.next=12;break;case 11:e.t0=[];case 12:if(r=e.t0,!P||r){e.next=15;break}return e.abrupt("return");case 15:r.length&&(r.forEach((function(e,s){y.emit("messageToServer",Object(i.a)(Object(i.a)({rooms:t},c&&{newChat:c}),{},{message:{to:n,media:e}}))})),F([])),S&&t.length&&(y.emit("messageToServer",Object(i.a)(Object(i.a)({rooms:t},c&&{newChat:c}),{},{message:{to:n,text:S}})),j.current.focus(),w(""));case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){y.on("sendFail",(function(e){var t=e.err;m(Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("button",{onClick:function(){return m(null)},children:"Okay"}),Object(v.jsxs)("div",{children:[Object(v.jsx)(h.i,{}),Object(v.jsx)("h4",{children:t})]})]}))}))}),[]),Object(o.useEffect)((function(){y.connected||y.connect()}),[S,P]),Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("form",{onSubmit:A,ref:d,className:k?"loading":"",children:[Object(v.jsx)(_,{files:P,setFiles:F}),Object(v.jsxs)("section",{children:[Object(v.jsx)(f.a,{autoFocus:!0,ref:j,type:"text",value:S,style:{height:"100px"},onChange:function(e){return w(e.target.value)},onKeyDown:function(e){13!==e.keyCode||e.altKey?13===e.keyCode&&e.altKey&&w(S+"\n"):A(e)}}),Object(v.jsxs)("div",{className:"fileUpload",children:[Object(v.jsx)("input",{type:"file",multiple:!0,onChange:function(e){F((function(t){return[].concat(Object(r.a)(t),Object(r.a)(Object(r.a)(e.target.files).filter((function(e){return!P.some((function(t){return t.name===e.name}))}))))}))}}),Object(v.jsx)(h.n,{src:"/paperclip.svg"})]})]}),Object(v.jsx)("button",{type:"submit",disabled:k,children:Object(v.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26.55",height:"25.219",viewBox:"0 0 26.55 25.219",children:Object(v.jsx)("path",{id:"Path_1","data-name":"Path 1",d:"M-242.2-184.285h-13l26.55-10.786-4.252,25.219-5.531-10.637-2.127,4.68v-6.382l7.659-9.148h2.34",transform:"translate(255.198 195.071)",fill:"#fff"})})})]}),Object(v.jsx)(b.b,{open:x,className:"msg",children:x})]})},D=function(e){var t=e.user,n=e.onSuccess,c=Object(o.useState)(!1),s=Object(l.a)(c,2),a=s[0],r=s[1],i=Object(o.useState)(""),j=Object(l.a)(i,2),d=j[0],u=j[1],O=Object(o.useState)(null),x=Object(l.a)(O,2),m=x[0],p=x[1];return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("form",{onSubmit:function(e){e.preventDefault(),r(!0),fetch("/api/reportUser",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:t._id,message:d})}).then((function(e){return e.json()})).then((function(e){"ok"===e.code?null===n||void 0===n||n(e):p(Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("button",{onClick:function(){return p(null)},children:"Okay"}),Object(v.jsxs)("div",{children:[Object(v.jsx)(h.i,{}),Object(v.jsx)("h4",{children:"Report could not be submitted. try again."})]})]}))})).catch((function(e){console.log(e),p(Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("button",{onClick:function(){return p(null)},children:"Okay"}),Object(v.jsxs)("div",{children:[Object(v.jsx)(h.i,{}),Object(v.jsx)("h4",{children:"Report could not be submitted. Make sure you're online."})]})]}))}))},children:[Object(v.jsxs)("section",{children:[Object(v.jsx)("label",{children:"Messag"}),Object(v.jsx)(f.a,{required:!0,onChange:function(e){return u(e.target.value)}})]}),Object(v.jsx)("section",{className:"btns",children:Object(v.jsx)("button",{className:"submit",children:"Submit"})})]}),a&&Object(v.jsx)("div",{className:"spinnerContainer",children:Object(v.jsx)("div",{className:"spinner"})}),Object(v.jsx)(b.b,{className:"msg",open:m,children:m})]})},_=function(e){var t=e.files,n=e.setFiles;return 0===t.length?null:Object(v.jsx)("div",{className:"preview",children:t.map((function(e){var t={type:e.type,name:e.name,url:URL.createObjectURL(e)},c=t.type.startsWith("image");return Object(v.jsxs)("div",{className:"file ".concat(c?"thumb":"any"),children:[Object(v.jsx)("button",{className:"close",type:"button",onClick:function(){return n((function(e){return e.filter((function(e){return t.name!==e.name}))}))},children:Object(v.jsx)(h.F,{})}),Object(v.jsx)(h.n,{className:c?"thumb":"",src:c?t.url:"/file_icon.png"}),!c&&Object(v.jsx)("p",{className:"filename",children:e.name})]},e.name)}))})};t.a=function(e){e.history,e.location;var t,n,c=e.match,s=Object(o.useContext)(u.d),a=s.user,r=(s.setUser,Object(o.useContext)(u.a)),j=r.contacts,d=r.setContacts,b=Object(o.useState)(null),O=Object(l.a)(b,2),x=O[0],f=O[1],m=Object(o.useState)(null),p=Object(l.a)(m,2),g=p[0],S=p[1];return Object(o.useEffect)((function(){x&&(S(null===x||void 0===x?void 0:x.messages),y.emit("initiateChat",{client_id:null===x||void 0===x?void 0:x._id}))}),[x]),Object(o.useEffect)((function(){if(c.params._id){var e=j.find((function(e){return e.client._id.toString()===c.params._id}));if(e){var t=e.client,n=e.messages,s=e.status;e.lastSeen;f(Object(i.a)(Object(i.a)({},t),{},{status:s,messages:n}))}}}),[c.params,j]),Object(v.jsxs)("div",{className:"chatContainer ".concat(x?"chatOpen":""),children:[Object(v.jsxs)("div",{className:"contactsContainer",children:[Object(v.jsx)(k,{setUserCard:f,setContacts:d}),Object(v.jsx)("div",{className:"userCard",children:x?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{className:"profile",children:[Object(v.jsx)(h.n,{src:x.profileImg||"/profile-user.jpg"}),Object(v.jsxs)("div",{className:"details",children:[Object(v.jsx)("p",{className:"name",children:x.firstName?x.firstName+" "+x.lastName:"Deleted user"}),Object(v.jsx)("a",{className:"phone",children:x.phone}),Object(v.jsx)("a",{href:"mailto:".concat(x.email),className:"email",children:x.email}),Object(v.jsx)("p",{className:"add",children:"".concat((null===(t=x.address)||void 0===t?void 0:t.city)||""," ").concat((null===(n=x.address)||void 0===n?void 0:n.country)||"")})]})]}),Object(v.jsxs)("div",{className:"clas",children:[Object(v.jsx)("p",{className:"status",children:x.status}),Object(v.jsx)("button",{children:"Chat"})]})]}):Object(v.jsx)("p",{className:"userCard placeholder",children:"User card"})}),Object(v.jsx)("p",{className:"label",children:"Messages"}),Object(v.jsx)("div",{className:"peopleWrapper",children:Object(v.jsxs)("ul",{className:"people",children:[j.map((function(e){var t=e.client,n=e.messages,c=e.status,s=e.lastSeen,a=e.unread;return Object(v.jsx)(N,{client:t,messages:n,status:c,lastSeen:s,userCard:x,unread:a},t._id)})),0===j.length&&Object(v.jsx)("p",{className:"placeholder",children:"Start making payments now."})]})})]}),Object(v.jsx)(C,{chat:g,setContacts:d,userCard:x,setUserCard:f,user:a,socket:y,setChat:S})]})}},35:function(e,t,n){"use strict";n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return h})),n.d(t,"d",(function(){return O})),n.d(t,"e",(function(){return x}));var c=n(11),s=n.n(c),a=n(19),r=n(3),i=n(1),l=n(2),o=n(5),j=n(22),d=n(0),u=function(e){var t=e.milestone,n=e.setReleaseForm,c=e.onSuccess,s=Object(i.useState)(t.amount),a=Object(r.a)(s,2),j=a[0],u=(a[1],Object(i.useState)(null)),b=Object(r.a)(u,2),h=b[0],O=b[1];return Object(d.jsxs)("form",{onSubmit:function(e){e.preventDefault(),fetch("/api/releaseMilestone",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({_id:t._id,amount:j})}).then((function(e){return e.json()})).then((function(e){var t=e.code,n=e.milestone;n?null===c||void 0===c||c(n):O(403===t?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("button",{onClick:function(){return O(null)},children:"Okay"}),Object(d.jsxs)("div",{children:[Object(d.jsx)(l.i,{}),Object(d.jsx)("h4",{children:"Could not release Milestone due to low balance."})]})]}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("button",{onClick:function(){return O(null)},children:"Okay"}),Object(d.jsxs)("div",{children:[Object(d.jsx)(l.i,{}),Object(d.jsx)("h4",{children:"Could not release Milestone."})]})]}))})).catch((function(e){console.log(e),d.Fragment,l.i}))},children:["You sure want to release this Milestone?",Object(d.jsxs)("section",{className:"btns",children:[Object(d.jsx)("button",{type:"submit",children:"Confirm"}),Object(d.jsx)("button",{className:"cancel",type:"button",onClick:function(){return n(!1)},children:"Cancel"})]}),Object(d.jsx)(o.b,{open:h,className:"msg",children:h})]})},b=function(e){var t,n,c,s,a,l,o,j=e.client,u=e.onSuccess,b=e.onCancel,h=Object(i.useState)(j?j.name||j.firstName+" "+j.lastName:""),O=Object(r.a)(h,2),x=O[0],f=O[1],m=Object(i.useState)((null===j||void 0===j?void 0:j.phone)||""),p=Object(r.a)(m,2),v=p[0],g=p[1],y=Object(i.useState)((null===j||void 0===j||null===(t=j.address)||void 0===t?void 0:t.zip)||""),k=Object(r.a)(y,2),N=k[0],C=k[1],S=Object(i.useState)((null===j||void 0===j||null===(n=j.address)||void 0===n?void 0:n.locality)||""),w=Object(r.a)(S,2),M=w[0],D=w[1],_=Object(i.useState)((null===j||void 0===j||null===(c=j.address)||void 0===c?void 0:c.street)||""),P=Object(r.a)(_,2),F=P[0],A=P[1],Y=Object(i.useState)((null===j||void 0===j||null===(s=j.address)||void 0===s?void 0:s.city)||""),T=Object(r.a)(Y,2),R=T[0],q=T[1],I=Object(i.useState)((null===j||void 0===j||null===(a=j.address)||void 0===a?void 0:a.state)||""),L=Object(r.a)(I,2),B=L[0],E=L[1],V=Object(i.useState)((null===j||void 0===j||null===(l=j.address)||void 0===l?void 0:l.landmark)||""),H=Object(r.a)(V,2),U=H[0],Z=H[1],W=Object(i.useState)((null===j||void 0===j||null===(o=j.address)||void 0===o?void 0:o.altPhone)||""),G=Object(r.a)(W,2),J=G[0],z=G[1];return Object(d.jsxs)("form",{className:"addressForm",onSubmit:function(e){e.preventDefault(),null===u||void 0===u||u({address:{name:x,phone:v,street:F,city:R,state:B,zip:N,locality:M,landmark:U,altPhone:J}})},children:[Object(d.jsxs)("section",{children:[Object(d.jsx)("label",{htmlFor:"name",children:"Full Name"}),Object(d.jsx)("input",{value:x,onChange:function(e){return f(e.target.value)},type:"text",name:"name",required:!0})]}),Object(d.jsxs)("section",{children:[Object(d.jsx)("label",{htmlFor:"phone",children:"Phone Number"}),Object(d.jsx)("input",{value:v,onChange:function(e){return g(e.target.value)},type:"tel",name:"phone",required:!0})]}),Object(d.jsxs)("section",{children:[Object(d.jsx)("label",{htmlFor:"zip",children:"PIN Code"}),Object(d.jsx)("input",{value:N,onChange:function(e){return C(e.target.value)},type:"number",name:"zip",required:!0})]}),Object(d.jsxs)("section",{children:[Object(d.jsx)("label",{htmlFor:"locality",children:"Locality"}),Object(d.jsx)("input",{value:M,onChange:function(e){return D(e.target.value)},type:"text",name:"locality",required:!0})]}),Object(d.jsxs)("section",{className:"street",children:[Object(d.jsx)("label",{htmlFor:"address",children:"Address"}),Object(d.jsx)("textarea",{value:F,onChange:function(e){return A(e.target.value)},resiz:"off",type:"text",name:"address",required:!0})]}),Object(d.jsxs)("section",{children:[Object(d.jsx)("label",{htmlFor:"city",children:"City"}),Object(d.jsx)("input",{value:R,onChange:function(e){return q(e.target.value)},type:"text",name:"city",required:!0})]}),Object(d.jsxs)("section",{children:[Object(d.jsx)("label",{htmlFor:"state",children:"State"}),Object(d.jsx)("input",{value:B,onChange:function(e){return E(e.target.value)},type:"text",name:"state",required:!0})]}),Object(d.jsxs)("section",{children:[Object(d.jsx)("label",{htmlFor:"landmark",children:"Landmark (Optional)"}),Object(d.jsx)("input",{value:U,onChange:function(e){return Z(e.target.value)},type:"text",name:"landmark"})]}),Object(d.jsxs)("section",{children:[Object(d.jsx)("label",{htmlFor:"altPhone",children:"Alternate Phone (Optional)"}),Object(d.jsx)("input",{value:J,onChange:function(e){return z(e.target.value)},type:"tel",name:"altPhone"})]}),Object(d.jsx)("button",{className:"save",children:"Save"}),Object(d.jsx)("button",{className:"cancel",type:"button",onClick:function(){return null===b||void 0===b?void 0:b()},children:"Cancel"}),Object(d.jsx)("section",{className:"pBtm"})]})},h=function(e){var t=e.milestone,n=(e.setDisputeForm,e.onSuccess),c=Object(i.useState)(""),u=Object(r.a)(c,2),b=u[0],h=u[1],O=Object(i.useState)(!1),x=Object(r.a)(O,2),f=x[0],m=x[1],p=Object(i.useState)(""),v=Object(r.a)(p,2),g=v[0],y=v[1],k=Object(i.useState)([]),N=Object(r.a)(k,2),C=N[0],S=N[1],w=Object(i.useState)(null),M=Object(r.a)(w,2),D=M[0],_=M[1],P=function(){var e=Object(a.a)(s.a.mark((function e(c){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.preventDefault(),m(!0),!C.length){e.next=8;break}return e.next=5,Object(l.D)({files:C,setMsg:_});case 5:e.t0=e.sent,e.next=9;break;case 8:e.t0=[];case 9:a=e.t0,fetch("/api/fileDispute",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({issue:b,milestoneId:t._id,defendantId:t.client._id,_case:{dscr:g,files:a}})}).then((function(e){return e.json()})).then((function(e){m(!1),"ok"===e.code?null===n||void 0===n||n(e.milestone):403===e.code?_(Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("button",{onClick:function(){return _(null)},children:"Okay"}),Object(d.jsxs)("div",{children:[Object(d.jsx)(l.i,{}),Object(d.jsx)("h4",{children:"Insufficient fund! you have to have \u20b9500 in your wallet to file a dispute."})]})]})):_(Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("button",{onClick:function(){return _(null)},children:"Okay"}),Object(d.jsxs)("div",{children:[Object(d.jsx)(l.i,{}),Object(d.jsx)("h4",{children:"Could not file dispute."})]})]}))})).catch((function(e){m(!0),console.log(e),_(Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("button",{onClick:function(){return _(null)},children:"Okay"}),Object(d.jsxs)("div",{children:[Object(d.jsx)(l.i,{}),Object(d.jsx)("h4",{children:"Could not file dispute. make sure you're online."})]})]}))}));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("form",{className:"disputeForm",onSubmit:P,children:[Object(d.jsx)("h4",{children:"You feel like you are getting scammed?"}),Object(d.jsxs)("section",{children:[Object(d.jsx)("label",{htmlFor:"issue",children:"Issue"}),Object(d.jsx)(l.h,{name:"issue",options:"buyer"===t.role?[{label:"Buyer Not Releasing Payments",value:"Buyer Not Releasing Payments"}]:[{label:"Goods Not Received",value:"Goods Not Received"},{label:"Services Not Received",value:"Services Not Received"},{label:"Damaged",value:"Damaged"},{label:"Not As Agreed",value:"Not As Agreed"},{label:"Not As Displayed",value:"Not As Displayed"}],onChange:function(e){h(e.value)}})]}),Object(d.jsxs)("section",{children:[Object(d.jsx)("label",{htmlFor:"description",children:"Description"}),Object(d.jsx)(j.a,{name:"description",value:g,required:!0,onChange:function(e){return y(e.target.value)}})]}),Object(d.jsxs)("section",{children:[Object(d.jsx)("label",{htmlFor:"for",children:"Upload images to prove your case. ie: Product of image, proof of delivery."}),Object(d.jsx)(l.k,{multiple:!0,accept:"audio/*,video/*,image/*",onChange:function(e){return S(e)}})]}),Object(d.jsxs)("section",{className:"btns",children:[Object(d.jsx)("button",{className:"submit",type:"submit",children:"Submit"}),Object(d.jsx)("button",{className:"cancel",type:"button",children:"Cancel"})]}),Object(d.jsx)("div",{className:"pBtm"})]}),f&&Object(d.jsx)("div",{className:"spinnerContainer",children:Object(d.jsx)("div",{className:"spinner"})}),Object(d.jsx)(o.b,{open:D,className:"msg",children:D})]})},O=function(e){var t=e.onSuccess,n=Object(i.useState)(!1),c=Object(r.a)(n,2),u=c[0],b=c[1],h=Object(i.useState)(!1),O=Object(r.a)(h,2),x=O[0],f=O[1],m=Object(i.useState)(""),p=Object(r.a)(m,2),v=p[0],g=p[1],y=Object(i.useState)(""),k=Object(r.a)(y,2),N=k[0],C=k[1],S=Object(i.useState)(""),w=Object(r.a)(S,2),M=w[0],D=w[1],_=Object(i.useState)(""),P=Object(r.a)(_,2),F=P[0],A=P[1],Y=Object(i.useState)(""),T=Object(r.a)(Y,2),R=T[0],q=T[1],I=function(){var e=Object(a.a)(s.a.mark((function e(n){var c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),b(!0),!F.length){e.next=8;break}return e.next=5,Object(l.D)({files:F,setMsg:f});case 5:e.t0=e.sent,e.next=9;break;case 8:e.t0=[];case 9:c=e.t0,fetch("/api/openTicket",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({issue:v,milestone:N,transaction:M,message:{body:R,files:c}})}).then((function(e){return e.json()})).then((function(e){b(!1),"ok"===e.code?null===t||void 0===t||t(e.ticket):"milestone ID is invalid"===e.message?f(Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("button",{onClick:function(){return f(null)},children:"Okay"}),Object(d.jsxs)("div",{children:[Object(d.jsx)(l.i,{}),Object(d.jsx)("h4",{children:"Milestone Id is invalid."})]})]})):f(Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("button",{onClick:function(){return f(null)},children:"Okay"}),Object(d.jsxs)("div",{children:[Object(d.jsx)(l.i,{}),Object(d.jsx)("h4",{children:"Ticket could not be submitted."})]})]}))})).catch((function(e){b(!1),console.log(e),f(Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("button",{onClick:function(){return f(null)},children:"Okay"}),Object(d.jsxs)("div",{children:[Object(d.jsx)(l.i,{}),Object(d.jsx)("h4",{children:"Ticket could not be submitted. Make sure you're online."})]})]}))}));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("form",{className:"ticketForm",onSubmit:I,children:[Object(d.jsxs)("section",{children:[Object(d.jsx)("label",{children:"Issue"}),Object(d.jsx)("input",{value:v,required:!0,onChange:function(e){return g(e.target.value)}})]}),Object(d.jsxs)("section",{children:[Object(d.jsx)("label",{children:"Milestone ID (optional)"}),Object(d.jsx)("input",{value:N,onChange:function(e){return C(e.target.value)}})]}),Object(d.jsxs)("section",{children:[Object(d.jsx)("label",{children:"Transaction ID (optional)"}),Object(d.jsx)("input",{value:M,onChange:function(e){return D(e.target.value)}})]}),Object(d.jsxs)("section",{children:[Object(d.jsx)("label",{children:"Detail"}),Object(d.jsx)(j.a,{required:!0,value:R,onChange:function(e){return q(e.target.value)}})]}),Object(d.jsxs)("section",{children:[Object(d.jsx)("label",{htmlFor:"for",children:"Upload relevant files (optional)"}),Object(d.jsx)(l.k,{onChange:function(e){return A(e)}})]}),Object(d.jsxs)("section",{className:"btns",children:[Object(d.jsx)("button",{className:"submit",type:"submit",children:"Submit"}),Object(d.jsx)("button",{className:"cancel",type:"button",children:"Cancel"})]}),Object(d.jsx)("div",{className:"pBtm"})]}),u&&Object(d.jsx)("div",{className:"spinnerContainer",children:Object(d.jsx)("div",{className:"spinner"})}),Object(d.jsx)(o.b,{open:x,className:"msg",children:x})]})},x=function(e){var t=e._id,n=e.onSuccess,c=Object(i.useState)(!1),u=Object(r.a)(c,2),b=u[0],h=u[1],O=Object(i.useState)(!1),x=Object(r.a)(O,2),f=x[0],m=x[1],p=Object(i.useState)([]),v=Object(r.a)(p,2),g=v[0],y=v[1],k=Object(i.useState)(""),N=Object(r.a)(k,2),C=N[0],S=N[1],w=function(){var e=Object(a.a)(s.a.mark((function e(c){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.preventDefault(),h(!0),!g.length){e.next=8;break}return e.next=5,Object(l.D)({files:g,setMsg:m});case 5:e.t0=e.sent,e.next=9;break;case 8:e.t0=[];case 9:a=e.t0,fetch("/api/addTicketReply",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({_id:t,message:{body:C,files:a}})}).then((function(e){return e.json()})).then((function(e){h(!1),"ok"===e.code?null===n||void 0===n||n(e.ticket):m(Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("button",{onClick:function(){return m(null)},children:"Okay"}),Object(d.jsxs)("div",{children:[Object(d.jsx)(l.i,{}),Object(d.jsx)("h4",{children:"Reply could not be submitted."})]})]}))})).catch((function(e){h(!1),console.log(e),m(Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("button",{onClick:function(){return m(null)},children:"Okay"}),Object(d.jsxs)("div",{children:[Object(d.jsx)(l.i,{}),Object(d.jsx)("h4",{children:"Reply could not be submitted. Make sure you're online."})]})]}))}));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("form",{className:"ticketReplyForm",onSubmit:w,children:[Object(d.jsxs)("section",{children:[Object(d.jsx)("label",{children:"Message"}),Object(d.jsx)(j.a,{required:!0,value:C,onChange:function(e){return S(e.target.value)}})]}),Object(d.jsxs)("section",{children:[Object(d.jsx)("label",{htmlFor:"for",children:"Upload relevant files (optional)"}),Object(d.jsx)(l.k,{accept:"audio/*,video/*,image/*",multiple:!0,onChange:function(e){return y(e)}})]}),Object(d.jsxs)("section",{className:"btns",children:[Object(d.jsx)("button",{className:"submit",type:"submit",children:"Submit"}),Object(d.jsx)("button",{className:"cancel",type:"button",children:"Cancel"})]}),Object(d.jsx)("div",{className:"pBtm"})]}),b&&Object(d.jsx)("div",{className:"spinnerContainer",children:Object(d.jsx)("div",{className:"spinner"})}),Object(d.jsx)(o.b,{open:f,className:"msg",children:f})]})}},46:function(e,t,n){"use strict";n.d(t,"c",(function(){return f})),n.d(t,"a",(function(){return v})),n.d(t,"b",(function(){return y}));var c=n(4),s=n(3),a=n(1),r=n(2),i=n(35),l=n(9),o=n(18),j=n(6),d=n(5),u=n(48),b=n(23),h=n.n(b),O=n(0);n(196);var x=function(e){var t,n,c=e.data,s=Object(a.useContext)(l.d),i=s.user,o=s.userType,d=s.setCart,u=Object(r.I)({product:c,gst:null===(t=c.user)||void 0===t?void 0:t.gst});return Object(O.jsxs)("div",{className:"product",children:[Object(O.jsx)(j.b,{to:"/account/home/product/".concat(c._id),children:Object(O.jsx)("div",{className:"thumb ".concat(c.images[0]?"":"noThumb"),children:Object(O.jsx)(r.n,{src:c.images[0]||"/open_box.png"})})}),Object(O.jsxs)("div",{className:"detail",children:[Object(O.jsx)("h3",{children:c.name}),Object(O.jsx)("p",{className:"dscr",children:c.dscr}),Object(O.jsxs)("div",{className:"price",children:[Object(O.jsx)("span",{className:"symbol",children:"\u20b9 "}),u," ",u!==Object(r.I)({product:c,gst:c.user.gst,discount:!1})&&Object(O.jsx)("span",{className:"originalPrice",children:Object(r.I)({product:c,gst:null===(n=c.user)||void 0===n?void 0:n.gst,discount:!1})})]})]}),Object(O.jsxs)("div",{className:"actions",children:["buyer"===o&&(null===c||void 0===c?void 0:c.user._id)===(null===i||void 0===i?void 0:i._id)&&Object(O.jsx)("p",{className:"note",children:"Can't buy product from self."}),Object(O.jsx)("button",{disabled:!c.available||(null===c||void 0===c?void 0:c.user._id)===(null===i||void 0===i?void 0:i._id),onClick:function(){d((function(e){return Object(r.G)(e,c)}))},children:"Add to Cart"})]})]})},f=function(e){var t,n,c,i,o,u,b=e.match,h=Object(a.useContext)(l.d),x=h.user,f=h.setCart,p=h.userType,v=Object(a.useState)(null),g=Object(s.a)(v,2),y=g[0],k=g[1],N=Object(a.useState)(null),C=Object(s.a)(N,2),S=C[0],w=C[1];return Object(a.useEffect)((function(){fetch("/api/singleProduct?_id=".concat(b.params._id)).then((function(e){return e.json()})).then((function(e){"ok"===e.code?k(e.product):w(Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("button",{onClick:function(){return w(null)},children:"Okay"}),Object(O.jsxs)("div",{children:[Object(O.jsx)(r.i,{}),Object(O.jsx)("h4",{children:"Product does not exists."})]})]}))})).catch((function(e){console.log(e),w(Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("button",{onClick:function(){return w(null)},children:"Okay"}),Object(O.jsxs)("div",{children:[Object(O.jsx)(r.i,{}),Object(O.jsx)("h4",{children:"Could not get product. Make sure you're online."})]})]}))}))}),[]),y?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(j.b,{to:"/account/home",children:"Back"}),Object(O.jsxs)("div",{className:"generic singleProduct",children:[Object(O.jsx)(r.m,{}),Object(O.jsxs)("div",{className:"content",children:[Object(O.jsx)(m,{images:y.images}),Object(O.jsxs)("div",{className:"detail",children:[Object(O.jsx)("h1",{children:y.name}),Object(O.jsx)("p",{children:y.dscr}),Object(O.jsxs)("p",{children:["product"===y.type&&Object(O.jsxs)(O.Fragment,{children:["Available: ",y.available&&y.available," ",0===y.available&&Object(O.jsx)(O.Fragment,{children:"Out of stock"}),y.available<7&&y.available>0&&Object(O.jsx)(O.Fragment,{children:"Low stock"})]}),"product"!==y.type&&Object(O.jsxs)(O.Fragment,{children:["Availability:"," ",y.available?"Available":"Unavailable"]})]}),Object(O.jsxs)("p",{className:"price",children:[Object(O.jsx)("label",{children:"Price: "})," ",Object(O.jsx)("span",{className:"symbol",children:"\u20b9"}),Object(r.I)({product:y,gst:null===(t=y.user)||void 0===t?void 0:t.gst})," ",Object(r.I)({product:y,gst:null===(n=y.user)||void 0===n?void 0:n.gst})!==Object(r.I)({product:y,gst:null===(c=y.user)||void 0===c?void 0:c.gst,discount:!1})&&Object(O.jsx)("span",{className:"originalPrice",children:Object(r.I)({product:y,gst:null===(i=y.user)||void 0===i?void 0:i.gst,discount:!1})})]}),Object(O.jsxs)("div",{className:"seller",children:[Object(O.jsx)("label",{children:"Being sold by:"}),Object(O.jsx)(j.b,{to:"/marketplace?seller=".concat(null===(o=y.user)||void 0===o?void 0:o._id),children:Object(O.jsxs)("div",{className:"profile",children:[Object(O.jsx)(r.n,{src:y.user.profileImg||"/profile-user.jpg"}),Object(O.jsxs)("p",{className:"name",children:[y.user.firstName," ",y.user.lastName," ",Object(O.jsx)("span",{className:"contact",children:y.user.phone})]})]})})]}),Object(O.jsxs)("div",{className:"actions",children:[Object(O.jsx)("button",{disabled:!y.available||"seller"===p||(null===(u=y.user)||void 0===u?void 0:u._id)===(null===x||void 0===x?void 0:x._id),onClick:function(){f((function(e){return Object(r.G)(e,y)}))},children:"Add to Cart"}),"seller"===p&&(null===y||void 0===y?void 0:y.user._id)!==(null===x||void 0===x?void 0:x._id)&&Object(O.jsx)("p",{className:"note",children:"Switch to buyer profile to buy this product."}),"buyer"===p&&(null===y||void 0===y?void 0:y.user._id)===(null===x||void 0===x?void 0:x._id)&&Object(O.jsx)("p",{className:"note",children:"Can't buy product from self."})]})]}),Object(O.jsx)(d.b,{className:"msg",open:S,children:S})]}),Object(O.jsx)(r.l,{})]})]}):Object(O.jsxs)("div",{className:"generic singleProduct",children:[Object(O.jsx)(r.m,{}),"loading",Object(O.jsx)(d.b,{className:"msg",open:S,children:S}),Object(O.jsx)(r.l,{})]})},m=function(e){var t=e.images,n=Object(a.useState)(t[0]),c=Object(s.a)(n,2),i=c[0],l=c[1];return Object(O.jsxs)("div",{className:"gallery",children:[Object(O.jsx)(p,{img:i}),Object(O.jsxs)("div",{className:"thumbs",children:[t.map((function(e,t){return Object(O.jsx)(r.n,{src:e,onClick:function(){return l(e)}},t)})),0===t.length&&Object(O.jsx)("p",{children:"No image was provided by the seller."})]})]})},p=function(e){var t=e.img,n=Object(a.useState)(t||"/open_box.png"),c=Object(s.a)(n,2),r=c[0],i=c[1],l=Object(a.useState)(null),o=Object(s.a)(l,2),j=o[0],d=o[1],u=Object(a.useState)(!1),b=Object(s.a)(u,2),h=b[0],x=b[1],f=Object(a.useState)({}),m=Object(s.a)(f,2),p=m[0],v=m[1],g=Object(a.useRef)();return Object(a.useLayoutEffect)((function(){var e;d(null===(e=g.current)||void 0===e?void 0:e.getBoundingClientRect())}),[]),Object(a.useEffect)((function(){i(t||"/open_box.png")}),[t]),Object(O.jsx)("div",{ref:g,className:"mainView ".concat(t?"":"noImg"),onMouseMove:function(e){if(t){var n=.65*Math.abs(Math.round((e.clientX-j.x)/(j.width/100))),c=.65*Math.round((e.clientY-j.y)/(j.height/100));v({transform:"scale(2) translateY(".concat(Math.max(30-c,-30),"%) translateX(").concat(Math.max(30-n,-30),"%)")})}},onTouchStart:function(e){document.querySelector("body").style.overflow="hidden",x(!0)},onTouchEnd:function(e){document.querySelector("body").style.overflow="auto",x(!1)},onTouchMove:function(e){if(t){var n=.65*Math.abs(Math.round((e.touches[0].clientX-j.x)/(j.width/100))),c=.65*Math.round((e.touches[0].clientY-j.y)/(j.height/100));v({transform:"scale(2) translateY(".concat(Math.max(30-c,-30),"%) translateX(").concat(Math.max(30-n,-30),"%)"),transition:"none"})}},onMouseEnter:function(){return x(!0)},onMouseLeave:function(){return x(!1)},children:Object(O.jsx)("img",{className:h?"scale":"",style:h?p:{},src:r,onError:function(){return i("/img_err.png")}})})},v=function(){var e=Object(a.useContext)(l.d),t=(e.setCart,e.cart),n=Object(a.useState)(!0),c=Object(s.a)(n,2),i=c[0],o=c[1],j=Object(a.useState)(null),u=Object(s.a)(j,2),b=u[0],h=u[1],x=Object(a.useState)(null),f=Object(s.a)(x,2),m=f[0],p=f[1];return Object(a.useEffect)((function(){o(!0),fetch("/api/getCartDetail",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({cart:t})}).then((function(e){return e.json()})).then((function(e){o(!1),"ok"===e.code&&h(e.carts)})).catch((function(e){console.log(e),o(!1),p(Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("button",{onClick:function(){return p(null)},children:"Okay"}),Object(O.jsxs)("div",{children:[Object(O.jsx)(r.i,{}),Object(O.jsx)("h4",{children:"Could not get cart detail. Make sure you're online."})]})]}))}))}),[t]),b?Object(O.jsxs)("div",{className:"fullCart",children:[Object(O.jsx)("div",{className:"head",children:Object(O.jsx)("h1",{children:"Cart"})}),Object(O.jsxs)("div",{className:"allCarts",children:[b.map((function(e){var t=e.seller,n=e.products;return(null===n||void 0===n?void 0:n.length)?Object(O.jsx)(g,{seller:t,products:n,loading:i},t._id):null})),0===(null===b||void 0===b?void 0:b.length)&&Object(O.jsx)("p",{children:"Cart is empty"})]}),Object(O.jsx)(d.b,{open:m,className:"msg",children:m})]}):Object(O.jsxs)("div",{className:"fullCart",children:[Object(O.jsx)("div",{className:"head",children:Object(O.jsx)("h1",{children:"Cart"})}),Object(O.jsx)("div",{className:"allCarts",children:"Cart is empty."}),Object(O.jsx)(d.b,{open:m,className:"msg",children:m})]})},g=function(e){var t,n,o,b,h,x,f,m,p,v=e.seller,g=e.products,k=e.loading,N=Object(a.useContext)(l.d),C=N.user,S=N.setCart,w=N.config,M=Object(a.useState)(null),D=Object(s.a)(M,2),_=D[0],P=D[1],F=Object(a.useState)({name:C.firstName+" "+C.lastName,phone:C.phone}),A=Object(s.a)(F,2),Y=A[0],T=A[1],R=Object(a.useState)(!1),q=Object(s.a)(R,2),I=q[0],L=q[1],B=Object(a.useState)(!1),E=Object(s.a)(B,2),V=E[0],H=E[1],U=Object(a.useState)(!1),Z=Object(s.a)(U,2),W=Z[0],G=Z[1],J=+(g.reduce((function(e,t){return(e+Object(r.I)({product:t.product,gst:v.gst})*t.qty).fix()}),0)+((null===(t=v.shopInfo)||void 0===t?void 0:t.shippingCost)||0)).fix(),z=(J*((100+w.fee)/100)-J).fix();return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("div",{className:"shop",children:[Object(O.jsx)("div",{className:"seller",children:Object(O.jsxs)("div",{className:"profile",children:[Object(O.jsx)(r.n,{src:v.profileImg||"/profile-user.jpg"}),Object(O.jsxs)("p",{className:"name",children:[v.firstName," ",v.lastName," \u2022"," ",Object(O.jsx)("span",{className:"role",children:"Seller"}),Object(O.jsx)("span",{className:"contact",children:v.phone})]})]})}),Object(O.jsxs)("div",{className:"cart",children:[Object(O.jsxs)("ul",{className:"items",children:[g.map((function(e,t){var n=e.product,c=e.qty;return Object(O.jsx)(y,{gst:v.gst,product:n,qty:c},t)})),Object(O.jsxs)("div",{className:"total",children:[Object(O.jsxs)("p",{children:[Object(O.jsx)("label",{children:"Shipping"}),"\u20b9",null===(n=v.shopInfo)||void 0===n?void 0:n.shippingCost]}),Object(O.jsxs)("p",{children:[Object(O.jsxs)("label",{children:["Delivery Pay Fee ",w.fee,"%"]}),"\u20b9",z]}),Object(O.jsx)("hr",{}),Object(O.jsxs)("p",{children:[Object(O.jsx)("label",{children:"Total"}),"\u20b9",J+z]})]}),Object(O.jsxs)("div",{className:"terms",children:[Object(O.jsxs)("p",{children:[Object(O.jsx)("label",{children:"Refundable: "}),(null===(o=v.shopInfo)||void 0===o?void 0:o.refundable)||"N/A"]}),Object(O.jsxs)("p",{children:["By proceeding, I agree to seller's all"," ",Object(O.jsx)("span",{className:"btn",onClick:function(){return G(!0)},children:"Terms"})]})]})]}),Object(O.jsx)("span",{className:"devider"}),Object(O.jsxs)("div",{className:"deliveryDetail",children:[Object(O.jsxs)("div",{className:"head",children:[Object(O.jsx)("h3",{children:"Delivery Information"}),Object(O.jsx)("button",{onClick:function(){return L(!0)},children:"Edit"})]}),Object(O.jsx)("ul",{children:Object.entries(Y).map((function(e,t){var n=Object(s.a)(e,2),c=n[0],a=n[1];return Object(O.jsxs)("li",{children:[Object(O.jsx)("label",{children:c}),a]},t)}))})]})]}),Object(O.jsx)("div",{className:"actions",children:Object(O.jsx)("button",{onClick:function(){return H(!0)},children:"Place order"})}),Object(O.jsx)(d.b,{open:I,head:!0,label:"Delivery Address",setOpen:L,className:"addAddress",children:Object(O.jsx)(i.a,{client:{name:Y.name,phone:Y.phone,address:Y},onSuccess:function(e){T((function(t){return Object(c.a)(Object(c.a)({},t),e.address)})),L(!1)},onCancel:function(){return L(!1)}})}),Object(O.jsx)(d.b,{className:"milestoneRequest",head:!0,label:"Checkout",open:V,setOpen:H,children:Object(O.jsx)(u.MilestoneForm,{action:"create",client:v,definedAmount:J+z,order:{products:g,deliveryDetail:Object(c.a)(Object(c.a)({},Y),{},{deliveryWithin:null===(b=v.shopInfo)||void 0===b?void 0:b.deliveryWithin}),total:J,refundable:null===(h=v.shopInfo)||void 0===h?void 0:h.refundable,terms:null===(x=v.shopInfo)||void 0===x?void 0:x.terms,shippingCost:null===(f=v.shopInfo)||void 0===f?void 0:f.shippingCost},onSuccess:function(e){e.milestone;var t=e.order;S((function(e){return e.filter((function(e){var n=e.product;return!t.products.some((function(e){return e.product._id===n._id}))}))})),H(!1),P(Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("button",{onClick:function(){return P(null)},children:"Okay"}),Object(O.jsxs)("div",{children:[Object(O.jsx)(r.A,{}),Object(O.jsx)("h4",{children:"Order successfully submitted."}),Object(O.jsx)(j.b,{to:"/account/myShopping/orders",children:"View All orders"})]})]}))}})}),Object(O.jsx)(d.b,{open:W,setOpen:G,head:!0,label:"Seller's Terms",className:"shopTerms",children:Object(O.jsx)("ul",{children:null===(m=v.shopInfo)||void 0===m||null===(p=m.terms)||void 0===p?void 0:p.map((function(e,t){return Object(O.jsx)("li",{children:e},t)}))})}),Object(O.jsx)(d.b,{className:"msg",open:_,children:_})]}),k&&Object(O.jsx)("div",{className:"spinnerContainer",children:Object(O.jsx)("div",{className:"spinner"})})]})},y=function(e){var t,n=e.product,s=e.gst,i=e.qty,o=Object(a.useContext)(l.d).setCart,j=Object(r.I)({product:n,gst:s||(null===(t=n.user)||void 0===t?void 0:t.gst)});return Object(O.jsxs)("li",{className:"item ".concat(!n.images.length&&"noImg"),children:[Object(O.jsx)(r.n,{src:n.images[0]||"/open_box.png"}),Object(O.jsxs)("div",{className:"detail",children:[Object(O.jsx)("p",{className:"name",children:n.name}),Object(O.jsxs)("div",{className:"qty",children:["QTY:"," ",Object(O.jsxs)("div",{className:"addRemove",children:[Object(O.jsx)("button",{onClick:function(){o((function(e){return e.map((function(e){return e.product._id===n._id?Object(c.a)(Object(c.a)({},e),{},{qty:e.qty-1}):e})).filter((function(e){return e.qty>0}))}))},children:Object(O.jsx)(r.q,{})}),i,Object(O.jsx)("button",{onClick:function(){o((function(e){return e.map((function(e){return e.product._id===n._id?Object(c.a)(Object(c.a)({},e),{},{qty:e.qty+1}):e}))}))},children:Object(O.jsx)(r.t,{})})]})]})]}),Object(O.jsxs)("div",{className:"price",children:[Object(O.jsxs)("span",{className:"qty",children:[j," x ",i]}),"\u20b9",(j*i).fix()]}),(null===s||void 0===s?void 0:s.verified)&&Object(O.jsxs)(r.C,{children:["Including ",n.gst,"% GST."]})]})};t.d=function(e){var t,n=e.location,i=(e.match,Object(o.g)()),j=Object(a.useContext)(l.d).userType,u=Object(a.useState)([]),b=Object(s.a)(u,2),f=b[0],m=b[1],p=Object(a.useState)(0),v=Object(s.a)(p,2),g=(v[0],v[1]),y=Object(a.useState)(!1),k=Object(s.a)(y,2),N=(k[0],k[1],Object(a.useState)(h.a.parse(null===n||void 0===n?void 0:n.search).type||"")),C=Object(s.a)(N,2),S=C[0],w=C[1],M=Object(a.useState)(h.a.parse(null===n||void 0===n?void 0:n.search).perPage||20),D=Object(s.a)(M,2),_=D[0],P=D[1],F=Object(a.useState)(h.a.parse(null===n||void 0===n?void 0:n.search).page||1),A=Object(s.a)(F,2),Y=A[0],T=(A[1],Object(a.useState)(h.a.parse(null===n||void 0===n?void 0:n.search).q||"")),R=Object(s.a)(T,2),q=R[0],I=R[1],L=Object(a.useState)({column:h.a.parse(null===n||void 0===n?void 0:n.search).sort||"popularity",order:h.a.parse(null===n||void 0===n?void 0:n.search).order||"dsc"}),B=Object(s.a)(L,2),E=B[0],V=B[1],H=Object(a.useState)([]),U=Object(s.a)(H,2),Z=U[0],W=U[1],G=Object(a.useState)(null),J=Object(s.a)(G,2),z=J[0],$=J[1],K=Object(a.useState)(""),Q=Object(s.a)(K,2),X=Q[0],ee=Q[1],te=Object(a.useState)(h.a.parse(null===n||void 0===n?void 0:n.search).seller),ne=Object(s.a)(te,2),ce=ne[0],se=(ne[1],Object(a.useState)(null)),ae=Object(s.a)(se,2),re=ae[0],ie=ae[1];return Object(a.useEffect)((function(){var e;fetch("/api/getProducts".concat(null===(e=i.location)||void 0===e?void 0:e.search)).then((function(e){return e.json()})).then((function(e){"ok"===e.code?(g(e.total),W(e.products),e.seller?(ie(e.seller),e.categories&&m(e.categories)):ie(null)):$(Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("button",{onClick:function(){return $(null)},children:"Okay"}),Object(O.jsxs)("div",{children:[Object(O.jsx)(r.i,{}),Object(O.jsx)("h4",{children:"Could not get products. Please try again."})]})]}))})).catch((function(e){console.log(e),$(Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("button",{onClick:function(){return $(null)},children:"Okay"}),Object(O.jsxs)("div",{children:[Object(O.jsx)(r.i,{}),Object(O.jsx)("h4",{children:"Could not get products. Make sure you're online."})]})]}))}))}),[null===(t=i.location)||void 0===t?void 0:t.search]),Object(a.useEffect)((function(){i.replace({pathname:i.location.pathname,search:"?"+new URLSearchParams(Object(c.a)(Object(c.a)(Object(c.a)({},ce&&{seller:ce}),{},{q:q,page:Y,perPage:_,sort:E.column,order:E.order},S&&{type:S}),X&&{category:X})).toString()})}),[_,Y,q,E,ce,S,X]),Object(O.jsxs)("div",{className:"generic marketplace",children:[Object(O.jsx)(r.m,{}),"seller"===j&&Object(O.jsx)(o.a,{to:"/account/myShop/products"}),Object(O.jsx)("div",{style:{display:"none"},children:Object(O.jsx)(r.F,{})}),Object(O.jsx)("div",{className:"benner",children:Object(O.jsx)("h1",{children:"Delivery Pay Marketplace"})}),Object(O.jsxs)("div",{className:"content",children:[Object(O.jsx)("div",{className:"sidebar",children:Object(O.jsxs)("div",{className:"categories",children:[Object(O.jsxs)("p",{className:"label",children:["Categories"," ",X&&Object(O.jsx)("button",{className:"clear",onClick:function(){return ee("")},children:Object(O.jsx)(r.F,{})})]}),Object(O.jsxs)("ul",{children:[f.map((function(e){return Object(O.jsx)("li",{className:e===X?"active":"",onClick:function(){return ee(e)},children:e},e)})),0===f.length&&Object(O.jsx)("li",{className:"placeholder",children:"No category found."})]})]})}),Object(O.jsxs)("div",{className:"mainContent",children:[re&&Object(O.jsxs)("div",{className:"sellerDetail",children:["Products from"," ",Object(O.jsxs)("div",{className:"profile",children:[Object(O.jsx)(r.n,{src:re.profileImg||"/profile-user.jpg"}),Object(O.jsxs)("p",{className:"name",children:[re.firstName," ",re.lastName,Object(O.jsx)("span",{className:"contact",children:re.phone})]})]})]}),Object(O.jsxs)("div",{className:"filters",children:[Object(O.jsxs)("section",{children:[Object(O.jsx)("label",{children:"Per Page:"}),Object(O.jsx)(r.h,{defaultValue:0,options:[{label:"20",value:20},{label:"30",value:30},{label:"50",value:50}],onChange:function(e){return P(e.value)}})]}),Object(O.jsxs)("section",{className:"search",children:[Object(O.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"23",height:"23",viewBox:"0 0 23 23",children:Object(O.jsx)("path",{id:"Icon_ionic-ios-search","data-name":"Icon ionic-ios-search",d:"M27.23,25.828l-6.4-6.455a9.116,9.116,0,1,0-1.384,1.4L25.8,27.188a.985.985,0,0,0,1.39.036A.99.99,0,0,0,27.23,25.828ZM13.67,20.852a7.2,7.2,0,1,1,5.091-2.108A7.155,7.155,0,0,1,13.67,20.852Z",transform:"translate(-4.5 -4.493)",fill:"#707070",opacity:"0.74"})}),Object(O.jsx)("input",{value:q,onChange:function(e){I(e.target.value)},placeholder:"Search for products or services"}),q&&Object(O.jsx)("button",{onClick:function(){return I("")},children:Object(O.jsx)(r.F,{})})]}),Object(O.jsxs)("section",{className:"type",children:[Object(O.jsx)("label",{children:"Type:"}),Object(O.jsx)(r.h,{defaultValue:S,options:[{label:"All",value:""},{label:"Product",value:"product"},{label:"Service",value:"service"},{label:"Other",value:"other"}],onChange:function(e){return w(e.value)}})]}),Object(O.jsxs)("section",{className:"sort",children:[Object(O.jsx)("label",{children:"Sort by:"}),Object(O.jsx)(r.h,{defaultValue:0,options:[{label:"popularity",value:{column:"popularity",order:"dsc"}},{label:"Price high-low",value:{column:"price",order:"dsc"}},{label:"Price low-high",value:{column:"price",order:"asc"}}],onChange:function(e){return V(e.value)}})]})]}),Object(O.jsxs)("div",{className:"products ".concat(0===Z.length?"empty":""),children:[Z.map((function(e){return Object(O.jsx)(x,{data:e},e._id)})),0===Z.length&&Object(O.jsxs)("div",{className:"placeholder",children:[Object(O.jsx)(r.n,{src:"/open_box.png"}),Object(O.jsx)("p",{children:"No Product Found"})]})]})]}),Object(O.jsx)(d.b,{className:"msg",open:z,children:z})]}),Object(O.jsx)(r.l,{})]})}},48:function(e,t,n){"use strict";n.r(t),n.d(t,"ProfileAvatar",(function(){return At})),n.d(t,"MilestoneForm",(function(){return Tt}));var c=n(12),s=n(4),a=n(3),r=n(1),i=n(9),l=n(18),o=n(6),j=n(5),d=n(2),u=n(35),b=n(24),h=n(23),O=n.n(h),x=n(17),f=n.n(x),m=n(0),p=Object(r.lazy)((function(){return Promise.resolve().then(n.t.bind(null,52,7))}));n(148);var v=function(e){var t,n=e.milestone;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:"clientDetail",children:[Object(m.jsxs)("div",{className:"profile",children:[Object(m.jsx)(d.n,{src:n.client.profileImg||"/profile-user.jpg"}),Object(m.jsx)("p",{className:"name",children:n.client.firstName+" "+n.client.lastName})]}),Object(m.jsx)("div",{className:"milestoneDetail",children:Object(m.jsxs)("ul",{children:[Object(m.jsxs)("li",{children:[Object(m.jsx)("p",{children:"Date"}),"-",Object(m.jsx)("p",{children:Object(m.jsx)(p,{format:"DD MMM, YYYY. hh:mm a",children:n.createdAt})})]}),Object(m.jsxs)("li",{children:[Object(m.jsx)("p",{children:"Role"}),"-",Object(m.jsx)("p",{className:"role",children:n.role})]}),Object(m.jsxs)("li",{children:[Object(m.jsx)("p",{children:"Desciption"}),"-",Object(m.jsx)("p",{children:n.dscr})]}),Object(m.jsxs)("li",{children:[Object(m.jsx)("p",{children:"Transaction ID"}),"-",Object(m.jsx)("p",{children:n._id})]}),Object(m.jsxs)("li",{className:"status",children:[Object(m.jsx)("p",{children:"Status"}),"-",Object(m.jsx)("p",{children:n.status})]})]})})]}),Object(m.jsxs)("ul",{className:"steps ".concat(n.status," ").concat(null===(t=n.dispute)||void 0===t?void 0:t.status),children:[Object(m.jsxs)("li",{className:"step pending",children:[Object(m.jsxs)("div",{className:"icons",children:[Object(m.jsx)(d.z,{className:"default"}),Object(m.jsx)(d.x,{className:"blank"}),Object(m.jsx)(d.y,{className:"filled"})]}),Object(m.jsx)("p",{children:"Deposite recieved"})]}),Object(m.jsxs)("li",{className:"progress pending",children:[Object(m.jsx)(d.u,{}),Object(m.jsx)(d.v,{}),Object(m.jsx)(d.w,{})]}),Object(m.jsxs)("li",{className:"step onhold",children:[Object(m.jsxs)("div",{className:"icons",children:[Object(m.jsx)(d.z,{className:"default"}),Object(m.jsx)(d.x,{className:"blank"}),Object(m.jsx)(d.y,{className:"filled"})]}),Object(m.jsx)("p",{children:"Funds on Hold"})]}),Object(m.jsxs)("li",{className:"progress onhold",children:[Object(m.jsx)(d.u,{}),Object(m.jsx)(d.v,{}),Object(m.jsx)(d.w,{})]}),Object(m.jsxs)("li",{className:"step released",children:[Object(m.jsxs)("div",{className:"icons",children:[Object(m.jsx)(d.z,{className:"default"}),Object(m.jsx)(d.x,{className:"blank"}),Object(m.jsx)(d.y,{className:"filled"})]}),Object(m.jsx)("p",{children:"Released"})]})]})]})},g=function(e){var t,n,c,i,o,b,h=e.milestone,O=e.setMilestones,x=(Object(l.g)(),Object(r.useState)(!1)),f=Object(a.a)(x,2),p=f[0],g=f[1],y=Object(r.useState)(!1),k=Object(a.a)(y,2),N=k[0],C=k[1],S=Object(r.useState)(null),w=Object(a.a)(S,2),M=w[0],D=w[1],_=null,P=null;(null===(t=h.dispute)||void 0===t?void 0:t.plaintiff._id)===h.client._id?(_=null===(i=h.dispute)||void 0===i||null===(o=i.defendant)||void 0===o||null===(b=o.case)||void 0===b?void 0:b.dscr,P="client"):(null===(n=h.dispute)||void 0===n?void 0:n.defendant._id)===h.client._id&&(P="self");var F=function(){fetch("/api/approveMilestone",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({milestone_id:h._id,amount:h.amount})}).then((function(e){return e.json()})).then((function(e){"ok"===e.code?O((function(t){return t.map((function(t){return t._id===e.milestone._id?Object(s.a)(Object(s.a)({},e.milestone),{},{client:h.client,role:h.role}):t}))})):403===e.code?D(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return D(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Could not approve milestone due to low balance."})]})]})):D(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return D(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Could not approve milestone. Please try again."})]})]}))})).catch((function(e){console.log(e),D(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return D(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Could not approve milestone. Make sure you're online"})]})]}))}))};return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("li",{className:"milestone seller",children:[Object(m.jsx)(v,{milestone:h}),Object(m.jsxs)("div",{className:"clas",children:[Object(m.jsxs)("h4",{children:["\u20b9",h.amount]}),Object(m.jsxs)("div",{className:"btns",children:["pending"===h.status&&Object(m.jsx)("a",{onClick:function(){return Object(j.a)({label:"Milestone Approval",question:"You sure want to approve this milestone?",callback:F})},children:"Approve"}),"pendingRelease"===h.status&&Object(m.jsx)("a",{className:"released",children:"Release requested"}),("inProgress"===h.status||"pendingRelease"===h.status)&&Object(m.jsx)("a",{onClick:function(){return g(!0)},children:"Release"}),"released"===h.status&&Object(m.jsx)("a",{className:"dispute",onClick:function(){return C(!0)},children:"Raise Dispute"}),("client"===P&&_||"self"===P)&&Object(m.jsxs)("a",{className:"disputed",children:["Dispute ",null===(c=h.dispute)||void 0===c?void 0:c.status]}),"client"===P&&!_&&Object(m.jsx)("a",{className:"disputeRes",onClick:function(){return C(!0)},children:"Approve Dispute"}),"declined"===h.status&&Object(m.jsx)("a",{className:"disputed",children:"Declined"}),Object(m.jsx)(j.b,{open:M,className:"msg",children:M})]})]}),Object(m.jsx)(j.b,{open:p,head:!0,label:"Release Money",setOpen:g,className:"milestoneReleaseForm",children:Object(m.jsx)(u.c,{milestone:h,setReleaseForm:g,onSuccess:function(e){O((function(t){return t.map((function(t){return t._id===e._id?Object(s.a)(Object(s.a)({},e),{},{client:t.client,role:t.role}):t}))})),g(!1),D(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return D(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.A,{}),Object(m.jsxs)("h4",{className:"amount",children:["\u20b9",e.amount]}),Object(m.jsx)("h4",{children:"Milestone has been released."})]})]}))}})}),Object(m.jsx)(j.b,{open:N,head:!0,label:"Raise Dispute",setOpen:C,className:"disputeForm",children:Object(m.jsx)(u.b,{milestone:h,setDisputeForm:C,onSuccess:function(e){O((function(t){return t.map((function(t){return t._id===e._id?Object(s.a)(Object(s.a)({},e),{},{client:t.client,role:t.role}):t}))})),C(!1),D(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return D(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.A,{}),Object(m.jsx)("h4",{children:"client"===P?"Case submit success. Dispute pending for verdict.":"Dispute filed succefully."})]})]}))}})})]},h._id),Object(m.jsx)(j.b,{className:"msg",open:M,children:M})]})},y=function(e){var t,n,c,i,l,o,b=e.milestone,h=e.setMilestones,O=Object(r.useState)(!1),x=Object(a.a)(O,2),f=x[0],p=x[1],g=Object(r.useState)(null),y=Object(a.a)(g,2),k=y[0],N=y[1],C=null,S=null;(null===(t=b.dispute)||void 0===t?void 0:t.plaintiff._id)===b.client._id?(C=null===(i=b.dispute)||void 0===i||null===(l=i.defendant)||void 0===l||null===(o=l.case)||void 0===o?void 0:o.dscr,S="client"):(null===(n=b.dispute)||void 0===n?void 0:n.defendant._id)===b.client._id&&(S="self");var w=function(){fetch("/api/declineMilestone",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({_id:b._id})}).then((function(e){return e.json()})).then((function(e){"ok"===e.code?(h((function(t){return t.map((function(t){return t._id===e.milestone._id?Object(s.a)(Object(s.a)({},e.milestone),{},{client:b.client,role:b.role}):t}))})),N(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return N(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.A,{}),Object(m.jsx)("h4",{children:"Milestone succefully declined."})]})]}))):N(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return N(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Milestone succefully declined."})]})]}))})).catch((function(e){console.log(e),N(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return N(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Could not decline milestone. Make sure you're online"})]})]}))}))},M=function(){fetch("/api/cancelMilestoneRequest",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({_id:b._id})}).then((function(e){return e.json()})).then((function(e){"ok"===e.code?(h((function(e){return e.filter((function(e){return e._id!==b._id}))})),N(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return N(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.A,{}),Object(m.jsx)("h4",{children:"Milestone request cancelled."})]})]}))):N(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return N(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Could not cancel milestone request. Try again."})]})]}))})).catch((function(e){console.log(e),N(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return N(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Could not cancel milestone request. Make sure you're online."})]})]}))}))},D=function(){fetch("/api/requestRelease",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({_id:b._id})}).then((function(e){return e.json()})).then((function(e){"ok"===e.code?(h((function(t){return t.map((function(t){return t._id===e.milestone._id?Object(s.a)(Object(s.a)({},e.milestone),{},{client:b.client,role:b.role}):t}))})),N(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return N(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.A,{}),Object(m.jsx)("h4",{children:"Milestone request cancelled."})]})]}))):N(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return N(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Could not request release. Try again."})]})]}))})).catch((function(e){console.log(e),N(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return N(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Could not request release. Make sure you're online."})]})]}))}))};return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("li",{className:"milestone buyer",children:[Object(m.jsx)(v,{milestone:b}),Object(m.jsxs)("div",{className:"clas",children:[Object(m.jsxs)("h4",{children:["\u20b9",b.amount]}),Object(m.jsxs)("div",{className:"btns",children:["pendingRelease"===b.status&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("a",{className:"released",children:"Release requested"}),Object(m.jsx)("a",{className:"dispute",onClick:function(){return p(!0)},children:"Raise Dispute"})]}),"pending"===b.status&&Object(m.jsx)("a",{className:"disputeRes",onClick:function(){return Object(j.a)({label:"Cancel Milestone request",question:"You sure want to cancel this request?",callback:M})},children:"Cancel Request"}),"released"===b.status&&Object(m.jsx)("a",{className:"released",children:"Released"}),("client"===S&&C||"self"===S)&&Object(m.jsxs)("a",{className:"disputed",children:["Dispute ",null===(c=b.dispute)||void 0===c?void 0:c.status]}),"client"===S&&!C&&Object(m.jsx)("a",{className:"disputeRes",onClick:function(){return p(!0)},children:"Approve Dispute"}),"inProgress"===b.status&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("a",{onClick:function(){return Object(j.a)({label:"Request Release",question:"You sure want to request release of this milestone?",callback:D})},children:"Request Release"}),Object(m.jsx)("a",{className:"disputeRes",onClick:function(){return Object(j.a)({label:"Decline Milestone",question:"You sure want to decline this milestone?",callback:w})},children:"Decline"})]}),"declined"===b.status&&Object(m.jsx)("a",{className:"disputed",children:"Declined"})]})]}),Object(m.jsx)(j.b,{open:f,head:!0,label:"Raise Dispute",setOpen:p,className:"disputeForm",children:Object(m.jsx)(u.b,{milestone:b,setDisputeForm:p,onSuccess:function(e){h((function(t){return t.map((function(t){return t._id===e._id?Object(s.a)(Object(s.a)({},e),{},{client:t.client,role:t.role}):t}))})),p(!1),N(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return N(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.A,{}),Object(m.jsx)("h4",{children:"client"===S?"Case submit success. Dispute pending for verdict.":"Dispute filed succefully."})]})]}))}})})]},b._id),Object(m.jsx)(j.b,{className:"msg",open:k,children:k})]})},k=function(e){var t,n=e.history,c=e.location,l=(e.match,Object(r.useContext)(i.d).userType),o=Object(r.useRef)(),u=Object(r.useState)([]),h=Object(a.a)(u,2),x=h[0],v=h[1],k=Object(r.useState)(null),N=Object(a.a)(k,2),C=N[0],S=N[1],w=Object(r.useState)(O.a.parse(c.search).page||1),M=Object(a.a)(w,2),D=M[0],_=M[1],P=Object(r.useState)(O.a.parse(c.search).perPage||20),F=Object(a.a)(P,2),A=F[0],Y=F[1],T=Object(r.useState)((null===(t=O.a.parse(c.search).q)||void 0===t?void 0:t.replace(/\/(?!.*\/).*/,""))||""),R=Object(a.a)(T,2),q=R[0],I=R[1],L=Object(r.useState)(O.a.parse(c.search).status||""),B=Object(a.a)(L,2),E=B[0],V=B[1],H=Object(r.useState)(!1),U=Object(a.a)(H,2),Z=U[0],W=U[1],G=Object(r.useState)({startDate:new Date,endDate:new Date}),J=Object(a.a)(G,2),z=J[0],$=J[1],K=Object(r.useState)({column:O.a.parse(c.search).sort||"createdAt",order:O.a.parse(c.search).order||"dsc"}),Q=Object(a.a)(K,2),X=Q[0],ee=(Q[1],Object(r.useState)(!1)),te=Object(a.a)(ee,2),ne=te[0],ce=te[1],se=Object(r.useState)({}),ae=Object(a.a)(se,2),re=ae[0],ie=ae[1],le=Object(r.useState)(""),oe=Object(a.a)(le,2),je=(oe[0],oe[1],Object(r.useState)(null)),de=Object(a.a)(je,2),ue=de[0],be=de[1];return Object(r.useEffect)((function(){fetch("/api/milestone".concat(c.search)).then((function(e){return e.json()})).then((function(e){"ok"===e.code&&(v(e.milestones),S(e.total))})).catch((function(e){console.log(e),be(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return be(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Could not update milestones."})]})]}))}))}),[c.search,l]),Object(r.useEffect)((function(){var e=f()(z.startDate).format("YYYY-MM-DD"),t=(f()(z.endDate).format("YYYY-MM-DD"),f()(new Date(z.endDate).setDate(z.endDate.getDate()+1)).format("YYYY-MM-DD"));n.replace({pathname:c.pathname,search:"?"+new URLSearchParams(Object(s.a)(Object(s.a)(Object(s.a)({page:D,perPage:A,sort:X.column,order:X.order},q&&{q:q}),ne&&{dateFrom:e,dateTo:t}),E&&{status:E})).toString()})}),[D,A,X.column,X.order,q,ne,E,l]),Object(r.useLayoutEffect)((function(){var e=o.current.getBoundingClientRect(),t=e.height,n=e.y,c=e.width,s=e.x;ie({position:"fixed",top:t+n+4,right:window.innerWidth-s-c})}),[]),Object(m.jsxs)("div",{className:"holdContainer",children:[Object(m.jsx)("div",{style:{display:"none"},children:Object(m.jsx)(d.F,{})}),Object(m.jsxs)("div",{className:"benner",children:[Object(m.jsx)("h4",{children:"Secure your transactions"}),Object(m.jsx)("p",{children:"All payments and transactions come here"})]}),Object(m.jsx)("div",{className:"head",children:Object(m.jsxs)("div",{className:"filters",children:[Object(m.jsxs)("section",{children:[Object(m.jsx)("label",{children:"Total:"}),C]}),Object(m.jsxs)("section",{children:[Object(m.jsx)("label",{children:"Per Page:"}),Object(m.jsx)(d.h,{defaultValue:0,options:[{label:"20",value:20},{label:"30",value:30},{label:"50",value:50}],onChange:function(e){return Y(e.value)}})]}),Object(m.jsxs)("section",{className:"search",children:[Object(m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"23",height:"23",viewBox:"0 0 23 23",children:Object(m.jsx)("path",{id:"Icon_ionic-ios-search","data-name":"Icon ionic-ios-search",d:"M27.23,25.828l-6.4-6.455a9.116,9.116,0,1,0-1.384,1.4L25.8,27.188a.985.985,0,0,0,1.39.036A.99.99,0,0,0,27.23,25.828ZM13.67,20.852a7.2,7.2,0,1,1,5.091-2.108A7.155,7.155,0,0,1,13.67,20.852Z",transform:"translate(-4.5 -4.493)",fill:"#707070",opacity:"0.74"})}),Object(m.jsx)("input",{value:q,onChange:function(e){return I(e.target.value)},placeholder:"Search Buyer's or Seller's name, phone, Milestone ID"}),q&&Object(m.jsx)("button",{onClick:function(){return I("")},children:Object(m.jsx)(d.F,{})})]}),Object(m.jsxs)("section",{className:"status",children:[Object(m.jsx)("label",{children:"Status:"}),Object(m.jsx)(d.h,{defaultValue:E||0,options:[{label:"All",value:""},{label:"In Progress",value:"inProgress"},{label:"Pending",value:"pending"},{label:"Release requested",value:"pendingRelease"},{label:"Released",value:"released"},{label:"Dispute",value:"dispute"}],onChange:function(e){return V(e.value)}})]}),Object(m.jsxs)("section",{className:"date ".concat(ne?"open":""),ref:o,onClick:function(){return W(!0)},children:[Object(m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"30.971",height:"30.971",viewBox:"0 0 30.971 30.971",children:Object(m.jsx)("path",{id:"Path_299","data-name":"Path 299",d:"M3.992,2.42H6.775V.968a.968.968,0,1,1,1.936,0V2.42H22.26V.968a.968.968,0,1,1,1.936,0V2.42h2.783a4,4,0,0,1,3.992,3.992V26.978a4,4,0,0,1-3.992,3.992H3.992A4,4,0,0,1,0,26.978V6.412A4,4,0,0,1,3.992,2.42ZM26.978,4.355H24.2v.968a.968.968,0,1,1-1.936,0V4.355H8.71v.968a.968.968,0,1,1-1.936,0V4.355H3.992A2.059,2.059,0,0,0,1.936,6.412v2.3h27.1v-2.3A2.059,2.059,0,0,0,26.978,4.355ZM3.992,29.035H26.978a2.059,2.059,0,0,0,2.057-2.057V10.646H1.936V26.978A2.059,2.059,0,0,0,3.992,29.035Z",fill:"#336cf9"})}),ne&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:"dates",children:[Object(m.jsxs)("p",{children:["From:"," ",Object(m.jsx)(p,{format:"DD MMM, YYYY",children:z.startDate})]}),Object(m.jsxs)("p",{children:["To:"," ",Object(m.jsx)(p,{format:"DD MMM, YYYY",children:z.endDate})]})]}),Object(m.jsx)("button",{className:"clearDateFilter",onClick:function(){$({startDate:new Date,endDate:new Date}),ce(!1)},children:Object(m.jsx)(d.F,{})})]})]})]})}),Object(m.jsxs)("ul",{className:"milestones",children:[x.map((function(e,t){return"seller"===e.role?Object(m.jsx)(g,{milestone:e,setMilestones:v},t):Object(m.jsx)(y,{milestone:e,setMilestones:v},t)})),0===x.length&&Object(m.jsx)("p",{className:"placeholder",children:"No transaction yet."})]}),Object(m.jsx)(d.s,{total:C,perPage:A,currentPage:D,btns:5,setPage:_}),Object(m.jsx)(j.b,{className:"msg",open:ue,children:ue}),Object(m.jsx)(j.b,{open:Z,onBackdropClick:function(){return W(!1)},className:"datePicker",backdropClass:"datePicker",style:re,children:Object(m.jsx)(b.DateRange,{className:"dateRange",ranges:[z],onChange:function(e){$(e.range1),e.range1.endDate!==e.range1.startDate&&(W(!1),ce(!0))}})})]})},N=Object(r.lazy)((function(){return Promise.resolve().then(n.t.bind(null,52,7))})),C=function(e){var t,n,c,s,a=e.transaction,l=Object(r.useContext)(i.d).user;return Object(m.jsxs)("li",{className:"transaction ".concat(a.amount>0?"in":"out"),children:[Object(m.jsx)("div",{className:"transactionDetail",children:Object(m.jsx)("div",{className:"profile",children:a.client?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(d.n,{src:(null===(t=a.client._id)||void 0===t?void 0:t.profileImg)||"/profile-user.jpg"}),Object(m.jsx)("p",{className:"name",children:a.client.firstName+" "+a.client.lastName})]}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(d.n,{src:l.profileImg||"/profile-user.jpg"}),Object(m.jsx)("p",{className:"name",children:l.firstName+" "+l.lastName})]})})}),Object(m.jsxs)("ul",{children:[Object(m.jsxs)("li",{children:[Object(m.jsx)("p",{children:"Role"}),"-",Object(m.jsx)("p",{className:"role",children:a.amount>0?"Seller":"Buyer"})]}),Object(m.jsxs)("li",{children:[Object(m.jsx)("p",{children:"Product detail"}),"-",Object(m.jsx)("p",{children:a.dscr||"-"})]}),Object(m.jsxs)("li",{children:[Object(m.jsx)("p",{children:"Transaction ID"}),"-",Object(m.jsx)("p",{children:a._id})]})]}),Object(m.jsxs)("ul",{className:"amountDate",children:[Object(m.jsxs)("li",{children:[Object(m.jsx)("p",{children:"Amount"}),"-",Object(m.jsxs)("p",{className:"amount",children:["\u20b9",a.amount.fix()]})]}),Object(m.jsxs)("li",{children:[Object(m.jsx)("p",{children:"Hold Date"}),"-",Object(m.jsx)("p",{children:Object(m.jsx)(N,{format:"MMM DD, YYYY, hh:mm a",children:a.createdAt})})]}),Object(m.jsxs)("li",{children:[Object(m.jsx)("p",{children:"Released Date"}),"-",Object(m.jsx)("p",{children:Object(m.jsx)(N,{format:"MMM DD, YYYY, hh:mm a",children:(null===(n=a.milestoneId)||void 0===n?void 0:n.releaseDate)||"--"})})]})]}),Object(m.jsxs)("ul",{className:"statusMethod",children:[Object(m.jsxs)("li",{children:[Object(m.jsx)("p",{children:"Status"}),"-",Object(m.jsx)("p",{className:"status",children:(null===(c=a.milestoneId)||void 0===c?void 0:c.status)||"--"})]}),Object(m.jsxs)("li",{children:[Object(m.jsx)("p",{children:"Released to"}),"-",Object(m.jsx)("p",{children:a.amount<0?"Seller":"--"})]}),Object(m.jsxs)("li",{children:[Object(m.jsx)("p",{children:"Verification Method"}),"-",Object(m.jsx)("p",{children:(null===(s=a.milestoneId)||void 0===s?void 0:s.verification)||"--"})]})]})]})},S=function(e){e.history,e.location,e.match;var t=Object(r.useState)([]),n=Object(a.a)(t,2),c=n[0],s=n[1],i=Object(r.useState)(null),l=Object(a.a)(i,2),o=l[0],u=l[1];return Object(r.useEffect)((function(){fetch("/api/transactions?type=P2PTransaction").then((function(e){if(200===e.status)return e.json()})).then((function(e){e&&s(e)})).catch((function(e){console.log(e),u(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return u(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Could not get transactions."})]})]}))}))}),[]),Object(m.jsxs)("div",{className:"transactionContainer",children:[Object(m.jsx)("p",{className:"benner",children:"Completed Delivery pay Hold Transactions"}),Object(m.jsxs)("ul",{className:"transactions",children:[c.map((function(e){return Object(m.jsx)(C,{transaction:e},e._id)})),0===c.length&&Object(m.jsx)("p",{className:"placeholder",children:"No transaction yet."})]}),Object(m.jsx)(j.b,{className:"msg",open:o,children:o})]})},w=Object(r.lazy)((function(){return Promise.resolve().then(n.t.bind(null,52,7))}));function M(){var e=f()().format("HH");return e>=3&&e<12?"Good Morning":e>=12&&e<15?"Good Afternoon":e>=15&&e<20?"Good Evening":e>=20&&e<3?"Good Night":"Hello"}var D=function(e){var t,n,c=e.data,s=(null===(t=c.sort((function(e,t){return e.balance<t.balance?1:-1}))[0])||void 0===t||null===(n=t.balance)||void 0===n?void 0:n.fix())||0;return Object(m.jsxs)("div",{className:"graph",children:[Object(m.jsx)("p",{className:"label",children:"Analytics"}),Object(m.jsx)("ul",{className:"bars","data-max":"\u20b9 ".concat(s||0),children:c.map((function(e,t){return Object(m.jsxs)("li",{children:[Object(m.jsx)("div",{className:"bar",style:{height:"".concat(e.balance/(s/100),"%")}}),Object(m.jsx)("label",{className:"month",children:e._id})]},t)}))})]})},_=function(e){var t=e.label,n=e.action,c=Object(r.useContext)(i.d),s=c.user;c.setUser;return Object(m.jsxs)("div",{className:"paymentOptions",children:[Object(m.jsx)("p",{className:"label",children:t}),Object(m.jsxs)("div",{className:"options",children:[s.paymentMethods.map((function(e,t){return Object(m.jsxs)(r.Fragment,{children:["BankCard"===e.__t&&Object(m.jsx)(Y,{card:e,onClick:function(e){return n(e)}}),"BankAccount"===e.__t&&Object(m.jsx)(T,{account:e,onClick:function(e){return n(e)}})]},e._id)})),0===s.paymentMethods.length&&Object(m.jsx)("div",{className:"placeholder",children:"No payment method added."})]}),Object(m.jsx)(o.b,{className:"addMethodLink",to:"addMoney/addPaymentMethod",children:"Add payment method"})]})},P=function(e){var t=e.onSuccess,n=Object(r.useState)("netBanking"),c=Object(a.a)(n,2),s=c[0],i=c[1];return Object(m.jsx)("div",{className:"addPaymentMethod",children:Object(m.jsxs)("section",{className:"paymentOption",children:[Object(m.jsxs)("div",{className:"header",onClick:function(){return i("netBanking")},children:[Object(m.jsx)("div",{className:"redial ".concat("netBanking"===s&&"active"),children:Object(m.jsx)("div",{className:"fill"})}),Object(m.jsx)("label",{children:"Net Banking"})]}),"netBanking"===s&&Object(m.jsx)(A,{onSuccess:t})]})})},F=function(e){var t=e.prefill,n=e.onSuccess,l=Object(r.useContext)(i.d).setUser,o=Object(r.useState)((null===t||void 0===t?void 0:t.brand)||null),u=Object(a.a)(o,2),b=u[0],h=u[1],O=Object(r.useState)((null===t||void 0===t?void 0:t.nameOnCard)||""),x=Object(a.a)(O,2),f=x[0],p=x[1],v=Object(r.useState)((null===t||void 0===t?void 0:t.cardNumber)||""),g=Object(a.a)(v,2),y=g[0],k=g[1],N=Object(r.useState)(""),C=Object(a.a)(N,2),S=C[0],w=C[1],M=Object(r.useState)(""),D=Object(a.a)(M,2),_=D[0],P=D[1],F=Object(r.useState)((null===t||void 0===t?void 0:t.cvv)||""),A=Object(a.a)(F,2),Y=A[0],T=A[1],R=Object(r.useState)(!1),q=Object(a.a)(R,2),I=q[0],L=q[1],B=function(){for(var e=(new Date).getFullYear(),t=[],n=0;n<15;n++)t.push({label:e+n,value:(e+n).toString().substr(2)});return t}(),E=Object(r.useState)(null),V=Object(a.a)(E,2),H=V[0],U=V[1];Object(r.useEffect)((function(){}),[_,S]);return Object(m.jsxs)("form",{className:"paymentMethodForm bankCard",onSubmit:function(e){if(e.preventDefault(),null===b)return L(!0),void setTimeout((function(){return L(!1)}),1500);fetch(t?"/api/editPaymentMethod":"/api/addPaymentMethod",{method:t?"PATCH":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object(s.a)({type:"BankCard",brand:b,nameOnCard:f,cardNumber:y,exp:"".concat(S,"/").concat(_),cvv:Y},t&&{_id:t._id}))}).then((function(e){return e.json()})).then((function(e){var a=e.paymentMethod;a?(l(t?function(e){return Object(s.a)(Object(s.a)({},e),{},{paymentMethods:e.paymentMethods.map((function(e){return e._id===a._id?a:e}))})}:function(e){return Object(s.a)(Object(s.a)({},e),{},{paymentMethods:[].concat(Object(c.a)(e.paymentMethods),[a])})}),null===n||void 0===n||n(a)):U(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return U(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsxs)("h4",{children:["Payment method could not be ",t?"updated":"added",". Please try again."]})]})]}))})).catch((function(e){console.log(e),U(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return U(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Error happaned. Make sure you're online."})]})]}))}))},children:[!t&&Object(m.jsx)("p",{className:"note",children:"We\u2019ll save this card for your convenience. Remove it by going to Your Account section"}),Object(m.jsxs)("section",{className:"inputs",children:[Object(m.jsx)("input",{type:"text",name:"name",placeholder:"Name on your card",value:f,onChange:function(e){return p(e.target.value)},required:!0}),Object(m.jsx)("input",{type:"number",name:"cardNumber",placeholder:"Card Number",value:y,onChange:function(e){e.target.value.match(/^3[47][0-9]{13}$/)?h("amex"):e.target.value.match(/^4[0-9]{12}(?:[0-9]{3})?$$/)?h("visa"):e.target.value.match(/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14})$/)?h("masterCard"):h(null),k(e.target.value)},required:!0}),Object(m.jsxs)("section",{className:"exp",children:[Object(m.jsx)("label",{children:"Expiry Date"}),Object(m.jsx)(d.h,{placeholder:"Month",options:[{label:"Jan",value:"01"},{label:"Feb",value:"02"},{label:"Mar",value:"03"},{label:"Apr",value:"04"},{label:"May",value:"05"},{label:"Jun",value:"06"},{label:"Jul",value:"07"},{label:"Aug",value:"08"},{label:"Sep",value:"09"},{label:"Oct",value:"10"},{label:"Nov",value:"11"},{label:"Dec",value:"12"}],required:!0,onChange:function(e){return w(e.value)}}),Object(m.jsx)(d.h,{placeholder:"Year",options:B,required:!0,onChange:function(e){return P(e.value)}})]}),Object(m.jsxs)("section",{className:"cvv",children:[Object(m.jsx)("label",{children:"CVV"}),Object(m.jsx)("input",{type:"number",name:"cvv",required:!0,value:Y,onChange:function(e){return T(e.target.value)}})]})]}),Object(m.jsx)("button",{children:"Save"}),I&&Object(m.jsx)("p",{className:"cardErr",children:"Enter valid Visa/MasterCard"}),Object(m.jsx)(j.b,{className:"msg",open:H,children:H})]})},A=function(e){var t=e.prefill,n=e.onSuccess,l=Object(r.useContext)(i.d).setUser,o=Object(r.useState)((null===t||void 0===t?void 0:t.bank)||""),u=Object(a.a)(o,2),b=u[0],h=u[1],O=Object(r.useState)((null===t||void 0===t?void 0:t.name)||""),x=Object(a.a)(O,2),f=x[0],p=x[1],v=Object(r.useState)((null===t||void 0===t?void 0:t.ifsc)||""),g=Object(a.a)(v,2),y=g[0],k=g[1],N=Object(r.useState)((null===t||void 0===t?void 0:t.city)||""),C=Object(a.a)(N,2),S=C[0],w=C[1],M=Object(r.useState)((null===t||void 0===t?void 0:t.type)||""),D=Object(a.a)(M,2),_=D[0],P=D[1],F=Object(r.useState)(null),A=Object(a.a)(F,2),Y=A[0],T=A[1],R=Object(r.useState)((null===t||void 0===t?void 0:t.accountNumber)||""),q=Object(a.a)(R,2),I=q[0],L=q[1];return Object(m.jsxs)("form",{className:"paymentMethodForm netBanking",onSubmit:function(e){e.preventDefault(),fetch(t?"/api/editPaymentMethod":"/api/addPaymentMethod",{method:t?"PATCH":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object(s.a)({type:"BankAccount",name:f,bank:b,ifsc:y,accountNumber:I,city:S,accountType:_},t&&{_id:t._id}))}).then((function(e){return e.json()})).then((function(e){var a=e.paymentMethod;a?(l(t?function(e){return Object(s.a)(Object(s.a)({},e),{},{paymentMethods:e.paymentMethods.map((function(e){return e._id===a._id?a:e}))})}:function(e){return Object(s.a)(Object(s.a)({},e),{},{paymentMethods:[].concat(Object(c.a)(e.paymentMethods),[a])})}),null===n||void 0===n||n(a)):T(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return T(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Could not update payment method. Please try again."})]})]}))})).catch((function(e){console.log(e),T(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return T(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Could not updated payment method. Make sure you're online."})]})]}))}))},children:[Object(m.jsxs)("section",{className:"inputs",children:[Object(m.jsx)("input",{type:"text",name:"name",placeholder:"Full name",value:f,onChange:function(e){return p(e.target.value)},required:!0}),Object(m.jsx)("input",{type:"text",name:"bank",placeholder:"Bank",value:b,onChange:function(e){return h(e.target.value)},required:!0}),Object(m.jsx)("input",{type:"text",name:"city",placeholder:"City",value:S,onChange:function(e){return w(e.target.value)},required:!0}),Object(m.jsx)("input",{type:"text",name:"type",placeholder:"Account type ie. Savings / Current",value:_,onChange:function(e){return P(e.target.value)},required:!0}),Object(m.jsx)("input",{type:"text",name:"accountNumber",placeholder:"Account Number",value:I,onChange:function(e){return L(e.target.value)},required:!0}),Object(m.jsx)("input",{type:"text",name:"ifsc",placeholder:"IFSC",value:y,onChange:function(e){return k(e.target.value)},required:!0})]}),Object(m.jsx)("button",{type:"submit",children:"Save"}),Object(m.jsx)(j.b,{open:Y,className:"msg",children:Y})]})},Y=function(e){var t=e.card,n=e.onClick;return Object(m.jsxs)("div",{className:"paymentMethod card",onClick:function(){return null===n||void 0===n?void 0:n(t)},children:[Object(m.jsx)(d.n,{className:"logo",src:"visa"===t.brand?"/payment_visa.png":"/payment_mc.png"}),Object(m.jsxs)("p",{className:"cardNumber",children:["**** **** **** **** ",t.cardNumber.substr(-4)]}),Object(m.jsx)("p",{className:"cardHolder",children:t.nameOnCard}),Object(m.jsx)("p",{className:"exp",children:t.exp})]})},T=function(e){var t=e.account,n=e.onClick;return Object(m.jsxs)("div",{className:"paymentMethod bankAccount",onClick:function(){return null===n||void 0===n?void 0:n(t)},children:[Object(m.jsx)("p",{className:"bank",children:t.bank}),Object(m.jsx)("p",{className:"name",children:t.name}),Object(m.jsx)("p",{className:"accountNumber",children:t.accountNumber}),Object(m.jsx)("p",{className:"ifsc",children:t.ifsc})]})},R=function(e){var t=e.paymentMethods,n=Object(r.useRef)(null),c=Object(r.useState)({}),s=Object(a.a)(c,2),i=s[0],l=s[1],o=Object(r.useState)({}),d=Object(a.a)(o,2),u=d[0],b=d[1],h=Object(r.useState)(0),O=Object(a.a)(h,2),x=O[0],f=O[1],p=Object(r.useState)(!1),v=Object(a.a)(p,2),g=v[0],y=v[1];return Object(r.useLayoutEffect)((function(){var e=n.current.getBoundingClientRect().width;l({width:e,height:.55*e}),b({transform:"translateX(".concat(-e*x,"px)")})}),[x]),Object(m.jsxs)("div",{className:"savedCards",children:[Object(m.jsxs)("div",{className:"wrapper",ref:n,children:[Object(m.jsxs)("ul",{className:"cards",style:u,children:[t.map((function(e,t){return Object(m.jsxs)("li",{style:i,children:[e._id&&"BankCard"===e.__t&&Object(m.jsx)(Y,{card:e}),e._id&&"BankAccount"===e.__t&&Object(m.jsx)(T,{account:e})]},t)})),0===t.length&&Object(m.jsx)("li",{style:i,children:Object(m.jsx)("p",{className:"placeholder",children:"Withdraw Payments"})})]}),Object(m.jsx)("button",{className:"addPaymentMethod",onClick:function(){return y(!0)},children:Object(m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"15.999",viewBox:"0 0 16 15.999",children:Object(m.jsx)("path",{id:"Union_1","data-name":"Union 1",d:"M-4613,16V9h-7V7h7V0h2V7h7V9h-7v7Z",transform:"translate(4620)",fill:"#2699fb"})})})]}),x>0&&Object(m.jsx)("button",{className:"prev",onClick:function(){return f((function(e){return e-1}))},children:Object(m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"31.818",height:"44.147",viewBox:"0 0 31.818 44.147",children:[Object(m.jsx)("defs",{children:Object(m.jsxs)("filter",{id:"Path_217",x:"0",y:"0",width:"31.818",height:"44.147",filterUnits:"userSpaceOnUse",children:[Object(m.jsx)("feOffset",{dx:"-3",dy:"3",input:"SourceAlpha"}),Object(m.jsx)("feGaussianBlur",{stdDeviation:"2.5",result:"blur"}),Object(m.jsx)("feFlood",{floodOpacity:"0.161"}),Object(m.jsx)("feComposite",{operator:"in",in2:"blur"}),Object(m.jsx)("feComposite",{in:"SourceGraphic"})]})}),Object(m.jsx)("g",{transform:"matrix(1, 0, 0, 1, 0, 0)",filter:"url(#Path_217)",children:Object(m.jsxs)("g",{id:"Path_217-2","data-name":"Path 217",transform:"translate(27.32 4.5) rotate(90)",fill:"#858585",children:[Object(m.jsx)("path",{d:"M 27.53220176696777 15.71776485443115 C 26.13888931274414 15.2262544631958 24.10462951660156 14.50919151306152 22.07958030700684 13.79734325408936 C 14.74783992767334 11.22007274627686 14.70039939880371 11.22007274627686 14.5736198425293 11.22007274627686 C 14.44684028625488 11.22007274627686 14.39939975738525 11.22007274627686 7.067659854888916 13.79734325408936 C 5.042610645294189 14.50919151306152 3.00835108757019 15.2262544631958 1.615038275718689 15.71776485443115 L 14.5736198425293 0.7635064125061035 L 27.53220176696777 15.71776485443115 Z",stroke:"none"}),Object(m.jsx)("path",{d:"M 14.5736198425293 1.526998519897461 L 3.229276657104492 14.61841773986816 C 4.349065780639648 14.22377777099609 5.627307891845703 13.77366733551025 6.901840209960938 13.32564258575439 C 14.31408023834229 10.72007274627686 14.33368015289307 10.72007274627686 14.5736198425293 10.72007274627686 C 14.81355953216553 10.72007274627686 14.83315944671631 10.72007274627686 22.24539947509766 13.32564258575439 C 23.51993179321289 13.77366733551025 24.79817390441895 14.22377777099609 25.9179630279541 14.61841773986816 L 14.5736198425293 1.526998519897461 M 14.5736198425293 1.9073486328125e-06 L 29.14723968505859 16.81802368164063 C 29.14723968505859 16.81802368164063 14.71584987640381 11.72007274627686 14.5736198425293 11.72007274627686 C 14.43138980865479 11.72007274627686 0 16.81802368164063 0 16.81802368164063 L 14.5736198425293 1.9073486328125e-06 Z",stroke:"none",fill:"#858585"})]})})]})}),x+1<t.length&&Object(m.jsx)("button",{className:"next",onClick:function(){return f((function(e){return e+1}))},children:Object(m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"31.818",height:"44.147",viewBox:"0 0 31.818 44.147",children:[Object(m.jsx)("defs",{children:Object(m.jsxs)("filter",{id:"Path_217",x:"0",y:"0",width:"31.818",height:"44.147",filterUnits:"userSpaceOnUse",children:[Object(m.jsx)("feOffset",{dx:"-3",dy:"3",input:"SourceAlpha"}),Object(m.jsx)("feGaussianBlur",{stdDeviation:"2.5",result:"blur"}),Object(m.jsx)("feFlood",{floodOpacity:"0.161"}),Object(m.jsx)("feComposite",{operator:"in",in2:"blur"}),Object(m.jsx)("feComposite",{in:"SourceGraphic"})]})}),Object(m.jsx)("g",{transform:"matrix(1, 0, 0, 1, 0, 0)",filter:"url(#Path_217)",children:Object(m.jsxs)("g",{id:"Path_217-2","data-name":"Path 217",transform:"translate(27.32 4.5) rotate(90)",fill:"#858585",children:[Object(m.jsx)("path",{d:"M 27.53220176696777 15.71776485443115 C 26.13888931274414 15.2262544631958 24.10462951660156 14.50919151306152 22.07958030700684 13.79734325408936 C 14.74783992767334 11.22007274627686 14.70039939880371 11.22007274627686 14.5736198425293 11.22007274627686 C 14.44684028625488 11.22007274627686 14.39939975738525 11.22007274627686 7.067659854888916 13.79734325408936 C 5.042610645294189 14.50919151306152 3.00835108757019 15.2262544631958 1.615038275718689 15.71776485443115 L 14.5736198425293 0.7635064125061035 L 27.53220176696777 15.71776485443115 Z",stroke:"none"}),Object(m.jsx)("path",{d:"M 14.5736198425293 1.526998519897461 L 3.229276657104492 14.61841773986816 C 4.349065780639648 14.22377777099609 5.627307891845703 13.77366733551025 6.901840209960938 13.32564258575439 C 14.31408023834229 10.72007274627686 14.33368015289307 10.72007274627686 14.5736198425293 10.72007274627686 C 14.81355953216553 10.72007274627686 14.83315944671631 10.72007274627686 22.24539947509766 13.32564258575439 C 23.51993179321289 13.77366733551025 24.79817390441895 14.22377777099609 25.9179630279541 14.61841773986816 L 14.5736198425293 1.526998519897461 M 14.5736198425293 1.9073486328125e-06 L 29.14723968505859 16.81802368164063 C 29.14723968505859 16.81802368164063 14.71584987640381 11.72007274627686 14.5736198425293 11.72007274627686 C 14.43138980865479 11.72007274627686 0 16.81802368164063 0 16.81802368164063 L 14.5736198425293 1.9073486328125e-06 Z",stroke:"none",fill:"#858585"})]})})]})}),Object(m.jsx)(j.b,{head:!0,label:"Add Payment Method",setOpen:y,className:"paymentMethodsForm",open:g,children:Object(m.jsx)(P,{onSuccess:function(e){y(!1)}})})]})},q=function(){var e=Object(r.useState)([]),t=Object(a.a)(e,2),n=t[0],c=t[1],s=Object(r.useState)(null),i=Object(a.a)(s,2),l=i[0],o=i[1];return Object(r.useEffect)((function(){fetch("/api/transactions").then((function(e){if(200===e.status)return e.json()})).then((function(e){e?c(e):o(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return o(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Could not get transactions"})]})]}))})).catch((function(e){console.log(e),o(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return o(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Error happened. Make sure you're online."})]})]}))}))}),[]),Object(m.jsxs)("div",{className:"transactions",children:[Object(m.jsx)("div",{className:"head",children:Object(m.jsx)("p",{children:"All Transaction History"})}),Object(m.jsxs)("ul",{className:"allTransactions",children:[n.map((function(e){return Object(m.jsx)(I,{transaction:e},e._id)})),0===n.length&&Object(m.jsx)("p",{className:"placeholder",children:"No transaction yet."})]}),Object(m.jsx)(j.b,{className:"msg",open:l,children:l})]})},I=function(e){var t,n,c,s,a=e.transaction,r=null;switch(a.__t){case"AddMoney":r=Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"icon",children:Object(m.jsx)(d.t,{})}),Object(m.jsx)("p",{className:"detail",children:"Money added to wallet"})]});break;case"WithdrawMoney":r=Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"icon",children:Object(m.jsx)(d.q,{})}),Object(m.jsx)("p",{className:"detail",children:"Money withdrawal from Wallet"})]});break;case"P2PTransaction":r=a.amount<0?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"icon",children:Object(m.jsx)(d.d,{})}),Object(m.jsxs)("p",{className:"detail",children:["Paid to"," ",Object(m.jsx)("span",{className:"userName",children:(null===(t=a.client)||void 0===t?void 0:t.firstName)+" "+(null===(n=a.client)||void 0===n?void 0:n.lastName)})]})]}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"icon",children:Object(m.jsx)(d.b,{})}),Object(m.jsxs)("p",{className:"detail",children:["Received from"," ",Object(m.jsx)("span",{className:"userName",children:(null===(c=a.client)||void 0===c?void 0:c.firstName)+" "+(null===(s=a.client)||void 0===s?void 0:s.lastName)})]})]});break;default:r=a.amount<0?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"icon",children:Object(m.jsx)(d.q,{})}),Object(m.jsx)("p",{className:"detail",children:a.note})]}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"icon",children:Object(m.jsx)(d.t,{})}),Object(m.jsx)("p",{className:"detail",children:a.note})]})}return Object(m.jsxs)("li",{className:"transaction",children:[r,Object(m.jsxs)("p",{className:"amount",children:["\u20b9",Math.abs(a.amount.fix())]})]})},L=function(e){var t=e.history,n=e.location,c=(e.match,Object(r.useContext)(i.d)),l=c.user,o=c.setUser,u=Object(r.useState)(0),b=Object(a.a)(u,2),h=b[0],O=b[1],x=Object(r.useState)([]),f=Object(a.a)(x,2),p=f[0],v=f[1],g=Object(r.useState)(""),y=Object(a.a)(g,2),k=y[0],N=y[1],C=Object(r.useState)([]),S=Object(a.a)(C,2),F=S[0],A=S[1],Y=Object(r.useState)(!1),T=Object(a.a)(Y,2),I=T[0],L=T[1],B=Object(r.useState)(!1),E=Object(a.a)(B,2),V=(E[0],E[1]),H=Object(r.useState)(""),U=Object(a.a)(H,2),Z=U[0],W=(U[1],Object(r.useState)(!1)),G=Object(a.a)(W,2),J=G[0],z=G[1],$=Object(r.useState)(!1),K=Object(a.a)($,2),Q=(K[0],K[1],Object(r.useState)(!1)),X=Object(a.a)(Q,2),ee=X[0],te=X[1],ne=Object(r.useState)(null),ce=Object(a.a)(ne,2),se=ce[0],ae=ce[1];return Object(r.useEffect)((function(){var e;e="https://checkout.razorpay.com/v1/checkout.js",new Promise((function(t,n){if(document.querySelector('script[src="'.concat(e,'"]')))t(!0);else{var c=document.createElement("script");c.src=e,document.body.appendChild(c),c.onload=function(){return t(!0)},c.onerror=function(){return n(!0)}}})),fetch("/api/dashboardData").then((function(e){return e.json()})).then((function(e){"ok"===e.code?(v(e.monthlyBalance),O(e.balance),A(e.rewards)):ae(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return ae(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Could not update balance."})]})]}))})).catch((function(e){console.log(e),ae(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return ae(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Could not update balance."})]})]}))}))}),[]),Object(r.useEffect)((function(){k||t.push("/account/wallet"),Z||t.push("/account/wallet"),te(!1)}),[k,Z]),Object(m.jsxs)("div",{className:"walletContainer",children:[Object(m.jsxs)("div",{className:"leftSection",children:[Object(m.jsxs)("div",{className:"nameTag",children:[Object(m.jsxs)("h2",{children:["Hello ",l.firstName,","]}),Object(m.jsx)("p",{className:"greetings",children:M()})]}),Object(m.jsxs)("div",{className:"balance",children:[Object(m.jsxs)("div",{className:"currentBalance",children:[Object(m.jsx)("p",{className:"label",children:"Wallet Balance"}),Object(m.jsxs)("h1",{children:["\u20b9 ",h.fix()]}),Object(m.jsx)("p",{className:"updateTime",children:Object(m.jsx)(w,{format:"ddd, DD MMM YYYY",children:new Date})})]}),Object(m.jsx)(D,{data:p})]}),Object(m.jsx)("div",{className:"addWithdraw",children:Object(m.jsxs)("div",{className:"add money",children:[Object(m.jsx)("p",{className:"label",children:"Add Money"}),Object(m.jsxs)("form",{onSubmit:function(e){e.preventDefault(),fetch("/api/createAddMoneyOrder",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:k})}).then((function(e){return e.json()})).then((function(e){var n=e.order,c=e.key;te(!1),n?function(e,n){var c=window.Razorpay;if(c){var s=new c({key:n,amount:e.amount,currency:e.currency,accept_partial:!1,name:"".concat(l.firstName," ").concat(l.lastName),description:"Add money to Delivery Pay wallet",image:"/logo_big.jpg",order_id:e.id,handler:function(e){fetch("/api/addMoney",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({transactionId:e.razorpay_payment_id,razorSignature:e.razorpay_signature,razorOrderId:e.razorpay_order_id})}).then((function(e){return e.json()})).then((function(e){var n=e.code,c=(e.user,e.transaction);e.message,"ok"===n?(t.push("/account/wallet"),V(!1),L(c),O((function(e){return e+c.amount})),N(""),te(!1)):ae(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return ae(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Error happend. Make sure you're payment details are correct."})]})]}))})).catch((function(e){console.log(e),V(!0)}))},modal:{ondismiss:function(){return te(!1)}},theme:{color:"#336cf9"},notify:{sms:!0,email:!0},reminder_enable:!0});s.on("payment.failed",(function(e){V(!0),te(!1)})),s.open()}}(n,c):ae(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return ae(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Error happend. Please try again."})]})]}))})).catch((function(e){console.log(e),te(!1),ae(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return ae(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Error happend. Make sure you're online."})]})]}))}))},children:[Object(m.jsx)("input",{type:"number",step:"0.01",min:"10",value:k,onChange:function(e){return N(e.target.value)},placeholder:"Enter amount",required:!0}),Object(m.jsx)("button",{children:"Proceed"})]})]})}),Object(m.jsxs)("div",{className:"rewards",children:[Object(m.jsx)("p",{className:"label",children:"Rewards"}),Object(m.jsxs)("ul",{className:"cards",children:[F.map((function(e,t){return Object(m.jsxs)("li",{children:[Object(m.jsx)("p",{className:"rewardName",children:e.name}),Object(m.jsxs)("div",{children:[e.img&&Object(m.jsx)(d.n,{src:e.img}),e.amount&&Object(m.jsxs)("p",{className:"amount",children:["\u20b9",e.amount]}),Object(m.jsx)("p",{className:"rewardDscr",children:e.dscr})]}),!e.redeemed&&Object(m.jsx)("button",{className:"redeem",onClick:function(){ae(Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("div",{children:Object(m.jsx)("h4",{children:"Redeeming Reward..."})})})),fetch("/api/redeemReward",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({_id:e._id})}).then((function(e){return e.json()})).then((function(e){"ok"===e.code?(A((function(t){return t.map((function(t){return t._id===e.reward._id?e.reward:t}))})),ae(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return ae(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.A,{}),Object(m.jsx)("h4",{children:"Reward succefully redeemed"})]})]}))):ae(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return ae(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Could not redeem reward."})]})]}))})).catch((function(e){console.log(e),ae(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return ae(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Could not redeem reward. Make sure you're online."})]})]}))}))},children:"Redeem"})]},t)})),0===F.length?Object(m.jsx)("li",{className:"placeholder",children:"Nothing yet."}):null]})]})]}),Object(m.jsxs)("div",{className:"rightSection",children:[Object(m.jsx)(R,{paymentMethods:l.paymentMethods}),Object(m.jsx)(q,{})]}),Object(m.jsx)(j.b,{className:"paymentMethodsForm",head:!0,label:"Add Payment Method",setOpen:function(){t.push("/account/wallet/addMoney")},open:n.pathname.startsWith("/account/wallet/addMoney/addPaymentMethod"),children:Object(m.jsx)(P,{onSuccess:function(){return t.push("/account/wallet/addMoney")}})}),Object(m.jsx)(j.b,{className:"addMoney",head:!0,label:"Withdraw Money",setOpen:function(){t.push("/account/wallet")},open:n.pathname.startsWith("/account/wallet/withdrawMoney"),style:ee?{filter:"grayscale(.4)",pointerEvents:"none"}:{},children:Object(m.jsx)(_,{label:"Where do you want to recieve your money?",action:function(e){var n={method:"POST",headers:{"Content-Type":"application/json"}};switch(e.__t){case"BankCard":n.body=JSON.stringify({paymentMethod:e.__t,amount:Z,accountDetail:{number:+e.cardNumber,name:e.nameOnCard}});break;case"BankAccount":n.body=JSON.stringify({paymentMethod:e.__t,amount:Z,accountDetail:{name:e.name,ifsc:e.ifsc,account_number:e.accountNumber}});break;case"VpaAccount":n.body=JSON.stringify({paymentMethod:e.__t,amount:Z,accountDetail:{address:e.address}});default:return}te(!0),fetch("/api/withdrawMoney",n).then((function(e){return e.json()})).then((function(e){var n;(te(!1),"ok"===e.code)?(o((function(t){return Object(s.a)(Object(s.a)({},t),{},{balance:t.balance-e.transaction.amount})})),O((function(t){return t-e.transaction.amount})),t.push("/account/wallet"),ae(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return ae(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.A,{}),Object(m.jsxs)("h4",{className:"amount",children:["\u20b9",null===(n=e.transaction)||void 0===n?void 0:n.amount]}),Object(m.jsx)("h4",{children:"Money withdrawed!"})]})]}))):403===e.code?ae(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return ae(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Insufficient fun."})]})]})):ae(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return ae(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Could not withdraw money. Please try again."})]})]}))})).catch((function(e){console.log(e),te(!1),z(!0)}))}})}),Object(m.jsxs)(j.b,{open:I,className:"msg",children:[Object(m.jsx)("button",{onClick:function(){return L(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"158",height:"158",viewBox:"0 0 158 158",children:[Object(m.jsxs)("defs",{children:[Object(m.jsxs)("linearGradient",{id:"linear-gradient",x1:"-0.298",y1:"-0.669",x2:"1.224",y2:"1.588",gradientUnits:"objectBoundingBox",children:[Object(m.jsx)("stop",{offset:"0",stopColor:"#336cf9"}),Object(m.jsx)("stop",{offset:"1",stopColor:"#1be6d6"})]}),Object(m.jsx)("clipPath",{id:"clip-path",children:Object(m.jsx)("rect",{width:"64",height:"64",fill:"none"})})]}),Object(m.jsxs)("g",{id:"Group_163","data-name":"Group 163",transform:"translate(-0.426 -0.384)",children:[Object(m.jsx)("g",{id:"Group_103","data-name":"Group 103",transform:"translate(0 0)",children:Object(m.jsx)("rect",{id:"Rectangle_1104","data-name":"Rectangle 1104",width:"158",height:"158",rx:"79",transform:"translate(0.426 0.384)",fill:"url(#linear-gradient)"})}),Object(m.jsxs)("g",{id:"Component_148_2","data-name":"Component 148 \u2013 2",transform:"translate(47.426 58.384)",clipPath:"url(#clip-path)",children:[Object(m.jsx)("rect",{id:"Rectangle_460","data-name":"Rectangle 460",width:"64",height:"64",transform:"translate(0 0)",fill:"none"}),Object(m.jsx)("path",{id:"Checkbox",d:"M25.35,44.087,0,18.737l5.143-5.143L25.35,33.432,58.782,0l5.143,5.143Z",transform:"translate(0 1.728)",fill:"#fff"})]})]})]}),Object(m.jsxs)("h4",{className:"amount",children:["\u20b9",null===I||void 0===I?void 0:I.amount]}),Object(m.jsx)("h4",{children:"Money added!"})]})]}),Object(m.jsxs)(j.b,{open:J,className:"msg",children:[Object(m.jsx)("button",{onClick:function(){te(!1),z(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"158",height:"158",viewBox:"0 0 158 158",children:[Object(m.jsx)("defs",{children:Object(m.jsxs)("linearGradient",{id:"linear-gradient-red",x1:"-0.298",y1:"-0.669",x2:"1.224",y2:"1.588",gradientUnits:"objectBoundingBox",children:[Object(m.jsx)("stop",{offset:"0",stopColor:"#f93389"}),Object(m.jsx)("stop",{offset:"1",stopColor:"#e3003e"})]})}),Object(m.jsx)("rect",{id:"Rectangle_1104","data-name":"Rectangle 1104",width:"158",height:"158",rx:"79",fill:"url(#linear-gradient-red)"}),Object(m.jsx)("g",{id:"Component_85_8","data-name":"Component 85 \u2013 8",transform:"translate(49.472 49.472)",children:Object(m.jsx)("path",{id:"Union_3","data-name":"Union 3",d:"M29.527,34.9,5.368,59.057,0,53.686,24.158,29.527,0,5.368,5.368,0l24.16,24.158L53.686,0l5.371,5.368L34.9,29.527l24.16,24.158-5.371,5.371Z",fill:"#fff"})})]}),Object(m.jsx)("h4",{children:"Could not withdraw money."})]})]}),Object(m.jsxs)(j.b,{open:!1,className:"msg",children:[Object(m.jsx)("button",{onClick:function(){return V(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"158",height:"158",viewBox:"0 0 158 158",children:[Object(m.jsx)("defs",{children:Object(m.jsxs)("linearGradient",{id:"linear-gradient",x1:"-0.298",y1:"-0.669",x2:"1.224",y2:"1.588",gradientUnits:"objectBoundingBox",children:[Object(m.jsx)("stop",{offset:"0",stopColor:"#f93389"}),Object(m.jsx)("stop",{offset:"1",stopColor:"#e3003e"})]})}),Object(m.jsx)("rect",{id:"Rectangle_1104","data-name":"Rectangle 1104",width:"158",height:"158",rx:"79",fill:"url(#linear-gradient)"}),Object(m.jsx)("g",{id:"Component_85_8","data-name":"Component 85 \u2013 8",transform:"translate(49.472 49.472)",children:Object(m.jsx)("path",{id:"Union_3","data-name":"Union 3",d:"M29.527,34.9,5.368,59.057,0,53.686,24.158,29.527,0,5.368,5.368,0l24.16,24.158L53.686,0l5.371,5.368L34.9,29.527l24.16,24.158-5.371,5.371Z",fill:"#fff"})})]}),Object(m.jsx)("h4",{children:"Add money failed"})]})]}),Object(m.jsx)(j.b,{className:"msg",open:se,children:se})]})},B=n(11),E=n.n(B),V=n(19),H=n(22),U=Object(r.lazy)((function(){return Promise.resolve().then(n.t.bind(null,52,7))})),Z=function(e){var t=e.order,n=e.setOrders,u=e.selectAll,b=e.setBatch,h=e.batch,O=Object(r.useRef)(),x=Object(r.useRef)(),f=Object(l.g)(),p=(Object(r.useContext)(i.d).user,Object(r.useState)(u||!1)),v=Object(a.a)(p,2),g=v[0],y=v[1],k=Object(r.useState)(!1),N=Object(a.a)(k,2),C=(N[0],N[1],Object(r.useState)(!1)),S=Object(a.a)(C,2),w=S[0],M=S[1],D=function(){fetch("/api/declineOrder",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({_id:t._id})}).then((function(e){return e.json()})).then((function(e){"ok"===e.code?n((function(n){return n.map((function(n){var c;return n._id===t._id?Object(s.a)(Object(s.a)({},n),{},{status:null===(c=e.order)||void 0===c?void 0:c.status}):n}))})):M(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return M(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Could not cancel order. Please try again."})]})]}))})).catch((function(e){console.log(e),M(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return M(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Could not cancel order. Make sure you're online"})]})]}))}))},_=function(){fetch("/api/acceptOrder",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({_id:t._id})}).then((function(e){return e.json()})).then((function(e){"ok"===e.code?n((function(n){return n.map((function(n){var c;return n._id===t._id?Object(s.a)(Object(s.a)({},n),{},{status:null===(c=e.order)||void 0===c?void 0:c.status}):n}))})):M(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return M(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Orders does not exist."})]})]}))})).catch((function(e){console.log(e),M(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return M(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Could not accept order. Make sure you're online."})]})]}))}))},P=function(){fetch("/api/requestCancellation",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({_id:t._id})}).then((function(e){return e.json()})).then((function(e){"ok"===e.code?n((function(n){return n.map((function(n){var c;return n._id===t._id?Object(s.a)(Object(s.a)({},n),{},{status:null===(c=e.order)||void 0===c?void 0:c.status}):n}))})):M(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return M(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Could not cancel order. Please try again."})]})]}))})).catch((function(e){console.log(e),M(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return M(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Could not cancel order. Make sure you're online"})]})]}))}))};return Object(r.useEffect)((function(){y(u)}),[u]),Object(r.useEffect)((function(){b(g?function(e){return[].concat(Object(c.a)(e),[t._id])}:function(e){return e.filter((function(e){return e!==t._id}))})}),[g]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("tr",{className:"order ".concat(g?"selected":""),onClick:function(e){e.nativeEvent.path.includes(O.current)||e.nativeEvent.path.includes(x.current)||h.length>0||f.push("/account/myShop/orders/".concat(t._id))},children:[Object(m.jsx)("td",{className:"date",children:Object(m.jsx)(U,{format:"DD MMM YYYY, hh:mm a",children:t.createdAt})}),Object(m.jsx)("td",{className:"user",children:Object(m.jsx)(d.E,{user:t.buyer})}),Object(m.jsx)("td",{children:t.products.reduce((function(e,t){return e+t.qty}),0)}),Object(m.jsx)("td",{children:t.refundable||"N/A"}),Object(m.jsx)("td",{children:t.milestones.length||"N/A"}),Object(m.jsx)("td",{children:t.status}),Object(m.jsxs)("td",{children:["\u20b9",t.total]}),Object(m.jsx)("td",{ref:O,children:0===h.length&&Object(m.jsxs)(d.a,{icon:Object(m.jsx)(d.g,{}),children:[Object(m.jsx)(o.b,{to:"/account/myShopping/orders/".concat(t._id),children:"View Detail"}),"pending"===t.status&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(o.b,{to:"#",onClick:function(e){Object(j.a)({label:"Accept Order",question:"You sure want to accept this order?",callback:_})},children:"Accept order"}),Object(m.jsx)(o.b,{to:"#",onClick:function(e){Object(j.a)({label:"Order Cancellation",question:"You sure want to cancel this order?",callback:D})},children:"Cancel order"})]}),"approved"===t.status&&Object(m.jsx)(o.b,{to:"#",onClick:function(e){Object(j.a)({label:"Order Cancellation",question:"You sure want to request cancellation for this order?",callback:P})},children:"Request Cancellation"})]})})]}),Object(m.jsx)(j.b,{className:"msg",open:w,children:w})]})},W=function(e){var t,n,l,u=e.history,b=e.match,h=Object(r.useContext)(i.d),O=h.user,x=h.userType,p=Object(r.useState)(null),v=Object(a.a)(p,2),g=v[0],y=v[1],k=Object(r.useState)(null),N=Object(a.a)(k,2),C=N[0],S=N[1],w=Object(r.useState)((null===(t=O.shopInfo)||void 0===t?void 0:t.shippingCost)||0),M=Object(a.a)(w,2),D=(M[0],M[1]),_=Object(r.useState)(null),P=Object(a.a)(_,2),F=(P[0],P[1],Object(r.useState)(f()(null===C||void 0===C?void 0:C.deliveryTime).format("YYYY-MM-DDThh:mm"))),A=Object(a.a)(F,2),Y=A[0],T=(A[1],Object(r.useState)("")),R=Object(a.a)(T,2),q=(R[0],R[1],Object(r.useState)(!1)),I=Object(a.a)(q,2),L=I[0],B=I[1],E=Object(r.useState)(!1),V=Object(a.a)(E,2),H=V[0],Z=V[1],W=(Object(r.useRef)(),function(){fetch("/api/acceptOrder",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({_id:C._id})}).then((function(e){return e.json()})).then((function(e){"ok"===e.code?(S((function(e){return Object(s.a)(Object(s.a)({},e),{},{status:"approved"})})),y(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return y(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.A,{}),Object(m.jsx)("h4",{children:"Order approved."})]})]}))):y(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return y(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Orders does not exist."})]})]}))})).catch((function(e){console.log(e),y(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return y(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Could not accept order. Make sure you're online."})]})]}))}))}),J=function(){fetch("/api/declineOrder",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({_id:C._id})}).then((function(e){return e.json()})).then((function(e){"ok"===e.code?(S((function(e){return Object(s.a)(Object(s.a)({},e),{},{status:"declined"})})),y(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return y(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.A,{}),Object(m.jsx)("h4",{children:"Order declined."})]})]}))):y(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return y(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Orders does not exist."})]})]}))})).catch((function(e){console.log(e),y(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return y(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Could not decline order. Make sure you're online."})]})]}))}))},z=function(){fetch("/api/updateOrder",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({_id:C._id,status:"shipped"})}).then((function(e){return e.json()})).then((function(e){"ok"===e.code?(S((function(e){return Object(s.a)(Object(s.a)({},C),{},{status:"shipped"})})),y(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return y(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.A,{}),Object(m.jsx)("h4",{children:"Order has been updated. Don't forget to upload proof of shipping below."})]})]}))):y(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return y(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Order could not be updated. Try again."})]})]}))})).catch((function(e){console.log(e),y(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return y(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Order could not be updated. Make sure you're online."})]})]}))}))},$=function(){fetch("/api/updateOrder",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({_id:C._id,status:"delivered"})}).then((function(e){return e.json()})).then((function(e){"ok"===e.code?(S((function(e){return Object(s.a)(Object(s.a)({},C),{},{status:"delivered"})})),y(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return y(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.A,{}),Object(m.jsx)("h4",{children:"Order has been updated. Don't forget to upload proof of delivery below."})]})]}))):y(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return y(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Order could not be updated. Try again."})]})]}))})).catch((function(e){console.log(e),y(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return y(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Order could not be updated. Make sure you're online."})]})]}))}))};return Object(r.useEffect)((function(){fetch("/api/singleOrder?_id=".concat(b.params._id)).then((function(e){return e.json()})).then((function(e){"ok"===e.code?(S(e.order),D(e.shippingCost)):y(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return y(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Orders does not exist."})]})]}))})).catch((function(e){console.log(e),y(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return y(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Could not get order. Make sure you're online."})]})]}))}))}),[]),C?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:"actions",children:[Object(m.jsxs)(o.b,{to:"/account/".concat("seller"===x?"myShop":"myShopping","/orders"),className:"back",children:[Object(m.jsx)(d.c,{}),"Back"]}),"approved"===C.status&&Object(m.jsx)("button",{onClick:function(){return Object(j.a)({label:"Mark Order as Shipped",question:"Did you ship the order?",callback:z})},children:"Mark as Shipped"}),"shipped"===C.status&&Object(m.jsx)("button",{onClick:function(){return Object(j.a)({label:"Mark Order as Delivered",question:"Has the order been delivered?",callback:$})},children:"Mark as Delivered"}),"pending"===C.status&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){Y?Object(j.a)({lable:"Accept Order",question:Object(m.jsx)(m.Fragment,{children:"You sure want to accept this order?"}),callback:W}):y(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return y(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Add a delivery time"})]})]}))},children:"Accept"}),Object(m.jsx)("button",{onClick:function(){return Object(j.a)({label:"Decline Order",question:"You sure want to decline this order?",callback:J})},children:"Decline"})]})]}),Object(m.jsxs)("div",{className:"singleOrder",children:[Object(m.jsxs)("div",{className:"summery",children:[Object(m.jsx)("h3",{children:"Order Summery"}),Object(m.jsxs)("ul",{children:[Object(m.jsxs)("li",{children:[Object(m.jsx)("label",{children:"Buyer"}),Object(m.jsx)(d.E,{user:C.buyer})]}),Object(m.jsxs)("li",{children:[Object(m.jsx)("label",{children:"Order ID"}),C._id]}),Object(m.jsxs)("li",{children:[Object(m.jsx)("label",{children:"Status"}),C.status]}),Object(m.jsxs)("li",{children:[Object(m.jsx)("label",{children:"Submitted at"}),Object(m.jsx)(U,{format:"DD MMM YYYY, hh:mma",children:C.createdAt})]}),Object(m.jsx)("li",{}),Object(m.jsxs)("li",{className:"devide",children:[Object(m.jsx)("label",{children:"Delivery Address"}),Object(m.jsx)("span",{})]}),Object.entries(C.deliveryDetail).map((function(e,t){var n=Object(a.a)(e,2),c=n[0],s=n[1];return"deliveryWithin"===c?Object(m.jsxs)("li",{children:[Object(m.jsx)("label",{children:"Delivery within"}),C.deliveryDetail.deliveryWithin," days"]},t):Object(m.jsxs)("li",{children:[Object(m.jsx)("label",{children:c}),s]},t)}))]})]}),Object(m.jsxs)("div",{className:"products",children:[Object(m.jsx)("h3",{children:"Products"}),Object(m.jsx)("ul",{children:C.products.map((function(e,t){var n=e.product,c=e.qty,s=e.available;return Object(m.jsxs)("li",{children:[Object(m.jsx)(d.n,{src:n.images[0]||"/open_box.png"}),Object(m.jsxs)("div",{className:"detail",children:[Object(m.jsx)("p",{children:n.name}),Object(m.jsxs)("p",{className:"qty",children:["QTY: ",c]}),"pending"===C.status&&Object(m.jsxs)("p",{className:"available",children:["Available: ",s.toString()]})]}),Object(m.jsxs)("div",{className:"price",children:[Object(m.jsxs)("span",{children:[Object(d.I)({product:n,gst:!0})," x ",c]}),"\u20b9",(Object(d.I)({product:n,gst:!0})*c).fix()]})]},t)}))}),Object(m.jsxs)("div",{className:"total",children:[Object(m.jsxs)("div",{className:"data",children:[Object(m.jsx)("label",{children:"Total"}),"\u20b9",C.products.reduce((function(e,t){return(e+Object(d.I)({product:t.product,gst:!0})*t.qty).fix()}),0)]}),Object(m.jsx)("hr",{}),Object(m.jsxs)("div",{className:"data",children:[Object(m.jsx)("label",{children:"Shipping"}),"\u20b9",C.shippingCost]}),Object(m.jsxs)("div",{className:"data",children:[Object(m.jsxs)("label",{children:["Delivery Pay fee ",C.fee,"%"]}),"\u20b9",(C.total-C.total/(C.fee+100)*100).fix()]}),Object(m.jsx)("hr",{}),Object(m.jsxs)("div",{className:"data",children:[Object(m.jsx)("label",{children:"Grand Total"}),"\u20b9",C.total.fix()]}),Object(m.jsx)("hr",{}),Object(m.jsxs)("div",{className:"data",children:[Object(m.jsx)("label",{children:"You'll recieve"}),"\u20b9",(C.total/(C.fee+100)*100).fix()]})]})]}),Object(m.jsxs)("div",{className:"milestones",children:[Object(m.jsx)("h3",{children:"Milestones"}),Object(m.jsx)("p",{className:"subtitle",children:"Click to view milestone detail."}),Object(m.jsxs)("table",{children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:"Date"}),Object(m.jsx)("td",{children:"Descrption"}),Object(m.jsx)("td",{children:"Amount"}),Object(m.jsx)("td",{children:"Status"})]})}),Object(m.jsxs)("tbody",{children:[C.milestones.map((function(e){return Object(m.jsxs)("tr",{onClick:function(){return u.push("/account/hold?q=".concat(e._id))},children:[Object(m.jsx)("td",{children:Object(m.jsx)(U,{format:"DD MMM YYYY, hh:mma",children:e.createdAt})}),Object(m.jsx)("td",{children:e.dscr}),Object(m.jsxs)("td",{children:["\u20b9",e.amount]}),Object(m.jsx)("td",{children:e.status})]},e._id)})),0===C.milestones.length&&Object(m.jsx)("tr",{className:"placeholdert",children:Object(m.jsx)("td",{children:"Nothing yet."})})]})]})]}),Object(m.jsxs)("div",{className:"delivery",children:[Object(m.jsxs)("h3",{children:["Proof of delivery",("approved"===C.status||"shipped"===C.status)&&Object(m.jsx)("button",{onClick:function(){return Z(!0)},children:"Upload proof of delivery"})]}),(null===(n=C.files)||void 0===n?void 0:n.length)>0?Object(m.jsx)("div",{className:"thumbs",children:Object(m.jsx)(d.p,{links:C.files})}):Object(m.jsx)(m.Fragment,{children:"No files added."})]}),Object(m.jsxs)("section",{className:"terms",children:[Object(m.jsx)("h3",{children:"Return Policy Terms"}),Object(m.jsx)("ul",{children:null===(l=C.terms)||void 0===l?void 0:l.map((function(e,t){return Object(m.jsxs)("li",{children:[e," "]},t)}))})]})]}),Object(m.jsx)(j.b,{head:!0,label:"Create Milestone",setOpen:B,className:"milestoneRequest",open:L,children:Object(m.jsx)(Tt,{action:"request",definedAmount:C.total,client:C.buyer,order:C._id,onSuccess:function(e){B(!1),y(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return y(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.A,{}),Object(m.jsxs)("h4",{className:"amount",children:["\u20b9",null===e||void 0===e?void 0:e.amount]}),Object(m.jsx)("h4",{children:"Milestone has been requested"})]}),Object(m.jsx)(o.b,{to:"/account/hold",onClick:function(){return y(null)},children:"Check your Delivery pay Hold"})]})),S((function(t){return Object(s.a)(Object(s.a)({},t),{},{milestones:[].concat(Object(c.a)(t.milestones),[e])})}))}})}),Object(m.jsx)(j.b,{head:!0,label:"Upload proof of shipping & delivery",setOpen:Z,open:H,className:"fileUpload",children:Object(m.jsx)(G,{order:C,onSuccess:function(e){Z(!1),S((function(t){return Object(s.a)(Object(s.a)({},t),{},{files:e.files})}))}})}),Object(m.jsx)(j.b,{className:"msg",open:g,children:g})]}):Object(m.jsx)(m.Fragment,{children:"Loading"})},G=function(e){var t=e.order,n=e.onSuccess,c=Object(r.useState)(!1),s=Object(a.a)(c,2),i=s[0],l=s[1],o=Object(r.useState)([]),u=Object(a.a)(o,2),b=u[0],h=u[1],O=Object(r.useState)(null),x=Object(a.a)(O,2),f=x[0],p=x[1],v=function(){var e=Object(V.a)(E.a.mark((function e(){var c;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l(!0),!b.length){e.next=7;break}return e.next=4,Object(d.D)({files:b,setMsg:p});case 4:e.t0=e.sent,e.next=8;break;case 7:e.t0=[];case 8:c=e.t0,fetch("/api/updateOrder",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({_id:t._id,files:c})}).then((function(e){return e.json()})).then((function(e){l(!1),"ok"===e.code?null===n||void 0===n||n(e.order):p(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return p(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Could not upload files. Try again."})]})]}))})).catch((function(e){l(!1),console.log(e),p(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return p(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Could not upload files. Make sure you're online."})]})]}))}));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("form",{onSubmit:function(e){e.preventDefault(),Object(j.a)({title:"Upload Proof of Shipping & Delivery",question:Object(m.jsxs)(m.Fragment,{children:["You sure want to upload these files?",Object(m.jsx)("span",{className:"note",children:"Keep in mind these files can not be deleted later."})]}),callback:v})},children:[Object(m.jsxs)("section",{children:[Object(m.jsx)("label",{children:"Upload Images of the products, shipment reciept etc."}),Object(m.jsx)(d.k,{multiple:!0,accept:"image/*",required:!0,onChange:function(e){return h(e)}})]}),Object(m.jsx)("section",{className:"btns",children:Object(m.jsx)("button",{className:"submit",children:"Submit"})})]}),i&&Object(m.jsx)("div",{className:"spinnerContainer",children:Object(m.jsx)("div",{className:"spinner"})}),Object(m.jsx)(j.b,{className:"msg",open:f,children:f})]})},J=function(e){e.categories;var t=Object(r.useRef)(),n=Object(r.useState)(0),c=Object(a.a)(n,2),i=c[0],l=c[1],o=Object(r.useState)(1),u=Object(a.a)(o,2),h=u[0],O=u[1],x=Object(r.useState)(20),p=Object(a.a)(x,2),v=p[0],g=p[1],y=Object(r.useState)(""),k=Object(a.a)(y,2),N=k[0],C=k[1],S=Object(r.useState)(""),w=Object(a.a)(S,2),M=w[0],D=w[1],_=Object(r.useState)(""),P=Object(a.a)(_,2),F=P[0],A=P[1],Y=Object(r.useState)({column:"createdAt",order:"dsc"}),T=Object(a.a)(Y,2),R=T[0],q=(T[1],Object(r.useState)({startDate:new Date,endDate:new Date})),I=Object(a.a)(q,2),L=I[0],B=I[1],E=Object(r.useState)(!1),V=Object(a.a)(E,2),H=V[0],W=V[1],G=Object(r.useState)({}),J=Object(a.a)(G,2),z=J[0],$=J[1],K=Object(r.useState)([]),Q=Object(a.a)(K,2),X=Q[0],ee=Q[1],te=Object(r.useState)(!1),ne=Object(a.a)(te,2),ce=ne[0],se=ne[1],ae=Object(r.useState)([]),re=Object(a.a)(ae,2),ie=re[0],le=re[1],oe=Object(r.useState)(null),je=Object(a.a)(oe,2),de=je[0],ue=je[1];return Object(r.useEffect)((function(){var e=f()(L.startDate).format("YYYY-MM-DD"),t=(f()(L.endDate).format("YYYY-MM-DD"),f()(new Date(L.endDate).setDate(L.endDate.getDate()+1)).format("YYYY-MM-DD"));fetch("/api/getOrders?".concat(new URLSearchParams(Object(s.a)(Object(s.a)(Object(s.a)({user:"seller"},M&&{q:M}),{},{page:h,perPage:v,sort:R.column,order:R.order},H&&{dateFrom:e,dateTo:t}),N&&{status:N})))).then((function(e){return e.json()})).then((function(e){"ok"===e.code&&(ee(e.orders),l(e.total))})).catch((function(e){console.log(e),ue(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return ue(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Could not get orders."})]})]}))}))}),[N,M,h,v,H]),Object(r.useLayoutEffect)((function(){if(t.current){var e=t.current.getBoundingClientRect(),n=e.height,c=e.y,s=e.width,a=e.x;$({position:"fixed",top:n+c+4,right:window.innerWidth-a-s})}}),[]),Object(r.useEffect)((function(){ce||le([])}),[ce]),Object(r.useEffect)((function(){0===ie.length&&se(!1)}),[ie]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"benner",children:Object(m.jsx)("p",{children:"Order Management"})}),Object(m.jsxs)("div",{className:"filters",children:[Object(m.jsxs)("section",{children:[Object(m.jsx)("label",{children:"Total:"}),i]}),Object(m.jsxs)("section",{children:[Object(m.jsx)("label",{children:"Per Page:"}),Object(m.jsx)(d.h,{defaultValue:0,options:[{label:"20",value:20},{label:"30",value:30},{label:"50",value:50}],onChange:function(e){return g(e.value)}})]}),Object(m.jsxs)("section",{className:"search",children:[Object(m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"23",height:"23",viewBox:"0 0 23 23",children:Object(m.jsx)("path",{id:"Icon_ionic-ios-search","data-name":"Icon ionic-ios-search",d:"M27.23,25.828l-6.4-6.455a9.116,9.116,0,1,0-1.384,1.4L25.8,27.188a.985.985,0,0,0,1.39.036A.99.99,0,0,0,27.23,25.828ZM13.67,20.852a7.2,7.2,0,1,1,5.091-2.108A7.155,7.155,0,0,1,13.67,20.852Z",transform:"translate(-4.5 -4.493)",fill:"#707070",opacity:"0.74"})}),Object(m.jsx)("input",{value:M,onChange:function(e){return D(e.target.value)},placeholder:"Search for Buyer"}),M&&Object(m.jsx)("button",{onClick:function(){return D("")},children:Object(m.jsx)(d.F,{})})]}),Object(m.jsxs)("section",{className:"category",children:[Object(m.jsx)("label",{children:"Status:"}),Object(m.jsx)(d.h,{defaultValue:0,options:[{label:"All",value:""},{label:"Pending",value:"pending"},{label:"Approved",value:"approved"},{label:"Cancelled",value:"cancelled"},{label:"Hold",value:"Hold"},{label:"Shipped",value:"shipped"},{label:"Delivered",value:"delivered"},{label:"Refunded",value:"refunded"}],onChange:function(e){return C(e.value)}})]}),Object(m.jsxs)("section",{className:"date ".concat(H?"open":""),ref:t,onClick:function(){return A(!0)},children:[Object(m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"30.971",height:"30.971",viewBox:"0 0 30.971 30.971",children:Object(m.jsx)("path",{id:"Path_299","data-name":"Path 299",d:"M3.992,2.42H6.775V.968a.968.968,0,1,1,1.936,0V2.42H22.26V.968a.968.968,0,1,1,1.936,0V2.42h2.783a4,4,0,0,1,3.992,3.992V26.978a4,4,0,0,1-3.992,3.992H3.992A4,4,0,0,1,0,26.978V6.412A4,4,0,0,1,3.992,2.42ZM26.978,4.355H24.2v.968a.968.968,0,1,1-1.936,0V4.355H8.71v.968a.968.968,0,1,1-1.936,0V4.355H3.992A2.059,2.059,0,0,0,1.936,6.412v2.3h27.1v-2.3A2.059,2.059,0,0,0,26.978,4.355ZM3.992,29.035H26.978a2.059,2.059,0,0,0,2.057-2.057V10.646H1.936V26.978A2.059,2.059,0,0,0,3.992,29.035Z",fill:"#336cf9"})}),H&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:"dates",children:[Object(m.jsxs)("p",{children:["From:"," ",Object(m.jsx)(U,{format:"DD MMM, YYYY",children:L.startDate})]}),Object(m.jsxs)("p",{children:["To: ",Object(m.jsx)(U,{format:"DD MMM, YYYY",children:L.endDate})]})]}),Object(m.jsx)("button",{className:"clearDateFilter",onClick:function(){B({startDate:new Date,endDate:new Date}),W(!1)},children:Object(m.jsx)(d.F,{})})]})]})]}),ie.length>0&&Object(m.jsx)("div",{className:"batchAction",children:Object(m.jsx)("button",{onClick:function(){return console.log("batch delete")},children:"Delete"})}),Object(m.jsxs)("table",{className:"table orders",children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{className:"date",children:"Date"}),Object(m.jsx)("th",{children:"Buyer"}),Object(m.jsx)("th",{children:"QTY"}),Object(m.jsx)("th",{children:"Refundable"}),Object(m.jsx)("th",{children:"Milestone"}),Object(m.jsx)("th",{children:"Status"}),Object(m.jsx)("th",{children:"Total Price"}),Object(m.jsx)("th",{children:"Actions"})]})}),Object(m.jsxs)("tbody",{children:[X.map((function(e,t){return Object(m.jsx)(Z,{order:e,setOrders:ee,selectAll:ce,setBatch:le,batch:ie},t)})),0===X.length&&Object(m.jsx)("tr",{className:"placeholder",children:Object(m.jsx)("td",{children:"No product yet."})})]})]}),Object(m.jsx)(d.s,{total:i,btns:5,currentPage:h,perPage:v,setPage:O}),Object(m.jsx)(j.b,{className:"msg",open:de,children:de}),Object(m.jsx)(j.b,{open:F,onBackdropClick:function(){return A(!1)},className:"datePicker",backdropClass:"datePicker",style:z,children:Object(m.jsx)(b.DateRange,{className:"dateRange",ranges:[L],onChange:function(e){B(e.range1),e.range1.endDate!==e.range1.startDate&&(A(!1),W(!0))}})})]})},z=Object(r.lazy)((function(){return Promise.resolve().then(n.t.bind(null,52,7))})),$=function(e){var t,n=e.refund,s=(e.setRefunds,e.selectAll),o=e.setBatch,u=(e.batch,Object(l.g)()),b=(Object(r.useContext)(i.d).user,Object(r.useState)(s||!1)),h=Object(a.a)(b,2),O=h[0],x=h[1],f=Object(r.useState)(!1),p=Object(a.a)(f,2),v=(p[0],p[1],Object(r.useState)(!1)),g=Object(a.a)(v,2),y=g[0];g[1];return Object(r.useEffect)((function(){x(s)}),[s]),Object(r.useEffect)((function(){o(O?function(e){return[].concat(Object(c.a)(e),[n._id])}:function(e){return e.filter((function(e){return e!==n._id}))})}),[O]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("tr",{className:"refund ".concat(O?"selected":""),onClick:function(){return u.push("/account/myShop/refunds/".concat(n._id))},children:[Object(m.jsx)("td",{className:"date",children:Object(m.jsx)(z,{format:"DD MMM YYYY, hh:mm a",children:n.createdAt})}),Object(m.jsx)("td",{children:Object(m.jsx)(d.E,{user:n.seller})}),Object(m.jsx)("td",{children:null===(t=n.order)||void 0===t?void 0:t.products.reduce((function(e,t){return e+t.qty}),0)}),Object(m.jsx)("td",{children:n.status}),Object(m.jsxs)("td",{children:["\u20b9",n.order.total]})]}),Object(m.jsx)(j.b,{className:"msg",open:y,children:y})]})},K=function(e){var t,n,l,u=e.history,b=e.match,h=Object(r.useContext)(i.d).userType,O=Object(r.useState)(null),x=Object(a.a)(O,2),f=x[0],p=x[1],v=Object(r.useState)(null),g=Object(a.a)(v,2),y=g[0],k=g[1],N=Object(r.useState)(null),C=Object(a.a)(N,2),S=C[0],w=C[1],M=Object(r.useState)(!1),D=Object(a.a)(M,2),_=D[0],P=D[1],F=Object(r.useState)(!1),A=Object(a.a)(F,2),Y=A[0],T=A[1],R=(Object(r.useRef)(),function(){var e=Object(V.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("/api/updateRefund",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object(s.a)(Object(s.a)({},t),{},{_id:y._id}))}).then((function(e){return e.json()})).then((function(e){if("ok"===e.code)return e.order;p(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return p(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Refund request does not exist."})]})]}))})).catch((function(e){console.log(e),p(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return p(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Could not update refund. Make sure you're online."})]})]}))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),q=function(){var e=Object(V.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fetch("/api/acceptRefund",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({_id:y._id})}).then((function(e){return e.json()})).then((function(e){"ok"===e.code?(k((function(e){return Object(s.a)(Object(s.a)({},e),{},{status:"approved"})})),p(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return p(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.A,{}),Object(m.jsx)("h4",{children:"Refund request has been approved."})]})]}))):p(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return p(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Refund request does not exist."})]})]}))})).catch((function(e){console.log(e),p(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return p(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Could not accept refund request. Make sure you're online."})]})]}))}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(V.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fetch("/api/declineRefund",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({_id:y._id})}).then((function(e){return e.json()})).then((function(e){"ok"===e.code?(k((function(e){return Object(s.a)(Object(s.a)({},e),{},{status:"declined"})})),p(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return p(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.A,{}),Object(m.jsx)("h4",{children:"Refund request has been declined."})]})]}))):p(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return p(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Refund request does not exist."})]})]}))})).catch((function(e){console.log(e),p(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return p(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Could not decline refund request. Make sure you're online."})]})]}))}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){fetch("/api/singleRefund?_id=".concat(b.params._id)).then((function(e){return e.json()})).then((function(e){"ok"===e.code?(w(e.refund.order),k(e.refund)):p(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return p(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Refund does not exist."})]})]}))})).catch((function(e){console.log(e),p(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return p(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Could not get Refund. Make sure you're online."})]})]}))}))}),[]),Object(r.useEffect)((function(){if(null===S||void 0===S?void 0:S.refundable){var e=0;switch(S.refundable){case"Upto 24 Hours After Delivery":e=1;break;case"Upto 7 Days After Delivery":e=7;break;case"Upto 15 Days After Delivery":e=15;break;default:return}var t=new Date((new Date).getTime()+864e5*e);new Date<t?T(t):T(null)}else T(null)}),[y]),y?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:"actions",children:[Object(m.jsxs)(o.b,{to:"/account/".concat("seller"===h?"myShop":"myShopping","/refunds"),className:"back",children:[Object(m.jsx)(d.c,{}),"Back"]}),"productSent"===y.status&&Object(m.jsx)("button",{onClick:function(){return Object(j.a)({label:"Refund Resolved",question:"You sure want to mark this refund resolved?",callback:function(){R({status:"productRecieved"}).then((function(e){k((function(e){return Object(s.a)(Object(s.a)({},e),{},{status:"productRecieved"})}))}))}})},children:"Mark as Recieved"}),"pending"===y.status&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return Object(j.a)({label:"Accepting Refund",question:"Do you accept this refund request?",callback:q})},children:"Accept"}),Object(m.jsx)("button",{onClick:function(){return Object(j.a)({label:"Declining Refund",question:"Do you decline this refund?",callback:I})},children:"Decline"})]})]}),Object(m.jsxs)("div",{className:"singleOrder",children:[Object(m.jsxs)("div",{className:"summery",children:[Object(m.jsx)("h3",{children:"Summery"}),Object(m.jsxs)("ul",{children:[Object(m.jsxs)("li",{className:"devide",children:[Object(m.jsx)("label",{children:"Order"}),Object(m.jsx)("span",{})]}),Object(m.jsxs)("li",{children:[Object(m.jsx)("label",{children:"Seller"}),Object(m.jsx)(d.E,{user:S.seller})]}),Object(m.jsxs)("li",{children:[Object(m.jsx)("label",{children:"Order ID"}),S._id]}),Object(m.jsxs)("li",{children:[Object(m.jsx)("label",{children:"Status"}),S.status]}),Object(m.jsxs)("li",{children:[Object(m.jsx)("label",{children:"Ordered at"}),Object(m.jsx)(z,{format:"DD MMM YYYY, hh:mma",children:S.createdAt})]}),Object(m.jsxs)("li",{children:[Object(m.jsx)("label",{children:"Delivered at"}),Object(m.jsx)(z,{format:"DD MMM YYYY, hh:mm a",children:S.deliveredAt})]}),Object(m.jsxs)("li",{children:[Object(m.jsx)("label",{children:"Refundable"}),S.refundable||"N/A"]}),Object(m.jsxs)("li",{children:[Object(m.jsx)("label",{children:"Proof of delivery"}),(null===(t=S.files)||void 0===t?void 0:t.length)>0?Object(m.jsx)("div",{className:"thumbs",children:Object(m.jsx)(d.p,{links:S.files})}):Object(m.jsx)(m.Fragment,{children:"No files added."})]}),Y&&Object(m.jsxs)("li",{children:[Object(m.jsx)("label",{children:"Refund till"}),Object(m.jsx)(z,{format:"DD MMM YYYY, hh:mm a",children:Y})]}),Object(m.jsx)("li",{}),Object(m.jsxs)("li",{className:"devide",children:[Object(m.jsx)("label",{children:"Refund"}),Object(m.jsx)("span",{})]}),Object(m.jsxs)("li",{children:[Object(m.jsx)("label",{children:"Refund ID"}),y._id]}),Object(m.jsxs)("li",{children:[Object(m.jsx)("label",{children:"Status"}),y.status]}),Object(m.jsxs)("li",{children:[Object(m.jsx)("label",{children:"Submitted at"}),Object(m.jsx)(z,{format:"DD MMM YYYY, hh:mma",children:y.createdAt})]}),Object(m.jsxs)("li",{children:[Object(m.jsx)("label",{children:"Issue"}),y.issue]}),Object(m.jsxs)("li",{children:[Object(m.jsx)("label",{children:"Descrption"}),y.dscr]}),Object(m.jsxs)("li",{children:[Object(m.jsx)("label",{children:"Images"}),Object(m.jsx)("div",{className:"thumbs",children:y.files.length?Object(m.jsx)(d.p,{links:y.files}):Object(m.jsx)(m.Fragment,{children:"No Images has been provided."})})]}),Object(m.jsx)("li",{}),Object(m.jsxs)("li",{className:"devide",children:[Object(m.jsx)("label",{children:"Delivery Address"}),Object(m.jsx)("span",{})]}),Object(m.jsx)(m.Fragment,{children:Object.entries(S.deliveryDetail).map((function(e,t){var n=Object(a.a)(e,2),c=n[0],s=n[1];return"deliveryTime"===c?Object(m.jsxs)("li",{children:[Object(m.jsx)("label",{children:"Delivery date"}),S.deliveryDetail.deliveryTime?Object(m.jsx)(z,{format:"DD MMM, YYYY hh:mma",children:S.deliveryDetail.deliveryTime}):"N/A"]},t):Object(m.jsxs)("li",{children:[Object(m.jsx)("label",{children:c}),s]},t)}))})]})]}),Object(m.jsxs)("div",{className:"products",children:[Object(m.jsx)("h3",{children:"Products"}),Object(m.jsx)("ul",{children:S.products.map((function(e,t){var n=e.product,c=e.qty;return Object(m.jsxs)("li",{children:[Object(m.jsx)(d.n,{src:n.images[0]||"/open_box.png"}),Object(m.jsxs)("div",{className:"detail",children:[Object(m.jsx)("p",{children:n.name}),Object(m.jsxs)("p",{className:"qty",children:["QTY: ",c]})]}),Object(m.jsxs)("div",{className:"price",children:[Object(m.jsxs)("span",{children:[Object(d.I)({product:n,gst:!0})," x ",c]}),"\u20b9",Object(d.I)({product:n,gst:!0})*c]})]},t)}))}),Object(m.jsxs)("div",{className:"total",children:[Object(m.jsxs)("div",{className:"data",children:[Object(m.jsx)("label",{children:"Total"}),"\u20b9",S.products.reduce((function(e,t){return e+Object(d.I)({product:t.product,gst:!0})*t.qty}),0)]}),Object(m.jsxs)("div",{className:"data",children:[Object(m.jsx)("label",{children:"Shipping"}),S.shipping||"N/A"]}),Object(m.jsxs)("div",{className:"data",children:[Object(m.jsx)("label",{children:"Grand Total"}),"\u20b9",S.products.reduce((function(e,t){return e+Object(d.I)({product:t.product,gst:!0})*t.qty}),0)+(+S.shipping||0)]})]})]}),Object(m.jsxs)("div",{className:"milestones",children:[Object(m.jsxs)("h3",{children:["Milestones",("approved"===y.status||"productSent"===y.status||"productRecieved"===y.status)&&Object(m.jsx)("button",{onClick:function(){return P(!0)},children:"Create Milestone"})]}),"pending"===y.status&&Object(m.jsx)("p",{children:"You can create milestones once you accept the refund request."}),"declined"===y.status&&Object(m.jsx)("p",{children:"This refund request has been declined."}),!("declined"===y.status||"pending"===y.status)&&Object(m.jsxs)("table",{cellSpacing:0,cellPadding:0,children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:"Date"}),Object(m.jsx)("td",{children:"Descrption"}),Object(m.jsx)("td",{children:"Amount"}),Object(m.jsx)("td",{children:"Status"})]})}),Object(m.jsxs)("tbody",{children:[y.milestones.map((function(e){return Object(m.jsxs)("tr",{onClick:function(){return u.push("/account/hold?q=".concat(e._id))},children:[Object(m.jsx)("td",{children:Object(m.jsx)(z,{format:"DD MMM YYYY, hh:mma",children:e.createdAt})}),Object(m.jsx)("td",{children:e.dscr}),Object(m.jsxs)("td",{children:["\u20b9",e.amount]}),Object(m.jsx)("td",{children:e.status})]},e._id)})),0===y.milestones.length&&Object(m.jsx)("tr",{className:"placeholdert",children:Object(m.jsx)("td",{children:"Nothing yet."})})]})]})]}),Object(m.jsxs)("section",{className:"terms",children:[Object(m.jsx)("h3",{children:"Return Policy Terms"}),Object(m.jsxs)("ul",{children:[null===(n=S.terms)||void 0===n?void 0:n.map((function(e,t){return Object(m.jsx)("li",{children:e},t)})),!(null===(l=S.terms)||void 0===l?void 0:l.length)&&Object(m.jsx)("li",{children:"No terms has been set by the seller yet."})]})]})]}),Object(m.jsx)(j.b,{head:!0,label:"Create Milestone",setOpen:P,className:"milestoneRequest",open:_,children:Object(m.jsx)(Tt,{action:"create",definedAmount:S.total,client:y.seller,refund:y._id,onSuccess:function(e){P(!1),p(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return p(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.A,{}),Object(m.jsxs)("h4",{className:"amount",children:["\u20b9",null===e||void 0===e?void 0:e.amount]}),Object(m.jsx)("h4",{children:"Milestone has been created"})]}),Object(m.jsx)(o.b,{to:"/account/hold",onClick:function(){return p(null)},children:"Check your Delivery pay Hold"})]})),k((function(t){return Object(s.a)(Object(s.a)({},t),{},{milestones:[].concat(Object(c.a)(t.milestones),[e])})}))}})}),Object(m.jsx)(j.b,{className:"msg",open:f,children:f})]}):Object(m.jsx)(m.Fragment,{children:"Loading"})},Q=function(e){e.history,e.location;var t=Object(r.useContext)(i.d).userType,n=Object(r.useRef)(),c=Object(r.useState)(0),l=Object(a.a)(c,2),o=l[0],u=l[1],h=Object(r.useState)(1),O=Object(a.a)(h,2),x=O[0],p=O[1],v=Object(r.useState)(20),g=Object(a.a)(v,2),y=g[0],k=g[1],N=Object(r.useState)(""),C=Object(a.a)(N,2),S=C[0],w=C[1],M=Object(r.useState)(""),D=Object(a.a)(M,2),_=D[0],P=D[1],F=Object(r.useState)(""),A=Object(a.a)(F,2),Y=A[0],T=A[1],R=Object(r.useState)({column:"createdAt",order:"dsc"}),q=Object(a.a)(R,2),I=q[0],L=(q[1],Object(r.useState)({startDate:new Date,endDate:new Date})),B=Object(a.a)(L,2),E=B[0],V=B[1],H=Object(r.useState)(!1),U=Object(a.a)(H,2),Z=U[0],W=U[1],G=Object(r.useState)({}),J=Object(a.a)(G,2),K=J[0],Q=J[1],X=Object(r.useState)([]),ee=Object(a.a)(X,2),te=ee[0],ne=ee[1],ce=Object(r.useState)(!1),se=Object(a.a)(ce,2),ae=se[0],re=se[1],ie=Object(r.useState)([]),le=Object(a.a)(ie,2),oe=le[0],je=le[1],de=Object(r.useState)(null),ue=Object(a.a)(de,2),be=ue[0],he=ue[1];return Object(r.useEffect)((function(){var e=f()(E.startDate).format("YYYY-MM-DD"),n=(f()(E.endDate).format("YYYY-MM-DD"),f()(new Date(E.endDate).setDate(E.endDate.getDate()+1)).format("YYYY-MM-DD"));fetch("/api/getRefunds?".concat(new URLSearchParams(Object(s.a)(Object(s.a)(Object(s.a)({user:t},S&&{q:S}),{},{page:x,perPage:y,sort:I.column,order:I.order},Z&&{dateFrom:e,dateTo:n}),_&&{status:_})))).then((function(e){return e.json()})).then((function(e){"ok"===e.code&&(ne(e.refunds),u(e.total))})).catch((function(e){console.log(e),he(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return he(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Could not get orders."})]})]}))}))}),[S,x,y,Z,_]),Object(r.useLayoutEffect)((function(){if(n.current){var e=n.current.getBoundingClientRect(),t=e.height,c=e.y,s=e.width,a=e.x;Q({position:"fixed",top:t+c+4,right:window.innerWidth-a-s})}}),[]),Object(r.useEffect)((function(){ae||je([])}),[ae]),Object(r.useEffect)((function(){0===oe.length&&re(!1)}),[oe]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"benner",children:Object(m.jsx)("p",{children:"My Refunds"})}),Object(m.jsxs)("div",{className:"filters",children:[Object(m.jsxs)("section",{children:[Object(m.jsx)("label",{children:"Total:"}),o]}),Object(m.jsxs)("section",{children:[Object(m.jsx)("label",{children:"Per Page:"}),Object(m.jsx)(d.h,{defaultValue:0,options:[{label:"20",value:20},{label:"30",value:30},{label:"50",value:50}],onChange:function(e){return k(e.value)}})]}),Object(m.jsxs)("section",{className:"search",children:[Object(m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"23",height:"23",viewBox:"0 0 23 23",children:Object(m.jsx)("path",{id:"Icon_ionic-ios-search","data-name":"Icon ionic-ios-search",d:"M27.23,25.828l-6.4-6.455a9.116,9.116,0,1,0-1.384,1.4L25.8,27.188a.985.985,0,0,0,1.39.036A.99.99,0,0,0,27.23,25.828ZM13.67,20.852a7.2,7.2,0,1,1,5.091-2.108A7.155,7.155,0,0,1,13.67,20.852Z",transform:"translate(-4.5 -4.493)",fill:"#707070",opacity:"0.74"})}),Object(m.jsx)("input",{value:S,onChange:function(e){return w(e.target.value)},placeholder:"Search for Customer"}),S&&Object(m.jsx)("button",{onClick:function(){return w("")},children:Object(m.jsx)(d.F,{})})]}),Object(m.jsxs)("section",{className:"category",children:[Object(m.jsx)("label",{children:"Status:"}),Object(m.jsx)(d.h,{defaultValue:0,options:[{label:"All",value:""},{label:"Pending",value:"pending"},{label:"Approved",value:"approved"},{label:"Product Sent",value:"productSent"},{label:"Product Recieved",value:"productRecieved"},{label:"Resolved",value:"resolved"}],onChange:function(e){return P(e.value)}})]}),Object(m.jsxs)("section",{className:"date ".concat(Z?"open":""),ref:n,onClick:function(){return T(!0)},children:[Object(m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"30.971",height:"30.971",viewBox:"0 0 30.971 30.971",children:Object(m.jsx)("path",{id:"Path_299","data-name":"Path 299",d:"M3.992,2.42H6.775V.968a.968.968,0,1,1,1.936,0V2.42H22.26V.968a.968.968,0,1,1,1.936,0V2.42h2.783a4,4,0,0,1,3.992,3.992V26.978a4,4,0,0,1-3.992,3.992H3.992A4,4,0,0,1,0,26.978V6.412A4,4,0,0,1,3.992,2.42ZM26.978,4.355H24.2v.968a.968.968,0,1,1-1.936,0V4.355H8.71v.968a.968.968,0,1,1-1.936,0V4.355H3.992A2.059,2.059,0,0,0,1.936,6.412v2.3h27.1v-2.3A2.059,2.059,0,0,0,26.978,4.355ZM3.992,29.035H26.978a2.059,2.059,0,0,0,2.057-2.057V10.646H1.936V26.978A2.059,2.059,0,0,0,3.992,29.035Z",fill:"#336cf9"})}),Z&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:"dates",children:[Object(m.jsxs)("p",{children:["From:"," ",Object(m.jsx)(z,{format:"DD MMM, YYYY",children:E.startDate})]}),Object(m.jsxs)("p",{children:["To: ",Object(m.jsx)(z,{format:"DD MMM, YYYY",children:E.endDate})]})]}),Object(m.jsx)("button",{className:"clearDateFilter",onClick:function(){V({startDate:new Date,endDate:new Date}),W(!1)},children:Object(m.jsx)(d.F,{})})]})]})]}),oe.length>0&&Object(m.jsx)("div",{className:"batchAction",children:Object(m.jsx)("button",{onClick:function(){return console.log("batch delete")},children:"Delete"})}),Object(m.jsxs)("table",{className:"table refunds",children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{className:"date",children:"Date"}),Object(m.jsx)("th",{children:"Customer"}),Object(m.jsx)("th",{children:"QTY"}),Object(m.jsx)("th",{children:"Status"}),Object(m.jsx)("th",{children:"Total Price"})]})}),Object(m.jsxs)("tbody",{children:[te.map((function(e){return Object(m.jsx)($,{refund:e,setRefunds:ne,selectAll:ae,setBatch:je,batch:oe},e._id)})),0===te.length&&Object(m.jsx)("tr",{className:"placeholder",children:Object(m.jsx)("td",{children:"No product yet."})})]})]}),Object(m.jsx)(d.s,{total:o,btns:5,currentPage:x,perPage:y,setPage:p}),Object(m.jsx)(j.b,{className:"msg",open:be,children:be}),Object(m.jsx)(j.b,{open:Y,onBackdropClick:function(){return T(!1)},className:"datePicker",backdropClass:"datePicker",style:K,children:Object(m.jsx)(b.DateRange,{className:"dateRange",ranges:[E],onChange:function(e){V(e.range1),e.range1.endDate!==e.range1.startDate&&(T(!1),W(!0))}})})]})},X=n(55),ee=n(64),te=n.n(ee);function ne(e){return ce.apply(this,arguments)}function ce(){return(ce=Object(V.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("/api/editUserProfile",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n(154);var se=function(e){var t=e.method,n=e.setMsg,c=Object(r.useContext)(i.d).setUser,l=Object(r.useState)(!1),o=Object(a.a)(l,2),u=o[0],b=o[1],h=Object(r.useCallback)((function(e){fetch("/api/deletePaymentMethod",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({_id:e._id})}).then((function(e){return e.json()})).then((function(t){"ok"===t.code?c((function(t){return Object(s.a)(Object(s.a)({},t),{},{paymentMethods:t.paymentMethods.filter((function(t){return t._id!==e._id}))})})):n(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return n(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Payment method could not be deleted."})]})]}))}))}),[]);return Object(m.jsxs)("li",{children:[Object(m.jsxs)("div",{className:"actions",children:[Object(m.jsx)("button",{className:"edit",onClick:function(){return b(t.__t)},children:"Edit"}),Object(m.jsx)("button",{className:"delete",onClick:function(){return Object(j.a)({label:"Payment method delete",question:"Do you want to delete this payment method?",callback:function(){return h(t)}})},children:"Delete"})]}),"BankCard"===t.__t&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(Y,{card:t}),u===t.__t&&Object(m.jsx)(j.b,{open:u,head:!0,label:"Edit Payment Method",setOpen:b,className:"editPaymentMethod",children:Object(m.jsx)(F,{prefill:t,onSuccess:function(e){e&&(b(!1),n(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return n(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.A,{}),Object(m.jsx)("h4",{children:"Payment method updated."})]})]})))}})})]}),"BankAccount"===t.__t&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(T,{account:t}),u===t.__t&&Object(m.jsx)(j.b,{open:u,head:!0,label:"Edit Payment Method",setOpen:b,className:"editPaymentMethod",children:Object(m.jsx)(A,{prefill:t,onSuccess:function(e){e&&(b(!1),n(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return n(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.A,{}),Object(m.jsx)("h4",{children:"Payment method updated."})]})]})))}})})]})]})},ae=function(e){var t=e.label,n=e.fields,c=e.value,s=e.onError,l=e.setMsg,o=e.formData,j=Object(r.useContext)(i.d).setUser,u=Object(r.useState)(!1),b=Object(a.a)(u,2),h=b[0],O=b[1],x=Object(r.useRef)(null),f=function(){var e=Object(V.a)(E.a.mark((function e(t){var n,c,r,i,u,b;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),n={},c=Object(X.a)(new FormData(t.target).entries());try{for(c.s();!(r=c.n()).done;)i=Object(a.a)(r.value,2),u=i[0],b=i[1],n[u]=b}catch(h){c.e(h)}finally{c.f()}if(!n.password||n.password===n.confirm_password){e.next=7;break}return null===s||void 0===s||s(),e.abrupt("return");case 7:if(n["address.city"]&&navigator.geolocation.getCurrentPosition((function(e){var t=e.coords.latitude,c=e.coords.longitude;n["address.location"]={type:"Point",coordinates:[c,t]}})),!n["kyc.files"]){e.next=15;break}return e.next=11,Object(d.D)({files:o,setMsg:l});case 11:if(e.t0=e.sent,e.t0){e.next=14;break}e.t0=[];case 14:n["kyc.files"]=e.t0;case 15:if(!n["gst.detail.files"]){e.next=22;break}return e.next=18,Object(d.D)({files:o,setMsg:l});case 18:if(e.t1=e.sent,e.t1){e.next=21;break}e.t1=[];case 21:n["gst.detail.files"]=e.t1;case 22:fetch("/api/editUserProfile",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){return e.json()})).then((function(e){var t=e.user;t?(j(t),O(!1)):alert("someting went wrong")})).catch((function(e){console.log(e),alert("someting went wrong")}));case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsxs)("li",{children:[Object(m.jsx)("p",{className:"label",children:t}),Object(m.jsxs)("form",{ref:x,onSubmit:f,children:[h?Object(m.jsx)("div",{className:"inputs",children:n}):Object(m.jsx)("div",{className:"currentValue",children:c}),Object(m.jsx)("div",{className:"btns",children:h?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{type:"submit",children:"Save changes"},"submit"),Object(m.jsx)("button",{type:"button",onClick:function(){return O(!1)},children:"Cancel"},"cancel")]}):Object(m.jsx)("button",{type:"button",onClick:function(){return O(!0)},children:"Edit"},"edit")})]})]})},re=function(e){e.history,e.match,e.location;var t,n,c,l,o,u,b,h,O,x=Object(r.useContext)(i.d),f=x.user,p=x.setUser,v=Object(r.useState)(!1),g=Object(a.a)(v,2),y=g[0],k=g[1],N=Object(r.useState)(null),C=Object(a.a)(N,2),S=C[0],w=C[1],M=Object(r.useState)([]),D=Object(a.a)(M,2),_=D[0],P=D[1],F=Object(r.useState)([]),A=Object(a.a)(F,2),Y=(A[0],A[1],function(e){e.googleId&&ne({googleId:e.googleId}).then((function(t){p((function(t){return Object(s.a)(Object(s.a)({},t),{},{googleId:e.googleId})})),w(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return w(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.A,{}),Object(m.jsx)("h4",{children:"Google account successfully connected."})]})]}))})).catch((function(e){console.log(e),w(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return w(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Could not connect Google account."})]})]}))}))}),T=function(e){ne({googleId:null}).then((function(e){e.user?(p((function(e){return Object(s.a)(Object(s.a)({},e),{},{googleId:null})})),w(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return w(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.A,{}),Object(m.jsx)("h4",{children:"Successfully disconnected Google."})]})]}))):w(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return w(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Could not disconnect Google account. Please try again."})]})]}))})).catch((function(e){console.log(e),w(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return w(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Could not disconnect Google account."})]})]}))}))};return Object(m.jsxs)("div",{className:"profileContainer",children:[Object(m.jsxs)("div",{className:"benner",children:[Object(m.jsxs)("div",{className:"profileImg",children:[Object(m.jsx)(d.n,{src:f.profileImg||"/profile-user.jpg"}),Object(m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"91.832",height:"25.468",viewBox:"0 0 91.832 25.468",children:Object(m.jsxs)("g",{id:"Path_1937","data-name":"Path 1937",transform:"translate(15.429 -9.647)",fill:"#fff",children:[Object(m.jsx)("path",{d:"M 29.79687690734863 34.6146240234375 C 22.21588897705078 34.6146240234375 13.43720626831055 32.0111198425293 5.0779709815979 27.28368377685547 C -2.8753981590271 22.78578186035156 -9.78753662109375 16.7585563659668 -14.48426628112793 10.24203777313232 C -13.95890235900879 10.24473857879639 -13.30369663238525 10.25548648834229 -12.80753517150879 10.26361274719238 C -12.44524097442627 10.26955413818359 -12.15906429290771 10.27424812316895 -12.02891159057617 10.27424812316895 C -11.93940830230713 10.27424812316895 -11.86373233795166 10.26253128051758 -11.79978466033936 10.24241733551025 C -11.48864650726318 10.21196746826172 -10.04010391235352 10.17821311950684 -5.149840831756592 10.17821311950684 C -1.226676225662231 10.17821311950684 4.093100070953369 10.19837760925293 9.725229263305664 10.21973037719727 C 16.20444107055664 10.24428367614746 23.54814720153809 10.27211856842041 29.79687690734863 10.27211856842041 C 31.89767646789551 10.27211856842041 43.68988800048828 10.22107124328613 56.17448806762695 10.16702461242676 L 59.24650192260742 10.15374183654785 C 60.32665252685547 10.14907169342041 61.61424255371094 10.14680099487305 63.18285369873047 10.14680099487305 C 64.99295043945313 10.14680099487305 66.92156219482422 10.14978885650635 68.78666687011719 10.15269470214844 C 70.55825042724609 10.1554479598999 72.23158264160156 10.15804767608643 73.72422027587891 10.15804767608643 C 74.4501953125 10.15804767608643 75.08247375488281 10.1574182510376 75.63590240478516 10.15613842010498 C 74.24596405029297 13.15391826629639 71.95748138427734 16.1362361907959 68.82386779785156 19.03109550476074 C 65.67525482177734 21.9398250579834 61.6738166809082 24.71903610229492 57.25215911865234 27.06828308105469 C 52.91740798950195 29.37135314941406 48.15610122680664 31.27616500854492 43.48295974731445 32.57678985595703 C 38.69290161132813 33.90995407104492 33.96032333374023 34.6146240234375 29.79687690734863 34.6146240234375 Z",stroke:"none"}),Object(m.jsx)("path",{d:"M 63.18235397338867 10.64679336547852 C 61.61428070068359 10.64679336547852 60.32755279541016 10.64906692504883 59.24865341186523 10.65373229980469 L 56.18099212646484 10.6670036315918 C 43.69374084472656 10.72105407714844 31.89901733398438 10.77211761474609 29.79687881469727 10.77211761474609 C 23.54719161987305 10.77211761474609 16.2029914855957 10.74428176879883 9.723331451416016 10.71971893310547 C 4.091693878173828 10.69837951660156 -1.227619171142578 10.67821884155273 -5.149848937988281 10.67821884155273 C -9.844169616699219 10.67821884155273 -11.33226013183594 10.70873641967773 -11.7083740234375 10.73677062988281 C -11.80277252197266 10.76053237915039 -11.90915679931641 10.77424240112305 -12.0289306640625 10.77424240112305 C -12.16323089599609 10.77424240112305 -12.45131683349609 10.7695198059082 -12.81605529785156 10.76354217529297 C -13.01943206787109 10.76021194458008 -13.24966430664063 10.75643920898438 -13.48653411865234 10.75296401977539 C -8.851593017578125 16.903076171875 -2.239547729492188 22.57095718383789 5.324104309082031 26.84845542907715 C 13.60947799682617 31.53411865234375 22.30074310302734 34.11461639404297 29.79687881469727 34.11461639404297 C 33.91565704345703 34.11461639404297 38.60186767578125 33.41628265380859 43.34890747070313 32.0950927734375 C 47.98773193359375 30.80401802062988 52.71426773071289 28.91309356689453 57.0175666809082 26.62672996520996 C 61.40182876586914 24.29735565185547 65.3670654296875 21.5438175201416 68.48458099365234 18.6638298034668 C 71.32099151611328 16.04351997375488 73.45128631591797 13.35661125183105 74.83492279052734 10.65748596191406 C 74.4908447265625 10.65786743164063 74.12125396728516 10.65805435180664 73.72370147705078 10.65805435180664 C 72.23068237304688 10.65805435180664 70.55716705322266 10.65545654296875 68.78539276123047 10.65269470214844 C 66.92047119140625 10.6497917175293 64.9920654296875 10.64679336547852 63.18235397338867 10.64679336547852 M 63.18235778808594 9.646797180175781 C 66.69034576416016 9.646797180175781 70.639892578125 9.658050537109375 73.72370910644531 9.658050537109375 C 74.72272491455078 9.658050537109375 75.63052368164063 9.656867980957031 76.4033203125 9.653743743896484 C 70.7041015625 23.3221435546875 47.19384002685547 35.11461639404297 29.79687881469727 35.11461639404297 C 13.80905532836914 35.11461639404297 -5.7138671875 23.84020614624023 -15.427734375 9.772117614746094 C -15.45098876953125 9.749141693115234 -15.14891815185547 9.741405487060547 -14.71451568603516 9.741401672363281 C -13.8193359375 9.741401672363281 -12.36181640625 9.774246215820313 -12.02893829345703 9.774246215820313 C -11.98212432861328 9.774246215820313 -11.95759582519531 9.773597717285156 -11.9599609375 9.772117614746094 C -12.07225799560547 9.701694488525391 -9.402595520019531 9.678211212158203 -5.14984130859375 9.678211212158203 C 3.356430053710938 9.678211212158203 18.19854354858398 9.772117614746094 29.79687881469727 9.772117614746094 C 32.07231903076172 9.772117614746094 46.01445388793945 9.710941314697266 59.24433135986328 9.653743743896484 C 60.42824935913086 9.648624420166016 61.76977157592773 9.646797180175781 63.18235778808594 9.646797180175781 Z",stroke:"none",fill:"#336cf9"})]})}),Object(m.jsx)("input",{type:"file",accept:".jpg, .png, .jpeg",onChange:function(e){var t=e.target.files[0],n="https://cdn.deliverypay.in";if(t){var c,a=new FormData,r=Object(X.a)(e.target.files);try{for(r.s();!(c=r.n()).done;){var i=c.value;a.append("file",i)}}catch(l){r.e(l)}finally{r.f()}fetch("".concat(n,"/upload"),{method:"POST",body:a}).then((function(e){return e.json()})).then((function(e){"ok"===e.code?ne({profileImg:n+"/"+e.files[0]}).then((function(e){e.user&&p((function(t){return Object(s.a)(Object(s.a)({},t),{},{profileImg:e.user.profileImg})}))})):w(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return w(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Image upload failed"})]})]}))})).catch((function(e){w(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return w(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Image upload failed. Make sure you're online."})]})]}))}))}}}),Object(m.jsx)("label",{children:"Edit"})]}),Object(m.jsxs)("div",{children:[Object(m.jsx)("p",{className:"name",children:f.firstName+" "+f.lastName}),Object(m.jsxs)("p",{className:"id",children:["Delivery pay ID: ",f.userId||f._id]})]})]}),Object(m.jsxs)("div",{className:"settings",children:[Object(m.jsx)("div",{className:"head",children:"Account Settings"}),Object(m.jsxs)("ul",{children:[Object(m.jsx)(ae,{label:"Name",fields:Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("section",{children:Object(m.jsx)("input",{placeholder:"First name",defaultValue:f.firstName,name:"firstName",required:!0})}),Object(m.jsx)("section",{children:Object(m.jsx)("input",{placeholder:"last name",defaultValue:f.lastName,name:"lastName",required:!0})})]}),value:f.firstName+" "+f.lastName}),Object(m.jsx)(ae,{label:"Phone Number",fields:Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("section",{children:Object(m.jsx)("input",{placeholder:"Phone Number",defaultValue:f.phone,name:"phone",required:!0,pattern:"((\\+*)((0[ -]+)*|(91 )*)(\\d{12}|\\d{10}))|\\d{5}([- ]*)\\d{6}"})})}),value:f.phone}),Object(m.jsx)(ae,{label:"Email",fields:Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("section",{children:Object(m.jsx)("input",{type:"email",placeholder:"Phone Number",defaultValue:f.email,name:"email",required:!0})})}),value:f.email}),Object(m.jsx)(ae,{label:"Password",onError:function(){return k(!0)},fields:Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("section",{children:Object(m.jsx)("input",{placeholder:"Password",name:"password",required:!0,type:"password",onChange:function(e){return k(!1)}})}),Object(m.jsx)("section",{children:Object(m.jsx)("input",{placeholder:"Confirm password",name:"confirm_password",required:!0,type:"password",onChange:function(e){return k(!1)}})}),y&&Object(m.jsx)("p",{className:"errMsg",children:"Password did not match."})]}),value:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"}),Object(m.jsx)(ae,{label:"Gender",fields:Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("section",{children:Object(m.jsx)("input",{placeholder:"Gender",defaultValue:f.gender,name:"gender",required:!0})})}),value:f.gender}),Object(m.jsx)(ae,{label:"Age",fields:Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("section",{children:Object(m.jsx)("input",{type:"number",placeholder:"Age",defaultValue:f.age,name:"age",required:!0})})}),value:f.age}),Object(m.jsx)(ae,{label:"Address",fields:Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("section",{children:Object(m.jsx)("input",{type:"text",placeholder:"Address",defaultValue:f.address.street,name:"address.street",required:!0})}),Object(m.jsx)("section",{children:Object(m.jsx)("input",{type:"text",placeholder:"City",defaultValue:f.address.city,name:"address.city",required:!0})}),Object(m.jsx)("section",{children:Object(m.jsx)("input",{type:"text",placeholder:"State",defaultValue:f.address.state,name:"address.state",required:!0})}),Object(m.jsx)("section",{children:Object(m.jsx)("input",{type:"number",placeholder:"PIN Code",defaultValue:f.address.zip,name:"address.zip",required:!0})})]}),value:"".concat((null===(t=f.address)||void 0===t?void 0:t.street)||""," ").concat((null===(n=f.address)||void 0===n?void 0:n.city)||""," ").concat((null===(c=f.address)||void 0===c?void 0:c.state)||""," ").concat((null===(l=f.address)||void 0===l?void 0:l.zip)||"")}),Object(m.jsx)(ae,{label:"KYC",setMsg:w,formData:_,fields:Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("section",{children:[Object(m.jsx)("label",{children:"Upload files for verification."}),Object(m.jsx)(d.k,{multiple:!0,prefill:null===(o=f.kyc)||void 0===o?void 0:o.files,name:"kyc.files",onChange:function(e){return P(e)}})]})}),value:Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("label",{children:"Files for verification:"}),Object(m.jsx)("ul",{className:"thumbs",children:Object(m.jsx)(d.p,{links:null===(u=f.kyc)||void 0===u?void 0:u.files})}),Object(m.jsxs)("p",{children:["Verified: ",(null===(b=f.kyc)||void 0===b||null===(h=b.verified)||void 0===h?void 0:h.toString())||"False"]})]})})]})]}),Object(m.jsxs)("div",{className:"paymentMethods",children:[Object(m.jsx)("div",{className:"head",children:"Payment Methods"}),Object(m.jsxs)("ul",{className:"methods",children:[f.paymentMethods.map((function(e,t){return Object(m.jsx)(se,{setMsg:w,method:e},t)})),0===(null===(O=f.paymentMethods)||void 0===O?void 0:O.length)&&Object(m.jsx)("p",{children:"No payment method added."})]})]}),Object(m.jsxs)("div",{className:"socials",children:[Object(m.jsx)("div",{className:"head",children:"Connect Social Accounts"}),Object(m.jsx)("ul",{className:"providers",children:f.googleId?Object(m.jsx)(te.a,{className:"google",clientId:"978249749020-kjq65au1n373ur5oap7n4ebo2fq1jdhq.apps.googleusercontent.com",buttonText:"Disconnect from Google",onSuccess:T,onFailure:T,cookiePolicy:"single_host_origin"}):Object(m.jsx)(te.a,{className:"google",clientId:"978249749020-kjq65au1n373ur5oap7n4ebo2fq1jdhq.apps.googleusercontent.com",buttonText:"Connect with Google",onSuccess:Y,onFailure:Y,cookiePolicy:"single_host_origin"})})]}),Object(m.jsx)(j.b,{className:"msg",open:S,children:S})]})},ie=n(52),le=n.n(ie);n(155);var oe=function(e){var t=e.label,n=e.defaultStatus,c=e.children,s=e.disabled,i=e.className,l=e.data,o=(e.step,Object(r.useState)(l?!l:null)),j=Object(a.a)(o,2),u=j[0],b=j[1];return Object(r.useEffect)((function(){b(n)}),[n]),Object(m.jsxs)("div",{className:"step ".concat(u||n?"open":""," ").concat(s?"disabled":""," ").concat(i||""),children:[Object(m.jsxs)("div",{className:"head",onClick:function(){n||b(!u)},children:[Object(m.jsx)(d.g,{className:"chev"})," ",t,Object(m.jsx)("div",{className:"status",children:l&&Object(m.jsx)(d.y,{})})]}),(u||n)&&Object(m.jsx)("div",{className:"body",children:c})]})},je=function(e){var t,n,c=e.setLoading,l=Object(r.useContext)(i.d),o=l.user,j=l.setUser,u=window.FB,b=Object(r.useState)([]),h=Object(a.a)(b,2),O=h[0],x=h[1],f=Object(r.useState)(null),p=Object(a.a)(f,2),v=p[0],g=p[1];return Object(r.useEffect)((function(){var e,t;(null===(e=o.fbMarket)||void 0===e||null===(t=e.business)||void 0===t?void 0:t.id)||u.api("/me","GET",{fields:"businesses{picture{url},name,id,created_time}",access_token:d.o.get("facebook_user_accessToken")},(function(e){e.businesses&&x(e.businesses.data)}))}),[o]),Object(m.jsx)(m.Fragment,{children:(null===(t=o.fbMarket)||void 0===t||null===(n=t.businessManager)||void 0===n?void 0:n.id)?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("p",{className:"note",children:"The Business Manager that owns all your Facebook business accounts."}),Object(m.jsx)("ul",{children:Object(m.jsxs)("li",{children:[Object(m.jsxs)("div",{className:"profile",children:[Object(m.jsx)(d.n,{src:o.fbMarket.businessManager.profileImg}),Object(m.jsxs)("div",{className:"detail",children:[Object(m.jsxs)("a",{href:"https://business.facebook.com/latest/home?nav_ref=bm_home_redirect&business_id=".concat(o.fbMarket.businessManager.id),children:[o.fbMarket.businessManager.name," ",Object(m.jsx)(d.j,{})]}),Object(m.jsxs)("span",{children:["ID: ",o.fbMarket.businessManager.id]}),Object(m.jsxs)("span",{children:["Created at:"," ",Object(m.jsx)(le.a,{format:"DD MMM YYYY, hh:mm a",children:o.fbMarket.businessManager.created_time})]})]})]}),Object(m.jsx)("button",{onClick:function(){ne({"fbMarket.businessManager":{},"fbMarket.facebookPage":{},"fbMarket.commerceAccount":{},"fbMarket.userAgreement":!1}).then((function(e){var t=e.user;j((function(e){return Object(s.a)(Object(s.a)({},e),{},{fbMarket:t.fbMarket})}))}))},className:"btn",children:"Disconnect"})]})})]}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("p",{className:"note",children:"Connect the Business Manager you use to manage your business Page, accounts, and product catalog. You can only connect a Business Manager you have admin access to."}),Object(m.jsx)("p",{className:"note",children:"After you connect, you may receive a verification email from Facebook. If so, you\u2019ll need to confirm your business email address before proceeding."}),v&&Object(m.jsx)("div",{className:"err",children:v}),Object(m.jsxs)("ul",{children:[O.map((function(e,t){return Object(m.jsxs)("li",{children:[Object(m.jsxs)("div",{className:"profile",children:[Object(m.jsx)(d.n,{src:e.picture.data.url}),Object(m.jsxs)("div",{className:"detail",children:[Object(m.jsxs)("a",{href:"https://business.facebook.com/latest/home?nav_ref=bm_home_redirect&business_id=".concat(e.business_id,"&asset_id=").concat(e.asset_id),children:[e.name," ",Object(m.jsx)(d.j,{})]}),Object(m.jsxs)("span",{children:["ID: ",e.id]}),Object(m.jsxs)("span",{children:["Created at:"," ",Object(m.jsx)(le.a,{format:"DD MMM YYYY, hh:mm a",children:e.created_time})]})]})]}),Object(m.jsx)("button",{className:"btn",onClick:function(){ne({"fbMarket.businessManager.id":e.id,"fbMarket.businessManager.name":e.name,"fbMarket.businessManager.createdAt":e.created_time,"fbMarket.businessManager.profileImg":e.picture.data.url}).then((function(e){var t=e.user;j((function(e){return Object(s.a)(Object(s.a)({},e),{},{fbMarket:t.fbMarket})}))}))},children:"Connect"})]},t)})),Object(m.jsxs)("li",{children:[Object(m.jsxs)("div",{className:"profile",children:[Object(m.jsx)(d.n,{src:"/profile-user.jpg"}),Object(m.jsx)("p",{children:"Create Business Manager"})]}),Object(m.jsx)("button",{className:"btn",onClick:function(){c(!0),u.api("/me/businesses","POST",{name:"Delivery Pay Business Manager",vertical:"ECOMMERCE"},(function(e){c(!1),console.log(e),e.id&&u.api("/me","GET",{fields:"businesses{picture{url},name,id,created_time}"},(function(e){e.businesses&&x(e.businesses.data)})),e.error&&(1===e.error.code?g(Object(m.jsx)(m.Fragment,{children:"You have reached maximum number of business manager one user can have. Use one of existing business manager instead of creating a new one."})):3947===e.error.code?g(Object(m.jsx)(m.Fragment,{children:'You already have a Business Manager with the same name. Select "Delivery Pay Business Manager" instead of creating a new one. or Choose another.'})):g(Object(m.jsx)(m.Fragment,{children:e.error.error_user_msg||e.error.message})))}))},children:"Create new"})]})]})]})})},de=function(){var e,t,n=window.FB,c=Object(r.useContext)(i.d),l=c.user,o=c.setUser,u=Object(r.useState)([]),b=Object(a.a)(u,2),h=b[0],O=b[1],x=Object(r.useState)(!1),f=Object(a.a)(x,2),p=f[0],v=f[1];return Object(r.useEffect)((function(){var e,t;(null===(e=l.fbMarket)||void 0===e||null===(t=e.business)||void 0===t?void 0:t.id)||n.api("/me/accounts","GET",{fields:"picture{url},access_token,name,category,business",access_token:d.o.get("facebook_user_accessToken")},(function(e){console.log("facebook pages:",e),e.data&&O(e.data)}))}),[l]),Object(m.jsxs)(m.Fragment,{children:[(null===(e=l.fbMarket)||void 0===e||null===(t=e.facebookPage)||void 0===t?void 0:t.id)?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("p",{className:"note",children:"The Facebook business Page that you use to sell your products or post ads."}),Object(m.jsx)("ul",{children:Object(m.jsxs)("li",{children:[Object(m.jsxs)("div",{className:"profile",children:[Object(m.jsx)(d.n,{src:l.fbMarket.facebookPage.profileImg}),Object(m.jsxs)("div",{className:"detail",children:[Object(m.jsxs)("a",{href:"https://business.facebook.com/latest/home?nav_ref=bm_home_redirect&business_id=".concat(l.fbMarket.businessManager.id),children:[l.fbMarket.facebookPage.name," ",Object(m.jsx)(d.j,{})]}),Object(m.jsxs)("span",{children:["Category: ",l.fbMarket.facebookPage.category]})]})]}),Object(m.jsx)("button",{onClick:function(){ne({"fbMarket.facebookPage":{},"fbMarket.commerceAccount":{},"fbMarket.userAgreement":!1}).then((function(e){var t=e.user;console.log(t.fbMarket),o((function(e){return Object(s.a)(Object(s.a)({},e),{},{fbMarket:t.fbMarket})}))}))},className:"btn",children:"Disconnect"})]})})]}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("p",{className:"note",children:"Connect the business Page you use to sell products or post ads. You can only connect a Page you have admin access to."}),Object(m.jsxs)("ul",{children:[h.map((function(e,t){return Object(m.jsxs)("li",{children:[Object(m.jsxs)("div",{className:"profile",children:[Object(m.jsx)(d.n,{src:e.picture.data.url}),Object(m.jsxs)("div",{className:"detail",children:[Object(m.jsxs)("a",{href:"https://business.facebook.com/latest/home?nav_ref=bm_home_redirect&business_id=".concat(e.business_id,"&asset_id=").concat(e.asset_id),children:[e.name," ",Object(m.jsx)(d.j,{})]}),Object(m.jsx)("span",{children:e.category})]})]}),Object(m.jsx)("button",{className:"btn",onClick:function(){ne({"fbMarket.facebookPage.id":e.id,"fbMarket.facebookPage.name":e.name,"fbMarket.facebookPage.access_token":e.access_token,"fbMarket.facebookPage.profileImg":e.picture.data.url,"fbMarket.facebookPage.category":e.category}).then((function(e){var t=e.user;o((function(e){return Object(s.a)(Object(s.a)({},e),{},{fbMarket:t.fbMarket})}))}))},children:"Connect"})]},t)})),Object(m.jsxs)("li",{children:[Object(m.jsxs)("div",{className:"profile",children:[Object(m.jsx)(d.n,{src:"/profile-user.jpg"}),Object(m.jsx)("p",{children:"Create Page"})]}),Object(m.jsx)("button",{className:"btn",onClick:function(){return v(!0)},children:"Create new"})]})]})]}),Object(m.jsx)(j.b,{head:!0,label:"Create a new Facebook business Page",open:p,setOpen:function(){v(!1),n.api("/me/accounts","GET",{fields:"picture{url},access_token,name,category,business",access_token:d.o.get("facebook_user_accessToken")},(function(e){console.log("facebook pages:",e),e.data&&O(e.data)}))},className:"createNewPage",children:Object(m.jsxs)("div",{className:"content",children:[Object(m.jsx)("p",{children:"You'll be redirected to Facebook where you can create a new business Page. All you need for now are basic details such as:"}),Object(m.jsxs)("ul",{children:[Object(m.jsx)("li",{children:"Business Page name"}),Object(m.jsx)("li",{children:"Business Page category"}),Object(m.jsx)("li",{children:"Profile Photo"}),Object(m.jsx)("li",{children:"Cover photo"}),Object(m.jsx)("li",{children:"Store description"})]}),Object(m.jsx)("p",{children:"As soon as you add these details, return to Delivery Pay and finish setup. You can always update your Page later."}),Object(m.jsxs)("a",{target:"_blank",href:"https://www.facebook.com/pages/create/?ref_type=hc",children:[Object(m.jsx)(d.j,{})," Go to Facebook"]})]})})]})},ue=function(e){var t,n,c=e.setStep,l=window.FB,o=Object(r.useContext)(i.d),j=o.user,u=o.setUser,b=Object(r.useState)([]),h=Object(a.a)(b,2),O=(h[0],h[1],Object(r.useState)(null===(t=j.fbMarket)||void 0===t||null===(n=t.commerceAccount)||void 0===n?void 0:n.catalog)),x=Object(a.a)(O,2),f=x[0],p=x[1];return Object(r.useEffect)((function(){var e,t;p(null===(e=j.fbMarket)||void 0===e||null===(t=e.commerceAccount)||void 0===t?void 0:t.catalog)}),[j]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("p",{className:"note",children:["Create a Commerce account to start selling on Facebook, Instagram, or both. Once you have an account you\u2019ll be able to customize your Shop and collections in the"," ",Object(m.jsxs)("a",{target:"_blank",href:"https://www.facebook.com/business/help/2371372636254534",children:["Facebook Commerce Manager ",Object(m.jsx)(d.j,{})]}),"."]}),Object(m.jsxs)("ul",{children:[f&&Object(m.jsxs)("li",{className:"catalog",children:[Object(m.jsx)("p",{children:"PRODUCTS WILL BE SYNCED TO THIS CATALOG"}),Object(m.jsx)("p",{children:f.name}),Object(m.jsxs)("span",{children:["ID: ",f.id]})]}),!f&&Object(m.jsxs)("li",{children:[Object(m.jsxs)("div",{className:"profile",children:[Object(m.jsx)(d.n,{src:"/profile-user.jpg"}),Object(m.jsx)("p",{children:"Create a new Commerce Account"})]}),Object(m.jsx)("button",{className:"btn",onClick:function(){l.api("/".concat(j.fbMarket.businessManager.id,"/owned_product_catalogs"),"GET",{access_token:d.o.get("facebook_user_accessToken")},function(){var e=Object(V.a)(E.a.mark((function e(t){var n,a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.data,e.t0=n.find((function(e){return"Delivery Pay Product Catalog"===e.name})),e.t0){e.next=6;break}return e.next=5,l.api("/".concat(j.fbMarket.businessManager.id,"/owned_product_catalogs"),"POST",{name:"Delivery Pay Product Catalog",access_token:d.o.get("facebook_user_accessToken")},(function(e){return console.log(e.id),e.id?Object(s.a)(Object(s.a)({},e),{},{name:"Delivery Pay Product Catalog"}):null}));case 5:e.t0=e.sent;case 6:(a=e.t0)&&(p(a),ne({"fbMarket.commerceAccount.catalog":a}).then((function(e){var t=e.user;u((function(e){return Object(s.a)(Object(s.a)({},e),{},{fbMarket:t.fbMarket})})),c("terms")})));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},children:"Create new"})]})]})]})},be=function(){var e,t,n,c,l,u,b,h,O,x,f,p,v,g,y,k,N,C,S,w,M,D,_,P,F,A,Y=Object(r.useState)(null),T=Object(a.a)(Y,2),R=T[0],q=T[1],I=Object(r.useContext)(i.d),L=I.user,B=I.setUser,E=window.FB,V=Object(r.useState)(""),H=Object(a.a)(V,2),U=H[0],Z=H[1],W=Object(r.useState)(!1),G=Object(a.a)(W,2),J=(G[0],G[1]);return Object(r.useEffect)((function(){var e,t,n,c,s,a,r,i,l,o;console.log(L.fbMarket),(null===(e=L.fbMarket)||void 0===e||null===(t=e.user)||void 0===t?void 0:t.id)?(null===(n=L.fbMarket)||void 0===n||null===(c=n.businessManager)||void 0===c?void 0:c.id)?(null===(s=L.fbMarket)||void 0===s||null===(a=s.facebookPage)||void 0===a?void 0:a.id)?(null===(r=L.fbMarket)||void 0===r||null===(i=r.commerceAccount)||void 0===i||null===(l=i.catalog)||void 0===l?void 0:l.id)?(null===(o=L.fbMarket)||void 0===o?void 0:o.userAgreement)||Z("terms"):Z("commerceAccount"):Z("fbPage"):Z("businessManager"):Z("account")}),[L]),Object(r.useEffect)((function(){}),[]),Object(m.jsxs)("div",{className:"fbMarket",children:[Object(m.jsx)("h1",{children:"Facebook marketplace"}),Object(m.jsxs)("div",{className:"setup",children:[Object(m.jsxs)(oe,{data:(null===(e=L.fbMarket)||void 0===e||null===(t=e.user)||void 0===t?void 0:t.id)?L.fbMarket.user:null,defaultStatus:"account"===U,step:U,label:"Facebook Account",children:[Object(m.jsx)("p",{className:"note",children:"Delivery Pay uses your personal Facebook account to access your business accounts."}),(null===(n=L.fbMarket)||void 0===n||null===(c=n.user)||void 0===c?void 0:c.id)&&Object(m.jsx)("p",{children:"Now you can log into Delivery Pay using this account."}),Object(m.jsxs)("div",{className:"profile",children:[Object(m.jsx)("div",{className:"user",children:(null===(l=L.fbMarket)||void 0===l||null===(u=l.user)||void 0===u?void 0:u.id)?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(d.n,{src:L.fbMarket.user.profileImg||"/profile-user.jpg"},"img"),Object(m.jsx)("p",{children:L.fbMarket.user.name})]}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(d.n,{src:"/profile-user.jpg"},"placeholder"),Object(m.jsx)("p",{children:"Connect your Facebook account to get started"})]})}),(null===(b=L.fbMarket)||void 0===b||null===(h=b.user)||void 0===h?void 0:h.id)?Object(m.jsx)("button",{className:"btn",onClick:function(){E.logout((function(e){console.log(e)})),d.o.remove("facebook_user_accessToken"),ne({"fbMarket.user":{},"fbMarket.businessManager":{},"fbMarket.facebookPage":{},"fbMarket.dataSharing":null,"fbMarket.commerceAccount":{},"fbMarket.userAgreement":!1}).then((function(e){var t=e.user;B((function(e){return Object(s.a)(Object(s.a)({},e),{},{fbMarket:t.fbMarket})}))}))},children:"Disconnect"}):Object(m.jsx)("button",{className:"btn",onClick:function(){E.login((function(e){var t;d.o.set("facebook_user_accessToken",null===(t=e.authResponse)||void 0===t?void 0:t.accessToken);var n=e.authResponse.accessToken;fetch("/api/updateFBMarketUser",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({accessToken:n})}).then((function(e){return e.json()})).then((function(e){"ok"===e.code&&(console.log("long_lived_token saved"),d.o.set("facebook_user_accessToken",e.long_lived_token))})),E.api("/me","GET",{fields:"name,picture.type(large){url}"},(function(e){console.log(e),e.id&&ne({"fbMarket.user.name":e.name,"fbMarket.user.id":e.id,"fbMarket.user.profileImg":e.picture.data.url}).then((function(e){var t=e.user;B((function(e){return Object(s.a)(Object(s.a)({},e),{},{fbMarket:t.fbMarket})}))}))}))}))},children:"Connect Account"})]})]}),Object(m.jsx)(oe,{disabled:!(null===(O=L.fbMarket)||void 0===O||null===(x=O.user)||void 0===x?void 0:x.id),data:(null===(f=L.fbMarket)||void 0===f||null===(p=f.businessManager)||void 0===p?void 0:p.id)?L.fbMarket.businessManager:null,defaultStatus:"businessManager"===U,label:"Business Manager",className:"businessManager",children:Object(m.jsx)(je,{setLoading:J})}),Object(m.jsx)(oe,{data:(null===(v=L.fbMarket)||void 0===v||null===(g=v.facebookPage)||void 0===g?void 0:g.id)?L.fbMarket.facebookPage:null,defaultStatus:"fbPage"===U,label:"Facebook Page",className:"page",disabled:!(null===(y=L.fbMarket)||void 0===y||null===(k=y.businessManager)||void 0===k?void 0:k.id),children:Object(m.jsx)(de,{})}),Object(m.jsx)(oe,{data:(null===(N=L.fbMarket)||void 0===N||null===(C=N.commerceAccount)||void 0===C||null===(S=C.catalog)||void 0===S?void 0:S.id)?L.fbMarket.commerceAccount:null,disabled:!(null===(w=L.fbMarket)||void 0===w||null===(M=w.facebookPage)||void 0===M?void 0:M.id),label:"Facebook Commerce Account",defaultStatus:"commerceAccount"===U,className:"commerceAccount",children:Object(m.jsx)(ue,{setStep:Z})}),Object(m.jsxs)(oe,{disabled:!(null===(D=L.fbMarket)||void 0===D||null===(_=D.commerceAccount)||void 0===_||null===(P=_.catalog)||void 0===P?void 0:P.id),data:(null===(F=L.fbMarket)||void 0===F?void 0:F.userAgreement)||null,defaultStatus:"terms"===U,label:"Terms and Conditions",children:[Object(m.jsxs)("p",{children:["By proceeding, you accept"," ",Object(m.jsxs)("a",{target:"_blank",href:"https://www.facebook.com/legal/commerce_product_merchant_agreement",children:["Facebook Commerce Terms ",Object(m.jsx)(d.j,{})]}),"."]}),!(null===(A=L.fbMarket)||void 0===A?void 0:A.userAgreement)&&Object(m.jsx)("button",{className:"btn",onClick:function(){ne({"fbMarket.userAgreement":!0}).then((function(e){var t=e.user;B((function(e){return Object(s.a)(Object(s.a)({},e),{},{fbMarket:t.fbMarket})})),Z(""),q(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return q(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.A,{}),Object(m.jsx)("h4",{children:"Facebook marketplace has been setup successfully. Now you can add products to facebook marketplace directly from Delivery Pay."}),Object(m.jsx)(o.b,{to:"/account/myShop/products",children:"Add your first product"})]})]}))}))},children:"Finish setup"})]})]}),Object(m.jsx)(j.b,{open:R,className:"msg",children:R})]})},he=n(117),Oe=Object(r.lazy)((function(){return Promise.resolve().then(n.t.bind(null,52,7))})),xe=Object(r.lazy)((function(){return Promise.all([n.e(9),n.e(10)]).then(n.t.bind(null,261,7))}));n(159);var fe=function(e){var t,n,l,u,b,h=e.prefill,O=e.onSuccess,x=e.categories,f=Object(r.useContext)(i.d).user,p=Object(r.useState)(!1),v=Object(a.a)(p,2),g=v[0],y=v[1],k=Object(r.useState)((null===h||void 0===h?void 0:h.type)||"product"),N=Object(a.a)(k,2),C=N[0],S=N[1],w=Object(r.useState)((null===h||void 0===h?void 0:h.category)||""),M=Object(a.a)(w,2),D=M[0],_=M[1],P=Object(r.useState)({type:(null===h||void 0===h||null===(t=h.discount)||void 0===t?void 0:t.type)||null,amount:(null===h||void 0===h||null===(n=h.discount)||void 0===n?void 0:n.amount)||0,dscr:(null===h||void 0===h||null===(l=h.discount)||void 0===l?void 0:l.dscr)||""}),F=Object(a.a)(P,2),A=F[0],Y=F[1],T=Object(r.useState)((null===h||void 0===h?void 0:h.name)||""),R=Object(a.a)(T,2),q=R[0],I=R[1],L=Object(r.useState)((null===h||void 0===h?void 0:h.dscr)||""),B=Object(a.a)(L,2),U=B[0],Z=B[1],W=Object(r.useState)((null===h||void 0===h?void 0:h.price)||""),G=Object(a.a)(W,2),J=G[0],z=G[1],$=Object(r.useState)((null===h||void 0===h?void 0:h.images)||[]),K=Object(a.a)($,2),Q=K[0],X=K[1],ee=Object(r.useState)((null===h||void 0===h?void 0:h.gst)||(null===(u=f.gst)||void 0===u?void 0:u.verified)?f.gst.amount:0),te=Object(a.a)(ee,2),ne=te[0],ce=te[1],se=Object(r.useState)((null===h||void 0===h?void 0:h.hsn)||""),ae=Object(a.a)(se,2),re=ae[0],ie=ae[1],le=Object(r.useState)(null===h||void 0===h?void 0:h.available),oe=Object(a.a)(le,2),je=oe[0],de=oe[1],ue=Object(r.useState)(null),be=Object(a.a)(ue,2),he=be[0],Oe=be[1],xe=Object(r.useState)((null===h||void 0===h?void 0:h.tags)||[]),fe=Object(a.a)(xe,2),me=fe[0],pe=fe[1],ve=function(){var e=Object(V.a)(E.a.mark((function e(t){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),y(!0),!Q.length){e.next=8;break}return e.next=5,Object(d.D)({files:Q,setMsg:Oe});case 5:e.t0=e.sent,e.next=9;break;case 8:e.t0=[];case 9:n=e.t0,fetch("/api/".concat(h?"edit":"add","Product"),{method:h?"PATCH":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object(s.a)({type:C,name:q,dscr:U,price:+J,images:n,category:D,tags:me,available:!0===je||!1===je?je:+je,gst:ne,discount:A},h&&{_id:h._id}))}).then((function(e){return e.json()})).then((function(e){y(!1),"ok"===e.code?null===O||void 0===O||O(e.product):403===e.code?Oe(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return Oe(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"You can't add more that 100 product at a time. Delete a product/service and try again."})]})]})):Oe(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return Oe(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Could not add product. please try again."})]})]}))})).catch((function(e){y(!1),console.log(e),Oe(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return Oe(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Could not add product. Make sure you're online."})]})]}))}));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("form",{onSubmit:ve,className:g?"loading":"",children:[Object(m.jsxs)("section",{className:"type",children:[Object(m.jsx)("label",{children:"Type"}),Object(m.jsx)(d.h,{defaultValue:C,options:[{label:"Product",value:"product"},{label:"Service",value:"service"},{label:"Other",value:"other"}],onChange:function(e){S(e.value)}})]}),Object(m.jsxs)("section",{className:"name",children:[Object(m.jsx)("label",{children:"Name of the product/service"}),Object(m.jsx)("input",{value:q,onChange:function(e){return I(e.target.value)},required:!0})]}),Object(m.jsxs)("section",{className:"category",children:[Object(m.jsxs)("label",{children:["Category"," ",Object(m.jsxs)(d.C,{children:["You can Add/Edit/Delete your categories"," ",Object(m.jsx)(o.b,{to:"/account/myShop/settings",children:"here"})]})]}),Object(m.jsx)(d.h,{required:!0,defaultValue:D,options:x.map((function(e){return{label:e,value:e}})),onChange:function(e){return _(e.value)}})]}),Object(m.jsxs)("section",{children:[Object(m.jsx)("label",{children:"Price \u20b9"}),Object(m.jsx)(d.r,{defaultValue:J,onChange:function(e){return z(e.target.value)},required:!0})]}),Object(m.jsx)("section",{className:"available",children:"product"===C?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("label",{children:"Available in stock"}),Object(m.jsx)(d.r,{required:!0,defaultValue:je,onChange:function(e){return de(e.target.value)}})]}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("label",{children:"Availability"}),Object(m.jsx)(d.h,{defaultValue:je,required:!0,options:[{label:"Available",value:!0},{label:"Not available",value:!1}],onChange:function(e){return de(e.value)}})]})}),Object(m.jsxs)("section",{className:"dscr",children:[Object(m.jsx)("label",{children:"Description of the product/service"}),Object(m.jsx)(H.a,{value:U,onChange:function(e){return Z(e.target.value)},required:!0})]}),Object(m.jsxs)("section",{className:"tags",children:[Object(m.jsx)("label",{children:"Tags"}),Object(m.jsxs)("ul",{children:[me.map((function(e){return Object(m.jsxs)("li",{children:[e,Object(m.jsx)("button",{onClick:function(){pe((function(t){return t.filter((function(t){return t!==e}))}))},children:Object(m.jsx)(d.F,{})})]},e)})),Object(m.jsxs)("li",{className:"form",children:[Object(m.jsx)("input",{placeholder:"addNewTag",onKeyPress:function(e){var t="".concat(e.target.value.trim());if(13===e.charCode){if(e.preventDefault(),!t)return;pe((function(e){return[].concat(Object(c.a)(e.filter((function(e){return e!==t}))),[t])})),e.target.focus(),e.target.value=""}}}),Object(m.jsx)("button",{type:"button",onClick:function(e){var t=e.target.previousElementSibling,n="".concat(e.target.previousElementSibling.value.trim());n&&(pe((function(e){return[].concat(Object(c.a)(e.filter((function(e){return e!==n}))),[n])})),t.value="",t.focus())},children:"Add Tag"})]})]})]}),Object(m.jsxs)("section",{className:"images",children:[Object(m.jsx)("label",{children:"Images of the product"}),Object(m.jsx)(d.k,{multiple:!0,prefill:null===h||void 0===h?void 0:h.images,accept:"image/*",onChange:function(e){return X(e)}})]}),Object(m.jsxs)("section",{children:[Object(m.jsx)("label",{children:"HSN Code"}),Object(m.jsx)("input",{value:re,onChange:function(e){return ie(e.target.value)}})]}),(null===(b=f.gst)||void 0===b?void 0:b.verified)&&Object(m.jsxs)("section",{children:[Object(m.jsx)("label",{children:"GST (%)"}),Object(m.jsx)(d.r,{defaultValue:ne,onChange:function(e){return ce(e.target.value)}})]}),Object(m.jsxs)("section",{className:"discountType",children:[Object(m.jsx)("label",{children:"Discount Type"}),Object(m.jsx)(d.h,{defaultValue:A.type,options:[{label:"None",value:null},{label:"Percent",value:"percent"},{label:"Flat",value:"flat"}],onChange:function(e){return Y((function(t){return Object(s.a)(Object(s.a)({},t),{},{type:e.value})}))}})]}),null!==A.type&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("section",{className:"discountAmount",children:[Object(m.jsxs)("label",{children:["Amount ","percent"===A.type&&"(%)"]}),Object(m.jsx)(d.r,{defaultValue:A.amount,onChange:function(e){return Y((function(t){return Object(s.a)(Object(s.a)({},t),{},{amount:e.target.value})}))}})]}),Object(m.jsxs)("section",{className:"discountDscr",children:[Object(m.jsx)("label",{children:"Discount description"}),Object(m.jsx)(H.a,{defaultValue:A.dscr,onChange:function(e){return Y((function(t){return Object(s.a)(Object(s.a)({},t),{},{dscr:e.target.value})}))}})]})]}),J&&Object(m.jsxs)("section",{className:"finalPrice",children:[Object(m.jsxs)("p",{children:[Object(m.jsx)("label",{children:"Input price"}),J]}),+ne>0&&Object(m.jsxs)("p",{className:"gst",children:[Object(m.jsxs)("label",{children:["GST ",ne,"%"]}),"+",(+J/100*+ne).fix()]}),A.amount>0&&"flat"===A.type&&Object(m.jsxs)("p",{children:[Object(m.jsx)("label",{children:"Discount flat"}),"- \u20b9",(+A.amount).fix()]}),A.amount>0&&"percent"===A.type&&Object(m.jsxs)("p",{children:[Object(m.jsxs)("label",{children:["Discount ",A.amount,"%"]}),"- \u20b9",(+J/100*A.amount).fix()]}),Object(m.jsxs)("p",{className:"final",children:[Object(m.jsx)("label",{children:"Listing Price"}),"\u20b9",(+J+ +J/100*+ne-("percent"===A.type?+J/100*A.amount:0)-("flat"===A.type?A.amount:0)).fix()]})]}),Object(m.jsx)("section",{className:"btns",children:Object(m.jsx)("button",{className:"submit",type:"submit",children:"Submit"})}),Object(m.jsx)("div",{className:"pBtm"})]}),g&&Object(m.jsx)("div",{className:"spinnerContainer",children:Object(m.jsx)("div",{className:"spinner"})}),Object(m.jsx)(j.b,{className:"msg",open:he,children:he})]})},me=function(e){var t,n=e.categories,l=e.shopSetupComplete,u=Object(r.useContext)(i.d).user,h=(window.FB,Object(r.useRef)()),O=Object(r.useState)(!1),x=Object(a.a)(O,2),p=x[0],v=x[1],g=Object(r.useState)(0),y=Object(a.a)(g,2),k=y[0],N=y[1],C=Object(r.useState)(1),S=Object(a.a)(C,2),w=S[0],M=S[1],D=Object(r.useState)(20),_=Object(a.a)(D,2),P=_[0],F=_[1],A=Object(r.useState)(""),Y=Object(a.a)(A,2),T=Y[0],R=Y[1],q=Object(r.useState)(""),I=Object(a.a)(q,2),L=I[0],B=I[1],E=Object(r.useState)(""),V=Object(a.a)(E,2),H=V[0],U=V[1],Z=Object(r.useState)({column:"createdAt",order:"dsc"}),W=Object(a.a)(Z,2),G=W[0],J=(W[1],Object(r.useState)({startDate:new Date,endDate:new Date})),z=Object(a.a)(J,2),$=z[0],K=z[1],Q=Object(r.useState)(""),X=Object(a.a)(Q,2),ee=X[0],te=X[1],ne=Object(r.useState)(!1),ce=Object(a.a)(ne,2),se=ce[0],ae=ce[1],re=Object(r.useState)({}),ie=Object(a.a)(re,2),le=ie[0],oe=ie[1],je=Object(r.useState)([]),de=Object(a.a)(je,2),ue=de[0],be=de[1],he=Object(r.useState)(!1),xe=Object(a.a)(he,2),me=xe[0],ge=xe[1],ye=Object(r.useState)([]),ke=Object(a.a)(ye,2),Ne=ke[0],Ce=ke[1],Se=Object(r.useState)(!1),we=Object(a.a)(Se,2),Me=we[0],De=we[1],_e=Object(r.useState)(null),Pe=Object(a.a)(_e,2),Fe=Pe[0],Ae=Pe[1],Ye=function(e){e.length&&fetch("/api/deleteProducts",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({_ids:e})}).then((function(e){return e.json()})).then((function(t){"ok"===t.code?(Ce([]),be((function(t){return t.filter((function(t){return!e.some((function(e){return e===t._id}))}))}))):Ae(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return Ae(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Could not delete products. Try again."})]})]}))})).catch((function(e){console.log(e),Ae(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return Ae(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Could not delete products. Make sure you're online."})]})]}))}))},Te=function(){return Ye(Ne)},Re=function(e){fetch("/api/addToFbMarket",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({_ids:e,access_token:d.o.get("facebook_user_accessToken")})}).then((function(e){return e.json()})).then((function(e){var t=e.code,n=e.fb_products;if("ok"===t){var c=[],a=[];n.forEach((function(e,t){e.success?c.push(e):a.push(e)})),be((function(e){return e.map((function(e){var t=n.find((function(t){return t._id===e._id}));return t?Object(s.a)(Object(s.a)({},e),{},{fbMarketId:t.fbMarketId}):e}))})),Ae(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return Ae(null)},children:"Okay"}),Object(m.jsx)("div",{children:0===a.length?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(d.A,{}),Object(m.jsxs)("h4",{children:[c.length," products has been added."]})]}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(d.i,{}),Object(m.jsxs)("h4",{children:[a.length," products failed."]})]})})]}))}else Ae(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return Ae(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Could not add products to Facebook Marketplace."})]})]}))})).catch((function(e){console.log(e),Ae(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return Ae(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Could not add products to Facebook Marketplace. Make sure you're online."})]})]}))}))},qe=function(e){fetch("/api/removeFromFbMarket",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({_ids:e,access_token:d.o.get("facebook_user_accessToken")})}).then((function(e){return e.json()})).then((function(e){var t=e.code,n=e.fb_products;if("ok"===t){var c=[],a=[];n.forEach((function(e,t){e.success?c.push(e):a.push(e)})),be((function(e){return e.map((function(e){var t=n.find((function(t){return t._id===e._id}));return t?Object(s.a)(Object(s.a)({},e),{},{fbMarketId:t.fbMarketId}):e}))})),Ae(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return Ae(null)},children:"Okay"}),Object(m.jsx)("div",{children:0===a.length?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(d.A,{}),Object(m.jsxs)("h4",{children:[c.length," products has been removed."]})]}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(d.i,{}),Object(m.jsxs)("h4",{children:[a.length," products failed to remove."]})]})})]}))}else Ae(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return Ae(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Could not remove products from Facebook Marketplace."})]})]}))})).catch((function(e){console.log(e),Ae(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return Ae(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Could not remove products from Facebook Marketplace. Make sure you're online."})]})]}))}))};return Object(r.useEffect)((function(){var e=f()($.startDate).format("YYYY-MM-DD"),t=(f()($.endDate).format("YYYY-MM-DD"),f()(new Date($.endDate).setDate($.endDate.getDate()+1)).format("YYYY-MM-DD"));fetch("/api/products?".concat(new URLSearchParams(Object(s.a)(Object(s.a)(Object(s.a)(Object(s.a)({},L&&{q:L}),{},{page:w,perPage:P,sort:G.column,order:G.order},se&&{dateFrom:e,dateTo:t}),T&&{category:T}),ee&&{type:ee})))).then((function(e){return e.json()})).then((function(e){"ok"===e.code&&(be(e.products),N(e.total))})).catch((function(e){console.log(e),Ae(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return Ae(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Could not get products."})]})]}))}))}),[T,L,w,P,se,ee,Me]),Object(r.useLayoutEffect)((function(){if(h.current){var e=h.current.getBoundingClientRect(),t=e.height,n=e.y,c=e.width,s=e.x;oe({position:"fixed",top:t+n+4,right:window.innerWidth-s-c})}}),[]),Object(r.useEffect)((function(){me||Ce([])}),[me]),Object(r.useEffect)((function(){0===Ne.length&&ge(!1)}),[Ne]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:"benner",children:[Object(m.jsx)("p",{children:"Product Management"}),l?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("button",{onClick:function(){return v(!0)},children:[Object(m.jsx)(d.t,{})," Add Product"]}),Object(m.jsxs)("button",{className:"batchUpload",onClick:function(){return De(!0)},children:[Object(m.jsx)(d.t,{})," Batch Upload"]})]}):Object(m.jsx)(o.b,{to:"/account/myShop/settings",className:"err",children:Object(m.jsx)("p",{children:"Please complete your shop information to add product."})})]}),Object(m.jsxs)("div",{className:"filters",children:[Object(m.jsxs)("section",{children:[Object(m.jsx)("label",{children:"Total:"}),k]}),Object(m.jsxs)("section",{children:[Object(m.jsx)("label",{children:"Per Page:"}),Object(m.jsx)(d.h,{defaultValue:0,options:[{label:"20",value:20},{label:"30",value:30},{label:"50",value:50}],onChange:function(e){return F(e.value)}})]}),Object(m.jsxs)("section",{className:"search",children:[Object(m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"23",height:"23",viewBox:"0 0 23 23",children:Object(m.jsx)("path",{id:"Icon_ionic-ios-search","data-name":"Icon ionic-ios-search",d:"M27.23,25.828l-6.4-6.455a9.116,9.116,0,1,0-1.384,1.4L25.8,27.188a.985.985,0,0,0,1.39.036A.99.99,0,0,0,27.23,25.828ZM13.67,20.852a7.2,7.2,0,1,1,5.091-2.108A7.155,7.155,0,0,1,13.67,20.852Z",transform:"translate(-4.5 -4.493)",fill:"#707070",opacity:"0.74"})}),Object(m.jsx)("input",{value:L,onChange:function(e){return B(e.target.value)},placeholder:"Search for products & services"}),L&&Object(m.jsx)("button",{onClick:function(){return B("")},children:Object(m.jsx)(d.F,{})})]}),Object(m.jsxs)("section",{className:"type",children:[Object(m.jsx)("label",{children:"Type:"}),Object(m.jsx)(d.h,{defaultValue:0,options:[{label:"All",value:""},{label:"Product",value:"product"},{label:"Service",value:"service"},{label:"Other",value:"other"}],onChange:function(e){return te(e.value)}})]}),Object(m.jsxs)("section",{className:"category",children:[Object(m.jsx)("label",{children:"Category:"}),Object(m.jsx)(d.h,{defaultValue:0,options:[{label:"All",value:""}].concat(Object(c.a)(n.map((function(e){return{label:e,value:e}})))),onChange:function(e){return R(e.value)}})]}),Object(m.jsxs)("section",{className:"date ".concat(se?"open":""),ref:h,onClick:function(){return U(!0)},children:[Object(m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"30.971",height:"30.971",viewBox:"0 0 30.971 30.971",children:Object(m.jsx)("path",{id:"Path_299","data-name":"Path 299",d:"M3.992,2.42H6.775V.968a.968.968,0,1,1,1.936,0V2.42H22.26V.968a.968.968,0,1,1,1.936,0V2.42h2.783a4,4,0,0,1,3.992,3.992V26.978a4,4,0,0,1-3.992,3.992H3.992A4,4,0,0,1,0,26.978V6.412A4,4,0,0,1,3.992,2.42ZM26.978,4.355H24.2v.968a.968.968,0,1,1-1.936,0V4.355H8.71v.968a.968.968,0,1,1-1.936,0V4.355H3.992A2.059,2.059,0,0,0,1.936,6.412v2.3h27.1v-2.3A2.059,2.059,0,0,0,26.978,4.355ZM3.992,29.035H26.978a2.059,2.059,0,0,0,2.057-2.057V10.646H1.936V26.978A2.059,2.059,0,0,0,3.992,29.035Z",fill:"#336cf9"})}),se&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:"dates",children:[Object(m.jsxs)("p",{children:["From:"," ",Object(m.jsx)(Oe,{format:"DD MMM, YYYY",children:$.startDate})]}),Object(m.jsxs)("p",{children:["To: ",Object(m.jsx)(Oe,{format:"DD MMM, YYYY",children:$.endDate})]})]}),Object(m.jsx)("button",{className:"clearDateFilter",onClick:function(){K({startDate:new Date,endDate:new Date}),ae(!1)},children:Object(m.jsx)(d.F,{})})]})]})]}),Object(m.jsxs)("table",{className:"table products",children:[Object(m.jsx)("thead",{children:Ne.length>0?Object(m.jsxs)("tr",{className:"batchAction",children:[Object(m.jsx)("th",{className:"checkContainer",children:Object(m.jsx)(d.f,{value:me,defaultValue:me,onChange:function(e){return ge(e)}})}),Object(m.jsx)("th",{children:Object(m.jsx)("button",{onClick:function(){return Object(j.a)({label:"Batch delete",question:"You sure you want to delete these ".concat(Ne.length," items?"),callback:Te})},children:"Delete"})}),(null===(t=u.fbMarket)||void 0===t?void 0:t.userAgreement)&&d.o.get("facebook_user_accessToken")&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("th",{children:Object(m.jsx)("button",{onClick:function(){Re(Ne),Ce([])},children:"Add to Facebook"})}),Object(m.jsx)("th",{children:Object(m.jsx)("button",{onClick:function(){qe(Ne),Ce([])},children:"Remove from Facebook"})})]})]}):Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{className:"checkContainer",children:Object(m.jsx)(d.f,{value:me,defaultValue:me,onChange:function(e){return ge(e)}})}),Object(m.jsx)("th",{className:"date",children:"Date"}),Object(m.jsx)("th",{children:"Image"}),Object(m.jsx)("th",{className:"name",children:"Name"}),Object(m.jsx)("th",{children:"Type"}),Object(m.jsx)("th",{children:"Facebook Marketplace"}),Object(m.jsx)("th",{children:"Available"}),Object(m.jsx)("th",{children:"Price"}),Object(m.jsx)("th",{children:"GST"}),Object(m.jsx)("th",{children:"Discount"}),Object(m.jsx)("th",{children:"Listing Price"}),Object(m.jsx)("th",{children:"Actions"})]})}),Object(m.jsxs)("tbody",{children:[ue.map((function(e){return Object(m.jsx)(pe,{categories:n,product:e,setProducts:be,selectAll:me,setBatch:Ce,batch:Ne,deleteItems:Ye,addToFbMarket:Re,removeFromFbMarket:qe},e._id)})),0===ue.length&&Object(m.jsx)("tr",{className:"placeholder",children:Object(m.jsx)("td",{children:"No product yet."})})]})]}),Object(m.jsx)(d.s,{total:k,btns:5,currentPage:w,perPage:P,setPage:M}),Object(m.jsx)(j.b,{className:"msg",open:Fe,children:Fe}),Object(m.jsx)(j.b,{head:!0,label:"Edit Product/Service",setOpen:v,open:p,className:"productForm",children:Object(m.jsx)(fe,{categories:n,onSuccess:function(e){be((function(t){return[].concat(Object(c.a)(t),[e])})),v(!1),Ae(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return Ae(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.A,{}),Object(m.jsx)("h4",{children:"Product added."})]})]}))}})}),Object(m.jsx)(j.b,{open:H,onBackdropClick:function(){return U(!1)},className:"datePicker",backdropClass:"datePicker",style:le,children:Object(m.jsx)(b.DateRange,{className:"dateRange",ranges:[$],onChange:function(e){K(e.range1),e.range1.endDate!==e.range1.startDate&&(U(!1),ae(!0))}})}),Object(m.jsx)(j.b,{open:Me,head:!0,label:"Batch product upload",setOpen:De,className:"batchItemPreview",children:Object(m.jsx)(ve,{categories:n,onSuccess:function(){De(!1)}})})]})},pe=function(e){var t,n,s,l,u=e.product,b=e.setProducts,h=e.categories,O=e.selectAll,x=e.setBatch,f=e.batch,p=e.deleteItems,v=e.addToFbMarket,g=e.removeFromFbMarket,y=Object(r.useContext)(i.d).user,k=Object(r.useState)(O||!1),N=Object(a.a)(k,2),C=N[0],S=N[1],w=Object(r.useState)(!1),M=Object(a.a)(w,2),D=M[0],_=M[1],P=Object(r.useState)(!1),F=Object(a.a)(P,2),A=F[0],Y=F[1];return Object(r.useEffect)((function(){S(O)}),[O]),Object(r.useEffect)((function(){x(C?function(e){return[].concat(Object(c.a)(e),[u._id])}:function(e){return e.filter((function(e){return e!==u._id}))})}),[C]),Object(m.jsxs)("tr",{className:"product ".concat(C?"selected":""),children:[Object(m.jsx)("td",{className:"checkContainer",children:Object(m.jsx)(d.f,{defaultValue:C,value:C,onChange:function(e){S(e)}})}),Object(m.jsx)("td",{className:"date",children:Object(m.jsx)(Oe,{format:"DD-MM-YY",children:u.createdAt})}),Object(m.jsx)("td",{className:"thumbs",children:Object(m.jsx)(d.p,{links:u.images})}),Object(m.jsx)("td",{className:"name",children:u.name}),Object(m.jsx)("td",{children:u.type}),Object(m.jsx)("td",{children:u.fbMarketId?"Added":"N/A"}),Object(m.jsxs)("td",{children:[u.available," ",!0===u.available&&"Available",!1===u.available&&"Unavailable"]}),Object(m.jsxs)("td",{children:["\u20b9",u.price]}),Object(m.jsx)("td",{children:(null===(t=y.gst)||void 0===t?void 0:t.verified)?(u.gst||(null===(n=y.gst)||void 0===n?void 0:n.amount)||0)+"%":"N/A"}),Object(m.jsxs)("td",{children:["\u20b9",Object(d.H)(u)||0]}),Object(m.jsxs)("td",{children:["\u20b9",Object(d.I)({product:u,gst:y.gst})||0]}),Object(m.jsx)("td",{children:0===f.length&&Object(m.jsxs)(d.a,{icon:Object(m.jsx)(d.g,{}),children:[Object(m.jsx)(o.b,{to:"/marketplace/".concat(u._id),target:"_blank",children:"View"}),(null===(s=y.fbMarket)||void 0===s?void 0:s.userAgreement)&&d.o.get("facebook_user_accessToken")&&Object(m.jsx)(m.Fragment,{children:u.fbMarketId?Object(m.jsx)("button",{onClick:function(){return g([u._id])},children:"Remove from Facebook"}):Object(m.jsx)("button",{onClick:function(){return v([u._id])},children:"Add to Facebook"})}),!(null===(l=y.fbMarket)||void 0===l?void 0:l.userAgreement)&&Object(m.jsx)(o.b,{to:"/account/myShop/fbMarketplace",className:"edit",children:"Setup FB Marketplace"}),Object(m.jsx)(o.b,{to:"#",className:"edit",onClick:function(){return _(!0)},children:"Edit"}),Object(m.jsx)(o.b,{to:"#",className:"delete",onClick:function(){return Object(j.a)({label:"Removing Product",question:"You sure want to delete this product?",callback:function(){return p([u._id])}})},children:"Delete"})]})}),Object(m.jsx)(j.b,{head:!0,label:"Edit Product/Service",open:D,setOpen:_,className:"productForm",children:Object(m.jsx)(fe,{categories:h,onSuccess:function(e){b((function(t){return t.map((function(t){return t._id===e._id?e:t}))})),_(!1),Y(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return Y(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.A,{}),Object(m.jsx)("h4",{children:"Product updated."})]})]}))},prefill:u})}),Object(m.jsx)(j.b,{className:"msg",open:A,children:A})]})},ve=function(e){var t=e.onSuccess,n=e.categories,i=Object(r.useState)(!1),l=Object(a.a)(i,2),o=l[0],u=l[1],b=Object(r.useState)(1),h=Object(a.a)(b,2),O=h[0],x=h[1],f=Object(r.useState)(null),p=Object(a.a)(f,2),v=p[0],g=p[1],y=Object(r.useState)([]),k=Object(a.a)(y,2),N=k[0],C=k[1],S=Object(r.useState)(null),w=Object(a.a)(S,2),M=w[0],D=w[1],_=Object(r.useState)(""),P=Object(a.a)(_,2),F=P[0],A=P[1],Y=Object(r.useState)(null),T=Object(a.a)(Y,2),R=T[0],q=T[1],I=function(){u(!0),fetch("/api/updateDraft",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:v})}).then((function(e){return e.json()})).then((function(e){var n=e.code,c=e.updated;u(!1),D("ok"===n?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){D(null),null===t||void 0===t||t()},children:"Okay"}),Object(m.jsxs)("div",{children:[c?Object(m.jsx)(d.A,{}):Object(m.jsx)(d.i,{}),Object(m.jsxs)("h4",{children:[c," items has been updated."]})]})]}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return D(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Could not add products. Try again."})]})]}))})).catch((function(e){u(!1),console.log(e),D(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return D(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Could not add products. Make sure you're online."})]})]}))}))},L=function(){var e=Object(V.a)(E.a.mark((function e(t){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),u(!0),e.next=4,Object(d.D)({files:N,setMsg:D});case 4:if(e.t0=e.sent,e.t0){e.next=7;break}e.t0=[];case 7:if((n=e.t0).length===N.length){e.next=11;break}return D(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return D(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Could not upload images. Please try again."})]})]})),e.abrupt("return");case 11:fetch("/api/uploadProductImg",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({images:n,category:F})}).then((function(e){return e.json()})).then((function(e){if("ok"===e.code){console.log(e);var t=Object.entries({Images:"images",id:"_id",Name:"name",Description:"dscr",Material:"material","Size [Please specify mm, cm, inch or KG]":"size",Category:"category",Type:"type","Price in INR.":"price","Units Available":"available","HSN Code":"hsn","GST %":"gst"}).map((function(e){var t=Object(a.a)(e,2);return{label:t[0],key:t[1]}}));console.log(t,e.products),q({headers:t,data:e.products,filename:"Delivery Pay Product Draft.csv"})}else D(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return D(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Could not add products. Make sure you're online."})]})]}))})).catch((function(e){u(!1),console.log(e),D(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return D(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Could not add products. Make sure you're online."})]})]}))}));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsxs)("div",{className:"content",children:[Object(m.jsx)(oe,{label:"Create Draft",className:"createDraft",defaultStatus:1===O,data:R,children:Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("form",{onSubmit:L,children:[Object(m.jsxs)("section",{className:"category",children:[Object(m.jsx)("label",{children:"Choose category"}),Object(m.jsx)(d.h,{options:n.map((function(e){return{label:e,value:e.toLowerCase()}})),required:!0,onChange:function(e){return A(e.value)}})]}),Object(m.jsxs)("p",{children:["Choose images"," ",Object(m.jsx)("span",{children:"Choose 1 image for each product. you can add multiple images later."})]}),Object(m.jsx)(d.k,{onChange:function(e){return C(e)},multiple:!0}),Object(m.jsxs)("section",{className:"btns",children:[Object(m.jsx)("button",{className:"clean",type:"button",onClick:function(){return x(3)},children:"Already have a draft"}),R?Object(m.jsx)(he.CSVLink,Object(s.a)(Object(s.a)({},R),{},{className:"submit",type:"submit",onClick:function(){q(null),x(2)},children:"Download Draft"})):Object(m.jsx)("button",{className:"submit",children:"Create Draft"})]})]})})}),Object(m.jsxs)(oe,{label:"Populate With data",defaultStatus:2===O,children:[Object(m.jsx)("p",{children:"Populate the Sheet with real product data. Don't Change the header."}),Object(m.jsx)("button",{className:"submit",onClick:function(){return x(3)},children:"Next"})]}),Object(m.jsxs)(oe,{label:"Upload Draft",defaultStatus:3===O,children:[!!(null===v||void 0===v?void 0:v.length)&&Object(m.jsxs)("table",{className:"table",children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:"Type"}),Object(m.jsx)("th",{children:"Images"}),Object(m.jsx)("th",{className:"name",children:"Name"}),Object(m.jsx)("th",{className:"dscr",children:"Description"}),Object(m.jsx)("th",{children:"Available"}),Object(m.jsx)("th",{children:"Price"}),Object(m.jsx)("th",{children:"GST"}),Object(m.jsx)("th",{children:"Action"})]})}),Object(m.jsx)("tbody",{children:null===v||void 0===v?void 0:v.map((function(e,t){return Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:e.type}),Object(m.jsx)("td",{className:"thumbs",children:Object(m.jsx)(d.p,{links:e.images})}),Object(m.jsx)("td",{className:"name",children:e.name}),Object(m.jsx)("td",{className:"dscr",children:e.dscr}),Object(m.jsxs)("td",{children:[e.available,!0===e.available&&"Available",!1===e.available&&"Unavailable"]}),Object(m.jsx)("td",{children:e.price}),Object(m.jsx)("td",{children:e.gst}),Object(m.jsx)("td",{children:Object(m.jsx)("button",{className:"remove",onClick:function(){return g((function(e){var n=Object(c.a)(e);return n.splice(t,1),n}))},children:Object(m.jsx)(d.F,{})})})]},t)}))})]}),!(null===v||void 0===v?void 0:v.length)&&Object(m.jsxs)("div",{className:"uploadFile",children:[Object(m.jsxs)("p",{children:["Upload xlsx/csv file in. See the example file"," ",Object(m.jsx)("a",{href:"/batch_product_upload_xlsx_file_example.csv",target:"_blank",children:"here"}),"."]}),Object(m.jsx)("input",{type:"file",accept:".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",onChange:function(e){e.target.files[0]&&function(e,t){e.name;var n=new FileReader;n.onload=function(e){var n=e.target.result,c=xe.read(n,{type:"binary"}),s=c.SheetNames[0],a=c.Sheets[s],r=xe.utils.sheet_to_json(a,{header:1}),i=[],l=r.shift();r.forEach((function(e,t){var n={};l.forEach((function(t,c){var s;switch(t){case"Images":s="images";break;case"Name":s="name";break;case"Description":s="dscr";break;case"Material":s="material";break;case"Size [Please specify mm, cm, inch or KG]":s="size";break;case"Category":s="category";break;case"Type":s="type";break;case"Price in INR.":s="price";break;case"Units Available":s="available";break;case"HSN Code":s="hsn";break;case"GST %":s="gst";break;case"id":s="_id"}n[s]=e[c]})),i.push(n)})),t(i)},n.readAsBinaryString(e)}(e.target.files[0],(function(e){(null===e||void 0===e?void 0:e.length)&&g(e.filter((function(e){return e.type&&e.category&&e.name&&e.dscr&&void 0!==e.price})).map((function(e){return Object(s.a)(Object(s.a)({},e),{},{status:"",images:e.images.split(/,( |\n)/).filter((function(e){return e.trim()}))})})))})),e.target.value=null}})]}),!!(null===v||void 0===v?void 0:v.length)&&Object(m.jsx)("button",{className:"submit",onClick:function(){return Object(j.a)({label:"Adding Batch products",question:"You sure want to add all these items?",callback:I})},children:"Add"})]}),o&&Object(m.jsx)("div",{className:"spinnerContainer",children:Object(m.jsx)("div",{className:"spinner"})}),Object(m.jsx)(j.b,{className:"msg",open:M,children:M})]})},ge=["Buyer will be responsible for paying for shipping costs & for returning the item.","Shipping costs are nonrefundable.","Orders must be returned with Original Packaging & Securely.","Orders must be Returned Via Trackable / Traceable Courier Services Only.","Proof of Return via Photo of Tracking Number & Dispatch Ticket is Required.","Refund is Only Issued Upon Delivery of Return Package."],ye=function(e){var t,n,c,s,l,o,u,b,h,O,x,f,p,v,g,y,k,N,C,S,w,M,D,_,P,F,A,Y,T,R,q,I,L,B,E,V,H,U,Z,W=e.categories,G=e.setCategories,J=Object(r.useContext)(i.d),z=J.user,$=(J.setUser,Object(r.useState)(!1)),K=Object(a.a)($,2),Q=K[0],X=K[1],ee=Object(r.useState)(!1),te=Object(a.a)(ee,2),ne=te[0],ce=te[1],se=Object(r.useState)(),ae=Object(a.a)(se,2),re=ae[0],ie=ae[1],le=Object(r.useState)(!1),oe=Object(a.a)(le,2),je=oe[0],de=oe[1],ue=Object(r.useState)(null),be=Object(a.a)(ue,2),he=be[0],Oe=be[1];return Object(m.jsxs)("div",{className:"settings",children:[Object(m.jsxs)("div",{className:"caution",children:[!(null===W||void 0===W?void 0:W.length)&&Object(m.jsx)("p",{className:"err",children:"Add at least 1 category."}),!(null===(t=z.shopInfo)||void 0===t||null===(n=t.terms)||void 0===n?void 0:n.length)&&Object(m.jsx)("p",{className:"err",children:"Add Return policy terms"}),(void 0===(null===(c=z.shopInfo)||void 0===c?void 0:c.shippingCost)||null===(null===(s=z.shopInfo)||void 0===s?void 0:s.shippingCost)||void 0===(null===(l=z.shopInfo)||void 0===l?void 0:l.deliveryWithin)||null===(null===(o=z.shopInfo)||void 0===o?void 0:o.deliveryWithin)||void 0===(null===(u=z.shopInfo)||void 0===u?void 0:u.refundable))&&Object(m.jsx)("p",{className:"err",children:"Add Shipping & Delivery detail"}),Object.values((null===(b=z.shopInfo)||void 0===b?void 0:b.paymentMethod)||{}).length<6&&Object(m.jsx)("p",{className:"err",children:"Add valid payment method"})]}),Object(m.jsxs)("div",{className:"cat",children:[Object(m.jsx)("h2",{className:"head",children:"Categories"}),Object(m.jsxs)("ul",{className:"categories",children:[W.map((function(e,t){return Object(m.jsxs)("li",{children:[e," ",Object(m.jsx)("button",{onClick:function(){return Object(j.a)({label:"Remove Category",question:"You sure want to remove this category?",callback:function(){fetch("/api/categories",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({category:e})}).then((function(e){return e.json()})).then((function(t){"ok"===t.code?G((function(t){return t.filter((function(t){return t!==e}))})):Oe(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return Oe(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Could not delete category. Try again."})]})]}))})).catch((function(e){console.log(e),Oe(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return Oe(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Could not delete category. Make sure you're online."})]})]}))}))}})},children:Object(m.jsx)(d.F,{})})]},t)})),0===W.length&&Object(m.jsx)("li",{className:"placeholder",children:"No category found."})]}),Object(m.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=e.target.querySelector("input");fetch("/api/addCategory",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({category:t.value})}).then((function(e){return e.json()})).then((function(e){"ok"===e.code?(G(e.categories),t.value=""):Oe(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return Oe(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Could not add category. Try again."})]})]}))})).catch((function(e){console.log(e),Oe(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return Oe(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Could not add category. Make sure you're online."})]})]}))}))},children:[Object(m.jsx)("input",{type:"text",required:!0,placeholder:"New Category. ie Mobile"}),Object(m.jsx)("button",{children:"Add category"})]})]}),Object(m.jsxs)("div",{className:"gst",children:[Object(m.jsxs)("h2",{className:"head",children:["GST"," ",!Q&&Object(m.jsx)("button",{onClick:function(){return X(!0)},children:"Edit"})]}),Object(m.jsxs)("p",{className:"status",children:["Status:"," ",Object(m.jsx)("strong",{children:(null===(h=z.gst)||void 0===h?void 0:h.verified)?"Verified":"Unverified"})]}),Q?Object(m.jsx)(ke,{setOpen:X,setMsg:Oe}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("p",{children:["GST Registration number: ",(null===(O=z.gst)||void 0===O||null===(x=O.detail)||void 0===x?void 0:x.reg)||"N/A"]}),Object(m.jsxs)("p",{children:["GST amount: ",(null===(f=z.gst)||void 0===f?void 0:f.amount)?z.gst.amount+"%":"N/A"]}),Object(m.jsxs)("p",{children:["Files for verification:"," ",!(null===(p=z.gst)||void 0===p||null===(v=p.detail)||void 0===v||null===(g=v.files)||void 0===g?void 0:g.length)&&"N/A"]}),(null===(y=z.gst)||void 0===y||null===(k=y.detail)||void 0===k||null===(N=k.files)||void 0===N?void 0:N.length)&&Object(m.jsx)("ul",{className:"thumbs",children:Object(m.jsx)(d.p,{links:null===(C=z.gst)||void 0===C||null===(S=C.detail)||void 0===S?void 0:S.files})})]}),!(null===(w=z.gst)||void 0===w?void 0:w.verified)&&Object(m.jsx)("p",{className:"note",children:"*GST will apply once we review and verify your GST registraion."})]}),Object(m.jsxs)("div",{className:"payment",children:[Object(m.jsxs)("h2",{className:"head",children:["Payment Method"," ",!je&&Object(m.jsx)("button",{onClick:function(){return de(!0)},children:"Edit"})]}),je?Object(m.jsx)(Se,{prefill:null===(M=z.shopInfo)||void 0===M?void 0:M.paymentMethod,setOpen:de,setMsg:Oe}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("p",{children:["Name: ",(null===(D=z.shopInfo)||void 0===D||null===(_=D.paymentMethod)||void 0===_?void 0:_.name)||"--"]}),Object(m.jsxs)("p",{children:["Bank: ",(null===(P=z.shopInfo)||void 0===P||null===(F=P.paymentMethod)||void 0===F?void 0:F.bank)||"--"]}),Object(m.jsxs)("p",{children:["City: ",(null===(A=z.shopInfo)||void 0===A||null===(Y=A.paymentMethod)||void 0===Y?void 0:Y.city)||"--"]}),Object(m.jsxs)("p",{children:["Account type: ",(null===(T=z.shopInfo)||void 0===T||null===(R=T.paymentMethod)||void 0===R?void 0:R.accountType)||"--"]}),Object(m.jsxs)("p",{children:["Account Number:"," ",(null===(q=z.shopInfo)||void 0===q||null===(I=q.paymentMethod)||void 0===I?void 0:I.accountNumber)||"--"]}),Object(m.jsxs)("p",{children:["ifsc: ",(null===(L=z.shopInfo)||void 0===L||null===(B=L.paymentMethod)||void 0===B?void 0:B.ifsc)||"--"]})]})]}),Object(m.jsxs)("div",{className:"terms shipping",children:[Object(m.jsxs)("h2",{className:"head",children:["Shipping & Delivery"," ",!ne&&Object(m.jsx)("button",{onClick:function(){return ce(!0)},children:"Edit"})]}),ne?Object(m.jsx)(Ne,{setOpen:ce,setMsg:Oe}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("p",{children:["Shipping cost:"," ",(null===(E=z.shopInfo)||void 0===E?void 0:E.shippingCost)?"\u20b9"+(null===(V=z.shopInfo)||void 0===V?void 0:V.shippingCost):"N/A"]}),Object(m.jsxs)("p",{children:["Delivery within (days): ",(null===(H=z.shopInfo)||void 0===H?void 0:H.deliveryWithin)||"N/A"]}),Object(m.jsxs)("p",{children:["Refundable: ",(null===(U=z.shopInfo)||void 0===U||null===(Z=U.refundable)||void 0===Z?void 0:Z.toString())||"N/A"]})]})]}),Object(m.jsxs)("div",{className:"terms return",children:[Object(m.jsxs)("h2",{className:"head",children:["Return Policy Terms"," ",!re&&Object(m.jsx)("button",{onClick:function(){return ie(!0)},children:"Edit"})]}),Object(m.jsx)(Ce,{setOpen:ie,termsEdit:re,setMsg:Oe})]}),Object(m.jsx)(j.b,{className:"msg",open:he,children:he})]})},ke=function(e){var t,n,c,l,o,j,u,b=e.setOpen,h=e.setMsg,O=Object(r.useContext)(i.d),x=O.user,f=O.setUser,p=Object(r.useState)(!1),v=Object(a.a)(p,2),g=(v[0],v[1]),y=Object(r.useState)([]),k=Object(a.a)(y,2),N=k[0],C=k[1],S=Object(r.useState)(null===(t=x.gst)||void 0===t||null===(n=t.detail)||void 0===n?void 0:n.reg),w=Object(a.a)(S,2),M=w[0],D=w[1],_=Object(r.useState)(null===(c=x.gst)||void 0===c?void 0:c.amount),P=Object(a.a)(_,2),F=P[0],A=P[1],Y=function(){var e=Object(V.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),g(!0),e.next=4,Object(d.D)({files:N,setMsg:h});case 4:if(e.t0=e.sent,e.t0){e.next=7;break}e.t0=[];case 7:ne({"gst.detail.files":e.t0,"gst.detail.reg":M,"gst.amount":F}).then((function(e){var t=e.user;g(!1),t&&(f((function(e){return Object(s.a)(Object(s.a)({},e),{},{gst:t.gst})})),b(!1))})).catch((function(e){g(!1),console.log(e),h(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return h(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Could not upadte GST Information. Make sure you're online"})]})]}))}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsxs)("form",{onSubmit:Y,children:[Object(m.jsxs)("section",{children:[Object(m.jsx)("label",{children:"GST Registration Nubmer"}),Object(m.jsx)("input",{required:!0,type:"text",defaultValue:null===(l=x.gst)||void 0===l?void 0:l.detail.reg,name:"gst.detail.reg",onChange:function(e){return D(e.target.value)}})]}),Object(m.jsxs)("section",{children:[Object(m.jsx)("label",{children:"GST percentage (%)"}),Object(m.jsx)(d.r,{required:!0,defaultValue:null===(o=x.gst)||void 0===o?void 0:o.amount,name:"gst.detail.reg",onChange:function(e){return A(e.target.value)}})]}),Object(m.jsxs)("section",{children:[Object(m.jsx)("label",{children:"Upload files for verification"}),Object(m.jsx)(d.k,{multiple:!0,prefill:null===(j=x.gst)||void 0===j||null===(u=j.detail)||void 0===u?void 0:u.files,name:"gst.detail.files",onChange:function(e){return C(e)}})]}),Object(m.jsxs)("section",{className:"btns",children:[Object(m.jsx)("button",{children:"Save Changes"}),Object(m.jsx)("button",{type:"button",onClick:function(){return b(!1)},children:"Cancel"})]})]})},Ne=function(e){var t,n,c,l=e.setOpen,o=e.setMsg,j=Object(r.useContext)(i.d),u=j.user,b=j.setUser,h=Object(r.useState)((null===(t=u.shopInfo)||void 0===t?void 0:t.shippingCost)||0),O=Object(a.a)(h,2),x=O[0],f=O[1],p=Object(r.useState)(null===(n=u.shopInfo)||void 0===n?void 0:n.deliveryWithin),v=Object(a.a)(p,2),g=v[0],y=v[1],k=Object(r.useState)((null===(c=u.shopInfo)||void 0===c?void 0:c.refundable)||null),N=Object(a.a)(k,2),C=N[0],S=N[1];return Object(m.jsxs)("form",{onSubmit:function(e){e.preventDefault(),ne({"shopInfo.shippingCost":x,"shopInfo.deliveryWithin":g,"shopInfo.refundable":C}).then((function(e){var t=e.user;t&&(b((function(e){return Object(s.a)(Object(s.a)({},e),{},{shopInfo:t.shopInfo})})),l(!1))})).catch((function(e){console.log(e),o(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return o(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Could not upadte Terms. Make sure you're online"})]})]}))}))},children:[Object(m.jsxs)("section",{children:[Object(m.jsx)("label",{children:"Shipping Cost \u20b9"}),Object(m.jsx)(d.r,{required:!0,defaultValue:x,name:"shippingCost",onChange:function(e){return f(e.target.value)}})]}),Object(m.jsxs)("section",{children:[Object(m.jsx)("label",{children:"Delivery Within (days)"}),Object(m.jsx)(d.r,{required:!0,defaultValue:g,name:"deliveryWithin",min:1,step:"0",placeholder:"ie. 4 Days",onChange:function(e){return y(e.target.value)}})]}),Object(m.jsxs)("section",{children:[Object(m.jsx)("label",{children:"Refundable"}),Object(m.jsx)(d.h,{required:!0,defaultValue:0,onChange:function(e){return S(e.value)},options:[{label:"No",value:null},{label:"Upto 24 Hours After Delivery",value:"Upto 24 Hours After Delivery"},{label:"Upto 7 Days After Delivery",value:"Upto 7 Days After Delivery"},{label:"Upto 15 Days After Delivery",value:"Upto 15 Days After Delivery"}]})]}),Object(m.jsxs)("section",{className:"btns",children:[Object(m.jsx)("button",{children:"Save Changes"}),Object(m.jsx)("button",{type:"button",onClick:function(){return l(!1)},children:"Cancel"})]})]})},Ce=function(e){var t,n=e.setOpen,l=e.termsEdit,o=e.setMsg,j=Object(r.useContext)(i.d),u=j.user,b=j.setUser,h=Object(r.useState)((null===(t=u.shopInfo)||void 0===t?void 0:t.terms)||[]),O=Object(a.a)(h,2),x=O[0],f=O[1],p=Object(r.useState)(""),v=Object(a.a)(p,2),g=v[0],y=v[1];return Object(r.useEffect)((function(){var e;l?0===x.length&&f(ge):f((null===(e=u.shopInfo)||void 0===e?void 0:e.terms)||[])}),[l]),Object(m.jsxs)("form",{onSubmit:function(e){e.preventDefault(),ne({"shopInfo.terms":x}).then((function(e){var t,c=e.user;c&&(b((function(e){return Object(s.a)(Object(s.a)({},e),{},{shopInfo:c.shopInfo})})),n(!1),f(null===(t=c.shopInfo)||void 0===t?void 0:t.terms))})).catch((function(e){console.log(e),o(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return o(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Could not upadte Terms. Make sure you're online"})]})]}))}))},children:[Object(m.jsxs)("ul",{children:[x.map((function(e,t){return Object(m.jsxs)("li",{children:[e," ",l&&Object(m.jsx)("button",{type:"button",onClick:function(){return f((function(t){return t.filter((function(t){return t!==e}))}))},children:Object(m.jsx)(d.F,{})})]},t)})),0===x.length&&Object(m.jsx)("li",{children:"No terms has been added."})]}),l&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("section",{className:"addTerm",children:[Object(m.jsx)(H.a,{value:g,placeholder:"Add auditional term",onChange:function(e){return y(e.target.value)}}),Object(m.jsx)("button",{type:"button",onClick:function(){f((function(e){return g?[].concat(Object(c.a)(e.filter((function(e){return e!==g}))),[g]):e})),y("")},children:"Add Term"})]}),Object(m.jsxs)("section",{className:"btns",children:[Object(m.jsx)("button",{children:"Save Changes"}),Object(m.jsx)("button",{type:"button",onClick:function(){var e,t;n(!1),f((null===(e=u.shopInfo)||void 0===e||null===(t=e.terms)||void 0===t?void 0:t.length)?u.shopInfo.terms:ge)},children:"Cancel"})]})]})]})},Se=function(e){var t=e.prefill,n=(e.onSuccess,e.setMsg),c=e.setOpen,l=Object(r.useContext)(i.d).setUser,o=Object(r.useState)((null===t||void 0===t?void 0:t.bank)||""),j=Object(a.a)(o,2),u=j[0],b=j[1],h=Object(r.useState)((null===t||void 0===t?void 0:t.name)||""),O=Object(a.a)(h,2),x=O[0],f=O[1],p=Object(r.useState)((null===t||void 0===t?void 0:t.ifsc)||""),v=Object(a.a)(p,2),g=v[0],y=v[1],k=Object(r.useState)((null===t||void 0===t?void 0:t.city)||""),N=Object(a.a)(k,2),C=N[0],S=N[1],w=Object(r.useState)((null===t||void 0===t?void 0:t.accountType)||""),M=Object(a.a)(w,2),D=M[0],_=M[1],P=Object(r.useState)((null===t||void 0===t?void 0:t.accountNumber)||""),F=Object(a.a)(P,2),A=F[0],Y=F[1];return Object(m.jsxs)("form",{className:"paymentMethodForm netBanking",onSubmit:function(e){e.preventDefault(),ne({"shopInfo.paymentMethod":{name:x,bank:u,city:C,accountType:D,ifsc:g,accountNumber:A}}).then((function(e){var t=e.user;t?(l((function(e){return Object(s.a)(Object(s.a)({},e),{},{shopInfo:t.shopInfo})})),c(!1)):n(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return n(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Could not update payment method. Please try again."})]})]}))})).catch((function(e){console.log(e),n(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return n(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Could not updated payment method. Make sure you're online."})]})]}))}))},children:[Object(m.jsxs)("section",{className:"inputs",children:[Object(m.jsx)("input",{type:"text",name:"name",placeholder:"Full name",value:x,onChange:function(e){return f(e.target.value)},required:!0}),Object(m.jsx)("input",{type:"text",name:"bank",placeholder:"Bank",value:u,onChange:function(e){return b(e.target.value)},required:!0}),Object(m.jsx)("input",{type:"text",name:"city",placeholder:"City",value:C,onChange:function(e){return S(e.target.value)},required:!0}),Object(m.jsx)("input",{type:"text",name:"type",placeholder:"Account type ie. Savings / Current",value:D,onChange:function(e){return _(e.target.value)},required:!0}),Object(m.jsx)("input",{type:"text",name:"accountNumber",placeholder:"Account Number",value:A,onChange:function(e){return Y(e.target.value)},required:!0}),Object(m.jsx)("input",{type:"text",name:"ifsc",placeholder:"IFSC",value:g,onChange:function(e){return y(e.target.value)},required:!0})]}),Object(m.jsxs)("section",{className:"btns",children:[Object(m.jsx)("button",{type:"submit",children:"Save Changes"}),Object(m.jsx)("button",{type:"button",onClick:function(){return c(!1)},children:"Cancel"})]})]})},we=function(e){e.history,e.location,e.match;var t=Object(r.useContext)(i.d),n=t.user,c=t.userType,s=Object(r.useState)(null),o=Object(a.a)(s,2),u=o[0],b=(o[1],Object(r.useState)([])),h=Object(a.a)(b,2),O=h[0],x=h[1],f=Object(r.useState)(!1),p=Object(a.a)(f,2),v=p[0],g=p[1];return Object(r.useEffect)((function(){fetch("/api/categories").then((function(e){return e.json()})).then((function(e){x(e.categories)}))}),[]),Object(r.useEffect)((function(){var e,t,c,s,a,r,i,l;!(null===O||void 0===O?void 0:O.length)||!(null===(e=n.shopInfo)||void 0===e||null===(t=e.terms)||void 0===t?void 0:t.length)||void 0===(null===(c=n.shopInfo)||void 0===c?void 0:c.shippingCost)||null===(null===(s=n.shopInfo)||void 0===s?void 0:s.shippingCost)||void 0===(null===(a=n.shopInfo)||void 0===a?void 0:a.deliveryWithin)||null===(null===(r=n.shopInfo)||void 0===r?void 0:r.deliveryWithin)||void 0===(null===(i=n.shopInfo)||void 0===i?void 0:i.refundable)||Object.values((null===(l=n.shopInfo)||void 0===l?void 0:l.paymentMethod)||{}).length<6?g(!1):g(!0)}),[O,n]),Object(m.jsxs)(m.Fragment,{children:["buyer"===c&&Object(m.jsx)(l.a,{to:"/account/myShopping/orders"}),Object(m.jsxs)("div",{className:"myShop",children:[Object(m.jsx)("div",{style:{display:"none"},children:Object(m.jsx)(d.F,{})}),Object(m.jsx)(d.B,{basepath:"/account/myShop/",tabs:[{label:"Products & Services",path:"products"},{label:"Orders",path:"orders"},{label:"Refunds",path:"refunds"},{label:"FB Marketplace",path:"fbMarketplace"},{label:"Settings",path:"settings"}]}),Object(m.jsxs)(l.d,{children:[Object(m.jsx)(l.b,{path:"/account/myShop/products",children:Object(m.jsx)(me,{categories:O,shopSetupComplete:v})}),Object(m.jsx)(l.b,{path:"/account/myShop/orders/:_id",component:W}),Object(m.jsx)(l.b,{path:"/account/myShop/orders",children:Object(m.jsx)(J,{categories:O})}),Object(m.jsx)(l.b,{path:"/account/myShop/refunds/:_id",component:K}),Object(m.jsx)(l.b,{path:"/account/myShop/refunds",component:Q}),Object(m.jsx)(l.b,{path:"/account/myShop/fbMarketplace",component:be}),Object(m.jsx)(l.b,{path:"/account/myShop/settings",children:Object(m.jsx)(ye,{categories:O,setCategories:x})})]}),Object(m.jsx)(j.b,{className:"msg",open:u,children:u})]})]})},Me=Object(r.lazy)((function(){return Promise.resolve().then(n.t.bind(null,52,7))}));n(160),n(161);var De=function(e){var t=e.onSuccess,n=Object(r.useContext)(i.d).user,c=Object(r.useState)(!1),s=Object(a.a)(c,2),l=s[0],o=s[1],u=Object(r.useState)(n?n.firstName+" "+n.lastName:""),b=Object(a.a)(u,2),h=b[0],O=b[1],x=Object(r.useState)(n?n.phone:""),f=Object(a.a)(x,2),p=f[0],v=f[1],g=Object(r.useState)(""),y=Object(a.a)(g,2),k=y[0],N=y[1],C=Object(r.useState)(""),S=Object(a.a)(C,2),w=S[0],M=S[1],D=Object(r.useState)(null),_=Object(a.a)(D,2),P=_[0],F=_[1];return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("form",{onSubmit:function(e){e.preventDefault(),o(!0),fetch("/api/bugReport",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:h,phone:p,issue:k,dscr:w})}).then((function(e){return e.json()})).then((function(e){o(!1),"ok"===e.code?null===t||void 0===t||t():F(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return F(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Report could not be submitted."})]})]}))})).catch((function(e){o(!1),console.log(e),F(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return F(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Report could not be submitted. Make sure you're online."})]})]}))}))},children:[Object(m.jsxs)("section",{children:[Object(m.jsx)("label",{children:"Name"}),Object(m.jsx)("input",{value:h,onChange:function(e){return O(e.target.value)}})]}),Object(m.jsxs)("section",{children:[Object(m.jsx)("label",{children:"Phone"}),Object(m.jsx)("input",{value:p,onChange:function(e){return v(e.target.value)}})]}),Object(m.jsxs)("section",{children:[Object(m.jsx)("label",{children:"Issue"}),Object(m.jsx)("input",{value:k,onChange:function(e){return N(e.target.value)}})]}),Object(m.jsxs)("section",{children:[Object(m.jsx)("label",{children:"Description"}),Object(m.jsx)(H.a,{value:w,onChange:function(e){return M(e.target.value)}})]}),Object(m.jsx)("section",{className:"btns",children:Object(m.jsx)("button",{className:"submit",children:"Submit"})})]}),Object(m.jsx)(j.b,{open:P,className:"msg",children:P}),l&&Object(m.jsx)("div",{className:"spinnerContainer",children:Object(m.jsx)("div",{className:"spinner"})})]})},_e=function(e){var t=e.history,n=(e.location,e.pathname,Object(r.useRef)()),s=Object(r.useState)(!1),i=Object(a.a)(s,2),l=i[0],o=i[1],h=Object(r.useState)(null),O=Object(a.a)(h,2),x=O[0],p=O[1],v=Object(r.useState)(0),g=Object(a.a)(v,2),y=g[0],k=g[1],N=Object(r.useState)([]),C=Object(a.a)(N,2),S=C[0],w=C[1],M=Object(r.useState)({column:"createdAt",order:"dsc"}),D=Object(a.a)(M,2),_=D[0],P=D[1],F=Object(r.useState)({startDate:new Date,endDate:new Date}),A=Object(a.a)(F,2),Y=A[0],T=A[1],R=Object(r.useState)(!1),q=Object(a.a)(R,2),I=q[0],L=q[1],B=Object(r.useState)(1),E=Object(a.a)(B,2),V=E[0],H=E[1],U=Object(r.useState)(""),Z=Object(a.a)(U,2),W=Z[0],G=Z[1],J=Object(r.useState)(20),z=Object(a.a)(J,2),$=z[0],K=z[1],Q=Object(r.useState)({}),X=Object(a.a)(Q,2),ee=X[0],te=X[1],ne=Object(r.useState)(!1),ce=Object(a.a)(ne,2),se=ce[0],ae=ce[1];return Object(r.useLayoutEffect)((function(){var e=n.current.getBoundingClientRect(),t=e.height,c=e.y,s=e.width,a=e.x;te({position:"fixed",top:t+c+4,right:window.innerWidth-a-s})}),[]),Object(r.useEffect)((function(){var e=f()(Y.startDate).format("YYYY-MM-DD"),t=(f()(Y.endDate).format("YYYY-MM-DD"),f()(new Date(Y.endDate).setDate(Y.endDate.getDate()+1)).format("YYYY-MM-DD"));fetch("/api/getTickets?page=".concat(V,"&perPage=").concat($,"&sort=").concat(_.column,"&order=").concat(_.order).concat(W&&"&q="+W).concat(se?"&dateFrom="+e+"&dateTo="+t:"")).then((function(e){return e.json()})).then((function(e){var t;"ok"===e.code?(w(e.tickets.tickets),k((null===(t=e.tickets.pageInfo[0])||void 0===t?void 0:t.count)||0)):p(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return p(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Could not get tickets."})]})]}))})).catch((function(e){console.log(e),p(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return p(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Could not get tickets. Make sure you're online."})]})]}))}))}),[V,$,_.column,_.order,W,se]),Object(m.jsxs)("div",{className:"table ticketContainer",children:[Object(m.jsx)("div",{style:{display:"none"},children:Object(m.jsx)(d.F,{})}),Object(m.jsxs)("div",{className:"head",children:[Object(m.jsx)("h3",{children:"Tickets"}),Object(m.jsx)("button",{onClick:function(){return o(!0)},children:"Open Ticket"})]}),Object(m.jsxs)("div",{className:"filters",children:[Object(m.jsxs)("section",{children:[Object(m.jsx)("label",{children:"Total:"}),y]}),Object(m.jsxs)("section",{children:[Object(m.jsx)("label",{children:"Per Page:"}),Object(m.jsx)(d.h,{defaultValue:0,options:[{label:"20",value:20},{label:"30",value:30},{label:"50",value:50}],onChange:function(e){return K(e.value)}})]}),Object(m.jsxs)("section",{className:"search",children:[Object(m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"23",height:"23",viewBox:"0 0 23 23",children:Object(m.jsx)("path",{id:"Icon_ionic-ios-search","data-name":"Icon ionic-ios-search",d:"M27.23,25.828l-6.4-6.455a9.116,9.116,0,1,0-1.384,1.4L25.8,27.188a.985.985,0,0,0,1.39.036A.99.99,0,0,0,27.23,25.828ZM13.67,20.852a7.2,7.2,0,1,1,5.091-2.108A7.155,7.155,0,0,1,13.67,20.852Z",transform:"translate(-4.5 -4.493)",fill:"#707070",opacity:"0.74"})}),Object(m.jsx)("input",{value:W,onChange:function(e){return G(e.target.value)},placeholder:"Search issue"}),W&&Object(m.jsx)("button",{onClick:function(){return G("")},children:Object(m.jsx)(d.F,{})})]}),Object(m.jsxs)("section",{className:"date ".concat(se?"open":""),ref:n,children:[Object(m.jsx)("svg",{onClick:function(){return L(!0)},xmlns:"http://www.w3.org/2000/svg",width:"30.971",height:"30.971",viewBox:"0 0 30.971 30.971",children:Object(m.jsx)("path",{id:"Path_299","data-name":"Path 299",d:"M3.992,2.42H6.775V.968a.968.968,0,1,1,1.936,0V2.42H22.26V.968a.968.968,0,1,1,1.936,0V2.42h2.783a4,4,0,0,1,3.992,3.992V26.978a4,4,0,0,1-3.992,3.992H3.992A4,4,0,0,1,0,26.978V6.412A4,4,0,0,1,3.992,2.42ZM26.978,4.355H24.2v.968a.968.968,0,1,1-1.936,0V4.355H8.71v.968a.968.968,0,1,1-1.936,0V4.355H3.992A2.059,2.059,0,0,0,1.936,6.412v2.3h27.1v-2.3A2.059,2.059,0,0,0,26.978,4.355ZM3.992,29.035H26.978a2.059,2.059,0,0,0,2.057-2.057V10.646H1.936V26.978A2.059,2.059,0,0,0,3.992,29.035Z",fill:"#336cf9"})}),se&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:"dates",children:[Object(m.jsxs)("p",{children:["From:"," ",Object(m.jsx)(Me,{format:"DD MMM, YYYY",children:Y.startDate})]}),Object(m.jsxs)("p",{children:["To: ",Object(m.jsx)(Me,{format:"DD MMM, YYYY",children:Y.endDate})]})]}),Object(m.jsx)("button",{className:"clearDateFilter",onClick:function(){T({startDate:new Date,endDate:new Date}),ae(!1)},children:Object(m.jsx)(d.F,{})})]})]})]}),Object(m.jsxs)("table",{cellSpacing:0,cellPadding:0,children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsxs)("th",{className:"createdAt"===_.column?"sort "+_.order:"",onClick:function(){P((function(e){return{column:"createdAt",order:"dsc"===e.order?"asc":"dsc"}}))},children:["Date ",Object(m.jsx)(d.g,{})]}),Object(m.jsxs)("th",{className:"issue"===_.column?"sort "+_.order:"",onClick:function(){P((function(e){return{column:"issue",order:"dsc"===e.order?"asc":"dsc"}}))},children:["Issue ",Object(m.jsx)(d.g,{})]}),Object(m.jsxs)("th",{className:"status"===_.column?"sort "+_.order:"",onClick:function(){P((function(e){return{column:"status",order:"dsc"===e.order?"asc":"dsc"}}))},children:["Status ",Object(m.jsx)(d.g,{})]})]})}),Object(m.jsxs)("tbody",{children:[S.map((function(e){return Object(m.jsxs)("tr",{onClick:function(){return t.push("/account/support/ticket/".concat(e._id))},children:[Object(m.jsx)("td",{children:Object(m.jsx)(Me,{format:"hh:mm a, DD MMM, YYYY",children:e.createdAt})}),Object(m.jsx)("td",{children:e.issue}),Object(m.jsx)("td",{children:e.status})]},e._id)})),0===S.length&&Object(m.jsx)("tr",{className:"placeholder",children:Object(m.jsx)("td",{children:"Nothing yet."})})]}),Object(m.jsx)("tfoot",{children:Object(m.jsx)("tr",{children:Object(m.jsx)(d.s,{total:y,perPage:$,currentPage:V,btns:5,setPage:H})})})]}),Object(m.jsx)(j.b,{open:x,className:"msg",children:x}),Object(m.jsx)(j.b,{open:I,onBackdropClick:function(){return L(!1)},backdropClass:"datePicker",style:ee,children:Object(m.jsx)(b.DateRange,{className:"dateRange",ranges:[Y],onChange:function(e){T(e.range1),e.range1.endDate!==e.range1.startDate&&(L(!1),ae(!0))}})}),Object(m.jsx)(j.b,{open:l,head:!0,label:"Open Ticket",setOpen:o,className:"formModal ticketFormModal",children:Object(m.jsx)(u.d,{onSuccess:function(e){o(!1),p(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return p(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.A,{}),Object(m.jsx)("h4",{children:"Ticket successfully submitted."})]})]})),w((function(t){return[e].concat(Object(c.a)(t))}))}})})]})},Pe=function(e){var t=e.history,n=e.match,i=Object(r.useState)(null),l=Object(a.a)(i,2),b=l[0],h=l[1],O=Object(r.useState)(null),x=Object(a.a)(O,2),f=x[0],p=x[1],v=Object(r.useState)(!1),g=Object(a.a)(v,2),y=g[0],k=g[1];return Object(r.useEffect)((function(){fetch("/api/singleTicket?_id=".concat(n.params._id)).then((function(e){return e.json()})).then((function(e){"ok"===e.code?h(e.ticket):p(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return t.push("/account/support/ticket")},children:"Go Back"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Ticket could not be found."})]})]}))})).catch((function(e){console.log(e),p(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return t.push("/account/support/ticket")},children:"Go Back"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Ticket could not be found."})]})]}))}))}),[]),b?Object(m.jsxs)("div",{className:"ticket",children:[Object(m.jsxs)("div",{className:"detail",children:[Object(m.jsxs)(o.b,{to:"/account/support/ticket",className:"back",children:[Object(m.jsx)(d.c,{}),"Go Back"]}),Object(m.jsxs)("ul",{className:"summery",children:[Object(m.jsx)("li",{className:"head",children:"Ticket Summery"}),Object(m.jsxs)("li",{children:[Object(m.jsx)("label",{children:"Issue:"}),Object(m.jsx)("p",{children:b.issue})]}),Object(m.jsxs)("li",{children:[Object(m.jsx)("label",{children:"Status:"}),Object(m.jsx)("p",{children:b.status})]}),Object(m.jsxs)("li",{children:[Object(m.jsx)("label",{children:"Created at:"}),Object(m.jsx)("p",{children:Object(m.jsx)(Me,{format:"hh:mm a, DD MMM, YYYY",children:b.createdAt})})]}),Object(m.jsxs)("li",{children:[Object(m.jsx)("label",{children:"Last Activity:"}),Object(m.jsx)("p",{children:Object(m.jsx)(Me,{format:"hh:mm a, DD MMM, YYYY",children:b.updatedAt})})]})]}),Object(m.jsxs)("ul",{className:"milestoneDetail",children:[Object(m.jsx)("li",{className:"head",children:"Milestone Detail"}),b.milestone?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("li",{children:[Object(m.jsx)("label",{children:"Amount:"}),Object(m.jsx)("p",{children:b.milestone.amount})]}),Object(m.jsxs)("li",{children:[Object(m.jsx)("label",{children:"Status:"}),Object(m.jsx)("p",{children:b.milestone.status})]}),Object(m.jsxs)("li",{children:[Object(m.jsx)("label",{children:"Created at:"}),Object(m.jsx)("p",{children:Object(m.jsx)(Me,{format:"hh:mm a, DD MMM, YYYY",children:b.milestone.createdAt})})]}),Object(m.jsxs)("li",{children:[Object(m.jsx)("label",{children:"Verification Method:"}),Object(m.jsx)("p",{children:b.milestone.verification})]}),Object(m.jsxs)("li",{children:[Object(m.jsx)("label",{children:"Seller:"}),Object(m.jsx)("p",{children:b.milestone.seller.firstName+" "+b.milestone.seller.lastName})]}),Object(m.jsxs)("li",{children:[Object(m.jsx)("label",{children:"Buyer:"}),Object(m.jsx)("p",{children:b.milestone.buyer.firstName+" "+b.milestone.buyer.lastName})]}),Object(m.jsxs)("li",{children:[Object(m.jsx)("label",{children:"Description:"}),Object(m.jsx)("p",{children:b.milestone.dscr})]})]}):Object(m.jsx)("li",{className:"placeholder",children:"No Detail provided"})]}),Object(m.jsxs)("ul",{className:"transactionDetail",children:[Object(m.jsx)("li",{className:"head",children:"Transaction Detail"}),b.transaction?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("li",{children:[Object(m.jsx)("label",{children:"Type:"}),Object(m.jsx)("p",{children:b.transaction.__t})]}),Object(m.jsxs)("li",{children:[Object(m.jsx)("label",{children:"Amount:"}),Object(m.jsx)("p",{children:b.transaction.amount})]}),Object(m.jsxs)("li",{children:[Object(m.jsx)("label",{children:"Note:"}),Object(m.jsx)("p",{children:b.transaction.note})]}),Object(m.jsxs)("li",{children:[Object(m.jsx)("label",{children:"Created at:"}),Object(m.jsx)("p",{children:Object(m.jsx)(Me,{format:"hh:mm a, DD MMM, YYYY",children:b.transaction.createdAt})})]})]}):Object(m.jsx)("li",{className:"placeholder",children:"No Detail provided"})]}),Object(m.jsx)("div",{className:"pBtm"})]}),Object(m.jsxs)("div",{className:"messages",children:[Object(m.jsxs)("div",{className:"head",children:["Messages ",Object(m.jsx)("button",{onClick:function(){return k(!0)},children:"Reply"})]}),Object(m.jsx)("ul",{children:Object(c.a)(b.messages).reverse().map((function(e,t){return Object(m.jsxs)("li",{children:[Object(m.jsx)("div",{className:"user",children:Object(m.jsxs)("p",{className:"name",children:[e.user.name,Object(m.jsx)("span",{children:"\u2022"}),Object(m.jsx)("span",{className:"role",children:e.user.role}),Object(m.jsx)("span",{className:"date",children:Object(m.jsx)(Me,{format:"hh:mm a, DD MMM, YYYY",children:e.createdAt})})]})}),Object(m.jsx)("p",{className:"message",children:e.message.body}),e.message.files.length>0&&Object(m.jsx)("div",{className:"thumbs",children:Object(m.jsx)(d.p,{links:e.message.files})})]},t)}))})]}),Object(m.jsx)(j.b,{open:y,head:!0,label:"Add reply to Ticket",setOpen:k,className:"ticketReplyFormModal",children:Object(m.jsx)(u.e,{_id:b._id,onSuccess:function(e){k(!1),h((function(t){return Object(s.a)(Object(s.a)({},t),{},{messages:e.messages})})),p(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return p(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.A,{}),Object(m.jsx)("h4",{children:"Reply has been submitted."})]})]}))}})}),Object(m.jsx)(j.b,{open:f,className:"msg",children:f})]}):Object(m.jsxs)("div",{className:"ticket loading",children:[Object(m.jsxs)("div",{className:"detail",children:[Object(m.jsxs)(o.b,{to:"/account/support/ticket",className:"back",children:[Object(m.jsx)(d.c,{}),"Go Back"]}),Object(m.jsxs)("ul",{className:"summery",children:[Object(m.jsx)("li",{className:"head",children:"Ticket Summery"}),Object(m.jsxs)("li",{children:[Object(m.jsx)("label",{}),Object(m.jsx)("p",{})]}),Object(m.jsxs)("li",{children:[Object(m.jsx)("label",{}),Object(m.jsx)("p",{})]}),Object(m.jsxs)("li",{children:[Object(m.jsx)("label",{}),Object(m.jsx)("p",{})]})]}),Object(m.jsxs)("ul",{className:"milestoneDetail",children:[Object(m.jsx)("li",{className:"head",children:"Milestone Detail"}),Object(m.jsxs)("li",{children:[Object(m.jsx)("label",{}),Object(m.jsx)("p",{})]}),Object(m.jsxs)("li",{children:[Object(m.jsx)("label",{}),Object(m.jsx)("p",{})]}),Object(m.jsxs)("li",{children:[Object(m.jsx)("label",{}),Object(m.jsx)("p",{})]})]}),Object(m.jsxs)("ul",{className:"transactionDetail",children:[Object(m.jsx)("li",{className:"head",children:"Transaction Detail"}),Object(m.jsxs)("li",{children:[Object(m.jsx)("label",{}),Object(m.jsx)("p",{})]}),Object(m.jsxs)("li",{children:[Object(m.jsx)("label",{}),Object(m.jsx)("p",{})]}),Object(m.jsxs)("li",{children:[Object(m.jsx)("label",{}),Object(m.jsx)("p",{})]})]})]}),Object(m.jsxs)("div",{className:"messages",children:[Object(m.jsx)("div",{className:"head",children:"Messages"}),Object(m.jsxs)("ul",{children:[Object(m.jsxs)("li",{children:[Object(m.jsxs)("div",{className:"user",children:[Object(m.jsx)("div",{className:"img"}),Object(m.jsx)("p",{className:"name"})]}),Object(m.jsx)("p",{className:"message",children:Object(m.jsx)("span",{})}),Object(m.jsxs)("div",{className:"thumbs",children:[Object(m.jsx)("div",{className:"img"}),Object(m.jsx)("div",{className:"img"})]})]}),Object(m.jsxs)("li",{children:[Object(m.jsxs)("div",{className:"user",children:[Object(m.jsx)("div",{className:"img"}),Object(m.jsx)("p",{className:"name"})]}),Object(m.jsx)("p",{className:"message",children:Object(m.jsx)("span",{})}),Object(m.jsxs)("div",{className:"thumbs",children:[Object(m.jsx)("div",{className:"img"}),Object(m.jsx)("div",{className:"img"}),Object(m.jsx)("div",{className:"img"})]})]})]})]}),Object(m.jsx)(j.b,{open:f,className:"msg",children:f})]})},Fe=function(e){e.history,e.location,e.match;var t=Object(r.useState)(null),n=Object(a.a)(t,2),c=n[0],s=n[1],i=Object(r.useState)([]),u=Object(a.a)(i,2),b=u[0],h=u[1],O=Object(r.useState)(!1),x=Object(a.a)(O,2),f=x[0],p=x[1];return Object(r.useEffect)((function(){fetch("/api/faq").then((function(e){return e.json()})).then((function(e){"ok"===e.code&&h(e.faqs)}))}),[]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)(l.d,{children:[Object(m.jsx)(l.b,{path:"/account/support/ticket",component:_e}),Object(m.jsx)(l.b,{path:"/",children:Object(m.jsxs)("div",{className:"supportContainer",children:[Object(m.jsxs)("div",{className:"benner",children:[Object(m.jsxs)("div",{className:"clas",children:[Object(m.jsx)(o.b,{className:"ticketLink",to:"/account/support/ticket",children:"My Tickets"}),Object(m.jsx)("button",{className:"ticketLink",onClick:function(){return p(!0)},children:"Report Bug"})]}),Object(m.jsx)("h1",{children:"Support portal"}),Object(m.jsx)("p",{children:"Search for an answer or browse help topics to create a ticket"}),Object(m.jsxs)("form",{onSubmit:function(e){return e.preventDefault()},children:[Object(m.jsx)("input",{type:"text",required:!0,placeholder:"Eg: How does the Delivery pay Hold Works",onChange:function(e){fetch("/api/faq?q=".concat(e.target.value)).then((function(e){return e.json()})).then((function(e){"ok"===e.code&&h(e.faqs)}))}}),Object(m.jsx)("button",{type:"submit",children:Object(m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"31.336",height:"31.336",viewBox:"0 0 31.336 31.336",children:Object(m.jsx)("path",{id:"Path_1935","data-name":"Path 1935",d:"M25.4,22.708H23.98l-.5-.484a11.663,11.663,0,1,0-1.254,1.254l.484.5V25.4l8.958,8.94,2.67-2.67Zm-10.75,0a8.062,8.062,0,1,1,8.063-8.063A8.052,8.052,0,0,1,14.646,22.708Z",transform:"translate(-3 -3)",fill:"#707070"})})})]})]}),Object(m.jsxs)("div",{className:"content",children:[Object(m.jsxs)("div",{className:"faq",children:[Object(m.jsx)("p",{className:"label",children:"FAQs"}),Object(m.jsx)("ul",{children:b.map((function(e){return Object(m.jsxs)("li",{children:[Object(m.jsx)("h4",{children:e.ques}),Object(m.jsx)("p",{className:"ans",children:e.ans})]},e._id)}))})]}),Object(m.jsxs)("div",{className:"feedback",children:[Object(m.jsxs)("form",{children:[Object(m.jsx)("textarea",{required:!0}),Object(m.jsx)("button",{children:"Submit"})]}),Object(m.jsx)(o.b,{className:"feedbackLink",to:"/support/myFeedbacks",children:"Submitted Feedbacks"})]})]})]})})]}),Object(m.jsx)(j.b,{open:f,setOpen:p,className:"bugReport",label:"Report Bug",head:!0,children:Object(m.jsx)(De,{onSuccess:function(){p(!1),s(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return s(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.A,{}),Object(m.jsx)("h4",{children:"Report has been submitted."})]})]}))}})}),Object(m.jsx)(j.b,{open:c,className:"msg",children:c})]})},Ae=n(46),Ye=n(27),Te=Object(r.lazy)((function(){return Promise.resolve().then(n.t.bind(null,52,7))})),Re=function(){var e=Object(r.useRef)(),t=Object(r.useState)(0),n=Object(a.a)(t,2),c=n[0],i=n[1],l=Object(r.useState)(1),o=Object(a.a)(l,2),u=o[0],h=o[1],O=Object(r.useState)(20),x=Object(a.a)(O,2),p=x[0],v=x[1],g=Object(r.useState)(""),y=Object(a.a)(g,2),k=y[0],N=y[1],C=Object(r.useState)(""),S=Object(a.a)(C,2),w=S[0],M=S[1],D=Object(r.useState)(""),_=Object(a.a)(D,2),P=_[0],F=_[1],A=Object(r.useState)({column:"createdAt",order:"dsc"}),Y=Object(a.a)(A,2),T=Y[0],R=(Y[1],Object(r.useState)({startDate:new Date,endDate:new Date})),q=Object(a.a)(R,2),I=q[0],L=q[1],B=Object(r.useState)(!1),E=Object(a.a)(B,2),V=E[0],H=E[1],U=Object(r.useState)({}),Z=Object(a.a)(U,2),W=Z[0],G=Z[1],J=Object(r.useState)([]),z=Object(a.a)(J,2),$=z[0],K=z[1],Q=Object(r.useState)(!1),X=Object(a.a)(Q,2),ee=X[0],te=X[1],ne=Object(r.useState)([]),ce=Object(a.a)(ne,2),se=ce[0],ae=ce[1],re=Object(r.useState)(null),ie=Object(a.a)(re,2),le=ie[0],oe=ie[1];return Object(r.useEffect)((function(){var e=f()(I.startDate).format("YYYY-MM-DD"),t=(f()(I.endDate).format("YYYY-MM-DD"),f()(new Date(I.endDate).setDate(I.endDate.getDate()+1)).format("YYYY-MM-DD"));fetch("/api/getOrders?".concat(new URLSearchParams(Object(s.a)(Object(s.a)(Object(s.a)({user:"buyer"},w&&{q:w}),{},{page:u,perPage:p,sort:T.column,order:T.order},V&&{dateFrom:e,dateTo:t}),k&&{type:k})))).then((function(e){return e.json()})).then((function(e){"ok"===e.code&&(K(e.orders),i(e.total))})).catch((function(e){console.log(e),oe(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return oe(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Could not get orders."})]})]}))}))}),[k,w,u,p,V]),Object(r.useLayoutEffect)((function(){if(e.current){var t=e.current.getBoundingClientRect(),n=t.height,c=t.y,s=t.width,a=t.x;G({position:"fixed",top:n+c+4,right:window.innerWidth-a-s})}}),[]),Object(r.useEffect)((function(){ee||ae([])}),[ee]),Object(r.useEffect)((function(){0===se.length&&te(!1)}),[se]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"benner",children:Object(m.jsx)("p",{children:"My Orders"})}),Object(m.jsxs)("div",{className:"filters",children:[Object(m.jsxs)("section",{children:[Object(m.jsx)("label",{children:"Total:"}),c]}),Object(m.jsxs)("section",{children:[Object(m.jsx)("label",{children:"Per Page:"}),Object(m.jsx)(d.h,{defaultValue:0,options:[{label:"20",value:20},{label:"30",value:30},{label:"50",value:50}],onChange:function(e){return v(e.value)}})]}),Object(m.jsxs)("section",{className:"search",children:[Object(m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"23",height:"23",viewBox:"0 0 23 23",children:Object(m.jsx)("path",{id:"Icon_ionic-ios-search","data-name":"Icon ionic-ios-search",d:"M27.23,25.828l-6.4-6.455a9.116,9.116,0,1,0-1.384,1.4L25.8,27.188a.985.985,0,0,0,1.39.036A.99.99,0,0,0,27.23,25.828ZM13.67,20.852a7.2,7.2,0,1,1,5.091-2.108A7.155,7.155,0,0,1,13.67,20.852Z",transform:"translate(-4.5 -4.493)",fill:"#707070",opacity:"0.74"})}),Object(m.jsx)("input",{value:w,onChange:function(e){return M(e.target.value)},placeholder:"Search for Seller"}),w&&Object(m.jsx)("button",{onClick:function(){return M("")},children:Object(m.jsx)(d.F,{})})]}),Object(m.jsxs)("section",{className:"category",children:[Object(m.jsx)("label",{children:"Type:"}),Object(m.jsx)(d.h,{defaultValue:0,options:[{label:"All",value:""},{label:"Product",value:"product"},{label:"Service",value:"service"},{label:"Other",value:"other"}],onChange:function(e){return N(e.value)}})]}),Object(m.jsxs)("section",{className:"date ".concat(V?"open":""),ref:e,onClick:function(){return F(!0)},children:[Object(m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"30.971",height:"30.971",viewBox:"0 0 30.971 30.971",children:Object(m.jsx)("path",{id:"Path_299","data-name":"Path 299",d:"M3.992,2.42H6.775V.968a.968.968,0,1,1,1.936,0V2.42H22.26V.968a.968.968,0,1,1,1.936,0V2.42h2.783a4,4,0,0,1,3.992,3.992V26.978a4,4,0,0,1-3.992,3.992H3.992A4,4,0,0,1,0,26.978V6.412A4,4,0,0,1,3.992,2.42ZM26.978,4.355H24.2v.968a.968.968,0,1,1-1.936,0V4.355H8.71v.968a.968.968,0,1,1-1.936,0V4.355H3.992A2.059,2.059,0,0,0,1.936,6.412v2.3h27.1v-2.3A2.059,2.059,0,0,0,26.978,4.355ZM3.992,29.035H26.978a2.059,2.059,0,0,0,2.057-2.057V10.646H1.936V26.978A2.059,2.059,0,0,0,3.992,29.035Z",fill:"#336cf9"})}),V&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:"dates",children:[Object(m.jsxs)("p",{children:["From:"," ",Object(m.jsx)(Te,{format:"DD MMM, YYYY",children:I.startDate})]}),Object(m.jsxs)("p",{children:["To: ",Object(m.jsx)(Te,{format:"DD MMM, YYYY",children:I.endDate})]})]}),Object(m.jsx)("button",{className:"clearDateFilter",onClick:function(){L({startDate:new Date,endDate:new Date}),H(!1)},children:Object(m.jsx)(d.F,{})})]})]})]}),se.length>0&&Object(m.jsx)("div",{className:"batchAction",children:Object(m.jsx)("button",{onClick:function(){return console.log("batch delete")},children:"Delete"})}),Object(m.jsxs)("table",{className:"table orders",children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{className:"date",children:"Date"}),Object(m.jsx)("th",{children:"Seller"}),Object(m.jsx)("th",{children:"QTY"}),Object(m.jsx)("th",{children:"Refundable"}),Object(m.jsx)("th",{children:"Milestone"}),Object(m.jsx)("th",{children:"Status"}),Object(m.jsx)("th",{children:"Total Price"}),Object(m.jsx)("th",{children:"Actions"})]})}),Object(m.jsxs)("tbody",{children:[$.map((function(e){return Object(m.jsx)(qe,{order:e,setOrders:K,selectAll:ee,setBatch:ae,batch:se},e._id)})),0===$.length&&Object(m.jsx)("tr",{className:"placeholder",children:Object(m.jsx)("td",{children:"No order yet."})})]})]}),Object(m.jsx)(d.s,{total:c,btns:5,currentPage:u,perPage:p,setPage:h}),Object(m.jsx)(j.b,{className:"msg",open:le,children:le}),Object(m.jsx)(j.b,{open:P,onBackdropClick:function(){return F(!1)},className:"datePicker",backdropClass:"datePicker",style:W,children:Object(m.jsx)(b.DateRange,{className:"dateRange",ranges:[I],onChange:function(e){L(e.range1),e.range1.endDate!==e.range1.startDate&&(F(!1),H(!0))}})})]})},qe=function(e){var t=e.order,n=e.setOrders,u=e.selectAll,b=e.setBatch,h=e.batch,O=Object(r.useRef)(),x=Object(r.useRef)(),f=Object(l.g)(),p=(Object(r.useContext)(i.d).user,Object(r.useState)(u||!1)),v=Object(a.a)(p,2),g=v[0],y=v[1],k=Object(r.useState)(!1),N=Object(a.a)(k,2),C=(N[0],N[1],Object(r.useState)(!1)),S=Object(a.a)(C,2),w=S[0],M=S[1],D=function(){fetch("/api/cancelOrder",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({_id:t._id})}).then((function(e){return e.json()})).then((function(e){"ok"===e.code?n((function(n){return n.map((function(n){var c;return n._id===t._id?Object(s.a)(Object(s.a)({},n),{},{status:null===(c=e.order)||void 0===c?void 0:c.status}):n}))})):M(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return M(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Could not cancel order. Please try again."})]})]}))})).catch((function(e){console.log(e),M(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return M(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Could not cancel order. Make sure you're online"})]})]}))}))},_=function(){fetch("/api/requestCancellation",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({_id:t._id})}).then((function(e){return e.json()})).then((function(e){"ok"===e.code?n((function(n){return n.map((function(n){var c;return n._id===t._id?Object(s.a)(Object(s.a)({},n),{},{status:null===(c=e.order)||void 0===c?void 0:c.status}):n}))})):M(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return M(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Could not cancel order. Please try again."})]})]}))})).catch((function(e){console.log(e),M(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return M(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Could not cancel order. Make sure you're online"})]})]}))}))};return Object(r.useEffect)((function(){y(u)}),[u]),Object(r.useEffect)((function(){b(g?function(e){return[].concat(Object(c.a)(e),[t._id])}:function(e){return e.filter((function(e){return e!==t._id}))})}),[g]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("tr",{className:"order ".concat(g?"selected":""),onClick:function(e){e.nativeEvent.path.includes(O.current)||e.nativeEvent.path.includes(x.current)||h.length>0||f.push("/account/myShopping/orders/".concat(t._id))},children:[Object(m.jsx)("td",{className:"date",children:Object(m.jsx)(Te,{format:"DD MMM YYYY, hh:mm a",children:t.createdAt})}),Object(m.jsx)("td",{children:Object(m.jsx)(d.E,{user:t.seller})}),Object(m.jsx)("td",{children:t.products.reduce((function(e,t){return e+t.qty}),0)}),Object(m.jsx)("td",{children:t.refundable||"N/A"}),Object(m.jsx)("td",{children:t.milestones.length||"N/A"}),Object(m.jsx)("td",{children:t.status}),Object(m.jsxs)("td",{children:["\u20b9",t.total]}),Object(m.jsx)("td",{ref:O,children:0===h.length&&Object(m.jsxs)(d.a,{icon:Object(m.jsx)(d.g,{}),children:[Object(m.jsx)(o.b,{to:"/account/myShopping/orders/".concat(t._id),children:"View Detail"}),"pending"===t.status&&Object(m.jsx)(o.b,{to:"#",onClick:function(e){Object(j.a)({label:"Order Cancellation",question:"You sure want to cancel this order?",callback:D})},children:"Cancel order"}),"approved"===t.status&&Object(m.jsx)(o.b,{to:"#",onClick:function(e){Object(j.a)({label:"Order Cancellation",question:"You sure want to request cancellation for this order?",callback:_})},children:"Request Cancellation"})]})})]}),Object(m.jsx)(j.b,{className:"msg",open:w,children:w})]})},Ie=function(e){var t,n,l,u=e.history,b=e.match,h=Object(r.useContext)(i.d).userType,O=Object(r.useState)(null),x=Object(a.a)(O,2),f=x[0],p=x[1],v=Object(r.useState)(null),g=Object(a.a)(v,2),y=g[0],k=g[1],N=Object(r.useState)(!1),C=Object(a.a)(N,2),S=C[0],w=C[1],M=Object(r.useState)(!1),D=Object(a.a)(M,2),_=D[0],P=D[1],F=Object(r.useState)(!1),A=Object(a.a)(F,2),Y=A[0],T=A[1];Object(r.useRef)();return Object(r.useEffect)((function(){fetch("/api/singleOrder?_id=".concat(b.params._id)).then((function(e){return e.json()})).then((function(e){"ok"===e.code?k(e.order):p(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return p(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Orders does not exist."})]})]}))})).catch((function(e){console.log(e),p(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return p(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Could not get order. Make sure you're online."})]})]}))}))}),[]),Object(r.useEffect)((function(){if("delivered"===(null===y||void 0===y?void 0:y.status)&&(null===y||void 0===y?void 0:y.refundable)){var e=0;switch(y.refundable){case"Upto 24 Hours After Delivery":e=1;break;case"Upto 7 Days After Delivery":e=7;break;case"Upto 15 Days After Delivery":e=15;break;default:return}var t=new Date((new Date).getTime()+864e5*e);new Date<t?P(t):P(null)}else P(null)}),[y]),y?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:"actions",children:[Object(m.jsxs)(o.b,{to:"/account/".concat("seller"===h?"myShop":"myShopping","/orders"),className:"back",children:[Object(m.jsx)(d.c,{}),"Back"]}),_&&Object(m.jsx)("button",{onClick:function(){return T(!0)},children:"Issue refund"})]}),Object(m.jsxs)("div",{className:"singleOrder",children:[Object(m.jsxs)("div",{className:"summery",children:[Object(m.jsx)("h3",{children:"Order Summery"}),Object(m.jsxs)("ul",{children:[Object(m.jsxs)("li",{children:[Object(m.jsx)("label",{children:"Seller"}),Object(m.jsx)(d.E,{user:y.seller})]}),Object(m.jsxs)("li",{children:[Object(m.jsx)("label",{children:"Order ID"}),y._id]}),Object(m.jsxs)("li",{children:[Object(m.jsx)("label",{children:"Status"}),y.status]}),Object(m.jsxs)("li",{children:[Object(m.jsx)("label",{children:"Submitted at"}),Object(m.jsx)(Te,{format:"DD MMM YYYY, hh:mma",children:y.createdAt})]}),"delivered"===y.status&&Object(m.jsxs)("li",{children:[Object(m.jsx)("label",{children:"Delivered at"}),Object(m.jsx)(Te,{format:"DD MMM YYYY, hh:mm a",children:y.deliveredAt})]}),Object(m.jsxs)("li",{children:[Object(m.jsx)("label",{children:"Refundable"}),y.refundable||"N/A"]}),_&&Object(m.jsxs)("li",{children:[Object(m.jsx)("label",{children:"Refund till"}),Object(m.jsx)(Te,{format:"DD MMM YYYY, hh:mm a",children:_})]}),Object(m.jsx)("li",{}),Object(m.jsxs)("li",{className:"devide",children:[Object(m.jsx)("label",{children:"Delivery Address"}),Object(m.jsx)("span",{})]}),Object(m.jsx)(m.Fragment,{children:Object.entries(y.deliveryDetail).map((function(e,t){var n=Object(a.a)(e,2),c=n[0],s=n[1];return"deliveryTime"===c?Object(m.jsxs)("li",{children:[Object(m.jsx)("label",{children:"Delivery date"}),y.deliveryDetail.deliveryTime?Object(m.jsx)(Te,{format:"DD MMM, YYYY hh:mma",children:y.deliveryDetail.deliveryTime}):"N/A"]},t):Object(m.jsxs)("li",{children:[Object(m.jsx)("label",{children:c}),s]},t)}))})]})]}),Object(m.jsxs)("div",{className:"products",children:[Object(m.jsx)("h3",{children:"Products"}),Object(m.jsx)("ul",{children:y.products.map((function(e,t){var n=e.product,c=e.qty;return Object(m.jsxs)("li",{children:[Object(m.jsx)(d.n,{src:n.images[0]||"/open_box.png"}),Object(m.jsxs)("div",{className:"detail",children:[Object(m.jsx)("p",{children:n.name}),Object(m.jsxs)("p",{className:"qty",children:["QTY: ",c]})]}),Object(m.jsxs)("div",{className:"price",children:[Object(m.jsxs)("span",{children:[Object(d.I)({product:n,gst:!0})," x ",c]}),"\u20b9",Object(d.I)({product:n,gst:!0})*c]})]},t)}))}),Object(m.jsxs)("div",{className:"total",children:[Object(m.jsxs)("div",{className:"data",children:[Object(m.jsx)("label",{children:"Total"}),"\u20b9",y.products.reduce((function(e,t){return e+Object(d.I)({product:t.product,gst:!0})*t.qty}),0)]}),Object(m.jsx)("hr",{}),Object(m.jsxs)("div",{className:"data",children:[Object(m.jsx)("label",{children:"Shipping"}),"\u20b9",y.shippingCost||"N/A"]}),Object(m.jsxs)("div",{className:"data",children:[Object(m.jsxs)("label",{children:["Delivery Pay fee ",y.fee,"%"]}),"\u20b9",(y.total-y.total/(y.fee+100)*100).fix()]}),Object(m.jsx)("hr",{}),Object(m.jsxs)("div",{className:"data",children:[Object(m.jsx)("label",{children:"Grand Total"}),"\u20b9",y.total]})]})]}),Object(m.jsxs)("div",{className:"milestones",children:[Object(m.jsx)("h3",{children:"Milestones"}),Object(m.jsx)("p",{className:"subtitle",children:"Click to view milestone detail."}),Object(m.jsxs)("table",{cellSpacing:0,cellPadding:0,children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:"Date"}),Object(m.jsx)("td",{children:"Descrption"}),Object(m.jsx)("td",{children:"Amount"}),Object(m.jsx)("td",{children:"Status"})]})}),Object(m.jsxs)("tbody",{children:[y.milestones.map((function(e){return Object(m.jsxs)("tr",{onClick:function(){return u.push("/account/hold?q=".concat(e._id))},children:[Object(m.jsx)("td",{children:Object(m.jsx)(Te,{format:"DD MMM YYYY, hh:mma",children:e.createdAt})}),Object(m.jsx)("td",{children:e.dscr}),Object(m.jsxs)("td",{children:["\u20b9",e.amount]}),Object(m.jsx)("td",{children:e.status})]},e._id)})),0===y.milestones.length&&Object(m.jsx)("tr",{className:"placeholdert",children:Object(m.jsx)("td",{children:"Nothing yet."})})]})]})]}),Object(m.jsxs)("div",{className:"delivery",children:[Object(m.jsx)("h3",{children:"Proof of delivery"}),(null===(t=y.files)||void 0===t?void 0:t.length)>0?Object(m.jsx)("div",{className:"thumbs",children:Object(m.jsx)(d.p,{links:y.files})}):Object(m.jsx)(m.Fragment,{children:"No files added."})]}),Object(m.jsxs)("section",{className:"terms",children:[Object(m.jsx)("h3",{children:"Return Policy Terms"}),Object(m.jsxs)("ul",{children:[null===(n=y.terms)||void 0===n?void 0:n.map((function(e,t){return Object(m.jsx)("li",{children:e},t)})),!(null===(l=y.terms)||void 0===l?void 0:l.length)&&Object(m.jsx)("li",{children:"No terms has been set by the seller yet."})]})]})]}),Object(m.jsx)(j.b,{head:!0,label:"Create Milestone",setOpen:w,className:"milestoneRequest",open:S,children:Object(m.jsx)(Tt,{action:"create",definedAmount:y.total,client:y.seller,order:y._id,onSuccess:function(e){w(!1),p(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return p(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.A,{}),Object(m.jsxs)("h4",{className:"amount",children:["\u20b9",null===e||void 0===e?void 0:e.amount]}),Object(m.jsx)("h4",{children:"Milestone has been created"})]}),Object(m.jsx)(o.b,{to:"/account/hold",onClick:function(){return p(null)},children:"Check your Delivery pay Hold"})]})),k((function(t){return Object(s.a)(Object(s.a)({},t),{},{milestones:[].concat(Object(c.a)(t.milestones),[e])})}))}})}),Object(m.jsx)(j.b,{open:Y,head:!0,label:"Issue Refund",setOpen:T,className:"issueRefund",children:Object(m.jsx)(Le,{order:y,onSuccess:function(e){T(!1),k((function(e){return Object(s.a)(Object(s.a)({},e),{},{status:"refundPending"})})),p(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return p(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.A,{}),Object(m.jsx)("h4",{children:"Refund has been issued."})]})]}))}})}),Object(m.jsx)(j.b,{className:"msg",open:f,children:f})]}):Object(m.jsx)(m.Fragment,{children:"Loading"})},Le=function(e){var t=e.order,n=e.onSuccess,c=Object(r.useState)(null),s=Object(a.a)(c,2),i=s[0],l=s[1],o=Object(r.useState)(!1),u=Object(a.a)(o,2),b=u[0],h=u[1],O=Object(r.useState)(""),x=Object(a.a)(O,2),f=x[0],p=x[1],v=Object(r.useState)(""),g=Object(a.a)(v,2),y=g[0],k=g[1],N=Object(r.useState)([]),C=Object(a.a)(N,2),S=C[0],w=C[1],M=function(){var e=Object(V.a)(E.a.mark((function e(c){var s;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.preventDefault(),h(!0),!S.length){e.next=8;break}return e.next=5,Object(d.D)({files:S,setMsg:l});case 5:e.t0=e.sent,e.next=9;break;case 8:e.t0=[];case 9:s=e.t0,fetch("/api/issueRefund",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({order:t._id,issue:f,dscr:y,files:s})}).then((function(e){return e.json()})).then((function(e){h(!1),"ok"===e.code?null===n||void 0===n||n(e.refund):l(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return l(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Refund could not be issued. Try again."})]})]}))})).catch((function(e){h(!1),console.log(e),l(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return l(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Refund could not be issued. Make sure you're online."})]})]}))}));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("form",{onSubmit:M,children:[Object(m.jsxs)("section",{children:[Object(m.jsx)("label",{children:"Issue"}),Object(m.jsx)("input",{type:"text",required:!0,value:f,onChange:function(e){return p(e.target.value)}})]}),Object(m.jsxs)("section",{children:[Object(m.jsx)("label",{children:"Descrption"}),Object(m.jsx)(H.a,{required:!0,value:y,onChange:function(e){return k(e.target.value)}})]}),Object(m.jsxs)("section",{className:"images",children:[Object(m.jsx)("label",{children:"Upload relevant files"}),Object(m.jsx)(d.k,{accept:"image/*, video/*, audio/*",multiple:!0,onChange:function(e){return w(e)}})]}),Object(m.jsx)("section",{className:"btns",children:Object(m.jsx)("button",{className:"submit",children:"Submit"})})]}),b&&Object(m.jsx)("div",{className:"spinnerContainer",children:Object(m.jsx)("div",{className:"spinner"})}),Object(m.jsx)(j.b,{className:"msg",open:i,children:i})]})},Be=function(e){e.history,e.location;var t=Object(r.useContext)(i.d).userType,n=Object(r.useRef)(),c=Object(r.useState)(0),l=Object(a.a)(c,2),o=l[0],u=l[1],h=Object(r.useState)(1),O=Object(a.a)(h,2),x=O[0],p=O[1],v=Object(r.useState)(20),g=Object(a.a)(v,2),y=g[0],k=g[1],N=Object(r.useState)(""),C=Object(a.a)(N,2),S=C[0],w=C[1],M=Object(r.useState)(""),D=Object(a.a)(M,2),_=D[0],P=D[1],F=Object(r.useState)(""),A=Object(a.a)(F,2),Y=A[0],T=A[1],R=Object(r.useState)({column:"createdAt",order:"dsc"}),q=Object(a.a)(R,2),I=q[0],L=(q[1],Object(r.useState)({startDate:new Date,endDate:new Date})),B=Object(a.a)(L,2),E=B[0],V=B[1],H=Object(r.useState)(!1),U=Object(a.a)(H,2),Z=U[0],W=U[1],G=Object(r.useState)({}),J=Object(a.a)(G,2),z=J[0],$=J[1],K=Object(r.useState)([]),Q=Object(a.a)(K,2),X=Q[0],ee=Q[1],te=Object(r.useState)(!1),ne=Object(a.a)(te,2),ce=ne[0],se=ne[1],ae=Object(r.useState)([]),re=Object(a.a)(ae,2),ie=re[0],le=re[1],oe=Object(r.useState)(null),je=Object(a.a)(oe,2),de=je[0],ue=je[1];return Object(r.useEffect)((function(){var e=f()(E.startDate).format("YYYY-MM-DD"),n=(f()(E.endDate).format("YYYY-MM-DD"),f()(new Date(E.endDate).setDate(E.endDate.getDate()+1)).format("YYYY-MM-DD"));fetch("/api/getRefunds?".concat(new URLSearchParams(Object(s.a)(Object(s.a)(Object(s.a)({user:t},S&&{q:S}),{},{page:x,perPage:y,sort:I.column,order:I.order},Z&&{dateFrom:e,dateTo:n}),_&&{status:_})))).then((function(e){return e.json()})).then((function(e){"ok"===e.code&&(ee(e.refunds),u(e.total))})).catch((function(e){console.log(e),ue(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return ue(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Could not get orders."})]})]}))}))}),[S,x,y,Z,_]),Object(r.useLayoutEffect)((function(){if(n.current){var e=n.current.getBoundingClientRect(),t=e.height,c=e.y,s=e.width,a=e.x;$({position:"fixed",top:t+c+4,right:window.innerWidth-a-s})}}),[]),Object(r.useEffect)((function(){ce||le([])}),[ce]),Object(r.useEffect)((function(){0===ie.length&&se(!1)}),[ie]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"benner",children:Object(m.jsx)("p",{children:"My Refunds"})}),Object(m.jsxs)("div",{className:"filters",children:[Object(m.jsxs)("section",{children:[Object(m.jsx)("label",{children:"Total:"}),o]}),Object(m.jsxs)("section",{children:[Object(m.jsx)("label",{children:"Per Page:"}),Object(m.jsx)(d.h,{defaultValue:0,options:[{label:"20",value:20},{label:"30",value:30},{label:"50",value:50}],onChange:function(e){return k(e.value)}})]}),Object(m.jsxs)("section",{className:"search",children:[Object(m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"23",height:"23",viewBox:"0 0 23 23",children:Object(m.jsx)("path",{id:"Icon_ionic-ios-search","data-name":"Icon ionic-ios-search",d:"M27.23,25.828l-6.4-6.455a9.116,9.116,0,1,0-1.384,1.4L25.8,27.188a.985.985,0,0,0,1.39.036A.99.99,0,0,0,27.23,25.828ZM13.67,20.852a7.2,7.2,0,1,1,5.091-2.108A7.155,7.155,0,0,1,13.67,20.852Z",transform:"translate(-4.5 -4.493)",fill:"#707070",opacity:"0.74"})}),Object(m.jsx)("input",{value:S,onChange:function(e){return w(e.target.value)},placeholder:"Search for Seller"}),S&&Object(m.jsx)("button",{onClick:function(){return w("")},children:Object(m.jsx)(d.F,{})})]}),Object(m.jsxs)("section",{className:"category",children:[Object(m.jsx)("label",{children:"Status:"}),Object(m.jsx)(d.h,{defaultValue:0,options:[{label:"All",value:""},{label:"Pending",value:"pending"},{label:"Approved",value:"approved"},{label:"Product Sent",value:"productSent"},{label:"Product Recieved",value:"productRecieved"},{label:"Resolved",value:"resolved"}],onChange:function(e){return P(e.value)}})]}),Object(m.jsxs)("section",{className:"date ".concat(Z?"open":""),ref:n,onClick:function(){return T(!0)},children:[Object(m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"30.971",height:"30.971",viewBox:"0 0 30.971 30.971",children:Object(m.jsx)("path",{id:"Path_299","data-name":"Path 299",d:"M3.992,2.42H6.775V.968a.968.968,0,1,1,1.936,0V2.42H22.26V.968a.968.968,0,1,1,1.936,0V2.42h2.783a4,4,0,0,1,3.992,3.992V26.978a4,4,0,0,1-3.992,3.992H3.992A4,4,0,0,1,0,26.978V6.412A4,4,0,0,1,3.992,2.42ZM26.978,4.355H24.2v.968a.968.968,0,1,1-1.936,0V4.355H8.71v.968a.968.968,0,1,1-1.936,0V4.355H3.992A2.059,2.059,0,0,0,1.936,6.412v2.3h27.1v-2.3A2.059,2.059,0,0,0,26.978,4.355ZM3.992,29.035H26.978a2.059,2.059,0,0,0,2.057-2.057V10.646H1.936V26.978A2.059,2.059,0,0,0,3.992,29.035Z",fill:"#336cf9"})}),Z&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:"dates",children:[Object(m.jsxs)("p",{children:["From:"," ",Object(m.jsx)(Te,{format:"DD MMM, YYYY",children:E.startDate})]}),Object(m.jsxs)("p",{children:["To: ",Object(m.jsx)(Te,{format:"DD MMM, YYYY",children:E.endDate})]})]}),Object(m.jsx)("button",{className:"clearDateFilter",onClick:function(){V({startDate:new Date,endDate:new Date}),W(!1)},children:Object(m.jsx)(d.F,{})})]})]})]}),ie.length>0&&Object(m.jsx)("div",{className:"batchAction",children:Object(m.jsx)("button",{onClick:function(){return console.log("batch delete")},children:"Delete"})}),Object(m.jsxs)("table",{className:"table refunds",children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{className:"date",children:"Date"}),Object(m.jsx)("th",{children:"Seller"}),Object(m.jsx)("th",{children:"QTY"}),Object(m.jsx)("th",{children:"Status"}),Object(m.jsx)("th",{children:"Total Price"})]})}),Object(m.jsxs)("tbody",{children:[X.map((function(e){return Object(m.jsx)(Ee,{refund:e,setRefunds:ee,selectAll:ce,setBatch:le,batch:ie},e._id)})),0===X.length&&Object(m.jsx)("tr",{className:"placeholder",children:Object(m.jsx)("td",{children:"No product yet."})})]})]}),Object(m.jsx)(d.s,{total:o,btns:5,currentPage:x,perPage:y,setPage:p}),Object(m.jsx)(j.b,{className:"msg",open:de,children:de}),Object(m.jsx)(j.b,{open:Y,onBackdropClick:function(){return T(!1)},className:"datePicker",backdropClass:"datePicker",style:z,children:Object(m.jsx)(b.DateRange,{className:"dateRange",ranges:[E],onChange:function(e){V(e.range1),e.range1.endDate!==e.range1.startDate&&(T(!1),W(!0))}})})]})},Ee=function(e){var t,n=e.refund,s=(e.setRefunds,e.selectAll),o=e.setBatch,u=(e.batch,Object(l.g)()),b=(Object(r.useContext)(i.d).user,Object(r.useState)(s||!1)),h=Object(a.a)(b,2),O=h[0],x=h[1],f=Object(r.useState)(!1),p=Object(a.a)(f,2),v=(p[0],p[1],Object(r.useState)(!1)),g=Object(a.a)(v,2),y=g[0];g[1];return Object(r.useEffect)((function(){x(s)}),[s]),Object(r.useEffect)((function(){o(O?function(e){return[].concat(Object(c.a)(e),[n._id])}:function(e){return e.filter((function(e){return e!==n._id}))})}),[O]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("tr",{className:"refund ".concat(O?"selected":""),onClick:function(){return u.push("/account/myShopping/refunds/".concat(n._id))},children:[Object(m.jsx)("td",{className:"date",children:Object(m.jsx)(Te,{format:"DD MMM YYYY, hh:mm a",children:n.createdAt})}),Object(m.jsx)("td",{children:Object(m.jsx)(d.E,{user:n.seller})}),Object(m.jsx)("td",{children:null===(t=n.order)||void 0===t?void 0:t.products.reduce((function(e,t){return e+t.qty}),0)}),Object(m.jsx)("td",{children:n.status}),Object(m.jsxs)("td",{children:["\u20b9",n.order.total]})]}),Object(m.jsx)(j.b,{className:"msg",open:y,children:y})]})},Ve=function(e){var t,n,l,u=e.history,b=e.match,h=Object(r.useContext)(i.d).userType,O=Object(r.useState)(null),x=Object(a.a)(O,2),f=x[0],p=x[1],v=Object(r.useState)(null),g=Object(a.a)(v,2),y=g[0],k=g[1],N=Object(r.useState)(null),C=Object(a.a)(N,2),S=C[0],w=C[1],M=Object(r.useState)(!1),D=Object(a.a)(M,2),_=D[0],P=D[1],F=Object(r.useState)(!1),A=Object(a.a)(F,2),Y=A[0],T=A[1],R=(Object(r.useRef)(),function(){var e=Object(V.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("/api/updateRefund",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object(s.a)(Object(s.a)({},t),{},{_id:y._id}))}).then((function(e){return e.json()})).then((function(e){if("ok"===e.code)return e.order;p(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return p(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Refund request does not exist."})]})]}))})).catch((function(e){console.log(e),p(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return p(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Could not update refund. Make sure you're online."})]})]}))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return Object(r.useEffect)((function(){fetch("/api/singleRefund?_id=".concat(b.params._id)).then((function(e){return e.json()})).then((function(e){"ok"===e.code?(w(e.refund.order),k(e.refund)):p(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return p(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Refund does not exist."})]})]}))})).catch((function(e){console.log(e),p(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return p(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Could not get Refund. Make sure you're online."})]})]}))}))}),[]),Object(r.useEffect)((function(){if(null===S||void 0===S?void 0:S.refundable){var e=0;switch(S.refundable){case"Upto 24 Hours After Delivery":e=1;break;case"Upto 7 Days After Delivery":e=7;break;case"Upto 15 Days After Delivery":e=15;break;default:return}var t=new Date((new Date).getTime()+864e5*e);new Date<t?T(t):T(null)}else T(null)}),[y]),y?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:"actions",children:[Object(m.jsxs)(o.b,{to:"/account/".concat("seller"===h?"myShop":"myShopping","/refunds"),className:"back",children:[Object(m.jsx)(d.c,{}),"Back"]}),"approved"===y.status&&Object(m.jsx)("button",{onClick:function(){return Object(j.a)({label:"Product Shipped",question:"Did you sent the product to seller?",callback:function(){R({status:"productSent"}).then((function(e){k((function(e){return Object(s.a)(Object(s.a)({},e),{},{status:"productSent"})}))}))}})},children:"Product Sent"}),"productRecieved"===y.status&&Object(m.jsx)("button",{onClick:function(){return Object(j.a)({label:"Refund Resolved",question:"You sure want to mark this refund resolved?",callback:function(){R({status:"resolved"}).then((function(e){k((function(e){return Object(s.a)(Object(s.a)({},e),{},{status:"resolved"})}))}))}})},children:"Mark as Resolved"})]}),Object(m.jsxs)("div",{className:"singleOrder",children:[Object(m.jsxs)("div",{className:"summery",children:[Object(m.jsx)("h3",{children:"Summery"}),Object(m.jsxs)("ul",{children:[Object(m.jsxs)("li",{className:"devide",children:[Object(m.jsx)("label",{children:"Order"}),Object(m.jsx)("span",{})]}),Object(m.jsxs)("li",{children:[Object(m.jsx)("label",{children:"Seller"}),Object(m.jsx)(d.E,{user:S.seller})]}),Object(m.jsxs)("li",{children:[Object(m.jsx)("label",{children:"Order ID"}),S._id]}),Object(m.jsxs)("li",{children:[Object(m.jsx)("label",{children:"Status"}),S.status]}),Object(m.jsxs)("li",{children:[Object(m.jsx)("label",{children:"Ordered at"}),Object(m.jsx)(Te,{format:"DD MMM YYYY, hh:mma",children:S.createdAt})]}),Object(m.jsxs)("li",{children:[Object(m.jsx)("label",{children:"Delivered at"}),Object(m.jsx)(Te,{format:"DD MMM YYYY, hh:mm a",children:S.deliveredAt})]}),Object(m.jsxs)("li",{children:[Object(m.jsx)("label",{children:"Proof of delivery"}),(null===(t=S.files)||void 0===t?void 0:t.length)>0?Object(m.jsx)("div",{className:"thumbs",children:Object(m.jsx)(d.p,{links:S.files})}):Object(m.jsx)(m.Fragment,{children:"No files added."})]}),Object(m.jsxs)("li",{children:[Object(m.jsx)("label",{children:"Refundable"}),S.refundable||"N/A"]}),Y&&Object(m.jsxs)("li",{children:[Object(m.jsx)("label",{children:"Refund till"}),Object(m.jsx)(Te,{format:"DD MMM YYYY, hh:mm a",children:Y})]}),Object(m.jsx)("li",{}),Object(m.jsxs)("li",{className:"devide",children:[Object(m.jsx)("label",{children:"Refund"}),Object(m.jsx)("span",{})]}),Object(m.jsxs)("li",{children:[Object(m.jsx)("label",{children:"Refund ID"}),y._id]}),Object(m.jsxs)("li",{children:[Object(m.jsx)("label",{children:"Status"}),y.status]}),Object(m.jsxs)("li",{children:[Object(m.jsx)("label",{children:"Submitted at"}),Object(m.jsx)(Te,{format:"DD MMM YYYY, hh:mma",children:y.createdAt})]}),Object(m.jsxs)("li",{children:[Object(m.jsx)("label",{children:"Issue"}),y.issue]}),Object(m.jsxs)("li",{children:[Object(m.jsx)("label",{children:"Descrption"}),y.dscr]}),Object(m.jsxs)("li",{children:[Object(m.jsx)("label",{children:"Images"}),Object(m.jsx)("div",{className:"thumbs",children:y.files.length?Object(m.jsx)(d.p,{links:y.files}):Object(m.jsx)(m.Fragment,{children:"No Images has been provided."})})]}),Object(m.jsx)("li",{}),Object(m.jsxs)("li",{className:"devide",children:[Object(m.jsx)("label",{children:"Delivery Address"}),Object(m.jsx)("span",{})]}),Object(m.jsx)(m.Fragment,{children:Object.entries(S.deliveryDetail).map((function(e,t){var n=Object(a.a)(e,2),c=n[0],s=n[1];return"deliveryTime"===c?Object(m.jsxs)("li",{children:[Object(m.jsx)("label",{children:"Delivery date"}),S.deliveryDetail.deliveryTime?Object(m.jsx)(Te,{format:"DD MMM, YYYY hh:mma",children:S.deliveryDetail.deliveryTime}):"N/A"]},t):Object(m.jsxs)("li",{children:[Object(m.jsx)("label",{children:c}),s]},t)}))})]})]}),Object(m.jsxs)("div",{className:"products",children:[Object(m.jsx)("h3",{children:"Products"}),Object(m.jsx)("ul",{children:S.products.map((function(e,t){var n=e.product,c=e.qty;return Object(m.jsxs)("li",{children:[Object(m.jsx)(d.n,{src:n.images[0]||"/open_box.png"}),Object(m.jsxs)("div",{className:"detail",children:[Object(m.jsx)("p",{children:n.name}),Object(m.jsxs)("p",{className:"qty",children:["QTY: ",c]})]}),Object(m.jsxs)("div",{className:"price",children:[Object(m.jsxs)("span",{children:[Object(d.I)({product:n,gst:!0})," x ",c]}),"\u20b9",Object(d.I)({product:n,gst:!0})*c]})]},t)}))}),Object(m.jsx)("div",{className:"total",children:Object(m.jsxs)("div",{className:"data",children:[Object(m.jsx)("label",{children:"Total"}),"\u20b9",S.total-S.shippingCost]})})]}),Object(m.jsxs)("div",{className:"milestones",children:[Object(m.jsxs)("h3",{children:["Milestones",("approved"===y.status||"shipped"===y.status||"delivered"===y.status)&&Object(m.jsx)("button",{onClick:function(){return P(!0)},children:"Request Milestone"})]}),"pending"==y.status?Object(m.jsx)("p",{children:"You can create milestones after seller accepts your order."}):Object(m.jsxs)("table",{cellSpacing:0,cellPadding:0,children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:"Date"}),Object(m.jsx)("td",{children:"Descrption"}),Object(m.jsx)("td",{children:"Amount"}),Object(m.jsx)("td",{children:"Status"})]})}),Object(m.jsxs)("tbody",{children:[y.milestones.map((function(e){return Object(m.jsxs)("tr",{onClick:function(){return u.push("/account/hold?q=".concat(e._id))},children:[Object(m.jsx)("td",{children:Object(m.jsx)(Te,{format:"DD MMM YYYY, hh:mma",children:e.createdAt})}),Object(m.jsx)("td",{children:e.dscr}),Object(m.jsxs)("td",{children:["\u20b9",e.amount]}),Object(m.jsx)("td",{children:e.status})]},e._id)})),0===y.milestones.length&&Object(m.jsx)("tr",{className:"placeholdert",children:Object(m.jsx)("td",{children:"Nothing yet."})})]})]})]}),Object(m.jsxs)("section",{className:"terms",children:[Object(m.jsx)("h3",{children:"Return Policy Terms"}),Object(m.jsxs)("ul",{children:[null===(n=S.terms)||void 0===n?void 0:n.map((function(e,t){return Object(m.jsx)("li",{children:e},t)})),!(null===(l=S.terms)||void 0===l?void 0:l.length)&&Object(m.jsx)("li",{children:"No terms has been set by the seller yet."})]})]})]}),Object(m.jsx)(j.b,{head:!0,label:"Request Milestone",setOpen:P,className:"milestoneRequest",open:_,children:Object(m.jsx)(Tt,{action:"request",definedAmount:S.total-S.shippingCost,client:S.seller,refund:y._id,onSuccess:function(e){P(!1),p(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return p(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.A,{}),Object(m.jsxs)("h4",{className:"amount",children:["\u20b9",null===e||void 0===e?void 0:e.amount]}),Object(m.jsx)("h4",{children:"Milestone has been requested"})]}),Object(m.jsx)(o.b,{to:"/account/hold",onClick:function(){return p(null)},children:"Check your Delivery pay Hold"})]})),k((function(t){return Object(s.a)(Object(s.a)({},t),{},{milestones:[].concat(Object(c.a)(t.milestones),[e])})}))}})}),Object(m.jsx)(j.b,{className:"msg",open:f,children:f})]}):Object(m.jsx)(m.Fragment,{children:"Loading"})},He=function(e){e.history,e.location,e.match;var t=Object(r.useContext)(i.d).userType,n=Object(r.useState)(null),c=Object(a.a)(n,2),s=c[0],o=(c[1],Object(r.useState)([])),u=Object(a.a)(o,2),b=(u[0],u[1]);return Object(r.useEffect)((function(){fetch("/api/categories").then((function(e){return e.json()})).then((function(e){b(e.categories)}))}),[]),Object(m.jsxs)(m.Fragment,{children:["seller"===t&&Object(m.jsx)(l.a,{to:"/account/myShop/orders"}),Object(m.jsxs)("div",{className:"productContainer",children:[Object(m.jsx)("div",{style:{display:"none"},children:Object(m.jsx)(d.F,{})}),Object(m.jsx)(d.B,{basepath:"/account/myShopping/",tabs:[{label:"Orders",path:"orders"},{label:"Refunds",path:"refunds"}]}),Object(m.jsxs)(l.d,{children:[Object(m.jsx)(l.b,{path:"/account/myShopping/orders/:_id",component:Ie}),Object(m.jsx)(l.b,{path:"/account/myShopping/orders",component:Re}),Object(m.jsx)(l.b,{path:"/account/myShopping/refunds/:_id",component:Ve}),Object(m.jsx)(l.b,{path:"/account/myShopping/Refunds",component:Be})]}),Object(m.jsx)(j.b,{className:"msg",open:s,children:s})]})]})},Ue=n(202),Ze=n(203),We=n(204),Ge=n(205),Je=n(206),ze=n(207),$e=n(208),Ke=n(209),Qe=n(210),Xe=n(211),et=n(212),tt=n(213),nt=n(214),ct=n(215),st=n(216),at=n(217),rt=n(218),it=n(219),lt=n(220),ot=n(221),jt=n(222),dt=n(223),ut=n(224),bt=n(225),ht=n(226),Ot=n(227),xt=n(228),ft=n(229),mt=n(230),pt=n(231),vt=n(232),gt=n(233),yt=n(234),kt=n(235),Nt=n(236),Ct=n(237),St=n(238),wt=n(239),Mt=(n(191),n(192),n(44)),Dt=(n(193),Object(r.lazy)((function(){return n.e(3).then(n.t.bind(null,260,7))}))),_t=Object(r.lazy)((function(){return Promise.resolve().then(n.t.bind(null,52,7))}));n(194),n(195);var Pt=function(){var e=Object(r.useContext)(i.d),t=e.userType,n=e.setUserType,c=e.cart,s=Object(l.g)(),u=Object(r.useState)(""),b=Object(a.a)(u,2),h=(b[0],b[1],Object(r.useState)([])),O=Object(a.a)(h,2),x=(O[0],O[1],Object(r.useState)([])),f=Object(a.a)(x,2),p=f[0],v=f[1],g=Object(r.useState)(null),y=Object(a.a)(g,2),k=y[0],N=y[1],C=Object(r.useState)(null),S=Object(a.a)(C,2),w=S[0],M=S[1],D=(Object(r.useRef)(),Object(r.useState)(3)),_=Object(a.a)(D,2),P=_[0],F=_[1];return Object(r.useEffect)((function(){fetch("/api/recentPayments").then((function(e){return e.json()})).then((function(e){v(e)})).catch((function(e){console.log(e)}))}),[]),Object(r.useEffect)((function(){"/account/home/pay"!==s.location.pathname||k||s.push("/account/home")}),[]),Object(m.jsxs)("div",{className:"homeContainer",children:[Object(m.jsxs)("div",{className:"benner",children:[Object(m.jsx)("h4",{children:"Start transactions with Delivery pay"}),Object(m.jsx)("p",{children:"Connect with new buyers/sellers."})]}),Object(m.jsxs)("div",{className:"userType",children:[Object(m.jsxs)("div",{className:"option buyer ".concat("buyer"===t&&"active"),children:[Object(m.jsx)(d.n,{src:"/buyer.png"}),Object(m.jsxs)("div",{className:"btn",onClick:function(e){return n("buyer")},children:[Object(m.jsx)("p",{children:"I am a Buyer "}),Object(m.jsx)("div",{className:"radial",children:"buyer"===t&&Object(m.jsx)("div",{className:"fill"})})]})]}),Object(m.jsxs)("div",{className:"option seller ".concat("seller"===t&&"active"),children:[Object(m.jsx)(d.n,{src:"/seller.png"}),Object(m.jsxs)("div",{className:"btn",onClick:function(e){return n("seller")},children:[Object(m.jsx)("p",{children:"I am a Seller "}),Object(m.jsx)("div",{className:"radial",children:"seller"===t&&Object(m.jsx)("div",{className:"fill"})})]})]})]}),Object(m.jsxs)("div",{className:"navigate",children:[P>1&&Object(m.jsx)("button",{onClick:function(){return F((function(e){return e-1}))},children:"Previous"}),Object(m.jsx)("button",{disabled:1===P&&!k||2===P&&0===c.length,onClick:function(){return F((function(e){return e+1}))},className:"next",children:"Next"})]}),1===P&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(Ft,{setClient:N,setStep:F}),p.length>0&&t&&Object(m.jsxs)("div",{className:"recentPayments",children:[Object(m.jsxs)("p",{className:"label",children:["Recent Payments",Object(m.jsx)("span",{className:"note",children:"buyer"===t?"Click to view all their products.":"Click to request a milestone."})]}),Object(m.jsx)("ul",{className:"payments",children:p.map((function(e){return Object(m.jsx)("li",{children:Object(m.jsxs)(o.b,{to:"#",onClick:function(){F(2),N(e)},children:[Object(m.jsx)(d.n,{src:e.profileImg}),Object(m.jsx)("p",{className:"name",children:e.firstName+" "+e.lastName})]})},e._id)}))})]})]}),2===P&&Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)(l.d,{children:[Object(m.jsx)(l.b,{path:"/account/home/product/:_id",component:Ae.c}),Object(m.jsx)(Ae.d,{})]})}),3===P&&Object(m.jsx)(l.b,{path:"/account/home/deals/:_id?",component:Ye.a}),Object(m.jsx)(d.l,{}),Object(m.jsx)(l.b,{path:"/account/home/createMilestone",children:Object(m.jsx)(j.b,{open:!0,head:!0,label:"Create Milestone",setOpen:function(){s.push("/account/home"),N(null)},className:"milestoneRequest",children:Object(m.jsx)(Tt,{action:"create",client:k,onSuccess:function(e){s.push("/account/home"),M(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return M(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.A,{}),Object(m.jsxs)("h4",{className:"amount",children:["\u20b9",null===e||void 0===e?void 0:e.amount]}),Object(m.jsx)("h4",{children:"Milestone has been created"})]}),Object(m.jsx)(o.b,{to:"/account/hold",onClick:function(){return M(null)},children:"Check your Delivery pay Hold"})]}))}})})}),Object(m.jsx)(l.b,{path:"/account/home/requestMilestone",children:Object(m.jsx)(j.b,{open:!0,head:!0,label:"Request Milestone",setOpen:function(){s.push("/account/home"),N(null)},className:"milestoneRequest",children:Object(m.jsx)(Tt,{action:"request",client:k,onSuccess:function(e){s.push("/account/home"),M(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return M(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.A,{}),Object(m.jsxs)("h4",{className:"amount",children:["\u20b9",null===e||void 0===e?void 0:e.amount]}),Object(m.jsx)("h4",{children:"Milestone has been requested"})]}),Object(m.jsx)(o.b,{to:"/account/hold",onClick:function(){return M(null)},children:"Check your Delivery pay Hold"})]}))}})})}),Object(m.jsx)(j.b,{className:"msg",open:w,children:w})]})},Ft=function(e){var t=e.setClient,n=e.setStep,c=Object(r.useContext)(i.d).userType,s=(Object(l.g)(),Object(r.useState)(null)),u=Object(a.a)(s,2),b=u[0],h=u[1],O=Object(r.useState)([]),x=Object(a.a)(O,2),f=x[0],p=x[1],v=Object(r.useState)(""),g=Object(a.a)(v,2),y=g[0],k=g[1],N=Object(r.useState)(!1),C=Object(a.a)(N,2),S=C[0],w=C[1],M=Object(r.useRef)(),D=Object(r.useCallback)((function(){new RegExp(/^(\+91|91|1|)(?=\d{10}$)/gi).test(y.toLowerCase())?fetch("/api/inviteUser?".concat(new URLSearchParams({q:"+91"+y.replace(/^(\+91|91|1|)(?=\d{10}$)/g,""),origin:window.location.origin}).toString())).then((function(e){return e.json()})).then((function(e){console.log(e),"ok"===e.code?h(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return h(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.A,{}),Object(m.jsxs)("h4",{children:["An invitaion has been sent to"," ","+91"+y.replace(/^(\+91|91|1|)(?=\d{10}$)/g,""),"."]})]})]})):h(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return h(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Invitation could not be sent. Please try again."})]})]}))})).catch((function(e){console.log(e),h(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return h(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Invitation could not be sent. Make sure you're online."})]})]}))})):h(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return h(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Enter a valid phone number to send invitation."})]})]}))}),[y]),_=function(e){e.path.includes(M.current)||w(!1)};return Object(r.useEffect)((function(){return document.addEventListener("click",_),function(){document.removeEventListener("click",_)}}),[]),Object(r.useEffect)((function(){y?(fetch("/api/getUsers?q=".concat(encodeURIComponent(y))).then((function(e){return e.json()})).then((function(e){e&&p(e)})),""===y&&p([])):p([])}),[y]),Object(m.jsxs)("div",{className:"search",children:[Object(m.jsx)("p",{children:"Select existing contact / Add new contact / Invite new contact"}),Object(m.jsxs)("form",{onSubmit:function(e){return e.preventDefault()},ref:M,children:[Object(m.jsxs)("section",{children:[Object(m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"17.9",height:"17.9",viewBox:"0 0 17.9 17.9",children:Object(m.jsx)("path",{id:"Path_208","data-name":"Path 208",d:"M17.9,16.324l-3.715-3.715a7.708,7.708,0,0,0,1.576-4.728A7.832,7.832,0,0,0,7.881,0,7.832,7.832,0,0,0,0,7.881a7.832,7.832,0,0,0,7.881,7.881,7.708,7.708,0,0,0,4.728-1.576L16.324,17.9ZM2.252,7.881A5.574,5.574,0,0,1,7.881,2.252a5.574,5.574,0,0,1,5.629,5.629,5.574,5.574,0,0,1-5.629,5.629A5.574,5.574,0,0,1,2.252,7.881Z",transform:"translate(0)",fill:"#b9b9b9"})}),Object(m.jsx)("input",{label:"search",required:!0,placeholder:"Search with Phone Number or Delivery pay ID",onFocus:function(){return w(!0)},value:y,onChange:function(e){return k(e.target.value)}}),Object(m.jsx)(o.b,{className:"sendReq ".concat(f.length>0||!y?"disabled":""),onClick:D,to:"#",children:"Invite"})]}),S&&f.length?Object(m.jsx)("ul",{className:"searchResult",children:f.map((function(e,s){return Object(m.jsx)(o.b,{onClick:function(){n(2),t(e)},to:{pathname:"seller"===c?"/account/home/createMilestone":"/account/home?seller=".concat(e._id)},children:Object(m.jsxs)("li",{children:[Object(m.jsxs)("div",{className:"profile",children:[Object(m.jsx)(d.n,{src:e.profileImg}),Object(m.jsxs)("p",{className:"name",children:[e.firstName+" "+e.lastName,Object(m.jsx)("span",{className:"phone",children:e.phone})]})]}),Object(m.jsx)("span",{className:"sendReq",children:"seller"===c?"Request milestone":"Show Products & Services"})]},s)},s)}))}):null]}),Object(m.jsx)(j.b,{className:"msg",open:b,children:b})]})};var At=function(){var e=Object(r.useContext)(i.d),t=e.user,n=e.setUser,u=e.cart,b=(e.setCart,e.userType),h=Object(l.g)(),O=(Object(r.useRef)(null),Object(r.useState)(!1)),x=Object(a.a)(O,2),f=x[0],p=x[1],v=Object(r.useState)(!1),g=Object(a.a)(v,2),y=g[0],k=g[1],N=Object(r.useState)(!1),C=Object(a.a)(N,2),S=C[0],w=C[1],M=Object(r.useState)(!1),D=Object(a.a)(M,2),_=(D[0],D[1]),P=Object(r.useState)(!1),F=Object(a.a)(P,2),A=(F[0],F[1],Object(r.useState)(null)),Y=Object(a.a)(A,2),T=(Y[0],Y[1]);Object(r.useEffect)((function(){S&&fetch("/api/editUserProfile",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({notificationLastRead:new Date})}).then((function(e){return e.json()})).then((function(e){e.user&&n((function(t){return Object(s.a)(Object(s.a)({},t),{},{notificationLastRead:e.user.notificationLastRead})}))})).catch((function(e){console.log(e)}))}),[S]),Object(r.useEffect)((function(){var e;(null===(e=t.notifications)||void 0===e?void 0:e.find((function(e){return new Date(e.createdAt)>new Date(t.notificationLastRead)})))&&_(!0),S&&_(!1)}),[S,t]);var R="".concat(window.location.origin,"/u/join?referer=").concat(t._id);return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:"profile",children:["buyer"===b&&Object(m.jsxs)(d.a,{className:"cart",icon:Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(d.e,{}),u.length>0&&Object(m.jsx)("span",{className:"itemCount",children:u.reduce((function(e,t){return e+t.qty}),0)})]}),clickable:!0,wrapperClassName:"popupCart",children:[u.map((function(e,t){var n=e.product,c=e.qty;return Object(m.jsx)(Ae.b,{product:n,qty:c},t)})),u.length>0&&Object(m.jsx)("li",{className:"actions",children:Object(m.jsx)(o.b,{to:"/account/cart",children:"View Cart"})}),0===u.length&&Object(m.jsx)("p",{className:"placeholder",children:"cart is empty"})]}),Object(m.jsx)(d.a,{icon:Object(m.jsx)("svg",{id:"bell",xmlns:"http://www.w3.org/2000/svg",width:"15.918",height:"16",viewBox:"0 0 15.918 16",children:Object(m.jsx)("path",{id:"Path_1","data-name":"Path 1",d:"M15,14H10a2,2,0,0,1-4,0H1a.961.961,0,0,1-.9-.7,1.068,1.068,0,0,1,.3-1.1A4.026,4.026,0,0,0,2,9V6A6,6,0,0,1,14,6V9a4.026,4.026,0,0,0,1.6,3.2.947.947,0,0,1,.3,1.1A.961.961,0,0,1,15,14Z",transform:"translate(-0.063)",fill:"#fff",fillRule:"evenodd"})}),wrapperClassName:"notiWrapper",onClick:function(){return w(!0)},children:Object(c.a)(t.notifications).reverse().map((function(e,t){return Object(m.jsxs)("li",{children:[Object(m.jsx)(_t,{format:"hh:mm",children:e.createdAt}),Object(m.jsx)("p",{className:"title",children:e.title}),Object(m.jsx)("p",{className:"body",children:e.body})]},t)}))}),Object(m.jsxs)(d.a,{wrapperClassName:"menu",className:"avatar",icon:Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(d.n,{src:(null===t||void 0===t?void 0:t.profileImg)||"/profile-user.jpg",onClick:function(){return p(!f)}}),b&&Object(m.jsx)("p",{className:"userTypeTag",children:b})]}),children:[Object(m.jsx)("p",{className:"name",children:(null===t||void 0===t?void 0:t.firstName)+" "+(null===t||void 0===t?void 0:t.lastName)||t.phone}),Object(m.jsx)(Yt,{tip:!0}),Object(m.jsx)(o.b,{className:"link",to:"/account",children:"Dashboard"}),Object(m.jsx)(o.b,{className:"link trans",to:"/account/transactions",children:"Transactions"}),Object(m.jsx)(o.b,{className:"link settings",to:"/account/profile",children:"Settings"}),Object(m.jsx)(o.b,{className:"link",to:"/aboutUs",children:"More about us"}),Object(m.jsxs)("div",{className:"referral",children:[Object(m.jsx)("button",{onClick:function(){k(!0)},children:"Invite now"}),Object(m.jsx)("p",{children:"Refer and earn flat \u20b950/- cashback to your wallet"})]}),Object(m.jsxs)("button",{className:"logout",onClick:function(){fetch("/api/logout").then((function(e){return e.json()})).then((function(e){n(null),h.push("/")})).catch((function(e){console.log(e),T(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return T(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Could not logout."})]})]}))}))},children:["Logout",Object(m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"31.702",height:"31.702",viewBox:"0 0 31.702 31.702",children:Object(m.jsx)("path",{id:"Path_1758","data-name":"Path 1758",d:"M15.487,25.174l2.483,2.483,8.806-8.806L17.97,10.045l-2.483,2.483,4.544,4.562H3v3.522H20.031ZM31.18,3H6.522A3.521,3.521,0,0,0,3,6.522v7.045H6.522V6.522H31.18V31.18H6.522V24.135H3V31.18A3.521,3.521,0,0,0,6.522,34.7H31.18A3.533,3.533,0,0,0,34.7,31.18V6.522A3.533,3.533,0,0,0,31.18,3Z",transform:"translate(-3 -3)",fill:"#fc0660"})})]})]})]}),Object(m.jsxs)(j.b,{className:"invite",open:y,onBackdropClick:function(){return k(!1)},children:[Object(m.jsx)("div",{className:"imgWrapper",onClick:function(){return k(!1)},children:Object(m.jsx)(Dt,{value:R,size:250,renderAs:"svg"})}),Object(m.jsxs)("div",{className:"shareBtns",children:[Object(m.jsx)(Ue.a,{url:R,children:Object(m.jsx)(Ze.a,{})}),Object(m.jsx)(We.a,{url:R,children:Object(m.jsx)(Ge.a,{})}),Object(m.jsx)(Je.a,{url:R,children:Object(m.jsx)(ze.a,{})}),Object(m.jsx)($e.a,{url:R,children:Object(m.jsx)(Ke.a,{})}),Object(m.jsx)(Qe.a,{url:R,children:Object(m.jsx)(Xe.a,{})}),Object(m.jsx)(et.a,{url:R,children:Object(m.jsx)(tt.a,{})}),Object(m.jsx)(nt.a,{url:R,children:Object(m.jsx)(ct.a,{})}),Object(m.jsx)(st.a,{url:R,children:Object(m.jsx)(at.a,{})}),Object(m.jsx)(rt.a,{url:R,children:Object(m.jsx)(it.a,{})}),Object(m.jsx)(lt.a,{url:R,children:Object(m.jsx)(ot.a,{})}),Object(m.jsx)(jt.a,{url:R,children:Object(m.jsx)(dt.a,{})}),Object(m.jsx)(ut.a,{url:R,children:Object(m.jsx)(bt.a,{})}),Object(m.jsx)(ht.a,{url:R,children:Object(m.jsx)(Ot.a,{})}),Object(m.jsx)(xt.a,{url:R,children:Object(m.jsx)(ft.a,{})}),Object(m.jsx)(mt.a,{url:R,children:Object(m.jsx)(pt.a,{})}),Object(m.jsx)(vt.a,{url:R,children:Object(m.jsx)(gt.a,{})}),Object(m.jsx)(yt.a,{url:R,children:Object(m.jsx)(kt.a,{})}),Object(m.jsx)(Nt.a,{url:R,children:Object(m.jsx)(Ct.a,{})}),Object(m.jsx)(St.a,{url:R,children:Object(m.jsx)(wt.a,{})})]})]})]})},Yt=function(e){var t=e.tip,n=Object(r.useContext)(i.d),c=n.userType,s=n.setUserType;return Object(m.jsxs)("div",{className:"userTypeSwitch",children:[Object(m.jsx)("label",{children:"Browse as"}),Object(m.jsxs)("ul",{className:"options",children:[Object(m.jsx)("li",{className:"buyer"===c?"active":"",onClick:function(){return s("buyer")},children:"Buyer"}),Object(m.jsx)("li",{className:"seller"===c?"active":"",onClick:function(){return s("seller")},children:"Seller"})]}),t&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"break"}),"seller"===c?Object(m.jsxs)("p",{className:"note",children:["As a seller, you can manage your",Object(m.jsx)("br",{})," product listing, order, refunds and general shop settings."]}):Object(m.jsxs)("p",{className:"note",children:["As a buyer, you can manage your",Object(m.jsx)("br",{})," perchase orders, payments and deals."]})]})]})},Tt=function(e){var t,n,c,l,u=e.action,b=e.client,h=e.onSuccess,O=e.definedAmount,x=e.order,f=e.refund,p=e.strict,v=Object(r.useContext)(i.d),g=v.user,y=(v.setUser,v.config),k=Object(r.useState)(!1),N=Object(a.a)(k,2),C=N[0],S=N[1],w=Object(r.useState)(""),M=Object(a.a)(w,2),D=(M[0],M[1],Object(r.useState)(!1)),_=Object(a.a)(D,2),P=(_[0],_[1],Object(r.useState)(Object(s.a)({},g))),F=Object(a.a)(P,2),A=F[0],Y=(F[1],Object(r.useState)(Object(s.a)({},b))),T=Object(a.a)(Y,2),R=T[0],q=(T[1],Object(r.useState)("")),I=Object(a.a)(q,2),L=I[0],B=I[1],E=Object(r.useState)(O||""),V=Object(a.a)(E,2),H=V[0],U=V[1],Z=Object(r.useState)(0),W=Object(a.a)(Z,2),G=W[0],J=W[1],z=Object(r.useState)(null),$=Object(a.a)(z,2),K=$[0],Q=$[1],X=Object(r.useRef)(),ee=Object(r.useCallback)((function(){fetch("/api/requestMilestone",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({buyer_id:b._id,amount:H,dscr:L,order:x,refund:f})}).then((function(e){return e.json()})).then((function(e){S(!1),"ok"===e.code?null===h||void 0===h||h(e.milestone):Q(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return Q(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Could not request milestone. Try again."})]})]}))})).catch((function(e){S(!1),console.log(e),Q(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return Q(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Could not request milestone. Make sure you're online."})]})]}))}))}),[R,A,H,L]),te=Object(r.useCallback)((function(){fetch("/api/createMilestone",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({seller:Object(s.a)({},R),amount:H,dscr:L,order:x,refund:f})}).then((function(e){return e.json()})).then((function(e){S(!1),"ok"===e.code?null===h||void 0===h||h(Object(s.a)({},e)):403===e.code?Q(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return Q(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Insufficient fund"}),Object(m.jsx)(o.b,{to:"/account/wallet",children:"Add Money to your wallet now."})]})]})):Q(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return Q(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Could not create milestone. Try again"})]})]}))})).catch((function(e){S(!1),console.log(e),Q(Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){return Q(null)},children:"Okay"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(d.i,{}),Object(m.jsx)("h4",{children:"Could not create milestone. Make sure you're online."})]})]}))}))}),[R,A,H,L]);return Object(r.useEffect)((function(){J((function(){return(+H/100*y.fee).fix()}))}),[H]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("form",{className:"milestonesForm",onSubmit:function(e){S(!0),e.preventDefault(),Object(Mt.b)(Object(m.jsxs)("div",{className:"toast",children:["Milestone is being"," ","create"===u?"created.":"requested."," ",Object(m.jsx)("button",{className:"undo",onClick:function(){X.current=null},children:"Undo"})]}),{position:"bottom-center",autoClose:8e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,onClose:function(){var e;null===(e=X.current)||void 0===e||e.call(X),S(!1)},draggable:!0,progress:void 0}),X.current="create"===u?te:ee},children:[Object(m.jsxs)("section",{className:"transactionDetail",children:[Object(m.jsxs)("section",{className:"amount",children:[Object(m.jsx)("label",{children:"Amount"}),Object(m.jsx)(d.r,{readOnly:p,min:10,defaultValue:O||0,required:!0,onChange:function(e){return U((+e.target.value).toString())}})]}),H&&Object(m.jsxs)(m.Fragment,{children:["create"===u&&Object(m.jsxs)("label",{className:"receivable",children:[b.firstName," ",b.lastName," will recieve \u20b9",(H-G).fix()]}),"request"===u&&Object(m.jsxs)("label",{className:"receivable",children:["You will recieve \u20b9",(H-G).fix()]})]}),Object(m.jsxs)("section",{children:[Object(m.jsx)("label",{children:"Detail"}),Object(m.jsx)("input",{value:L,required:!0,onChange:function(e){return B(e.target.value)}})]}),Object(m.jsx)("button",{type:"submit",children:"create"===u?"Create Milestone":"Request Milestone"})]}),Object(m.jsxs)("section",{className:"clientDetail",children:["request"===u&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(d.n,{src:(null===b||void 0===b?void 0:b.profileImg)||"/profile-user.jpg"}),Object(m.jsx)("label",{children:"Buyer Information"}),Object(m.jsxs)("div",{className:"detail",onClick:function(){},children:[Object(m.jsxs)("section",{className:"profileDetail",children:[Object(m.jsx)("p",{className:"name",children:(null===b||void 0===b?void 0:b.firstName)+" "+(null===b||void 0===b?void 0:b.lastName)}),Object(m.jsx)("p",{className:"phone",children:null===b||void 0===b?void 0:b.phone}),Object(m.jsx)("p",{className:"email",children:null===b||void 0===b?void 0:b.email})]}),(null===b||void 0===b||null===(t=b.address)||void 0===t?void 0:t.street)&&Object(m.jsx)("section",{className:"address",children:Object(m.jsxs)("p",{className:"street",children:[null===(n=b.address)||void 0===n?void 0:n.street,", ",null===(c=b.address)||void 0===c?void 0:c.city,","," ",null===(l=b.address)||void 0===l?void 0:l.zip]})})]})]}),"request"===u?null:Object(m.jsxs)("div",{className:"sellerInfo",children:[Object(m.jsx)(d.n,{src:(null===R||void 0===R?void 0:R.profileImg)||"/profile-user.jpg"}),Object(m.jsx)("label",{children:"Seller Information"}),Object(m.jsx)("div",{className:"detail",children:Object(m.jsxs)("section",{className:"profileDetail",children:[Object(m.jsxs)("p",{className:"name",children:[null===R||void 0===R?void 0:R.firstName," ",null===R||void 0===R?void 0:R.lastName]}),Object(m.jsx)("p",{className:"phone",children:null===R||void 0===R?void 0:R.phone}),Object(m.jsx)("p",{className:"email",children:null===R||void 0===R?void 0:R.email})]})})]})]})]}),C&&Object(m.jsx)("div",{className:"spinnerContainer",children:Object(m.jsx)("div",{className:"spinner"})}),Object(m.jsx)(j.b,{className:"msg",open:K,children:K})]})};t.default=function(){var e=Object(r.useContext)(i.d),t=e.user,n=e.userType,c=Object(r.useContext)(i.a).unread,s=Object(l.h)();return Object(r.useEffect)((function(){Ye.b.connected||Ye.b.connect()}),[]),Object(m.jsxs)("div",{className:"account ".concat(s.pathname.startsWith("/account/deals/")?"chatSection":""),children:[Object(m.jsxs)("header",{children:[Object(m.jsxs)(o.b,{to:"/",children:[Object(m.jsx)(d.n,{className:"logo",src:"/logo_land.jpg",alt:"Delivery pay logo"}),Object(m.jsx)(d.n,{className:"logo_small",src:"/logo_sqr.jpg",alt:"Delivery pay logo"})]}),Object(m.jsxs)("div",{className:"links",children:[Object(m.jsx)(o.b,{to:"/",className:"home",children:"Home"}),"buyer"===n&&Object(m.jsx)(o.b,{to:"/marketplace",children:"Browse"})]}),Object(m.jsx)(Yt,{}),Object(m.jsx)(At,{})]}),Object(m.jsxs)("div",{className:"content",children:[Object(m.jsxs)("ul",{className:"sidebar",children:[Object(m.jsx)("li",{className:"/account"===s.pathname||s.pathname.startsWith("/account/home")?"active":void 0,children:Object(m.jsxs)(o.b,{to:"/account/home",children:[Object(m.jsx)("div",{className:"icon",children:Object(m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"21.648",height:"21.513",viewBox:"0 0 21.648 21.513",children:Object(m.jsx)("path",{id:"Path_287","data-name":"Path 287",d:"M21.387,10.488A1.079,1.079,0,0,0,21.3,8.979L11.626.289a1.185,1.185,0,0,0-1.576,0L.342,9.44A1.073,1.073,0,0,0,.3,10.95l.245.258A1.043,1.043,0,0,0,2,11.321l.724-.665v9.762A1.071,1.071,0,0,0,3.78,21.5H7.563A1.071,1.071,0,0,0,8.62,20.418V13.591h4.81v6.828a1.04,1.04,0,0,0,.269.761.987.987,0,0,0,.723.323H18.45a1.071,1.071,0,0,0,1.057-1.084V10.776l.449.4c.245.222.765.042,1.168-.4Z",transform:"translate(-0.008 0.011)",fill:"#fff"})})}),"Home"]})}),Object(m.jsx)("li",{className:s.pathname.startsWith("/account/wallet")?"active":void 0,children:Object(m.jsxs)(o.b,{to:"/account/wallet",children:[Object(m.jsx)("div",{className:"icon",children:Object(m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20.886",height:"22.948",viewBox:"0 0 20.886 22.948",children:[Object(m.jsxs)("g",{id:"Rectangle_2","data-name":"Rectangle 2",fill:"none",stroke:"#fff",strokeWidth:"2",children:[Object(m.jsx)("rect",{width:"20.886",height:"16.244",rx:"2",stroke:"none"}),Object(m.jsx)("rect",{x:"1",y:"1",width:"18.886",height:"14.244",rx:"1",fill:"none"})]}),Object(m.jsxs)("g",{id:"Rectangle_3","data-name":"Rectangle 3",transform:"translate(0 9.283)",fill:"none",stroke:"#fff",strokeWidth:"2",children:[Object(m.jsx)("rect",{width:"20.886",height:"6.962",rx:"2",stroke:"none"}),Object(m.jsx)("rect",{x:"1",y:"1",width:"18.886",height:"4.962",rx:"1",fill:"none"})]}),Object(m.jsx)("path",{id:"Path_2","data-name":"Path 2",d:"M-180.174-182v7.923l4.1-4.653,3.932,4.653V-182Z",transform:"translate(186.6 197.025)",fill:"#fff"})]})}),"Wallet"]})}),Object(m.jsxs)("li",{className:"deals ".concat(s.pathname.startsWith("/account/deals")?"active":void 0),children:[Object(m.jsxs)(o.b,{to:"/account/deals",children:[Object(m.jsx)("div",{className:"icon",children:Object(m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26.55",height:"25.219",viewBox:"0 0 26.55 25.219",children:Object(m.jsx)("path",{id:"Path_1","data-name":"Path 1",d:"M-242.2-184.285h-13l26.55-10.786-4.252,25.219-5.531-10.637-2.127,4.68v-6.382l7.659-9.148h2.34",transform:"translate(255.198 195.071)",fill:"#fff"})})}),"Open Chat"]}),c?Object(m.jsx)("span",{className:"unred",children:c}):null]}),"buyer"===n&&Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("li",{className:"".concat(s.pathname.startsWith("/account/myShopping")?"active":void 0),children:Object(m.jsxs)(o.b,{to:"/account/myShopping/orders",children:[Object(m.jsx)("div",{className:"icon",children:Object(m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26.55",height:"25.219",viewBox:"0 0 26.55 25.219",children:Object(m.jsx)("path",{id:"Path_1","data-name":"Path 1",d:"M-242.2-184.285h-13l26.55-10.786-4.252,25.219-5.531-10.637-2.127,4.68v-6.382l7.659-9.148h2.34",transform:"translate(255.198 195.071)",fill:"#fff"})})}),"Open Order Ledger"]})})}),"seller"===n&&Object(m.jsx)("li",{className:"products ".concat(s.pathname.startsWith("/account/myShop")?"active":void 0),children:Object(m.jsxs)(o.b,{to:"/account/myShop/products",children:[Object(m.jsx)("div",{className:"icon",children:Object(m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"19.872",height:"21.086",viewBox:"0 0 19.872 21.086",children:[Object(m.jsxs)("g",{id:"Group_4","data-name":"Group 4",transform:"translate(0 5.63)",children:[Object(m.jsxs)("g",{id:"Path_288","data-name":"Path 288",fill:"none",children:[Object(m.jsx)("path",{d:"M1,0H18.872a1,1,0,0,1,1,1V14.456a1,1,0,0,1-1,1H1a1,1,0,0,1-1-1V1A1,1,0,0,1,1,0Z",stroke:"none"}),Object(m.jsx)("path",{d:"M 2 2.000001907348633 L 2 13.45590209960938 L 17.87188148498535 13.45590209960938 L 17.87188148498535 2.000001907348633 L 2 2.000001907348633 M 1 1.9073486328125e-06 L 18.87188148498535 1.9073486328125e-06 C 19.42416000366211 1.9073486328125e-06 19.87188148498535 0.4477119445800781 19.87188148498535 1.000001907348633 L 19.87188148498535 14.45590209960938 C 19.87188148498535 15.00819206237793 19.42416000366211 15.45590209960938 18.87188148498535 15.45590209960938 L 1 15.45590209960938 C 0.4477100372314453 15.45590209960938 0 15.00819206237793 0 14.45590209960938 L 0 1.000001907348633 C 0 0.4477119445800781 0.4477100372314453 1.9073486328125e-06 1 1.9073486328125e-06 Z",stroke:"none",fill:"#fff"})]}),Object(m.jsxs)("g",{id:"Rectangle_3","data-name":"Rectangle 3",transform:"translate(0 8.832)",fill:"none",stroke:"#fff",strokeWidth:"2",children:[Object(m.jsx)("rect",{width:"19.872",height:"6.624",rx:"2",stroke:"none"}),Object(m.jsx)("rect",{x:"1",y:"1",width:"17.872",height:"4.624",rx:"1",fill:"none"})]})]}),Object(m.jsxs)("g",{id:"Rectangle_1134","data-name":"Rectangle 1134",transform:"translate(4)",fill:"none",stroke:"#fff",strokeWidth:"2",children:[Object(m.jsx)("path",{d:"M2,0h8a2,2,0,0,1,2,2V7a0,0,0,0,1,0,0H0A0,0,0,0,1,0,7V2A2,2,0,0,1,2,0Z",stroke:"none"}),Object(m.jsx)("rect",{x:"1",y:"1",width:"10",height:"5",rx:"1",fill:"none"})]})]})}),"My Shop"]})}),Object(m.jsx)("li",{className:"hold ".concat(s.pathname.startsWith("/account/hold")?"active":void 0),children:Object(m.jsxs)(o.b,{to:"/account/hold",children:[Object(m.jsx)("div",{className:"icon",children:Object(m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"27",viewBox:"0 0 22 27",children:[Object(m.jsx)("text",{id:"_3","data-name":"3",transform:"translate(14 14) rotate(180)",fill:"#fff",fontSize:"10",fontFamily:"Ebrima-Bold, Ebrima",fontWeight:"700",children:Object(m.jsx)("tspan",{x:"0",y:"0",children:"3"})}),Object(m.jsxs)("g",{id:"Group_166","data-name":"Group 166",transform:"translate(-534.967 -611.816)",children:[Object(m.jsxs)("g",{id:"Rectangle_1132","data-name":"Rectangle 1132",transform:"translate(534.967 620.816)",fill:"none",stroke:"#fff",strokeWidth:"2",children:[Object(m.jsx)("rect",{width:"22",height:"18",rx:"4",stroke:"none"}),Object(m.jsx)("rect",{x:"1",y:"1",width:"20",height:"16",rx:"3",fill:"none"})]}),Object(m.jsxs)("g",{id:"Rectangle_1133","data-name":"Rectangle 1133",transform:"translate(539.967 611.816)",fill:"none",stroke:"#fff",strokeWidth:"2",children:[Object(m.jsx)("path",{d:"M6.5,0h0A6.5,6.5,0,0,1,13,6.5V11a0,0,0,0,1,0,0H0a0,0,0,0,1,0,0V6.5A6.5,6.5,0,0,1,6.5,0Z",stroke:"none"}),Object(m.jsx)("path",{d:"M6.5,1h0A5.5,5.5,0,0,1,12,6.5V9.214a.786.786,0,0,1-.786.786H1.786A.786.786,0,0,1,1,9.214V6.5A5.5,5.5,0,0,1,6.5,1Z",fill:"none"})]})]})]})}),"Delivery pay Hold"]})}),Object(m.jsx)("li",{className:"trans ".concat(s.pathname.startsWith("/account/transactions")?"active":void 0),children:Object(m.jsxs)(o.b,{to:"/account/transactions",children:[Object(m.jsx)("div",{className:"icon",children:Object(m.jsxs)("svg",{id:"Group_283","data-name":"Group 283",xmlns:"http://www.w3.org/2000/svg",width:"28.407",height:"25.407",viewBox:"0 0 28.407 25.407",children:[Object(m.jsxs)("g",{id:"Path_4","data-name":"Path 4",transform:"translate(3)",fill:"none",children:[Object(m.jsx)("path",{d:"M12.7,0A12.7,12.7,0,1,1,0,12.7,12.7,12.7,0,0,1,12.7,0Z",stroke:"none"}),Object(m.jsx)("path",{d:"M 12.70325660705566 1.999996185302734 C 9.844316482543945 1.999996185302734 7.156496047973633 3.113327026367188 5.134906768798828 5.134906768798828 C 3.113327026367188 7.156496047973633 1.999996185302734 9.844316482543945 1.999996185302734 12.70325660705566 C 1.999996185302734 15.56219673156738 3.113327026367188 18.2500171661377 5.134906768798828 20.2716064453125 C 7.156496047973633 22.29318618774414 9.844316482543945 23.40651702880859 12.70325660705566 23.40651702880859 C 15.56219673156738 23.40651702880859 18.2500171661377 22.29318618774414 20.2716064453125 20.2716064453125 C 22.29318618774414 18.2500171661377 23.40651702880859 15.56219673156738 23.40651702880859 12.70325660705566 C 23.40651702880859 9.844316482543945 22.29318618774414 7.156496047973633 20.2716064453125 5.134906768798828 C 18.2500171661377 3.113327026367188 15.56219673156738 1.999996185302734 12.70325660705566 1.999996185302734 M 12.70325660705566 -3.814697265625e-06 C 19.71906661987305 -3.814697265625e-06 25.40651702880859 5.687446594238281 25.40651702880859 12.70325660705566 C 25.40651702880859 19.71906661987305 19.71906661987305 25.40651702880859 12.70325660705566 25.40651702880859 C 5.687446594238281 25.40651702880859 -3.814697265625e-06 19.71906661987305 -3.814697265625e-06 12.70325660705566 C -3.814697265625e-06 5.687446594238281 5.687446594238281 -3.814697265625e-06 12.70325660705566 -3.814697265625e-06 Z",stroke:"none",fill:"#fff"})]}),Object(m.jsxs)("g",{id:"Polygon_1","data-name":"Polygon 1",transform:"translate(6.001 12.353) rotate(-150)",fill:"#fff",children:[Object(m.jsx)("path",{d:"M 4.929044723510742 3.619362831115723 L 2.000004529953003 3.619362831115723 L 3.464524507522583 1.666669487953186 L 4.929044723510742 3.619362831115723 Z",stroke:"none"}),Object(m.jsx)("path",{d:"M 3.464524507522583 2.86102294921875e-06 L 6.929044723510742 4.619362831115723 L 4.291534423828125e-06 4.619362831115723 L 3.464524507522583 2.86102294921875e-06 Z",stroke:"none",fill:"#fff"})]}),Object(m.jsxs)("g",{id:"Rectangle_4","data-name":"Rectangle 4",transform:"translate(0 11.86) rotate(-22)",fill:"#3b2ab4",stroke:"#3b2ab4",strokeWidth:"1",children:[Object(m.jsx)("rect",{width:"6.929",height:"4.619",stroke:"none"}),Object(m.jsx)("rect",{x:"0.5",y:"0.5",width:"5.929",height:"3.619",fill:"none"})]}),Object(m.jsxs)("g",{id:"Group_5","data-name":"Group 5",transform:"translate(15.704 4.888)",children:[Object(m.jsx)("line",{id:"Line_3","data-name":"Line 3",y2:"9.239",transform:"translate(0 0)",fill:"none",stroke:"#fff",strokeWidth:"2"}),Object(m.jsx)("line",{id:"Line_4","data-name":"Line 4",x2:"6.929",y2:"2.31",transform:"translate(0 9.239)",fill:"none",stroke:"#fff",strokeWidth:"2"})]})]})}),"Delivery pay Transactions"]})}),Object(m.jsx)("li",{className:"support ".concat(s.pathname.startsWith("/account/support")?"active":void 0),children:Object(m.jsxs)(o.b,{to:"/account/support",children:[Object(m.jsx)("div",{className:"icon",children:Object(m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"19.872",height:"21.086",viewBox:"0 0 19.872 21.086",children:[Object(m.jsxs)("g",{id:"Group_4","data-name":"Group 4",transform:"translate(0 5.63)",children:[Object(m.jsxs)("g",{id:"Path_288","data-name":"Path 288",fill:"none",children:[Object(m.jsx)("path",{d:"M1,0H18.872a1,1,0,0,1,1,1V14.456a1,1,0,0,1-1,1H1a1,1,0,0,1-1-1V1A1,1,0,0,1,1,0Z",stroke:"none"}),Object(m.jsx)("path",{d:"M 2 2.000001907348633 L 2 13.45590209960938 L 17.87188148498535 13.45590209960938 L 17.87188148498535 2.000001907348633 L 2 2.000001907348633 M 1 1.9073486328125e-06 L 18.87188148498535 1.9073486328125e-06 C 19.42416000366211 1.9073486328125e-06 19.87188148498535 0.4477119445800781 19.87188148498535 1.000001907348633 L 19.87188148498535 14.45590209960938 C 19.87188148498535 15.00819206237793 19.42416000366211 15.45590209960938 18.87188148498535 15.45590209960938 L 1 15.45590209960938 C 0.4477100372314453 15.45590209960938 0 15.00819206237793 0 14.45590209960938 L 0 1.000001907348633 C 0 0.4477119445800781 0.4477100372314453 1.9073486328125e-06 1 1.9073486328125e-06 Z",stroke:"none",fill:"#fff"})]}),Object(m.jsxs)("g",{id:"Rectangle_3","data-name":"Rectangle 3",transform:"translate(0 8.832)",fill:"none",stroke:"#fff",strokeWidth:"2",children:[Object(m.jsx)("rect",{width:"19.872",height:"6.624",rx:"2",stroke:"none"}),Object(m.jsx)("rect",{x:"1",y:"1",width:"17.872",height:"4.624",rx:"1",fill:"none"})]})]}),Object(m.jsxs)("g",{id:"Rectangle_1134","data-name":"Rectangle 1134",transform:"translate(4)",fill:"none",stroke:"#fff",strokeWidth:"2",children:[Object(m.jsx)("path",{d:"M2,0h8a2,2,0,0,1,2,2V7a0,0,0,0,1,0,0H0A0,0,0,0,1,0,7V2A2,2,0,0,1,2,0Z",stroke:"none"}),Object(m.jsx)("rect",{x:"1",y:"1",width:"10",height:"5",rx:"1",fill:"none"})]})]})}),"Customer Care"]})}),Object(m.jsx)("li",{className:s.pathname.startsWith("/account/profile")?"active":void 0,children:Object(m.jsxs)(o.b,{to:"/account/profile",children:[Object(m.jsx)("div",{className:"icon acc",children:Object(m.jsx)(d.n,{src:(null===t||void 0===t?void 0:t.profileImg)||"/profile-user.jpg"})}),"Account"]})})]}),Object(m.jsx)("main",{children:Object(m.jsxs)(l.d,{children:[Object(m.jsx)(l.b,{path:"/account/deals/:_id?",component:Ye.a}),Object(m.jsx)(l.b,{path:"/account/wallet",component:L}),Object(m.jsx)(l.b,{path:"/account/hold",component:k}),Object(m.jsx)(l.b,{path:"/account/transactions",component:S}),Object(m.jsx)(l.b,{path:"/account/myShop",component:we}),Object(m.jsx)(l.b,{path:"/account/cart",component:Ae.a}),Object(m.jsx)(l.b,{path:"/account/myShopping",component:He}),Object(m.jsx)(l.b,{path:"/account/orderManagement",component:J}),Object(m.jsx)(l.b,{path:"/account/support/ticket/:_id",component:Pe}),Object(m.jsx)(l.b,{path:"/account/support",component:Fe}),Object(m.jsx)(l.b,{path:"/account/profile",component:re}),Object(m.jsx)(l.b,{path:"/",component:Pt})]})})]}),Object(m.jsxs)("ul",{className:"mobileMenu",children:[Object(m.jsx)("li",{className:"/account"===s.pathname||s.pathname.startsWith("/account/home")?"active":void 0,children:Object(m.jsxs)(o.b,{to:"/account/home",children:[Object(m.jsx)("div",{className:"icon",children:Object(m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"21.648",height:"21.513",viewBox:"0 0 21.648 21.513",children:Object(m.jsx)("path",{id:"Path_287","data-name":"Path 287",d:"M21.387,10.488A1.079,1.079,0,0,0,21.3,8.979L11.626.289a1.185,1.185,0,0,0-1.576,0L.342,9.44A1.073,1.073,0,0,0,.3,10.95l.245.258A1.043,1.043,0,0,0,2,11.321l.724-.665v9.762A1.071,1.071,0,0,0,3.78,21.5H7.563A1.071,1.071,0,0,0,8.62,20.418V13.591h4.81v6.828a1.04,1.04,0,0,0,.269.761.987.987,0,0,0,.723.323H18.45a1.071,1.071,0,0,0,1.057-1.084V10.776l.449.4c.245.222.765.042,1.168-.4Z",transform:"translate(-0.008 0.011)",fill:"#fff"})})}),"Home"]})}),Object(m.jsx)("li",{className:"deals ".concat(s.pathname.startsWith("/account/deals")?"active":void 0),children:Object(m.jsxs)(o.b,{to:"/account/deals",children:[Object(m.jsx)("div",{className:"icon",children:Object(m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26.55",height:"25.219",viewBox:"0 0 26.55 25.219",children:Object(m.jsx)("path",{id:"Path_1","data-name":"Path 1",d:"M-242.2-184.285h-13l26.55-10.786-4.252,25.219-5.531-10.637-2.127,4.68v-6.382l7.659-9.148h2.34",transform:"translate(255.198 195.071)",fill:"#fff"})})}),"Deals"]})}),Object(m.jsx)("li",{className:s.pathname.startsWith("/account/wallet")?"active":void 0,children:Object(m.jsxs)(o.b,{to:"/account/wallet",children:[Object(m.jsx)("div",{className:"icon",children:Object(m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20.886",height:"22.948",viewBox:"0 0 20.886 22.948",children:[Object(m.jsxs)("g",{id:"Rectangle_2","data-name":"Rectangle 2",fill:"none",stroke:"#fff",strokeWidth:"2",children:[Object(m.jsx)("rect",{width:"20.886",height:"16.244",rx:"2",stroke:"none"}),Object(m.jsx)("rect",{x:"1",y:"1",width:"18.886",height:"14.244",rx:"1",fill:"none"})]}),Object(m.jsxs)("g",{id:"Rectangle_3","data-name":"Rectangle 3",transform:"translate(0 9.283)",fill:"none",stroke:"#fff",strokeWidth:"2",children:[Object(m.jsx)("rect",{width:"20.886",height:"6.962",rx:"2",stroke:"none"}),Object(m.jsx)("rect",{x:"1",y:"1",width:"18.886",height:"4.962",rx:"1",fill:"none"})]}),Object(m.jsx)("path",{id:"Path_2","data-name":"Path 2",d:"M-180.174-182v7.923l4.1-4.653,3.932,4.653V-182Z",transform:"translate(186.6 197.025)",fill:"#fff"})]})}),"Wallet"]})}),Object(m.jsx)("li",{className:"hold ".concat(s.pathname.startsWith("/account/hold")?"active":void 0),children:Object(m.jsxs)(o.b,{to:"/account/hold",children:[Object(m.jsx)("div",{className:"icon",children:Object(m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"27",viewBox:"0 0 22 27",children:[Object(m.jsx)("text",{id:"_3","data-name":"3",transform:"translate(14 14) rotate(180)",fill:"#fff",fontSize:"10",fontFamily:"Ebrima-Bold, Ebrima",fontWeight:"700",children:Object(m.jsx)("tspan",{x:"0",y:"0",children:"3"})}),Object(m.jsxs)("g",{id:"Group_166","data-name":"Group 166",transform:"translate(-534.967 -611.816)",children:[Object(m.jsxs)("g",{id:"Rectangle_1132","data-name":"Rectangle 1132",transform:"translate(534.967 620.816)",fill:"none",stroke:"#fff",strokeWidth:"2",children:[Object(m.jsx)("rect",{width:"22",height:"18",rx:"4",stroke:"none"}),Object(m.jsx)("rect",{x:"1",y:"1",width:"20",height:"16",rx:"3",fill:"none"})]}),Object(m.jsxs)("g",{id:"Rectangle_1133","data-name":"Rectangle 1133",transform:"translate(539.967 611.816)",fill:"none",stroke:"#fff",strokeWidth:"2",children:[Object(m.jsx)("path",{d:"M6.5,0h0A6.5,6.5,0,0,1,13,6.5V11a0,0,0,0,1,0,0H0a0,0,0,0,1,0,0V6.5A6.5,6.5,0,0,1,6.5,0Z",stroke:"none"}),Object(m.jsx)("path",{d:"M6.5,1h0A5.5,5.5,0,0,1,12,6.5V9.214a.786.786,0,0,1-.786.786H1.786A.786.786,0,0,1,1,9.214V6.5A5.5,5.5,0,0,1,6.5,1Z",fill:"none"})]})]})]})}),"Hold"]})}),"seller"===n?Object(m.jsx)("li",{className:"trans ".concat(s.pathname.startsWith("/account/myShop")?"active":void 0),children:Object(m.jsxs)(o.b,{to:"/account/myShop/products",children:[Object(m.jsx)("div",{className:"icon",children:Object(m.jsxs)("svg",{id:"Group_283","data-name":"Group 283",xmlns:"http://www.w3.org/2000/svg",width:"28.407",height:"25.407",viewBox:"0 0 28.407 25.407",children:[Object(m.jsxs)("g",{id:"Path_4","data-name":"Path 4",transform:"translate(3)",fill:"none",children:[Object(m.jsx)("path",{d:"M12.7,0A12.7,12.7,0,1,1,0,12.7,12.7,12.7,0,0,1,12.7,0Z",stroke:"none"}),Object(m.jsx)("path",{d:"M 12.70325660705566 1.999996185302734 C 9.844316482543945 1.999996185302734 7.156496047973633 3.113327026367188 5.134906768798828 5.134906768798828 C 3.113327026367188 7.156496047973633 1.999996185302734 9.844316482543945 1.999996185302734 12.70325660705566 C 1.999996185302734 15.56219673156738 3.113327026367188 18.2500171661377 5.134906768798828 20.2716064453125 C 7.156496047973633 22.29318618774414 9.844316482543945 23.40651702880859 12.70325660705566 23.40651702880859 C 15.56219673156738 23.40651702880859 18.2500171661377 22.29318618774414 20.2716064453125 20.2716064453125 C 22.29318618774414 18.2500171661377 23.40651702880859 15.56219673156738 23.40651702880859 12.70325660705566 C 23.40651702880859 9.844316482543945 22.29318618774414 7.156496047973633 20.2716064453125 5.134906768798828 C 18.2500171661377 3.113327026367188 15.56219673156738 1.999996185302734 12.70325660705566 1.999996185302734 M 12.70325660705566 -3.814697265625e-06 C 19.71906661987305 -3.814697265625e-06 25.40651702880859 5.687446594238281 25.40651702880859 12.70325660705566 C 25.40651702880859 19.71906661987305 19.71906661987305 25.40651702880859 12.70325660705566 25.40651702880859 C 5.687446594238281 25.40651702880859 -3.814697265625e-06 19.71906661987305 -3.814697265625e-06 12.70325660705566 C -3.814697265625e-06 5.687446594238281 5.687446594238281 -3.814697265625e-06 12.70325660705566 -3.814697265625e-06 Z",stroke:"none",fill:"#fff"})]}),Object(m.jsxs)("g",{id:"Polygon_1","data-name":"Polygon 1",transform:"translate(6.001 12.353) rotate(-150)",fill:"#fff",children:[Object(m.jsx)("path",{d:"M 4.929044723510742 3.619362831115723 L 2.000004529953003 3.619362831115723 L 3.464524507522583 1.666669487953186 L 4.929044723510742 3.619362831115723 Z",stroke:"none"}),Object(m.jsx)("path",{d:"M 3.464524507522583 2.86102294921875e-06 L 6.929044723510742 4.619362831115723 L 4.291534423828125e-06 4.619362831115723 L 3.464524507522583 2.86102294921875e-06 Z",stroke:"none",fill:"#fff"})]}),Object(m.jsxs)("g",{id:"Rectangle_4","data-name":"Rectangle 4",transform:"translate(0 11.86) rotate(-22)",fill:"#336cf9",stroke:"#336cf9",strokeWidth:"1",children:[Object(m.jsx)("rect",{width:"6.929",height:"4.619",stroke:"none"}),Object(m.jsx)("rect",{x:"0.5",y:"0.5",width:"5.929",height:"3.619",fill:"none"})]}),Object(m.jsxs)("g",{id:"Group_5","data-name":"Group 5",transform:"translate(15.704 4.888)",children:[Object(m.jsx)("line",{id:"Line_3","data-name":"Line 3",y2:"9.239",transform:"translate(0 0)",fill:"none",stroke:"#fff",strokeWidth:"2"}),Object(m.jsx)("line",{id:"Line_4","data-name":"Line 4",x2:"6.929",y2:"2.31",transform:"translate(0 9.239)",fill:"none",stroke:"#fff",strokeWidth:"2"})]})]})}),"My Shop"]})}):Object(m.jsx)("li",{className:"trans ".concat(s.pathname.startsWith("/account/myShopping")?"active":void 0),children:Object(m.jsxs)(o.b,{to:"/account/myShopping/orders",children:[Object(m.jsx)("div",{className:"icon",children:Object(m.jsxs)("svg",{id:"Group_283","data-name":"Group 283",xmlns:"http://www.w3.org/2000/svg",width:"28.407",height:"25.407",viewBox:"0 0 28.407 25.407",children:[Object(m.jsxs)("g",{id:"Path_4","data-name":"Path 4",transform:"translate(3)",fill:"none",children:[Object(m.jsx)("path",{d:"M12.7,0A12.7,12.7,0,1,1,0,12.7,12.7,12.7,0,0,1,12.7,0Z",stroke:"none"}),Object(m.jsx)("path",{d:"M 12.70325660705566 1.999996185302734 C 9.844316482543945 1.999996185302734 7.156496047973633 3.113327026367188 5.134906768798828 5.134906768798828 C 3.113327026367188 7.156496047973633 1.999996185302734 9.844316482543945 1.999996185302734 12.70325660705566 C 1.999996185302734 15.56219673156738 3.113327026367188 18.2500171661377 5.134906768798828 20.2716064453125 C 7.156496047973633 22.29318618774414 9.844316482543945 23.40651702880859 12.70325660705566 23.40651702880859 C 15.56219673156738 23.40651702880859 18.2500171661377 22.29318618774414 20.2716064453125 20.2716064453125 C 22.29318618774414 18.2500171661377 23.40651702880859 15.56219673156738 23.40651702880859 12.70325660705566 C 23.40651702880859 9.844316482543945 22.29318618774414 7.156496047973633 20.2716064453125 5.134906768798828 C 18.2500171661377 3.113327026367188 15.56219673156738 1.999996185302734 12.70325660705566 1.999996185302734 M 12.70325660705566 -3.814697265625e-06 C 19.71906661987305 -3.814697265625e-06 25.40651702880859 5.687446594238281 25.40651702880859 12.70325660705566 C 25.40651702880859 19.71906661987305 19.71906661987305 25.40651702880859 12.70325660705566 25.40651702880859 C 5.687446594238281 25.40651702880859 -3.814697265625e-06 19.71906661987305 -3.814697265625e-06 12.70325660705566 C -3.814697265625e-06 5.687446594238281 5.687446594238281 -3.814697265625e-06 12.70325660705566 -3.814697265625e-06 Z",stroke:"none",fill:"#fff"})]}),Object(m.jsxs)("g",{id:"Polygon_1","data-name":"Polygon 1",transform:"translate(6.001 12.353) rotate(-150)",fill:"#fff",children:[Object(m.jsx)("path",{d:"M 4.929044723510742 3.619362831115723 L 2.000004529953003 3.619362831115723 L 3.464524507522583 1.666669487953186 L 4.929044723510742 3.619362831115723 Z",stroke:"none"}),Object(m.jsx)("path",{d:"M 3.464524507522583 2.86102294921875e-06 L 6.929044723510742 4.619362831115723 L 4.291534423828125e-06 4.619362831115723 L 3.464524507522583 2.86102294921875e-06 Z",stroke:"none",fill:"#fff"})]}),Object(m.jsxs)("g",{id:"Rectangle_4","data-name":"Rectangle 4",transform:"translate(0 11.86) rotate(-22)",fill:"#336cf9",stroke:"#336cf9",strokeWidth:"1",children:[Object(m.jsx)("rect",{width:"6.929",height:"4.619",stroke:"none"}),Object(m.jsx)("rect",{x:"0.5",y:"0.5",width:"5.929",height:"3.619",fill:"none"})]}),Object(m.jsxs)("g",{id:"Group_5","data-name":"Group 5",transform:"translate(15.704 4.888)",children:[Object(m.jsx)("line",{id:"Line_3","data-name":"Line 3",y2:"9.239",transform:"translate(0 0)",fill:"none",stroke:"#fff",strokeWidth:"2"}),Object(m.jsx)("line",{id:"Line_4","data-name":"Line 4",x2:"6.929",y2:"2.31",transform:"translate(0 9.239)",fill:"none",stroke:"#fff",strokeWidth:"2"})]})]})}),"My Orders"]})})]})]})}},5:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return j}));var c=n(4),s=n(1),a=n(40),r=n.n(a),i=n(2),l=n(0),o=Object(s.forwardRef)((function(e,t){var n=e.containerClass,r=e.open,o=e.setOpen,j=e.children,d=e.className,u=e.onBackdropClick,b=e.backdropClass,h=e.style,O=e.head,x=e.label;return Object(s.useEffect)((function(){if(n){var e=document.querySelector("#portal");return e.classList.add(n),function(){return e.classList.remove(n)}}})),r?Object(a.createPortal)(Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("div",{className:"modalBackdrop ".concat(b),onClick:function(e){e.stopPropagation(),null===u||void 0===u||u()}}),Object(l.jsxs)("div",{style:Object(c.a)({},h),ref:t,className:"modal ".concat(d||""),children:[O&&Object(l.jsxs)("div",{className:"head",children:[Object(l.jsx)("p",{className:"modalName",children:x}),Object(l.jsx)("button",{onClick:function(){return null===o||void 0===o?void 0:o(!1)},children:Object(l.jsx)(i.F,{})})]}),j]})]}),document.querySelector("#portal")):null})),j=function(e){var t=e.className,n=e.label,c=e.question,s=e.callback,a=function(){return r.a.render(Object(l.jsx)(l.Fragment,{}),document.querySelector("#confirm"))},o=function(){return a()};r.a.render(Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("div",{className:"modalBackdrop"}),Object(l.jsxs)("div",{className:"modal confirm ".concat(t||""),children:[Object(l.jsxs)("div",{className:"head",children:[Object(l.jsx)("p",{className:"modalName",children:n}),Object(l.jsx)("button",{onClick:o,children:Object(l.jsx)(i.F,{})})]}),Object(l.jsxs)("div",{className:"content",children:[Object(l.jsx)("p",{className:"question",children:c}),Object(l.jsxs)("div",{className:"actions",children:[Object(l.jsx)("button",{className:"yes",onClick:function(){s(),a()},children:"Confirm"}),Object(l.jsx)("button",{className:"no",onClick:o,children:"Decline"})]})]})]})]}),document.querySelector("#confirm"))}},9:function(e,t,n){"use strict";n.d(t,"d",(function(){return d})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return h}));var c=n(12),s=n(4),a=n(3),r=n(1),i=n(18),l=n(2),o=n(27),j=n(0),d=Object(r.createContext)(),u=function(e){var t=e.children,n=Object(r.useState)(null),c=Object(a.a)(n,2),s=c[0],i=c[1],o=Object(r.useState)(!1),u=Object(a.a)(o,2),b=u[0],h=u[1],O=Object(r.useState)(l.o.get("userType")||""),x=Object(a.a)(O,2),f=x[0],m=x[1],p=Object(r.useState)(JSON.parse(l.o.get("localCart"))||[]),v=Object(a.a)(p,2),g=v[0],y=v[1],k=Object(r.useState)({}),N=Object(a.a)(k,2),C=N[0],S=N[1];return Object(r.useEffect)((function(){l.o.set("localCart",JSON.stringify(g))}),[g]),Object(r.useEffect)((function(){"seller"===f?document.body.style.setProperty("--blue","#2598b6"):document.body.style.setProperty("--blue","#3b2ab4"),l.o.set("userType",f)}),[f]),Object(r.useEffect)((function(){fetch("/api/siteConfig").then((function(e){return e.json()})).then((function(e){"ok"===e.code&&S(e.config||{})})).catch((function(e){console.log(e)}))}),[]),Object(j.jsx)(d.Provider,{value:{user:s,setUser:i,isAuthenticated:b,setIsAuthenticated:h,cart:g,setCart:y,userType:f,setUserType:m,config:C},children:t})},b=Object(r.createContext)(),h=function(e){var t=e.children,n=Object(i.g)(),l=Object(r.useContext)(d).user,u=Object(r.useState)(!0),h=Object(a.a)(u,2),O=(h[0],h[1]),x=Object(r.useState)([]),f=Object(a.a)(x,2),m=f[0],p=f[1],v=Object(r.useState)([]),g=Object(a.a)(v,2),y=g[0],k=g[1],N=Object(r.useState)(0),C=Object(a.a)(N,2),S=C[0],w=C[1],M=Object(r.useRef)(!1);return Object(r.useEffect)((function(){l&&0===y.length&&fetch("/api/getChat").then((function(e){return e.json()})).then((function(e){k((function(){return e.map((function(e){var t,n=(null===(t=l.blockList)||void 0===t?void 0:t.some((function(t){return t===e.client._id})))?"blocked":e.clientBlock?"blockedByClient":"";return Object(s.a)(Object(s.a)(Object(s.a)({},e),e.client.phone&&{status:n}),{},{unread:e.messages.filter((function(t){return new Date(t.createdAt)>new Date(e.lastSeen)})).length})}))}))})).catch((function(e){console.log(e)}))}),[l]),Object(r.useEffect)((function(){o.b.on("connect",(function(){console.log("connected")})),o.b.on("disconnect",(function(){console.log("disconnected from socket")}));var e=function(e){return O(!0)},t=function(e){return O(!1)};return window.addEventListener("focus",e),window.addEventListener("blur",t),function(){window.removeEventListener("focus",e),window.removeEventListener("blur",t)}}),[]),Object(r.useEffect)((function(){!M.current&&l&&(o.b.on("messageToUser",(function(e){var t=O&&n.location.pathname.replace("/account/deals/","")===e.from;e.from&&(k((function(t){return t.map((function(t){var n=[].concat(Object(c.a)(t.messages),[Object(s.a)(Object(s.a)({},e),{},{createdAt:new Date,updatedAt:new Date})]);if(e.from===(null===l||void 0===l?void 0:l._id)){if(t.client._id===e.to)return Object(s.a)(Object(s.a)({},t),{},{messages:n})}else if(t.client._id===e.from)return Object(s.a)(Object(s.a)({},t),{},{messages:n,unread:n.filter((function(e){return new Date(e.createdAt)>new Date(t.lastSeen)})).length});return t}))})),t||o.b.emit("clientAway",e))})),o.b.on("newChat",(function(e){k((function(t){return[Object(s.a)({},e.chat)].concat(Object(c.a)(t.filter((function(t){var n;return t._id!==(null===(n=e.chat)||void 0===n?void 0:n._id)}))))}))})),M.current=!0)}),[l]),Object(r.useEffect)((function(){y.map((function(e){return e._id})).join("")!==m.join("")&&(o.b.emit("joinRooms",{rooms:y.map((function(e){return e._id}))}),p(y.map((function(e){return e._id}))))}),[y]),Object(r.useEffect)((function(){w(y.reduce((function(e,t){return e+t.unread}),0))}),[y]),Object(j.jsx)(b.Provider,{value:{contacts:y,setContacts:k,unread:S},children:t})}}},[[199,1,2]]]);
//# sourceMappingURL=main.5d7dfa74.chunk.js.map