(this["webpackJsonpdeliveryPay-react"]=this["webpackJsonpdeliveryPay-react"]||[]).push([[9],{176:function(e,t,c){"use strict";c.r(t),c.d(t,"Tickets",(function(){return m})),c.d(t,"SingleTicket",(function(){return p}));var s=c(13),n=c(53),j=c(4),l=c(3),i=c(1),a=c(8),r=c(5),b=c(6),d=c(7),o=c(2),O=c(29),h=c(25),u=c(0);c(242),c(243);var x=function(e){var t=e.onSuccess,c=Object(i.useContext)(a.d).user,s=Object(i.useState)(!1),n=Object(l.a)(s,2),j=n[0],r=n[1],b=Object(i.useState)(c?c.firstName+" "+c.lastName:""),O=Object(l.a)(b,2),x=O[0],m=O[1],p=Object(i.useState)(c?c.phone:""),f=Object(l.a)(p,2),g=f[0],N=f[1],v=Object(i.useState)(""),k=Object(l.a)(v,2),y=k[0],S=k[1],M=Object(i.useState)(""),C=Object(l.a)(M,2),D=C[0],Y=C[1],T=Object(i.useState)(null),F=Object(l.a)(T,2),w=F[0],A=F[1];return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault(),r(!0),fetch("/api/bugReport",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:x,phone:g,issue:y,dscr:D})}).then((function(e){return e.json()})).then((function(e){r(!1),"ok"===e.code?null===t||void 0===t||t():A(Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("button",{onClick:function(){return A(null)},children:"Okay"}),Object(u.jsxs)("div",{children:[Object(u.jsx)(o.i,{}),Object(u.jsx)("h4",{children:"Report could not be submitted."})]})]}))})).catch((function(e){r(!1),console.log(e),A(Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("button",{onClick:function(){return A(null)},children:"Okay"}),Object(u.jsxs)("div",{children:[Object(u.jsx)(o.i,{}),Object(u.jsx)("h4",{children:"Report could not be submitted. Make sure you're online."})]})]}))}))},children:[Object(u.jsxs)("section",{children:[Object(u.jsx)("label",{children:"Name"}),Object(u.jsx)("input",{value:x,onChange:function(e){return m(e.target.value)}})]}),Object(u.jsxs)("section",{children:[Object(u.jsx)("label",{children:"Phone"}),Object(u.jsx)("input",{value:g,onChange:function(e){return N(e.target.value)}})]}),Object(u.jsxs)("section",{children:[Object(u.jsx)("label",{children:"Issue"}),Object(u.jsx)("input",{value:y,onChange:function(e){return S(e.target.value)}})]}),Object(u.jsxs)("section",{children:[Object(u.jsx)("label",{children:"Description"}),Object(u.jsx)(h.a,{value:D,onChange:function(e){return Y(e.target.value)}})]}),Object(u.jsx)("section",{className:"btns",children:Object(u.jsx)("button",{className:"submit",children:"Submit"})})]}),Object(u.jsx)(d.Modal,{open:w,className:"msg",children:w}),j&&Object(u.jsx)("div",{className:"spinnerContainer",children:Object(u.jsx)("div",{className:"spinner"})})]})},m=function(e){var t=e.history,c=(e.location,e.pathname,Object(i.useState)(!1)),a=Object(l.a)(c,2),r=a[0],b=a[1],h=Object(i.useState)(null),x=Object(l.a)(h,2),m=x[0],p=x[1],f=Object(i.useState)(0),g=Object(l.a)(f,2),N=g[0],v=g[1],k=Object(i.useState)([]),y=Object(l.a)(k,2),S=y[0],M=y[1],C=Object(i.useState)({column:"createdAt",order:"dsc"}),D=Object(l.a)(C,2),Y=D[0],T=D[1],F=Object(i.useState)(null),w=Object(l.a)(F,2),A=w[0],P=w[1],R=Object(i.useState)(1),_=Object(l.a)(R,2),q=_[0],B=_[1],E=Object(i.useState)(""),I=Object(l.a)(E,2),L=I[0],J=I[1],G=Object(i.useState)(20),H=Object(l.a)(G,2),Z=H[0],V=H[1];return Object(i.useEffect)((function(){var e,t=Object(o.N)({time:null===A||void 0===A?void 0:A.startDate,format:"YYYY-MM-DD"}),c=Object(o.N)({time:null===(e=new Date(null===A||void 0===A?void 0:A.endDate))||void 0===e?void 0:e.setHours(24,0,0,0),format:"YYYY-MM-DD"});fetch("/api/getTickets?".concat(new URLSearchParams(Object(j.a)(Object(j.a)(Object(n.a)({page:q,perPage:Z,sort:Y.column},"sort",Y.order),L&&{q:L}),A&&{dateFrom:t,dateTo:c})).toString())).then((function(e){return e.json()})).then((function(e){var t;"ok"===e.code?(M(e.tickets.tickets),v((null===(t=e.tickets.pageInfo[0])||void 0===t?void 0:t.count)||0)):p(Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("button",{onClick:function(){return p(null)},children:"Okay"}),Object(u.jsxs)("div",{children:[Object(u.jsx)(o.i,{}),Object(u.jsx)("h4",{children:"Could not get tickets."})]})]}))})).catch((function(e){console.log(e),p(Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("button",{onClick:function(){return p(null)},children:"Okay"}),Object(u.jsxs)("div",{children:[Object(u.jsx)(o.i,{}),Object(u.jsx)("h4",{children:"Could not get tickets. Make sure you're online."})]})]}))}))}),[q,Z,Y.column,Y.order,L,A]),Object(u.jsxs)("div",{className:"table ticketContainer",children:[Object(u.jsx)("div",{style:{display:"none"},children:Object(u.jsx)(o.J,{})}),Object(u.jsxs)("div",{className:"head",children:[Object(u.jsx)("h3",{children:"Tickets"}),Object(u.jsx)("button",{onClick:function(){return b(!0)},children:"Open Ticket"})]}),Object(u.jsxs)("div",{className:"filters",children:[Object(u.jsxs)("section",{children:[Object(u.jsx)("label",{children:"Total:"}),N]}),Object(u.jsxs)("section",{children:[Object(u.jsx)("label",{children:"Per Page:"}),Object(u.jsx)(o.h,{defaultValue:0,options:[{label:"20",value:20},{label:"30",value:30},{label:"50",value:50}],onChange:function(e){return V(e.value)}})]}),Object(u.jsxs)("section",{className:"search",children:[Object(u.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"23",height:"23",viewBox:"0 0 23 23",children:Object(u.jsx)("path",{id:"Icon_ionic-ios-search","data-name":"Icon ionic-ios-search",d:"M27.23,25.828l-6.4-6.455a9.116,9.116,0,1,0-1.384,1.4L25.8,27.188a.985.985,0,0,0,1.39.036A.99.99,0,0,0,27.23,25.828ZM13.67,20.852a7.2,7.2,0,1,1,5.091-2.108A7.155,7.155,0,0,1,13.67,20.852Z",transform:"translate(-4.5 -4.493)",fill:"#707070",opacity:"0.74"})}),Object(u.jsx)("input",{value:L,onChange:function(e){return J(e.target.value)},placeholder:"Search issue"}),L&&Object(u.jsx)("button",{onClick:function(){return J("")},children:Object(u.jsx)(o.J,{})})]}),Object(u.jsx)("section",{className:"date",children:Object(u.jsx)(o.o,{dateRange:A,onChange:function(e){return P(e)}})})]}),Object(u.jsxs)("table",{cellSpacing:0,cellPadding:0,children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsxs)("th",{className:"createdAt"===Y.column?"sort "+Y.order:"",onClick:function(){T((function(e){return{column:"createdAt",order:"dsc"===e.order?"asc":"dsc"}}))},children:["Date ",Object(u.jsx)(o.g,{})]}),Object(u.jsxs)("th",{className:"issue"===Y.column?"sort "+Y.order:"",onClick:function(){T((function(e){return{column:"issue",order:"dsc"===e.order?"asc":"dsc"}}))},children:["Issue ",Object(u.jsx)(o.g,{})]}),Object(u.jsxs)("th",{className:"status"===Y.column?"sort "+Y.order:"",onClick:function(){T((function(e){return{column:"status",order:"dsc"===e.order?"asc":"dsc"}}))},children:["Status ",Object(u.jsx)(o.g,{})]})]})}),Object(u.jsxs)("tbody",{children:[S.map((function(e){return Object(u.jsxs)("tr",{onClick:function(){return t.push("/account/support/ticket/".concat(e._id))},children:[Object(u.jsx)("td",{children:Object(u.jsx)(o.s,{format:"hh:mm a, DD MMM, YYYY",children:e.createdAt})}),Object(u.jsx)("td",{children:e.issue}),Object(u.jsx)("td",{children:e.status})]},e._id)})),0===S.length&&Object(u.jsx)("tr",{className:"placeholder",children:Object(u.jsx)("td",{children:"Nothing yet."})})]}),Object(u.jsx)("tfoot",{children:Object(u.jsx)("tr",{children:Object(u.jsx)(o.u,{total:N,perPage:Z,currentPage:q,btns:5,setPage:B})})})]}),Object(u.jsx)(d.Modal,{open:m,className:"msg",children:m}),Object(u.jsx)(d.Modal,{open:r,head:!0,label:"Open Ticket",setOpen:b,className:"formModal ticketFormModal",children:Object(u.jsx)(O.TicketForm,{onSuccess:function(e){b(!1),p(Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("button",{onClick:function(){return p(null)},children:"Okay"}),Object(u.jsxs)("div",{children:[Object(u.jsx)(o.E,{}),Object(u.jsx)("h4",{children:"Ticket successfully submitted."})]})]})),M((function(t){return[e].concat(Object(s.a)(t))}))}})})]})},p=function(e){var t=e.history,c=e.match,n=Object(i.useState)(null),a=Object(l.a)(n,2),b=a[0],h=a[1],x=Object(i.useState)(null),m=Object(l.a)(x,2),p=m[0],f=m[1],g=Object(i.useState)(!1),N=Object(l.a)(g,2),v=N[0],k=N[1];return Object(i.useEffect)((function(){fetch("/api/singleTicket?_id=".concat(c.params._id)).then((function(e){return e.json()})).then((function(e){"ok"===e.code?h(e.ticket):f(Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("button",{onClick:function(){return t.push("/account/support/ticket")},children:"Go Back"}),Object(u.jsxs)("div",{children:[Object(u.jsx)(o.i,{}),Object(u.jsx)("h4",{children:"Ticket could not be found."})]})]}))})).catch((function(e){console.log(e),f(Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("button",{onClick:function(){return t.push("/account/support/ticket")},children:"Go Back"}),Object(u.jsxs)("div",{children:[Object(u.jsx)(o.i,{}),Object(u.jsx)("h4",{children:"Ticket could not be found."})]})]}))}))}),[]),b?Object(u.jsxs)("div",{className:"ticket",children:[Object(u.jsxs)("div",{className:"detail",children:[Object(u.jsxs)(r.b,{to:"/account/support/ticket",className:"back",children:[Object(u.jsx)(o.c,{}),"Go Back"]}),Object(u.jsxs)("ul",{className:"summery",children:[Object(u.jsx)("li",{className:"head",children:"Ticket Summery"}),Object(u.jsxs)("li",{children:[Object(u.jsx)("label",{children:"Issue:"}),Object(u.jsx)("p",{children:b.issue})]}),Object(u.jsxs)("li",{children:[Object(u.jsx)("label",{children:"Status:"}),Object(u.jsx)("p",{children:b.status})]}),Object(u.jsxs)("li",{children:[Object(u.jsx)("label",{children:"Created at:"}),Object(u.jsx)("p",{children:Object(u.jsx)(o.s,{format:"hh:mm a, DD MMM, YYYY",children:b.createdAt})})]}),Object(u.jsxs)("li",{children:[Object(u.jsx)("label",{children:"Last Activity:"}),Object(u.jsx)("p",{children:Object(u.jsx)(o.s,{format:"hh:mm a, DD MMM, YYYY",children:b.updatedAt})})]})]}),Object(u.jsxs)("ul",{className:"milestoneDetail",children:[Object(u.jsx)("li",{className:"head",children:"Milestone Detail"}),b.milestone?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("li",{children:[Object(u.jsx)("label",{children:"Amount:"}),Object(u.jsx)("p",{children:b.milestone.amount})]}),Object(u.jsxs)("li",{children:[Object(u.jsx)("label",{children:"Status:"}),Object(u.jsx)("p",{children:b.milestone.status})]}),Object(u.jsxs)("li",{children:[Object(u.jsx)("label",{children:"Created at:"}),Object(u.jsx)("p",{children:Object(u.jsx)(o.s,{format:"hh:mm a, DD MMM, YYYY",children:b.milestone.createdAt})})]}),Object(u.jsxs)("li",{children:[Object(u.jsx)("label",{children:"Verification Method:"}),Object(u.jsx)("p",{children:b.milestone.verification})]}),Object(u.jsxs)("li",{children:[Object(u.jsx)("label",{children:"Seller:"}),Object(u.jsx)("p",{children:b.milestone.seller.firstName+" "+b.milestone.seller.lastName})]}),Object(u.jsxs)("li",{children:[Object(u.jsx)("label",{children:"Buyer:"}),Object(u.jsx)("p",{children:b.milestone.buyer.firstName+" "+b.milestone.buyer.lastName})]}),Object(u.jsxs)("li",{children:[Object(u.jsx)("label",{children:"Description:"}),Object(u.jsx)("p",{children:b.milestone.dscr})]})]}):Object(u.jsx)("li",{className:"placeholder",children:"No Detail provided"})]}),Object(u.jsxs)("ul",{className:"transactionDetail",children:[Object(u.jsx)("li",{className:"head",children:"Transaction Detail"}),b.transaction?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("li",{children:[Object(u.jsx)("label",{children:"Type:"}),Object(u.jsx)("p",{children:b.transaction.__t})]}),Object(u.jsxs)("li",{children:[Object(u.jsx)("label",{children:"Amount:"}),Object(u.jsx)("p",{children:b.transaction.amount})]}),Object(u.jsxs)("li",{children:[Object(u.jsx)("label",{children:"Note:"}),Object(u.jsx)("p",{children:b.transaction.note})]}),Object(u.jsxs)("li",{children:[Object(u.jsx)("label",{children:"Created at:"}),Object(u.jsx)("p",{children:Object(u.jsx)(o.s,{format:"hh:mm a, DD MMM, YYYY",children:b.transaction.createdAt})})]})]}):Object(u.jsx)("li",{className:"placeholder",children:"No Detail provided"})]}),Object(u.jsx)("div",{className:"pBtm"})]}),Object(u.jsxs)("div",{className:"messages",children:[Object(u.jsxs)("div",{className:"head",children:["Messages ",Object(u.jsx)("button",{onClick:function(){return k(!0)},children:"Reply"})]}),Object(u.jsx)("ul",{children:Object(s.a)(b.messages).reverse().map((function(e,t){return Object(u.jsxs)("li",{children:[Object(u.jsx)("div",{className:"user",children:Object(u.jsxs)("p",{className:"name",children:[e.user.name,Object(u.jsx)("span",{children:"\u2022"}),Object(u.jsx)("span",{className:"role",children:e.user.role}),Object(u.jsx)("span",{className:"date",children:Object(u.jsx)(o.s,{format:"hh:mm a, DD MMM, YYYY",children:e.createdAt})})]})}),Object(u.jsx)("p",{className:"message",children:e.message.body}),e.message.files.length>0&&Object(u.jsx)("div",{className:"thumbs",children:Object(u.jsx)(o.q,{links:e.message.files})})]},t)}))})]}),Object(u.jsx)(d.Modal,{open:v,head:!0,label:"Add reply to Ticket",setOpen:k,className:"ticketReplyFormModal",children:Object(u.jsx)(O.TicketReplyForm,{_id:b._id,onSuccess:function(e){k(!1),h((function(t){return Object(j.a)(Object(j.a)({},t),{},{messages:e.messages})})),f(Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("button",{onClick:function(){return f(null)},children:"Okay"}),Object(u.jsxs)("div",{children:[Object(u.jsx)(o.E,{}),Object(u.jsx)("h4",{children:"Reply has been submitted."})]})]}))}})}),Object(u.jsx)(d.Modal,{open:p,className:"msg",children:p})]}):Object(u.jsxs)("div",{className:"ticket loading",children:[Object(u.jsxs)("div",{className:"detail",children:[Object(u.jsxs)(r.b,{to:"/account/support/ticket",className:"back",children:[Object(u.jsx)(o.c,{}),"Go Back"]}),Object(u.jsxs)("ul",{className:"summery",children:[Object(u.jsx)("li",{className:"head",children:"Ticket Summery"}),Object(u.jsxs)("li",{children:[Object(u.jsx)("label",{}),Object(u.jsx)("p",{})]}),Object(u.jsxs)("li",{children:[Object(u.jsx)("label",{}),Object(u.jsx)("p",{})]}),Object(u.jsxs)("li",{children:[Object(u.jsx)("label",{}),Object(u.jsx)("p",{})]})]}),Object(u.jsxs)("ul",{className:"milestoneDetail",children:[Object(u.jsx)("li",{className:"head",children:"Milestone Detail"}),Object(u.jsxs)("li",{children:[Object(u.jsx)("label",{}),Object(u.jsx)("p",{})]}),Object(u.jsxs)("li",{children:[Object(u.jsx)("label",{}),Object(u.jsx)("p",{})]}),Object(u.jsxs)("li",{children:[Object(u.jsx)("label",{}),Object(u.jsx)("p",{})]})]}),Object(u.jsxs)("ul",{className:"transactionDetail",children:[Object(u.jsx)("li",{className:"head",children:"Transaction Detail"}),Object(u.jsxs)("li",{children:[Object(u.jsx)("label",{}),Object(u.jsx)("p",{})]}),Object(u.jsxs)("li",{children:[Object(u.jsx)("label",{}),Object(u.jsx)("p",{})]}),Object(u.jsxs)("li",{children:[Object(u.jsx)("label",{}),Object(u.jsx)("p",{})]})]})]}),Object(u.jsxs)("div",{className:"messages",children:[Object(u.jsx)("div",{className:"head",children:"Messages"}),Object(u.jsxs)("ul",{children:[Object(u.jsxs)("li",{children:[Object(u.jsxs)("div",{className:"user",children:[Object(u.jsx)("div",{className:"img"}),Object(u.jsx)("p",{className:"name"})]}),Object(u.jsx)("p",{className:"message",children:Object(u.jsx)("span",{})}),Object(u.jsxs)("div",{className:"thumbs",children:[Object(u.jsx)("div",{className:"img"}),Object(u.jsx)("div",{className:"img"})]})]}),Object(u.jsxs)("li",{children:[Object(u.jsxs)("div",{className:"user",children:[Object(u.jsx)("div",{className:"img"}),Object(u.jsx)("p",{className:"name"})]}),Object(u.jsx)("p",{className:"message",children:Object(u.jsx)("span",{})}),Object(u.jsxs)("div",{className:"thumbs",children:[Object(u.jsx)("div",{className:"img"}),Object(u.jsx)("div",{className:"img"}),Object(u.jsx)("div",{className:"img"})]})]})]})]}),Object(u.jsx)(d.Modal,{open:p,className:"msg",children:p})]})};t.default=function(e){e.history,e.location,e.match;var t=Object(i.useContext)(a.d).userType,c=Object(i.useState)(null),s=Object(l.a)(c,2),n=s[0],j=s[1],O=Object(i.useState)([]),h=Object(l.a)(O,2),f=h[0],g=h[1],N=Object(i.useState)(!1),v=Object(l.a)(N,2),k=v[0],y=v[1];return Object(i.useEffect)((function(){fetch("/api/faq?audience=".concat(t)).then((function(e){return e.json()})).then((function(e){"ok"===e.code&&g(e.faqs)}))}),[t]),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)(b.d,{children:[Object(u.jsx)(b.b,{path:"/account/support/ticket/:_id",component:p}),Object(u.jsx)(b.b,{path:"/account/support/ticket",component:m}),Object(u.jsx)(b.b,{path:"/",children:Object(u.jsxs)("div",{className:"supportContainer",children:[Object(u.jsxs)("div",{className:"benner",children:[Object(u.jsxs)("div",{className:"clas",children:[Object(u.jsx)(r.b,{className:"ticketLink",to:"/account/support/ticket",children:"My Tickets"}),Object(u.jsx)("button",{className:"ticketLink",onClick:function(){return y(!0)},children:"Report Bug"})]}),Object(u.jsx)("h1",{children:"Support portal"}),Object(u.jsx)("p",{children:"Search for an answer or browse help topics to create a ticket"}),Object(u.jsxs)("form",{onSubmit:function(e){return e.preventDefault()},children:[Object(u.jsx)("input",{type:"text",required:!0,placeholder:"Eg: How does the Delivery pay Hold Works",onChange:function(e){fetch("/api/faq?audience=".concat(t,"&q=").concat(e.target.value)).then((function(e){return e.json()})).then((function(e){"ok"===e.code&&g(e.faqs)}))}}),Object(u.jsx)("button",{type:"submit",children:Object(u.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"31.336",height:"31.336",viewBox:"0 0 31.336 31.336",children:Object(u.jsx)("path",{id:"Path_1935","data-name":"Path 1935",d:"M25.4,22.708H23.98l-.5-.484a11.663,11.663,0,1,0-1.254,1.254l.484.5V25.4l8.958,8.94,2.67-2.67Zm-10.75,0a8.062,8.062,0,1,1,8.063-8.063A8.052,8.052,0,0,1,14.646,22.708Z",transform:"translate(-3 -3)",fill:"#707070"})})})]})]}),Object(u.jsxs)("div",{className:"content",children:[Object(u.jsxs)("div",{className:"faq",children:[Object(u.jsxs)("h3",{className:"label",children:["FAQs ",t&&Object(u.jsxs)("span",{children:["(for ",t,"s)"]})]}),Object(u.jsx)("ul",{children:f.map((function(e){return Object(u.jsxs)("li",{children:[Object(u.jsx)("h4",{children:e.ques}),Object(u.jsx)("p",{className:"ans",children:e.ans})]},e._id)}))})]}),Object(u.jsxs)("div",{className:"feedback",children:[Object(u.jsxs)("form",{children:[Object(u.jsx)("textarea",{required:!0}),Object(u.jsx)("button",{children:"Submit"})]}),Object(u.jsx)(r.b,{className:"feedbackLink",to:"/support/myFeedbacks",children:"Submitted Feedbacks"})]})]})]})})]}),Object(u.jsx)(d.Modal,{open:k,setOpen:y,className:"bugReport",label:"Report Bug",head:!0,children:Object(u.jsx)(x,{onSuccess:function(){y(!1),j(Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("button",{onClick:function(){return j(null)},children:"Okay"}),Object(u.jsxs)("div",{children:[Object(u.jsx)(o.E,{}),Object(u.jsx)("h4",{children:"Report has been submitted."})]})]}))}})}),Object(u.jsx)(d.Modal,{open:n,className:"msg",children:n})]})}},242:function(e,t,c){},243:function(e,t,c){}}]);
//# sourceMappingURL=9.a4d93386.chunk.js.map