(this["webpackJsonpdeliveryPay-react"]=this["webpackJsonpdeliveryPay-react"]||[]).push([[3],{159:function(e,t,c){"use strict";c.r(t),c.d(t,"MilestoneForm",(function(){return x})),c.d(t,"MilestoneReleaseForm",(function(){return m})),c.d(t,"AddressForm",(function(){return p})),c.d(t,"DisputeForm",(function(){return v})),c.d(t,"TicketForm",(function(){return f})),c.d(t,"TicketReplyForm",(function(){return g}));var n=c(23),s=c.n(n),l=c(28),i=c(10),r=c(3),a=c(1),o=c(12),j=c(8),d=c(2),u=c(17),b=c(174),O=c(176),h=(c(177),c(0)),x=function(e){var t,c,n,s,l=e.action,b=e.client,x=e.onSuccess,m=e.definedAmount,p=e.order,v=e.refund,f=e.strict,g=Object(a.useContext)(o.d),y=g.user,C=(g.setUser,g.config),N=Object(a.useState)(!1),k=Object(r.a)(N,2),S=k[0],F=k[1],M=Object(a.useState)(""),_=Object(r.a)(M,2),P=(_[0],_[1],Object(a.useState)(!1)),w=Object(r.a)(P,2),D=(w[0],w[1],Object(a.useState)(Object(i.a)({},y))),T=Object(r.a)(D,2),q=T[0],I=(T[1],Object(a.useState)(Object(i.a)({},b))),A=Object(r.a)(I,2),R=A[0],B=(A[1],Object(a.useState)("")),E=Object(r.a)(B,2),L=E[0],U=E[1],J=Object(a.useState)(m||""),z=Object(r.a)(J,2),G=z[0],Y=z[1],W=Object(a.useState)(0),V=Object(r.a)(W,2),X=V[0],H=V[1],Z=Object(a.useState)(null),Q=Object(r.a)(Z,2),K=Q[0],$=Q[1],ee=Object(a.useRef)(),te=Object(a.useCallback)((function(){fetch("/api/requestMilestone",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({buyer_id:b._id,amount:G,dscr:L,order:p,refund:v})}).then((function(e){return e.json()})).then((function(e){F(!1),"ok"===e.code?null===x||void 0===x||x(Object(i.a)({},e)):$(Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("button",{onClick:function(){return $(null)},children:"Okay"}),Object(h.jsxs)("div",{children:[Object(h.jsx)(j.i,{}),Object(h.jsx)("h4",{children:"Could not request milestone. Try again."})]})]}))})).catch((function(e){F(!1),console.log(e),$(Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("button",{onClick:function(){return $(null)},children:"Okay"}),Object(h.jsxs)("div",{children:[Object(h.jsx)(j.i,{}),Object(h.jsx)("h4",{children:"Could not request milestone. Make sure you're online."})]})]}))}))}),[R,q,G,L]),ce=Object(a.useCallback)((function(){fetch("/api/createMilestone",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({seller:Object(i.a)({},R),amount:G,dscr:L,order:p,refund:v})}).then((function(e){return e.json()})).then((function(e){F(!1),"ok"===e.code?null===x||void 0===x||x(Object(i.a)({},e)):403===e.code?$(Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("button",{onClick:function(){return $(null)},children:"Okay"}),Object(h.jsxs)("div",{children:[Object(h.jsx)(j.i,{}),Object(h.jsx)("h4",{children:"Insufficient fund"}),Object(h.jsx)(d.b,{to:"/account/profile/wallet",children:"Add Money to your wallet now."})]})]})):$(Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("button",{onClick:function(){return $(null)},children:"Okay"}),Object(h.jsxs)("div",{children:[Object(h.jsx)(j.i,{}),Object(h.jsx)("h4",{children:"Could not create milestone. Try again"})]})]}))})).catch((function(e){F(!1),console.log(e),$(Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("button",{onClick:function(){return $(null)},children:"Okay"}),Object(h.jsxs)("div",{children:[Object(h.jsx)(j.i,{}),Object(h.jsx)("h4",{children:"Could not create milestone. Make sure you're online."})]})]}))}))}),[R,q,G,L]);return Object(a.useEffect)((function(){H((function(){return(+G/100*C.fee).fix()}))}),[G]),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("form",{className:"milestonesForm",onSubmit:function(e){F(!0),e.preventDefault(),Object(O.b)(Object(h.jsxs)("div",{className:"toast",children:["Milestone is being"," ","create"===l?"created.":"requested."," ",Object(h.jsx)("button",{className:"undo",onClick:function(){ee.current=null},children:"Undo"})]}),{position:"bottom-center",autoClose:8e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,onClose:function(){var e;null===(e=ee.current)||void 0===e||e.call(ee),F(!1)},draggable:!0,progress:void 0}),ee.current="create"===l?ce:te},children:[Object(h.jsxs)("section",{className:"transactionDetail",children:[Object(h.jsxs)("section",{className:"amount",children:[Object(h.jsx)("label",{children:"Amount"}),Object(h.jsx)(j.t,{readOnly:f,min:10,defaultValue:m||0,required:!0,onChange:function(e){return Y((+e.target.value).toString())}})]}),G&&Object(h.jsxs)(h.Fragment,{children:["create"===l&&Object(h.jsxs)("label",{className:"receivable",children:[b.firstName," ",b.lastName," will recieve \u20b9",(G-X).fix()]}),"request"===l&&Object(h.jsxs)("label",{className:"receivable",children:["You will recieve \u20b9",(G-X).fix()]})]}),Object(h.jsxs)("section",{children:[Object(h.jsx)("label",{children:"Detail"}),Object(h.jsx)("input",{value:L,required:!0,onChange:function(e){return U(e.target.value)}})]}),Object(h.jsx)("button",{type:"submit",children:"create"===l?"Create Milestone":"Request Milestone"})]}),Object(h.jsxs)("section",{className:"clientDetail",children:["request"===l&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(j.n,{src:(null===b||void 0===b?void 0:b.profileImg)||"/profile-user.jpg"}),Object(h.jsx)("label",{children:"Buyer Information"}),Object(h.jsxs)("div",{className:"detail",children:[Object(h.jsxs)("section",{className:"profileDetail",children:[Object(h.jsx)("p",{className:"name",children:(null===b||void 0===b?void 0:b.firstName)+" "+(null===b||void 0===b?void 0:b.lastName)}),Object(h.jsx)("p",{className:"phone",children:null===b||void 0===b?void 0:b.phone}),Object(h.jsx)("p",{className:"email",children:null===b||void 0===b?void 0:b.email})]}),(null===b||void 0===b||null===(t=b.address)||void 0===t?void 0:t.street)&&Object(h.jsx)("section",{className:"address",children:Object(h.jsxs)("p",{className:"street",children:[null===(c=b.address)||void 0===c?void 0:c.street,", ",null===(n=b.address)||void 0===n?void 0:n.city,","," ",null===(s=b.address)||void 0===s?void 0:s.zip]})})]})]}),"request"===l?null:Object(h.jsxs)("div",{className:"sellerInfo",children:[Object(h.jsx)(j.n,{src:(null===R||void 0===R?void 0:R.profileImg)||"/profile-user.jpg"}),Object(h.jsx)("label",{children:"Seller Information"}),Object(h.jsx)("div",{className:"detail",children:Object(h.jsxs)("section",{className:"profileDetail",children:[Object(h.jsxs)("p",{className:"name",children:[null===R||void 0===R?void 0:R.firstName," ",null===R||void 0===R?void 0:R.lastName]}),Object(h.jsx)("p",{className:"phone",children:null===R||void 0===R?void 0:R.phone}),Object(h.jsx)("p",{className:"email",children:null===R||void 0===R?void 0:R.email})]})})]})]})]}),S&&Object(h.jsx)("div",{className:"spinnerContainer",children:Object(h.jsx)("div",{className:"spinner"})}),Object(h.jsx)(u.Modal,{className:"msg",open:K,children:K})]})},m=function(e){var t=e.milestone,c=e.setReleaseForm,n=e.onSuccess,s=Object(a.useState)(t.amount),l=Object(r.a)(s,2),i=l[0],o=(l[1],Object(a.useState)(null)),d=Object(r.a)(o,2),b=d[0],O=d[1];return Object(h.jsxs)("form",{onSubmit:function(e){e.preventDefault(),fetch("/api/releaseMilestone",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({_id:t._id,amount:i})}).then((function(e){return e.json()})).then((function(e){var t=e.code,c=e.milestone;c?null===n||void 0===n||n(c):O(403===t?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("button",{onClick:function(){return O(null)},children:"Okay"}),Object(h.jsxs)("div",{children:[Object(h.jsx)(j.i,{}),Object(h.jsx)("h4",{children:"Could not release Milestone due to low balance."})]})]}):Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("button",{onClick:function(){return O(null)},children:"Okay"}),Object(h.jsxs)("div",{children:[Object(h.jsx)(j.i,{}),Object(h.jsx)("h4",{children:"Could not release Milestone."})]})]}))})).catch((function(e){console.log(e),h.Fragment,j.i}))},children:["You sure want to release this Milestone?",Object(h.jsxs)("section",{className:"btns",children:[Object(h.jsx)("button",{type:"submit",children:"Confirm"}),Object(h.jsx)("button",{className:"cancel",type:"button",onClick:function(){return c(!1)},children:"Cancel"})]}),Object(h.jsx)(u.Modal,{open:b,className:"msg",children:b})]})},p=function(e){var t,c,n,s,l,i,o,j=e.client,d=e.onSuccess,u=e.onCancel,b=Object(a.useState)(j?j.name||j.firstName+" "+j.lastName:""),O=Object(r.a)(b,2),x=O[0],m=O[1],p=Object(a.useState)((null===j||void 0===j?void 0:j.phone)||""),v=Object(r.a)(p,2),f=v[0],g=v[1],y=Object(a.useState)((null===j||void 0===j||null===(t=j.address)||void 0===t?void 0:t.zip)||""),C=Object(r.a)(y,2),N=C[0],k=C[1],S=Object(a.useState)((null===j||void 0===j||null===(c=j.address)||void 0===c?void 0:c.locality)||""),F=Object(r.a)(S,2),M=F[0],_=F[1],P=Object(a.useState)((null===j||void 0===j||null===(n=j.address)||void 0===n?void 0:n.street)||""),w=Object(r.a)(P,2),D=w[0],T=w[1],q=Object(a.useState)((null===j||void 0===j||null===(s=j.address)||void 0===s?void 0:s.city)||""),I=Object(r.a)(q,2),A=I[0],R=I[1],B=Object(a.useState)((null===j||void 0===j||null===(l=j.address)||void 0===l?void 0:l.state)||""),E=Object(r.a)(B,2),L=E[0],U=E[1],J=Object(a.useState)((null===j||void 0===j||null===(i=j.address)||void 0===i?void 0:i.landmark)||""),z=Object(r.a)(J,2),G=z[0],Y=z[1],W=Object(a.useState)((null===j||void 0===j||null===(o=j.address)||void 0===o?void 0:o.altPhone)||""),V=Object(r.a)(W,2),X=V[0],H=V[1];return Object(h.jsxs)("form",{className:"addressForm",onSubmit:function(e){e.preventDefault(),null===d||void 0===d||d({address:{name:x,phone:f,street:D,city:A,state:L,zip:N,locality:M,landmark:G,altPhone:X}})},children:[Object(h.jsxs)("section",{children:[Object(h.jsx)("label",{htmlFor:"name",children:"Full Name"}),Object(h.jsx)("input",{value:x,onChange:function(e){return m(e.target.value)},type:"text",name:"name",required:!0})]}),Object(h.jsxs)("section",{children:[Object(h.jsx)("label",{htmlFor:"phone",children:"Phone Number"}),Object(h.jsx)("input",{value:f,onChange:function(e){return g(e.target.value)},type:"tel",name:"phone",required:!0})]}),Object(h.jsxs)("section",{children:[Object(h.jsx)("label",{htmlFor:"zip",children:"PIN Code"}),Object(h.jsx)("input",{value:N,onChange:function(e){return k(e.target.value)},type:"number",name:"zip",required:!0})]}),Object(h.jsxs)("section",{children:[Object(h.jsx)("label",{htmlFor:"locality",children:"Locality"}),Object(h.jsx)("input",{value:M,onChange:function(e){return _(e.target.value)},type:"text",name:"locality",required:!0})]}),Object(h.jsxs)("section",{className:"street",children:[Object(h.jsx)("label",{htmlFor:"address",children:"Address"}),Object(h.jsx)("textarea",{value:D,onChange:function(e){return T(e.target.value)},resiz:"off",type:"text",name:"address",required:!0})]}),Object(h.jsxs)("section",{children:[Object(h.jsx)("label",{htmlFor:"city",children:"City"}),Object(h.jsx)("input",{value:A,onChange:function(e){return R(e.target.value)},type:"text",name:"city",required:!0})]}),Object(h.jsxs)("section",{children:[Object(h.jsx)("label",{htmlFor:"state",children:"State"}),Object(h.jsx)("input",{value:L,onChange:function(e){return U(e.target.value)},type:"text",name:"state",required:!0})]}),Object(h.jsxs)("section",{children:[Object(h.jsx)("label",{htmlFor:"landmark",children:"Landmark (Optional)"}),Object(h.jsx)("input",{value:G,onChange:function(e){return Y(e.target.value)},type:"text",name:"landmark"})]}),Object(h.jsxs)("section",{children:[Object(h.jsx)("label",{htmlFor:"altPhone",children:"Alternate Phone (Optional)"}),Object(h.jsx)("input",{value:X,onChange:function(e){return H(e.target.value)},type:"tel",name:"altPhone"})]}),Object(h.jsx)("button",{className:"save",children:"Save"}),Object(h.jsx)("button",{className:"cancel",type:"button",onClick:function(){return null===u||void 0===u?void 0:u()},children:"Cancel"}),Object(h.jsx)("section",{className:"pBtm"})]})},v=function(e){var t=e.milestone,c=(e.setDisputeForm,e.onSuccess),n=Object(a.useState)(""),i=Object(r.a)(n,2),o=i[0],d=i[1],O=Object(a.useState)(!1),x=Object(r.a)(O,2),m=x[0],p=x[1],v=Object(a.useState)(""),f=Object(r.a)(v,2),g=f[0],y=f[1],C=Object(a.useState)([]),N=Object(r.a)(C,2),k=N[0],S=N[1],F=Object(a.useState)(null),M=Object(r.a)(F,2),_=M[0],P=M[1],w=function(){var e=Object(l.a)(s.a.mark((function e(n){var l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),p(!0),!k.length){e.next=8;break}return e.next=5,Object(j.G)({files:k,setMsg:P});case 5:e.t0=e.sent,e.next=9;break;case 8:e.t0=[];case 9:l=e.t0,fetch("/api/fileDispute",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({issue:o,milestoneId:t._id,defendantId:t.client._id,_case:{dscr:g,files:l}})}).then((function(e){return e.json()})).then((function(e){p(!1),"ok"===e.code?null===c||void 0===c||c(e.milestone):403===e.code?P(Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("button",{onClick:function(){return P(null)},children:"Okay"}),Object(h.jsxs)("div",{children:[Object(h.jsx)(j.i,{}),Object(h.jsx)("h4",{children:"Insufficient fund! you have to have \u20b9500 in your wallet to file a dispute."})]})]})):P(Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("button",{onClick:function(){return P(null)},children:"Okay"}),Object(h.jsxs)("div",{children:[Object(h.jsx)(j.i,{}),Object(h.jsx)("h4",{children:"Could not file dispute."})]})]}))})).catch((function(e){p(!0),console.log(e),P(Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("button",{onClick:function(){return P(null)},children:"Okay"}),Object(h.jsxs)("div",{children:[Object(h.jsx)(j.i,{}),Object(h.jsx)("h4",{children:"Could not file dispute. make sure you're online."})]})]}))}));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("form",{className:"disputeForm",onSubmit:w,children:[Object(h.jsx)("h4",{children:"You feel like you are getting scammed?"}),Object(h.jsxs)("section",{children:[Object(h.jsx)("label",{htmlFor:"issue",children:"Issue"}),Object(h.jsx)(j.h,{name:"issue",options:"buyer"===t.role?[{label:"Buyer Not Releasing Payments",value:"Buyer Not Releasing Payments"}]:[{label:"Goods Not Received",value:"Goods Not Received"},{label:"Services Not Received",value:"Services Not Received"},{label:"Damaged",value:"Damaged"},{label:"Not As Agreed",value:"Not As Agreed"},{label:"Not As Displayed",value:"Not As Displayed"}],onChange:function(e){d(e.value)}})]}),Object(h.jsxs)("section",{children:[Object(h.jsx)("label",{htmlFor:"description",children:"Description"}),Object(h.jsx)(b.a,{name:"description",value:g,required:!0,onChange:function(e){return y(e.target.value)}})]}),Object(h.jsxs)("section",{children:[Object(h.jsx)("label",{htmlFor:"for",children:"Upload images to prove your case. ie: Product of image, proof of delivery."}),Object(h.jsx)(j.k,{multiple:!0,accept:"audio/*,video/*,image/*",onChange:function(e){return S(e)}})]}),Object(h.jsxs)("section",{className:"btns",children:[Object(h.jsx)("button",{className:"submit",type:"submit",children:"Submit"}),Object(h.jsx)("button",{className:"cancel",type:"button",children:"Cancel"})]}),Object(h.jsx)("div",{className:"pBtm"})]}),m&&Object(h.jsx)("div",{className:"spinnerContainer",children:Object(h.jsx)("div",{className:"spinner"})}),Object(h.jsx)(u.Modal,{open:_,className:"msg",children:_})]})},f=function(e){var t=e.onSuccess,c=Object(a.useState)(!1),n=Object(r.a)(c,2),i=n[0],o=n[1],d=Object(a.useState)(!1),O=Object(r.a)(d,2),x=O[0],m=O[1],p=Object(a.useState)(""),v=Object(r.a)(p,2),f=v[0],g=v[1],y=Object(a.useState)(""),C=Object(r.a)(y,2),N=C[0],k=C[1],S=Object(a.useState)(""),F=Object(r.a)(S,2),M=F[0],_=F[1],P=Object(a.useState)(""),w=Object(r.a)(P,2),D=w[0],T=w[1],q=Object(a.useState)(""),I=Object(r.a)(q,2),A=I[0],R=I[1],B=function(){var e=Object(l.a)(s.a.mark((function e(c){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.preventDefault(),o(!0),!D.length){e.next=8;break}return e.next=5,Object(j.G)({files:D,setMsg:m});case 5:e.t0=e.sent,e.next=9;break;case 8:e.t0=[];case 9:n=e.t0,fetch("/api/openTicket",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({issue:f,milestone:N,transaction:M,message:{body:A,files:n}})}).then((function(e){return e.json()})).then((function(e){o(!1),"ok"===e.code?null===t||void 0===t||t(e.ticket):"milestone ID is invalid"===e.message?m(Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("button",{onClick:function(){return m(null)},children:"Okay"}),Object(h.jsxs)("div",{children:[Object(h.jsx)(j.i,{}),Object(h.jsx)("h4",{children:"Milestone Id is invalid."})]})]})):m(Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("button",{onClick:function(){return m(null)},children:"Okay"}),Object(h.jsxs)("div",{children:[Object(h.jsx)(j.i,{}),Object(h.jsx)("h4",{children:"Ticket could not be submitted."})]})]}))})).catch((function(e){o(!1),console.log(e),m(Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("button",{onClick:function(){return m(null)},children:"Okay"}),Object(h.jsxs)("div",{children:[Object(h.jsx)(j.i,{}),Object(h.jsx)("h4",{children:"Ticket could not be submitted. Make sure you're online."})]})]}))}));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("form",{className:"ticketForm",onSubmit:B,children:[Object(h.jsxs)("section",{children:[Object(h.jsx)("label",{children:"Issue"}),Object(h.jsx)("input",{value:f,required:!0,onChange:function(e){return g(e.target.value)}})]}),Object(h.jsxs)("section",{children:[Object(h.jsx)("label",{children:"Milestone ID (optional)"}),Object(h.jsx)("input",{value:N,onChange:function(e){return k(e.target.value)}})]}),Object(h.jsxs)("section",{children:[Object(h.jsx)("label",{children:"Transaction ID (optional)"}),Object(h.jsx)("input",{value:M,onChange:function(e){return _(e.target.value)}})]}),Object(h.jsxs)("section",{children:[Object(h.jsx)("label",{children:"Detail"}),Object(h.jsx)(b.a,{required:!0,value:A,onChange:function(e){return R(e.target.value)}})]}),Object(h.jsxs)("section",{children:[Object(h.jsx)("label",{htmlFor:"for",children:"Upload relevant files (optional)"}),Object(h.jsx)(j.k,{onChange:function(e){return T(e)}})]}),Object(h.jsxs)("section",{className:"btns",children:[Object(h.jsx)("button",{className:"submit",type:"submit",children:"Submit"}),Object(h.jsx)("button",{className:"cancel",type:"button",children:"Cancel"})]}),Object(h.jsx)("div",{className:"pBtm"})]}),i&&Object(h.jsx)("div",{className:"spinnerContainer",children:Object(h.jsx)("div",{className:"spinner"})}),Object(h.jsx)(u.Modal,{open:x,className:"msg",children:x})]})},g=function(e){var t=e._id,c=e.onSuccess,n=Object(a.useState)(!1),i=Object(r.a)(n,2),o=i[0],d=i[1],O=Object(a.useState)(!1),x=Object(r.a)(O,2),m=x[0],p=x[1],v=Object(a.useState)([]),f=Object(r.a)(v,2),g=f[0],y=f[1],C=Object(a.useState)(""),N=Object(r.a)(C,2),k=N[0],S=N[1],F=function(){var e=Object(l.a)(s.a.mark((function e(n){var l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),d(!0),!g.length){e.next=8;break}return e.next=5,Object(j.G)({files:g,setMsg:p});case 5:e.t0=e.sent,e.next=9;break;case 8:e.t0=[];case 9:l=e.t0,fetch("/api/addTicketReply",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({_id:t,message:{body:k,files:l}})}).then((function(e){return e.json()})).then((function(e){d(!1),"ok"===e.code?null===c||void 0===c||c(e.ticket):p(Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("button",{onClick:function(){return p(null)},children:"Okay"}),Object(h.jsxs)("div",{children:[Object(h.jsx)(j.i,{}),Object(h.jsx)("h4",{children:"Reply could not be submitted."})]})]}))})).catch((function(e){d(!1),console.log(e),p(Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("button",{onClick:function(){return p(null)},children:"Okay"}),Object(h.jsxs)("div",{children:[Object(h.jsx)(j.i,{}),Object(h.jsx)("h4",{children:"Reply could not be submitted. Make sure you're online."})]})]}))}));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("form",{className:"ticketReplyForm",onSubmit:F,children:[Object(h.jsxs)("section",{children:[Object(h.jsx)("label",{children:"Message"}),Object(h.jsx)(b.a,{required:!0,value:k,onChange:function(e){return S(e.target.value)}})]}),Object(h.jsxs)("section",{children:[Object(h.jsx)("label",{htmlFor:"for",children:"Upload relevant files (optional)"}),Object(h.jsx)(j.k,{accept:"audio/*,video/*,image/*",multiple:!0,onChange:function(e){return y(e)}})]}),Object(h.jsxs)("section",{className:"btns",children:[Object(h.jsx)("button",{className:"submit",type:"submit",children:"Submit"}),Object(h.jsx)("button",{className:"cancel",type:"button",children:"Cancel"})]}),Object(h.jsx)("div",{className:"pBtm"})]}),o&&Object(h.jsx)("div",{className:"spinnerContainer",children:Object(h.jsx)("div",{className:"spinner"})}),Object(h.jsx)(u.Modal,{open:m,className:"msg",children:m})]})}},45:function(e,t,c){"use strict";c.r(t),c.d(t,"SingleProduct",(function(){return k})),c.d(t,"Cart",(function(){return M})),c.d(t,"SellerCart",(function(){return _})),c.d(t,"CartItem",(function(){return D}));var n=c(23),s=c.n(n),l=c(28),i=c(10),r=c(13),a=c(3),o=c(1),j=c(8),d=c(159),u=c(12),b=c(2),O=c(4),h=c(17),x=c(162),m=c(214),p=c.n(m),v=c(174),f=c(0),g=Object(o.lazy)((function(){return c.e(23).then(c.bind(null,273))})),y=Object(o.lazy)((function(){return Promise.resolve().then(c.bind(null,159)).then((function(e){return{default:e.MilestoneForm}}))}));c(72);var C=function(e){var t=e.client,c=e.onToggle,n=Object(o.useContext)(u.d).user,s=Object(o.useContext)(u.a),l=s.contacts,d=s.setContacts,O=Object(o.useState)(!1),h=Object(a.a)(O,2),m=h[0],p=h[1],v=Object(o.useState)(null),g=Object(a.a)(v,2),y=g[0],C=g[1],N=Object(o.useState)(null),k=Object(a.a)(N,2),S=k[0],F=k[1];return Object(o.useEffect)((function(){if(n&&t){var e=l.find((function(e){return e.client._id===t._id}));e&&(C(Object(i.a)(Object(i.a)({},e.client),{},{status:e.userBlock?"blocked":""})),F(e.messages),u.e.emit("initiateChat",Object(i.a)({client_id:t._id},void 0===e.messages&&{newChat:!0})))}}),[t,l]),Object(o.useEffect)((function(){null===c||void 0===c||c(m)}),[m]),t?m?n?Object(f.jsxs)("div",{className:"chatWrapper",children:[Object(f.jsx)("button",{className:"closeChat",onClick:function(){return p(!1)},children:Object(f.jsx)(j.c,{})}),Object(f.jsx)(x.Chat,{chat:S,setContacts:d,userCard:y,setUserCard:C,user:n,setChat:F})]}):Object(f.jsxs)("div",{className:"chatWrapper",children:[Object(f.jsx)("button",{className:"closeChat",onClick:function(){return p(!1)},children:Object(f.jsx)(j.c,{})}),Object(f.jsx)("div",{className:"chat",children:Object(f.jsx)("div",{className:"startChat",children:Object(f.jsx)(b.b,{to:"/u/login",children:Object(f.jsx)("p",{children:"Login to start chat with this seller."})})})})]}):Object(f.jsx)("button",{className:"chatBtn",onClick:function(){if(n&&!y){var e=l.find((function(e){return e.client._id===t._id}));console.log(e),e?(C(Object(i.a)(Object(i.a)({},e.client),{},{status:e.userBlock?"blocked":""})),F(e.messages),u.e.emit("initiateChat",Object(i.a)({client_id:t._id},void 0===e.messages&&{newChat:!0}))):(d((function(e){return[].concat(Object(r.a)(e),[{client:t,messages:[],status:""}])})),u.e.emit("initiateChat",{client_id:t._id,newChat:!0}))}p(!0)},children:Object(f.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26.55",height:"25.219",viewBox:"0 0 26.55 25.219",children:Object(f.jsx)("path",{id:"Path_1","data-name":"Path 1",d:"M-242.2-184.285h-13l26.55-10.786-4.252,25.219-5.531-10.637-2.127,4.68v-6.382l7.659-9.148h2.34",transform:"translate(255.198 195.071)",fill:"#fff"})})}):null},N=function(e){var t,c,n=e.data,s=Object(o.useContext)(u.d),l=s.user,i=s.userType,r=s.setCart,a=s.setSellerCart,d=Object(j.L)({product:n,gst:null===(t=n.user)||void 0===t?void 0:t.gst});return Object(f.jsxs)("div",{className:"product",children:[Object(f.jsx)(b.b,{to:"/marketplace/".concat(n._id),children:Object(f.jsx)("div",{className:"thumb ".concat(n.images[0]?"":"noThumb"),children:Object(f.jsx)(j.n,{src:n.images[0]||"/open_box.png"})})}),Object(f.jsxs)("div",{className:"detail",children:[Object(f.jsx)("h3",{children:n.name}),Object(f.jsx)("p",{className:"dscr",children:n.dscr}),Object(f.jsxs)("div",{className:"price",children:[Object(f.jsx)("span",{className:"symbol",children:"\u20b9 "}),d," ",d!==Object(j.L)({product:n,gst:n.user.gst,discount:!1})&&Object(f.jsx)("span",{className:"originalPrice",children:Object(j.L)({product:n,gst:null===(c=n.user)||void 0===c?void 0:c.gst,discount:!1})})]})]}),Object(f.jsxs)("div",{className:"actions",children:["buyer"===i&&(null===n||void 0===n?void 0:n.user._id)===(null===l||void 0===l?void 0:l._id)&&Object(f.jsx)("p",{className:"note",children:"Can't buy product from self."}),Object(f.jsx)("button",{disabled:!n.available||(null===n||void 0===n?void 0:n.user._id)===(null===l||void 0===l?void 0:l._id)&&"buyer"===i,onClick:function(){(null===n||void 0===n?void 0:n.user._id)===(null===l||void 0===l?void 0:l._id)?a((function(e){return Object(j.J)(e,n,"seller")})):r((function(e){return Object(j.J)(e,n)}))},children:(null===n||void 0===n?void 0:n.user._id)===(null===l||void 0===l?void 0:l._id)?"Add to order":"Add to Cart"})]})]})},k=function(e){var t,c,n,i,r,d,O,x=e.match,m=Object(o.useContext)(u.d),p=m.user,v=m.setCart,y=m.setSellerCart,N=m.userType,k=Object(o.useState)(!1),F=Object(a.a)(k,2),M=F[0],_=F[1],P=Object(o.useState)(null),w=Object(a.a)(P,2),D=w[0],T=w[1],q=Object(o.useState)(null),I=Object(a.a)(q,2),A=I[0],R=I[1],B=Object(o.useState)(!1),E=Object(a.a)(B,2),L=E[0],U=E[1];return Object(o.useEffect)((function(){fetch("/api/singleProduct?_id=".concat(x.params._id)).then((function(e){return e.json()})).then((function(e){"ok"===e.code?T(e.product):R(Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("button",{onClick:function(){return R(null)},children:"Okay"}),Object(f.jsxs)("div",{children:[Object(f.jsx)(j.i,{}),Object(f.jsx)("h4",{children:"Product does not exists."})]})]}))})).catch((function(e){console.log(e),R(Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("button",{onClick:function(){return R(null)},children:"Okay"}),Object(f.jsxs)("div",{children:[Object(f.jsx)(j.i,{}),Object(f.jsx)("h4",{children:"Could not get product. Make sure you're online."})]})]}))})),navigator.share&&_(!0)}),[]),D?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)(g,{children:[Object(f.jsxs)("title",{children:[D.name," | Delivery Pay"]}),Object(f.jsx)("meta",{name:"description",content:D.dscr}),Object(f.jsx)("meta",{property:"og:url",content:"https://deliverypay.in/marketplace/".concat(D._id)}),Object(f.jsx)("meta",{property:"og:type",content:"product"}),Object(f.jsx)("meta",{property:"og:title",content:"".concat(D.name," | Delivery Pay")}),Object(f.jsx)("meta",{property:"og:description",content:D.dscr}),Object(f.jsx)("meta",{property:"og:image",content:D.images[0]})]}),Object(f.jsxs)("div",{className:"generic singleProduct ".concat(L?"chatOpen":""),children:[Object(f.jsx)(j.m,{}),Object(f.jsxs)("div",{className:"content",children:[Object(f.jsx)(S,{images:D.images}),Object(f.jsxs)("div",{className:"detail",children:[Object(f.jsx)("h1",{children:D.name}),Object(f.jsx)("p",{children:D.dscr}),Object(f.jsxs)("p",{className:"price",children:[Object(f.jsx)("label",{children:"Price: "})," ",Object(f.jsx)("span",{className:"symbol",children:"\u20b9"}),Object(j.L)({product:D,gst:null===(t=D.user)||void 0===t?void 0:t.gst})," ",Object(j.L)({product:D,gst:null===(c=D.user)||void 0===c?void 0:c.gst})!==Object(j.L)({product:D,gst:null===(n=D.user)||void 0===n?void 0:n.gst,discount:!1})&&Object(f.jsx)("span",{className:"originalPrice",children:Object(j.L)({product:D,gst:null===(i=D.user)||void 0===i?void 0:i.gst,discount:!1})})]}),Object(f.jsxs)("p",{children:["product"===D.type&&Object(f.jsxs)(f.Fragment,{children:["Available: ",D.available&&D.available," ",0===D.available&&Object(f.jsx)(f.Fragment,{children:"Out of stock"}),D.available<7&&D.available>0&&Object(f.jsx)(f.Fragment,{children:"Low stock"})]}),"product"!==D.type&&Object(f.jsxs)(f.Fragment,{children:["Availability:"," ",D.available?"Available":"Unavailable"]})]}),Object(f.jsxs)("div",{className:"actions",children:[Object(f.jsx)("button",{disabled:!D.available||"buyer"===N&&(null===(r=D.user)||void 0===r?void 0:r._id)===(null===p||void 0===p?void 0:p._id),onClick:function(){(null===D||void 0===D?void 0:D.user._id)===(null===p||void 0===p?void 0:p._id)?y((function(e){return Object(j.J)(e,D,"seller")})):v((function(e){return Object(j.J)(e,D)}))},children:(null===D||void 0===D?void 0:D.user._id)===(null===p||void 0===p?void 0:p._id)?"Add to order":"Add to Cart"}),M&&Object(f.jsx)("button",{onClick:Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.share({title:"".concat(D.name," | Delivery Pay"),url:window.location.href});case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),e,null,[[0,5]])}))),children:"Share this Product"}),"seller"===N&&(null===D||void 0===D||null===(d=D.user)||void 0===d?void 0:d._id)!==(null===p||void 0===p?void 0:p._id)&&Object(f.jsx)("p",{className:"note",children:"Switch to buyer profile to buy this product."}),"buyer"===N&&(null===D||void 0===D||null===(O=D.user)||void 0===O?void 0:O._id)===(null===p||void 0===p?void 0:p._id)&&Object(f.jsx)("p",{className:"note",children:"Can't buy product from self."})]}),D.user&&Object(f.jsxs)("div",{className:"seller",children:[Object(f.jsx)("label",{children:"Being sold by:"}),Object(f.jsx)(b.b,{to:"/marketplace?seller=".concat(D.user._id),children:Object(f.jsxs)("div",{className:"profile",children:[Object(f.jsx)(j.n,{src:D.user.profileImg||"/profile-user.jpg"}),Object(f.jsxs)("p",{className:"name",children:[D.user.firstName," ",D.user.lastName," ",Object(f.jsx)("span",{className:"contact",children:D.user.phone})]})]})})]})]}),Object(f.jsx)(h.Modal,{className:"msg",open:A,children:A})]}),D&&Object(f.jsx)(C,{client:D.user,onToggle:U}),Object(f.jsx)(j.l,{})]})]}):Object(f.jsxs)("div",{className:"generic singleProduct ".concat(L?"chatOpen":""),children:[Object(f.jsx)(j.m,{}),"loading",Object(f.jsx)(h.Modal,{className:"msg",open:A,children:A}),Object(f.jsx)(j.l,{})]})},S=function(e){var t=e.images,c=Object(o.useState)(t[0]),n=Object(a.a)(c,2),s=n[0],l=n[1];return Object(f.jsxs)("div",{className:"gallery",children:[Object(f.jsx)(F,{img:s}),Object(f.jsxs)("div",{className:"thumbs",children:[t.map((function(e,t){return Object(f.jsx)(j.n,{src:e,onClick:function(){return l(e)}},t)})),0===t.length&&Object(f.jsx)("p",{children:"No image was provided by the seller."})]})]})},F=function(e){var t=e.img,c=Object(o.useState)(t||"/open_box.png"),n=Object(a.a)(c,2),s=n[0],l=n[1],i=Object(o.useState)(null),r=Object(a.a)(i,2),j=r[0],d=r[1],u=Object(o.useState)(!1),b=Object(a.a)(u,2),O=b[0],h=b[1],x=Object(o.useState)({}),m=Object(a.a)(x,2),p=m[0],v=m[1],g=Object(o.useRef)();return Object(o.useEffect)((function(){l(t||"/open_box.png")}),[t]),Object(f.jsx)("div",{ref:g,className:"mainView ".concat(t?"":"noImg"),onMouseMove:function(e){if(t){var c=.65*Math.abs(Math.round((e.clientX-(null===j||void 0===j?void 0:j.x))/((null===j||void 0===j?void 0:j.width)/100))),n=.65*Math.round((e.clientY-(null===j||void 0===j?void 0:j.y))/((null===j||void 0===j?void 0:j.height)/100));v({transform:"scale(2) translateY(".concat(Math.max(30-n,-30),"%) translateX(").concat(Math.max(30-c,-30),"%)")})}},onTouchStart:function(e){var t;document.querySelector("body").style.overflow="hidden",d(null===(t=g.current)||void 0===t?void 0:t.getBoundingClientRect()),h(!0)},onTouchEnd:function(e){document.querySelector("body").style.overflow="auto",h(!1)},onTouchMove:function(e){if(t){var c=.65*Math.abs(Math.round((e.touches[0].clientX-j.x)/(j.width/100))),n=.65*Math.round((e.touches[0].clientY-j.y)/(j.height/100));v({transform:"scale(2) translateY(".concat(Math.max(30-n,-30),"%) translateX(").concat(Math.max(30-c,-30),"%)"),transition:"none"})}},onMouseEnter:function(){var e;h(!0),d(null===(e=g.current)||void 0===e?void 0:e.getBoundingClientRect())},onMouseLeave:function(){return h(!1)},children:Object(f.jsx)("img",{className:O?"scale":"",style:O?p:{},src:s,onError:function(){return l("/img_err.png")}})})},M=function(){var e=Object(o.useContext)(u.d),t=(e.setCart,e.cart),c=e.userType,n=Object(o.useState)(!0),s=Object(a.a)(n,2),l=s[0],i=s[1],r=Object(o.useState)(null),d=Object(a.a)(r,2),b=d[0],x=d[1],m=Object(o.useState)(null),p=Object(a.a)(m,2),v=p[0],g=p[1];return Object(o.useEffect)((function(){i(!0),fetch("/api/getCartDetail",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({cart:t})}).then((function(e){return e.json()})).then((function(e){i(!1),"ok"===e.code&&x(e.carts)})).catch((function(e){console.log(e),i(!1),g(Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("button",{onClick:function(){return g(null)},children:"Okay"}),Object(f.jsxs)("div",{children:[Object(f.jsx)(j.i,{}),Object(f.jsx)("h4",{children:"Could not get cart detail. Make sure you're online."})]})]}))}))}),[t]),b?Object(f.jsxs)("div",{className:"fullCart",children:["seller"===c&&Object(f.jsx)(O.a,{to:"/account/sellerCart"}),Object(f.jsx)("div",{className:"head",children:Object(f.jsx)("h1",{children:"Cart"})}),Object(f.jsxs)("div",{className:"allCarts",children:[b.map((function(e){var t=e.seller,c=e.products;return t&&(null===c||void 0===c?void 0:c.length)?Object(f.jsx)(P,{seller:t,products:c,loading:l},t._id):null})),0===(null===b||void 0===b?void 0:b.length)&&Object(f.jsx)("p",{children:"Cart is empty"})]}),Object(f.jsx)(h.Modal,{open:v,className:"msg",children:v})]}):Object(f.jsxs)("div",{className:"fullCart",children:["seller"===c&&Object(f.jsx)(O.a,{to:"/account/sellerCart"}),Object(f.jsx)("div",{className:"head",children:Object(f.jsx)("h1",{children:"Cart"})}),Object(f.jsx)("div",{className:"allCarts",children:"Cart is empty."}),Object(f.jsx)(h.Modal,{open:v,className:"msg",children:v})]})},_=function(){var e=Object(o.useContext)(u.d),t=e.sellerCart,c=(e.setSellerCart,e.userType),n=Object(o.useState)(!0),s=Object(a.a)(n,2),l=s[0],i=s[1],r=Object(o.useState)(null),d=Object(a.a)(r,2),b=d[0],x=d[1],m=Object(o.useState)(null),p=Object(a.a)(m,2),v=p[0],g=p[1];return Object(o.useEffect)((function(){i(!0),fetch("/api/getSellerCartDetail",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({cart:t})}).then((function(e){return e.json()})).then((function(e){i(!1),"ok"===e.code&&x(e.carts)})).catch((function(e){console.log(e),i(!1),g(Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("button",{onClick:function(){return g(null)},children:"Okay"}),Object(f.jsxs)("div",{children:[Object(f.jsx)(j.i,{}),Object(f.jsx)("h4",{children:"Could not get cart detail. Make sure you're online."})]})]}))}))}),[t]),b?Object(f.jsxs)("div",{className:"fullCart",children:["buyer"===c&&Object(f.jsx)(O.a,{to:"/account/cart"}),Object(f.jsx)("div",{className:"head",children:Object(f.jsx)("h1",{children:"Create Orders"})}),Object(f.jsxs)("div",{className:"allCarts",children:[b.map((function(e){var t=e.buyer,c=e.products;return t&&(null===c||void 0===c?void 0:c.length)?Object(f.jsx)(w,{buyer:t,products:c,loading:l},t._id):null})),0===(null===b||void 0===b?void 0:b.length)&&Object(f.jsx)("p",{children:"Cart is empty"})]}),Object(f.jsx)(h.Modal,{open:v,className:"msg",children:v})]}):Object(f.jsxs)("div",{className:"fullCart",children:["buyer"===c&&Object(f.jsx)(O.a,{to:"/account/cart"}),Object(f.jsx)("div",{className:"head",children:Object(f.jsx)("h1",{children:"Create Orders"})}),Object(f.jsx)("div",{className:"allCarts",children:"Cart is empty."}),Object(f.jsx)(h.Modal,{open:v,className:"msg",children:v})]})},P=function(e){var t,c,n,s,l,r,O=e.seller,x=e.products,m=e.loading,p=Object(o.useContext)(u.d),g=p.user,C=p.setCart,N=p.config,k=Object(o.useState)(null),S=Object(a.a)(k,2),F=S[0],M=S[1],_=Object(o.useState)({name:g.firstName+" "+g.lastName,phone:g.phone}),P=Object(a.a)(_,2),w=P[0],T=P[1],q=Object(o.useState)(!1),I=Object(a.a)(q,2),A=I[0],R=I[1],B=Object(o.useState)(!1),E=Object(a.a)(B,2),L=E[0],U=E[1],J=Object(o.useState)(!1),z=Object(a.a)(J,2),G=z[0],Y=z[1],W=Object(o.useState)(""),V=Object(a.a)(W,2),X=V[0],H=V[1],Z=Object(o.useState)(!1),Q=Object(a.a)(Z,2),K=Q[0],$=Q[1],ee=Object(o.useState)(!1),te=Object(a.a)(ee,2),ce=te[0],ne=te[1],se=Object(o.useState)(""),le=Object(a.a)(se,2),ie=le[0],re=le[1],ae=x.reduce((function(e,t){return(e+Object(j.L)({product:t.product,gst:O.gst})*t.qty).fix()}),0),oe="percent"===(null===K||void 0===K?void 0:K.type)&&Math.min(ae/100*K.amount,K.maxDiscount)||"flat"===(null===K||void 0===K?void 0:K.type)&&(null===K||void 0===K?void 0:K.amount)||0,je=+(ae-oe)+((null===(t=O.shopInfo)||void 0===t?void 0:t.shippingCost)||0).fix(),de=(je*((100+N.fee)/100)-je).fix();return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("div",{className:"shop",children:[Object(f.jsx)("div",{className:"seller",children:Object(f.jsxs)("div",{className:"profile",children:[Object(f.jsx)(j.n,{src:O.profileImg||"/profile-user.jpg"}),Object(f.jsxs)("p",{className:"name",children:[O.firstName," ",O.lastName," \u2022"," ",Object(f.jsx)("span",{className:"role",children:"Seller"}),Object(f.jsx)("span",{className:"contact",children:O.phone})]})]})}),Object(f.jsxs)("div",{className:"cart",children:[Object(f.jsxs)("ul",{className:"items",children:[x.map((function(e,t){var c=e.product,n=e.qty;return Object(f.jsx)(D,{gst:O.gst,product:c,qty:n},t)})),Object(f.jsxs)("div",{className:"total",children:[Object(f.jsxs)("p",{children:[Object(f.jsx)("label",{children:"Total"}),"\u20b9",ae]}),Object(f.jsx)("hr",{}),Object(f.jsxs)("div",{className:"coupon",children:[K?Object(f.jsxs)("label",{children:["Coupon Code ",K.code,Object(f.jsx)("br",{}),"Discount"," ","percent"===K.type?Object(f.jsxs)(f.Fragment,{children:[K.amount,"% (Upto \u20b9",K.maxDiscount,")"]}):Object(f.jsx)(f.Fragment,{children:"flat"})]}):Object(f.jsx)("label",{children:"Coupon"}),!ce&&!K&&Object(f.jsx)("button",{onClick:function(){return ne(!0)},children:"Add Coupon"}),K&&Object(f.jsxs)("span",{children:["\u20b9",oe]}),ce&&Object(f.jsxs)("form",{onSubmit:function(e){e.preventDefault(),fetch("/api/getCoupon/".concat(X)).then((function(e){return e.json()})).then((function(e){var t,c=e.code,n=e.coupon;"ok"===c?n.sellers&&0!==(null===(t=n.sellers)||void 0===t?void 0:t.filter((function(e){return e===O._id})).length)?je<n.threshold?M(Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("button",{onClick:function(){return M(null)},children:"Okay"}),Object(f.jsxs)("div",{children:[Object(f.jsx)(j.i,{}),Object(f.jsxs)("h4",{children:["Coupon code ",X," can only be applied on order more that \u20b9",n.threshold,"."]})]})]})):n.usage>=n.validPerUser?M(Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("button",{onClick:function(){return M(null)},children:"Okay"}),Object(f.jsxs)("div",{children:[Object(f.jsx)(j.i,{}),Object(f.jsxs)("h4",{children:["Each user can use this Coupon"," ",n.validPerUser," times."]})]})]})):($(n),ne(!1),M(Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("button",{onClick:function(){return M(null)},children:"Okay"}),Object(f.jsxs)("div",{children:[Object(f.jsx)(j.D,{}),Object(f.jsxs)("h4",{children:["Coupon code ",X," has been applied."]})]})]}))):M(Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("button",{onClick:function(){return M(null)},children:"Okay"}),Object(f.jsxs)("div",{children:[Object(f.jsx)(j.i,{}),Object(f.jsx)("h4",{children:"This seller does not accept this coupon code."})]})]})):M(Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("button",{onClick:function(){return M(null)},children:"Okay"}),Object(f.jsxs)("div",{children:[Object(f.jsx)(j.i,{}),Object(f.jsx)("h4",{children:"Invalid Coupon code."})]})]}))})).catch((function(e){console.log(e),M(Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("button",{onClick:function(){return M(null)},children:"Okay"}),Object(f.jsxs)("div",{children:[Object(f.jsx)(j.i,{}),Object(f.jsx)("h4",{children:"Could not apply Coupon code. Make sure you're online."})]})]}))}))},children:[Object(f.jsx)("input",{required:!0,value:X,onBlur:function(e){X||ne(!1)},onChange:function(e){return H(e.target.value.toUpperCase())}}),Object(f.jsx)("button",{children:"Apply"})]})]}),Object(f.jsx)("hr",{}),Object(f.jsxs)("p",{children:[Object(f.jsx)("label",{children:"Shipping"}),"\u20b9",null===(c=O.shopInfo)||void 0===c?void 0:c.shippingCost]}),Object(f.jsxs)("p",{children:[Object(f.jsxs)("label",{children:["Delivery Pay Fee ",N.fee,"%"]}),"\u20b9",de]}),Object(f.jsx)("hr",{}),Object(f.jsxs)("p",{children:[Object(f.jsx)("label",{children:"Grand total"}),"\u20b9",(je+de).fix()]})]}),Object(f.jsxs)("div",{className:"terms",children:[Object(f.jsxs)("p",{children:[Object(f.jsx)("label",{children:"Refundable: "}),(null===(n=O.shopInfo)||void 0===n?void 0:n.refundable)||"N/A"]}),Object(f.jsxs)("p",{children:["By proceeding, I agree to seller's all"," ",Object(f.jsx)("span",{className:"btn",onClick:function(){return Y(!0)},children:"Terms"})]})]})]}),Object(f.jsx)("span",{className:"devider"}),Object(f.jsxs)("div",{className:"deliveryDetail",children:[Object(f.jsxs)("div",{className:"head",children:[Object(f.jsx)("h3",{children:"Delivery Information"}),Object(f.jsx)("button",{onClick:function(){return R(!0)},children:"Edit"})]}),Object(f.jsx)("ul",{children:Object.entries(w).map((function(e,t){var c=Object(a.a)(e,2),n=c[0],s=c[1];return Object(f.jsxs)("li",{children:[Object(f.jsx)("label",{children:n}),s]},t)}))}),Object(f.jsx)("div",{className:"head",children:Object(f.jsx)("h3",{children:"Note to Seller"})}),Object(f.jsx)(v.a,{value:ie,onChange:function(e){return re(e.target.value)}})]})]}),Object(f.jsx)("div",{className:"actions",children:Object(f.jsx)("button",{onClick:function(){return U(!0)},children:"Place order"})}),Object(f.jsx)(h.Modal,{open:A,head:!0,label:"Delivery Address",setOpen:R,className:"addAddress",children:Object(f.jsx)(d.AddressForm,{client:{name:w.name,phone:w.phone,address:w},onSuccess:function(e){T((function(t){return Object(i.a)(Object(i.a)({},t),e.address)})),R(!1)},onCancel:function(){return R(!1)}})}),Object(f.jsx)(h.Modal,{className:"milestoneRequest",head:!0,label:"Checkout",open:L,setOpen:U,children:Object(f.jsx)(y,{action:"create",client:O,definedAmount:je+de,order:Object(i.a)(Object(i.a)({products:x,deliveryDetail:Object(i.a)(Object(i.a)({},w),{},{deliveryWithin:null===(s=O.shopInfo)||void 0===s?void 0:s.deliveryWithin})},ie&&{note:ie}),K&&{couponCode:null===K||void 0===K?void 0:K.code}),onSuccess:function(e){e.milestone;var t=e.order;C((function(e){return e.filter((function(e){var c=e.product;return!t.products.some((function(e){return e.product._id===c._id}))}))})),U(!1),M(Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("button",{onClick:function(){return M(null)},children:"Okay"}),Object(f.jsxs)("div",{children:[Object(f.jsx)(j.D,{}),Object(f.jsx)("h4",{children:"Order successfully submitted."}),Object(f.jsx)(b.b,{to:"/account/myShopping/orders",children:"View All orders"})]})]}))}})}),Object(f.jsx)(h.Modal,{open:G,setOpen:Y,head:!0,label:"Seller's Terms",className:"shopTerms",children:Object(f.jsx)("ul",{children:null===(l=O.shopInfo)||void 0===l||null===(r=l.terms)||void 0===r?void 0:r.map((function(e,t){return Object(f.jsx)("li",{children:e},t)}))})}),Object(f.jsx)(h.Modal,{className:"msg",open:F,children:F})]}),m&&Object(f.jsx)("div",{className:"spinnerContainer",children:Object(f.jsx)("div",{className:"spinner"})})]})},w=function(e){var t,c,n,s,l,r,O=e.buyer,x=e.products,m=e.loading,p=Object(o.useContext)(u.d),g=p.user,C=p.setSellerCart,N=p.config,k=Object(o.useState)(null),S=Object(a.a)(k,2),F=S[0],M=S[1],_=Object(o.useState)({name:g.firstName+" "+g.lastName,phone:g.phone}),P=Object(a.a)(_,2),w=P[0],T=P[1],q=Object(o.useState)(!1),I=Object(a.a)(q,2),A=I[0],R=I[1],B=Object(o.useState)(!1),E=Object(a.a)(B,2),L=E[0],U=E[1],J=Object(o.useState)(!1),z=Object(a.a)(J,2),G=z[0],Y=z[1],W=Object(o.useState)(""),V=Object(a.a)(W,2),X=V[0],H=V[1],Z=Object(o.useState)(!1),Q=Object(a.a)(Z,2),K=Q[0],$=Q[1],ee=Object(o.useState)(!1),te=Object(a.a)(ee,2),ce=te[0],ne=te[1],se=Object(o.useState)(""),le=Object(a.a)(se,2),ie=le[0],re=le[1],ae=x.reduce((function(e,t){return(e+Object(j.L)({product:t.product,gst:g.gst})*t.qty).fix()}),0),oe="percent"===(null===K||void 0===K?void 0:K.type)&&Math.min(ae/100*K.amount,K.maxDiscount)||"flat"===(null===K||void 0===K?void 0:K.type)&&(null===K||void 0===K?void 0:K.amount)||0,je=+(ae-oe)+((null===(t=g.shopInfo)||void 0===t?void 0:t.shippingCost)||0).fix(),de=(je*((100+N.fee)/100)-je).fix();return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("div",{className:"shop",children:[Object(f.jsx)("div",{className:"seller",children:Object(f.jsxs)("div",{className:"profile",children:[Object(f.jsx)(j.n,{src:O.profileImg||"/profile-user.jpg"}),Object(f.jsxs)("p",{className:"name",children:[O.firstName," ",O.lastName," \u2022"," ",Object(f.jsx)("span",{className:"role",children:"Buyer"}),Object(f.jsx)("span",{className:"contact",children:O.phone})]})]})}),Object(f.jsxs)("div",{className:"cart",children:[Object(f.jsxs)("ul",{className:"items",children:[x.map((function(e,t){var c=e.product,n=e.qty;return Object(f.jsx)(D,{gst:g.gst,product:c,qty:n},t)})),Object(f.jsxs)("div",{className:"total",children:[Object(f.jsxs)("p",{children:[Object(f.jsx)("label",{children:"Total"}),"\u20b9",ae]}),Object(f.jsx)("hr",{}),Object(f.jsxs)("div",{className:"coupon",children:[K?Object(f.jsxs)("label",{children:["Coupon Code ",K.code,Object(f.jsx)("br",{}),"Discount"," ","percent"===K.type?Object(f.jsxs)(f.Fragment,{children:[K.amount,"% (Upto \u20b9",K.maxDiscount,")"]}):Object(f.jsx)(f.Fragment,{children:"flat"})]}):Object(f.jsx)("label",{children:"Coupon"}),!ce&&!K&&Object(f.jsx)("button",{onClick:function(){return ne(!0)},children:"Add Coupon"}),K&&Object(f.jsxs)("span",{children:["\u20b9",oe]}),ce&&Object(f.jsxs)("form",{onSubmit:function(e){e.preventDefault(),fetch("/api/getCoupon/".concat(X)).then((function(e){return e.json()})).then((function(e){var t,c=e.code,n=e.coupon;"ok"===c?n.sellers&&0!==(null===(t=n.sellers)||void 0===t?void 0:t.filter((function(e){return e===g._id})).length)?je<n.threshold?M(Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("button",{onClick:function(){return M(null)},children:"Okay"}),Object(f.jsxs)("div",{children:[Object(f.jsx)(j.i,{}),Object(f.jsxs)("h4",{children:["Coupon code ",X," can only be applied on order more that \u20b9",n.threshold,"."]})]})]})):n.usage>=n.validPerUser?M(Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("button",{onClick:function(){return M(null)},children:"Okay"}),Object(f.jsxs)("div",{children:[Object(f.jsx)(j.i,{}),Object(f.jsxs)("h4",{children:["Each user can use this Coupon"," ",n.validPerUser," times."]})]})]})):($(n),ne(!1),M(Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("button",{onClick:function(){return M(null)},children:"Okay"}),Object(f.jsxs)("div",{children:[Object(f.jsx)(j.D,{}),Object(f.jsxs)("h4",{children:["Coupon code ",X," has been applied."]})]})]}))):M(Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("button",{onClick:function(){return M(null)},children:"Okay"}),Object(f.jsxs)("div",{children:[Object(f.jsx)(j.i,{}),Object(f.jsx)("h4",{children:"This seller does not accept this coupon code."})]})]})):M(Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("button",{onClick:function(){return M(null)},children:"Okay"}),Object(f.jsxs)("div",{children:[Object(f.jsx)(j.i,{}),Object(f.jsx)("h4",{children:"Invalid Coupon code."})]})]}))})).catch((function(e){console.log(e),M(Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("button",{onClick:function(){return M(null)},children:"Okay"}),Object(f.jsxs)("div",{children:[Object(f.jsx)(j.i,{}),Object(f.jsx)("h4",{children:"Could not apply Coupon code. Make sure you're online."})]})]}))}))},children:[Object(f.jsx)("input",{required:!0,value:X,onBlur:function(e){X||ne(!1)},onChange:function(e){return H(e.target.value.toUpperCase())}}),Object(f.jsx)("button",{children:"Apply"})]})]}),Object(f.jsx)("hr",{}),Object(f.jsxs)("p",{children:[Object(f.jsx)("label",{children:"Shipping"}),"\u20b9",null===(c=g.shopInfo)||void 0===c?void 0:c.shippingCost]}),Object(f.jsxs)("p",{children:[Object(f.jsxs)("label",{children:["Delivery Pay Fee ",N.fee,"%"]}),"\u20b9",de]}),Object(f.jsx)("hr",{}),Object(f.jsxs)("p",{children:[Object(f.jsx)("label",{children:"Grand total"}),"\u20b9",(je+de).fix()]})]}),Object(f.jsxs)("div",{className:"terms",children:[Object(f.jsxs)("p",{children:[Object(f.jsx)("label",{children:"Refundable: "}),(null===(n=g.shopInfo)||void 0===n?void 0:n.refundable)||"N/A"]}),Object(f.jsxs)("p",{children:["By proceeding, I agree to seller's all"," ",Object(f.jsx)("span",{className:"btn",onClick:function(){return Y(!0)},children:"Terms"})]})]})]}),Object(f.jsx)("span",{className:"devider"}),Object(f.jsxs)("div",{className:"deliveryDetail",children:[Object(f.jsxs)("div",{className:"head",children:[Object(f.jsx)("h3",{children:"Delivery Information"}),Object(f.jsx)("button",{onClick:function(){return R(!0)},children:"Edit"})]}),Object(f.jsx)("ul",{children:Object.entries(w).map((function(e,t){var c=Object(a.a)(e,2),n=c[0],s=c[1];return Object(f.jsxs)("li",{children:[Object(f.jsx)("label",{children:n}),s]},t)}))}),Object(f.jsx)("div",{className:"head",children:Object(f.jsx)("h3",{children:"Note to Buyer"})}),Object(f.jsx)(v.a,{value:ie,onChange:function(e){return re(e.target.value)}})]})]}),Object(f.jsx)("div",{className:"actions",children:Object(f.jsx)("button",{onClick:function(){return U(!0)},children:"Create order"})}),Object(f.jsx)(h.Modal,{open:A,head:!0,label:"Delivery Address",setOpen:R,className:"addAddress",children:Object(f.jsx)(d.AddressForm,{client:{name:w.name,phone:w.phone,address:w},onSuccess:function(e){T((function(t){return Object(i.a)(Object(i.a)({},t),e.address)})),R(!1)},onCancel:function(){return R(!1)}})}),Object(f.jsx)(h.Modal,{className:"milestoneRequest",head:!0,label:"Checkout",open:L,setOpen:U,children:Object(f.jsx)(y,{action:"request",client:O,definedAmount:(je+de).fix(),order:Object(i.a)(Object(i.a)({products:x,deliveryDetail:Object(i.a)(Object(i.a)({},w),{},{deliveryWithin:null===(s=g.shopInfo)||void 0===s?void 0:s.deliveryWithin})},ie&&{note:ie}),K&&{couponCode:null===K||void 0===K?void 0:K.code}),onSuccess:function(e){e.milestone;var t=e.order;C((function(e){return e.filter((function(e){var c=e.product;return!t.products.some((function(e){return e.product._id===c._id}))}))})),U(!1),M(Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("button",{onClick:function(){return M(null)},children:"Okay"}),Object(f.jsxs)("div",{children:[Object(f.jsx)(j.D,{}),Object(f.jsx)("h4",{children:"Order successfully submitted."}),Object(f.jsx)(b.b,{to:"/account/myShop/orders",children:"Manage orders"})]})]}))}})}),Object(f.jsx)(h.Modal,{open:G,setOpen:Y,head:!0,label:"Seller's Terms",className:"shopTerms",children:Object(f.jsx)("ul",{children:null===(l=g.shopInfo)||void 0===l||null===(r=l.terms)||void 0===r?void 0:r.map((function(e,t){return Object(f.jsx)("li",{children:e},t)}))})}),Object(f.jsx)(h.Modal,{className:"msg",open:F,children:F})]}),m&&Object(f.jsx)("div",{className:"spinnerContainer",children:Object(f.jsx)("div",{className:"spinner"})})]})},D=function(e){var t,c=e.product,n=e.gst,s=e.qty,l=Object(o.useContext)(u.d),r=l.setCart,a=l.setSellerCart,d=l.userType,b=Object(j.L)({product:c,gst:n||(null===(t=c.user)||void 0===t?void 0:t.gst)});return Object(f.jsxs)("li",{className:"item ".concat(!c.images.length&&"noImg"),children:[Object(f.jsx)(j.n,{src:c.images[0]||"/open_box.png"}),Object(f.jsxs)("div",{className:"detail",children:[Object(f.jsx)("p",{className:"name",children:c.name}),Object(f.jsxs)("div",{className:"qty",children:["QTY:"," ",Object(f.jsxs)("div",{className:"addRemove",children:[Object(f.jsx)("button",{onClick:function(){"seller"===d?a((function(e){return e.map((function(e){return e.product._id===c._id?Object(i.a)(Object(i.a)({},e),{},{qty:e.qty-1}):e})).filter((function(e){return e.qty>0}))})):r((function(e){return e.map((function(e){return e.product._id===c._id?Object(i.a)(Object(i.a)({},e),{},{qty:e.qty-1}):e})).filter((function(e){return e.qty>0}))}))},children:Object(f.jsx)(j.r,{})}),s,Object(f.jsx)("button",{onClick:function(){"seller"===d?a((function(e){return e.map((function(e){return e.product._id===c._id?Object(i.a)(Object(i.a)({},e),{},{qty:e.qty+1}):e}))})):r((function(e){return e.map((function(e){return e.product._id===c._id?Object(i.a)(Object(i.a)({},e),{},{qty:e.qty+1}):e}))}))},children:Object(f.jsx)(j.v,{})})]})]})]}),Object(f.jsxs)("div",{className:"price",children:[Object(f.jsxs)("span",{className:"qty",children:[b," x ",s]}),"\u20b9",(b*s).fix()]}),(null===n||void 0===n?void 0:n.verified)&&Object(f.jsxs)(j.F,{children:["Including ",c.gst,"% GST."]})]})};t.default=function(e){var t,c=e.history,n=e.location,d=(e.match,Object(o.useContext)(u.d).userType,Object(o.useState)(!1)),b=Object(a.a)(d,2),O=b[0],x=b[1],m=Object(j.N)({rootMargin:"100px"}),v=Object(a.a)(m,2),g=v[0],y=v[1],k=Object(o.useRef)([{label:"Newest first",value:{column:"createdAt",order:"dsc"}},{label:"Oldest first",value:{column:"createdAt",order:"asc"}},{label:"Price high-low",value:{column:"price",order:"dsc"}},{label:"Price low-high",value:{column:"price",order:"asc"}}]),S=Object(o.useState)([]),F=Object(a.a)(S,2),M=F[0],_=F[1],P=Object(o.useState)(0),w=Object(a.a)(P,2),D=w[0],T=w[1],q=Object(o.useState)(!1),I=Object(a.a)(q,2),A=(I[0],I[1],Object(o.useState)(p.a.parse(n.search).type||"")),R=Object(a.a)(A,2),B=R[0],E=(R[1],Object(o.useState)(p.a.parse(n.search).perPage||20)),L=Object(a.a)(E,2),U=L[0],J=(L[1],Object(o.useState)(1)),z=Object(a.a)(J,2),G=z[0],Y=z[1],W=Object(o.useState)(p.a.parse(n.search).q||""),V=Object(a.a)(W,2),X=V[0],H=V[1],Z=Object(o.useState)({column:p.a.parse(n.search).sort||"createdAt",order:p.a.parse(n.search).order||"dsc"}),Q=Object(a.a)(Z,2),K=Q[0],$=Q[1],ee=Object(o.useState)([]),te=Object(a.a)(ee,2),ce=te[0],ne=te[1],se=Object(o.useState)(null),le=Object(a.a)(se,2),ie=le[0],re=le[1],ae=Object(o.useState)(""),oe=Object(a.a)(ae,2),je=oe[0],de=oe[1],ue=Object(o.useState)(p.a.parse(n.search).seller),be=Object(a.a)(ue,2),Oe=be[0],he=(be[1],Object(o.useState)(null)),xe=Object(a.a)(he,2),me=xe[0],pe=xe[1],ve=Object(o.useState)(!1),fe=Object(a.a)(ve,2),ge=(fe[0],fe[1]),ye=Object(o.useState)(!1),Ce=Object(a.a)(ye,2),Ne=Ce[0],ke=Ce[1];return Object(o.useEffect)((function(){fetch("/api/getProducts?".concat(n.search.replace("?",""),"&page=",1)).then((function(e){return e.json()})).then((function(e){"ok"===e.code?(T(e.total),ne(e.products),e.seller?(pe(e.seller),e.categories&&_(e.categories)):pe(null)):re(Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("button",{onClick:function(){return re(null)},children:"Okay"}),Object(f.jsxs)("div",{children:[Object(f.jsx)(j.i,{}),Object(f.jsx)("h4",{children:"Could not get products. Please try again."})]})]}))})).catch((function(e){console.log(e,156),re(Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("button",{onClick:function(){return re(null)},children:"Okay"}),Object(f.jsxs)("div",{children:[Object(f.jsx)(j.i,{}),Object(f.jsx)("h4",{children:"Could not get products. Make sure you're online."})]})]}))}))}),[n.search]),Object(o.useEffect)((function(){c.replace({pathname:c.location.pathname,search:"?"+new URLSearchParams(Object(i.a)(Object(i.a)(Object(i.a)(Object(i.a)({},Oe&&{seller:Oe}),X.length>=4&&{q:X}),{},{perPage:U,sort:K.column,order:K.order},B&&{type:B}),je&&{category:je})).toString()})}),[G,X,K,Oe,B,je]),Object(o.useEffect)((function(){y&&D>ce.length&&(ge(!0),fetch("/api/getProducts".concat(n.search,"&page=").concat(G+1)).then((function(e){return e.json()})).then((function(e){ge(!1),"ok"===e.code?e.products.length&&(ne((function(t){return[].concat(Object(r.a)(t),Object(r.a)(e.products))})),Y((function(e){return e+1}))):re(Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("button",{onClick:function(){return re(null)},children:"Okay"}),Object(f.jsxs)("div",{children:[Object(f.jsx)(j.i,{}),Object(f.jsx)("h4",{children:"Could not get products. Please try again."})]})]}))})).catch((function(e){ge(!1),console.log(e),re(Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("button",{onClick:function(){return re(null)},children:"Okay"}),Object(f.jsxs)("div",{children:[Object(f.jsx)(j.i,{}),Object(f.jsx)("h4",{children:"Could not get products. Make sure you're online."})]})]}))})))}),[y]),Object(o.useEffect)((function(){navigator.share&&x(!0)}),[]),Object(f.jsxs)("div",{className:"generic marketplace ".concat(Ne?"chatOpen":""),children:[Object(f.jsx)(j.m,{}),Object(f.jsx)("div",{style:{display:"none"},children:Object(f.jsx)(j.I,{})}),Object(f.jsx)("div",{className:"benner",children:Object(f.jsx)("h1",{children:"Delivery Pay Marketplace"})}),Object(f.jsxs)("div",{className:"content",children:[Object(f.jsxs)("div",{className:"mainContent",children:[me&&Object(f.jsxs)("div",{className:"sellerDetail",children:[(null===me||void 0===me?void 0:me.profileImg)&&Object(f.jsx)(j.n,{className:"logo",src:"/profile-user.jpg"}),Object(f.jsx)("p",{children:(null===(t=Oe.shopInfo)||void 0===t?void 0:t.shopName)||me.firstName+" "+me.lastName})]}),Object(f.jsxs)("div",{className:"filters",children:[Object(f.jsxs)("section",{className:"categories",children:[Object(f.jsx)("label",{children:"Category"}),Object(f.jsx)(j.h,{defaultValue:0,options:[{label:"All",value:""}].concat(Object(r.a)(M.map((function(e){return{label:e,value:e}})))),onChange:function(e){de(e.value)}})]}),Object(f.jsxs)("section",{className:"search",children:[Object(f.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"23",height:"23",viewBox:"0 0 23 23",children:Object(f.jsx)("path",{id:"Icon_ionic-ios-search","data-name":"Icon ionic-ios-search",d:"M27.23,25.828l-6.4-6.455a9.116,9.116,0,1,0-1.384,1.4L25.8,27.188a.985.985,0,0,0,1.39.036A.99.99,0,0,0,27.23,25.828ZM13.67,20.852a7.2,7.2,0,1,1,5.091-2.108A7.155,7.155,0,0,1,13.67,20.852Z",transform:"translate(-4.5 -4.493)",fill:"#707070",opacity:"0.74"})}),Object(f.jsx)("input",{value:X,onChange:function(e){H(e.target.value)},placeholder:"Search for products or services"}),X&&Object(f.jsx)("button",{onClick:function(){return H("")},children:Object(f.jsx)(j.I,{})})]}),Object(f.jsxs)("section",{className:"sort",children:[Object(f.jsx)("label",{children:"Sort by:"}),Object(f.jsx)(j.h,{defaultValue:k.current.find((function(e){return e.value.column===K.column&&e.value.order===K.order})),options:k.current,onChange:function(e){return $(e.value)}})]}),O&&Object(f.jsx)("section",{className:"share",children:Object(f.jsx)("button",{onClick:Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.share({title:"Delivery Pay | ".concat(me?"".concat(me.firstName+" "+me.lastName):"Marketplace"),url:window.location.href});case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),e,null,[[0,5]])}))),children:"Share this page"})})]}),Object(f.jsxs)("div",{className:"products ".concat(0===ce.length?"empty":""),children:[ce.map((function(e){return Object(f.jsx)(N,{data:e},e._id)})),D>ce.length&&Object(f.jsx)("div",{className:"placeholder",children:"Loading"}),0===ce.length&&Object(f.jsxs)("div",{className:"placeholder",children:[Object(f.jsx)(j.n,{src:"/open_box.png"}),Object(f.jsx)("p",{children:"No Product Found"})]})]})]}),Object(f.jsx)(h.Modal,{className:"msg",open:ie,children:ie})]}),Object(f.jsx)("div",{ref:g}),me&&Object(f.jsx)(C,{client:me,onToggle:ke}),Object(f.jsx)(j.l,{})]})}}}]);
//# sourceMappingURL=3.2b943897.chunk.js.map