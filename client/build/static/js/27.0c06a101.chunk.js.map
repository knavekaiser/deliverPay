{"version":3,"sources":["components/myShopping.js","../node_modules/use-isomorphic-layout-effect/dist/use-isomorphic-layout-effect.browser.esm.js","../node_modules/use-latest/dist/use-latest.esm.js","../node_modules/use-composed-ref/dist/use-composed-ref.esm.js","../node_modules/react-textarea-autosize/dist/react-textarea-autosize.browser.esm.js"],"names":["MilestoneForm","lazy","then","mod","default","Orders","status","onClick","useContext","SiteContext","cart","userType","useState","total","setTotal","page","setPage","perPage","type","search","dateRange","column","order","sort","orders","setOrders","selectAll","setSelectAll","batch","setBatch","msg","setMsg","carts","setCarts","useEffect","startDate","moment","time","format","endDate","Date","setHours","fetch","URLSearchParams","user","q","dateFrom","dateTo","res","json","data","code","catch","err","console","log","method","headers","body","JSON","stringify","length","to","className","map","SingleOrder","_id","includes","OrderDraft","seller","btns","currentPage","open","actionsRef","setOrder","useRef","checkRef","history","useHistory","products","reduce","a","c","calculatePrice","product","gst","qty","fix","shopInfo","shippingCost","e","nativeEvent","path","current","push","ref","icon","selected","setSelected","cancelOrder","prev","item","requestCancellation","filter","createdAt","location","pathname","Confirm","label","question","callback","FullOrder","match","milestoneForm","setMilestoneForm","refundTill","setRefundTill","issueRefund","setIssueRefund","params","refundable","days","getTime","productPrice","couponCodeDiscount","coupon","Math","min","amount","maxDiscount","fee","replace","deliveredAt","Object","entries","deliveryDetail","i","key","value","deliveryTime","src","images","name","cellSpacing","cellPadding","milestones","milestone","dscr","files","links","terms","head","setOpen","action","definedAmount","client","onSuccess","RefundForm","refund","loading","setLoading","issue","setIssue","setDscr","setFiles","submit","preventDefault","UploadFiles","fileLinks","onSubmit","required","onChange","target","accept","multiple","Disputes","disputes","setDisputes","dispute","SingleDispute","plaintiff","FullDispute","setData","role","Case","winner","defendant","case","firstName","lastName","message","profileImg","phone","balance","MyShopping","setCategories","categories","style","display","component","index","useLayoutEffect","useLatest","useIsomorphicLayoutEffect","updateRef","useComposedRef","libRef","userRef","prevUserRef","useCallback","instance","HIDDEN_TEXTAREA_STYLE","height","visibility","overflow","position","top","right","forceHiddenStyles","node","keys","forEach","setProperty","hiddenTextarea","noop","SIZING_STYLE","isIE","document","documentElement","currentStyle","TextareaAutosize","_ref","cacheMeasurements","maxRows","minRows","_ref$onChange","_ref$onHeightChange","onHeightChange","props","_objectWithoutPropertiesLoose","isControlled","undefined","heightRef","measurementsCacheRef","resizeTextarea","nodeSizingData","window","getComputedStyle","obj","sizingStyle","acc","prop","boxSizing","width","parseFloat","borderRightWidth","borderLeftWidth","paddingRight","paddingLeft","paddingSize","paddingBottom","paddingTop","borderSize","borderBottomWidth","borderTopWidth","getSizingData","_calculateNodeHeight","sizingData","Infinity","createElement","setAttribute","parentNode","appendChild","_key","scrollHeight","getHeight","rowHeight","minHeight","max","maxHeight","calculateNodeHeight","placeholder","listener","latestListener","handler","event","addEventListener","removeEventListener","useWindowResizeListener","_extends","forwardRef"],"mappings":"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","file":"static/js/27.0c06a101.chunk.js","sourcesContent":["import {\n  useState,\n  useEffect,\n  useRef,\n  useLayoutEffect,\n  useContext,\n  lazy,\n} from \"react\";\nimport {\n  Succ_svg,\n  Err_svg,\n  Plus_svg,\n  X_svg,\n  Combobox,\n  Pagination,\n  Checkbox,\n  calculateDiscount,\n  calculatePrice,\n  Actions,\n  Chev_down_svg,\n  Tabs,\n  Arrow_left_svg,\n  Media,\n  User,\n  FileInput,\n  UploadFiles,\n  Img,\n  Moment,\n  moment,\n  InputDateRange,\n} from \"./Elements\";\nimport { Link, Route, useHistory, Switch, Redirect } from \"react-router-dom\";\nimport { SiteContext } from \"../SiteContext\";\nimport { Modal, Confirm } from \"./Modal\";\nimport TextareaAutosize from \"react-textarea-autosize\";\nimport { toast } from \"react-toastify\";\nconst MilestoneForm = lazy(() =>\n  import(\"./Forms\").then((mod) => ({ default: mod.MilestoneForm }))\n);\n\nexport const Orders = ({ status, onClick }) => {\n  const { cart, userType } = useContext(SiteContext);\n  const [total, setTotal] = useState(0);\n  const [page, setPage] = useState(1);\n  const [perPage, setPerPage] = useState(20);\n  const [type, setType] = useState(\"\");\n  const [search, setSearch] = useState(\"\");\n  const [dateRange, setDateRange] = useState(null);\n  const [sort, setSort] = useState({\n    column: \"createdAt\",\n    order: \"dsc\",\n  });\n  const [orders, setOrders] = useState([]);\n  const [selectAll, setSelectAll] = useState(false);\n  const [batch, setBatch] = useState([]);\n  const [msg, setMsg] = useState(null);\n  const [carts, setCarts] = useState([]);\n  useEffect(() => {\n    const startDate = moment({\n      time: dateRange?.startDate,\n      format: \"YYYY-MM-DD\",\n    });\n    const endDate = moment({\n      time: new Date(dateRange?.endDate)?.setHours(24, 0, 0, 0),\n      format: \"YYYY-MM-DD\",\n    });\n    fetch(\n      `/api/getOrders?${new URLSearchParams({\n        user: \"buyer\",\n        ...(search && { q: search }),\n        page,\n        perPage,\n        sort: sort.column,\n        order: sort.order,\n        ...(dateRange && {\n          dateFrom: startDate,\n          dateTo: endDate,\n        }),\n        ...(type && { type }),\n        ...(status && { status }),\n      })}`\n    )\n      .then((res) => res.json())\n      .then((data) => {\n        if (data.code === \"ok\") {\n          setOrders(data.orders);\n          setTotal(data.total);\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        setMsg(\n          <>\n            <button onClick={() => setMsg(null)}>Okay</button>\n            <div>\n              <Err_svg />\n              <h4>Could not get orders.</h4>\n            </div>\n          </>\n        );\n      });\n  }, [type, search, page, perPage, dateRange, status]);\n  useEffect(() => {\n    fetch(\"/api/getCartDetail\", {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ cart }),\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        if (data.code === \"ok\") {\n          setCarts(data.carts);\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        setMsg(\n          <>\n            <button onClick={() => setMsg(null)}>Okay</button>\n            <div>\n              <Err_svg />\n              <h4>Could not get cart detail. Make sure you're online.</h4>\n            </div>\n          </>\n        );\n      });\n  }, [cart]);\n  useEffect(() => {\n    if (selectAll) {\n    } else {\n      setBatch([]);\n    }\n  }, [selectAll]);\n  useEffect(() => {\n    if (batch.length === 0) {\n      setSelectAll(false);\n    }\n  }, [batch]);\n  return (\n    <>\n      {userType === \"seller\" && <Redirect to=\"/account/myShop/orders\" />}\n      <div className=\"productContainer\">\n        {\n          <div className=\"benner\">\n            <p>My Orders</p>\n          </div>\n        }\n        {\n          //   <div className=\"filters\">\n          //   <section>\n          //     <label>Total:</label>\n          //     {total}\n          //   </section>\n          //   <section>\n          //     <label>Per Page:</label>\n          //     <Combobox\n          //       defaultValue={0}\n          //       options={[\n          //         { label: \"20\", value: 20 },\n          //         { label: \"30\", value: 30 },\n          //         { label: \"50\", value: 50 },\n          //       ]}\n          //       onChange={(e) => setPerPage(e.value)}\n          //     />\n          //   </section>\n          //   <section className=\"search\">\n          //     <svg\n          //       xmlns=\"http://www.w3.org/2000/svg\"\n          //       width=\"23\"\n          //       height=\"23\"\n          //       viewBox=\"0 0 23 23\"\n          //     >\n          //       <path\n          //         id=\"Icon_ionic-ios-search\"\n          //         data-name=\"Icon ionic-ios-search\"\n          //         d=\"M27.23,25.828l-6.4-6.455a9.116,9.116,0,1,0-1.384,1.4L25.8,27.188a.985.985,0,0,0,1.39.036A.99.99,0,0,0,27.23,25.828ZM13.67,20.852a7.2,7.2,0,1,1,5.091-2.108A7.155,7.155,0,0,1,13.67,20.852Z\"\n          //         transform=\"translate(-4.5 -4.493)\"\n          //         fill=\"#707070\"\n          //         opacity=\"0.74\"\n          //       />\n          //     </svg>\n          //     <input\n          //       value={search}\n          //       onChange={(e) => setSearch(e.target.value)}\n          //       placeholder=\"Search for Seller\"\n          //     />\n          //     {search && (\n          //       <button onClick={() => setSearch(\"\")}>\n          //         <X_svg />\n          //       </button>\n          //     )}\n          //   </section>\n          //   <section className=\"category\">\n          //     <label>Type:</label>\n          //     <Combobox\n          //       defaultValue={0}\n          //       options={[\n          //         { label: \"All\", value: \"\" },\n          //         { label: \"Product\", value: \"product\" },\n          //         { label: \"Service\", value: \"service\" },\n          //         { label: \"Other\", value: \"other\" },\n          //       ]}\n          //       onChange={(e) => setType(e.value)}\n          //     />\n          //   </section>\n          // <section className={`date`}>\n          //   <InputDateRange\n          //     dateRange={dateRange}\n          //     onChange={(range) => setDateRange(range)}\n          //   />\n          // </section>\n          // </div>\n        }\n        {batch.length > 0 && (\n          <div className=\"batchAction\">\n            <button onClick={() => console.log(\"batch delete\")}>Delete</button>\n          </div>\n        )}\n        <table className=\"table orders\">\n          <thead>\n            <tr>\n              {\n                //   <th className=\"checkContainer\">\n                //   <Checkbox\n                //     value={selectAll}\n                //     defaultValue={selectAll}\n                //     onChange={(e) => setSelectAll(e)}\n                //   />\n                // </th>\n              }\n              <th>Order</th>\n              <th className=\"date\">Purchase Date</th>\n              {\n                //   <th>Seller</th>\n                // <th>QTY</th>\n                // <th>Refundable</th>\n                // <th>Milestone</th>\n              }\n              <th>Total</th>\n              <th>Status</th>\n              <th>Actions</th>\n            </tr>\n          </thead>\n          <tbody>\n            {orders.map((order) => (\n              <SingleOrder\n                onClick={onClick}\n                key={order._id}\n                order={order}\n                setOrders={setOrders}\n                selectAll={selectAll}\n                setBatch={setBatch}\n                batch={batch}\n              />\n            ))}\n            {status?.includes(\"pending\") &&\n              carts.map((order) => (\n                <OrderDraft order={order} key={order.seller._id} />\n              ))}\n            {orders.length === 0 && (\n              <tr className=\"placeholder\">\n                <td>No order yet.</td>\n              </tr>\n            )}\n          </tbody>\n        </table>\n        <Pagination\n          total={total}\n          btns={5}\n          currentPage={page}\n          perPage={perPage}\n          setPage={setPage}\n        />\n        <Modal className=\"msg\" open={msg}>\n          {msg}\n        </Modal>\n      </div>\n    </>\n  );\n};\nconst OrderDraft = ({ order, setOrder }) => {\n  const actionsRef = useRef();\n  const checkRef = useRef();\n  const history = useHistory();\n  const total = +(\n    order.products.reduce(\n      (a, c) =>\n        (\n          a +\n          calculatePrice({ product: c.product, gst: order.seller.gst }) * c.qty\n        ).fix(),\n      0\n    ) + (order.seller.shopInfo?.shippingCost || 0)\n  ).fix();\n  return (\n    <tr\n      className=\"order\"\n      onClick={(e) => {\n        if (\n          e.nativeEvent.path.includes(actionsRef.current) ||\n          e.nativeEvent.path.includes(checkRef.current)\n        ) {\n        } else {\n          history.push(\"/account/cart\");\n        }\n      }}\n    >\n      <td>-</td>\n      <td className=\"date\">\n        <Moment format=\"DD MMM YYYY\">{new Date()}</Moment>\n      </td>\n      <td>₹{total}</td>\n      <td>Draft</td>\n      <td ref={actionsRef}>\n        <Actions icon={<Chev_down_svg />}>\n          <Link to=\"/account/cart\">View Detail</Link>\n        </Actions>\n      </td>\n    </tr>\n  );\n};\nconst SingleOrder = ({\n  order,\n  setOrders,\n  selectAll,\n  setBatch,\n  batch,\n  onClick,\n}) => {\n  const actionsRef = useRef();\n  const checkRef = useRef();\n  const history = useHistory();\n  const { user } = useContext(SiteContext);\n  const [selected, setSelected] = useState(selectAll || false);\n  const [edit, setEdit] = useState(false);\n  const [msg, setMsg] = useState(false);\n  const cancelOrder = () => {\n    fetch(\"/api/cancelOrder\", {\n      method: \"PATCH\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ _id: order._id }),\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        if (data.code === \"ok\") {\n          setOrders((prev) =>\n            prev.map((item) => {\n              if (item._id === order._id) {\n                return {\n                  ...item,\n                  status: data.order?.status,\n                };\n              } else {\n                return item;\n              }\n            })\n          );\n        } else {\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                <Err_svg />\n                <h4>Could not cancel order. Please try again.</h4>\n              </div>\n            </>\n          );\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        setMsg(\n          <>\n            <button onClick={() => setMsg(null)}>Okay</button>\n            <div>\n              <Err_svg />\n              <h4>Could not cancel order. Make sure you're online</h4>\n            </div>\n          </>\n        );\n      });\n  };\n  const requestCancellation = () => {\n    fetch(\"/api/requestCancellation\", {\n      method: \"PATCH\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ _id: order._id }),\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        if (data.code === \"ok\") {\n          setOrders((prev) =>\n            prev.map((item) => {\n              if (item._id === order._id) {\n                return {\n                  ...item,\n                  status: data.order?.status,\n                };\n              } else {\n                return item;\n              }\n            })\n          );\n        } else {\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                <Err_svg />\n                <h4>Could not cancel order. Please try again.</h4>\n              </div>\n            </>\n          );\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        setMsg(\n          <>\n            <button onClick={() => setMsg(null)}>Okay</button>\n            <div>\n              <Err_svg />\n              <h4>Could not cancel order. Make sure you're online</h4>\n            </div>\n          </>\n        );\n      });\n  };\n  useEffect(() => {\n    setSelected(selectAll);\n  }, [selectAll]);\n  useEffect(() => {\n    if (selected) {\n      setBatch((prev) => [...prev, order._id]);\n    } else {\n      setBatch((prev) => prev.filter((item) => item !== order._id));\n    }\n  }, [selected]);\n  return (\n    <>\n      <tr\n        className={`order ${selected ? \"selected\" : \"\"}`}\n        onClick={(e) => {\n          if (\n            e.nativeEvent.path.includes(actionsRef.current) ||\n            e.nativeEvent.path.includes(checkRef.current) ||\n            batch.length > 0\n          ) {\n          } else {\n            onClick?.(order._id);\n          }\n        }}\n      >\n        {\n          //   <td className=\"checkContainer\" ref={checkRef}>\n          //   <Checkbox\n          //     defaultValue={selected}\n          //     value={selected}\n          //     onChange={(e) => {\n          //       setSelected(e);\n          //     }}\n          //   />\n          // </td>\n        }\n        <td>{order._id}</td>\n        <td className=\"date\">\n          <Moment format=\"DD MMM YYYY\">{order.createdAt}</Moment>\n        </td>\n        {\n          //   <td>\n          //   <User user={order.seller} />\n          // </td>\n          // <td>{order.products.reduce((a, c) => a + c.qty, 0)}</td>\n          // <td>{order.refundable || \"N/A\"}</td>\n          // <td>{order.milestones.length || \"N/A\"}</td>\n        }\n        <td>₹{order.total}</td>\n        <td>{order.status}</td>\n        <td ref={actionsRef}>\n          {batch.length === 0 && (\n            <Actions icon={<Chev_down_svg />}>\n              <Link to={`${history.location.pathname}/${order._id}`}>\n                View Detail\n              </Link>\n              {order.status === \"pending\" && (\n                <Link\n                  to=\"#\"\n                  onClick={(e) => {\n                    Confirm({\n                      label: \"Order Cancellation\",\n                      question: \"You sure want to cancel this order?\",\n                      callback: cancelOrder,\n                    });\n                  }}\n                >\n                  Cancel order\n                </Link>\n              )}\n              {order.status === \"approved\" && (\n                <Link\n                  to=\"#\"\n                  onClick={(e) => {\n                    Confirm({\n                      label: \"Order Cancellation\",\n                      question:\n                        \"You sure want to request cancellation for this order?\",\n                      callback: requestCancellation,\n                    });\n                  }}\n                >\n                  Request Cancellation\n                </Link>\n              )}\n            </Actions>\n          )}\n        </td>\n      </tr>\n      <Modal className=\"msg\" open={msg}>\n        {msg}\n      </Modal>\n    </>\n  );\n};\nexport const FullOrder = ({ history, match }) => {\n  const { userType } = useContext(SiteContext);\n  const [msg, setMsg] = useState(null);\n  const [order, setOrder] = useState(null);\n  const [milestoneForm, setMilestoneForm] = useState(false);\n  const [refundTill, setRefundTill] = useState(false);\n  const [issueRefund, setIssueRefund] = useState(false);\n  const milestoneTimeout = useRef();\n  const updateOrder = async (newData) => {\n    return fetch(\"/api/updateOrder\", {\n      method: \"PATCH\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify(newData),\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        if (data.code === \"ok\") {\n          return data.order;\n        } else {\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                <Err_svg />\n                <h4>Orders does not exist.</h4>\n              </div>\n            </>\n          );\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        setMsg(\n          <>\n            <button onClick={() => setMsg(null)}>Okay</button>\n            <div>\n              <Err_svg />\n              <h4>Could not update order. Make sure you're online.</h4>\n            </div>\n          </>\n        );\n      });\n  };\n  useEffect(() => {\n    fetch(`/api/singleOrder?_id=${match.params._id}`)\n      .then((res) => res.json())\n      .then((data) => {\n        if (data.code === \"ok\") {\n          setOrder(data.order);\n        } else {\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                <Err_svg />\n                <h4>Orders does not exist.</h4>\n              </div>\n            </>\n          );\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        setMsg(\n          <>\n            <button onClick={() => setMsg(null)}>Okay</button>\n            <div>\n              <Err_svg />\n              <h4>Could not get order. Make sure you're online.</h4>\n            </div>\n          </>\n        );\n      });\n  }, []);\n  useEffect(() => {\n    if (order?.status === \"delivered\" && order?.refundable) {\n      let days = 0;\n      switch (order.refundable) {\n        case \"Upto 24 Hours After Delivery\":\n          days = 1;\n          break;\n        case \"Upto 7 Days After Delivery\":\n          days = 7;\n          break;\n        case \"Upto 15 Days After Delivery\":\n          days = 15;\n          break;\n        default:\n          return;\n      }\n      const refundTill = new Date(\n        new Date().getTime() + 1000 * 60 * 60 * 24 * days\n      );\n      if (new Date() < refundTill) {\n        setRefundTill(refundTill);\n      } else {\n        setRefundTill(null);\n      }\n    } else {\n      setRefundTill(null);\n    }\n  }, [order]);\n  if (order) {\n    const productPrice = order.products.reduce(\n      (a, c) =>\n        (a + calculatePrice({ product: c.product, gst: true }) * c.qty).fix(),\n      0\n    );\n    const couponCodeDiscount =\n      (order.coupon?.type === \"percent\" &&\n        Math.min(\n          (productPrice / 100) * order.coupon.amount,\n          order.coupon.maxDiscount\n        )) ||\n      (order.coupon?.type === \"flat\" && order.coupon?.amount) ||\n      0;\n    const fee = (\n      ((productPrice - couponCodeDiscount + order.shippingCost) / 100) *\n      order.fee\n    ).fix();\n    return (\n      <>\n        <div className=\"actions\">\n          <Link\n            to={`${\n              history.location.pathname.replace(\"/\" + match.params._id, \"\")\n                ? history.location.pathname.replace(\"/\" + match.params._id, \"\")\n                : userType === \"seller\"\n                ? \"/account/orders\"\n                : \"/account/orders/current\"\n            }`}\n            className=\"back\"\n          >\n            <Arrow_left_svg />\n            Back\n          </Link>\n          {refundTill && (\n            <button onClick={() => setIssueRefund(true)}>Issue refund</button>\n          )}\n        </div>\n        <div className=\"singleOrder\">\n          <div className=\"summery\">\n            <h3>Order Summery</h3>\n            <ul>\n              <li>\n                <label>Seller</label>\n                <User user={order.seller} />\n              </li>\n              <li>\n                <label>Order ID</label>\n                {order._id}\n              </li>\n              <li>\n                <label>Status</label>\n                {order.status}\n              </li>\n              <li>\n                <label>Order placed</label>\n                <Moment format=\"DD MMM YYYY, hh:mma\">{order.createdAt}</Moment>\n              </li>\n              {order.status === \"delivered\" && (\n                <li>\n                  <label>Delivered at</label>\n                  <Moment format=\"DD MMM YYYY, hh:mm a\">\n                    {order.deliveredAt}\n                  </Moment>\n                </li>\n              )}\n              <li>\n                <label>Refundable</label>\n                {order.refundable || \"N/A\"}\n              </li>\n              {refundTill && (\n                <li>\n                  <label>Refund till</label>\n                  <Moment format=\"DD MMM YYYY, hh:mm a\">{refundTill}</Moment>\n                </li>\n              )}\n              <li></li>\n              <li className=\"devide\">\n                <label>Delivery Address</label>\n                <span />\n              </li>\n              <>\n                {Object.entries(order.deliveryDetail).map(([key, value], i) =>\n                  key === \"deliveryTime\" ? (\n                    <li key={i}>\n                      <label>Delivery date</label>\n                      {order.deliveryDetail.deliveryTime ? (\n                        <Moment format=\"DD MMM, YYYY hh:mma\">\n                          {order.deliveryDetail.deliveryTime}\n                        </Moment>\n                      ) : (\n                        \"N/A\"\n                      )}\n                    </li>\n                  ) : (\n                    <li key={i}>\n                      <label>{key}</label>\n                      {value}\n                    </li>\n                  )\n                )}\n              </>\n            </ul>\n          </div>\n          <div className=\"products\">\n            <h3>Products</h3>\n            <ul>\n              {order.products.map(({ product, qty }, i) => (\n                <li key={i}>\n                  <Img src={product.images[0] || \"/open_box.png\"} />\n                  <div className=\"detail\">\n                    <p>{product.name}</p>\n                    <p className=\"qty\">QTY: {qty}</p>\n                  </div>\n                  <div className=\"price\">\n                    <span>\n                      {calculatePrice({ product, gst: true })} x {qty}\n                    </span>\n                    ₹{calculatePrice({ product, gst: true }) * qty}\n                  </div>\n                </li>\n              ))}\n            </ul>\n            <div className=\"total\">\n              <div className=\"data\">\n                <label>Total</label>₹{productPrice}\n              </div>\n              {order.coupon && (\n                <>\n                  <div className=\"data\">\n                    <label>\n                      Coupon Code {order.coupon.code}\n                      <br />\n                      Discount{\" \"}\n                      {order.coupon.type === \"percent\" ? (\n                        <>\n                          {order.coupon.amount}% (Upto ₹\n                          {order.coupon.maxDiscount})\n                        </>\n                      ) : (\n                        <>flat</>\n                      )}\n                    </label>\n                    <span>₹{couponCodeDiscount}</span>\n                  </div>\n                </>\n              )}\n              <div className=\"data\">\n                <label>Shipping</label>₹{order.shippingCost || \"N/A\"}\n              </div>\n              <hr />\n              <div className=\"data\">\n                <label>Delivery Pay fee {order.fee}%</label>₹{fee}\n              </div>\n              <hr />\n              <div className=\"data\">\n                <label>Grand Total</label>₹{order.total}\n              </div>\n            </div>\n          </div>\n          <div className=\"milestones\">\n            <h3>\n              Milestones\n              {\n                //   (order.status === \"approved\" ||\n                //   order.status === \"shipped\" ||\n                //   order.status === \"delivered\") && (\n                //   <button onClick={() => setMilestoneForm(true)}>\n                //     Create Milestone\n                //   </button>\n                // )\n              }\n            </h3>\n            <p className=\"subtitle\">Click to view milestone detail.</p>\n            {\n              //   {order.status == \"pending\" ? (\n              //   <p>You can create milestones after seller accepts your order.</p>\n              // ) : (\n            }\n            <table cellSpacing={0} cellPadding={0}>\n              <thead>\n                <tr>\n                  <td>Date</td>\n                  <td>Descrption</td>\n                  <td>Amount</td>\n                  <td>Status</td>\n                </tr>\n              </thead>\n              <tbody>\n                {order.milestones.map((milestone) => (\n                  <tr\n                    key={milestone._id}\n                    onClick={() =>\n                      history.push(`/account/hold?q=${milestone._id}`)\n                    }\n                  >\n                    <td>\n                      <Moment format=\"DD MMM YYYY, hh:mma\">\n                        {milestone.createdAt}\n                      </Moment>\n                    </td>\n                    <td>{milestone.dscr}</td>\n                    <td>₹{milestone.amount}</td>\n                    <td>{milestone.status}</td>\n                  </tr>\n                ))}\n                {order.milestones.length === 0 && (\n                  <tr className=\"placeholdert\">\n                    <td>Nothing yet.</td>\n                  </tr>\n                )}\n              </tbody>\n            </table>\n            {\n              // )}\n            }\n          </div>\n          <div className=\"delivery\">\n            <h3>Proof of delivery</h3>\n            {order.files?.length > 0 ? (\n              <div className=\"thumbs\">\n                <Media links={order.files} />\n              </div>\n            ) : (\n              <>No files added.</>\n            )}\n          </div>\n          <section className=\"terms\">\n            <h3>Return Policy Terms</h3>\n            <ul>\n              {order.terms?.map((item, i) => (\n                <li key={i}>{item}</li>\n              ))}\n              {!order.terms?.length && (\n                <li>No terms has been set by the seller yet.</li>\n              )}\n            </ul>\n          </section>\n        </div>\n        <Modal\n          head={true}\n          label=\"Create Milestone\"\n          setOpen={setMilestoneForm}\n          className=\"milestoneRequest\"\n          open={milestoneForm}\n        >\n          <MilestoneForm\n            action=\"create\"\n            definedAmount={order.total}\n            client={order.seller}\n            order={order._id}\n            onSuccess={(milestone) => {\n              setMilestoneForm(false);\n              setMsg(\n                <>\n                  <button onClick={() => setMsg(null)}>Okay</button>\n                  <div>\n                    <Succ_svg />\n                    <h4 className=\"amount\">₹{milestone?.amount}</h4>\n                    <h4>Milestone has been created</h4>\n                  </div>\n                  <Link to=\"/account/hold\" onClick={() => setMsg(null)}>\n                    Check your Delivery pay Hold\n                  </Link>\n                </>\n              );\n              setOrder((prev) => ({\n                ...prev,\n                milestones: [...prev.milestones, milestone],\n              }));\n            }}\n          />\n        </Modal>\n        <Modal\n          open={issueRefund}\n          head={true}\n          label=\"Issue Refund\"\n          setOpen={setIssueRefund}\n          className=\"issueRefund\"\n        >\n          <RefundForm\n            order={order}\n            onSuccess={(refund) => {\n              setIssueRefund(false);\n              setOrder((prev) => ({ ...prev, status: \"refundPending\" }));\n              setMsg(\n                <>\n                  <button onClick={() => setMsg(null)}>Okay</button>\n                  <div>\n                    <Succ_svg />\n                    <h4>Refund has been issued.</h4>\n                  </div>\n                </>\n              );\n            }}\n          />\n        </Modal>\n        <Modal className=\"msg\" open={msg}>\n          {msg}\n        </Modal>\n      </>\n    );\n  }\n  return <>Loading</>;\n};\n\nconst RefundForm = ({ order, onSuccess }) => {\n  const [msg, setMsg] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [issue, setIssue] = useState(\"\");\n  const [dscr, setDscr] = useState(\"\");\n  const [files, setFiles] = useState([]);\n  const submit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    const fileLinks = files.length ? await UploadFiles({ files, setMsg }) : [];\n    fetch(\"/api/issueRefund\", {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ order: order._id, issue, dscr, files: fileLinks }),\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        setLoading(false);\n        if (data.code === \"ok\") {\n          onSuccess?.(data.refund);\n        } else {\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                <Err_svg />\n                <h4>Refund could not be issued. Try again.</h4>\n              </div>\n            </>\n          );\n        }\n      })\n      .catch((err) => {\n        setLoading(false);\n        console.log(err);\n        setMsg(\n          <>\n            <button onClick={() => setMsg(null)}>Okay</button>\n            <div>\n              <Err_svg />\n              <h4>Refund could not be issued. Make sure you're online.</h4>\n            </div>\n          </>\n        );\n      });\n  };\n  return (\n    <>\n      <form onSubmit={submit}>\n        <section>\n          <label>Issue</label>\n          <input\n            type=\"text\"\n            required={true}\n            value={issue}\n            onChange={(e) => setIssue(e.target.value)}\n          />\n        </section>\n        <section>\n          <label>Descrption</label>\n          <TextareaAutosize\n            required={true}\n            value={dscr}\n            onChange={(e) => setDscr(e.target.value)}\n          />\n        </section>\n        <section className=\"images\">\n          <label>Upload relevant files</label>\n          <FileInput\n            accept=\"image/*, video/*, audio/*\"\n            multiple={true}\n            onChange={(files) => setFiles(files)}\n          />\n        </section>\n        <section className=\"btns\">\n          <button className=\"submit\">Submit</button>\n        </section>\n      </form>\n      {loading && (\n        <div className=\"spinnerContainer\">\n          <div className=\"spinner\" />\n        </div>\n      )}\n      <Modal className=\"msg\" open={msg}>\n        {msg}\n      </Modal>\n    </>\n  );\n};\n\nconst Refunds = ({ history, location }) => {\n  const { userType } = useContext(SiteContext);\n  const [total, setTotal] = useState(0);\n  const [page, setPage] = useState(1);\n  const [perPage, setPerPage] = useState(20);\n  const [search, setSearch] = useState(\"\");\n  const [status, setStatus] = useState(\"\");\n  const [sort, setSort] = useState({\n    column: \"createdAt\",\n    order: \"dsc\",\n  });\n  const [dateRange, setDateRange] = useState(null);\n  const [refunds, setRefunds] = useState([]);\n  const [selectAll, setSelectAll] = useState(false);\n  const [batch, setBatch] = useState([]);\n  const [msg, setMsg] = useState(null);\n  useEffect(() => {\n    const startDate = moment({\n      time: dateRange?.startDate,\n      format: \"YYYY-MM-DD\",\n    });\n    const endDate = moment({\n      time: new Date(dateRange?.endDate)?.setHours(24, 0, 0, 0),\n      format: \"YYYY-MM-DD\",\n    });\n    fetch(\n      `/api/getRefunds?${new URLSearchParams({\n        user: userType,\n        ...(search && { q: search }),\n        page,\n        perPage,\n        sort: sort.column,\n        order: sort.order,\n        ...(dateRange && {\n          dateFrom: startDate,\n          dateTo: endDate,\n        }),\n        ...(status && { status }),\n      })}`\n    )\n      .then((res) => res.json())\n      .then((data) => {\n        if (data.code === \"ok\") {\n          setRefunds(data.refunds);\n          setTotal(data.total);\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        setMsg(\n          <>\n            <button onClick={() => setMsg(null)}>Okay</button>\n            <div>\n              <Err_svg />\n              <h4>Could not get orders.</h4>\n            </div>\n          </>\n        );\n      });\n  }, [search, page, perPage, dateRange, status]);\n  useEffect(() => {\n    if (selectAll) {\n    } else {\n      setBatch([]);\n    }\n  }, [selectAll]);\n  useEffect(() => {\n    if (batch.length === 0) {\n      setSelectAll(false);\n    }\n  }, [batch]);\n  return (\n    <>\n      <div className=\"benner\">\n        <p>My Refunds</p>\n      </div>\n      <div className=\"filters\">\n        <section>\n          <label>Total:</label>\n          {total}\n        </section>\n        <section>\n          <label>Per Page:</label>\n          <Combobox\n            defaultValue={0}\n            options={[\n              { label: \"20\", value: 20 },\n              { label: \"30\", value: 30 },\n              { label: \"50\", value: 50 },\n            ]}\n            onChange={(e) => setPerPage(e.value)}\n          />\n        </section>\n        <section className=\"search\">\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            width=\"23\"\n            height=\"23\"\n            viewBox=\"0 0 23 23\"\n          >\n            <path\n              id=\"Icon_ionic-ios-search\"\n              data-name=\"Icon ionic-ios-search\"\n              d=\"M27.23,25.828l-6.4-6.455a9.116,9.116,0,1,0-1.384,1.4L25.8,27.188a.985.985,0,0,0,1.39.036A.99.99,0,0,0,27.23,25.828ZM13.67,20.852a7.2,7.2,0,1,1,5.091-2.108A7.155,7.155,0,0,1,13.67,20.852Z\"\n              transform=\"translate(-4.5 -4.493)\"\n              fill=\"#707070\"\n              opacity=\"0.74\"\n            />\n          </svg>\n          <input\n            value={search}\n            onChange={(e) => setSearch(e.target.value)}\n            placeholder=\"Search for Seller\"\n          />\n          {search && (\n            <button onClick={() => setSearch(\"\")}>\n              <X_svg />\n            </button>\n          )}\n        </section>\n        <section className=\"category\">\n          <label>Status:</label>\n          <Combobox\n            defaultValue={0}\n            options={[\n              { label: \"All\", value: \"\" },\n              { label: \"Pending\", value: \"pending\" },\n              { label: \"Approved\", value: \"approved\" },\n              { label: \"Product Sent\", value: \"productSent\" },\n              { label: \"Product Recieved\", value: \"productRecieved\" },\n              { label: \"Resolved\", value: \"resolved\" },\n            ]}\n            onChange={(e) => setStatus(e.value)}\n          />\n        </section>\n        <section className={`date`}>\n          <InputDateRange\n            dateRange={dateRange}\n            onChange={(range) => setDateRange(range)}\n          />\n        </section>\n      </div>\n      {batch.length > 0 && (\n        <div className=\"batchAction\">\n          <button onClick={() => console.log(\"batch delete\")}>Delete</button>\n        </div>\n      )}\n      <table className=\"table refunds\">\n        <thead>\n          <tr>\n            {\n              //   <th className=\"checkContainer\">\n              //   <Checkbox\n              //     value={selectAll}\n              //     defaultValue={selectAll}\n              //     onChange={(e) => setSelectAll(e)}\n              //   />\n              // </th>\n            }\n            <th className=\"date\">Date</th>\n            <th>Seller</th>\n            <th>QTY</th>\n            <th>Status</th>\n            <th>Total Price</th>\n            {\n              // <th>Actions</th>\n            }\n          </tr>\n        </thead>\n        <tbody>\n          {refunds.map((refund) => (\n            <SingleRefund\n              key={refund._id}\n              refund={refund}\n              setRefunds={setRefunds}\n              selectAll={selectAll}\n              setBatch={setBatch}\n              batch={batch}\n            />\n          ))}\n          {refunds.length === 0 && (\n            <tr className=\"placeholder\">\n              <td>No product yet.</td>\n            </tr>\n          )}\n        </tbody>\n      </table>\n      <Pagination\n        total={total}\n        btns={5}\n        currentPage={page}\n        perPage={perPage}\n        setPage={setPage}\n      />\n      <Modal className=\"msg\" open={msg}>\n        {msg}\n      </Modal>\n    </>\n  );\n};\nconst SingleRefund = ({ refund, setRefunds, selectAll, setBatch, batch }) => {\n  const history = useHistory();\n  const { user } = useContext(SiteContext);\n  const [selected, setSelected] = useState(selectAll || false);\n  const [edit, setEdit] = useState(false);\n  const [msg, setMsg] = useState(false);\n  useEffect(() => {\n    setSelected(selectAll);\n  }, [selectAll]);\n  useEffect(() => {\n    if (selected) {\n      setBatch((prev) => [...prev, refund._id]);\n    } else {\n      setBatch((prev) => prev.filter((item) => item !== refund._id));\n    }\n  }, [selected]);\n  return (\n    <>\n      <tr\n        className={`refund ${selected ? \"selected\" : \"\"}`}\n        onClick={() =>\n          history.push(`/account/myShopping/refunds/${refund._id}`)\n        }\n      >\n        {\n          //   <td className=\"checkContainer\">\n          //   <Checkbox\n          //     defaultValue={selected}\n          //     value={selected}\n          //     onChange={(e) => {\n          //       setSelected(e);\n          //     }}\n          //   />\n          // </td>\n        }\n        <td className=\"date\">\n          <Moment format=\"DD MMM YYYY, hh:mm a\">{refund.createdAt}</Moment>\n        </td>\n        <td>\n          <User user={refund.seller} />\n        </td>\n        <td>{refund.order?.products.reduce((a, c) => a + c.qty, 0)}</td>\n        <td>{refund.status}</td>\n        <td>₹{refund.order.total}</td>\n        {\n          //   <td>\n          //   {batch.length === 0 && (\n          //     <Actions icon={<Chev_down_svg />}>\n          //       <Link to=\"#\" className=\"edit\" onClick={() => setEdit(true)}>\n          //         Edit\n          //       </Link>\n          //       <Link\n          //         to=\"#\"\n          //         className=\"delete\"\n          //         onClick={() =>\n          //           Confirm({\n          //             label: \"Removing Product\",\n          //             question: \"You sure want to delete this product?\",\n          //             callback: removeProduct,\n          //           })\n          //         }\n          //       >\n          //         Delete\n          //       </Link>\n          //     </Actions>\n          //   )}\n          // </td>\n        }\n      </tr>\n      <Modal className=\"msg\" open={msg}>\n        {msg}\n      </Modal>\n    </>\n  );\n};\nconst FullRefund = ({ history, match }) => {\n  const { userType } = useContext(SiteContext);\n  const [msg, setMsg] = useState(null);\n  const [refund, setRefund] = useState(null);\n  const [order, setOrder] = useState(null);\n  const [milestoneForm, setMilestoneForm] = useState(false);\n  const [refundTill, setRefundTill] = useState(false);\n  const milestoneTimeout = useRef();\n  const updateRefund = async (newData) => {\n    return fetch(\"/api/updateRefund\", {\n      method: \"PATCH\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ ...newData, _id: refund._id }),\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        if (data.code === \"ok\") {\n          return data.order;\n        } else {\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                <Err_svg />\n                <h4>Refund request does not exist.</h4>\n              </div>\n            </>\n          );\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        setMsg(\n          <>\n            <button onClick={() => setMsg(null)}>Okay</button>\n            <div>\n              <Err_svg />\n              <h4>Could not update refund. Make sure you're online.</h4>\n            </div>\n          </>\n        );\n      });\n  };\n  useEffect(() => {\n    fetch(`/api/singleRefund?_id=${match.params._id}`)\n      .then((res) => res.json())\n      .then((data) => {\n        if (data.code === \"ok\") {\n          setOrder(data.refund.order);\n          setRefund(data.refund);\n        } else {\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                <Err_svg />\n                <h4>Refund does not exist.</h4>\n              </div>\n            </>\n          );\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        setMsg(\n          <>\n            <button onClick={() => setMsg(null)}>Okay</button>\n            <div>\n              <Err_svg />\n              <h4>Could not get Refund. Make sure you're online.</h4>\n            </div>\n          </>\n        );\n      });\n  }, []);\n  useEffect(() => {\n    if (order?.refundable) {\n      let days = 0;\n      switch (order.refundable) {\n        case \"Upto 24 Hours After Delivery\":\n          days = 1;\n          break;\n        case \"Upto 7 Days After Delivery\":\n          days = 7;\n          break;\n        case \"Upto 15 Days After Delivery\":\n          days = 15;\n          break;\n        default:\n          return;\n      }\n      const refundTill = new Date(\n        new Date().getTime() + 1000 * 60 * 60 * 24 * days\n      );\n      if (new Date() < refundTill) {\n        setRefundTill(refundTill);\n      } else {\n        setRefundTill(null);\n      }\n    } else {\n      setRefundTill(null);\n    }\n  }, [refund]);\n  if (refund) {\n    return (\n      <>\n        <div className=\"actions\">\n          <Link\n            to={`/account/${\n              userType === \"seller\" ? \"myShop\" : \"myShopping\"\n            }/refunds`}\n            className=\"back\"\n          >\n            <Arrow_left_svg />\n            Back\n          </Link>\n          {refund.status === \"approved\" && (\n            <button\n              onClick={() =>\n                Confirm({\n                  label: \"Product Shipped\",\n                  question: \"Did you sent the product to seller?\",\n                  callback: () => {\n                    updateRefund({ status: \"productSent\" }).then((refund) => {\n                      setRefund((prev) => ({ ...prev, status: \"productSent\" }));\n                    });\n                  },\n                })\n              }\n            >\n              Product Sent\n            </button>\n          )}\n          {refund.status === \"productRecieved\" && (\n            <button\n              onClick={() =>\n                Confirm({\n                  label: \"Refund Resolved\",\n                  question: \"You sure want to mark this refund resolved?\",\n                  callback: () => {\n                    updateRefund({ status: \"resolved\" }).then((refund) => {\n                      setRefund((prev) => ({ ...prev, status: \"resolved\" }));\n                    });\n                  },\n                })\n              }\n            >\n              Mark as Resolved\n            </button>\n          )}\n        </div>\n        <div className=\"singleOrder\">\n          <div className=\"summery\">\n            <h3>Summery</h3>\n            <ul>\n              <li className=\"devide\">\n                <label>Order</label>\n                <span />\n              </li>\n              <li>\n                <label>Seller</label>\n                <User user={order.seller} />\n              </li>\n              <li>\n                <label>Order ID</label>\n                {order._id}\n              </li>\n              <li>\n                <label>Status</label>\n                {order.status}\n              </li>\n              <li>\n                <label>Ordered at</label>\n                <Moment format=\"DD MMM YYYY, hh:mma\">{order.createdAt}</Moment>\n              </li>\n              <li>\n                <label>Delivered at</label>\n                <Moment format=\"DD MMM YYYY, hh:mm a\">\n                  {order.deliveredAt}\n                </Moment>\n              </li>\n              <li>\n                <label>Proof of delivery</label>\n                {order.files?.length > 0 ? (\n                  <div className=\"thumbs\">\n                    <Media links={order.files} />\n                  </div>\n                ) : (\n                  <>No files added.</>\n                )}\n              </li>\n              <li>\n                <label>Refundable</label>\n                {order.refundable || \"N/A\"}\n              </li>\n              {refundTill && (\n                <li>\n                  <label>Refund till</label>\n                  <Moment format=\"DD MMM YYYY, hh:mm a\">{refundTill}</Moment>\n                </li>\n              )}\n              <li></li>\n              <li className=\"devide\">\n                <label>Refund</label>\n                <span />\n              </li>\n              <li>\n                <label>Refund ID</label>\n                {refund._id}\n              </li>\n              <li>\n                <label>Status</label>\n                {refund.status}\n              </li>\n              <li>\n                <label>Submitted at</label>\n                <Moment format=\"DD MMM YYYY, hh:mma\">{refund.createdAt}</Moment>\n              </li>\n              <li>\n                <label>Issue</label>\n                {refund.issue}\n              </li>\n              <li>\n                <label>Descrption</label>\n                {refund.dscr}\n              </li>\n              <li>\n                <label>Images</label>\n                <div className=\"thumbs\">\n                  {refund.files.length ? (\n                    <Media links={refund.files} />\n                  ) : (\n                    <>No Images has been provided.</>\n                  )}\n                </div>\n              </li>\n              <li></li>\n              <li className=\"devide\">\n                <label>Delivery Address</label>\n                <span />\n              </li>\n              <>\n                {Object.entries(order.deliveryDetail).map(([key, value], i) =>\n                  key === \"deliveryTime\" ? (\n                    <li key={i}>\n                      <label>Delivery date</label>\n                      {order.deliveryDetail.deliveryTime ? (\n                        <Moment format=\"DD MMM, YYYY hh:mma\">\n                          {order.deliveryDetail.deliveryTime}\n                        </Moment>\n                      ) : (\n                        \"N/A\"\n                      )}\n                    </li>\n                  ) : (\n                    <li key={i}>\n                      <label>{key}</label>\n                      {value}\n                    </li>\n                  )\n                )}\n              </>\n            </ul>\n          </div>\n          <div className=\"products\">\n            <h3>Products</h3>\n            <ul>\n              {order.products.map(({ product, qty }, i) => (\n                <li key={i}>\n                  <Img src={product.images[0] || \"/open_box.png\"} />\n                  <div className=\"detail\">\n                    <p>{product.name}</p>\n                    <p className=\"qty\">QTY: {qty}</p>\n                  </div>\n                  <div className=\"price\">\n                    <span>\n                      {calculatePrice({ product, gst: true })} x {qty}\n                    </span>\n                    ₹{calculatePrice({ product, gst: true }) * qty}\n                  </div>\n                </li>\n              ))}\n            </ul>\n            <div className=\"total\">\n              <div className=\"data\">\n                <label>Total</label>₹{order.total - order.shippingCost}\n              </div>\n              {\n                //   <div className=\"data\">\n                //   <label>Shipping</label>\n                //   {order.shippingCost || \"N/A\"}\n                // </div>\n                // <div className=\"data\">\n                // <label>Grand Total</label>₹\n                // {order.products.reduce(\n                //   (a, c) =>\n                //   a +\n                //   calculatePrice({ product: c.product, gst: true }) * c.qty,\n                //   0\n                // ) + (+order.shippingCost || 0)}\n                // </div>\n              }\n            </div>\n          </div>\n          <div className=\"milestones\">\n            <h3>\n              Milestones\n              {(refund.status === \"approved\" ||\n                refund.status === \"shipped\" ||\n                refund.status === \"delivered\") && (\n                <button onClick={() => setMilestoneForm(true)}>\n                  Request Milestone\n                </button>\n              )}\n            </h3>\n            {refund.status == \"pending\" ? (\n              <p>You can create milestones after seller accepts your order.</p>\n            ) : (\n              <table cellSpacing={0} cellPadding={0}>\n                <thead>\n                  <tr>\n                    <td>Date</td>\n                    <td>Descrption</td>\n                    <td>Amount</td>\n                    <td>Status</td>\n                  </tr>\n                </thead>\n                <tbody>\n                  {refund.milestones.map((milestone) => (\n                    <tr\n                      key={milestone._id}\n                      onClick={() =>\n                        history.push(`/account/hold?q=${milestone._id}`)\n                      }\n                    >\n                      <td>\n                        <Moment format=\"DD MMM YYYY, hh:mma\">\n                          {milestone.createdAt}\n                        </Moment>\n                      </td>\n                      <td>{milestone.dscr}</td>\n                      <td>₹{milestone.amount}</td>\n                      <td>{milestone.status}</td>\n                    </tr>\n                  ))}\n                  {refund.milestones.length === 0 && (\n                    <tr className=\"placeholdert\">\n                      <td>Nothing yet.</td>\n                    </tr>\n                  )}\n                </tbody>\n              </table>\n            )}\n          </div>\n          <section className=\"terms\">\n            <h3>Return Policy Terms</h3>\n            <ul>\n              {order.terms?.map((item, i) => (\n                <li key={i}>{item}</li>\n              ))}\n              {!order.terms?.length && (\n                <li>No terms has been set by the seller yet.</li>\n              )}\n            </ul>\n          </section>\n        </div>\n        <Modal\n          head={true}\n          label=\"Request Milestone\"\n          setOpen={setMilestoneForm}\n          className=\"milestoneRequest\"\n          open={milestoneForm}\n        >\n          <MilestoneForm\n            action=\"request\"\n            definedAmount={order.total - order.shippingCost}\n            client={order.seller}\n            refund={refund._id}\n            onSuccess={(milestone) => {\n              setMilestoneForm(false);\n              setMsg(\n                <>\n                  <button onClick={() => setMsg(null)}>Okay</button>\n                  <div>\n                    <Succ_svg />\n                    <h4 className=\"amount\">₹{milestone?.amount}</h4>\n                    <h4>Milestone has been requested</h4>\n                  </div>\n                  <Link to=\"/account/hold\" onClick={() => setMsg(null)}>\n                    Check your Delivery pay Hold\n                  </Link>\n                </>\n              );\n              setRefund((prev) => ({\n                ...prev,\n                milestones: [...prev.milestones, milestone],\n              }));\n            }}\n          />\n        </Modal>\n        <Modal className=\"msg\" open={msg}>\n          {msg}\n        </Modal>\n      </>\n    );\n  }\n  return <>Loading</>;\n};\n\nexport const Disputes = ({ status }) => {\n  const [total, setTotal] = useState(0);\n  const [page, setPage] = useState(1);\n  const [perPage, setPerPage] = useState(20);\n  const [search, setSearch] = useState(\"\");\n  const [sort, setSort] = useState({\n    column: \"createdAt\",\n    order: \"dsc\",\n  });\n  const [disputes, setDisputes] = useState([]);\n  const [selectAll, setSelectAll] = useState(false);\n  const [batch, setBatch] = useState([]);\n  const [msg, setMsg] = useState(null);\n  useEffect(() => {\n    fetch(\n      `/api/getDisputes?${new URLSearchParams({\n        ...(search && { q: search }),\n        page,\n        perPage,\n        sort: sort.column,\n        order: sort.order,\n        ...(status && { status }),\n      })}`\n    )\n      .then((res) => res.json())\n      .then((data) => {\n        if (data.code === \"ok\") {\n          setDisputes(data.disputes);\n          setTotal(data.total);\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        setMsg(\n          <>\n            <button onClick={() => setMsg(null)}>Okay</button>\n            <div>\n              <Err_svg />\n              <h4>Could not get orders.</h4>\n            </div>\n          </>\n        );\n      });\n  }, [search, page, perPage, status]);\n  useEffect(() => {\n    if (selectAll) {\n    } else {\n      setBatch([]);\n    }\n  }, [selectAll]);\n  useEffect(() => {\n    if (batch.length === 0) {\n      setSelectAll(false);\n    }\n  }, [batch]);\n  return (\n    <div className=\"productContainer\">\n      {\n        <div className=\"benner\">\n          <p>My Disputes</p>\n        </div>\n      }\n      {\n        //   <div className=\"filters\">\n        //   <section>\n        //     <label>Total:</label>\n        //     {total}\n        //   </section>\n        //   <section>\n        //     <label>Per Page:</label>\n        //     <Combobox\n        //       defaultValue={0}\n        //       options={[\n        //         { label: \"20\", value: 20 },\n        //         { label: \"30\", value: 30 },\n        //         { label: \"50\", value: 50 },\n        //       ]}\n        //       onChange={(e) => setPerPage(e.value)}\n        //     />\n        //   </section>\n        //   <section className=\"search\">\n        //     <svg\n        //       xmlns=\"http://www.w3.org/2000/svg\"\n        //       width=\"23\"\n        //       height=\"23\"\n        //       viewBox=\"0 0 23 23\"\n        //     >\n        //       <path\n        //         id=\"Icon_ionic-ios-search\"\n        //         data-name=\"Icon ionic-ios-search\"\n        //         d=\"M27.23,25.828l-6.4-6.455a9.116,9.116,0,1,0-1.384,1.4L25.8,27.188a.985.985,0,0,0,1.39.036A.99.99,0,0,0,27.23,25.828ZM13.67,20.852a7.2,7.2,0,1,1,5.091-2.108A7.155,7.155,0,0,1,13.67,20.852Z\"\n        //         transform=\"translate(-4.5 -4.493)\"\n        //         fill=\"#707070\"\n        //         opacity=\"0.74\"\n        //       />\n        //     </svg>\n        //     <input\n        //       value={search}\n        //       onChange={(e) => setSearch(e.target.value)}\n        //       placeholder=\"Search for Seller\"\n        //     />\n        //     {search && (\n        //       <button onClick={() => setSearch(\"\")}>\n        //         <X_svg />\n        //       </button>\n        //     )}\n        //   </section>\n        //   <section className=\"category\">\n        //     <label>Type:</label>\n        //     <Combobox\n        //       defaultValue={0}\n        //       options={[\n        //         { label: \"All\", value: \"\" },\n        //         { label: \"Product\", value: \"product\" },\n        //         { label: \"Service\", value: \"service\" },\n        //         { label: \"Other\", value: \"other\" },\n        //       ]}\n        //       onChange={(e) => setType(e.value)}\n        //     />\n        //   </section>\n        //   <section\n        //     className={`date ${dateFilter ? \"open\" : \"\"}`}\n        //     ref={dateFilterRef}\n        //     onClick={() => setDateOpen(true)}\n        //   >\n        //     <svg\n        //       xmlns=\"http://www.w3.org/2000/svg\"\n        //       width=\"30.971\"\n        //       height=\"30.971\"\n        //       viewBox=\"0 0 30.971 30.971\"\n        //     >\n        //       <path\n        //         id=\"Path_299\"\n        //         data-name=\"Path 299\"\n        //         d=\"M3.992,2.42H6.775V.968a.968.968,0,1,1,1.936,0V2.42H22.26V.968a.968.968,0,1,1,1.936,0V2.42h2.783a4,4,0,0,1,3.992,3.992V26.978a4,4,0,0,1-3.992,3.992H3.992A4,4,0,0,1,0,26.978V6.412A4,4,0,0,1,3.992,2.42ZM26.978,4.355H24.2v.968a.968.968,0,1,1-1.936,0V4.355H8.71v.968a.968.968,0,1,1-1.936,0V4.355H3.992A2.059,2.059,0,0,0,1.936,6.412v2.3h27.1v-2.3A2.059,2.059,0,0,0,26.978,4.355ZM3.992,29.035H26.978a2.059,2.059,0,0,0,2.057-2.057V10.646H1.936V26.978A2.059,2.059,0,0,0,3.992,29.035Z\"\n        //         fill=\"#336cf9\"\n        //       />\n        //     </svg>\n        //     {dateFilter && (\n        //       <>\n        //         <div className=\"dates\">\n        //           <p>\n        //             From:{\" \"}\n        //             <Moment format=\"DD MMM, YYYY\">{dateRange.startDate}</Moment>\n        //           </p>\n        //           <p>\n        //             To: <Moment format=\"DD MMM, YYYY\">{dateRange.endDate}</Moment>\n        //           </p>\n        //         </div>\n        //         <button\n        //           className=\"clearDateFilter\"\n        //           onClick={() => {\n        //             setDateRange({\n        //               startDate: new Date(),\n        //               endDate: new Date(),\n        //             });\n        //             setDateFilter(false);\n        //           }}\n        //         >\n        //           <X_svg />\n        //         </button>\n        //       </>\n        //     )}\n        //   </section>\n        // </div>\n      }\n      {batch.length > 0 && (\n        <div className=\"batchAction\">\n          <button onClick={() => console.log(\"batch delete\")}>Delete</button>\n        </div>\n      )}\n      <table className=\"table disuptes\">\n        <thead>\n          <tr>\n            <th className=\"date\">Raised at</th>\n            <th>User</th>\n            <th>Issue</th>\n            <th>Status</th>\n            <th>Actions</th>\n          </tr>\n        </thead>\n        <tbody>\n          {disputes.map((dispute) => (\n            <SingleDispute\n              key={dispute._id}\n              dispute={dispute}\n              setDisputes={setDisputes}\n            />\n          ))}\n          {disputes.length === 0 && (\n            <tr className=\"placeholder\">\n              <td>No Dispute yet.</td>\n            </tr>\n          )}\n        </tbody>\n      </table>\n      <Pagination\n        total={total}\n        btns={5}\n        currentPage={page}\n        perPage={perPage}\n        setPage={setPage}\n      />\n      <Modal className=\"msg\" open={msg}>\n        {msg}\n      </Modal>\n    </div>\n  );\n};\nconst SingleDispute = ({ dispute, setDisputes }) => {\n  const actionsRef = useRef();\n  const checkRef = useRef();\n  const history = useHistory();\n  const { user } = useContext(SiteContext);\n  const [edit, setEdit] = useState(false);\n  const [msg, setMsg] = useState(false);\n  const client = dispute.plaintiff._id === user._id ? \"defendant\" : \"plaintiff\";\n  return (\n    <>\n      <tr\n        className={`dispute`}\n        onClick={(e) => {\n          if (\n            e.nativeEvent.path.includes(actionsRef.current) ||\n            e.nativeEvent.path.includes(checkRef.current)\n          ) {\n          } else {\n            history.push(`${history.location.pathname}/${dispute._id}`);\n          }\n        }}\n      >\n        <td className=\"date\">\n          <Moment format=\"DD MMM YYYY\">{dispute.createdAt}</Moment>\n        </td>\n        <td>\n          <User user={dispute[client]} />\n        </td>\n        <td>{dispute.issue}</td>\n        <td>{dispute.status}</td>\n        <td ref={actionsRef}>\n          <Actions icon={<Chev_down_svg />}>\n            <Link to={`${history.location.pathname}/${dispute._id}`}>\n              View Detail\n            </Link>\n          </Actions>\n        </td>\n      </tr>\n      <Modal className=\"msg\" open={msg}>\n        {msg}\n      </Modal>\n    </>\n  );\n};\nexport const FullDispute = ({ history, location, match }) => {\n  const [data, setData] = useState(null);\n  const [msg, setMsg] = useState(null);\n  useEffect(() => {\n    fetch(`/api/singleDispute?_id=${match.params._id}`)\n      .then((res) => res.json())\n      .then((data) => {\n        if (data.code === \"ok\") {\n          setData(data.dispute);\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        setMsg(\n          <>\n            <button onClick={() => setMsg(null)}>Okay</button>\n            <div>\n              <Err_svg />\n              <h4>Could not get Dispute. Make sure you're online.</h4>\n            </div>\n          </>\n        );\n      });\n  }, []);\n  if (data) {\n    return (\n      <div className={`singleDispute ${data.status}`}>\n        <div className=\"disputeSummery\">\n          <div className=\"benner\">Dispute Summery</div>\n          <ul className=\"disputeDetail\">\n            <li>\n              <label>Dispute ID:</label>\n              <div className=\"data\">{data._id}</div>\n            </li>\n            <li>\n              <label>Status:</label>\n              <div className=\"data\">{data.status}</div>\n            </li>\n            <li>\n              <label>Issue:</label>\n              <div className=\"data\">{data.issue}</div>\n            </li>\n            <li>\n              <label>Issued by:</label>\n              <div className=\"data\">{data.plaintiff.role}</div>\n            </li>\n            <li>\n              <label>Dispute filed:</label>\n              <div className=\"data\">\n                <Moment format=\"hh:mm a, DD MMM, YYYY\">{data.createdAt}</Moment>\n              </div>\n            </li>\n            <li>\n              <label>Milestone amount:</label>\n              <div className=\"data\">₹ {data.milestone.amount}</div>\n            </li>\n            <li>\n              <label>Milestone description:</label>\n              <div className=\"data\">{data.milestone.dscr}</div>\n            </li>\n            <li>\n              <label>Milestone products:</label>\n              <div className=\"data\">\n                {data.milestone.products?.map((item, i) => (\n                  <li key={i}>{item.name}</li>\n                ))}\n                {data.milestone.products?.length ? null : \"No product selected\"}\n              </div>\n            </li>\n            <li>\n              <label>Milestone created:</label>\n              <div className=\"data\">\n                <Moment format=\"hh:mm a, DD MMM, YYYY\">\n                  {data.milestone.createdAt}\n                </Moment>\n              </div>\n            </li>\n          </ul>\n        </div>\n        <Case role=\"plaintiff\" dispute={data} setData={setData} />\n        <Case role=\"defendant\" dispute={data} setData={setData} />\n        <Modal open={msg} className=\"msg\">\n          {msg}\n        </Modal>\n      </div>\n    );\n  }\n  return (\n    <div className=\"singleDispute loading\">\n      <div className=\"disputeSummery\">\n        <div className=\"benner\">Dispute Summery</div>\n        <ul>\n          <li>\n            <div />\n            <div />\n          </li>\n          <li>\n            <div />\n            <div />\n          </li>\n          <li>\n            <div />\n            <div />\n          </li>\n        </ul>\n      </div>\n      <div className=\"plaintiff\">\n        <div className=\"benner\">Plaintiff</div>\n        <div className=\"user\">\n          <div className=\"img\" />\n          <div className=\"name\" />\n        </div>\n        <ul className=\"detail\">\n          <li>\n            <div />\n            <div />\n          </li>\n          <li>\n            <div />\n            <div />\n          </li>\n          <li>\n            <div />\n            <div />\n          </li>\n        </ul>\n      </div>\n      <div className=\"defendant\">\n        <div className=\"benner\">Defendant</div>\n        <div className=\"user\">\n          <div className=\"img\" />\n          <div className=\"name\" />\n        </div>\n        <ul className=\"detail\">\n          <li>\n            <div />\n            <div />\n          </li>\n          <li>\n            <div />\n            <div />\n          </li>\n          <li>\n            <div />\n            <div />\n          </li>\n        </ul>\n      </div>\n    </div>\n  );\n};\n\nconst Case = ({ role, dispute, setData }) => {\n  const [msg, setMsg] = useState(null);\n  const resolveDispute = (winner) => {\n    fetch(\"/api/resolveDispute\", {\n      method: \"PATCH\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({\n        _id: dispute._id,\n        winner,\n      }),\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        if (data.code === \"ok\") {\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                <Succ_svg />\n                <h4>Dispute Successfully resolved.</h4>\n              </div>\n            </>\n          );\n          setData((prev) => ({\n            ...prev,\n            winner: data.dispute.winner,\n            status: data.dispute.status,\n          }));\n        } else {\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                <Err_svg />\n                <h4>{data.message}</h4>\n              </div>\n            </>\n          );\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        setMsg(\n          <>\n            <button onClick={() => setMsg(null)}>Okay</button>\n            <div>\n              <Err_svg />\n              <h4>\n                Dispute Could not be resolved. Make sure you' a're online.\n              </h4>\n            </div>\n          </>\n        );\n      });\n  };\n  return (\n    <div\n      className={`${role} ${dispute[role].role} ${\n        dispute.winner === dispute[role]._id ? \"winner\" : \"\"\n      }`}\n    >\n      <div className=\"benner\">\n        {role}\n        {dispute.status === \"pendingVerdict\" && dispute.defendant.case?.dscr && (\n          <button\n            onClick={() =>\n              Confirm({\n                className: \"disputeResolveConfirm\",\n                label: \"Dispute resolve\",\n                question: (\n                  <>\n                    Are you sure{\" \"}\n                    <span className=\"name\">\n                      {dispute[role].firstName + \" \" + dispute[role].lastName}\n                    </span>{\" \"}\n                    <span className=\"role\">({role})</span> is the winner of this\n                    dispute?\n                  </>\n                ),\n                callback: () => resolveDispute(dispute[role]._id),\n              })\n            }\n          >\n            Winner\n          </button>\n        )}\n        {dispute.winner === dispute[role]._id && (\n          <p className=\"winnerTag\">Winner</p>\n        )}\n      </div>\n      <div className=\"content\">\n        <div className=\"user\">\n          <Img src={dispute[role].profileImg || \"/profile-user.jpg\"} />\n          <p className=\"name\">\n            {dispute[role].firstName + \" \" + dispute[role].lastName}\n            <span className=\"phone\">{dispute[role].phone}</span>\n          </p>\n        </div>\n        {dispute[role].case?.dscr ? (\n          <ul className=\"detail\">\n            <li>\n              <label>Role:</label> <div>{dispute[role].role}</div>\n            </li>\n            <li>\n              <label>Current Balance:</label>{\" \"}\n              <div>₹ {dispute[role].balance?.fix()}</div>\n            </li>\n            <li>\n              <label>Case:</label>{\" \"}\n              <div>{dispute[role].case?.dscr || \"N/A\"}</div>\n            </li>\n            <li>\n              <label>Evidence:</label>{\" \"}\n              <div className=\"thumbs\">\n                {dispute[role].case?.files?.length ? (\n                  <Media links={dispute[role].case?.files} />\n                ) : (\n                  \"N/A\"\n                )}\n              </div>\n            </li>\n          </ul>\n        ) : (\n          <p className=\"noRes\">Has not responded yet.</p>\n        )}\n      </div>\n      <Modal open={msg} className=\"msg\">\n        {msg}\n      </Modal>\n    </div>\n  );\n};\n\nconst MyShopping = () => {\n  const history = useHistory();\n  const { userType } = useContext(SiteContext);\n  const [msg, setMsg] = useState(null);\n  const [categories, setCategories] = useState([]);\n  useEffect(() => {\n    fetch(\"/api/categories\")\n      .then((res) => res.json())\n      .then((data) => {\n        setCategories(data.categories);\n      });\n  }, []);\n  return (\n    <>\n      {userType === \"seller\" && <Redirect to=\"/account/myShop/orders\" />}\n      <div className=\"productContainer\">\n        <div style={{ display: \"none\" }}>\n          <X_svg />\n        </div>\n        {\n          //   <Tabs\n          //   basepath=\"/account/myShopping/\"\n          //   tabs={[\n          //     { label: \"Orders\", path: \"orders\" },\n          //     { label: \"Refunds\", path: \"refunds\" },\n          //   ]}\n          // />\n        }\n        <Switch>\n          <Route path=\"/account/orders/current/:_id\" component={FullOrder} />\n          <Route path=\"/account/orders/current\">\n            <Orders\n              status=\"approved|shipped|refundPending\"\n              onClick={(_id) => history.push(`/account/orders/current/${_id}`)}\n            />\n          </Route>\n          <Route path=\"/account/orders/pending/:_id\" component={FullOrder} />\n          <Route path=\"/account/orders/pending\">\n            <Orders\n              status=\"pending\"\n              onClick={(_id) => history.push(`/account/orders/pending/${_id}`)}\n            />\n          </Route>\n          <Route path=\"/account/orders/history/:_id\" component={FullOrder} />\n          <Route path=\"/account/orders/history\">\n            <Orders\n              status=\"delivered|cancelled|declined|refunded\"\n              onClick={(_id) => history.push(`/account/orders/history/${_id}`)}\n            />\n          </Route>\n          <Route path=\"/account/orders/dispute/:_id\" component={FullDispute} />\n          <Route path=\"/account/orders/dispute\" component={Disputes} />\n        </Switch>\n        {\n          // <Route path=\"/account/myShop/settings\">\n          //   <Settings categories={categories} setCategories={setCategories} />\n          // </Route>\n        }\n        <Modal className=\"msg\" open={msg}>\n          {msg}\n        </Modal>\n      </div>\n    </>\n  );\n};\nexport default MyShopping;\n","import { useLayoutEffect } from 'react';\n\nvar index =  useLayoutEffect ;\n\nexport default index;\n","import { useRef } from 'react';\nimport useIsomorphicLayoutEffect from 'use-isomorphic-layout-effect';\n\nvar useLatest = function useLatest(value) {\n  var ref = useRef(value);\n  useIsomorphicLayoutEffect(function () {\n    ref.current = value;\n  });\n  return ref;\n};\n\nexport default useLatest;\n","import { useRef, useCallback } from 'react';\n\nvar updateRef = function updateRef(ref, value) {\n  if (typeof ref === 'function') {\n    ref(value);\n    return;\n  }\n  ref.current = value;\n};\n\nvar useComposedRef = function useComposedRef(libRef, userRef) {\n  var prevUserRef = useRef();\n  return useCallback(function (instance) {\n    libRef.current = instance;\n\n    if (prevUserRef.current) {\n      updateRef(prevUserRef.current, null);\n    }\n\n    prevUserRef.current = userRef;\n\n    if (!userRef) {\n      return;\n    }\n\n    updateRef(userRef, instance);\n  }, [userRef]);\n};\n\nexport default useComposedRef;\n","import _extends from '@babel/runtime/helpers/esm/extends';\nimport _objectWithoutPropertiesLoose from '@babel/runtime/helpers/esm/objectWithoutPropertiesLoose';\nimport { useLayoutEffect, forwardRef, useRef, createElement } from 'react';\nimport useLatest from 'use-latest';\nimport useComposedRef from 'use-composed-ref';\n\nvar HIDDEN_TEXTAREA_STYLE = {\n  'min-height': '0',\n  'max-height': 'none',\n  height: '0',\n  visibility: 'hidden',\n  overflow: 'hidden',\n  position: 'absolute',\n  'z-index': '-1000',\n  top: '0',\n  right: '0'\n};\n\nvar forceHiddenStyles = function forceHiddenStyles(node) {\n  Object.keys(HIDDEN_TEXTAREA_STYLE).forEach(function (key) {\n    node.style.setProperty(key, HIDDEN_TEXTAREA_STYLE[key], 'important');\n  });\n};\n\n//   export type CalculatedNodeHeights = [height: number, rowHeight: number];\n// https://github.com/microsoft/TypeScript/issues/28259\n\nvar hiddenTextarea = null;\n\nvar getHeight = function getHeight(node, sizingData) {\n  var height = node.scrollHeight;\n\n  if (sizingData.sizingStyle.boxSizing === 'border-box') {\n    // border-box: add border, since height = content + padding + border\n    return height + sizingData.borderSize;\n  } // remove padding, since height = content\n\n\n  return height - sizingData.paddingSize;\n};\n\nfunction calculateNodeHeight(sizingData, value, minRows, maxRows) {\n  if (minRows === void 0) {\n    minRows = 1;\n  }\n\n  if (maxRows === void 0) {\n    maxRows = Infinity;\n  }\n\n  if (!hiddenTextarea) {\n    hiddenTextarea = document.createElement('textarea');\n    hiddenTextarea.setAttribute('tabindex', '-1');\n    hiddenTextarea.setAttribute('aria-hidden', 'true');\n    forceHiddenStyles(hiddenTextarea);\n  }\n\n  if (hiddenTextarea.parentNode === null) {\n    document.body.appendChild(hiddenTextarea);\n  }\n\n  var paddingSize = sizingData.paddingSize,\n      borderSize = sizingData.borderSize,\n      sizingStyle = sizingData.sizingStyle;\n  var boxSizing = sizingStyle.boxSizing;\n  Object.keys(sizingStyle).forEach(function (_key) {\n    var key = _key;\n    hiddenTextarea.style[key] = sizingStyle[key];\n  });\n  forceHiddenStyles(hiddenTextarea);\n  hiddenTextarea.value = value;\n  var height = getHeight(hiddenTextarea, sizingData); // measure height of a textarea with a single row\n\n  hiddenTextarea.value = 'x';\n  var rowHeight = hiddenTextarea.scrollHeight - paddingSize;\n  var minHeight = rowHeight * minRows;\n\n  if (boxSizing === 'border-box') {\n    minHeight = minHeight + paddingSize + borderSize;\n  }\n\n  height = Math.max(minHeight, height);\n  var maxHeight = rowHeight * maxRows;\n\n  if (boxSizing === 'border-box') {\n    maxHeight = maxHeight + paddingSize + borderSize;\n  }\n\n  height = Math.min(maxHeight, height);\n  return [height, rowHeight];\n}\n\nvar noop = function noop() {};\nvar pick = function pick(props, obj) {\n  return props.reduce(function (acc, prop) {\n    acc[prop] = obj[prop];\n    return acc;\n  }, {});\n};\n\nvar SIZING_STYLE = ['borderBottomWidth', 'borderLeftWidth', 'borderRightWidth', 'borderTopWidth', 'boxSizing', 'fontFamily', 'fontSize', 'fontStyle', 'fontWeight', 'letterSpacing', 'lineHeight', 'paddingBottom', 'paddingLeft', 'paddingRight', 'paddingTop', // non-standard\n'tabSize', 'textIndent', // non-standard\n'textRendering', 'textTransform', 'width', 'wordBreak'];\nvar isIE = !!document.documentElement.currentStyle ;\n\nvar getSizingData = function getSizingData(node) {\n  var style = window.getComputedStyle(node);\n\n  if (style === null) {\n    return null;\n  }\n\n  var sizingStyle = pick(SIZING_STYLE, style);\n  var boxSizing = sizingStyle.boxSizing; // probably node is detached from DOM, can't read computed dimensions\n\n  if (boxSizing === '') {\n    return null;\n  } // IE (Edge has already correct behaviour) returns content width as computed width\n  // so we need to add manually padding and border widths\n\n\n  if (isIE && boxSizing === 'border-box') {\n    sizingStyle.width = parseFloat(sizingStyle.width) + parseFloat(sizingStyle.borderRightWidth) + parseFloat(sizingStyle.borderLeftWidth) + parseFloat(sizingStyle.paddingRight) + parseFloat(sizingStyle.paddingLeft) + 'px';\n  }\n\n  var paddingSize = parseFloat(sizingStyle.paddingBottom) + parseFloat(sizingStyle.paddingTop);\n  var borderSize = parseFloat(sizingStyle.borderBottomWidth) + parseFloat(sizingStyle.borderTopWidth);\n  return {\n    sizingStyle: sizingStyle,\n    paddingSize: paddingSize,\n    borderSize: borderSize\n  };\n};\n\nvar useWindowResizeListener = function useWindowResizeListener(listener) {\n  var latestListener = useLatest(listener);\n  useLayoutEffect(function () {\n    var handler = function handler(event) {\n      latestListener.current(event);\n    };\n\n    window.addEventListener('resize', handler);\n    return function () {\n      window.removeEventListener('resize', handler);\n    };\n  }, []);\n};\n\nvar TextareaAutosize = function TextareaAutosize(_ref, userRef) {\n  var cacheMeasurements = _ref.cacheMeasurements,\n      maxRows = _ref.maxRows,\n      minRows = _ref.minRows,\n      _ref$onChange = _ref.onChange,\n      onChange = _ref$onChange === void 0 ? noop : _ref$onChange,\n      _ref$onHeightChange = _ref.onHeightChange,\n      onHeightChange = _ref$onHeightChange === void 0 ? noop : _ref$onHeightChange,\n      props = _objectWithoutPropertiesLoose(_ref, [\"cacheMeasurements\", \"maxRows\", \"minRows\", \"onChange\", \"onHeightChange\"]);\n\n  if (process.env.NODE_ENV !== 'production' && props.style) {\n    if ('maxHeight' in props.style) {\n      throw new Error('Using `style.maxHeight` for <TextareaAutosize/> is not supported. Please use `maxRows`.');\n    }\n\n    if ('minHeight' in props.style) {\n      throw new Error('Using `style.minHeight` for <TextareaAutosize/> is not supported. Please use `minRows`.');\n    }\n  }\n\n  var isControlled = props.value !== undefined;\n  var libRef = useRef(null);\n  var ref = useComposedRef(libRef, userRef);\n  var heightRef = useRef(0);\n  var measurementsCacheRef = useRef();\n\n  var resizeTextarea = function resizeTextarea() {\n    var node = libRef.current;\n    var nodeSizingData = cacheMeasurements && measurementsCacheRef.current ? measurementsCacheRef.current : getSizingData(node);\n\n    if (!nodeSizingData) {\n      return;\n    }\n\n    measurementsCacheRef.current = nodeSizingData;\n\n    var _calculateNodeHeight = calculateNodeHeight(nodeSizingData, node.value || node.placeholder || 'x', minRows, maxRows),\n        height = _calculateNodeHeight[0],\n        rowHeight = _calculateNodeHeight[1];\n\n    if (heightRef.current !== height) {\n      heightRef.current = height;\n      node.style.setProperty('height', height + \"px\", 'important');\n      onHeightChange(height, {\n        rowHeight: rowHeight\n      });\n    }\n  };\n\n  var handleChange = function handleChange(event) {\n    if (!isControlled) {\n      resizeTextarea();\n    }\n\n    onChange(event);\n  };\n\n  {\n    useLayoutEffect(resizeTextarea);\n    useWindowResizeListener(resizeTextarea);\n  }\n\n  return /*#__PURE__*/createElement(\"textarea\", _extends({}, props, {\n    onChange: handleChange,\n    ref: ref\n  }));\n};\n\nvar index = /* #__PURE__ */forwardRef(TextareaAutosize);\n\nexport default index;\n"],"sourceRoot":""}