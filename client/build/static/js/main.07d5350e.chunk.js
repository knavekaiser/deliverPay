(this["webpackJsonpdeliveryPay-react"]=this["webpackJsonpdeliveryPay-react"]||[]).push([[0],{122:function(e,t,c){"use strict";c.d(t,"a",(function(){return l}));var n=c(11),s=c.n(n),a=c(18),i=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function r(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),c=window.atob(t),n=new Uint8Array(c.length),s=0;s<c.length;++s)n[s]=c.charCodeAt(s);return n}function l(e){if("serviceWorker"in navigator){var t="/service-worker.js";i?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(c){var n=c.headers.get("content-type");404===c.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):o(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then(function(){var e=Object(a.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:r("BOAary6p08dAK6T2GSg0zRGrWKk5qs-sz_-f62My0JXMPG52fqQfzzJlePyF0snUvrdeEg4RSWOVGhrtVc1v3Lo")}).then((function(e){fetch("/api/subscribe",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())):o(t,e)}else console.log("serviceWorker is no supported")}function o(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var c=e.installing;null!=c&&(c.onstatechange=function(){"installed"===c.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)),navigator.serviceWorker.ready.then(function(){var e=Object(a.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:r("BOAary6p08dAK6T2GSg0zRGrWKk5qs-sz_-f62My0JXMPG52fqQfzzJlePyF0snUvrdeEg4RSWOVGhrtVc1v3Lo")}).then((function(e){fetch("/api/subscribe",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}},127:function(e,t,c){},146:function(e,t,c){},152:function(e,t,c){},153:function(e,t,c){},157:function(e,t,c){},158:function(e,t,c){},159:function(e,t,c){},188:function(e,t,c){},192:function(e,t,c){},193:function(e,t,c){},194:function(e,t,c){},195:function(e,t,c){},197:function(e,t,c){"use strict";c.r(t);var n=c(113),s=c(114),a=c(119),i=c(118),r=c(1),l=c.n(r),o=c(39),j=c.n(o),d=(c(127),function(e){e&&e instanceof Function&&c.e(19).then(c.bind(null,257)).then((function(t){var c=t.getCLS,n=t.getFID,s=t.getFCP,a=t.getLCP,i=t.getTTFB;c(e),n(e),s(e),a(e),i(e)}))}),u=c(9),b=(c(122),c(0)),h=Object(r.lazy)((function(){return c.e(4).then(c.bind(null,272))})),O=function(e){Object(a.a)(c,e);var t=Object(i.a)(c);function c(e){var s;return Object(n.a)(this,c),(s=t.call(this,e)).state={hasError:!1,reported:!1},s}return Object(s.a)(c,[{key:"componentDidCatch",value:function(e,t){var c=this,n={method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({issue:e.toString(),dscr:t})};fetch("/api/bugReport",n).then((function(e){return e.json()})).then((function(e){"ok"===e.code&&(c.reported=!0)}))}},{key:"render",value:function(){return this.state.hasError?Object(b.jsx)("div",{className:"deathPage",children:Object(b.jsxs)("div",{className:"content",children:[Object(b.jsx)("ion-icon",{name:"skull-outline"}),Object(b.jsx)("h2",{children:"Oops."}),Object(b.jsx)("a",{href:"/",children:"RELOAD"}),this.reported&&Object(b.jsx)("p",{children:"successfully reported"})]})}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),c}(l.a.Component);j.a.render(Object(b.jsx)(l.a.StrictMode,{children:Object(b.jsx)(O,{children:Object(b.jsx)(u.c,{children:Object(b.jsx)(r.Suspense,{fallback:Object(b.jsx)("p",{children:"Loading..."}),children:Object(b.jsx)(h,{})})})})}),document.getElementById("root")),d()},2:function(e,t,c){"use strict";c.d(t,"i",(function(){return m})),c.d(t,"B",(function(){return f})),c.d(t,"G",(function(){return p})),c.d(t,"A",(function(){return v})),c.d(t,"y",(function(){return g})),c.d(t,"z",(function(){return y})),c.d(t,"v",(function(){return k})),c.d(t,"w",(function(){return N})),c.d(t,"x",(function(){return C})),c.d(t,"u",(function(){return S})),c.d(t,"q",(function(){return w})),c.d(t,"d",(function(){return M})),c.d(t,"b",(function(){return _})),c.d(t,"c",(function(){return D})),c.d(t,"g",(function(){return P})),c.d(t,"j",(function(){return F})),c.d(t,"e",(function(){return T})),c.d(t,"n",(function(){return R})),c.d(t,"f",(function(){return Y})),c.d(t,"h",(function(){return q})),c.d(t,"s",(function(){return B})),c.d(t,"k",(function(){return I})),c.d(t,"t",(function(){return E})),c.d(t,"m",(function(){return L})),c.d(t,"l",(function(){return H})),c.d(t,"E",(function(){return V})),c.d(t,"p",(function(){return U})),c.d(t,"a",(function(){return Z})),c.d(t,"C",(function(){return G})),c.d(t,"F",(function(){return W})),c.d(t,"K",(function(){return J})),c.d(t,"r",(function(){return z})),c.d(t,"J",(function(){return K})),c.d(t,"I",(function(){return $})),c.d(t,"o",(function(){return Q})),c.d(t,"H",(function(){return X})),c.d(t,"D",(function(){return ee}));var n=c(52),s=c(12),a=c(4),i=c(3),r=c(82),l=c(1),o=c(9),j=c(5),d=c(17),u=c(6),b=(c(65),c(46)),h=c(0),O=["src"],x=["format","children"];c(195);var m=function(){return Object(h.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"158",height:"158",viewBox:"0 0 158 158",children:[Object(h.jsx)("defs",{children:Object(h.jsxs)("linearGradient",{id:"linear-gradient-red",x1:"-0.298",y1:"-0.669",x2:"1.224",y2:"1.588",gradientUnits:"objectBoundingBox",children:[Object(h.jsx)("stop",{offset:"0",stopColor:"#f93389"}),Object(h.jsx)("stop",{offset:"1",stopColor:"#e3003e"})]})}),Object(h.jsx)("rect",{id:"Rectangle_1104","data-name":"Rectangle 1104",width:"158",height:"158",rx:"79",fill:"url(#linear-gradient-red)"}),Object(h.jsx)("g",{id:"Component_85_8","data-name":"Component 85 \u2013 8",transform:"translate(49.472 49.472)",children:Object(h.jsx)("path",{id:"Union_3","data-name":"Union 3",d:"M29.527,34.9,5.368,59.057,0,53.686,24.158,29.527,0,5.368,5.368,0l24.16,24.158L53.686,0l5.371,5.368L34.9,29.527l24.16,24.158-5.371,5.371Z",fill:"#fff"})})]})},f=function(){return Object(h.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"158",height:"158",viewBox:"0 0 158 158",children:[Object(h.jsxs)("defs",{children:[Object(h.jsxs)("linearGradient",{id:"linear-gradient",x1:"-0.298",y1:"-0.669",x2:"1.224",y2:"1.588",gradientUnits:"objectBoundingBox",children:[Object(h.jsx)("stop",{offset:"0",stopColor:"#336cf9"}),Object(h.jsx)("stop",{offset:"1",stopColor:"#1be6d6"})]}),Object(h.jsx)("clipPath",{id:"clip-path",children:Object(h.jsx)("rect",{width:"64",height:"64",fill:"none"})})]}),Object(h.jsxs)("g",{id:"Group_163","data-name":"Group 163",transform:"translate(-0.426 -0.384)",children:[Object(h.jsx)("g",{id:"Group_103","data-name":"Group 103",transform:"translate(0 0)",children:Object(h.jsx)("rect",{id:"Rectangle_1104","data-name":"Rectangle 1104",width:"158",height:"158",rx:"79",transform:"translate(0.426 0.384)",fill:"url(#linear-gradient)"})}),Object(h.jsxs)("g",{id:"Component_148_2","data-name":"Component 148 \u2013 2",transform:"translate(47.426 58.384)",clipPath:"url(#clip-path)",children:[Object(h.jsx)("rect",{id:"Rectangle_460","data-name":"Rectangle 460",width:"64",height:"64",transform:"translate(0 0)",fill:"none"}),Object(h.jsx)("path",{id:"Checkbox",d:"M25.35,44.087,0,18.737l5.143-5.143L25.35,33.432,58.782,0l5.143,5.143Z",transform:"translate(0 1.728)",fill:"#fff"})]})]})]})},p=function(){return Object(h.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"15.557",height:"15.557",viewBox:"0 0 15.557 15.557",children:[Object(h.jsx)("defs",{children:Object(h.jsx)("clipPath",{id:"clip-path",children:Object(h.jsx)("rect",{width:"15.557",height:"15.557",fill:"none"})})}),Object(h.jsx)("g",{id:"Cancel",clipPath:"url(#clip-path)",children:Object(h.jsx)("path",{id:"Union_3","data-name":"Union 3",d:"M7.778,9.192,1.414,15.557,0,14.142,6.364,7.778,0,1.414,1.414,0,7.778,6.364,14.142,0l1.415,1.414L9.192,7.778l6.364,6.364-1.415,1.415Z",fill:"#2699fb"})})]})},v=function(e){var t=e.className;return Object(h.jsxs)("svg",{className:t,xmlns:"http://www.w3.org/2000/svg",width:"65",height:"65",viewBox:"0 0 65 65",children:[Object(h.jsxs)("g",{id:"Ellipse_110","data-name":"Ellipse 110",fill:"#fff",stroke:"#336cf9",strokeWidth:"1",children:[Object(h.jsx)("circle",{cx:"32.5",cy:"32.5",r:"32.5",stroke:"none"}),Object(h.jsx)("circle",{cx:"32.5",cy:"32.5",r:"32",fill:"none"})]}),Object(h.jsx)("path",{id:"Checkbox",d:"M12.267,23.067,0,9.8,2.489,7.112l9.778,10.38L28.444,0l2.489,2.691Z",transform:"translate(17.034 20.967)",fill:"#336cf9"})]})},g=function(e){var t=e.className;return Object(h.jsx)("svg",{className:t,xmlns:"http://www.w3.org/2000/svg",width:"65",height:"65",viewBox:"0 0 65 65",children:Object(h.jsxs)("g",{id:"Ellipse_229","data-name":"Ellipse 229",fill:"#fff",stroke:"#707070",strokeWidth:"1",children:[Object(h.jsx)("circle",{cx:"32.5",cy:"32.5",r:"32.5",stroke:"none"}),Object(h.jsx)("circle",{cx:"32.5",cy:"32.5",r:"32",fill:"none"})]})})},y=function(e){var t=e.className;return Object(h.jsxs)("svg",{className:t,xmlns:"http://www.w3.org/2000/svg",width:"65",height:"65",viewBox:"0 0 65 65",children:[Object(h.jsxs)("g",{id:"Ellipse_110","data-name":"Ellipse 110",fill:"#336cf9",stroke:"#336cf9",strokeWidth:"1",children:[Object(h.jsx)("circle",{cx:"32.5",cy:"32.5",r:"32.5",stroke:"none"}),Object(h.jsx)("circle",{cx:"32.5",cy:"32.5",r:"32",fill:"none"})]}),Object(h.jsx)("path",{id:"Checkbox",d:"M12.267,23.067,0,9.8,2.489,7.112l9.778,10.38L28.444,0l2.489,2.691Z",transform:"translate(17.034 20.967)",fill:"#fff"})]})},k=function(){return Object(h.jsx)("svg",{className:"done",xmlns:"http://www.w3.org/2000/svg",width:"214.5",height:"2",viewBox:"0 0 214.5 2",children:Object(h.jsx)("line",{id:"Line_22","data-name":"Line 22",x2:"214.5",transform:"translate(0 1)",fill:"none",stroke:"#1be6d6",strokeWidth:"2"})})},N=function(){return Object(h.jsx)("svg",{className:"running",xmlns:"http://www.w3.org/2000/svg",width:"200",height:"16.55",viewBox:"0 0 200 16.55",children:Object(h.jsxs)("g",{id:"Group_203","data-name":"Group 203",transform:"translate(-5063.943 -1197)",children:[Object(h.jsx)("path",{id:"Path_301","data-name":"Path 301",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5063.943 1213.55) rotate(-90)",fill:"#1be6d6"}),Object(h.jsx)("path",{id:"Path_302","data-name":"Path 302",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5073.943 1213.55) rotate(-90)",fill:"#1be6d6"}),Object(h.jsx)("path",{id:"Path_303","data-name":"Path 303",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5083.943 1213.55) rotate(-90)",fill:"#1be6d6"}),Object(h.jsx)("path",{id:"Path_304","data-name":"Path 304",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5093.943 1213.55) rotate(-90)",fill:"#1be6d6"}),Object(h.jsx)("path",{id:"Path_305","data-name":"Path 305",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5103.943 1213.55) rotate(-90)",fill:"#1be6d6"}),Object(h.jsx)("path",{id:"Path_306","data-name":"Path 306",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5113.943 1213.55) rotate(-90)",fill:"#1be6d6"}),Object(h.jsx)("path",{id:"Path_307","data-name":"Path 307",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5123.943 1213.55) rotate(-90)",fill:"#1be6d6"}),Object(h.jsx)("path",{id:"Path_308","data-name":"Path 308",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5133.943 1213.55) rotate(-90)",fill:"#1be6d6"}),Object(h.jsx)("path",{id:"Path_309","data-name":"Path 309",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5143.943 1213.55) rotate(-90)",fill:"#1be6d6"}),Object(h.jsx)("path",{id:"Path_310","data-name":"Path 310",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5153.943 1213.55) rotate(-90)",fill:"#1be6d6"}),Object(h.jsx)("path",{id:"Path_311","data-name":"Path 311",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5163.943 1213.55) rotate(-90)",fill:"#1be6d6"}),Object(h.jsx)("path",{id:"Path_312","data-name":"Path 312",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5173.943 1213.55) rotate(-90)",fill:"#1be6d6"}),Object(h.jsx)("path",{id:"Path_313","data-name":"Path 313",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5183.943 1213.55) rotate(-90)",fill:"#1be6d6"}),Object(h.jsx)("path",{id:"Path_314","data-name":"Path 314",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5193.943 1213.55) rotate(-90)",fill:"#1be6d6"}),Object(h.jsx)("path",{id:"Path_315","data-name":"Path 315",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5203.943 1213.55) rotate(-90)",fill:"#1be6d6"}),Object(h.jsx)("path",{id:"Path_316","data-name":"Path 316",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5213.943 1213.55) rotate(-90)",fill:"#1be6d6"}),Object(h.jsx)("path",{id:"Path_317","data-name":"Path 317",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5223.943 1213.55) rotate(-90)",fill:"#1be6d6"}),Object(h.jsx)("path",{id:"Path_318","data-name":"Path 318",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5233.943 1213.55) rotate(-90)",fill:"#1be6d6"}),Object(h.jsx)("path",{id:"Path_319","data-name":"Path 319",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5243.943 1213.55) rotate(-90)",fill:"#1be6d6"}),Object(h.jsx)("path",{id:"Path_320","data-name":"Path 320",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5253.943 1213.55) rotate(-90)",fill:"#1be6d6"})]})})},C=function(){return Object(h.jsx)("svg",{className:"runningBack",xmlns:"http://www.w3.org/2000/svg",width:"200",height:"16.55",viewBox:"0 0 200 16.55",children:Object(h.jsxs)("g",{id:"Group_226","data-name":"Group 226",transform:"translate(5263.943 1213.55) rotate(-180)",children:[Object(h.jsx)("path",{id:"Path_301","data-name":"Path 301",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5063.943 1213.55) rotate(-90)",fill:"#f6577c"}),Object(h.jsx)("path",{id:"Path_302","data-name":"Path 302",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5073.943 1213.55) rotate(-90)",fill:"#f6577c"}),Object(h.jsx)("path",{id:"Path_303","data-name":"Path 303",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5083.943 1213.55) rotate(-90)",fill:"#f6577c"}),Object(h.jsx)("path",{id:"Path_304","data-name":"Path 304",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5093.943 1213.55) rotate(-90)",fill:"#f6577c"}),Object(h.jsx)("path",{id:"Path_305","data-name":"Path 305",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5103.943 1213.55) rotate(-90)",fill:"#f6577c"}),Object(h.jsx)("path",{id:"Path_306","data-name":"Path 306",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5113.943 1213.55) rotate(-90)",fill:"#f6577c"}),Object(h.jsx)("path",{id:"Path_307","data-name":"Path 307",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5123.943 1213.55) rotate(-90)",fill:"#f6577c"}),Object(h.jsx)("path",{id:"Path_308","data-name":"Path 308",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5133.943 1213.55) rotate(-90)",fill:"#f6577c"}),Object(h.jsx)("path",{id:"Path_309","data-name":"Path 309",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5143.943 1213.55) rotate(-90)",fill:"#f6577c"}),Object(h.jsx)("path",{id:"Path_310","data-name":"Path 310",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5153.943 1213.55) rotate(-90)",fill:"#f6577c"}),Object(h.jsx)("path",{id:"Path_311","data-name":"Path 311",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5163.943 1213.55) rotate(-90)",fill:"#f6577c"}),Object(h.jsx)("path",{id:"Path_312","data-name":"Path 312",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5173.943 1213.55) rotate(-90)",fill:"#f6577c"}),Object(h.jsx)("path",{id:"Path_313","data-name":"Path 313",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5183.943 1213.55) rotate(-90)",fill:"#f6577c"}),Object(h.jsx)("path",{id:"Path_314","data-name":"Path 314",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5193.943 1213.55) rotate(-90)",fill:"#f6577c"}),Object(h.jsx)("path",{id:"Path_315","data-name":"Path 315",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5203.943 1213.55) rotate(-90)",fill:"#f6577c"}),Object(h.jsx)("path",{id:"Path_316","data-name":"Path 316",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5213.943 1213.55) rotate(-90)",fill:"#f6577c"}),Object(h.jsx)("path",{id:"Path_317","data-name":"Path 317",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5223.943 1213.55) rotate(-90)",fill:"#f6577c"}),Object(h.jsx)("path",{id:"Path_318","data-name":"Path 318",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5233.943 1213.55) rotate(-90)",fill:"#f6577c"}),Object(h.jsx)("path",{id:"Path_319","data-name":"Path 319",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5243.943 1213.55) rotate(-90)",fill:"#f6577c"}),Object(h.jsx)("path",{id:"Path_320","data-name":"Path 320",d:"M8.275,10,0,2.3,2.465,0l5.81,5.41L14.085,0,16.55,2.3Z",transform:"translate(5253.943 1213.55) rotate(-90)",fill:"#f6577c"})]})})},S=function(){return Object(h.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",children:[Object(h.jsx)("line",{id:"Line_29","data-name":"Line 29",y2:"20",transform:"translate(10)",fill:"none",stroke:"#006dff",strokeWidth:"2"}),Object(h.jsx)("line",{id:"Line_30","data-name":"Line 30",x2:"20",transform:"translate(0 10)",fill:"none",stroke:"#006dff",strokeWidth:"2"})]})},w=function(){return Object(h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",children:Object(h.jsx)("line",{id:"Line_30","data-name":"Line 30",x2:"20",transform:"translate(0 10)",fill:"none",stroke:"#006dff",strokeWidth:"2"})})},M=function(){return Object(h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 18 18",children:Object(h.jsx)("g",{id:"Symbol_82","data-name":"Symbol 82",transform:"translate(-507 1272) rotate(-90)",children:Object(h.jsx)("path",{id:"Path_10","data-name":"Path 10",d:"M9,0,7.364,1.636l6.195,6.195H0v2.338H13.558L7.364,16.364,9,18l9-9Z",transform:"translate(1254 507)",fill:"#336cf9"})})})},_=function(){return Object(h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 18 18",children:Object(h.jsx)("g",{id:"_1","data-name":" 1",transform:"translate(525 -1254) rotate(90)",children:Object(h.jsx)("path",{id:"Path_10","data-name":"Path 10",d:"M9,0,7.364,1.636l6.195,6.195H0v2.338H13.558L7.364,16.364,9,18l9-9Z",transform:"translate(1254 507)",fill:"#ff0080"})})})},D=function(){return Object(h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",children:Object(h.jsx)("path",{id:"Path_10","data-name":"Path 10",d:"M8,0,6.545,1.455l5.506,5.506H0V9.039H12.052L6.545,14.545,8,16l8-8Z",transform:"translate(16 16) rotate(180)",fill:"#2699fb"})})},P=function(e){var t=e.className;return Object(h.jsx)("svg",{className:t||"",xmlns:"http://www.w3.org/2000/svg",width:"23.616",height:"13.503",viewBox:"0 0 23.616 13.503",children:Object(h.jsx)("path",{id:"Icon_ionic-ios-arrow-down","data-name":"Icon ionic-ios-arrow-down",d:"M18,20.679l8.93-8.937a1.681,1.681,0,0,1,2.384,0,1.7,1.7,0,0,1,0,2.391L19.2,24.258a1.685,1.685,0,0,1-2.327.049L6.68,14.14a1.688,1.688,0,0,1,2.384-2.391Z",transform:"translate(-6.188 -11.246)",fill:"#53aefc"})})},F=function(){return Object(h.jsx)("span",{className:"externalLinkIcon","aria-label":"(opens a new window)",children:Object(h.jsx)("svg",{viewBox:"0 0 20 20",className:"Polaris-Icon__Svg_375hu",focusable:"false","aria-hidden":"true",children:Object(h.jsx)("path",{d:"M14 13v1a1 1 0 0 1-1 1H6c-.575 0-1-.484-1-1V7a1 1 0 0 1 1-1h1c1.037 0 1.04 1.5 0 1.5-.178.005-.353 0-.5 0v6h6V13c0-1 1.5-1 1.5 0zm-3.75-7.25A.75.75 0 0 1 11 5h4v4a.75.75 0 0 1-1.5 0V7.56l-3.22 3.22a.75.75 0 1 1-1.06-1.06l3.22-3.22H11a.75.75 0 0 1-.75-.75z"})})})},A=function(){return Object(h.jsx)("svg",{className:"tick",xmlns:"http://www.w3.org/2000/svg",width:"15.1",height:"10.8",viewBox:"0 0 15.1 10.8",children:Object(h.jsx)("path",{id:"Path_207","data-name":"Path 207",d:"M6.5,10.8,0,4.3,2.1,2.2,6.5,6.5,13,0l2.1,2.1Z",fill:"#2699fb"})})},T=function(){return Object(h.jsx)("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 122.9 107.5",children:Object(h.jsx)("g",{children:Object(h.jsx)("path",{d:"M3.9,7.9C1.8,7.9,0,6.1,0,3.9C0,1.8,1.8,0,3.9,0h10.2c0.1,0,0.3,0,0.4,0c3.6,0.1,6.8,0.8,9.5,2.5c3,1.9,5.2,4.8,6.4,9.1 c0,0.1,0,0.2,0.1,0.3l1,4H119c2.2,0,3.9,1.8,3.9,3.9c0,0.4-0.1,0.8-0.2,1.2l-10.2,41.1c-0.4,1.8-2,3-3.8,3v0H44.7 c1.4,5.2,2.8,8,4.7,9.3c2.3,1.5,6.3,1.6,13,1.5h0.1v0h45.2c2.2,0,3.9,1.8,3.9,3.9c0,2.2-1.8,3.9-3.9,3.9H62.5v0 c-8.3,0.1-13.4-0.1-17.5-2.8c-4.2-2.8-6.4-7.6-8.6-16.3l0,0L23,13.9c0-0.1,0-0.1-0.1-0.2c-0.6-2.2-1.6-3.7-3-4.5 c-1.4-0.9-3.3-1.3-5.5-1.3c-0.1,0-0.2,0-0.3,0H3.9L3.9,7.9z M96,88.3c5.3,0,9.6,4.3,9.6,9.6c0,5.3-4.3,9.6-9.6,9.6 c-5.3,0-9.6-4.3-9.6-9.6C86.4,92.6,90.7,88.3,96,88.3L96,88.3z M53.9,88.3c5.3,0,9.6,4.3,9.6,9.6c0,5.3-4.3,9.6-9.6,9.6 c-5.3,0-9.6-4.3-9.6-9.6C44.3,92.6,48.6,88.3,53.9,88.3L53.9,88.3z M33.7,23.7l8.9,33.5h63.1l8.3-33.5H33.7L33.7,23.7z"})})})},R=function(e){var t=e.src,c=Object(r.a)(e,O),n=Object(l.useState)(t),s=Object(i.a)(n,2),o=s[0],j=s[1];return Object(h.jsx)("img",Object(a.a)(Object(a.a)({src:o,onError:function(){return j("/img_err.png")}},c),{},{onClick:c.onClick||function(){}}))},Y=function(e){var t=e.defaultValue,c=e.value,n=e.required,s=e.onChange,a=Object(l.useState)(!!t),r=Object(i.a)(a,2),o=r[0],j=r[1];return Object(l.useEffect)((function(){j(c)}),[c]),Object(h.jsx)("section",{className:"checkbox",children:Object(h.jsxs)("div",{className:"ticks",onClick:function(){return j(!o)},children:[Object(h.jsx)("input",{type:"checkbox",value:o,required:n,onChange:function(e){j(!o),null===s||void 0===s||s(!o)}}),Object(h.jsx)("svg",{className:"border",xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",viewBox:"0 0 30 30",children:Object(h.jsxs)("g",{id:"Rectangle_661","data-name":"Rectangle 661",fill:"none",stroke:"#7fc4fd",strokeWidth:"3",children:[Object(h.jsx)("rect",{width:"30",height:"30",rx:"4",stroke:"none"}),Object(h.jsx)("rect",{x:"1.5",y:"1.5",width:"27",height:"27",rx:"2.5",fill:"none"})]})}),o&&Object(h.jsx)(A,{})]})})},q=function(e){var t=e.options,c=e.defaultValue,n=e.onChange,s=e.maxHeight,a=e.required,r=(e.disabled,e.dataId,e.validationMessage,e.className,e.placeholder),o=Object(l.useState)((function(){return c>-1&&t[c]?t[c].label:t.find((function(e){return e.value===c}))?t.find((function(e){return e.value===c})).label:"object"===typeof c?c:""})),d=Object(i.a)(o,2),u=d[0],b=d[1],O=Object(l.useState)(!1),x=Object(i.a)(O,2),m=x[0],f=x[1],p=Object(l.useState)(""),v=Object(i.a)(p,2),g=(v[0],v[1]),y=Object(l.useState)({}),k=Object(i.a)(y,2),N=k[0],C=k[1],S=Object(l.useRef)(),w=Object(l.useRef)();return Object(l.useLayoutEffect)((function(){var e=w.current.getBoundingClientRect(),c=e.width,n=e.height,s=e.x,a=e.y;C({position:"absolute",left:s,top:a+n,width:c,height:37*t.length,maxHeight:window.innerHeight-(a+n)-16})}),[m]),Object(h.jsxs)("section",{className:"combobox ".concat(m?"open":""),ref:w,onClick:function(){return f(!m)},children:[r&&!u&&Object(h.jsx)("label",{children:r}),Object(h.jsx)("input",{ref:S,required:a,value:u,onFocus:function(e){return e.target.blur()},onChange:function(){}}),Object(h.jsx)("button",{type:"button",children:Object(h.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"13",height:"8.872",viewBox:"0 0 13 8.872",children:[Object(h.jsx)("defs",{children:Object(h.jsx)("clipPath",{id:"clip-path",children:Object(h.jsx)("rect",{width:"8.872",height:"13",fill:"none"})})}),Object(h.jsx)("g",{id:"Component_47_7","data-name":"Component 47 \u2013 7",transform:"translate(0 8.872) rotate(-90)",clipPath:"url(#clip-path)",children:Object(h.jsx)("path",{id:"Path_36","data-name":"Path 36",d:"M6.5,8.872,0,2.036,1.936,0,6.5,4.8,11.064,0,13,2.036Z",transform:"translate(8.872) rotate(90)",fill:"#336cf9"})})]})}),Object(h.jsx)(j.b,{className:"sectionOptions",open:m,setOpen:f,backdropClass:"selectionOptionBack",onBackdropClick:function(){return f(!1)},style:N,children:Object(h.jsx)("ul",{style:{width:"100%",maxHeight:m?s:0,zIndex:100},className:"options",children:t.map((function(e){return Object(h.jsx)("li",{onClick:function(t){g(e.value),b(e.label),n&&n(e),f(!1),S.current.setCustomValidity("")},className:"option".concat(" ",u===e.label?"selected":""),children:e.label},e.label)}))})})]})},B=function(e){var t=e.defaultValue,c=e.min,n=e.max,s=e.required,a=e.onChange,r=e.step,o=e.placeholder,j=e.readOnly,d=Object(l.useState)(t||0),u=Object(i.a)(d,2),b=u[0],O=u[1];return Object(h.jsxs)("section",{className:"number",children:[Object(h.jsx)("input",{type:"number",step:r||"0.01",required:s,value:b,readOnly:j,onChange:function(e){O((+e.target.value).toString()),null===a||void 0===a||a(e)},placeholder:o||"0.00",min:c,max:n}),Object(h.jsxs)("div",{className:"ticker",children:[Object(h.jsx)("button",{type:"button",onClick:function(){return O(+b+1)},children:Object(h.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"13",height:"8.872",viewBox:"0 0 13 8.872",children:[Object(h.jsx)("defs",{children:Object(h.jsx)("clipPath",{id:"clip-path",children:Object(h.jsx)("rect",{width:"8.872",height:"13",fill:"none"})})}),Object(h.jsx)("g",{id:"Component_47_8","data-name":"Component 47 \u2013 8",transform:"translate(13) rotate(90)",clipPath:"url(#clip-path)",children:Object(h.jsx)("path",{id:"Path_36","data-name":"Path 36",d:"M6.5,8.872,0,2.036,1.936,0,6.5,4.8,11.064,0,13,2.036Z",transform:"translate(8.872) rotate(90)",fill:"#336cf9"})})]})}),Object(h.jsx)("button",{type:"button",onClick:function(){return O(+b-1)},children:Object(h.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"13",height:"8.872",viewBox:"0 0 13 8.872",children:[Object(h.jsx)("defs",{children:Object(h.jsx)("clipPath",{id:"clip-path",children:Object(h.jsx)("rect",{width:"8.872",height:"13",fill:"none"})})}),Object(h.jsx)("g",{id:"Component_47_7","data-name":"Component 47 \u2013 7",transform:"translate(0 8.872) rotate(-90)",clipPath:"url(#clip-path)",children:Object(h.jsx)("path",{id:"Path_36","data-name":"Path 36",d:"M6.5,8.872,0,2.036,1.936,0,6.5,4.8,11.064,0,13,2.036Z",transform:"translate(8.872) rotate(90)",fill:"#336cf9"})})]})})]})]})},I=function(e){var t=e.required,c=e.onChange,n=e.prefill,a=(e.label,e.multiple),r=e.accept,o=e.name,j=Object(l.useState)(n||[]),d=Object(i.a)(j,2),u=d[0],b=d[1];return Object(l.useEffect)((function(){null===c||void 0===c||c(u)}),[u]),Object(h.jsxs)("section",{className:"fileInput",children:[u.map((function(e,t){var c="string"===typeof e?{type:"url",url:e}:{type:e.type,name:e.name,url:URL.createObjectURL(e)},n=c.type.startsWith("image")||c.url.match(/(\.gif|\.png|\.jpg|\.jpeg|\.webp)$/);return Object(h.jsxs)("div",{className:"file ".concat(n?"thumb":"any"),children:[Object(h.jsx)("button",{className:"close",type:"button",onClick:function(){return b((function(e){return e.filter((function(e,c){return c!==t}))}))},children:Object(h.jsx)(p,{})}),Object(h.jsx)(R,{className:n?"thumb":"",src:n?c.url:"/file_icon.png"}),!n&&Object(h.jsx)("p",{className:"filename",children:e.name})]},t)})),Object(h.jsxs)("div",{className:"uploadBtn",children:[Object(h.jsx)(S,{}),Object(h.jsx)("input",{name:o,type:"file",multiple:a,required:t,accept:r,onChange:function(e){b((function(t){return[].concat(Object(s.a)(t),Object(s.a)(Object(s.a)(e.target.files).filter((function(e){return!u.some((function(t){return t.name===e.name}))}))))}))}})]})]})},E=function(e){var t=e.total,c=e.btns,n=e.perPage,a=e.currentPage,r=(e.setCurrentPage,e.setPage),o=Object(l.useState)([]),j=Object(i.a)(o,2),d=j[0],u=j[1],b=Object(l.useState)([]),O=Object(i.a)(b,2),x=O[0],m=O[1];return Object(l.useEffect)((function(){u(Object(s.a)(Array(Math.ceil(t/n)).keys()).map((function(e){return e+1}))),m(Object(s.a)(Array(c).keys()).map((function(e){return e+1})))}),[t,n]),t<=n?Object(h.jsx)(h.Fragment,{}):Object(h.jsxs)("div",{className:"paginaiton",children:[Object(h.jsx)("button",{disabled:a<=1,onClick:function(){return r((function(e){return e-1}))},children:"<"}),Object(h.jsxs)("ul",{className:"pages",children:[d.length<=c&&d.map((function(e){return Object(h.jsx)("li",{className:e===+a?"active":"",children:Object(h.jsx)("button",{onClick:function(){return r(e)},children:e})},e)})),d.length>c&&x.map((function(e){var t=d.length-c,n=Math.ceil(c/2),s=0;a>n&&(s=a-n+c<=d.length?a-n:t);var i=e+s;return Object(h.jsx)("li",{className:i===a?"active":"",children:Object(h.jsx)("button",{onClick:function(){return r(e)},children:i})},i)}))]}),Object(h.jsx)("button",{disabled:a>=d.length,onClick:function(){return r((function(e){return e+1}))},children:">"})]})},L=function(){var e=Object(l.useContext)(o.d),t=e.user,c=e.setUser,n=(e.cart,e.setCart,e.userType,Object(d.g)()),s=Object(l.useState)(!1),a=Object(i.a)(s,2);a[0],a[1];return Object(l.useEffect)((function(){fetch("/api/authUser").then((function(e){return e.json()})).then((function(e){e.user&&c(e.user)}))}),[]),Object(h.jsxs)("header",{className:"genericHeader",children:[Object(h.jsxs)(u.b,{className:"logoLink",to:"/",children:[Object(h.jsx)(R,{className:"logo",src:"/logo_land.jpg",alt:"Delivery pay logo"}),Object(h.jsx)(R,{className:"logo_small",src:"/logo_sqr.jpg",alt:"Delivery pay logo"})]}),Object(h.jsxs)("div",{className:"links",children:[Object(h.jsx)(u.b,{to:"/",className:"home",children:"Home"}),Object(h.jsx)(u.b,{to:"/marketplace",children:"Browse"})]}),Object(h.jsx)("div",{className:"clas",children:t?Object(h.jsx)(b.ProfileAvatar,{},"genericHeader"):Object(h.jsx)(h.Fragment,{children:"/u/login"===n.location.pathname?Object(h.jsx)(u.b,{to:"/u/join",children:"Register"}):Object(h.jsx)(u.b,{to:"/u/login",children:"Login"})})})]})},H=function(){return Object(h.jsx)("footer",{children:Object(h.jsxs)("div",{className:"links",children:[Object(h.jsx)(u.b,{to:"/aboutUs",children:"About us"}),Object(h.jsx)(u.b,{to:"/privacyPolicy",children:"Privacy Policy"}),Object(h.jsx)(u.b,{to:"/codeOfConduct",children:"Code of Conduct"}),Object(h.jsx)(u.b,{to:"/copyrightPolicy",children:"Copyright Policy"}),Object(h.jsx)(u.b,{to:"/fees&Charges",children:"Fees & Charges"}),Object(h.jsx)(u.b,{to:"/terms",children:"User Agreement"}),Object(h.jsx)(u.b,{to:"/howItWorks",children:"How it works"}),Object(h.jsx)(u.b,{to:"/contactUs",children:"Contact us"}),Object(h.jsx)(u.b,{to:"/employment-opportunities",children:"Work with us"}),Object(h.jsx)(u.b,{to:"/refundCancellationPolicy",children:"Refund & Cancellation Policy"}),Object(h.jsx)(u.b,{to:"/shippingDeliveryPolicy",children:"Shipping & Delivery Policy"})]})})},V=function(e){var t,c=e.files,a=e.setMsg,i="https://cdn.deliverypay.in",r=new FormData,l=[],o=Object(n.a)(c);try{for(o.s();!(t=o.n()).done;){var j=t.value;"string"===typeof j?l.push(j):r.append("file",j)}}catch(d){o.e(d)}finally{o.f()}return fetch("".concat(i,"/upload"),{method:"POST",body:r}).then((function(e){return e.json()})).then((function(e){return"ok"===e.code?[].concat(l,Object(s.a)(e.files.map((function(e){return i+"/"+e})))):null})).catch((function(e){console.log(e),a(Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("button",{onClick:function(){return a(null)},children:"Okay"}),Object(h.jsxs)("div",{children:[Object(h.jsx)(m,{}),Object(h.jsx)("h4",{children:"File upload failed. Make sure you're online."})]})]}))}))},U=function(e){var t=e.links,c=Object(l.useState)(!1),n=Object(i.a)(c,2),s=n[0],a=n[1],r=Object(l.useState)(null),o=Object(i.a)(r,2),d=o[0],u=o[1],b=Object(l.useState)(0),O=Object(i.a)(b,2),x=O[0],m=O[1],f=(null===t||void 0===t?void 0:t.map((function(e,t){var c=null,n=null,s=function(e){a(!0),u(n),m(t)};return e.match(/(\.gif|\.png|\.jpg|\.jpeg|\.webp)$/)||e.startsWith("https://image")?(c=Object(h.jsx)(R,{className:x===t?"active":"",src:e,onClick:s},t),n=Object(h.jsx)(R,{src:e},t)):e.match(/(\.mp3|\.ogg|\.amr|\.m4a|\.flac|\.wav|\.aac)$/i)?(c=Object(h.jsx)("div",{className:"audioThumb ".concat(x===t?"active":""),onClick:s,children:Object(h.jsx)(R,{src:"/play_btn.png"})},t),n=Object(h.jsx)("audio",{src:e,controls:"on",autoPlay:"on"},t)):e.match(/(\.mp4|\.mov|\.avi|\.flv|\.wmv|\.webm)$/i)?(c=Object(h.jsxs)("div",{className:"videoThumb ".concat(x===t?"active":""),children:[Object(h.jsx)("video",{src:e,onClick:s}),Object(h.jsx)(R,{src:"/play_btn.png"})]},t),n=Object(h.jsx)("video",{src:e,controls:"on",autoPlay:"on"},t)):c=Object(h.jsx)("a",{href:t,children:e},t),c})))||"N/A";return Object(h.jsxs)(h.Fragment,{children:[f,Object(h.jsxs)(j.b,{className:"mediaModal",open:s,backdropClass:"disputeMediaViewBack",children:[Object(h.jsx)("button",{className:"close",onClick:function(){return a(!1)},children:Object(h.jsx)(p,{})}),Object(h.jsx)("div",{className:"view",children:d}),Object(h.jsx)("div",{className:"thumbs",children:f})]})]})},Z=function(e){var t=e.icon,c=e.children,n=e.className,s=e.wrapperClassName,r=e.clickable,o=e.onClick,d=Object(l.useState)(!1),u=Object(i.a)(d,2),b=u[0],O=u[1],x=Object(l.useState)({}),m=Object(i.a)(x,2),f=m[0],p=m[1],v=Object(l.useRef)(),g=Object(l.useRef)();return Object(l.useLayoutEffect)((function(){var e,t,c=null===(e=v.current)||void 0===e?void 0:e.getBoundingClientRect(),n=c.height,s=c.y,i=c.width,r=c.x,l=window.innerHeight-(s+n),o=null===(t=g.current)||void 0===t?void 0:t.getBoundingClientRect();p(Object(a.a)(Object(a.a)({position:"fixed"},(null===o||void 0===o?void 0:o.height)>l?{bottom:window.innerHeight-s}:{top:n+s+4}),{},{right:window.innerWidth-r-i}))}),[b]),Object(h.jsxs)("div",{className:"actions ".concat(n||""),children:[Object(h.jsx)("button",{type:"button",className:"btn",ref:v,onClick:function(e){e.stopPropagation(),O(!0),null===o||void 0===o||o()},children:t||Object(h.jsx)(R,{src:"/menu_dot.png"})}),Object(h.jsx)(j.b,{className:"actions",backdropClass:"actionsBackdrop",open:b,style:f,onBackdropClick:function(){return O(!1)},children:Object(h.jsx)("ul",{ref:g,className:s,onClick:function(e){e.stopPropagation(),!r&&O(!1)},children:c})})]})},G=function(e){var t=e.basepath,c=e.tabs,n=Object(d.g)();return Object(h.jsx)("ul",{className:"tabs",children:c.map((function(e,c){return Object(h.jsx)(u.b,{to:t+e.path,onClick:function(){var t;return null===(t=e.onClick)||void 0===t?void 0:t.call(e)},children:Object(h.jsx)("li",{className:n.location.pathname.startsWith(t+e.path)?"active":"",children:e.label})},c)}))})},W=function(e){var t=e.user;return Object(h.jsxs)("div",{className:"profile",children:[Object(h.jsx)(R,{src:t.profileImg||"/profile-user.jpg"}),Object(h.jsxs)("p",{className:"name",children:[t.name||t.firstName+" "+t.lastName,Object(h.jsx)("span",{className:"contact",children:t.phone})]})]})},J=function(e){var t=e.time,c=e.format;if("Invalid Date"===new Date(t).toString())return t;var n={year:c.includes("YYYY")?"numeric":"2-digit",month:c.includes("MMMM")?"long":c.includes("MMM")?"short":c.includes("MM")?"2-digit":"long",weekday:c.includes("dddd")?"long":c.includes("ddd")?"short":"narrow",day:c.includes("DD")?"2-digit":"numeric",hour:c.includes("hh")?"2-digit":"numeric",minute:c.includes("mm")?"2-digit":"numeric",second:c.includes("ss")?"2-digit":"numeric"},s={};return new Intl.DateTimeFormat("en-IN",n).formatToParts(new Date(t||new Date)).map((function(e){var t=e.type,c=e.value;s[t]=c})),c.replace(/Y+/g,s.year).replace(/M+/g,s.month).replace(/D+/g,s.day).replace(/h+/g,s.hour).replace(/m+/g,s.minute).replace(/s+/g,s.second).replace(/a+/g,s.dayPeriod).replace(/d+/g,s.weekday)},z=function(e){var t=e.format,c=e.children,n=Object(r.a)(e,x);return Object(h.jsx)("time",Object(a.a)(Object(a.a)({},n),{},{children:J({time:c,format:t})}))},K=function(e){var t,c=e.product,n=e.gst,s=e.discount,a=c.price;return!1!==s&&(null===(t=c.discount)||void 0===t?void 0:t.amount)&&(a-=$(c)),(null===n||void 0===n?void 0:n.verified)&&(a+=a*((c.gst||n.amount)/100)),!0===n&&(a+=a*(c.gst/100)),a.fix()},$=function(e){var t=e.discount,c=e.price;return(null===t||void 0===t?void 0:t.amount)?"flat"===t.type?(+t.amount).fix():"percent"===t.type?(+c/100*t.amount).fix():0:null},Q={set:function(e,t){return localStorage.setItem(e,t)},get:function(e){return localStorage.getItem(e)},remove:function(e){return localStorage.removeItem(e)}},X=function(e,t){return e.some((function(e){return e.product._id===t._id}))?e.map((function(e){return e.product._id===t._id?Object(a.a)(Object(a.a)({},e),{},{qty:e.qty+1}):e})):[].concat(Object(s.a)(e),[{product:t,qty:1}])},ee=function(e){var t=e.className,c=e.children;return Object(h.jsx)(Z,{className:"".concat(t||""," tip"),wrapperClassName:"tipWrapper",icon:Object(h.jsx)(R,{src:"/help.png"}),children:c})}},28:function(e,t,c){"use strict";c.d(t,"b",(function(){return p}));var n=c(11),s=c.n(n),a=c(18),i=c(12),r=c(4),l=c(3),o=c(1),j=c(17),d=c(6),u=c(9),b=c(5),h=c(2),O=c(117),x=c(46),m=c(21),f=c(0);c(188);var p=Object(O.io)(),v=function(e){var t=e.setUserCard,c=e.setContacts,n=Object(j.g)(),s=Object(o.useState)(null),a=Object(l.a)(s,2),r=a[0],u=a[1],O=Object(o.useState)([]),x=Object(l.a)(O,2),m=x[0],p=x[1],v=Object(o.useState)(""),g=Object(l.a)(v,2),y=g[0],k=g[1],N=Object(o.useState)(!1),C=Object(l.a)(N,2),S=C[0],w=C[1],M=Object(o.useRef)(),_=Object(o.useCallback)((function(){new RegExp(/^(\+91|91|1|)(?=\d{10}$)/gi).test(y.toLowerCase())?fetch("/api/inviteUser?".concat(new URLSearchParams({q:"+91"+y.replace(/^(\+91|91|1|)(?=\d{10}$)/g,""),origin:window.location.origin}).toString())).then((function(e){return e.json()})).then((function(e){"ok"===e.code?u(Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("button",{onClick:function(){return u(null)},children:"Okay"}),Object(f.jsxs)("div",{children:[Object(f.jsx)(h.B,{}),Object(f.jsxs)("h4",{children:["An invitaion has been sent to"," ","+91"+y.replace(/^(\+91|91|1|)(?=\d{10}$)/g,""),"."]})]})]})):u(Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("button",{onClick:function(){return u(null)},children:"Okay"}),Object(f.jsxs)("div",{children:[Object(f.jsx)(h.i,{}),Object(f.jsx)("h4",{children:"Invitation could not be sent. Please try again."})]})]}))})).catch((function(e){console.log(e),u(Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("button",{onClick:function(){return u(null)},children:"Okay"}),Object(f.jsxs)("div",{children:[Object(f.jsx)(h.i,{}),Object(f.jsx)("h4",{children:"Invitation could not be sent. Make sure you're online."})]})]}))})):u(Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("button",{onClick:function(){return u(null)},children:"Okay"}),Object(f.jsxs)("div",{children:[Object(f.jsx)(h.i,{}),Object(f.jsx)("h4",{children:"Enter a valid phone number to send invitation."})]})]}))}),[y]),D=function(e){e.path.includes(M.current)||w(!1)};return Object(o.useEffect)((function(){return document.addEventListener("click",D),function(){document.removeEventListener("click",D)}}),[]),Object(o.useEffect)((function(){y?(fetch("/api/getUsers?q=".concat(encodeURIComponent(y))).then((function(e){return e.json()})).then((function(e){e&&p(e)})),""===y&&p([])):p([])}),[y]),Object(f.jsxs)("div",{className:"search",children:[Object(f.jsxs)("form",{onSubmit:function(e){return e.preventDefault()},ref:M,children:[Object(f.jsxs)("section",{children:[Object(f.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"17.9",height:"17.9",viewBox:"0 0 17.9 17.9",children:Object(f.jsx)("path",{id:"Path_208","data-name":"Path 208",d:"M17.9,16.324l-3.715-3.715a7.708,7.708,0,0,0,1.576-4.728A7.832,7.832,0,0,0,7.881,0,7.832,7.832,0,0,0,0,7.881a7.832,7.832,0,0,0,7.881,7.881,7.708,7.708,0,0,0,4.728-1.576L16.324,17.9ZM2.252,7.881A5.574,5.574,0,0,1,7.881,2.252a5.574,5.574,0,0,1,5.629,5.629,5.574,5.574,0,0,1-5.629,5.629A5.574,5.574,0,0,1,2.252,7.881Z",transform:"translate(0)",fill:"#b9b9b9"})}),Object(f.jsx)("input",{label:"search",required:!0,placeholder:"Phone Number",onFocus:function(){return w(!0)},value:y,onChange:function(e){return k(e.target.value)}}),Object(f.jsx)(d.b,{className:"sendReq ".concat(m.length>0||!y?"disabled":""),onClick:_,to:"#",children:"Invite"})]}),S&&m.length?Object(f.jsx)("ul",{className:"searchResult",children:m.map((function(e,s){return Object(f.jsx)("a",{onClick:function(){t(e),c((function(t){return[].concat(Object(i.a)(t),[{client:e,messages:[],status:""}])})),n.push("/account/deals/".concat(e._id)),w(!1)},children:Object(f.jsx)("li",{children:Object(f.jsxs)("div",{className:"profile",children:[Object(f.jsx)(h.n,{src:e.profileImg}),Object(f.jsxs)("p",{className:"name",children:[e.firstName+" "+e.lastName,Object(f.jsx)("span",{className:"phone",children:e.phone})]})]})},s)},s)}))}):null]}),Object(f.jsx)(b.b,{className:"msg",open:r,children:r})]})},g=function(e){var t=e.client,c=e.messages,n=(e.lastSeen,e.userCard),s=e.unread,a=Object(o.useContext)(u.a).setContacts,i=Object(j.g)();return Object(f.jsx)("li",{className:t._id===(null===n||void 0===n?void 0:n._id)?"active":void 0,onClick:function(){i.push("/account/deals/".concat(t._id)),a((function(e){return e.map((function(e){var c;return(null===t||void 0===t?void 0:t._id)===(null===(c=e.client)||void 0===c?void 0:c._id)?Object(r.a)(Object(r.a)({},e),{},{lastSeen:(new Date).toISOString(),unread:null}):e}))}))},children:Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(h.n,{src:t.profileImg||"/profile-user.jpg"}),Object(f.jsxs)("div",{children:[Object(f.jsx)("p",{className:"name",children:t.firstName?t.firstName+" "+t.lastName:"Deleted User"}),c.length>0&&Object(f.jsx)("p",{className:"lastMessage",children:c[c.length-1].text}),s?Object(f.jsx)("p",{className:"unread",children:s}):null]})]})})},y=function(e){var t=e.chat,c=e.setChat,n=e.userCard,s=e.setUserCard,a=e.user,O=e.socket,m=e.setContacts,p=Object(o.useContext)(u.d),v=p.setUser,g=p.userType,y=Object(o.useRef)(null),N=Object(o.useRef)(null),w=Object(j.g)(),M=Object(o.useState)([]),_=Object(l.a)(M,2),D=_[0],P=_[1],F=Object(o.useState)(!1),A=Object(l.a)(F,2),T=A[0],R=A[1],Y=Object(o.useState)(!((null===t||void 0===t?void 0:t.length)>=50)),q=Object(l.a)(Y,2),B=q[0],I=q[1],E=Object(o.useState)(2),L=Object(l.a)(E,2),H=L[0],V=L[1],U=Object(o.useState)(null),Z=Object(l.a)(U,2),G=Z[0],W=Z[1];Object(o.useEffect)((function(){O.on("connectedToRoom",(function(e){var t=e.rooms,c=e.newChat,n=e.client,s=e.clientRoom_id;c&&m((function(e){return e.map((function(e){return e.client._id===n?Object(r.a)(Object(r.a)({},e),{},{_id:s}):e}))})),P(t)}))}),[]),Object(o.useEffect)((function(){return D.length&&fetch("/api/updateLastSeen",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({rooms:D})}),function(){D.length&&fetch("/api/updateLastSeen",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({rooms:D})})}}),[D]);return Object(o.useEffect)((function(){(null===t||void 0===t?void 0:t.length)>=50?I(!1):I(!0)}),[t]),Object(f.jsxs)("div",{className:"chat",children:[t?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("div",{className:"chatHead",children:[Object(f.jsxs)("div",{className:"profile",children:[Object(f.jsx)("button",{className:"back",onClick:function(){w.push("/account/deals"),c(null),s(null)},children:Object(f.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",children:Object(f.jsx)("path",{id:"Path_10","data-name":"Path 10",d:"M8,0,6.545,1.455l5.506,5.506H0V9.039H12.052L6.545,14.545,8,16l8-8Z",transform:"translate(16 16) rotate(180)",fill:"#2699fb"})})}),Object(f.jsx)(h.n,{src:n.profileImg||"/profile-user.jpg"}),Object(f.jsxs)("p",{className:"name",children:[n.firstName?n.firstName+" "+n.lastName:"Deleted user",n.lastSeen&&Object(f.jsx)("span",{className:"lastSeen",children:Object(f.jsx)(h.r,{format:"hh:mma, MMM DD",children:n.lastSeen})})]})]}),(""===n.status||"blocked"===n.status)&&Object(f.jsxs)(f.Fragment,{children:["seller"===g?Object(f.jsx)(d.b,{className:"pay",to:"/account/deals/".concat(n._id,"/payment"),children:"Request Milestone"}):Object(f.jsx)(d.b,{className:"pay",to:"/account/deals/".concat(n._id,"/payment"),children:"Pay"}),Object(f.jsxs)(h.a,{children:[""===n.status&&null,Object(f.jsx)(d.b,{to:"/account/deals/".concat(n._id,"/report"),children:"Report"}),Object(f.jsx)("button",{onClick:function(){Object(b.a)({label:" ".concat("blocked"===n.status?"Unblock":"Block"," User"),question:"You sure want to ".concat("blocked"===n.status?"un":"","block this user?"),callback:function(){var e="blocked"===n.status;fetch("/api/".concat(e?"unblockUser":"blockUser"),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({_id:n._id})}).then((function(e){return e.json()})).then((function(t){"ok"===t.code?(v((function(e){return Object(r.a)(Object(r.a)({},e),{},{blockList:t.blockList})})),m((function(t){return t.map((function(t){return t.client._id===n._id?Object(r.a)(Object(r.a)({},t),{},{status:e?"":"blocked"}):t}))})),W(Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("button",{onClick:function(){return W(null)},children:"Okay"}),Object(f.jsxs)("div",{children:[Object(f.jsx)(h.B,{}),Object(f.jsxs)("h4",{children:["User successfully ",e&&"un","blocked."]})]})]}))):W(Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("button",{onClick:function(){return W(null)},children:"Okay"}),Object(f.jsxs)("div",{children:[Object(f.jsx)(h.i,{}),Object(f.jsxs)("h4",{children:["Could not ",e&&"un","block user. try again."]})]})]}))})).catch((function(t){console.log(t),W(Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("button",{onClick:function(){return W(null)},children:"Okay"}),Object(f.jsxs)("div",{children:[Object(f.jsx)(h.i,{}),Object(f.jsxs)("h4",{children:["Could not ",e&&"un","block user. Make sure you're online."]})]})]}))}))}})},children:"blocked"===n.status?"Unblock":"Block"})]})]})]}),Object(f.jsxs)("ul",{className:"chats",ref:y,onScroll:function(e){var t;((null===(t=N.current)||void 0===t?void 0:t.getBoundingClientRect())||{}).y>0&&!T&&(R(!0),fetch("/api/getMessages?client=".concat(n._id,"&page=").concat(H)).then((function(e){return e.json()})).then((function(e){R(!1),"ok"===e.code&&(m((function(t){return t.map((function(t){var c;return t._id===(null===(c=e.contact)||void 0===c?void 0:c._id)?Object(r.a)(Object(r.a)({},t),{},{messages:e.contact.messages}):t}))})),V((function(e){return e+1})),e.contact.total===e.contact.messages.length&&I(!0))})).catch((function(e){R(!1),console.log(e),W(Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("button",{onClick:function(){return W(null)},children:"Okay"}),Object(f.jsxs)("div",{children:[Object(f.jsx)(h.i,{}),Object(f.jsx)("h4",{children:"Could not get messages. Make sure you're online."})]})]}))})))},children:[Object(i.a)(t.map((function(e,c){return Object(f.jsx)(k,{chat:t,msg:e,i:c,user:a},e._id)}))).reverse(),!B&&Object(f.jsx)("li",{className:"loading",ref:N,children:"Loading"})]}),""===n.status&&Object(f.jsx)(C,{onSuccess:function(){var e;null===(e=y.current)||void 0===e||e.scrollBy(0,2*y.current.scrollHeight)},rooms:D,user:n._id,newChat:!n.lastSeen})]}):Object(f.jsxs)("div",{className:"startChat",children:[Object(f.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26.55",height:"25.219",viewBox:"0 0 26.55 25.219",children:Object(f.jsx)("path",{id:"Path_1","data-name":"Path 1",d:"M-242.2-184.285h-13l26.55-10.786-4.252,25.219-5.531-10.637-2.127,4.68v-6.382l7.659-9.148h2.34",transform:"translate(255.198 195.071)",fill:"#707070"})}),Object(f.jsx)("p",{children:"start a chat"})]}),Object(f.jsx)(b.b,{className:"milestoneRequest",head:!0,label:"seller"===g?"Request Milestone":"Create Milestone",open:w.location.pathname.match(/^\/account\/deals\/.+\/payment$/),setOpen:function(){return w.push("/account/deals/".concat(n._id))},children:Object(f.jsx)(x.MilestoneForm,{action:"seller"===g?"request":"create",client:n,onSuccess:function(e){var t;w.push("/account/deals/".concat(n._id)),W(Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("button",{onClick:function(){return W(null)},children:"Okay"}),Object(f.jsxs)("div",{children:[Object(f.jsx)(h.B,{}),Object(f.jsxs)("h4",{className:"amount",children:["\u20b9",null===(t=e.milestone)||void 0===t?void 0:t.amount]}),Object(f.jsx)("h4",{children:"Milestone has been created"})]}),Object(f.jsx)(d.b,{to:"/account/hold",onClick:function(){return W(null)},children:"Check your Delivery pay Hold"})]}))}})}),Object(f.jsx)(j.b,{path:"/account/deals/:_id/report",component:function(e){var t=e.location;return Object(f.jsx)(b.b,{open:!0,head:!0,label:"Report User",className:"userReport",setOpen:function(){return w.push(t.pathname.replace(/\/report/,""))},children:Object(f.jsx)("div",{className:"content",children:Object(f.jsx)(S,{user:n,onSuccess:function(){w.push(w.location.pathname.replace(/\/report/,"")),W(Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("button",{onClick:function(){return W(null)},children:"Okay"}),Object(f.jsxs)("div",{children:[Object(f.jsx)(h.B,{}),Object(f.jsx)("h4",{children:"User has been reported."})]})]}))}})})})}}),Object(f.jsx)(b.b,{className:"msg",open:G,children:G})]})},k=function(e){var t,c,n=e.chat,s=e.msg,a=e.i,i=e.user,r=Object(j.g)(),d=Object(o.useState)(null),u=Object(l.a)(d,2),b=u[0],O=u[1];if(Object(o.useEffect)((function(){s.milestoneId&&fetch("/api/milestone?q=".concat(s.milestoneId)).then((function(e){return e.json()})).then((function(e){e.milestones.length&&O(e.milestones[0])}))}),[]),!s)return null;var x=Math.abs(new Date(s.createdAt).getTime()-new Date(null===(t=n[a+1])||void 0===t?void 0:t.createdAt).getTime())>12e4,m=Object(h.K)({time:s.createdAt,format:"YYYY-MM-DD"})!==Object(h.K)({time:null===(c=n[a-1])||void 0===c?void 0:c.createdAt,format:"YYYY-MM-DD"})||0===a;return Object(f.jsxs)("li",{className:"bubble ".concat(s.from===i._id?"user":"client"," ").concat(b?"milestone":""),children:[m&&Object(f.jsx)(h.r,{className:"dateStamp",format:"MMM DD, YYYY",children:s.createdAt}),s.text&&Object(f.jsxs)("p",{className:"text",onClick:function(){b&&r.push("/account/hold?q=".concat(b._id))},children:[b&&Object(f.jsxs)("span",{className:"amount",children:["\u20b9",b.amount]}),s.text]}),s.media&&Object(f.jsx)(N,{link:s.media}),(x||a===n.length-1)&&Object(f.jsx)(h.r,{className:"timestamp",format:"hh:mm a",children:s.createdAt})]})},N=function(e){var t=e.link,c=null,n=null,s=Object(o.useState)(!1),a=Object(l.a)(s,2),i=a[0],r=a[1];return t.match(/(\.gif|\.png|\.jpg|\.jpeg|\.webp)$/i)?c=Object(f.jsx)(h.n,{src:t,onClick:function(){return r(!0)}}):t.match(/(\.mp3|\.ogg|\.amr|\.m4a|\.flac|\.wav|\.aac)$/i)?c=Object(f.jsx)("audio",{src:t,controls:"on"}):t.match(/(\.mp4|\.mov|\.avi|\.flv|\.wmv|\.webm)$/i)?(c=Object(f.jsxs)("div",{className:"videoThumb",children:[Object(f.jsx)("video",{src:t,onClick:function(){return r(!0)}}),Object(f.jsx)(h.n,{src:"/play_btn.png"})]}),n=Object(f.jsx)("video",{src:t,controls:"on",autoPlay:"on"})):c=Object(f.jsxs)("a",{href:t,target:"_blank",className:"link",children:[Object(f.jsx)(h.n,{src:"/file_icon.png"}),t]}),Object(f.jsxs)("div",{className:"file",children:[c,Object(f.jsxs)(b.b,{open:i,className:"chatMediaView",children:[Object(f.jsx)("button",{className:"close",onClick:function(){return r(!1)},children:Object(f.jsx)(h.G,{})}),n||c]})]})},C=function(e){var t=e.rooms,c=e.user,n=e.newChat,j=Object(o.useRef)(null),d=Object(o.useRef)(null),u=Object(o.useState)(null),O=Object(l.a)(u,2),x=O[0],v=O[1],g=Object(o.useState)(!1),y=Object(l.a)(g,2),k=y[0],N=(y[1],Object(o.useState)("")),C=Object(l.a)(N,2),S=C[0],M=C[1],_=Object(o.useState)([]),D=Object(l.a)(_,2),P=D[0],F=D[1],A=function(){var e=Object(a.a)(s.a.mark((function e(a){var i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),p.connected){e.next=4;break}return v(Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("button",{onClick:function(){return v(null)},children:"Okay"}),Object(f.jsxs)("div",{children:[Object(f.jsx)(h.i,{}),Object(f.jsx)("h4",{children:"Could not connect to server. Make sure you're online."})]})]})),e.abrupt("return");case 4:if("https://cdn.deliverypay.in",!P.length){e.next=11;break}return e.next=8,Object(h.E)({files:P,setMsg:v});case 8:e.t0=e.sent,e.next=12;break;case 11:e.t0=[];case 12:if(i=e.t0,!P.length||i.length){e.next=16;break}return v(Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("button",{onClick:function(){return v(null)},children:"Okay"}),Object(f.jsxs)("div",{children:[Object(f.jsx)(h.i,{}),Object(f.jsx)("h4",{children:"Could not send files. please try again."})]})]})),e.abrupt("return");case 16:i.length&&(i.forEach((function(e,s){p.emit("messageToServer",Object(r.a)(Object(r.a)({rooms:t},n&&{newChat:n}),{},{message:{to:c,media:e}}))})),F([])),S&&t.length&&(p.emit("messageToServer",Object(r.a)(Object(r.a)({rooms:t},n&&{newChat:n}),{},{message:{to:c,text:S}})),j.current.focus(),M(""));case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){p.on("sendFail",(function(e){var t=e.err;v(Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("button",{onClick:function(){return v(null)},children:"Okay"}),Object(f.jsxs)("div",{children:[Object(f.jsx)(h.i,{}),Object(f.jsx)("h4",{children:t})]})]}))}))}),[]),Object(o.useEffect)((function(){p.connected||p.connect()}),[S,P]),Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("form",{onSubmit:A,ref:d,className:k?"loading":"",children:[Object(f.jsx)(w,{files:P,setFiles:F}),Object(f.jsxs)("section",{children:[Object(f.jsx)(m.a,{autoFocus:!0,ref:j,type:"text",value:S,style:{height:"100px"},onChange:function(e){return M(e.target.value)},onKeyDown:function(e){13!==e.keyCode||e.altKey?13===e.keyCode&&e.altKey&&M(S+"\n"):A(e)}}),Object(f.jsxs)("div",{className:"fileUpload",children:[Object(f.jsx)("input",{type:"file",multiple:!0,onChange:function(e){F((function(t){return[].concat(Object(i.a)(t),Object(i.a)(Object(i.a)(e.target.files).filter((function(e){return!P.some((function(t){return t.name===e.name}))}))))}))}}),Object(f.jsx)(h.n,{src:"/paperclip.svg"})]})]}),Object(f.jsx)("button",{type:"submit",disabled:k,children:Object(f.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26.55",height:"25.219",viewBox:"0 0 26.55 25.219",children:Object(f.jsx)("path",{id:"Path_1","data-name":"Path 1",d:"M-242.2-184.285h-13l26.55-10.786-4.252,25.219-5.531-10.637-2.127,4.68v-6.382l7.659-9.148h2.34",transform:"translate(255.198 195.071)",fill:"#fff"})})})]}),Object(f.jsx)(b.b,{open:x,className:"msg",children:x})]})},S=function(e){var t=e.user,c=e.onSuccess,n=Object(o.useState)(!1),s=Object(l.a)(n,2),a=s[0],i=s[1],r=Object(o.useState)(""),j=Object(l.a)(r,2),d=j[0],u=j[1],O=Object(o.useState)(null),x=Object(l.a)(O,2),p=x[0],v=x[1];return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("form",{onSubmit:function(e){e.preventDefault(),i(!0),fetch("/api/reportUser",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:t._id,message:d})}).then((function(e){return e.json()})).then((function(e){"ok"===e.code?null===c||void 0===c||c(e):v(Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("button",{onClick:function(){return v(null)},children:"Okay"}),Object(f.jsxs)("div",{children:[Object(f.jsx)(h.i,{}),Object(f.jsx)("h4",{children:"Report could not be submitted. try again."})]})]}))})).catch((function(e){console.log(e),v(Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("button",{onClick:function(){return v(null)},children:"Okay"}),Object(f.jsxs)("div",{children:[Object(f.jsx)(h.i,{}),Object(f.jsx)("h4",{children:"Report could not be submitted. Make sure you're online."})]})]}))}))},children:[Object(f.jsxs)("section",{children:[Object(f.jsx)("label",{children:"Messag"}),Object(f.jsx)(m.a,{required:!0,onChange:function(e){return u(e.target.value)}})]}),Object(f.jsx)("section",{className:"btns",children:Object(f.jsx)("button",{className:"submit",children:"Submit"})})]}),a&&Object(f.jsx)("div",{className:"spinnerContainer",children:Object(f.jsx)("div",{className:"spinner"})}),Object(f.jsx)(b.b,{className:"msg",open:p,children:p})]})},w=function(e){var t=e.files,c=e.setFiles;return 0===t.length?null:Object(f.jsx)("div",{className:"preview",children:t.map((function(e){var t={type:e.type,name:e.name,url:URL.createObjectURL(e)},n=t.type.startsWith("image");return Object(f.jsxs)("div",{className:"file ".concat(n?"thumb":"any"),children:[Object(f.jsx)("button",{className:"close",type:"button",onClick:function(){return c((function(e){return e.filter((function(e){return t.name!==e.name}))}))},children:Object(f.jsx)(h.G,{})}),Object(f.jsx)(h.n,{className:n?"thumb":"",src:n?t.url:"/file_icon.png"}),!n&&Object(f.jsx)("p",{className:"filename",children:e.name})]},e.name)}))})};t.a=function(e){e.history,e.location;var t,c,n=e.match,s=Object(o.useContext)(u.d),a=s.user,i=(s.setUser,Object(o.useContext)(u.a)),j=i.contacts,d=i.setContacts,b=Object(o.useState)(null),O=Object(l.a)(b,2),x=O[0],m=O[1],k=Object(o.useState)(null),N=Object(l.a)(k,2),C=N[0],S=N[1];return Object(o.useEffect)((function(){x&&(S(null===x||void 0===x?void 0:x.messages),p.emit("initiateChat",Object(r.a)({client_id:null===x||void 0===x?void 0:x._id},void 0===x.messages&&{newChat:!0})))}),[x]),Object(o.useEffect)((function(){if(n.params._id){var e=j.find((function(e){return e.client._id.toString()===n.params._id}));if(e){var t=e.client,c=e.messages,s=e.status;e.lastSeen;m(Object(r.a)(Object(r.a)({},t),{},{status:s,messages:c}))}}}),[n.params,j]),Object(f.jsxs)("div",{className:"chatContainer ".concat(x?"chatOpen":""),children:[Object(f.jsxs)("div",{className:"contactsContainer",children:[Object(f.jsx)(v,{setUserCard:m,setContacts:d}),Object(f.jsx)("div",{className:"userCard",children:x?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("div",{className:"profile",children:[Object(f.jsx)(h.n,{src:x.profileImg||"/profile-user.jpg"}),Object(f.jsxs)("div",{className:"details",children:[Object(f.jsx)("p",{className:"name",children:x.firstName?x.firstName+" "+x.lastName:"Deleted user"}),Object(f.jsx)("a",{className:"phone",children:x.phone}),Object(f.jsx)("a",{href:"mailto:".concat(x.email),className:"email",children:x.email}),Object(f.jsx)("p",{className:"add",children:"".concat((null===(t=x.address)||void 0===t?void 0:t.city)||""," ").concat((null===(c=x.address)||void 0===c?void 0:c.country)||"")})]})]}),Object(f.jsxs)("div",{className:"clas",children:[Object(f.jsx)("p",{className:"status",children:x.status}),Object(f.jsx)("button",{children:"Chat"})]})]}):Object(f.jsx)("p",{className:"userCard placeholder",children:"User card"})}),Object(f.jsx)("p",{className:"label",children:"Messages"}),Object(f.jsx)("div",{className:"peopleWrapper",children:Object(f.jsxs)("ul",{className:"people",children:[j.map((function(e){var t=e.client,c=e.messages,n=e.status,s=e.lastSeen,a=e.unread;return Object(f.jsx)(g,{client:t,messages:c,status:n,lastSeen:s,userCard:x,unread:a},t._id)})),0===j.length&&Object(f.jsx)("p",{className:"placeholder",children:"Start making payments now."})]})})]}),Object(f.jsx)(y,{chat:C,setContacts:d,userCard:x,setUserCard:m,user:a,socket:p,setChat:S})]})}},34:function(e,t,c){"use strict";c.d(t,"c",(function(){return u})),c.d(t,"a",(function(){return b})),c.d(t,"b",(function(){return h})),c.d(t,"d",(function(){return O})),c.d(t,"e",(function(){return x}));var n=c(11),s=c.n(n),a=c(18),i=c(3),r=c(1),l=c(2),o=c(5),j=c(21),d=c(0),u=function(e){var t=e.milestone,c=e.setReleaseForm,n=e.onSuccess,s=Object(r.useState)(t.amount),a=Object(i.a)(s,2),j=a[0],u=(a[1],Object(r.useState)(null)),b=Object(i.a)(u,2),h=b[0],O=b[1];return Object(d.jsxs)("form",{onSubmit:function(e){e.preventDefault(),fetch("/api/releaseMilestone",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({_id:t._id,amount:j})}).then((function(e){return e.json()})).then((function(e){var t=e.code,c=e.milestone;c?null===n||void 0===n||n(c):O(403===t?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("button",{onClick:function(){return O(null)},children:"Okay"}),Object(d.jsxs)("div",{children:[Object(d.jsx)(l.i,{}),Object(d.jsx)("h4",{children:"Could not release Milestone due to low balance."})]})]}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("button",{onClick:function(){return O(null)},children:"Okay"}),Object(d.jsxs)("div",{children:[Object(d.jsx)(l.i,{}),Object(d.jsx)("h4",{children:"Could not release Milestone."})]})]}))})).catch((function(e){console.log(e),d.Fragment,l.i}))},children:["You sure want to release this Milestone?",Object(d.jsxs)("section",{className:"btns",children:[Object(d.jsx)("button",{type:"submit",children:"Confirm"}),Object(d.jsx)("button",{className:"cancel",type:"button",onClick:function(){return c(!1)},children:"Cancel"})]}),Object(d.jsx)(o.b,{open:h,className:"msg",children:h})]})},b=function(e){var t,c,n,s,a,l,o,j=e.client,u=e.onSuccess,b=e.onCancel,h=Object(r.useState)(j?j.name||j.firstName+" "+j.lastName:""),O=Object(i.a)(h,2),x=O[0],m=O[1],f=Object(r.useState)((null===j||void 0===j?void 0:j.phone)||""),p=Object(i.a)(f,2),v=p[0],g=p[1],y=Object(r.useState)((null===j||void 0===j||null===(t=j.address)||void 0===t?void 0:t.zip)||""),k=Object(i.a)(y,2),N=k[0],C=k[1],S=Object(r.useState)((null===j||void 0===j||null===(c=j.address)||void 0===c?void 0:c.locality)||""),w=Object(i.a)(S,2),M=w[0],_=w[1],D=Object(r.useState)((null===j||void 0===j||null===(n=j.address)||void 0===n?void 0:n.street)||""),P=Object(i.a)(D,2),F=P[0],A=P[1],T=Object(r.useState)((null===j||void 0===j||null===(s=j.address)||void 0===s?void 0:s.city)||""),R=Object(i.a)(T,2),Y=R[0],q=R[1],B=Object(r.useState)((null===j||void 0===j||null===(a=j.address)||void 0===a?void 0:a.state)||""),I=Object(i.a)(B,2),E=I[0],L=I[1],H=Object(r.useState)((null===j||void 0===j||null===(l=j.address)||void 0===l?void 0:l.landmark)||""),V=Object(i.a)(H,2),U=V[0],Z=V[1],G=Object(r.useState)((null===j||void 0===j||null===(o=j.address)||void 0===o?void 0:o.altPhone)||""),W=Object(i.a)(G,2),J=W[0],z=W[1];return Object(d.jsxs)("form",{className:"addressForm",onSubmit:function(e){e.preventDefault(),null===u||void 0===u||u({address:{name:x,phone:v,street:F,city:Y,state:E,zip:N,locality:M,landmark:U,altPhone:J}})},children:[Object(d.jsxs)("section",{children:[Object(d.jsx)("label",{htmlFor:"name",children:"Full Name"}),Object(d.jsx)("input",{value:x,onChange:function(e){return m(e.target.value)},type:"text",name:"name",required:!0})]}),Object(d.jsxs)("section",{children:[Object(d.jsx)("label",{htmlFor:"phone",children:"Phone Number"}),Object(d.jsx)("input",{value:v,onChange:function(e){return g(e.target.value)},type:"tel",name:"phone",required:!0})]}),Object(d.jsxs)("section",{children:[Object(d.jsx)("label",{htmlFor:"zip",children:"PIN Code"}),Object(d.jsx)("input",{value:N,onChange:function(e){return C(e.target.value)},type:"number",name:"zip",required:!0})]}),Object(d.jsxs)("section",{children:[Object(d.jsx)("label",{htmlFor:"locality",children:"Locality"}),Object(d.jsx)("input",{value:M,onChange:function(e){return _(e.target.value)},type:"text",name:"locality",required:!0})]}),Object(d.jsxs)("section",{className:"street",children:[Object(d.jsx)("label",{htmlFor:"address",children:"Address"}),Object(d.jsx)("textarea",{value:F,onChange:function(e){return A(e.target.value)},resiz:"off",type:"text",name:"address",required:!0})]}),Object(d.jsxs)("section",{children:[Object(d.jsx)("label",{htmlFor:"city",children:"City"}),Object(d.jsx)("input",{value:Y,onChange:function(e){return q(e.target.value)},type:"text",name:"city",required:!0})]}),Object(d.jsxs)("section",{children:[Object(d.jsx)("label",{htmlFor:"state",children:"State"}),Object(d.jsx)("input",{value:E,onChange:function(e){return L(e.target.value)},type:"text",name:"state",required:!0})]}),Object(d.jsxs)("section",{children:[Object(d.jsx)("label",{htmlFor:"landmark",children:"Landmark (Optional)"}),Object(d.jsx)("input",{value:U,onChange:function(e){return Z(e.target.value)},type:"text",name:"landmark"})]}),Object(d.jsxs)("section",{children:[Object(d.jsx)("label",{htmlFor:"altPhone",children:"Alternate Phone (Optional)"}),Object(d.jsx)("input",{value:J,onChange:function(e){return z(e.target.value)},type:"tel",name:"altPhone"})]}),Object(d.jsx)("button",{className:"save",children:"Save"}),Object(d.jsx)("button",{className:"cancel",type:"button",onClick:function(){return null===b||void 0===b?void 0:b()},children:"Cancel"}),Object(d.jsx)("section",{className:"pBtm"})]})},h=function(e){var t=e.milestone,c=(e.setDisputeForm,e.onSuccess),n=Object(r.useState)(""),u=Object(i.a)(n,2),b=u[0],h=u[1],O=Object(r.useState)(!1),x=Object(i.a)(O,2),m=x[0],f=x[1],p=Object(r.useState)(""),v=Object(i.a)(p,2),g=v[0],y=v[1],k=Object(r.useState)([]),N=Object(i.a)(k,2),C=N[0],S=N[1],w=Object(r.useState)(null),M=Object(i.a)(w,2),_=M[0],D=M[1],P=function(){var e=Object(a.a)(s.a.mark((function e(n){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),f(!0),!C.length){e.next=8;break}return e.next=5,Object(l.E)({files:C,setMsg:D});case 5:e.t0=e.sent,e.next=9;break;case 8:e.t0=[];case 9:a=e.t0,fetch("/api/fileDispute",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({issue:b,milestoneId:t._id,defendantId:t.client._id,_case:{dscr:g,files:a}})}).then((function(e){return e.json()})).then((function(e){f(!1),"ok"===e.code?null===c||void 0===c||c(e.milestone):403===e.code?D(Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("button",{onClick:function(){return D(null)},children:"Okay"}),Object(d.jsxs)("div",{children:[Object(d.jsx)(l.i,{}),Object(d.jsx)("h4",{children:"Insufficient fund! you have to have \u20b9500 in your wallet to file a dispute."})]})]})):D(Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("button",{onClick:function(){return D(null)},children:"Okay"}),Object(d.jsxs)("div",{children:[Object(d.jsx)(l.i,{}),Object(d.jsx)("h4",{children:"Could not file dispute."})]})]}))})).catch((function(e){f(!0),console.log(e),D(Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("button",{onClick:function(){return D(null)},children:"Okay"}),Object(d.jsxs)("div",{children:[Object(d.jsx)(l.i,{}),Object(d.jsx)("h4",{children:"Could not file dispute. make sure you're online."})]})]}))}));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("form",{className:"disputeForm",onSubmit:P,children:[Object(d.jsx)("h4",{children:"You feel like you are getting scammed?"}),Object(d.jsxs)("section",{children:[Object(d.jsx)("label",{htmlFor:"issue",children:"Issue"}),Object(d.jsx)(l.h,{name:"issue",options:"buyer"===t.role?[{label:"Buyer Not Releasing Payments",value:"Buyer Not Releasing Payments"}]:[{label:"Goods Not Received",value:"Goods Not Received"},{label:"Services Not Received",value:"Services Not Received"},{label:"Damaged",value:"Damaged"},{label:"Not As Agreed",value:"Not As Agreed"},{label:"Not As Displayed",value:"Not As Displayed"}],onChange:function(e){h(e.value)}})]}),Object(d.jsxs)("section",{children:[Object(d.jsx)("label",{htmlFor:"description",children:"Description"}),Object(d.jsx)(j.a,{name:"description",value:g,required:!0,onChange:function(e){return y(e.target.value)}})]}),Object(d.jsxs)("section",{children:[Object(d.jsx)("label",{htmlFor:"for",children:"Upload images to prove your case. ie: Product of image, proof of delivery."}),Object(d.jsx)(l.k,{multiple:!0,accept:"audio/*,video/*,image/*",onChange:function(e){return S(e)}})]}),Object(d.jsxs)("section",{className:"btns",children:[Object(d.jsx)("button",{className:"submit",type:"submit",children:"Submit"}),Object(d.jsx)("button",{className:"cancel",type:"button",children:"Cancel"})]}),Object(d.jsx)("div",{className:"pBtm"})]}),m&&Object(d.jsx)("div",{className:"spinnerContainer",children:Object(d.jsx)("div",{className:"spinner"})}),Object(d.jsx)(o.b,{open:_,className:"msg",children:_})]})},O=function(e){var t=e.onSuccess,c=Object(r.useState)(!1),n=Object(i.a)(c,2),u=n[0],b=n[1],h=Object(r.useState)(!1),O=Object(i.a)(h,2),x=O[0],m=O[1],f=Object(r.useState)(""),p=Object(i.a)(f,2),v=p[0],g=p[1],y=Object(r.useState)(""),k=Object(i.a)(y,2),N=k[0],C=k[1],S=Object(r.useState)(""),w=Object(i.a)(S,2),M=w[0],_=w[1],D=Object(r.useState)(""),P=Object(i.a)(D,2),F=P[0],A=P[1],T=Object(r.useState)(""),R=Object(i.a)(T,2),Y=R[0],q=R[1],B=function(){var e=Object(a.a)(s.a.mark((function e(c){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.preventDefault(),b(!0),!F.length){e.next=8;break}return e.next=5,Object(l.E)({files:F,setMsg:m});case 5:e.t0=e.sent,e.next=9;break;case 8:e.t0=[];case 9:n=e.t0,fetch("/api/openTicket",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({issue:v,milestone:N,transaction:M,message:{body:Y,files:n}})}).then((function(e){return e.json()})).then((function(e){b(!1),"ok"===e.code?null===t||void 0===t||t(e.ticket):"milestone ID is invalid"===e.message?m(Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("button",{onClick:function(){return m(null)},children:"Okay"}),Object(d.jsxs)("div",{children:[Object(d.jsx)(l.i,{}),Object(d.jsx)("h4",{children:"Milestone Id is invalid."})]})]})):m(Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("button",{onClick:function(){return m(null)},children:"Okay"}),Object(d.jsxs)("div",{children:[Object(d.jsx)(l.i,{}),Object(d.jsx)("h4",{children:"Ticket could not be submitted."})]})]}))})).catch((function(e){b(!1),console.log(e),m(Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("button",{onClick:function(){return m(null)},children:"Okay"}),Object(d.jsxs)("div",{children:[Object(d.jsx)(l.i,{}),Object(d.jsx)("h4",{children:"Ticket could not be submitted. Make sure you're online."})]})]}))}));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("form",{className:"ticketForm",onSubmit:B,children:[Object(d.jsxs)("section",{children:[Object(d.jsx)("label",{children:"Issue"}),Object(d.jsx)("input",{value:v,required:!0,onChange:function(e){return g(e.target.value)}})]}),Object(d.jsxs)("section",{children:[Object(d.jsx)("label",{children:"Milestone ID (optional)"}),Object(d.jsx)("input",{value:N,onChange:function(e){return C(e.target.value)}})]}),Object(d.jsxs)("section",{children:[Object(d.jsx)("label",{children:"Transaction ID (optional)"}),Object(d.jsx)("input",{value:M,onChange:function(e){return _(e.target.value)}})]}),Object(d.jsxs)("section",{children:[Object(d.jsx)("label",{children:"Detail"}),Object(d.jsx)(j.a,{required:!0,value:Y,onChange:function(e){return q(e.target.value)}})]}),Object(d.jsxs)("section",{children:[Object(d.jsx)("label",{htmlFor:"for",children:"Upload relevant files (optional)"}),Object(d.jsx)(l.k,{onChange:function(e){return A(e)}})]}),Object(d.jsxs)("section",{className:"btns",children:[Object(d.jsx)("button",{className:"submit",type:"submit",children:"Submit"}),Object(d.jsx)("button",{className:"cancel",type:"button",children:"Cancel"})]}),Object(d.jsx)("div",{className:"pBtm"})]}),u&&Object(d.jsx)("div",{className:"spinnerContainer",children:Object(d.jsx)("div",{className:"spinner"})}),Object(d.jsx)(o.b,{open:x,className:"msg",children:x})]})},x=function(e){var t=e._id,c=e.onSuccess,n=Object(r.useState)(!1),u=Object(i.a)(n,2),b=u[0],h=u[1],O=Object(r.useState)(!1),x=Object(i.a)(O,2),m=x[0],f=x[1],p=Object(r.useState)([]),v=Object(i.a)(p,2),g=v[0],y=v[1],k=Object(r.useState)(""),N=Object(i.a)(k,2),C=N[0],S=N[1],w=function(){var e=Object(a.a)(s.a.mark((function e(n){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),h(!0),!g.length){e.next=8;break}return e.next=5,Object(l.E)({files:g,setMsg:f});case 5:e.t0=e.sent,e.next=9;break;case 8:e.t0=[];case 9:a=e.t0,fetch("/api/addTicketReply",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({_id:t,message:{body:C,files:a}})}).then((function(e){return e.json()})).then((function(e){h(!1),"ok"===e.code?null===c||void 0===c||c(e.ticket):f(Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("button",{onClick:function(){return f(null)},children:"Okay"}),Object(d.jsxs)("div",{children:[Object(d.jsx)(l.i,{}),Object(d.jsx)("h4",{children:"Reply could not be submitted."})]})]}))})).catch((function(e){h(!1),console.log(e),f(Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("button",{onClick:function(){return f(null)},children:"Okay"}),Object(d.jsxs)("div",{children:[Object(d.jsx)(l.i,{}),Object(d.jsx)("h4",{children:"Reply could not be submitted. Make sure you're online."})]})]}))}));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("form",{className:"ticketReplyForm",onSubmit:w,children:[Object(d.jsxs)("section",{children:[Object(d.jsx)("label",{children:"Message"}),Object(d.jsx)(j.a,{required:!0,value:C,onChange:function(e){return S(e.target.value)}})]}),Object(d.jsxs)("section",{children:[Object(d.jsx)("label",{htmlFor:"for",children:"Upload relevant files (optional)"}),Object(d.jsx)(l.k,{accept:"audio/*,video/*,image/*",multiple:!0,onChange:function(e){return y(e)}})]}),Object(d.jsxs)("section",{className:"btns",children:[Object(d.jsx)("button",{className:"submit",type:"submit",children:"Submit"}),Object(d.jsx)("button",{className:"cancel",type:"button",children:"Cancel"})]}),Object(d.jsx)("div",{className:"pBtm"})]}),b&&Object(d.jsx)("div",{className:"spinnerContainer",children:Object(d.jsx)("div",{className:"spinner"})}),Object(d.jsx)(o.b,{open:m,className:"msg",children:m})]})}},46:function(e,t,c){"use strict";c.r(t),c.d(t,"UserSearch",(function(){return Nt})),c.d(t,"ProfileAvatar",(function(){return Ct})),c.d(t,"MilestoneForm",(function(){return Mt}));var n=c(12),s=c(4),a=c(3),i=c(1),r=c(9),l=c(17),o=c(6),j=c(5),d=c(2),u=c(34),b=c(23),h=c(22),O=c.n(h),x=c(0);c(146);var m=function(e){var t,c=e.milestone;return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("div",{className:"clientDetail",children:[Object(x.jsxs)("div",{className:"profile",children:[Object(x.jsx)(d.n,{src:c.client.profileImg||"/profile-user.jpg"}),Object(x.jsx)("p",{className:"name",children:c.client.firstName+" "+c.client.lastName})]}),Object(x.jsx)("div",{className:"milestoneDetail",children:Object(x.jsxs)("ul",{children:[Object(x.jsxs)("li",{children:[Object(x.jsx)("p",{children:"Date"}),"-",Object(x.jsx)("p",{children:Object(x.jsx)(d.r,{format:"DD MMM, YYYY. hh:mm a",children:c.createdAt})})]}),Object(x.jsxs)("li",{children:[Object(x.jsx)("p",{children:"Role"}),"-",Object(x.jsx)("p",{className:"role",children:c.role})]}),Object(x.jsxs)("li",{children:[Object(x.jsx)("p",{children:"Desciption"}),"-",Object(x.jsx)("p",{children:c.dscr})]}),Object(x.jsxs)("li",{children:[Object(x.jsx)("p",{children:"Milestone ID"}),"-",Object(x.jsx)("p",{children:c._id})]}),Object(x.jsxs)("li",{className:"status",children:[Object(x.jsx)("p",{children:"Status"}),"-",Object(x.jsx)("p",{children:c.status})]})]})})]}),Object(x.jsxs)("ul",{className:"steps ".concat(c.status," ").concat(null===(t=c.dispute)||void 0===t?void 0:t.status),children:[Object(x.jsxs)("li",{className:"step pending",children:[Object(x.jsxs)("div",{className:"icons",children:[Object(x.jsx)(d.A,{className:"default"}),Object(x.jsx)(d.y,{className:"blank"}),Object(x.jsx)(d.z,{className:"filled"})]}),Object(x.jsx)("p",{children:"Deposite recieved"})]}),Object(x.jsxs)("li",{className:"progress pending",children:[Object(x.jsx)(d.v,{}),Object(x.jsx)(d.w,{}),Object(x.jsx)(d.x,{})]}),Object(x.jsxs)("li",{className:"step onhold",children:[Object(x.jsxs)("div",{className:"icons",children:[Object(x.jsx)(d.A,{className:"default"}),Object(x.jsx)(d.y,{className:"blank"}),Object(x.jsx)(d.z,{className:"filled"})]}),Object(x.jsx)("p",{children:"Funds on Hold"})]}),Object(x.jsxs)("li",{className:"progress onhold",children:[Object(x.jsx)(d.v,{}),Object(x.jsx)(d.w,{}),Object(x.jsx)(d.x,{})]}),Object(x.jsxs)("li",{className:"step released",children:[Object(x.jsxs)("div",{className:"icons",children:[Object(x.jsx)(d.A,{className:"default"}),Object(x.jsx)(d.y,{className:"blank"}),Object(x.jsx)(d.z,{className:"filled"})]}),Object(x.jsx)("p",{children:"Released"})]})]})]})},f=function(e){var t,c,n,r,o,b,h=e.milestone,O=e.setMilestones,f=(Object(l.g)(),Object(i.useState)(!1)),p=Object(a.a)(f,2),v=p[0],g=p[1],y=Object(i.useState)(!1),k=Object(a.a)(y,2),N=k[0],C=k[1],S=Object(i.useState)(null),w=Object(a.a)(S,2),M=w[0],_=w[1],D=null,P=null;(null===(t=h.dispute)||void 0===t?void 0:t.plaintiff._id)===h.client._id?(D=null===(r=h.dispute)||void 0===r||null===(o=r.defendant)||void 0===o||null===(b=o.case)||void 0===b?void 0:b.dscr,P="client"):(null===(c=h.dispute)||void 0===c?void 0:c.defendant._id)===h.client._id&&(P="self");var F=function(){fetch("/api/approveMilestone",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({milestone_id:h._id,amount:h.amount})}).then((function(e){return e.json()})).then((function(e){"ok"===e.code?O((function(t){return t.map((function(t){return t._id===e.milestone._id?Object(s.a)(Object(s.a)({},e.milestone),{},{client:h.client,role:h.role}):t}))})):403===e.code?_(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return _(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Could not approve milestone due to low balance."})]})]})):_(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return _(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Could not approve milestone. Please try again."})]})]}))})).catch((function(e){console.log(e),_(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return _(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Could not approve milestone. Make sure you're online"})]})]}))}))};return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("li",{className:"milestone seller",children:[Object(x.jsx)(m,{milestone:h}),Object(x.jsxs)("div",{className:"clas",children:[Object(x.jsxs)("h4",{children:["\u20b9",h.amount]}),Object(x.jsxs)("div",{className:"btns",children:["pending"===h.status&&Object(x.jsx)("a",{onClick:function(){return Object(j.a)({label:"Milestone Approval",question:"You sure want to approve this milestone?",callback:F})},children:"Approve"}),"pendingRelease"===h.status&&Object(x.jsx)("a",{className:"released",children:"Release requested"}),("inProgress"===h.status||"pendingRelease"===h.status)&&Object(x.jsx)("a",{onClick:function(){return g(!0)},children:"Release"}),"released"===h.status&&Object(x.jsx)("a",{className:"dispute",onClick:function(){return C(!0)},children:"Raise Dispute"}),("client"===P&&D||"self"===P)&&Object(x.jsxs)("a",{className:"disputed",children:["Dispute ",null===(n=h.dispute)||void 0===n?void 0:n.status]}),"client"===P&&!D&&Object(x.jsx)("a",{className:"disputeRes",onClick:function(){return C(!0)},children:"Approve Dispute"}),"declined"===h.status&&Object(x.jsx)("a",{className:"disputed",children:"Declined"}),Object(x.jsx)(j.b,{open:M,className:"msg",children:M})]})]}),Object(x.jsx)(j.b,{open:v,head:!0,label:"Release Money",setOpen:g,className:"milestoneReleaseForm",children:Object(x.jsx)(u.c,{milestone:h,setReleaseForm:g,onSuccess:function(e){O((function(t){return t.map((function(t){return t._id===e._id?Object(s.a)(Object(s.a)({},e),{},{client:t.client,role:t.role}):t}))})),g(!1),_(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return _(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.B,{}),Object(x.jsxs)("h4",{className:"amount",children:["\u20b9",e.amount]}),Object(x.jsx)("h4",{children:"Milestone has been released."})]})]}))}})}),Object(x.jsx)(j.b,{open:N,head:!0,label:"Raise Dispute",setOpen:C,className:"disputeForm",children:Object(x.jsx)(u.b,{milestone:h,setDisputeForm:C,onSuccess:function(e){O((function(t){return t.map((function(t){return t._id===e._id?Object(s.a)(Object(s.a)({},e),{},{client:t.client,role:t.role}):t}))})),C(!1),_(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return _(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.B,{}),Object(x.jsx)("h4",{children:"client"===P?"Case submit success. Dispute pending for verdict.":"Dispute filed succefully."})]})]}))}})})]},h._id),Object(x.jsx)(j.b,{className:"msg",open:M,children:M})]})},p=function(e){var t,c,n,r,l,o,b=e.milestone,h=e.setMilestones,O=Object(i.useState)(!1),f=Object(a.a)(O,2),p=f[0],v=f[1],g=Object(i.useState)(null),y=Object(a.a)(g,2),k=y[0],N=y[1],C=null,S=null;(null===(t=b.dispute)||void 0===t?void 0:t.plaintiff._id)===b.client._id?(C=null===(r=b.dispute)||void 0===r||null===(l=r.defendant)||void 0===l||null===(o=l.case)||void 0===o?void 0:o.dscr,S="client"):(null===(c=b.dispute)||void 0===c?void 0:c.defendant._id)===b.client._id&&(S="self");var w=function(){fetch("/api/declineMilestone",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({_id:b._id})}).then((function(e){return e.json()})).then((function(e){"ok"===e.code?(h((function(t){return t.map((function(t){return t._id===e.milestone._id?Object(s.a)(Object(s.a)({},e.milestone),{},{client:b.client,role:b.role}):t}))})),N(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return N(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.B,{}),Object(x.jsx)("h4",{children:"Milestone succefully declined."})]})]}))):N(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return N(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Milestone succefully declined."})]})]}))})).catch((function(e){console.log(e),N(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return N(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Could not decline milestone. Make sure you're online"})]})]}))}))},M=function(){fetch("/api/cancelMilestoneRequest",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({_id:b._id})}).then((function(e){return e.json()})).then((function(e){"ok"===e.code?(h((function(e){return e.filter((function(e){return e._id!==b._id}))})),N(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return N(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.B,{}),Object(x.jsx)("h4",{children:"Milestone request cancelled."})]})]}))):N(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return N(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Could not cancel milestone request. Try again."})]})]}))})).catch((function(e){console.log(e),N(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return N(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Could not cancel milestone request. Make sure you're online."})]})]}))}))},_=function(){fetch("/api/requestRelease",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({_id:b._id})}).then((function(e){return e.json()})).then((function(e){"ok"===e.code?(h((function(t){return t.map((function(t){return t._id===e.milestone._id?Object(s.a)(Object(s.a)({},e.milestone),{},{client:b.client,role:b.role}):t}))})),N(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return N(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.B,{}),Object(x.jsx)("h4",{children:"Milestone request cancelled."})]})]}))):N(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return N(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Could not request release. Try again."})]})]}))})).catch((function(e){console.log(e),N(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return N(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Could not request release. Make sure you're online."})]})]}))}))};return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("li",{className:"milestone buyer",children:[Object(x.jsx)(m,{milestone:b}),Object(x.jsxs)("div",{className:"clas",children:[Object(x.jsxs)("h4",{children:["\u20b9",b.amount]}),Object(x.jsxs)("div",{className:"btns",children:["pendingRelease"===b.status&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("a",{className:"released",children:"Release requested"}),Object(x.jsx)("a",{className:"dispute",onClick:function(){return v(!0)},children:"Raise Dispute"})]}),"pending"===b.status&&Object(x.jsx)("a",{className:"disputeRes",onClick:function(){return Object(j.a)({label:"Cancel Milestone request",question:"You sure want to cancel this request?",callback:M})},children:"Cancel Request"}),"released"===b.status&&Object(x.jsx)("a",{className:"released",children:"Released"}),("client"===S&&C||"self"===S)&&Object(x.jsxs)("a",{className:"disputed",children:["Dispute ",null===(n=b.dispute)||void 0===n?void 0:n.status]}),"client"===S&&!C&&Object(x.jsx)("a",{className:"disputeRes",onClick:function(){return v(!0)},children:"Approve Dispute"}),"inProgress"===b.status&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("a",{onClick:function(){return Object(j.a)({label:"Request Release",question:"You sure want to request release of this milestone?",callback:_})},children:"Request Release"}),Object(x.jsx)("a",{className:"disputeRes",onClick:function(){return Object(j.a)({label:"Decline Milestone",question:"You sure want to decline this milestone?",callback:w})},children:"Decline"})]}),"declined"===b.status&&Object(x.jsx)("a",{className:"disputed",children:"Declined"})]})]}),Object(x.jsx)(j.b,{open:p,head:!0,label:"Raise Dispute",setOpen:v,className:"disputeForm",children:Object(x.jsx)(u.b,{milestone:b,setDisputeForm:v,onSuccess:function(e){h((function(t){return t.map((function(t){return t._id===e._id?Object(s.a)(Object(s.a)({},e),{},{client:t.client,role:t.role}):t}))})),v(!1),N(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return N(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.B,{}),Object(x.jsx)("h4",{children:"client"===S?"Case submit success. Dispute pending for verdict.":"Dispute filed succefully."})]})]}))}})})]},b._id),Object(x.jsx)(j.b,{className:"msg",open:k,children:k})]})},v=function(e){var t,c=e.history,n=e.location,l=(e.match,Object(i.useContext)(r.d).userType),o=Object(i.useRef)(),u=Object(i.useState)([]),h=Object(a.a)(u,2),m=h[0],v=h[1],g=Object(i.useState)(null),y=Object(a.a)(g,2),k=y[0],N=y[1],C=Object(i.useState)(O.a.parse(n.search).page||1),S=Object(a.a)(C,2),w=S[0],M=S[1],_=Object(i.useState)(O.a.parse(n.search).perPage||20),D=Object(a.a)(_,2),P=D[0],F=D[1],A=Object(i.useState)((null===(t=O.a.parse(n.search).q)||void 0===t?void 0:t.replace(/\/(?!.*\/).*/,""))||""),T=Object(a.a)(A,2),R=T[0],Y=T[1],q=Object(i.useState)(O.a.parse(n.search).status||""),B=Object(a.a)(q,2),I=B[0],E=B[1],L=Object(i.useState)(!1),H=Object(a.a)(L,2),V=H[0],U=H[1],Z=Object(i.useState)({startDate:new Date,endDate:new Date}),G=Object(a.a)(Z,2),W=G[0],J=G[1],z=Object(i.useState)({column:O.a.parse(n.search).sort||"createdAt",order:O.a.parse(n.search).order||"dsc"}),K=Object(a.a)(z,2),$=K[0],Q=(K[1],Object(i.useState)(!1)),X=Object(a.a)(Q,2),ee=X[0],te=X[1],ce=Object(i.useState)({}),ne=Object(a.a)(ce,2),se=ne[0],ae=ne[1],ie=Object(i.useState)(""),re=Object(a.a)(ie,2),le=(re[0],re[1],Object(i.useState)(null)),oe=Object(a.a)(le,2),je=oe[0],de=oe[1];return Object(i.useEffect)((function(){fetch("/api/milestone".concat(n.search)).then((function(e){return e.json()})).then((function(e){"ok"===e.code&&(v(e.milestones),N(e.total))})).catch((function(e){console.log(e),de(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return de(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Could not update milestones."})]})]}))}))}),[n.search,l]),Object(i.useEffect)((function(){var e=Object(d.K)({time:null===W||void 0===W?void 0:W.startDate,format:"YYYY-MM-DD"}),t=Object(d.K)({time:null===W||void 0===W?void 0:W.endDate.setHours(24,0,0,0),format:"YYYY-MM-DD"});c.replace({pathname:n.pathname,search:"?"+new URLSearchParams(Object(s.a)(Object(s.a)(Object(s.a)({page:w,perPage:P,sort:$.column,order:$.order},R&&{q:R}),ee&&{dateFrom:e,dateTo:t}),I&&{status:I})).toString()})}),[w,P,$.column,$.order,R,ee,I,l]),Object(i.useLayoutEffect)((function(){var e=o.current.getBoundingClientRect(),t=e.height,c=e.y,n=e.width,s=e.x;ae({position:"fixed",top:t+c+4,right:window.innerWidth-s-n})}),[]),Object(x.jsxs)("div",{className:"holdContainer",children:[Object(x.jsx)("div",{style:{display:"none"},children:Object(x.jsx)(d.G,{})}),Object(x.jsxs)("div",{className:"benner",children:[Object(x.jsx)("h4",{children:"Secure your transactions"}),Object(x.jsx)("p",{children:"All payments and transactions come here"})]}),Object(x.jsx)("div",{className:"head",children:Object(x.jsxs)("div",{className:"filters",children:[Object(x.jsxs)("section",{children:[Object(x.jsx)("label",{children:"Total:"}),k]}),Object(x.jsxs)("section",{children:[Object(x.jsx)("label",{children:"Per Page:"}),Object(x.jsx)(d.h,{defaultValue:0,options:[{label:"20",value:20},{label:"30",value:30},{label:"50",value:50}],onChange:function(e){return F(e.value)}})]}),Object(x.jsxs)("section",{className:"search",children:[Object(x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"23",height:"23",viewBox:"0 0 23 23",children:Object(x.jsx)("path",{id:"Icon_ionic-ios-search","data-name":"Icon ionic-ios-search",d:"M27.23,25.828l-6.4-6.455a9.116,9.116,0,1,0-1.384,1.4L25.8,27.188a.985.985,0,0,0,1.39.036A.99.99,0,0,0,27.23,25.828ZM13.67,20.852a7.2,7.2,0,1,1,5.091-2.108A7.155,7.155,0,0,1,13.67,20.852Z",transform:"translate(-4.5 -4.493)",fill:"#707070",opacity:"0.74"})}),Object(x.jsx)("input",{value:R,onChange:function(e){return Y(e.target.value)},placeholder:"Search Buyer's or Seller's name, phone, Milestone ID"}),R&&Object(x.jsx)("button",{onClick:function(){return Y("")},children:Object(x.jsx)(d.G,{})})]}),Object(x.jsxs)("section",{className:"status",children:[Object(x.jsx)("label",{children:"Status:"}),Object(x.jsx)(d.h,{defaultValue:I||0,options:[{label:"All",value:""},{label:"In Progress",value:"inProgress"},{label:"Pending",value:"pending"},{label:"Release requested",value:"pendingRelease"},{label:"Released",value:"released"},{label:"Dispute",value:"dispute"}],onChange:function(e){return E(e.value)}})]}),Object(x.jsxs)("section",{className:"date ".concat(ee?"open":""),ref:o,onClick:function(){return U(!0)},children:[Object(x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"30.971",height:"30.971",viewBox:"0 0 30.971 30.971",children:Object(x.jsx)("path",{id:"Path_299","data-name":"Path 299",d:"M3.992,2.42H6.775V.968a.968.968,0,1,1,1.936,0V2.42H22.26V.968a.968.968,0,1,1,1.936,0V2.42h2.783a4,4,0,0,1,3.992,3.992V26.978a4,4,0,0,1-3.992,3.992H3.992A4,4,0,0,1,0,26.978V6.412A4,4,0,0,1,3.992,2.42ZM26.978,4.355H24.2v.968a.968.968,0,1,1-1.936,0V4.355H8.71v.968a.968.968,0,1,1-1.936,0V4.355H3.992A2.059,2.059,0,0,0,1.936,6.412v2.3h27.1v-2.3A2.059,2.059,0,0,0,26.978,4.355ZM3.992,29.035H26.978a2.059,2.059,0,0,0,2.057-2.057V10.646H1.936V26.978A2.059,2.059,0,0,0,3.992,29.035Z",fill:"#336cf9"})}),ee&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("div",{className:"dates",children:[Object(x.jsxs)("p",{children:["From:"," ",Object(x.jsx)(d.r,{format:"DD MMM, YYYY",children:W.startDate})]}),Object(x.jsxs)("p",{children:["To:"," ",Object(x.jsx)(d.r,{format:"DD MMM, YYYY",children:W.endDate})]})]}),Object(x.jsx)("button",{className:"clearDateFilter",onClick:function(){J({startDate:new Date,endDate:new Date}),te(!1)},children:Object(x.jsx)(d.G,{})})]})]})]})}),Object(x.jsxs)("ul",{className:"milestones",children:[m.map((function(e,t){return"seller"===e.role?Object(x.jsx)(f,{milestone:e,setMilestones:v},t):Object(x.jsx)(p,{milestone:e,setMilestones:v},t)})),0===m.length&&Object(x.jsx)("p",{className:"placeholder",children:"No transaction yet."})]}),Object(x.jsx)(d.t,{total:k,perPage:P,currentPage:w,btns:5,setPage:M}),Object(x.jsx)(j.b,{className:"msg",open:je,children:je}),Object(x.jsx)(j.b,{open:V,onBackdropClick:function(){return U(!1)},className:"datePicker",backdropClass:"datePicker",style:se,children:Object(x.jsx)(b.DateRange,{className:"dateRange",ranges:[W],onChange:function(e){J(e.range1),e.range1.endDate!==e.range1.startDate&&(U(!1),te(!0))}})})]})},g=function(){var e=Object(i.useContext)(r.d).userType,t=Object(l.g)(),c=Object(i.useState)(""),n=Object(a.a)(c,2),s=(n[0],n[1],Object(i.useState)([])),u=Object(a.a)(s,2),b=(u[0],u[1],Object(i.useState)([])),h=Object(a.a)(b,2),O=h[0],m=h[1],f=Object(i.useState)(null),p=Object(a.a)(f,2),v=p[0],g=p[1],y=Object(i.useState)(null),k=Object(a.a)(y,2),N=k[0],C=k[1];Object(i.useRef)();return Object(i.useEffect)((function(){fetch("/api/recentPayments").then((function(e){return e.json()})).then((function(e){m(e)})).catch((function(e){console.log(e)}))}),[]),Object(i.useEffect)((function(){"/account/home/pay"!==t.location.pathname||v||t.push("/account/home")}),[]),Object(x.jsxs)("div",{className:"homeContainer",children:[Object(x.jsxs)("div",{className:"benner",children:[Object(x.jsx)("h4",{children:"Start transactions with Delivery pay"}),Object(x.jsx)("p",{children:"Connect with new buyers/sellers."})]}),Object(x.jsx)(Nt,{setClient:g}),Object(x.jsxs)("div",{className:"recentPayments",children:[Object(x.jsxs)("p",{className:"label",children:["Recent Payments",Object(x.jsx)("span",{className:"note",children:"buyer"===e?"Click to view all their products.":"Click to request a milestone."})]}),Object(x.jsxs)("ul",{className:"payments",children:[O.map((function(t){return Object(x.jsx)("li",{children:Object(x.jsxs)(o.b,{target:"buyer"===e?"_blank":"",to:"buyer"===e?"/marketplace?seller=".concat(t._id):"/account/home/requestMilestone",onClick:function(){g(t)},children:[Object(x.jsx)(d.n,{src:t.profileImg}),Object(x.jsx)("p",{className:"name",children:t.firstName+" "+t.lastName})]})},t._id)})),0===O.length&&Object(x.jsx)("p",{children:"Nothing for now"})]})]}),Object(x.jsx)(l.b,{path:"/account/home/createMilestone",children:Object(x.jsx)(j.b,{open:!0,head:!0,label:"Create Milestone",setOpen:function(){t.push("/account/home"),g(null)},className:"milestoneRequest",children:Object(x.jsx)(Mt,{action:"create",client:v,onSuccess:function(e){t.push("/account/home"),C(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return C(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.B,{}),Object(x.jsxs)("h4",{className:"amount",children:["\u20b9",null===e||void 0===e?void 0:e.amount]}),Object(x.jsx)("h4",{children:"Milestone has been created"})]}),Object(x.jsx)(o.b,{to:"/account/hold",onClick:function(){return C(null)},children:"Check your Delivery pay Hold"})]}))}})})}),Object(x.jsx)(l.b,{path:"/account/home/requestMilestone",children:Object(x.jsx)(j.b,{open:!0,head:!0,label:"Request Milestone",setOpen:function(){t.push("/account/home"),g(null)},className:"milestoneRequest",children:Object(x.jsx)(Mt,{action:"request",client:v,onSuccess:function(e){t.push("/account/home"),C(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return C(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.B,{}),Object(x.jsxs)("h4",{className:"amount",children:["\u20b9",null===e||void 0===e?void 0:e.amount]}),Object(x.jsx)("h4",{children:"Milestone has been requested"})]}),Object(x.jsx)(o.b,{to:"/account/hold",onClick:function(){return C(null)},children:"Check your Delivery pay Hold"})]}))}})})}),Object(x.jsx)(j.b,{className:"msg",open:N,children:N})]})},y=function(e){var t,c,n,s,a=e.transaction,l=Object(i.useContext)(r.d).user;return Object(x.jsxs)("li",{className:"transaction ".concat(a.amount>0?"in":"out"),children:[Object(x.jsx)("div",{className:"transactionDetail",children:Object(x.jsx)("div",{className:"profile",children:a.client?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(d.n,{src:(null===(t=a.client._id)||void 0===t?void 0:t.profileImg)||"/profile-user.jpg"}),Object(x.jsx)("p",{className:"name",children:a.client.firstName+" "+a.client.lastName})]}):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(d.n,{src:l.profileImg||"/profile-user.jpg"}),Object(x.jsx)("p",{className:"name",children:l.firstName+" "+l.lastName})]})})}),Object(x.jsxs)("ul",{children:[Object(x.jsxs)("li",{children:[Object(x.jsx)("p",{children:"Role"}),"-",Object(x.jsx)("p",{className:"role",children:a.amount>0?"Seller":"Buyer"})]}),Object(x.jsxs)("li",{children:[Object(x.jsx)("p",{children:"Product detail"}),"-",Object(x.jsx)("p",{children:a.dscr||"-"})]}),Object(x.jsxs)("li",{children:[Object(x.jsx)("p",{children:"Transaction ID"}),"-",Object(x.jsx)("p",{children:a._id})]})]}),Object(x.jsxs)("ul",{className:"amountDate",children:[Object(x.jsxs)("li",{children:[Object(x.jsx)("p",{children:"Amount"}),"-",Object(x.jsxs)("p",{className:"amount",children:["\u20b9",a.amount.fix()]})]}),Object(x.jsxs)("li",{children:[Object(x.jsx)("p",{children:"Hold Date"}),"-",Object(x.jsx)("p",{children:Object(x.jsx)(d.r,{format:"MMM DD, YYYY, hh:mm a",children:a.createdAt})})]}),Object(x.jsxs)("li",{children:[Object(x.jsx)("p",{children:"Released Date"}),"-",Object(x.jsx)("p",{children:Object(x.jsx)(d.r,{format:"MMM DD, YYYY, hh:mm a",children:(null===(c=a.milestoneId)||void 0===c?void 0:c.releaseDate)||"--"})})]})]}),Object(x.jsxs)("ul",{className:"statusMethod",children:[Object(x.jsxs)("li",{children:[Object(x.jsx)("p",{children:"Status"}),"-",Object(x.jsx)("p",{className:"status",children:(null===(n=a.milestoneId)||void 0===n?void 0:n.status)||"--"})]}),Object(x.jsxs)("li",{children:[Object(x.jsx)("p",{children:"Released to"}),"-",Object(x.jsx)("p",{children:a.amount<0?"Seller":"--"})]}),Object(x.jsxs)("li",{children:[Object(x.jsx)("p",{children:"Verification Method"}),"-",Object(x.jsx)("p",{children:(null===(s=a.milestoneId)||void 0===s?void 0:s.verification)||"--"})]})]})]})},k=function(e){e.history,e.location,e.match;var t=Object(i.useState)([]),c=Object(a.a)(t,2),n=c[0],s=c[1],r=Object(i.useState)(null),l=Object(a.a)(r,2),o=l[0],u=l[1];return Object(i.useEffect)((function(){fetch("/api/transactions?type=P2PTransaction").then((function(e){if(200===e.status)return e.json()})).then((function(e){e&&s(e)})).catch((function(e){console.log(e),u(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return u(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Could not get transactions."})]})]}))}))}),[]),Object(x.jsxs)("div",{className:"transactionContainer",children:[Object(x.jsx)("p",{className:"benner",children:"Completed Delivery pay Hold Transactions"}),Object(x.jsxs)("ul",{className:"transactions",children:[n.map((function(e){return Object(x.jsx)(y,{transaction:e},e._id)})),0===n.length&&Object(x.jsx)("p",{className:"placeholder",children:"No transaction yet."})]}),Object(x.jsx)(j.b,{className:"msg",open:o,children:o})]})};function N(){var e=(new Date).getHours();return e>=3&&e<12?"Good Morning":e>=12&&e<15?"Good Afternoon":e>=15&&e<20?"Good Evening":e>=20&&e<3?"Good Night":"Hello"}var C=function(e){var t,c,n=e.data,s=(null===(t=n.sort((function(e,t){return e.balance<t.balance?1:-1}))[0])||void 0===t||null===(c=t.balance)||void 0===c?void 0:c.fix())||0;return Object(x.jsxs)("div",{className:"graph",children:[Object(x.jsx)("p",{className:"label",children:"Analytics"}),Object(x.jsx)("ul",{className:"bars","data-max":"\u20b9 ".concat(s||0),children:n.map((function(e,t){return Object(x.jsxs)("li",{children:[Object(x.jsx)("div",{className:"bar",style:{height:"".concat(e.balance/(s/100),"%")}}),Object(x.jsx)("label",{className:"month",children:e._id})]},t)}))})]})},S=function(e){var t=e.onSuccess,c=Object(i.useState)("netBanking"),n=Object(a.a)(c,2),s=n[0],r=n[1];return Object(x.jsx)("div",{className:"addPaymentMethod",children:Object(x.jsxs)("section",{className:"paymentOption",children:[Object(x.jsxs)("div",{className:"header",onClick:function(){return r("netBanking")},children:[Object(x.jsx)("div",{className:"redial ".concat("netBanking"===s&&"active"),children:Object(x.jsx)("div",{className:"fill"})}),Object(x.jsx)("label",{children:"Net Banking"})]}),"netBanking"===s&&Object(x.jsx)(M,{onSuccess:t})]})})},w=function(e){var t=e.prefill,c=e.onSuccess,l=Object(i.useContext)(r.d).setUser,o=Object(i.useState)((null===t||void 0===t?void 0:t.brand)||null),u=Object(a.a)(o,2),b=u[0],h=u[1],O=Object(i.useState)((null===t||void 0===t?void 0:t.nameOnCard)||""),m=Object(a.a)(O,2),f=m[0],p=m[1],v=Object(i.useState)((null===t||void 0===t?void 0:t.cardNumber)||""),g=Object(a.a)(v,2),y=g[0],k=g[1],N=Object(i.useState)(""),C=Object(a.a)(N,2),S=C[0],w=C[1],M=Object(i.useState)(""),_=Object(a.a)(M,2),D=_[0],P=_[1],F=Object(i.useState)((null===t||void 0===t?void 0:t.cvv)||""),A=Object(a.a)(F,2),T=A[0],R=A[1],Y=Object(i.useState)(!1),q=Object(a.a)(Y,2),B=q[0],I=q[1],E=function(){for(var e=(new Date).getFullYear(),t=[],c=0;c<15;c++)t.push({label:e+c,value:(e+c).toString().substr(2)});return t}(),L=Object(i.useState)(null),H=Object(a.a)(L,2),V=H[0],U=H[1];Object(i.useEffect)((function(){}),[D,S]);return Object(x.jsxs)("form",{className:"paymentMethodForm bankCard",onSubmit:function(e){if(e.preventDefault(),null===b)return I(!0),void setTimeout((function(){return I(!1)}),1500);fetch(t?"/api/editPaymentMethod":"/api/addPaymentMethod",{method:t?"PATCH":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object(s.a)({type:"BankCard",brand:b,nameOnCard:f,cardNumber:y,exp:"".concat(S,"/").concat(D),cvv:T},t&&{_id:t._id}))}).then((function(e){return e.json()})).then((function(e){var a=e.paymentMethod;a?(l(t?function(e){return Object(s.a)(Object(s.a)({},e),{},{paymentMethods:e.paymentMethods.map((function(e){return e._id===a._id?a:e}))})}:function(e){return Object(s.a)(Object(s.a)({},e),{},{paymentMethods:[].concat(Object(n.a)(e.paymentMethods),[a])})}),null===c||void 0===c||c(a)):U(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return U(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsxs)("h4",{children:["Payment method could not be ",t?"updated":"added",". Please try again."]})]})]}))})).catch((function(e){console.log(e),U(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return U(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Error happaned. Make sure you're online."})]})]}))}))},children:[!t&&Object(x.jsx)("p",{className:"note",children:"We\u2019ll save this card for your convenience. Remove it by going to Your Account section"}),Object(x.jsxs)("section",{className:"inputs",children:[Object(x.jsx)("input",{type:"text",name:"name",placeholder:"Name on your card",value:f,onChange:function(e){return p(e.target.value)},required:!0}),Object(x.jsx)("input",{type:"number",name:"cardNumber",placeholder:"Card Number",value:y,onChange:function(e){e.target.value.match(/^3[47][0-9]{13}$/)?h("amex"):e.target.value.match(/^4[0-9]{12}(?:[0-9]{3})?$$/)?h("visa"):e.target.value.match(/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14})$/)?h("masterCard"):h(null),k(e.target.value)},required:!0}),Object(x.jsxs)("section",{className:"exp",children:[Object(x.jsx)("label",{children:"Expiry Date"}),Object(x.jsx)(d.h,{placeholder:"Month",options:[{label:"Jan",value:"01"},{label:"Feb",value:"02"},{label:"Mar",value:"03"},{label:"Apr",value:"04"},{label:"May",value:"05"},{label:"Jun",value:"06"},{label:"Jul",value:"07"},{label:"Aug",value:"08"},{label:"Sep",value:"09"},{label:"Oct",value:"10"},{label:"Nov",value:"11"},{label:"Dec",value:"12"}],required:!0,onChange:function(e){return w(e.value)}}),Object(x.jsx)(d.h,{placeholder:"Year",options:E,required:!0,onChange:function(e){return P(e.value)}})]}),Object(x.jsxs)("section",{className:"cvv",children:[Object(x.jsx)("label",{children:"CVV"}),Object(x.jsx)("input",{type:"number",name:"cvv",required:!0,value:T,onChange:function(e){return R(e.target.value)}})]})]}),Object(x.jsx)("button",{children:"Save"}),B&&Object(x.jsx)("p",{className:"cardErr",children:"Enter valid Visa/MasterCard"}),Object(x.jsx)(j.b,{className:"msg",open:V,children:V})]})},M=function(e){var t=e.prefill,c=e.onSuccess,l=Object(i.useContext)(r.d).setUser,o=Object(i.useState)((null===t||void 0===t?void 0:t.bank)||""),u=Object(a.a)(o,2),b=u[0],h=u[1],O=Object(i.useState)((null===t||void 0===t?void 0:t.name)||""),m=Object(a.a)(O,2),f=m[0],p=m[1],v=Object(i.useState)((null===t||void 0===t?void 0:t.ifsc)||""),g=Object(a.a)(v,2),y=g[0],k=g[1],N=Object(i.useState)((null===t||void 0===t?void 0:t.city)||""),C=Object(a.a)(N,2),S=C[0],w=C[1],M=Object(i.useState)((null===t||void 0===t?void 0:t.type)||""),_=Object(a.a)(M,2),D=_[0],P=_[1],F=Object(i.useState)(null),A=Object(a.a)(F,2),T=A[0],R=A[1],Y=Object(i.useState)((null===t||void 0===t?void 0:t.accountNumber)||""),q=Object(a.a)(Y,2),B=q[0],I=q[1];return Object(x.jsxs)("form",{className:"paymentMethodForm netBanking",onSubmit:function(e){e.preventDefault(),fetch(t?"/api/editPaymentMethod":"/api/addPaymentMethod",{method:t?"PATCH":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object(s.a)({type:"BankAccount",name:f,bank:b,ifsc:y,accountNumber:B,city:S,accountType:D},t&&{_id:t._id}))}).then((function(e){return e.json()})).then((function(e){var a=e.paymentMethod;a?(l(t?function(e){return Object(s.a)(Object(s.a)({},e),{},{paymentMethods:e.paymentMethods.map((function(e){return e._id===a._id?a:e}))})}:function(e){return Object(s.a)(Object(s.a)({},e),{},{paymentMethods:[].concat(Object(n.a)(e.paymentMethods),[a])})}),null===c||void 0===c||c(a)):R(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return R(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Could not update payment method. Please try again."})]})]}))})).catch((function(e){console.log(e),R(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return R(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Could not updated payment method. Make sure you're online."})]})]}))}))},children:[Object(x.jsxs)("section",{className:"inputs",children:[Object(x.jsx)("input",{type:"text",name:"name",placeholder:"Full name",value:f,onChange:function(e){return p(e.target.value)},required:!0}),Object(x.jsx)("input",{type:"text",name:"bank",placeholder:"Bank",value:b,onChange:function(e){return h(e.target.value)},required:!0}),Object(x.jsx)("input",{type:"text",name:"city",placeholder:"City",value:S,onChange:function(e){return w(e.target.value)},required:!0}),Object(x.jsx)("input",{type:"text",name:"type",placeholder:"Account type ie. Savings / Current",value:D,onChange:function(e){return P(e.target.value)},required:!0}),Object(x.jsx)("input",{type:"text",name:"accountNumber",placeholder:"Account Number",value:B,onChange:function(e){return I(e.target.value)},required:!0}),Object(x.jsx)("input",{type:"text",name:"ifsc",placeholder:"IFSC",value:y,onChange:function(e){return k(e.target.value)},required:!0})]}),Object(x.jsx)("button",{type:"submit",children:"Save"}),Object(x.jsx)(j.b,{open:T,className:"msg",children:T})]})},_=function(e){var t=e.card,c=e.onClick;return Object(x.jsxs)("div",{className:"paymentMethod card",onClick:function(){return null===c||void 0===c?void 0:c(t)},children:[Object(x.jsx)(d.n,{className:"logo",src:"visa"===t.brand?"/payment_visa.png":"/payment_mc.png"}),Object(x.jsxs)("p",{className:"cardNumber",children:["**** **** **** **** ",t.cardNumber.substr(-4)]}),Object(x.jsx)("p",{className:"cardHolder",children:t.nameOnCard}),Object(x.jsx)("p",{className:"exp",children:t.exp})]})},D=function(e){var t=e.account,c=e.onClick;return Object(x.jsxs)("div",{className:"paymentMethod bankAccount",onClick:function(){return null===c||void 0===c?void 0:c(t)},children:[Object(x.jsx)("p",{className:"bank",children:t.bank}),Object(x.jsx)("p",{className:"name",children:t.name}),Object(x.jsx)("p",{className:"accountNumber",children:t.accountNumber}),Object(x.jsx)("p",{className:"ifsc",children:t.ifsc})]})},P=function(e){var t=e.paymentMethods,c=Object(i.useRef)(null),n=Object(i.useState)({}),s=Object(a.a)(n,2),r=s[0],l=s[1],o=Object(i.useState)({}),d=Object(a.a)(o,2),u=d[0],b=d[1],h=Object(i.useState)(0),O=Object(a.a)(h,2),m=O[0],f=O[1],p=Object(i.useState)(!1),v=Object(a.a)(p,2),g=v[0],y=v[1];return Object(i.useLayoutEffect)((function(){var e=c.current.getBoundingClientRect().width;l({width:e,height:.55*e}),b({transform:"translateX(".concat(-e*m,"px)")})}),[m]),Object(x.jsxs)("div",{className:"savedCards",children:[Object(x.jsxs)("div",{className:"wrapper",ref:c,children:[Object(x.jsxs)("ul",{className:"cards",style:u,children:[t.map((function(e,t){return Object(x.jsxs)("li",{style:r,children:[e._id&&"BankCard"===e.__t&&Object(x.jsx)(_,{card:e}),e._id&&"BankAccount"===e.__t&&Object(x.jsx)(D,{account:e})]},t)})),0===t.length&&Object(x.jsx)("li",{style:r,children:Object(x.jsx)("p",{className:"placeholder",children:"Withdraw Payments"})})]}),Object(x.jsx)("button",{className:"addPaymentMethod",onClick:function(){return y(!0)},children:Object(x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"15.999",viewBox:"0 0 16 15.999",children:Object(x.jsx)("path",{id:"Union_1","data-name":"Union 1",d:"M-4613,16V9h-7V7h7V0h2V7h7V9h-7v7Z",transform:"translate(4620)",fill:"#2699fb"})})})]}),m>0&&Object(x.jsx)("button",{className:"prev",onClick:function(){return f((function(e){return e-1}))},children:Object(x.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"31.818",height:"44.147",viewBox:"0 0 31.818 44.147",children:[Object(x.jsx)("defs",{children:Object(x.jsxs)("filter",{id:"Path_217",x:"0",y:"0",width:"31.818",height:"44.147",filterUnits:"userSpaceOnUse",children:[Object(x.jsx)("feOffset",{dx:"-3",dy:"3",input:"SourceAlpha"}),Object(x.jsx)("feGaussianBlur",{stdDeviation:"2.5",result:"blur"}),Object(x.jsx)("feFlood",{floodOpacity:"0.161"}),Object(x.jsx)("feComposite",{operator:"in",in2:"blur"}),Object(x.jsx)("feComposite",{in:"SourceGraphic"})]})}),Object(x.jsx)("g",{transform:"matrix(1, 0, 0, 1, 0, 0)",filter:"url(#Path_217)",children:Object(x.jsxs)("g",{id:"Path_217-2","data-name":"Path 217",transform:"translate(27.32 4.5) rotate(90)",fill:"#858585",children:[Object(x.jsx)("path",{d:"M 27.53220176696777 15.71776485443115 C 26.13888931274414 15.2262544631958 24.10462951660156 14.50919151306152 22.07958030700684 13.79734325408936 C 14.74783992767334 11.22007274627686 14.70039939880371 11.22007274627686 14.5736198425293 11.22007274627686 C 14.44684028625488 11.22007274627686 14.39939975738525 11.22007274627686 7.067659854888916 13.79734325408936 C 5.042610645294189 14.50919151306152 3.00835108757019 15.2262544631958 1.615038275718689 15.71776485443115 L 14.5736198425293 0.7635064125061035 L 27.53220176696777 15.71776485443115 Z",stroke:"none"}),Object(x.jsx)("path",{d:"M 14.5736198425293 1.526998519897461 L 3.229276657104492 14.61841773986816 C 4.349065780639648 14.22377777099609 5.627307891845703 13.77366733551025 6.901840209960938 13.32564258575439 C 14.31408023834229 10.72007274627686 14.33368015289307 10.72007274627686 14.5736198425293 10.72007274627686 C 14.81355953216553 10.72007274627686 14.83315944671631 10.72007274627686 22.24539947509766 13.32564258575439 C 23.51993179321289 13.77366733551025 24.79817390441895 14.22377777099609 25.9179630279541 14.61841773986816 L 14.5736198425293 1.526998519897461 M 14.5736198425293 1.9073486328125e-06 L 29.14723968505859 16.81802368164063 C 29.14723968505859 16.81802368164063 14.71584987640381 11.72007274627686 14.5736198425293 11.72007274627686 C 14.43138980865479 11.72007274627686 0 16.81802368164063 0 16.81802368164063 L 14.5736198425293 1.9073486328125e-06 Z",stroke:"none",fill:"#858585"})]})})]})}),m+1<t.length&&Object(x.jsx)("button",{className:"next",onClick:function(){return f((function(e){return e+1}))},children:Object(x.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"31.818",height:"44.147",viewBox:"0 0 31.818 44.147",children:[Object(x.jsx)("defs",{children:Object(x.jsxs)("filter",{id:"Path_217",x:"0",y:"0",width:"31.818",height:"44.147",filterUnits:"userSpaceOnUse",children:[Object(x.jsx)("feOffset",{dx:"-3",dy:"3",input:"SourceAlpha"}),Object(x.jsx)("feGaussianBlur",{stdDeviation:"2.5",result:"blur"}),Object(x.jsx)("feFlood",{floodOpacity:"0.161"}),Object(x.jsx)("feComposite",{operator:"in",in2:"blur"}),Object(x.jsx)("feComposite",{in:"SourceGraphic"})]})}),Object(x.jsx)("g",{transform:"matrix(1, 0, 0, 1, 0, 0)",filter:"url(#Path_217)",children:Object(x.jsxs)("g",{id:"Path_217-2","data-name":"Path 217",transform:"translate(27.32 4.5) rotate(90)",fill:"#858585",children:[Object(x.jsx)("path",{d:"M 27.53220176696777 15.71776485443115 C 26.13888931274414 15.2262544631958 24.10462951660156 14.50919151306152 22.07958030700684 13.79734325408936 C 14.74783992767334 11.22007274627686 14.70039939880371 11.22007274627686 14.5736198425293 11.22007274627686 C 14.44684028625488 11.22007274627686 14.39939975738525 11.22007274627686 7.067659854888916 13.79734325408936 C 5.042610645294189 14.50919151306152 3.00835108757019 15.2262544631958 1.615038275718689 15.71776485443115 L 14.5736198425293 0.7635064125061035 L 27.53220176696777 15.71776485443115 Z",stroke:"none"}),Object(x.jsx)("path",{d:"M 14.5736198425293 1.526998519897461 L 3.229276657104492 14.61841773986816 C 4.349065780639648 14.22377777099609 5.627307891845703 13.77366733551025 6.901840209960938 13.32564258575439 C 14.31408023834229 10.72007274627686 14.33368015289307 10.72007274627686 14.5736198425293 10.72007274627686 C 14.81355953216553 10.72007274627686 14.83315944671631 10.72007274627686 22.24539947509766 13.32564258575439 C 23.51993179321289 13.77366733551025 24.79817390441895 14.22377777099609 25.9179630279541 14.61841773986816 L 14.5736198425293 1.526998519897461 M 14.5736198425293 1.9073486328125e-06 L 29.14723968505859 16.81802368164063 C 29.14723968505859 16.81802368164063 14.71584987640381 11.72007274627686 14.5736198425293 11.72007274627686 C 14.43138980865479 11.72007274627686 0 16.81802368164063 0 16.81802368164063 L 14.5736198425293 1.9073486328125e-06 Z",stroke:"none",fill:"#858585"})]})})]})}),Object(x.jsx)(j.b,{head:!0,label:"Add Payment Method",setOpen:y,className:"paymentMethodsForm",open:g,children:Object(x.jsx)(S,{onSuccess:function(e){y(!1)}})})]})},F=function(){var e=Object(i.useState)([]),t=Object(a.a)(e,2),c=t[0],n=t[1],s=Object(i.useState)(null),r=Object(a.a)(s,2),l=r[0],o=r[1];return Object(i.useEffect)((function(){fetch("/api/transactions").then((function(e){if(200===e.status)return e.json()})).then((function(e){e?n(e):o(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return o(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Could not get transactions"})]})]}))})).catch((function(e){console.log(e),o(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return o(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Error happened. Make sure you're online."})]})]}))}))}),[]),Object(x.jsxs)("div",{className:"transactions",children:[Object(x.jsx)("div",{className:"head",children:Object(x.jsx)("p",{children:"All Transaction History"})}),Object(x.jsxs)("ul",{className:"allTransactions",children:[c.map((function(e){return Object(x.jsx)(A,{transaction:e},e._id)})),0===c.length&&Object(x.jsx)("p",{className:"placeholder",children:"No transaction yet."})]}),Object(x.jsx)(j.b,{className:"msg",open:l,children:l})]})},A=function(e){var t,c,n,s,a=e.transaction,i=null;switch(a.__t){case"AddMoney":i=Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"icon",children:Object(x.jsx)(d.u,{})}),Object(x.jsx)("p",{className:"detail",children:"Money added to wallet"})]});break;case"WithdrawMoney":i=Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"icon",children:Object(x.jsx)(d.q,{})}),Object(x.jsx)("p",{className:"detail",children:"Money withdrawal from Wallet"})]});break;case"P2PTransaction":i=a.amount<0?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"icon",children:Object(x.jsx)(d.d,{})}),Object(x.jsxs)("p",{className:"detail",children:["Paid to"," ",Object(x.jsx)("span",{className:"userName",children:(null===(t=a.client)||void 0===t?void 0:t.firstName)+" "+(null===(c=a.client)||void 0===c?void 0:c.lastName)})]})]}):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"icon",children:Object(x.jsx)(d.b,{})}),Object(x.jsxs)("p",{className:"detail",children:["Received from"," ",Object(x.jsx)("span",{className:"userName",children:(null===(n=a.client)||void 0===n?void 0:n.firstName)+" "+(null===(s=a.client)||void 0===s?void 0:s.lastName)})]})]});break;default:i=a.amount<0?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"icon",children:Object(x.jsx)(d.q,{})}),Object(x.jsx)("p",{className:"detail",children:a.note})]}):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"icon",children:Object(x.jsx)(d.u,{})}),Object(x.jsx)("p",{className:"detail",children:a.note})]})}return Object(x.jsxs)("li",{className:"transaction",children:[i,Object(x.jsxs)("p",{className:"amount",children:["\u20b9",Math.abs(a.amount.fix())]})]})},T=function(e){var t=e.history,c=e.location,n=(e.match,Object(i.useContext)(r.d)),s=n.user,l=(n.setUser,Object(i.useState)(0)),o=Object(a.a)(l,2),u=o[0],b=o[1],h=Object(i.useState)([]),O=Object(a.a)(h,2),m=O[0],f=O[1],p=Object(i.useState)(""),v=Object(a.a)(p,2),g=v[0],y=v[1],k=Object(i.useState)([]),w=Object(a.a)(k,2),M=w[0],_=w[1],D=Object(i.useState)(!1),A=Object(a.a)(D,2),T=A[0],R=A[1],Y=Object(i.useState)(!1),q=Object(a.a)(Y,2),B=(q[0],q[1]),I=Object(i.useState)(!1),E=Object(a.a)(I,2),L=(E[0],E[1]),H=Object(i.useState)(null),V=Object(a.a)(H,2),U=V[0],Z=V[1];return Object(i.useEffect)((function(){var e;e="https://checkout.razorpay.com/v1/checkout.js",new Promise((function(t,c){if(document.querySelector('script[src="'.concat(e,'"]')))t(!0);else{var n=document.createElement("script");n.src=e,document.body.appendChild(n),n.onload=function(){return t(!0)},n.onerror=function(){return c(!0)}}})),fetch("/api/dashboardData").then((function(e){return e.json()})).then((function(e){"ok"===e.code?(f(e.monthlyBalance),b(e.balance),_(e.rewards)):Z(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return Z(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Could not update balance."})]})]}))})).catch((function(e){console.log(e),Z(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return Z(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Could not update balance."})]})]}))}))}),[]),Object(i.useEffect)((function(){g||t.push("/account/profile/wallet"),L(!1)}),[g]),Object(x.jsxs)("div",{className:"walletContainer",children:[Object(x.jsxs)("div",{className:"leftSection",children:[Object(x.jsxs)("div",{className:"nameTag",children:[Object(x.jsxs)("h2",{children:["Hello ",s.firstName,","]}),Object(x.jsx)("p",{className:"greetings",children:N()})]}),Object(x.jsxs)("div",{className:"balance",children:[Object(x.jsxs)("div",{className:"currentBalance",children:[Object(x.jsx)("p",{className:"label",children:"Wallet Balance"}),Object(x.jsxs)("h1",{children:["\u20b9 ",u.fix()]}),Object(x.jsx)("p",{className:"updateTime",children:Object(x.jsx)(d.r,{format:"ddd, DD MMM YYYY",children:new Date})})]}),Object(x.jsx)(C,{data:m})]}),Object(x.jsx)("div",{className:"addWithdraw",children:Object(x.jsxs)("div",{className:"add money",children:[Object(x.jsx)("p",{className:"label",children:"Add Money"}),Object(x.jsxs)("form",{onSubmit:function(e){e.preventDefault(),fetch("/api/createAddMoneyOrder",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:g})}).then((function(e){return e.json()})).then((function(e){var c=e.order,n=e.key;L(!1),c?function(e,c){var n=window.Razorpay;if(n){var a=new n({key:c,amount:e.amount,currency:e.currency,accept_partial:!1,name:"".concat(s.firstName," ").concat(s.lastName),description:"Add money to Delivery Pay wallet",image:"/logo_big.jpg",order_id:e.id,handler:function(e){fetch("/api/addMoney",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({transactionId:e.razorpay_payment_id,razorSignature:e.razorpay_signature,razorOrderId:e.razorpay_order_id})}).then((function(e){return e.json()})).then((function(e){var c=e.code,n=(e.user,e.transaction);e.message,"ok"===c?(t.push("/account/profile/wallet"),B(!1),R(n),b((function(e){return e+n.amount})),y(""),L(!1)):Z(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return Z(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Error happend. Make sure you're payment details are correct."})]})]}))})).catch((function(e){console.log(e),B(!0)}))},modal:{ondismiss:function(){return L(!1)}},theme:{color:"#336cf9"},notify:{sms:!0,email:!0},reminder_enable:!0});a.on("payment.failed",(function(e){B(!0),L(!1)})),a.open()}}(c,n):Z(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return Z(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Error happend. Please try again."})]})]}))})).catch((function(e){console.log(e),L(!1),Z(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return Z(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Error happend. Make sure you're online."})]})]}))}))},children:[Object(x.jsx)("input",{type:"number",step:"0.01",min:"10",value:g,onChange:function(e){return y(e.target.value)},placeholder:"Enter amount",required:!0}),Object(x.jsx)("button",{children:"Proceed"})]})]})}),Object(x.jsxs)("div",{className:"rewards",children:[Object(x.jsx)("p",{className:"label",children:"Rewards"}),Object(x.jsxs)("ul",{className:"cards",children:[M.map((function(e,t){return Object(x.jsxs)("li",{children:[Object(x.jsx)("p",{className:"rewardName",children:e.name}),Object(x.jsxs)("div",{children:[e.img&&Object(x.jsx)(d.n,{src:e.img}),e.amount&&Object(x.jsxs)("p",{className:"amount",children:["\u20b9",e.amount]}),Object(x.jsx)("p",{className:"rewardDscr",children:e.dscr})]}),!e.redeemed&&Object(x.jsx)("button",{className:"redeem",onClick:function(){Z(Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("div",{children:Object(x.jsx)("h4",{children:"Redeeming Reward..."})})})),fetch("/api/redeemReward",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({_id:e._id})}).then((function(e){return e.json()})).then((function(e){"ok"===e.code?(_((function(t){return t.map((function(t){return t._id===e.reward._id?e.reward:t}))})),Z(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return Z(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.B,{}),Object(x.jsx)("h4",{children:"Reward succefully redeemed"})]})]}))):Z(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return Z(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Could not redeem reward."})]})]}))})).catch((function(e){console.log(e),Z(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return Z(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Could not redeem reward. Make sure you're online."})]})]}))}))},children:"Redeem"})]},t)})),0===M.length?Object(x.jsx)("li",{className:"placeholder",children:"Nothing yet."}):null]})]})]}),Object(x.jsxs)("div",{className:"rightSection",children:[Object(x.jsx)(P,{paymentMethods:s.paymentMethods}),Object(x.jsx)(F,{})]}),Object(x.jsx)(j.b,{className:"paymentMethodsForm",head:!0,label:"Add Payment Method",setOpen:function(){t.push("/account/profile/wallet/addMoney")},open:c.pathname.startsWith("/account/wallet/addMoney/addPaymentMethod"),children:Object(x.jsx)(S,{onSuccess:function(){return t.push("/account/profile/wallet/addMoney")}})}),Object(x.jsxs)(j.b,{open:T,className:"msg",children:[Object(x.jsx)("button",{onClick:function(){return R(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"158",height:"158",viewBox:"0 0 158 158",children:[Object(x.jsxs)("defs",{children:[Object(x.jsxs)("linearGradient",{id:"linear-gradient",x1:"-0.298",y1:"-0.669",x2:"1.224",y2:"1.588",gradientUnits:"objectBoundingBox",children:[Object(x.jsx)("stop",{offset:"0",stopColor:"#336cf9"}),Object(x.jsx)("stop",{offset:"1",stopColor:"#1be6d6"})]}),Object(x.jsx)("clipPath",{id:"clip-path",children:Object(x.jsx)("rect",{width:"64",height:"64",fill:"none"})})]}),Object(x.jsxs)("g",{id:"Group_163","data-name":"Group 163",transform:"translate(-0.426 -0.384)",children:[Object(x.jsx)("g",{id:"Group_103","data-name":"Group 103",transform:"translate(0 0)",children:Object(x.jsx)("rect",{id:"Rectangle_1104","data-name":"Rectangle 1104",width:"158",height:"158",rx:"79",transform:"translate(0.426 0.384)",fill:"url(#linear-gradient)"})}),Object(x.jsxs)("g",{id:"Component_148_2","data-name":"Component 148 \u2013 2",transform:"translate(47.426 58.384)",clipPath:"url(#clip-path)",children:[Object(x.jsx)("rect",{id:"Rectangle_460","data-name":"Rectangle 460",width:"64",height:"64",transform:"translate(0 0)",fill:"none"}),Object(x.jsx)("path",{id:"Checkbox",d:"M25.35,44.087,0,18.737l5.143-5.143L25.35,33.432,58.782,0l5.143,5.143Z",transform:"translate(0 1.728)",fill:"#fff"})]})]})]}),Object(x.jsxs)("h4",{className:"amount",children:["\u20b9",null===T||void 0===T?void 0:T.amount]}),Object(x.jsx)("h4",{children:"Money added!"})]})]}),Object(x.jsxs)(j.b,{open:!1,className:"msg",children:[Object(x.jsx)("button",{onClick:function(){return B(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"158",height:"158",viewBox:"0 0 158 158",children:[Object(x.jsx)("defs",{children:Object(x.jsxs)("linearGradient",{id:"linear-gradient",x1:"-0.298",y1:"-0.669",x2:"1.224",y2:"1.588",gradientUnits:"objectBoundingBox",children:[Object(x.jsx)("stop",{offset:"0",stopColor:"#f93389"}),Object(x.jsx)("stop",{offset:"1",stopColor:"#e3003e"})]})}),Object(x.jsx)("rect",{id:"Rectangle_1104","data-name":"Rectangle 1104",width:"158",height:"158",rx:"79",fill:"url(#linear-gradient)"}),Object(x.jsx)("g",{id:"Component_85_8","data-name":"Component 85 \u2013 8",transform:"translate(49.472 49.472)",children:Object(x.jsx)("path",{id:"Union_3","data-name":"Union 3",d:"M29.527,34.9,5.368,59.057,0,53.686,24.158,29.527,0,5.368,5.368,0l24.16,24.158L53.686,0l5.371,5.368L34.9,29.527l24.16,24.158-5.371,5.371Z",fill:"#fff"})})]}),Object(x.jsx)("h4",{children:"Add money failed"})]})]}),Object(x.jsx)(j.b,{className:"msg",open:U,children:U})]})},R=c(11),Y=c.n(R),q=c(18),B=c(21),I=function(e){var t=e.order,c=e.setOrders,u=e.selectAll,b=e.setBatch,h=e.batch,O=Object(i.useRef)(),m=Object(i.useRef)(),f=Object(l.g)(),p=(Object(i.useContext)(r.d).user,Object(i.useState)(u||!1)),v=Object(a.a)(p,2),g=v[0],y=v[1],k=Object(i.useState)(!1),N=Object(a.a)(k,2),C=(N[0],N[1],Object(i.useState)(!1)),S=Object(a.a)(C,2),w=S[0],M=S[1],_=function(){fetch("/api/declineOrder",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({_id:t._id})}).then((function(e){return e.json()})).then((function(e){"ok"===e.code?c((function(c){return c.map((function(c){var n;return c._id===t._id?Object(s.a)(Object(s.a)({},c),{},{status:null===(n=e.order)||void 0===n?void 0:n.status}):c}))})):M(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return M(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Could not cancel order. Please try again."})]})]}))})).catch((function(e){console.log(e),M(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return M(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Could not cancel order. Make sure you're online"})]})]}))}))},D=function(){fetch("/api/acceptOrder",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({_id:t._id})}).then((function(e){return e.json()})).then((function(e){"ok"===e.code?c((function(c){return c.map((function(c){var n;return c._id===t._id?Object(s.a)(Object(s.a)({},c),{},{status:null===(n=e.order)||void 0===n?void 0:n.status}):c}))})):M(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return M(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Orders does not exist."})]})]}))})).catch((function(e){console.log(e),M(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return M(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Could not accept order. Make sure you're online."})]})]}))}))},P=function(){fetch("/api/requestCancellation",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({_id:t._id})}).then((function(e){return e.json()})).then((function(e){"ok"===e.code?c((function(c){return c.map((function(c){var n;return c._id===t._id?Object(s.a)(Object(s.a)({},c),{},{status:null===(n=e.order)||void 0===n?void 0:n.status}):c}))})):M(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return M(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Could not cancel order. Please try again."})]})]}))})).catch((function(e){console.log(e),M(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return M(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Could not cancel order. Make sure you're online"})]})]}))}))};return Object(i.useEffect)((function(){y(u)}),[u]),Object(i.useEffect)((function(){b(g?function(e){return[].concat(Object(n.a)(e),[t._id])}:function(e){return e.filter((function(e){return e!==t._id}))})}),[g]),Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("tr",{className:"order ".concat(g?"selected":""),onClick:function(e){e.nativeEvent.path.includes(O.current)||e.nativeEvent.path.includes(m.current)||h.length>0||f.push("/account/myShop/orders/".concat(t._id))},children:[Object(x.jsx)("td",{className:"date",children:Object(x.jsx)(d.r,{format:"DD MMM YYYY, hh:mm a",children:t.createdAt})}),Object(x.jsx)("td",{className:"user",children:Object(x.jsx)(d.F,{user:t.buyer})}),Object(x.jsx)("td",{children:t.products.reduce((function(e,t){return e+t.qty}),0)}),Object(x.jsx)("td",{children:t.refundable||"N/A"}),Object(x.jsx)("td",{children:t.milestones.length||"N/A"}),Object(x.jsx)("td",{children:t.status}),Object(x.jsxs)("td",{children:["\u20b9",t.total]}),Object(x.jsx)("td",{ref:O,children:0===h.length&&Object(x.jsxs)(d.a,{icon:Object(x.jsx)(d.g,{}),children:[Object(x.jsx)(o.b,{to:"/account/myShopping/orders/".concat(t._id),children:"View Detail"}),"pending"===t.status&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(o.b,{to:"#",onClick:function(e){Object(j.a)({label:"Accept Order",question:"You sure want to accept this order?",callback:D})},children:"Accept order"}),Object(x.jsx)(o.b,{to:"#",onClick:function(e){Object(j.a)({label:"Order Cancellation",question:"You sure want to cancel this order?",callback:_})},children:"Cancel order"})]}),"approved"===t.status&&Object(x.jsx)(o.b,{to:"#",onClick:function(e){Object(j.a)({label:"Order Cancellation",question:"You sure want to request cancellation for this order?",callback:P})},children:"Request Cancellation"})]})})]}),Object(x.jsx)(j.b,{className:"msg",open:w,children:w})]})},E=function(e){var t,c,l,u=e.history,b=e.match,h=Object(i.useContext)(r.d),O=h.user,m=h.userType,f=Object(i.useState)(null),p=Object(a.a)(f,2),v=p[0],g=p[1],y=Object(i.useState)(null),k=Object(a.a)(y,2),N=k[0],C=k[1],S=Object(i.useState)((null===(t=O.shopInfo)||void 0===t?void 0:t.shippingCost)||0),w=Object(a.a)(S,2),M=(w[0],w[1]),_=Object(i.useState)(null),D=Object(a.a)(_,2),P=(D[0],D[1],Object(i.useState)(Object(d.K)(null===N||void 0===N?void 0:N.deliveryTime).format("YYYY-MM-DDThh:mm"))),F=Object(a.a)(P,2),A=F[0],T=(F[1],Object(i.useState)("")),R=Object(a.a)(T,2),Y=(R[0],R[1],Object(i.useState)(!1)),q=Object(a.a)(Y,2),B=q[0],I=q[1],E=Object(i.useState)(!1),H=Object(a.a)(E,2),V=H[0],U=H[1],Z=(Object(i.useRef)(),function(){fetch("/api/acceptOrder",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({_id:N._id})}).then((function(e){return e.json()})).then((function(e){"ok"===e.code?(C((function(e){return Object(s.a)(Object(s.a)({},e),{},{status:"approved"})})),g(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return g(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.B,{}),Object(x.jsx)("h4",{children:"Order approved."})]})]}))):g(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return g(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Orders does not exist."})]})]}))})).catch((function(e){console.log(e),g(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return g(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Could not accept order. Make sure you're online."})]})]}))}))}),G=function(){fetch("/api/declineOrder",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({_id:N._id})}).then((function(e){return e.json()})).then((function(e){"ok"===e.code?(C((function(e){return Object(s.a)(Object(s.a)({},e),{},{status:"declined"})})),g(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return g(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.B,{}),Object(x.jsx)("h4",{children:"Order declined."})]})]}))):g(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return g(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Orders does not exist."})]})]}))})).catch((function(e){console.log(e),g(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return g(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Could not decline order. Make sure you're online."})]})]}))}))},W=function(){fetch("/api/updateOrder",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({_id:N._id,status:"shipped"})}).then((function(e){return e.json()})).then((function(e){"ok"===e.code?(C((function(e){return Object(s.a)(Object(s.a)({},N),{},{status:"shipped"})})),g(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return g(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.B,{}),Object(x.jsx)("h4",{children:"Order has been updated. Don't forget to upload proof of shipping below."})]})]}))):g(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return g(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Order could not be updated. Try again."})]})]}))})).catch((function(e){console.log(e),g(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return g(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Order could not be updated. Make sure you're online."})]})]}))}))},J=function(){fetch("/api/updateOrder",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({_id:N._id,status:"delivered"})}).then((function(e){return e.json()})).then((function(e){"ok"===e.code?(C((function(e){return Object(s.a)(Object(s.a)({},N),{},{status:"delivered"})})),g(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return g(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.B,{}),Object(x.jsx)("h4",{children:"Order has been updated. Don't forget to upload proof of delivery below."})]})]}))):g(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return g(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Order could not be updated. Try again."})]})]}))})).catch((function(e){console.log(e),g(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return g(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Order could not be updated. Make sure you're online."})]})]}))}))};return Object(i.useEffect)((function(){fetch("/api/singleOrder?_id=".concat(b.params._id)).then((function(e){return e.json()})).then((function(e){"ok"===e.code?(C(e.order),M(e.shippingCost)):g(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return g(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Orders does not exist."})]})]}))})).catch((function(e){console.log(e),g(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return g(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Could not get order. Make sure you're online."})]})]}))}))}),[]),N?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("div",{className:"actions",children:[Object(x.jsxs)(o.b,{to:"/account/".concat("seller"===m?"myShop":"myShopping","/orders"),className:"back",children:[Object(x.jsx)(d.c,{}),"Back"]}),"approved"===N.status&&Object(x.jsx)("button",{onClick:function(){return Object(j.a)({label:"Mark Order as Shipped",question:"Did you ship the order?",callback:W})},children:"Mark as Shipped"}),"shipped"===N.status&&Object(x.jsx)("button",{onClick:function(){return Object(j.a)({label:"Mark Order as Delivered",question:"Has the order been delivered?",callback:J})},children:"Mark as Delivered"}),"pending"===N.status&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){A?Object(j.a)({lable:"Accept Order",question:Object(x.jsx)(x.Fragment,{children:"You sure want to accept this order?"}),callback:Z}):g(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return g(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Add a delivery time"})]})]}))},children:"Accept"}),Object(x.jsx)("button",{onClick:function(){return Object(j.a)({label:"Decline Order",question:"You sure want to decline this order?",callback:G})},children:"Decline"})]})]}),Object(x.jsxs)("div",{className:"singleOrder",children:[Object(x.jsxs)("div",{className:"summery",children:[Object(x.jsx)("h3",{children:"Order Summery"}),Object(x.jsxs)("ul",{children:[Object(x.jsxs)("li",{children:[Object(x.jsx)("label",{children:"Buyer"}),Object(x.jsx)(d.F,{user:N.buyer})]}),Object(x.jsxs)("li",{children:[Object(x.jsx)("label",{children:"Order ID"}),N._id]}),Object(x.jsxs)("li",{children:[Object(x.jsx)("label",{children:"Status"}),N.status]}),Object(x.jsxs)("li",{children:[Object(x.jsx)("label",{children:"Submitted at"}),Object(x.jsx)(d.r,{format:"DD MMM YYYY, hh:mma",children:N.createdAt})]}),Object(x.jsx)("li",{}),Object(x.jsxs)("li",{className:"devide",children:[Object(x.jsx)("label",{children:"Delivery Address"}),Object(x.jsx)("span",{})]}),Object.entries(N.deliveryDetail).map((function(e,t){var c=Object(a.a)(e,2),n=c[0],s=c[1];return"deliveryWithin"===n?Object(x.jsxs)("li",{children:[Object(x.jsx)("label",{children:"Delivery within"}),N.deliveryDetail.deliveryWithin," days"]},t):Object(x.jsxs)("li",{children:[Object(x.jsx)("label",{children:n}),s]},t)}))]})]}),Object(x.jsxs)("div",{className:"products",children:[Object(x.jsx)("h3",{children:"Products"}),Object(x.jsx)("ul",{children:N.products.map((function(e,t){var c=e.product,n=e.qty,s=e.available;return Object(x.jsxs)("li",{children:[Object(x.jsx)(d.n,{src:c.images[0]||"/open_box.png"}),Object(x.jsxs)("div",{className:"detail",children:[Object(x.jsx)("p",{children:c.name}),Object(x.jsxs)("p",{className:"qty",children:["QTY: ",n]}),"pending"===N.status&&Object(x.jsxs)("p",{className:"available",children:["Available: ",s.toString()]})]}),Object(x.jsxs)("div",{className:"price",children:[Object(x.jsxs)("span",{children:[Object(d.J)({product:c,gst:!0})," x ",n]}),"\u20b9",(Object(d.J)({product:c,gst:!0})*n).fix()]})]},t)}))}),Object(x.jsxs)("div",{className:"total",children:[Object(x.jsxs)("div",{className:"data",children:[Object(x.jsx)("label",{children:"Total"}),"\u20b9",N.products.reduce((function(e,t){return(e+Object(d.J)({product:t.product,gst:!0})*t.qty).fix()}),0)]}),Object(x.jsx)("hr",{}),Object(x.jsxs)("div",{className:"data",children:[Object(x.jsx)("label",{children:"Shipping"}),"\u20b9",N.shippingCost]}),Object(x.jsxs)("div",{className:"data",children:[Object(x.jsxs)("label",{children:["Delivery Pay fee ",N.fee,"%"]}),"\u20b9",(N.total-N.total/(N.fee+100)*100).fix()]}),Object(x.jsx)("hr",{}),Object(x.jsxs)("div",{className:"data",children:[Object(x.jsx)("label",{children:"Grand Total"}),"\u20b9",N.total.fix()]}),Object(x.jsx)("hr",{}),Object(x.jsxs)("div",{className:"data",children:[Object(x.jsx)("label",{children:"You'll recieve"}),"\u20b9",(N.total/(N.fee+100)*100).fix()]})]})]}),Object(x.jsxs)("div",{className:"milestones",children:[Object(x.jsx)("h3",{children:"Milestones"}),Object(x.jsx)("p",{className:"subtitle",children:"Click to view milestone detail."}),Object(x.jsxs)("table",{children:[Object(x.jsx)("thead",{children:Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"Date"}),Object(x.jsx)("td",{children:"Descrption"}),Object(x.jsx)("td",{children:"Amount"}),Object(x.jsx)("td",{children:"Status"})]})}),Object(x.jsxs)("tbody",{children:[N.milestones.map((function(e){return Object(x.jsxs)("tr",{onClick:function(){return u.push("/account/hold?q=".concat(e._id))},children:[Object(x.jsx)("td",{children:Object(x.jsx)(d.r,{format:"DD MMM YYYY, hh:mma",children:e.createdAt})}),Object(x.jsx)("td",{children:e.dscr}),Object(x.jsxs)("td",{children:["\u20b9",e.amount]}),Object(x.jsx)("td",{children:e.status})]},e._id)})),0===N.milestones.length&&Object(x.jsx)("tr",{className:"placeholdert",children:Object(x.jsx)("td",{children:"Nothing yet."})})]})]})]}),Object(x.jsxs)("div",{className:"delivery",children:[Object(x.jsxs)("h3",{children:["Proof of delivery",("approved"===N.status||"shipped"===N.status)&&Object(x.jsx)("button",{onClick:function(){return U(!0)},children:"Upload proof of delivery"})]}),(null===(c=N.files)||void 0===c?void 0:c.length)>0?Object(x.jsx)("div",{className:"thumbs",children:Object(x.jsx)(d.p,{links:N.files})}):Object(x.jsx)(x.Fragment,{children:"No files added."})]}),Object(x.jsxs)("section",{className:"terms",children:[Object(x.jsx)("h3",{children:"Return Policy Terms"}),Object(x.jsx)("ul",{children:null===(l=N.terms)||void 0===l?void 0:l.map((function(e,t){return Object(x.jsxs)("li",{children:[e," "]},t)}))})]})]}),Object(x.jsx)(j.b,{head:!0,label:"Create Milestone",setOpen:I,className:"milestoneRequest",open:B,children:Object(x.jsx)(Mt,{action:"request",definedAmount:N.total,client:N.buyer,order:N._id,onSuccess:function(e){I(!1),g(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return g(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.B,{}),Object(x.jsxs)("h4",{className:"amount",children:["\u20b9",null===e||void 0===e?void 0:e.amount]}),Object(x.jsx)("h4",{children:"Milestone has been requested"})]}),Object(x.jsx)(o.b,{to:"/account/hold",onClick:function(){return g(null)},children:"Check your Delivery pay Hold"})]})),C((function(t){return Object(s.a)(Object(s.a)({},t),{},{milestones:[].concat(Object(n.a)(t.milestones),[e])})}))}})}),Object(x.jsx)(j.b,{head:!0,label:"Upload proof of shipping & delivery",setOpen:U,open:V,className:"fileUpload",children:Object(x.jsx)(L,{order:N,onSuccess:function(e){U(!1),C((function(t){return Object(s.a)(Object(s.a)({},t),{},{files:e.files})}))}})}),Object(x.jsx)(j.b,{className:"msg",open:v,children:v})]}):Object(x.jsx)(x.Fragment,{children:"Loading"})},L=function(e){var t=e.order,c=e.onSuccess,n=Object(i.useState)(!1),s=Object(a.a)(n,2),r=s[0],l=s[1],o=Object(i.useState)([]),u=Object(a.a)(o,2),b=u[0],h=u[1],O=Object(i.useState)(null),m=Object(a.a)(O,2),f=m[0],p=m[1],v=function(){var e=Object(q.a)(Y.a.mark((function e(){var n;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l(!0),!b.length){e.next=7;break}return e.next=4,Object(d.E)({files:b,setMsg:p});case 4:e.t0=e.sent,e.next=8;break;case 7:e.t0=[];case 8:n=e.t0,fetch("/api/updateOrder",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({_id:t._id,files:n})}).then((function(e){return e.json()})).then((function(e){l(!1),"ok"===e.code?null===c||void 0===c||c(e.order):p(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return p(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Could not upload files. Try again."})]})]}))})).catch((function(e){l(!1),console.log(e),p(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return p(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Could not upload files. Make sure you're online."})]})]}))}));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("form",{onSubmit:function(e){e.preventDefault(),Object(j.a)({title:"Upload Proof of Shipping & Delivery",question:Object(x.jsxs)(x.Fragment,{children:["You sure want to upload these files?",Object(x.jsx)("span",{className:"note",children:"Keep in mind these files can not be deleted later."})]}),callback:v})},children:[Object(x.jsxs)("section",{children:[Object(x.jsx)("label",{children:"Upload Images of the products, shipment reciept etc."}),Object(x.jsx)(d.k,{multiple:!0,accept:"image/*",required:!0,onChange:function(e){return h(e)}})]}),Object(x.jsx)("section",{className:"btns",children:Object(x.jsx)("button",{className:"submit",children:"Submit"})})]}),r&&Object(x.jsx)("div",{className:"spinnerContainer",children:Object(x.jsx)("div",{className:"spinner"})}),Object(x.jsx)(j.b,{className:"msg",open:f,children:f})]})},H=function(e){e.categories;var t=Object(i.useRef)(),c=Object(i.useState)(0),n=Object(a.a)(c,2),r=n[0],l=n[1],o=Object(i.useState)(1),u=Object(a.a)(o,2),h=u[0],O=u[1],m=Object(i.useState)(20),f=Object(a.a)(m,2),p=f[0],v=f[1],g=Object(i.useState)(""),y=Object(a.a)(g,2),k=y[0],N=y[1],C=Object(i.useState)(""),S=Object(a.a)(C,2),w=S[0],M=S[1],_=Object(i.useState)(""),D=Object(a.a)(_,2),P=D[0],F=D[1],A=Object(i.useState)({column:"createdAt",order:"dsc"}),T=Object(a.a)(A,2),R=T[0],Y=(T[1],Object(i.useState)({startDate:new Date,endDate:new Date})),q=Object(a.a)(Y,2),B=q[0],E=q[1],L=Object(i.useState)(!1),H=Object(a.a)(L,2),V=H[0],U=H[1],Z=Object(i.useState)({}),G=Object(a.a)(Z,2),W=G[0],J=G[1],z=Object(i.useState)([]),K=Object(a.a)(z,2),$=K[0],Q=K[1],X=Object(i.useState)(!1),ee=Object(a.a)(X,2),te=ee[0],ce=ee[1],ne=Object(i.useState)([]),se=Object(a.a)(ne,2),ae=se[0],ie=se[1],re=Object(i.useState)(null),le=Object(a.a)(re,2),oe=le[0],je=le[1];return Object(i.useEffect)((function(){var e=Object(d.K)({time:null===B||void 0===B?void 0:B.startDate,format:"YYYY-MM-DD"}),t=Object(d.K)({time:null===B||void 0===B?void 0:B.endDate.setHours(24,0,0,0),format:"YYYY-MM-DD"});fetch("/api/getOrders?".concat(new URLSearchParams(Object(s.a)(Object(s.a)(Object(s.a)({user:"seller"},w&&{q:w}),{},{page:h,perPage:p,sort:R.column,order:R.order},V&&{dateFrom:e,dateTo:t}),k&&{status:k})))).then((function(e){return e.json()})).then((function(e){"ok"===e.code&&(Q(e.orders),l(e.total))})).catch((function(e){console.log(e),je(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return je(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Could not get orders."})]})]}))}))}),[k,w,h,p,V]),Object(i.useLayoutEffect)((function(){if(t.current){var e=t.current.getBoundingClientRect(),c=e.height,n=e.y,s=e.width,a=e.x;J({position:"fixed",top:c+n+4,right:window.innerWidth-a-s})}}),[]),Object(i.useEffect)((function(){te||ie([])}),[te]),Object(i.useEffect)((function(){0===ae.length&&ce(!1)}),[ae]),Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"benner",children:Object(x.jsx)("p",{children:"Order Management"})}),Object(x.jsxs)("div",{className:"filters",children:[Object(x.jsxs)("section",{children:[Object(x.jsx)("label",{children:"Total:"}),r]}),Object(x.jsxs)("section",{children:[Object(x.jsx)("label",{children:"Per Page:"}),Object(x.jsx)(d.h,{defaultValue:0,options:[{label:"20",value:20},{label:"30",value:30},{label:"50",value:50}],onChange:function(e){return v(e.value)}})]}),Object(x.jsxs)("section",{className:"search",children:[Object(x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"23",height:"23",viewBox:"0 0 23 23",children:Object(x.jsx)("path",{id:"Icon_ionic-ios-search","data-name":"Icon ionic-ios-search",d:"M27.23,25.828l-6.4-6.455a9.116,9.116,0,1,0-1.384,1.4L25.8,27.188a.985.985,0,0,0,1.39.036A.99.99,0,0,0,27.23,25.828ZM13.67,20.852a7.2,7.2,0,1,1,5.091-2.108A7.155,7.155,0,0,1,13.67,20.852Z",transform:"translate(-4.5 -4.493)",fill:"#707070",opacity:"0.74"})}),Object(x.jsx)("input",{value:w,onChange:function(e){return M(e.target.value)},placeholder:"Search for Buyer"}),w&&Object(x.jsx)("button",{onClick:function(){return M("")},children:Object(x.jsx)(d.G,{})})]}),Object(x.jsxs)("section",{className:"category",children:[Object(x.jsx)("label",{children:"Status:"}),Object(x.jsx)(d.h,{defaultValue:0,options:[{label:"All",value:""},{label:"Pending",value:"pending"},{label:"Approved",value:"approved"},{label:"Cancelled",value:"cancelled"},{label:"Hold",value:"Hold"},{label:"Shipped",value:"shipped"},{label:"Delivered",value:"delivered"},{label:"Refunded",value:"refunded"}],onChange:function(e){return N(e.value)}})]}),Object(x.jsxs)("section",{className:"date ".concat(V?"open":""),ref:t,onClick:function(){return F(!0)},children:[Object(x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"30.971",height:"30.971",viewBox:"0 0 30.971 30.971",children:Object(x.jsx)("path",{id:"Path_299","data-name":"Path 299",d:"M3.992,2.42H6.775V.968a.968.968,0,1,1,1.936,0V2.42H22.26V.968a.968.968,0,1,1,1.936,0V2.42h2.783a4,4,0,0,1,3.992,3.992V26.978a4,4,0,0,1-3.992,3.992H3.992A4,4,0,0,1,0,26.978V6.412A4,4,0,0,1,3.992,2.42ZM26.978,4.355H24.2v.968a.968.968,0,1,1-1.936,0V4.355H8.71v.968a.968.968,0,1,1-1.936,0V4.355H3.992A2.059,2.059,0,0,0,1.936,6.412v2.3h27.1v-2.3A2.059,2.059,0,0,0,26.978,4.355ZM3.992,29.035H26.978a2.059,2.059,0,0,0,2.057-2.057V10.646H1.936V26.978A2.059,2.059,0,0,0,3.992,29.035Z",fill:"#336cf9"})}),V&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("div",{className:"dates",children:[Object(x.jsxs)("p",{children:["From:"," ",Object(x.jsx)(d.r,{format:"DD MMM, YYYY",children:B.startDate})]}),Object(x.jsxs)("p",{children:["To: ",Object(x.jsx)(d.r,{format:"DD MMM, YYYY",children:B.endDate})]})]}),Object(x.jsx)("button",{className:"clearDateFilter",onClick:function(){E({startDate:new Date,endDate:new Date}),U(!1)},children:Object(x.jsx)(d.G,{})})]})]})]}),ae.length>0&&Object(x.jsx)("div",{className:"batchAction",children:Object(x.jsx)("button",{onClick:function(){return console.log("batch delete")},children:"Delete"})}),Object(x.jsxs)("table",{className:"table orders",children:[Object(x.jsx)("thead",{children:Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{className:"date",children:"Date"}),Object(x.jsx)("th",{children:"Buyer"}),Object(x.jsx)("th",{children:"QTY"}),Object(x.jsx)("th",{children:"Refundable"}),Object(x.jsx)("th",{children:"Milestone"}),Object(x.jsx)("th",{children:"Status"}),Object(x.jsx)("th",{children:"Total Price"}),Object(x.jsx)("th",{children:"Actions"})]})}),Object(x.jsxs)("tbody",{children:[$.map((function(e,t){return Object(x.jsx)(I,{order:e,setOrders:Q,selectAll:te,setBatch:ie,batch:ae},t)})),0===$.length&&Object(x.jsx)("tr",{className:"placeholder",children:Object(x.jsx)("td",{children:"No product yet."})})]})]}),Object(x.jsx)(d.t,{total:r,btns:5,currentPage:h,perPage:p,setPage:O}),Object(x.jsx)(j.b,{className:"msg",open:oe,children:oe}),Object(x.jsx)(j.b,{open:P,onBackdropClick:function(){return F(!1)},className:"datePicker",backdropClass:"datePicker",style:W,children:Object(x.jsx)(b.DateRange,{className:"dateRange",ranges:[B],onChange:function(e){E(e.range1),e.range1.endDate!==e.range1.startDate&&(F(!1),U(!0))}})})]})},V=function(e){var t,c=e.refund,s=(e.setRefunds,e.selectAll),o=e.setBatch,u=(e.batch,Object(l.g)()),b=(Object(i.useContext)(r.d).user,Object(i.useState)(s||!1)),h=Object(a.a)(b,2),O=h[0],m=h[1],f=Object(i.useState)(!1),p=Object(a.a)(f,2),v=(p[0],p[1],Object(i.useState)(!1)),g=Object(a.a)(v,2),y=g[0];g[1];return Object(i.useEffect)((function(){m(s)}),[s]),Object(i.useEffect)((function(){o(O?function(e){return[].concat(Object(n.a)(e),[c._id])}:function(e){return e.filter((function(e){return e!==c._id}))})}),[O]),Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("tr",{className:"refund ".concat(O?"selected":""),onClick:function(){return u.push("/account/myShop/refunds/".concat(c._id))},children:[Object(x.jsx)("td",{className:"date",children:Object(x.jsx)(d.r,{format:"DD MMM YYYY, hh:mm a",children:c.createdAt})}),Object(x.jsx)("td",{children:Object(x.jsx)(d.F,{user:c.seller})}),Object(x.jsx)("td",{children:null===(t=c.order)||void 0===t?void 0:t.products.reduce((function(e,t){return e+t.qty}),0)}),Object(x.jsx)("td",{children:c.status}),Object(x.jsxs)("td",{children:["\u20b9",c.order.total]})]}),Object(x.jsx)(j.b,{className:"msg",open:y,children:y})]})},U=function(e){var t,c,l,u=e.history,b=e.match,h=Object(i.useContext)(r.d).userType,O=Object(i.useState)(null),m=Object(a.a)(O,2),f=m[0],p=m[1],v=Object(i.useState)(null),g=Object(a.a)(v,2),y=g[0],k=g[1],N=Object(i.useState)(null),C=Object(a.a)(N,2),S=C[0],w=C[1],M=Object(i.useState)(!1),_=Object(a.a)(M,2),D=_[0],P=_[1],F=Object(i.useState)(!1),A=Object(a.a)(F,2),T=A[0],R=A[1],B=(Object(i.useRef)(),function(){var e=Object(q.a)(Y.a.mark((function e(t){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("/api/updateRefund",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object(s.a)(Object(s.a)({},t),{},{_id:y._id}))}).then((function(e){return e.json()})).then((function(e){if("ok"===e.code)return e.order;p(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return p(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Refund request does not exist."})]})]}))})).catch((function(e){console.log(e),p(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return p(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Could not update refund. Make sure you're online."})]})]}))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),I=function(){var e=Object(q.a)(Y.a.mark((function e(){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fetch("/api/acceptRefund",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({_id:y._id})}).then((function(e){return e.json()})).then((function(e){"ok"===e.code?(k((function(e){return Object(s.a)(Object(s.a)({},e),{},{status:"approved"})})),p(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return p(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.B,{}),Object(x.jsx)("h4",{children:"Refund request has been approved."})]})]}))):p(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return p(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Refund request does not exist."})]})]}))})).catch((function(e){console.log(e),p(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return p(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Could not accept refund request. Make sure you're online."})]})]}))}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(q.a)(Y.a.mark((function e(){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fetch("/api/declineRefund",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({_id:y._id})}).then((function(e){return e.json()})).then((function(e){"ok"===e.code?(k((function(e){return Object(s.a)(Object(s.a)({},e),{},{status:"declined"})})),p(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return p(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.B,{}),Object(x.jsx)("h4",{children:"Refund request has been declined."})]})]}))):p(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return p(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Refund request does not exist."})]})]}))})).catch((function(e){console.log(e),p(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return p(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Could not decline refund request. Make sure you're online."})]})]}))}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){fetch("/api/singleRefund?_id=".concat(b.params._id)).then((function(e){return e.json()})).then((function(e){"ok"===e.code?(w(e.refund.order),k(e.refund)):p(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return p(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Refund does not exist."})]})]}))})).catch((function(e){console.log(e),p(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return p(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Could not get Refund. Make sure you're online."})]})]}))}))}),[]),Object(i.useEffect)((function(){if(null===S||void 0===S?void 0:S.refundable){var e=0;switch(S.refundable){case"Upto 24 Hours After Delivery":e=1;break;case"Upto 7 Days After Delivery":e=7;break;case"Upto 15 Days After Delivery":e=15;break;default:return}var t=new Date((new Date).getTime()+864e5*e);new Date<t?R(t):R(null)}else R(null)}),[y]),y?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("div",{className:"actions",children:[Object(x.jsxs)(o.b,{to:"/account/".concat("seller"===h?"myShop":"myShopping","/refunds"),className:"back",children:[Object(x.jsx)(d.c,{}),"Back"]}),"productSent"===y.status&&Object(x.jsx)("button",{onClick:function(){return Object(j.a)({label:"Refund Resolved",question:"You sure want to mark this refund resolved?",callback:function(){B({status:"productRecieved"}).then((function(e){k((function(e){return Object(s.a)(Object(s.a)({},e),{},{status:"productRecieved"})}))}))}})},children:"Mark as Recieved"}),"pending"===y.status&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return Object(j.a)({label:"Accepting Refund",question:"Do you accept this refund request?",callback:I})},children:"Accept"}),Object(x.jsx)("button",{onClick:function(){return Object(j.a)({label:"Declining Refund",question:"Do you decline this refund?",callback:E})},children:"Decline"})]})]}),Object(x.jsxs)("div",{className:"singleOrder",children:[Object(x.jsxs)("div",{className:"summery",children:[Object(x.jsx)("h3",{children:"Summery"}),Object(x.jsxs)("ul",{children:[Object(x.jsxs)("li",{className:"devide",children:[Object(x.jsx)("label",{children:"Order"}),Object(x.jsx)("span",{})]}),Object(x.jsxs)("li",{children:[Object(x.jsx)("label",{children:"Seller"}),Object(x.jsx)(d.F,{user:S.seller})]}),Object(x.jsxs)("li",{children:[Object(x.jsx)("label",{children:"Order ID"}),S._id]}),Object(x.jsxs)("li",{children:[Object(x.jsx)("label",{children:"Status"}),S.status]}),Object(x.jsxs)("li",{children:[Object(x.jsx)("label",{children:"Ordered at"}),Object(x.jsx)(d.r,{format:"DD MMM YYYY, hh:mma",children:S.createdAt})]}),Object(x.jsxs)("li",{children:[Object(x.jsx)("label",{children:"Delivered at"}),Object(x.jsx)(d.r,{format:"DD MMM YYYY, hh:mm a",children:S.deliveredAt})]}),Object(x.jsxs)("li",{children:[Object(x.jsx)("label",{children:"Refundable"}),S.refundable||"N/A"]}),Object(x.jsxs)("li",{children:[Object(x.jsx)("label",{children:"Proof of delivery"}),(null===(t=S.files)||void 0===t?void 0:t.length)>0?Object(x.jsx)("div",{className:"thumbs",children:Object(x.jsx)(d.p,{links:S.files})}):Object(x.jsx)(x.Fragment,{children:"No files added."})]}),T&&Object(x.jsxs)("li",{children:[Object(x.jsx)("label",{children:"Refund till"}),Object(x.jsx)(d.r,{format:"DD MMM YYYY, hh:mm a",children:T})]}),Object(x.jsx)("li",{}),Object(x.jsxs)("li",{className:"devide",children:[Object(x.jsx)("label",{children:"Refund"}),Object(x.jsx)("span",{})]}),Object(x.jsxs)("li",{children:[Object(x.jsx)("label",{children:"Refund ID"}),y._id]}),Object(x.jsxs)("li",{children:[Object(x.jsx)("label",{children:"Status"}),y.status]}),Object(x.jsxs)("li",{children:[Object(x.jsx)("label",{children:"Submitted at"}),Object(x.jsx)(d.r,{format:"DD MMM YYYY, hh:mma",children:y.createdAt})]}),Object(x.jsxs)("li",{children:[Object(x.jsx)("label",{children:"Issue"}),y.issue]}),Object(x.jsxs)("li",{children:[Object(x.jsx)("label",{children:"Descrption"}),y.dscr]}),Object(x.jsxs)("li",{children:[Object(x.jsx)("label",{children:"Images"}),Object(x.jsx)("div",{className:"thumbs",children:y.files.length?Object(x.jsx)(d.p,{links:y.files}):Object(x.jsx)(x.Fragment,{children:"No Images has been provided."})})]}),Object(x.jsx)("li",{}),Object(x.jsxs)("li",{className:"devide",children:[Object(x.jsx)("label",{children:"Delivery Address"}),Object(x.jsx)("span",{})]}),Object(x.jsx)(x.Fragment,{children:Object.entries(S.deliveryDetail).map((function(e,t){var c=Object(a.a)(e,2),n=c[0],s=c[1];return"deliveryTime"===n?Object(x.jsxs)("li",{children:[Object(x.jsx)("label",{children:"Delivery date"}),S.deliveryDetail.deliveryTime?Object(x.jsx)(d.r,{format:"DD MMM, YYYY hh:mma",children:S.deliveryDetail.deliveryTime}):"N/A"]},t):Object(x.jsxs)("li",{children:[Object(x.jsx)("label",{children:n}),s]},t)}))})]})]}),Object(x.jsxs)("div",{className:"products",children:[Object(x.jsx)("h3",{children:"Products"}),Object(x.jsx)("ul",{children:S.products.map((function(e,t){var c=e.product,n=e.qty;return Object(x.jsxs)("li",{children:[Object(x.jsx)(d.n,{src:c.images[0]||"/open_box.png"}),Object(x.jsxs)("div",{className:"detail",children:[Object(x.jsx)("p",{children:c.name}),Object(x.jsxs)("p",{className:"qty",children:["QTY: ",n]})]}),Object(x.jsxs)("div",{className:"price",children:[Object(x.jsxs)("span",{children:[Object(d.J)({product:c,gst:!0})," x ",n]}),"\u20b9",Object(d.J)({product:c,gst:!0})*n]})]},t)}))}),Object(x.jsxs)("div",{className:"total",children:[Object(x.jsxs)("div",{className:"data",children:[Object(x.jsx)("label",{children:"Total"}),"\u20b9",S.products.reduce((function(e,t){return e+Object(d.J)({product:t.product,gst:!0})*t.qty}),0)]}),Object(x.jsxs)("div",{className:"data",children:[Object(x.jsx)("label",{children:"Shipping"}),S.shipping||"N/A"]}),Object(x.jsxs)("div",{className:"data",children:[Object(x.jsx)("label",{children:"Grand Total"}),"\u20b9",S.products.reduce((function(e,t){return e+Object(d.J)({product:t.product,gst:!0})*t.qty}),0)+(+S.shipping||0)]})]})]}),Object(x.jsxs)("div",{className:"milestones",children:[Object(x.jsxs)("h3",{children:["Milestones",("approved"===y.status||"productSent"===y.status||"productRecieved"===y.status)&&Object(x.jsx)("button",{onClick:function(){return P(!0)},children:"Create Milestone"})]}),"pending"===y.status&&Object(x.jsx)("p",{children:"You can create milestones once you accept the refund request."}),"declined"===y.status&&Object(x.jsx)("p",{children:"This refund request has been declined."}),!("declined"===y.status||"pending"===y.status)&&Object(x.jsxs)("table",{cellSpacing:0,cellPadding:0,children:[Object(x.jsx)("thead",{children:Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"Date"}),Object(x.jsx)("td",{children:"Descrption"}),Object(x.jsx)("td",{children:"Amount"}),Object(x.jsx)("td",{children:"Status"})]})}),Object(x.jsxs)("tbody",{children:[y.milestones.map((function(e){return Object(x.jsxs)("tr",{onClick:function(){return u.push("/account/hold?q=".concat(e._id))},children:[Object(x.jsx)("td",{children:Object(x.jsx)(d.r,{format:"DD MMM YYYY, hh:mma",children:e.createdAt})}),Object(x.jsx)("td",{children:e.dscr}),Object(x.jsxs)("td",{children:["\u20b9",e.amount]}),Object(x.jsx)("td",{children:e.status})]},e._id)})),0===y.milestones.length&&Object(x.jsx)("tr",{className:"placeholdert",children:Object(x.jsx)("td",{children:"Nothing yet."})})]})]})]}),Object(x.jsxs)("section",{className:"terms",children:[Object(x.jsx)("h3",{children:"Return Policy Terms"}),Object(x.jsxs)("ul",{children:[null===(c=S.terms)||void 0===c?void 0:c.map((function(e,t){return Object(x.jsx)("li",{children:e},t)})),!(null===(l=S.terms)||void 0===l?void 0:l.length)&&Object(x.jsx)("li",{children:"No terms has been set by the seller yet."})]})]})]}),Object(x.jsx)(j.b,{head:!0,label:"Create Milestone",setOpen:P,className:"milestoneRequest",open:D,children:Object(x.jsx)(Mt,{action:"create",definedAmount:S.total,client:y.seller,refund:y._id,onSuccess:function(e){P(!1),p(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return p(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.B,{}),Object(x.jsxs)("h4",{className:"amount",children:["\u20b9",null===e||void 0===e?void 0:e.amount]}),Object(x.jsx)("h4",{children:"Milestone has been created"})]}),Object(x.jsx)(o.b,{to:"/account/hold",onClick:function(){return p(null)},children:"Check your Delivery pay Hold"})]})),k((function(t){return Object(s.a)(Object(s.a)({},t),{},{milestones:[].concat(Object(n.a)(t.milestones),[e])})}))}})}),Object(x.jsx)(j.b,{className:"msg",open:f,children:f})]}):Object(x.jsx)(x.Fragment,{children:"Loading"})},Z=function(e){e.history,e.location;var t=Object(i.useContext)(r.d).userType,c=Object(i.useRef)(),n=Object(i.useState)(0),l=Object(a.a)(n,2),o=l[0],u=l[1],h=Object(i.useState)(1),O=Object(a.a)(h,2),m=O[0],f=O[1],p=Object(i.useState)(20),v=Object(a.a)(p,2),g=v[0],y=v[1],k=Object(i.useState)(""),N=Object(a.a)(k,2),C=N[0],S=N[1],w=Object(i.useState)(""),M=Object(a.a)(w,2),_=M[0],D=M[1],P=Object(i.useState)(""),F=Object(a.a)(P,2),A=F[0],T=F[1],R=Object(i.useState)({column:"createdAt",order:"dsc"}),Y=Object(a.a)(R,2),q=Y[0],B=(Y[1],Object(i.useState)({startDate:new Date,endDate:new Date})),I=Object(a.a)(B,2),E=I[0],L=I[1],H=Object(i.useState)(!1),U=Object(a.a)(H,2),Z=U[0],G=U[1],W=Object(i.useState)({}),J=Object(a.a)(W,2),z=J[0],K=J[1],$=Object(i.useState)([]),Q=Object(a.a)($,2),X=Q[0],ee=Q[1],te=Object(i.useState)(!1),ce=Object(a.a)(te,2),ne=ce[0],se=ce[1],ae=Object(i.useState)([]),ie=Object(a.a)(ae,2),re=ie[0],le=ie[1],oe=Object(i.useState)(null),je=Object(a.a)(oe,2),de=je[0],ue=je[1];return Object(i.useEffect)((function(){var e=Object(d.K)({time:null===E||void 0===E?void 0:E.startDate,format:"YYYY-MM-DD"}),c=Object(d.K)({time:null===E||void 0===E?void 0:E.endDate.setHours(24,0,0,0),format:"YYYY-MM-DD"});fetch("/api/getRefunds?".concat(new URLSearchParams(Object(s.a)(Object(s.a)(Object(s.a)({user:t},C&&{q:C}),{},{page:m,perPage:g,sort:q.column,order:q.order},Z&&{dateFrom:e,dateTo:c}),_&&{status:_})))).then((function(e){return e.json()})).then((function(e){"ok"===e.code&&(ee(e.refunds),u(e.total))})).catch((function(e){console.log(e),ue(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return ue(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Could not get orders."})]})]}))}))}),[C,m,g,Z,_]),Object(i.useLayoutEffect)((function(){if(c.current){var e=c.current.getBoundingClientRect(),t=e.height,n=e.y,s=e.width,a=e.x;K({position:"fixed",top:t+n+4,right:window.innerWidth-a-s})}}),[]),Object(i.useEffect)((function(){ne||le([])}),[ne]),Object(i.useEffect)((function(){0===re.length&&se(!1)}),[re]),Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"benner",children:Object(x.jsx)("p",{children:"My Refunds"})}),Object(x.jsxs)("div",{className:"filters",children:[Object(x.jsxs)("section",{children:[Object(x.jsx)("label",{children:"Total:"}),o]}),Object(x.jsxs)("section",{children:[Object(x.jsx)("label",{children:"Per Page:"}),Object(x.jsx)(d.h,{defaultValue:0,options:[{label:"20",value:20},{label:"30",value:30},{label:"50",value:50}],onChange:function(e){return y(e.value)}})]}),Object(x.jsxs)("section",{className:"search",children:[Object(x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"23",height:"23",viewBox:"0 0 23 23",children:Object(x.jsx)("path",{id:"Icon_ionic-ios-search","data-name":"Icon ionic-ios-search",d:"M27.23,25.828l-6.4-6.455a9.116,9.116,0,1,0-1.384,1.4L25.8,27.188a.985.985,0,0,0,1.39.036A.99.99,0,0,0,27.23,25.828ZM13.67,20.852a7.2,7.2,0,1,1,5.091-2.108A7.155,7.155,0,0,1,13.67,20.852Z",transform:"translate(-4.5 -4.493)",fill:"#707070",opacity:"0.74"})}),Object(x.jsx)("input",{value:C,onChange:function(e){return S(e.target.value)},placeholder:"Search for Customer"}),C&&Object(x.jsx)("button",{onClick:function(){return S("")},children:Object(x.jsx)(d.G,{})})]}),Object(x.jsxs)("section",{className:"category",children:[Object(x.jsx)("label",{children:"Status:"}),Object(x.jsx)(d.h,{defaultValue:0,options:[{label:"All",value:""},{label:"Pending",value:"pending"},{label:"Approved",value:"approved"},{label:"Product Sent",value:"productSent"},{label:"Product Recieved",value:"productRecieved"},{label:"Resolved",value:"resolved"}],onChange:function(e){return D(e.value)}})]}),Object(x.jsxs)("section",{className:"date ".concat(Z?"open":""),ref:c,onClick:function(){return T(!0)},children:[Object(x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"30.971",height:"30.971",viewBox:"0 0 30.971 30.971",children:Object(x.jsx)("path",{id:"Path_299","data-name":"Path 299",d:"M3.992,2.42H6.775V.968a.968.968,0,1,1,1.936,0V2.42H22.26V.968a.968.968,0,1,1,1.936,0V2.42h2.783a4,4,0,0,1,3.992,3.992V26.978a4,4,0,0,1-3.992,3.992H3.992A4,4,0,0,1,0,26.978V6.412A4,4,0,0,1,3.992,2.42ZM26.978,4.355H24.2v.968a.968.968,0,1,1-1.936,0V4.355H8.71v.968a.968.968,0,1,1-1.936,0V4.355H3.992A2.059,2.059,0,0,0,1.936,6.412v2.3h27.1v-2.3A2.059,2.059,0,0,0,26.978,4.355ZM3.992,29.035H26.978a2.059,2.059,0,0,0,2.057-2.057V10.646H1.936V26.978A2.059,2.059,0,0,0,3.992,29.035Z",fill:"#336cf9"})}),Z&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("div",{className:"dates",children:[Object(x.jsxs)("p",{children:["From:"," ",Object(x.jsx)(d.r,{format:"DD MMM, YYYY",children:E.startDate})]}),Object(x.jsxs)("p",{children:["To: ",Object(x.jsx)(d.r,{format:"DD MMM, YYYY",children:E.endDate})]})]}),Object(x.jsx)("button",{className:"clearDateFilter",onClick:function(){L({startDate:new Date,endDate:new Date}),G(!1)},children:Object(x.jsx)(d.G,{})})]})]})]}),re.length>0&&Object(x.jsx)("div",{className:"batchAction",children:Object(x.jsx)("button",{onClick:function(){return console.log("batch delete")},children:"Delete"})}),Object(x.jsxs)("table",{className:"table refunds",children:[Object(x.jsx)("thead",{children:Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{className:"date",children:"Date"}),Object(x.jsx)("th",{children:"Customer"}),Object(x.jsx)("th",{children:"QTY"}),Object(x.jsx)("th",{children:"Status"}),Object(x.jsx)("th",{children:"Total Price"})]})}),Object(x.jsxs)("tbody",{children:[X.map((function(e){return Object(x.jsx)(V,{refund:e,setRefunds:ee,selectAll:ne,setBatch:le,batch:re},e._id)})),0===X.length&&Object(x.jsx)("tr",{className:"placeholder",children:Object(x.jsx)("td",{children:"No product yet."})})]})]}),Object(x.jsx)(d.t,{total:o,btns:5,currentPage:m,perPage:g,setPage:f}),Object(x.jsx)(j.b,{className:"msg",open:de,children:de}),Object(x.jsx)(j.b,{open:A,onBackdropClick:function(){return T(!1)},className:"datePicker",backdropClass:"datePicker",style:z,children:Object(x.jsx)(b.DateRange,{className:"dateRange",ranges:[E],onChange:function(e){L(e.range1),e.range1.endDate!==e.range1.startDate&&(T(!1),G(!0))}})})]})},G=c(52),W=c(61),J=c.n(W);function z(e){return K.apply(this,arguments)}function K(){return(K=Object(q.a)(Y.a.mark((function e(t){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("/api/editUserProfile",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}c(152);var $=function(e){var t=e.method,c=e.setMsg,n=Object(i.useContext)(r.d).setUser,l=Object(i.useState)(!1),o=Object(a.a)(l,2),u=o[0],b=o[1],h=Object(i.useCallback)((function(e){fetch("/api/deletePaymentMethod",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({_id:e._id})}).then((function(e){return e.json()})).then((function(t){"ok"===t.code?n((function(t){return Object(s.a)(Object(s.a)({},t),{},{paymentMethods:t.paymentMethods.filter((function(t){return t._id!==e._id}))})})):c(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return c(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Payment method could not be deleted."})]})]}))}))}),[]);return Object(x.jsxs)("li",{children:[Object(x.jsxs)("div",{className:"actions",children:[Object(x.jsx)("button",{className:"edit",onClick:function(){return b(t.__t)},children:"Edit"}),Object(x.jsx)("button",{className:"delete",onClick:function(){return Object(j.a)({label:"Payment method delete",question:"Do you want to delete this payment method?",callback:function(){return h(t)}})},children:"Delete"})]}),"BankCard"===t.__t&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(_,{card:t}),u===t.__t&&Object(x.jsx)(j.b,{open:u,head:!0,label:"Edit Payment Method",setOpen:b,className:"editPaymentMethod",children:Object(x.jsx)(w,{prefill:t,onSuccess:function(e){e&&(b(!1),c(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return c(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.B,{}),Object(x.jsx)("h4",{children:"Payment method updated."})]})]})))}})})]}),"BankAccount"===t.__t&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(D,{account:t}),u===t.__t&&Object(x.jsx)(j.b,{open:u,head:!0,label:"Edit Payment Method",setOpen:b,className:"editPaymentMethod",children:Object(x.jsx)(M,{prefill:t,onSuccess:function(e){e&&(b(!1),c(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return c(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.B,{}),Object(x.jsx)("h4",{children:"Payment method updated."})]})]})))}})})]})]})},Q=function(e){var t=e.label,c=e.fields,n=e.value,s=e.onError,l=e.setMsg,o=e.formData,j=Object(i.useContext)(r.d).setUser,u=Object(i.useState)(!1),b=Object(a.a)(u,2),h=b[0],O=b[1],m=Object(i.useRef)(null),f=function(){var e=Object(q.a)(Y.a.mark((function e(t){var c,n,i,r,u,b;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),c={},n=Object(G.a)(new FormData(t.target).entries());try{for(n.s();!(i=n.n()).done;)r=Object(a.a)(i.value,2),u=r[0],b=r[1],c[u]=b}catch(h){n.e(h)}finally{n.f()}if(!c.password||c.password===c.confirm_password){e.next=7;break}return null===s||void 0===s||s(),e.abrupt("return");case 7:if(c["address.city"]&&navigator.geolocation.getCurrentPosition((function(e){var t=e.coords.latitude,n=e.coords.longitude;c["address.location"]={type:"Point",coordinates:[n,t]}})),!c["kyc.files"]){e.next=15;break}return e.next=11,Object(d.E)({files:o,setMsg:l});case 11:if(e.t0=e.sent,e.t0){e.next=14;break}e.t0=[];case 14:c["kyc.files"]=e.t0;case 15:if(!c["gst.detail.files"]){e.next=22;break}return e.next=18,Object(d.E)({files:o,setMsg:l});case 18:if(e.t1=e.sent,e.t1){e.next=21;break}e.t1=[];case 21:c["gst.detail.files"]=e.t1;case 22:fetch("/api/editUserProfile",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}).then((function(e){return e.json()})).then((function(e){var t=e.user;t?(j(t),O(!1)):alert("someting went wrong")})).catch((function(e){console.log(e),alert("someting went wrong")}));case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsxs)("li",{children:[Object(x.jsx)("p",{className:"label",children:t}),Object(x.jsxs)("form",{ref:m,onSubmit:f,children:[h?Object(x.jsx)("div",{className:"inputs",children:c}):Object(x.jsx)("div",{className:"currentValue",children:n}),Object(x.jsx)("div",{className:"btns",children:h?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{type:"submit",children:"Save changes"},"submit"),Object(x.jsx)("button",{type:"button",onClick:function(){return O(!1)},children:"Cancel"},"cancel")]}):Object(x.jsx)("button",{type:"button",onClick:function(){return O(!0)},children:"Edit"},"edit")})]})]})},X=function(e){e.history,e.match,e.location;var t,c,n,l,o,u,b,h,O,m=Object(i.useContext)(r.d),f=m.user,p=m.setUser,v=Object(i.useState)(!1),g=Object(a.a)(v,2),y=g[0],k=g[1],N=Object(i.useState)(null),C=Object(a.a)(N,2),S=C[0],w=C[1],M=Object(i.useState)([]),_=Object(a.a)(M,2),D=_[0],P=_[1],F=Object(i.useState)([]),A=Object(a.a)(F,2),T=(A[0],A[1],function(e){e.googleId&&z({googleId:e.googleId}).then((function(t){p((function(t){return Object(s.a)(Object(s.a)({},t),{},{googleId:e.googleId})})),w(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return w(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.B,{}),Object(x.jsx)("h4",{children:"Google account successfully connected."})]})]}))})).catch((function(e){console.log(e),w(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return w(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Could not connect Google account."})]})]}))}))}),R=function(e){z({googleId:null}).then((function(e){e.user?(p((function(e){return Object(s.a)(Object(s.a)({},e),{},{googleId:null})})),w(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return w(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.B,{}),Object(x.jsx)("h4",{children:"Successfully disconnected Google."})]})]}))):w(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return w(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Could not disconnect Google account. Please try again."})]})]}))})).catch((function(e){console.log(e),w(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return w(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Could not disconnect Google account."})]})]}))}))};return Object(x.jsxs)("div",{className:"profileContainer",children:[Object(x.jsxs)("div",{className:"benner",children:[Object(x.jsxs)("div",{className:"profileImg",children:[Object(x.jsx)(d.n,{src:f.profileImg||"/profile-user.jpg"}),Object(x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"91.832",height:"25.468",viewBox:"0 0 91.832 25.468",children:Object(x.jsxs)("g",{id:"Path_1937","data-name":"Path 1937",transform:"translate(15.429 -9.647)",fill:"#fff",children:[Object(x.jsx)("path",{d:"M 29.79687690734863 34.6146240234375 C 22.21588897705078 34.6146240234375 13.43720626831055 32.0111198425293 5.0779709815979 27.28368377685547 C -2.8753981590271 22.78578186035156 -9.78753662109375 16.7585563659668 -14.48426628112793 10.24203777313232 C -13.95890235900879 10.24473857879639 -13.30369663238525 10.25548648834229 -12.80753517150879 10.26361274719238 C -12.44524097442627 10.26955413818359 -12.15906429290771 10.27424812316895 -12.02891159057617 10.27424812316895 C -11.93940830230713 10.27424812316895 -11.86373233795166 10.26253128051758 -11.79978466033936 10.24241733551025 C -11.48864650726318 10.21196746826172 -10.04010391235352 10.17821311950684 -5.149840831756592 10.17821311950684 C -1.226676225662231 10.17821311950684 4.093100070953369 10.19837760925293 9.725229263305664 10.21973037719727 C 16.20444107055664 10.24428367614746 23.54814720153809 10.27211856842041 29.79687690734863 10.27211856842041 C 31.89767646789551 10.27211856842041 43.68988800048828 10.22107124328613 56.17448806762695 10.16702461242676 L 59.24650192260742 10.15374183654785 C 60.32665252685547 10.14907169342041 61.61424255371094 10.14680099487305 63.18285369873047 10.14680099487305 C 64.99295043945313 10.14680099487305 66.92156219482422 10.14978885650635 68.78666687011719 10.15269470214844 C 70.55825042724609 10.1554479598999 72.23158264160156 10.15804767608643 73.72422027587891 10.15804767608643 C 74.4501953125 10.15804767608643 75.08247375488281 10.1574182510376 75.63590240478516 10.15613842010498 C 74.24596405029297 13.15391826629639 71.95748138427734 16.1362361907959 68.82386779785156 19.03109550476074 C 65.67525482177734 21.9398250579834 61.6738166809082 24.71903610229492 57.25215911865234 27.06828308105469 C 52.91740798950195 29.37135314941406 48.15610122680664 31.27616500854492 43.48295974731445 32.57678985595703 C 38.69290161132813 33.90995407104492 33.96032333374023 34.6146240234375 29.79687690734863 34.6146240234375 Z",stroke:"none"}),Object(x.jsx)("path",{d:"M 63.18235397338867 10.64679336547852 C 61.61428070068359 10.64679336547852 60.32755279541016 10.64906692504883 59.24865341186523 10.65373229980469 L 56.18099212646484 10.6670036315918 C 43.69374084472656 10.72105407714844 31.89901733398438 10.77211761474609 29.79687881469727 10.77211761474609 C 23.54719161987305 10.77211761474609 16.2029914855957 10.74428176879883 9.723331451416016 10.71971893310547 C 4.091693878173828 10.69837951660156 -1.227619171142578 10.67821884155273 -5.149848937988281 10.67821884155273 C -9.844169616699219 10.67821884155273 -11.33226013183594 10.70873641967773 -11.7083740234375 10.73677062988281 C -11.80277252197266 10.76053237915039 -11.90915679931641 10.77424240112305 -12.0289306640625 10.77424240112305 C -12.16323089599609 10.77424240112305 -12.45131683349609 10.7695198059082 -12.81605529785156 10.76354217529297 C -13.01943206787109 10.76021194458008 -13.24966430664063 10.75643920898438 -13.48653411865234 10.75296401977539 C -8.851593017578125 16.903076171875 -2.239547729492188 22.57095718383789 5.324104309082031 26.84845542907715 C 13.60947799682617 31.53411865234375 22.30074310302734 34.11461639404297 29.79687881469727 34.11461639404297 C 33.91565704345703 34.11461639404297 38.60186767578125 33.41628265380859 43.34890747070313 32.0950927734375 C 47.98773193359375 30.80401802062988 52.71426773071289 28.91309356689453 57.0175666809082 26.62672996520996 C 61.40182876586914 24.29735565185547 65.3670654296875 21.5438175201416 68.48458099365234 18.6638298034668 C 71.32099151611328 16.04351997375488 73.45128631591797 13.35661125183105 74.83492279052734 10.65748596191406 C 74.4908447265625 10.65786743164063 74.12125396728516 10.65805435180664 73.72370147705078 10.65805435180664 C 72.23068237304688 10.65805435180664 70.55716705322266 10.65545654296875 68.78539276123047 10.65269470214844 C 66.92047119140625 10.6497917175293 64.9920654296875 10.64679336547852 63.18235397338867 10.64679336547852 M 63.18235778808594 9.646797180175781 C 66.69034576416016 9.646797180175781 70.639892578125 9.658050537109375 73.72370910644531 9.658050537109375 C 74.72272491455078 9.658050537109375 75.63052368164063 9.656867980957031 76.4033203125 9.653743743896484 C 70.7041015625 23.3221435546875 47.19384002685547 35.11461639404297 29.79687881469727 35.11461639404297 C 13.80905532836914 35.11461639404297 -5.7138671875 23.84020614624023 -15.427734375 9.772117614746094 C -15.45098876953125 9.749141693115234 -15.14891815185547 9.741405487060547 -14.71451568603516 9.741401672363281 C -13.8193359375 9.741401672363281 -12.36181640625 9.774246215820313 -12.02893829345703 9.774246215820313 C -11.98212432861328 9.774246215820313 -11.95759582519531 9.773597717285156 -11.9599609375 9.772117614746094 C -12.07225799560547 9.701694488525391 -9.402595520019531 9.678211212158203 -5.14984130859375 9.678211212158203 C 3.356430053710938 9.678211212158203 18.19854354858398 9.772117614746094 29.79687881469727 9.772117614746094 C 32.07231903076172 9.772117614746094 46.01445388793945 9.710941314697266 59.24433135986328 9.653743743896484 C 60.42824935913086 9.648624420166016 61.76977157592773 9.646797180175781 63.18235778808594 9.646797180175781 Z",stroke:"none",fill:"#336cf9"})]})}),Object(x.jsx)("input",{type:"file",accept:".jpg, .png, .jpeg",onChange:function(e){var t=e.target.files[0],c="https://cdn.deliverypay.in";if(t){var n,a=new FormData,i=Object(G.a)(e.target.files);try{for(i.s();!(n=i.n()).done;){var r=n.value;a.append("file",r)}}catch(l){i.e(l)}finally{i.f()}fetch("".concat(c,"/upload"),{method:"POST",body:a}).then((function(e){return e.json()})).then((function(e){"ok"===e.code?z({profileImg:c+"/"+e.files[0]}).then((function(e){e.user&&p((function(t){return Object(s.a)(Object(s.a)({},t),{},{profileImg:e.user.profileImg})}))})):w(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return w(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Image upload failed"})]})]}))})).catch((function(e){w(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return w(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Image upload failed. Make sure you're online."})]})]}))}))}}}),Object(x.jsx)("label",{children:"Edit"})]}),Object(x.jsxs)("div",{children:[Object(x.jsx)("p",{className:"name",children:f.firstName+" "+f.lastName}),Object(x.jsxs)("p",{className:"id",children:["Delivery pay ID: ",f.userId||f._id]})]})]}),Object(x.jsxs)("div",{className:"settings",children:[Object(x.jsx)("div",{className:"head",children:"Account Settings"}),Object(x.jsxs)("ul",{children:[Object(x.jsx)(Q,{label:"Name",fields:Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("section",{children:Object(x.jsx)("input",{placeholder:"First name",defaultValue:f.firstName,name:"firstName",required:!0})}),Object(x.jsx)("section",{children:Object(x.jsx)("input",{placeholder:"last name",defaultValue:f.lastName,name:"lastName",required:!0})})]}),value:f.firstName+" "+f.lastName}),Object(x.jsx)(Q,{label:"Phone Number",fields:Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("section",{children:Object(x.jsx)("input",{placeholder:"Phone Number",defaultValue:f.phone,name:"phone",required:!0,pattern:"((\\+*)((0[ -]+)*|(91 )*)(\\d{12}|\\d{10}))|\\d{5}([- ]*)\\d{6}"})})}),value:f.phone}),Object(x.jsx)(Q,{label:"Email",fields:Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("section",{children:Object(x.jsx)("input",{type:"email",placeholder:"Phone Number",defaultValue:f.email,name:"email",required:!0})})}),value:f.email}),Object(x.jsx)(Q,{label:"Password",onError:function(){return k(!0)},fields:Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("section",{children:Object(x.jsx)("input",{placeholder:"Password",name:"password",required:!0,type:"password",onChange:function(e){return k(!1)}})}),Object(x.jsx)("section",{children:Object(x.jsx)("input",{placeholder:"Confirm password",name:"confirm_password",required:!0,type:"password",onChange:function(e){return k(!1)}})}),y&&Object(x.jsx)("p",{className:"errMsg",children:"Password did not match."})]}),value:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"}),Object(x.jsx)(Q,{label:"Gender",fields:Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("section",{children:Object(x.jsx)("input",{placeholder:"Gender",defaultValue:f.gender,name:"gender",required:!0})})}),value:f.gender}),Object(x.jsx)(Q,{label:"Age",fields:Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("section",{children:Object(x.jsx)("input",{type:"number",placeholder:"Age",defaultValue:f.age,name:"age",required:!0})})}),value:f.age}),Object(x.jsx)(Q,{label:"Address",fields:Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("section",{children:Object(x.jsx)("input",{type:"text",placeholder:"Address",defaultValue:f.address.street,name:"address.street",required:!0})}),Object(x.jsx)("section",{children:Object(x.jsx)("input",{type:"text",placeholder:"City",defaultValue:f.address.city,name:"address.city",required:!0})}),Object(x.jsx)("section",{children:Object(x.jsx)("input",{type:"text",placeholder:"State",defaultValue:f.address.state,name:"address.state",required:!0})}),Object(x.jsx)("section",{children:Object(x.jsx)("input",{type:"number",placeholder:"PIN Code",defaultValue:f.address.zip,name:"address.zip",required:!0})})]}),value:"".concat((null===(t=f.address)||void 0===t?void 0:t.street)||""," ").concat((null===(c=f.address)||void 0===c?void 0:c.city)||""," ").concat((null===(n=f.address)||void 0===n?void 0:n.state)||""," ").concat((null===(l=f.address)||void 0===l?void 0:l.zip)||"")}),Object(x.jsx)(Q,{label:"KYC",setMsg:w,formData:D,fields:Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)("section",{children:[Object(x.jsx)("label",{children:"Upload files for verification."}),Object(x.jsx)(d.k,{multiple:!0,prefill:null===(o=f.kyc)||void 0===o?void 0:o.files,name:"kyc.files",onChange:function(e){return P(e)}})]})}),value:Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("label",{children:"Files for verification:"}),Object(x.jsx)("ul",{className:"thumbs",children:Object(x.jsx)(d.p,{links:null===(u=f.kyc)||void 0===u?void 0:u.files})}),Object(x.jsxs)("p",{children:["Verified: ",(null===(b=f.kyc)||void 0===b||null===(h=b.verified)||void 0===h?void 0:h.toString())||"False"]})]})})]})]}),Object(x.jsxs)("div",{className:"paymentMethods",children:[Object(x.jsx)("div",{className:"head",children:"Payment Methods"}),Object(x.jsxs)("ul",{className:"methods",children:[f.paymentMethods.map((function(e,t){return Object(x.jsx)($,{setMsg:w,method:e},t)})),0===(null===(O=f.paymentMethods)||void 0===O?void 0:O.length)&&Object(x.jsx)("p",{children:"No payment method added."})]})]}),Object(x.jsxs)("div",{className:"socials",children:[Object(x.jsx)("div",{className:"head",children:"Connect Social Accounts"}),Object(x.jsx)("ul",{className:"providers",children:f.googleId?Object(x.jsx)(J.a,{className:"google",clientId:"978249749020-kjq65au1n373ur5oap7n4ebo2fq1jdhq.apps.googleusercontent.com",buttonText:"Disconnect from Google",onSuccess:R,onFailure:R,cookiePolicy:"single_host_origin"}):Object(x.jsx)(J.a,{className:"google",clientId:"978249749020-kjq65au1n373ur5oap7n4ebo2fq1jdhq.apps.googleusercontent.com",buttonText:"Connect with Google",onSuccess:T,onFailure:T,cookiePolicy:"single_host_origin"})})]}),Object(x.jsx)(j.b,{className:"msg",open:S,children:S})]})};c(153);var ee=function(e){var t=e.label,c=e.defaultStatus,n=e.children,s=e.disabled,r=e.className,l=e.data,o=(e.step,Object(i.useState)(l?!l:null)),j=Object(a.a)(o,2),u=j[0],b=j[1];return Object(i.useEffect)((function(){b(c)}),[c]),Object(x.jsxs)("div",{className:"step ".concat(u||c?"open":""," ").concat(s?"disabled":""," ").concat(r||""),children:[Object(x.jsxs)("div",{className:"head",onClick:function(){c||b(!u)},children:[Object(x.jsx)(d.g,{className:"chev"})," ",t,Object(x.jsx)("div",{className:"status",children:l&&Object(x.jsx)(d.z,{})})]}),(u||c)&&Object(x.jsx)("div",{className:"body",children:n})]})},te=function(e){var t,c,n=e.setLoading,l=Object(i.useContext)(r.d),o=l.user,j=l.setUser,u=window.FB,b=Object(i.useState)([]),h=Object(a.a)(b,2),O=h[0],m=h[1],f=Object(i.useState)(null),p=Object(a.a)(f,2),v=p[0],g=p[1];return Object(i.useEffect)((function(){var e,t;(null===(e=o.fbMarket)||void 0===e||null===(t=e.business)||void 0===t?void 0:t.id)||u.api("/me","GET",{fields:"businesses{picture{url},name,id,created_time}",access_token:d.o.get("facebook_user_accessToken")},(function(e){e.businesses&&m(e.businesses.data)}))}),[o]),Object(x.jsx)(x.Fragment,{children:(null===(t=o.fbMarket)||void 0===t||null===(c=t.businessManager)||void 0===c?void 0:c.id)?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("p",{className:"note",children:"The Business Manager that owns all your Facebook business accounts."}),Object(x.jsx)("ul",{children:Object(x.jsxs)("li",{children:[Object(x.jsxs)("div",{className:"profile",children:[Object(x.jsx)(d.n,{src:o.fbMarket.businessManager.profileImg}),Object(x.jsxs)("div",{className:"detail",children:[Object(x.jsxs)("a",{href:"https://business.facebook.com/latest/home?nav_ref=bm_home_redirect&business_id=".concat(o.fbMarket.businessManager.id),children:[o.fbMarket.businessManager.name," ",Object(x.jsx)(d.j,{})]}),Object(x.jsxs)("span",{children:["ID: ",o.fbMarket.businessManager.id]}),Object(x.jsxs)("span",{children:["Created at:"," ",Object(x.jsx)(d.r,{format:"DD MMM YYYY, hh:mm a",children:o.fbMarket.businessManager.created_time})]})]})]}),Object(x.jsx)("button",{onClick:function(){z({"fbMarket.businessManager":{},"fbMarket.facebookPage":{},"fbMarket.commerceAccount":{},"fbMarket.userAgreement":!1}).then((function(e){var t=e.user;j((function(e){return Object(s.a)(Object(s.a)({},e),{},{fbMarket:t.fbMarket})}))}))},className:"btn",children:"Disconnect"})]})})]}):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("p",{className:"note",children:"Connect the Business Manager you use to manage your business Page, accounts, and product catalog. You can only connect a Business Manager you have admin access to."}),Object(x.jsx)("p",{className:"note",children:"After you connect, you may receive a verification email from Facebook. If so, you\u2019ll need to confirm your business email address before proceeding."}),v&&Object(x.jsx)("div",{className:"err",children:v}),Object(x.jsxs)("ul",{children:[O.map((function(e,t){return Object(x.jsxs)("li",{children:[Object(x.jsxs)("div",{className:"profile",children:[Object(x.jsx)(d.n,{src:e.picture.data.url}),Object(x.jsxs)("div",{className:"detail",children:[Object(x.jsxs)("a",{href:"https://business.facebook.com/latest/home?nav_ref=bm_home_redirect&business_id=".concat(e.business_id,"&asset_id=").concat(e.asset_id),children:[e.name," ",Object(x.jsx)(d.j,{})]}),Object(x.jsxs)("span",{children:["ID: ",e.id]}),Object(x.jsxs)("span",{children:["Created at:"," ",Object(x.jsx)(d.r,{format:"DD MMM YYYY, hh:mm a",children:e.created_time})]})]})]}),Object(x.jsx)("button",{className:"btn",onClick:function(){z({"fbMarket.businessManager.id":e.id,"fbMarket.businessManager.name":e.name,"fbMarket.businessManager.createdAt":e.created_time,"fbMarket.businessManager.profileImg":e.picture.data.url}).then((function(e){var t=e.user;j((function(e){return Object(s.a)(Object(s.a)({},e),{},{fbMarket:t.fbMarket})}))}))},children:"Connect"})]},t)})),Object(x.jsxs)("li",{children:[Object(x.jsxs)("div",{className:"profile",children:[Object(x.jsx)(d.n,{src:"/profile-user.jpg"}),Object(x.jsx)("p",{children:"Create Business Manager"})]}),Object(x.jsx)("button",{className:"btn",onClick:function(){n(!0),u.api("/me/businesses","POST",{name:"Delivery Pay Business Manager",vertical:"ECOMMERCE"},(function(e){n(!1),console.log(e),e.id&&u.api("/me","GET",{fields:"businesses{picture{url},name,id,created_time}"},(function(e){e.businesses&&m(e.businesses.data)})),e.error&&(1===e.error.code?g(Object(x.jsx)(x.Fragment,{children:"You have reached maximum number of business manager one user can have. Use one of existing business manager instead of creating a new one."})):3947===e.error.code?g(Object(x.jsx)(x.Fragment,{children:'You already have a Business Manager with the same name. Select "Delivery Pay Business Manager" instead of creating a new one. or Choose another.'})):g(Object(x.jsx)(x.Fragment,{children:e.error.error_user_msg||e.error.message})))}))},children:"Create new"})]})]})]})})},ce=function(){var e,t,c=window.FB,n=Object(i.useContext)(r.d),l=n.user,o=n.setUser,u=Object(i.useState)([]),b=Object(a.a)(u,2),h=b[0],O=b[1],m=Object(i.useState)(!1),f=Object(a.a)(m,2),p=f[0],v=f[1];return Object(i.useEffect)((function(){var e,t;(null===(e=l.fbMarket)||void 0===e||null===(t=e.business)||void 0===t?void 0:t.id)||c.api("/me/accounts","GET",{fields:"picture{url},access_token,name,category,business",access_token:d.o.get("facebook_user_accessToken")},(function(e){console.log("facebook pages:",e),e.data&&O(e.data)}))}),[l]),Object(x.jsxs)(x.Fragment,{children:[(null===(e=l.fbMarket)||void 0===e||null===(t=e.facebookPage)||void 0===t?void 0:t.id)?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("p",{className:"note",children:"The Facebook business Page that you use to sell your products or post ads."}),Object(x.jsx)("ul",{children:Object(x.jsxs)("li",{children:[Object(x.jsxs)("div",{className:"profile",children:[Object(x.jsx)(d.n,{src:l.fbMarket.facebookPage.profileImg}),Object(x.jsxs)("div",{className:"detail",children:[Object(x.jsxs)("a",{href:"https://business.facebook.com/latest/home?nav_ref=bm_home_redirect&business_id=".concat(l.fbMarket.businessManager.id),children:[l.fbMarket.facebookPage.name," ",Object(x.jsx)(d.j,{})]}),Object(x.jsxs)("span",{children:["Category: ",l.fbMarket.facebookPage.category]})]})]}),Object(x.jsx)("button",{onClick:function(){z({"fbMarket.facebookPage":{},"fbMarket.commerceAccount":{},"fbMarket.userAgreement":!1}).then((function(e){var t=e.user;console.log(t.fbMarket),o((function(e){return Object(s.a)(Object(s.a)({},e),{},{fbMarket:t.fbMarket})}))}))},className:"btn",children:"Disconnect"})]})})]}):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("p",{className:"note",children:"Connect the business Page you use to sell products or post ads. You can only connect a Page you have admin access to."}),Object(x.jsxs)("ul",{children:[h.map((function(e,t){return Object(x.jsxs)("li",{children:[Object(x.jsxs)("div",{className:"profile",children:[Object(x.jsx)(d.n,{src:e.picture.data.url}),Object(x.jsxs)("div",{className:"detail",children:[Object(x.jsxs)("a",{href:"https://business.facebook.com/latest/home?nav_ref=bm_home_redirect&business_id=".concat(e.business_id,"&asset_id=").concat(e.asset_id),children:[e.name," ",Object(x.jsx)(d.j,{})]}),Object(x.jsx)("span",{children:e.category})]})]}),Object(x.jsx)("button",{className:"btn",onClick:function(){z({"fbMarket.facebookPage.id":e.id,"fbMarket.facebookPage.name":e.name,"fbMarket.facebookPage.access_token":e.access_token,"fbMarket.facebookPage.profileImg":e.picture.data.url,"fbMarket.facebookPage.category":e.category}).then((function(e){var t=e.user;o((function(e){return Object(s.a)(Object(s.a)({},e),{},{fbMarket:t.fbMarket})}))}))},children:"Connect"})]},t)})),Object(x.jsxs)("li",{children:[Object(x.jsxs)("div",{className:"profile",children:[Object(x.jsx)(d.n,{src:"/profile-user.jpg"}),Object(x.jsx)("p",{children:"Create Page"})]}),Object(x.jsx)("button",{className:"btn",onClick:function(){return v(!0)},children:"Create new"})]})]})]}),Object(x.jsx)(j.b,{head:!0,label:"Create a new Facebook business Page",open:p,setOpen:function(){v(!1),c.api("/me/accounts","GET",{fields:"picture{url},access_token,name,category,business",access_token:d.o.get("facebook_user_accessToken")},(function(e){console.log("facebook pages:",e),e.data&&O(e.data)}))},className:"createNewPage",children:Object(x.jsxs)("div",{className:"content",children:[Object(x.jsx)("p",{children:"You'll be redirected to Facebook where you can create a new business Page. All you need for now are basic details such as:"}),Object(x.jsxs)("ul",{children:[Object(x.jsx)("li",{children:"Business Page name"}),Object(x.jsx)("li",{children:"Business Page category"}),Object(x.jsx)("li",{children:"Profile Photo"}),Object(x.jsx)("li",{children:"Cover photo"}),Object(x.jsx)("li",{children:"Store description"})]}),Object(x.jsx)("p",{children:"As soon as you add these details, return to Delivery Pay and finish setup. You can always update your Page later."}),Object(x.jsxs)("a",{target:"_blank",href:"https://www.facebook.com/pages/create/?ref_type=hc",children:[Object(x.jsx)(d.j,{})," Go to Facebook"]})]})})]})},ne=function(e){var t,c,n=e.setStep,l=window.FB,o=Object(i.useContext)(r.d),j=o.user,u=o.setUser,b=Object(i.useState)([]),h=Object(a.a)(b,2),O=(h[0],h[1],Object(i.useState)(null===(t=j.fbMarket)||void 0===t||null===(c=t.commerceAccount)||void 0===c?void 0:c.catalog)),m=Object(a.a)(O,2),f=m[0],p=m[1];return Object(i.useEffect)((function(){var e,t;p(null===(e=j.fbMarket)||void 0===e||null===(t=e.commerceAccount)||void 0===t?void 0:t.catalog)}),[j]),Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("p",{className:"note",children:["Create a Commerce account to start selling on Facebook, Instagram, or both. Once you have an account you\u2019ll be able to customize your Shop and collections in the"," ",Object(x.jsxs)("a",{target:"_blank",href:"https://www.facebook.com/business/help/2371372636254534",children:["Facebook Commerce Manager ",Object(x.jsx)(d.j,{})]}),"."]}),Object(x.jsxs)("ul",{children:[f&&Object(x.jsxs)("li",{className:"catalog",children:[Object(x.jsx)("p",{children:"PRODUCTS WILL BE SYNCED TO THIS CATALOG"}),Object(x.jsx)("p",{children:f.name}),Object(x.jsxs)("span",{children:["ID: ",f.id]})]}),!f&&Object(x.jsxs)("li",{children:[Object(x.jsxs)("div",{className:"profile",children:[Object(x.jsx)(d.n,{src:"/profile-user.jpg"}),Object(x.jsx)("p",{children:"Create a new Commerce Account"})]}),Object(x.jsx)("button",{className:"btn",onClick:function(){l.api("/".concat(j.fbMarket.businessManager.id,"/owned_product_catalogs"),"GET",{access_token:d.o.get("facebook_user_accessToken")},function(){var e=Object(q.a)(Y.a.mark((function e(t){var c,a;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=t.data,e.t0=c.find((function(e){return"Delivery Pay Product Catalog"===e.name})),e.t0){e.next=6;break}return e.next=5,l.api("/".concat(j.fbMarket.businessManager.id,"/owned_product_catalogs"),"POST",{name:"Delivery Pay Product Catalog",access_token:d.o.get("facebook_user_accessToken")},(function(e){return console.log(e.id),e.id?Object(s.a)(Object(s.a)({},e),{},{name:"Delivery Pay Product Catalog"}):null}));case 5:e.t0=e.sent;case 6:(a=e.t0)&&(p(a),z({"fbMarket.commerceAccount.catalog":a}).then((function(e){var t=e.user;u((function(e){return Object(s.a)(Object(s.a)({},e),{},{fbMarket:t.fbMarket})})),n("terms")})));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},children:"Create new"})]})]})]})},se=function(){var e,t,c,n,l,u,b,h,O,m,f,p,v,g,y,k,N,C,S,w,M,_,D,P,F,A,T=Object(i.useState)(null),R=Object(a.a)(T,2),Y=R[0],q=R[1],B=Object(i.useContext)(r.d),I=B.user,E=B.setUser,L=window.FB,H=Object(i.useState)(""),V=Object(a.a)(H,2),U=V[0],Z=V[1],G=Object(i.useState)(!1),W=Object(a.a)(G,2),J=(W[0],W[1]);return Object(i.useEffect)((function(){var e,t,c,n,s,a,i,r,l,o;console.log(I.fbMarket),(null===(e=I.fbMarket)||void 0===e||null===(t=e.user)||void 0===t?void 0:t.id)?(null===(c=I.fbMarket)||void 0===c||null===(n=c.businessManager)||void 0===n?void 0:n.id)?(null===(s=I.fbMarket)||void 0===s||null===(a=s.facebookPage)||void 0===a?void 0:a.id)?(null===(i=I.fbMarket)||void 0===i||null===(r=i.commerceAccount)||void 0===r||null===(l=r.catalog)||void 0===l?void 0:l.id)?(null===(o=I.fbMarket)||void 0===o?void 0:o.userAgreement)||Z("terms"):Z("commerceAccount"):Z("fbPage"):Z("businessManager"):Z("account")}),[I]),Object(i.useEffect)((function(){}),[]),Object(x.jsxs)("div",{className:"fbMarket",children:[Object(x.jsx)("h1",{children:"Facebook marketplace"}),Object(x.jsxs)("div",{className:"setup",children:[Object(x.jsxs)(ee,{data:(null===(e=I.fbMarket)||void 0===e||null===(t=e.user)||void 0===t?void 0:t.id)?I.fbMarket.user:null,defaultStatus:"account"===U,step:U,label:"Facebook Account",children:[Object(x.jsx)("p",{className:"note",children:"Delivery Pay uses your personal Facebook account to access your business accounts."}),(null===(c=I.fbMarket)||void 0===c||null===(n=c.user)||void 0===n?void 0:n.id)&&Object(x.jsx)("p",{children:"Now you can log into Delivery Pay using this account."}),Object(x.jsxs)("div",{className:"profile",children:[Object(x.jsx)("div",{className:"user",children:(null===(l=I.fbMarket)||void 0===l||null===(u=l.user)||void 0===u?void 0:u.id)?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(d.n,{src:I.fbMarket.user.profileImg||"/profile-user.jpg"},"img"),Object(x.jsx)("p",{children:I.fbMarket.user.name})]}):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(d.n,{src:"/profile-user.jpg"},"placeholder"),Object(x.jsx)("p",{children:"Connect your Facebook account to get started"})]})}),(null===(b=I.fbMarket)||void 0===b||null===(h=b.user)||void 0===h?void 0:h.id)?Object(x.jsx)("button",{className:"btn",onClick:function(){L.logout((function(e){console.log(e)})),d.o.remove("facebook_user_accessToken"),z({"fbMarket.user":{},"fbMarket.businessManager":{},"fbMarket.facebookPage":{},"fbMarket.dataSharing":null,"fbMarket.commerceAccount":{},"fbMarket.userAgreement":!1}).then((function(e){var t=e.user;E((function(e){return Object(s.a)(Object(s.a)({},e),{},{fbMarket:t.fbMarket})}))}))},children:"Disconnect"}):Object(x.jsx)("button",{className:"btn",onClick:function(){L.login((function(e){var t;d.o.set("facebook_user_accessToken",null===(t=e.authResponse)||void 0===t?void 0:t.accessToken);var c=e.authResponse.accessToken;fetch("/api/updateFBMarketUser",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({accessToken:c})}).then((function(e){return e.json()})).then((function(e){"ok"===e.code&&(console.log("long_lived_token saved"),d.o.set("facebook_user_accessToken",e.long_lived_token))})),L.api("/me","GET",{fields:"name,picture.type(large){url}"},(function(e){console.log(e),e.id&&z({"fbMarket.user.name":e.name,"fbMarket.user.id":e.id,"fbMarket.user.profileImg":e.picture.data.url}).then((function(e){var t=e.user;E((function(e){return Object(s.a)(Object(s.a)({},e),{},{fbMarket:t.fbMarket})}))}))}))}))},children:"Connect Account"})]})]}),Object(x.jsx)(ee,{disabled:!(null===(O=I.fbMarket)||void 0===O||null===(m=O.user)||void 0===m?void 0:m.id),data:(null===(f=I.fbMarket)||void 0===f||null===(p=f.businessManager)||void 0===p?void 0:p.id)?I.fbMarket.businessManager:null,defaultStatus:"businessManager"===U,label:"Business Manager",className:"businessManager",children:Object(x.jsx)(te,{setLoading:J})}),Object(x.jsx)(ee,{data:(null===(v=I.fbMarket)||void 0===v||null===(g=v.facebookPage)||void 0===g?void 0:g.id)?I.fbMarket.facebookPage:null,defaultStatus:"fbPage"===U,label:"Facebook Page",className:"page",disabled:!(null===(y=I.fbMarket)||void 0===y||null===(k=y.businessManager)||void 0===k?void 0:k.id),children:Object(x.jsx)(ce,{})}),Object(x.jsx)(ee,{data:(null===(N=I.fbMarket)||void 0===N||null===(C=N.commerceAccount)||void 0===C||null===(S=C.catalog)||void 0===S?void 0:S.id)?I.fbMarket.commerceAccount:null,disabled:!(null===(w=I.fbMarket)||void 0===w||null===(M=w.facebookPage)||void 0===M?void 0:M.id),label:"Facebook Commerce Account",defaultStatus:"commerceAccount"===U,className:"commerceAccount",children:Object(x.jsx)(ne,{setStep:Z})}),Object(x.jsxs)(ee,{disabled:!(null===(_=I.fbMarket)||void 0===_||null===(D=_.commerceAccount)||void 0===D||null===(P=D.catalog)||void 0===P?void 0:P.id),data:(null===(F=I.fbMarket)||void 0===F?void 0:F.userAgreement)||null,defaultStatus:"terms"===U,label:"Terms and Conditions",children:[Object(x.jsxs)("p",{children:["By proceeding, you accept"," ",Object(x.jsxs)("a",{target:"_blank",href:"https://www.facebook.com/legal/commerce_product_merchant_agreement",children:["Facebook Commerce Terms ",Object(x.jsx)(d.j,{})]}),"."]}),!(null===(A=I.fbMarket)||void 0===A?void 0:A.userAgreement)&&Object(x.jsx)("button",{className:"btn",onClick:function(){z({"fbMarket.userAgreement":!0}).then((function(e){var t=e.user;E((function(e){return Object(s.a)(Object(s.a)({},e),{},{fbMarket:t.fbMarket})})),Z(""),q(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return q(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.B,{}),Object(x.jsx)("h4",{children:"Facebook marketplace has been setup successfully. Now you can add products to facebook marketplace directly from Delivery Pay."}),Object(x.jsx)(o.b,{to:"/account/myShop/products",children:"Add your first product"})]})]}))}))},children:"Finish setup"})]})]}),Object(x.jsx)(j.b,{open:Y,className:"msg",children:Y})]})},ae=c(116),ie=Object(i.lazy)((function(){return Promise.all([c.e(9),c.e(10)]).then(c.t.bind(null,259,7))}));c(157);var re=function(e){var t,c,l,u,b,h=e.prefill,O=e.onSuccess,m=e.categories,f=Object(i.useContext)(r.d).user,p=Object(i.useState)(!1),v=Object(a.a)(p,2),g=v[0],y=v[1],k=Object(i.useState)((null===h||void 0===h?void 0:h.type)||"product"),N=Object(a.a)(k,2),C=N[0],S=N[1],w=Object(i.useState)((null===h||void 0===h?void 0:h.category)||""),M=Object(a.a)(w,2),_=M[0],D=M[1],P=Object(i.useState)({type:(null===h||void 0===h||null===(t=h.discount)||void 0===t?void 0:t.type)||null,amount:(null===h||void 0===h||null===(c=h.discount)||void 0===c?void 0:c.amount)||0,dscr:(null===h||void 0===h||null===(l=h.discount)||void 0===l?void 0:l.dscr)||""}),F=Object(a.a)(P,2),A=F[0],T=F[1],R=Object(i.useState)((null===h||void 0===h?void 0:h.name)||""),I=Object(a.a)(R,2),E=I[0],L=I[1],H=Object(i.useState)((null===h||void 0===h?void 0:h.dscr)||""),V=Object(a.a)(H,2),U=V[0],Z=V[1],G=Object(i.useState)((null===h||void 0===h?void 0:h.price)||""),W=Object(a.a)(G,2),J=W[0],z=W[1],K=Object(i.useState)((null===h||void 0===h?void 0:h.images)||[]),$=Object(a.a)(K,2),Q=$[0],X=$[1],ee=Object(i.useState)((null===h||void 0===h?void 0:h.gst)||(null===(u=f.gst)||void 0===u?void 0:u.verified)?f.gst.amount:0),te=Object(a.a)(ee,2),ce=te[0],ne=te[1],se=Object(i.useState)((null===h||void 0===h?void 0:h.hsn)||""),ae=Object(a.a)(se,2),ie=ae[0],re=ae[1],le=Object(i.useState)(null===h||void 0===h?void 0:h.available),oe=Object(a.a)(le,2),je=oe[0],de=oe[1],ue=Object(i.useState)(null),be=Object(a.a)(ue,2),he=be[0],Oe=be[1],xe=Object(i.useState)((null===h||void 0===h?void 0:h.tags)||[]),me=Object(a.a)(xe,2),fe=me[0],pe=me[1],ve=function(){var e=Object(q.a)(Y.a.mark((function e(t){var c;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),y(!0),!Q.length){e.next=8;break}return e.next=5,Object(d.E)({files:Q,setMsg:Oe});case 5:e.t0=e.sent,e.next=9;break;case 8:e.t0=[];case 9:c=e.t0,fetch("/api/".concat(h?"edit":"add","Product"),{method:h?"PATCH":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object(s.a)({type:C,name:E,dscr:U,price:+J,images:c,category:_,tags:fe,available:!0===je||!1===je?je:+je,gst:ce,discount:A},h&&{_id:h._id}))}).then((function(e){return e.json()})).then((function(e){y(!1),"ok"===e.code?null===O||void 0===O||O(e.product):403===e.code?Oe(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return Oe(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"You can't add more that 100 product at a time. Delete a product/service and try again."})]})]})):Oe(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return Oe(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Could not add product. please try again."})]})]}))})).catch((function(e){y(!1),console.log(e),Oe(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return Oe(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Could not add product. Make sure you're online."})]})]}))}));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("form",{onSubmit:ve,className:g?"loading":"",children:[Object(x.jsxs)("section",{className:"type",children:[Object(x.jsx)("label",{children:"Type"}),Object(x.jsx)(d.h,{defaultValue:C,options:[{label:"Product",value:"product"},{label:"Service",value:"service"},{label:"Other",value:"other"}],onChange:function(e){S(e.value)}})]}),Object(x.jsxs)("section",{className:"name",children:[Object(x.jsx)("label",{children:"Name of the product/service"}),Object(x.jsx)("input",{value:E,onChange:function(e){return L(e.target.value)},required:!0})]}),Object(x.jsxs)("section",{className:"category",children:[Object(x.jsxs)("label",{children:["Category"," ",Object(x.jsxs)(d.D,{children:["You can Add/Edit/Delete your categories"," ",Object(x.jsx)(o.b,{to:"/account/myShop/settings",children:"here"})]})]}),Object(x.jsx)(d.h,{required:!0,defaultValue:_,options:m.map((function(e){return{label:e,value:e}})),onChange:function(e){return D(e.value)}})]}),Object(x.jsxs)("section",{children:[Object(x.jsx)("label",{children:"Price \u20b9"}),Object(x.jsx)(d.s,{defaultValue:J,onChange:function(e){return z(e.target.value)},required:!0})]}),Object(x.jsx)("section",{className:"available",children:"product"===C?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("label",{children:"Available in stock"}),Object(x.jsx)(d.s,{required:!0,defaultValue:je,onChange:function(e){return de(e.target.value)}})]}):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("label",{children:"Availability"}),Object(x.jsx)(d.h,{defaultValue:je,required:!0,options:[{label:"Available",value:!0},{label:"Not available",value:!1}],onChange:function(e){return de(e.value)}})]})}),Object(x.jsxs)("section",{className:"dscr",children:[Object(x.jsx)("label",{children:"Description of the product/service"}),Object(x.jsx)(B.a,{value:U,onChange:function(e){return Z(e.target.value)},required:!0})]}),Object(x.jsxs)("section",{className:"tags",children:[Object(x.jsx)("label",{children:"Tags"}),Object(x.jsxs)("ul",{children:[fe.map((function(e){return Object(x.jsxs)("li",{children:[e,Object(x.jsx)("button",{onClick:function(){pe((function(t){return t.filter((function(t){return t!==e}))}))},children:Object(x.jsx)(d.G,{})})]},e)})),Object(x.jsxs)("li",{className:"form",children:[Object(x.jsx)("input",{placeholder:"addNewTag",onKeyPress:function(e){var t="".concat(e.target.value.trim());if(13===e.charCode){if(e.preventDefault(),!t)return;pe((function(e){return[].concat(Object(n.a)(e.filter((function(e){return e!==t}))),[t])})),e.target.focus(),e.target.value=""}}}),Object(x.jsx)("button",{type:"button",onClick:function(e){var t=e.target.previousElementSibling,c="".concat(e.target.previousElementSibling.value.trim());c&&(pe((function(e){return[].concat(Object(n.a)(e.filter((function(e){return e!==c}))),[c])})),t.value="",t.focus())},children:"Add Tag"})]})]})]}),Object(x.jsxs)("section",{className:"images",children:[Object(x.jsx)("label",{children:"Images of the product"}),Object(x.jsx)(d.k,{multiple:!0,prefill:null===h||void 0===h?void 0:h.images,accept:"image/*",onChange:function(e){return X(e)}})]}),Object(x.jsxs)("section",{children:[Object(x.jsx)("label",{children:"HSN Code"}),Object(x.jsx)("input",{value:ie,onChange:function(e){return re(e.target.value)}})]}),(null===(b=f.gst)||void 0===b?void 0:b.verified)&&Object(x.jsxs)("section",{children:[Object(x.jsx)("label",{children:"GST (%)"}),Object(x.jsx)(d.s,{defaultValue:ce,onChange:function(e){return ne(e.target.value)}})]}),Object(x.jsxs)("section",{className:"discountType",children:[Object(x.jsx)("label",{children:"Discount Type"}),Object(x.jsx)(d.h,{defaultValue:A.type,options:[{label:"None",value:null},{label:"Percent",value:"percent"},{label:"Flat",value:"flat"}],onChange:function(e){return T((function(t){return Object(s.a)(Object(s.a)({},t),{},{type:e.value})}))}})]}),null!==A.type&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("section",{className:"discountAmount",children:[Object(x.jsxs)("label",{children:["Amount ","percent"===A.type&&"(%)"]}),Object(x.jsx)(d.s,{defaultValue:A.amount,onChange:function(e){return T((function(t){return Object(s.a)(Object(s.a)({},t),{},{amount:e.target.value})}))}})]}),Object(x.jsxs)("section",{className:"discountDscr",children:[Object(x.jsx)("label",{children:"Discount description"}),Object(x.jsx)(B.a,{defaultValue:A.dscr,onChange:function(e){return T((function(t){return Object(s.a)(Object(s.a)({},t),{},{dscr:e.target.value})}))}})]})]}),J&&Object(x.jsxs)("section",{className:"finalPrice",children:[Object(x.jsxs)("p",{children:[Object(x.jsx)("label",{children:"Input price"}),J]}),+ce>0&&Object(x.jsxs)("p",{className:"gst",children:[Object(x.jsxs)("label",{children:["GST ",ce,"%"]}),"+",(+J/100*+ce).fix()]}),A.amount>0&&"flat"===A.type&&Object(x.jsxs)("p",{children:[Object(x.jsx)("label",{children:"Discount flat"}),"- \u20b9",(+A.amount).fix()]}),A.amount>0&&"percent"===A.type&&Object(x.jsxs)("p",{children:[Object(x.jsxs)("label",{children:["Discount ",A.amount,"%"]}),"- \u20b9",(+J/100*A.amount).fix()]}),Object(x.jsxs)("p",{className:"final",children:[Object(x.jsx)("label",{children:"Listing Price"}),"\u20b9",(+J+ +J/100*+ce-("percent"===A.type?+J/100*A.amount:0)-("flat"===A.type?A.amount:0)).fix()]})]}),Object(x.jsx)("section",{className:"btns",children:Object(x.jsx)("button",{className:"submit",type:"submit",children:"Submit"})}),Object(x.jsx)("div",{className:"pBtm"})]}),g&&Object(x.jsx)("div",{className:"spinnerContainer",children:Object(x.jsx)("div",{className:"spinner"})}),Object(x.jsx)(j.b,{className:"msg",open:he,children:he})]})},le=function(e){var t,c=e.categories,l=e.shopSetupComplete,u=Object(i.useContext)(r.d).user,h=(window.FB,Object(i.useRef)()),O=Object(i.useState)(!1),m=Object(a.a)(O,2),f=m[0],p=m[1],v=Object(i.useState)(0),g=Object(a.a)(v,2),y=g[0],k=g[1],N=Object(i.useState)(1),C=Object(a.a)(N,2),S=C[0],w=C[1],M=Object(i.useState)(20),_=Object(a.a)(M,2),D=_[0],P=_[1],F=Object(i.useState)(""),A=Object(a.a)(F,2),T=A[0],R=A[1],Y=Object(i.useState)(""),q=Object(a.a)(Y,2),B=q[0],I=q[1],E=Object(i.useState)(""),L=Object(a.a)(E,2),H=L[0],V=L[1],U=Object(i.useState)({column:"createdAt",order:"dsc"}),Z=Object(a.a)(U,2),G=Z[0],W=(Z[1],Object(i.useState)({startDate:new Date,endDate:new Date})),J=Object(a.a)(W,2),z=J[0],K=J[1],$=Object(i.useState)(""),Q=Object(a.a)($,2),X=Q[0],ee=Q[1],te=Object(i.useState)(!1),ce=Object(a.a)(te,2),ne=ce[0],se=ce[1],ae=Object(i.useState)({}),ie=Object(a.a)(ae,2),le=ie[0],de=ie[1],ue=Object(i.useState)([]),be=Object(a.a)(ue,2),he=be[0],Oe=be[1],xe=Object(i.useState)(!1),me=Object(a.a)(xe,2),fe=me[0],pe=me[1],ve=Object(i.useState)([]),ge=Object(a.a)(ve,2),ye=ge[0],ke=ge[1],Ne=Object(i.useState)(!1),Ce=Object(a.a)(Ne,2),Se=Ce[0],we=Ce[1],Me=Object(i.useState)(null),_e=Object(a.a)(Me,2),De=_e[0],Pe=_e[1],Fe=function(e){e.length&&fetch("/api/deleteProducts",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({_ids:e})}).then((function(e){return e.json()})).then((function(t){"ok"===t.code?(ke([]),Oe((function(t){return t.filter((function(t){return!e.some((function(e){return e===t._id}))}))}))):Pe(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return Pe(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Could not delete products. Try again."})]})]}))})).catch((function(e){console.log(e),Pe(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return Pe(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Could not delete products. Make sure you're online."})]})]}))}))},Ae=function(){return Fe(ye)},Te=function(e){fetch("/api/addToFbMarket",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({_ids:e,access_token:d.o.get("facebook_user_accessToken")})}).then((function(e){return e.json()})).then((function(e){var t=e.code,c=e.fb_products;if("ok"===t){var n=[],a=[];c.forEach((function(e,t){e.success?n.push(e):a.push(e)})),Oe((function(e){return e.map((function(e){var t=c.find((function(t){return t._id===e._id}));return t?Object(s.a)(Object(s.a)({},e),{},{fbMarketId:t.fbMarketId}):e}))})),Pe(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return Pe(null)},children:"Okay"}),Object(x.jsx)("div",{children:0===a.length?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(d.B,{}),Object(x.jsxs)("h4",{children:[n.length," products has been added."]})]}):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(d.i,{}),Object(x.jsxs)("h4",{children:[a.length," products failed."]})]})})]}))}else Pe(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return Pe(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Could not add products to Facebook Marketplace."})]})]}))})).catch((function(e){console.log(e),Pe(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return Pe(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Could not add products to Facebook Marketplace. Make sure you're online."})]})]}))}))},Re=function(e){fetch("/api/removeFromFbMarket",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({_ids:e,access_token:d.o.get("facebook_user_accessToken")})}).then((function(e){return e.json()})).then((function(e){var t=e.code,c=e.fb_products;if("ok"===t){var n=[],a=[];c.forEach((function(e,t){e.success?n.push(e):a.push(e)})),Oe((function(e){return e.map((function(e){var t=c.find((function(t){return t._id===e._id}));return t?Object(s.a)(Object(s.a)({},e),{},{fbMarketId:t.fbMarketId}):e}))})),Pe(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return Pe(null)},children:"Okay"}),Object(x.jsx)("div",{children:0===a.length?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(d.B,{}),Object(x.jsxs)("h4",{children:[n.length," products has been removed."]})]}):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(d.i,{}),Object(x.jsxs)("h4",{children:[a.length," products failed to remove."]})]})})]}))}else Pe(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return Pe(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Could not remove products from Facebook Marketplace."})]})]}))})).catch((function(e){console.log(e),Pe(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return Pe(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Could not remove products from Facebook Marketplace. Make sure you're online."})]})]}))}))};return Object(i.useEffect)((function(){var e=Object(d.K)({time:null===z||void 0===z?void 0:z.startDate,format:"YYYY-MM-DD"}),t=Object(d.K)({time:null===z||void 0===z?void 0:z.endDate.setHours(24,0,0,0),format:"YYYY-MM-DD"});fetch("/api/products?".concat(new URLSearchParams(Object(s.a)(Object(s.a)(Object(s.a)(Object(s.a)({},B&&{q:B}),{},{page:S,perPage:D,sort:G.column,order:G.order},ne&&{dateFrom:e,dateTo:t}),T&&{category:T}),X&&{type:X})))).then((function(e){return e.json()})).then((function(e){"ok"===e.code&&(Oe(e.products),k(e.total))})).catch((function(e){console.log(e),Pe(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return Pe(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Could not get products."})]})]}))}))}),[T,B,S,D,ne,X,Se]),Object(i.useLayoutEffect)((function(){if(h.current){var e=h.current.getBoundingClientRect(),t=e.height,c=e.y,n=e.width,s=e.x;de({position:"fixed",top:t+c+4,right:window.innerWidth-s-n})}}),[]),Object(i.useEffect)((function(){fe||ke([])}),[fe]),Object(i.useEffect)((function(){0===ye.length&&pe(!1)}),[ye]),Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("div",{className:"benner",children:[Object(x.jsx)("p",{children:"Product Management"}),l?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("button",{onClick:function(){return p(!0)},children:[Object(x.jsx)(d.u,{})," Add Product"]}),Object(x.jsxs)("button",{className:"batchUpload",onClick:function(){return we(!0)},children:[Object(x.jsx)(d.u,{})," Batch Upload"]})]}):Object(x.jsx)(o.b,{to:"/account/myShop/settings",className:"err",children:Object(x.jsx)("p",{children:"Please complete your shop information to add product."})})]}),Object(x.jsxs)("div",{className:"filters",children:[Object(x.jsxs)("section",{children:[Object(x.jsx)("label",{children:"Total:"}),y]}),Object(x.jsxs)("section",{children:[Object(x.jsx)("label",{children:"Per Page:"}),Object(x.jsx)(d.h,{defaultValue:0,options:[{label:"20",value:20},{label:"30",value:30},{label:"50",value:50}],onChange:function(e){return P(e.value)}})]}),Object(x.jsxs)("section",{className:"search",children:[Object(x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"23",height:"23",viewBox:"0 0 23 23",children:Object(x.jsx)("path",{id:"Icon_ionic-ios-search","data-name":"Icon ionic-ios-search",d:"M27.23,25.828l-6.4-6.455a9.116,9.116,0,1,0-1.384,1.4L25.8,27.188a.985.985,0,0,0,1.39.036A.99.99,0,0,0,27.23,25.828ZM13.67,20.852a7.2,7.2,0,1,1,5.091-2.108A7.155,7.155,0,0,1,13.67,20.852Z",transform:"translate(-4.5 -4.493)",fill:"#707070",opacity:"0.74"})}),Object(x.jsx)("input",{value:B,onChange:function(e){return I(e.target.value)},placeholder:"Search for products & services"}),B&&Object(x.jsx)("button",{onClick:function(){return I("")},children:Object(x.jsx)(d.G,{})})]}),Object(x.jsxs)("section",{className:"type",children:[Object(x.jsx)("label",{children:"Type:"}),Object(x.jsx)(d.h,{defaultValue:0,options:[{label:"All",value:""},{label:"Product",value:"product"},{label:"Service",value:"service"},{label:"Other",value:"other"}],onChange:function(e){return ee(e.value)}})]}),Object(x.jsxs)("section",{className:"category",children:[Object(x.jsx)("label",{children:"Category:"}),Object(x.jsx)(d.h,{defaultValue:0,options:[{label:"All",value:""}].concat(Object(n.a)(c.map((function(e){return{label:e,value:e}})))),onChange:function(e){return R(e.value)}})]}),Object(x.jsxs)("section",{className:"date ".concat(ne?"open":""),ref:h,onClick:function(){return V(!0)},children:[Object(x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"30.971",height:"30.971",viewBox:"0 0 30.971 30.971",children:Object(x.jsx)("path",{id:"Path_299","data-name":"Path 299",d:"M3.992,2.42H6.775V.968a.968.968,0,1,1,1.936,0V2.42H22.26V.968a.968.968,0,1,1,1.936,0V2.42h2.783a4,4,0,0,1,3.992,3.992V26.978a4,4,0,0,1-3.992,3.992H3.992A4,4,0,0,1,0,26.978V6.412A4,4,0,0,1,3.992,2.42ZM26.978,4.355H24.2v.968a.968.968,0,1,1-1.936,0V4.355H8.71v.968a.968.968,0,1,1-1.936,0V4.355H3.992A2.059,2.059,0,0,0,1.936,6.412v2.3h27.1v-2.3A2.059,2.059,0,0,0,26.978,4.355ZM3.992,29.035H26.978a2.059,2.059,0,0,0,2.057-2.057V10.646H1.936V26.978A2.059,2.059,0,0,0,3.992,29.035Z",fill:"#336cf9"})}),ne&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("div",{className:"dates",children:[Object(x.jsxs)("p",{children:["From:"," ",Object(x.jsx)(d.r,{format:"DD MMM, YYYY",children:z.startDate})]}),Object(x.jsxs)("p",{children:["To: ",Object(x.jsx)(d.r,{format:"DD MMM, YYYY",children:z.endDate})]})]}),Object(x.jsx)("button",{className:"clearDateFilter",onClick:function(){K({startDate:new Date,endDate:new Date}),se(!1)},children:Object(x.jsx)(d.G,{})})]})]})]}),Object(x.jsxs)("table",{className:"table products",children:[Object(x.jsx)("thead",{children:ye.length>0?Object(x.jsxs)("tr",{className:"batchAction",children:[Object(x.jsx)("th",{className:"checkContainer",children:Object(x.jsx)(d.f,{value:fe,defaultValue:fe,onChange:function(e){return pe(e)}})}),Object(x.jsx)("th",{children:Object(x.jsx)("button",{onClick:function(){return Object(j.a)({label:"Batch delete",question:"You sure you want to delete these ".concat(ye.length," items?"),callback:Ae})},children:"Delete"})}),(null===(t=u.fbMarket)||void 0===t?void 0:t.userAgreement)&&d.o.get("facebook_user_accessToken")&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("th",{children:Object(x.jsx)("button",{onClick:function(){Te(ye),ke([])},children:"Add to Facebook"})}),Object(x.jsx)("th",{children:Object(x.jsx)("button",{onClick:function(){Re(ye),ke([])},children:"Remove from Facebook"})})]})]}):Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{className:"checkContainer",children:Object(x.jsx)(d.f,{value:fe,defaultValue:fe,onChange:function(e){return pe(e)}})}),Object(x.jsx)("th",{className:"date",children:"Date"}),Object(x.jsx)("th",{children:"Image"}),Object(x.jsx)("th",{className:"name",children:"Name"}),Object(x.jsx)("th",{children:"Type"}),Object(x.jsx)("th",{children:"Facebook Marketplace"}),Object(x.jsx)("th",{children:"Available"}),Object(x.jsx)("th",{children:"Price"}),Object(x.jsx)("th",{children:"GST"}),Object(x.jsx)("th",{children:"Discount"}),Object(x.jsx)("th",{children:"Listing Price"}),Object(x.jsx)("th",{children:"Actions"})]})}),Object(x.jsxs)("tbody",{children:[he.map((function(e){return Object(x.jsx)(oe,{categories:c,product:e,setProducts:Oe,selectAll:fe,setBatch:ke,batch:ye,deleteItems:Fe,addToFbMarket:Te,removeFromFbMarket:Re},e._id)})),0===he.length&&Object(x.jsx)("tr",{className:"placeholder",children:Object(x.jsx)("td",{children:"No product yet."})})]})]}),Object(x.jsx)(d.t,{total:y,btns:5,currentPage:S,perPage:D,setPage:w}),Object(x.jsx)(j.b,{className:"msg",open:De,children:De}),Object(x.jsx)(j.b,{head:!0,label:"Edit Product/Service",setOpen:p,open:f,className:"productForm",children:Object(x.jsx)(re,{categories:c,onSuccess:function(e){Oe((function(t){return[].concat(Object(n.a)(t),[e])})),p(!1),Pe(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return Pe(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.B,{}),Object(x.jsx)("h4",{children:"Product added."})]})]}))}})}),Object(x.jsx)(j.b,{open:H,onBackdropClick:function(){return V(!1)},className:"datePicker",backdropClass:"datePicker",style:le,children:Object(x.jsx)(b.DateRange,{className:"dateRange",ranges:[z],onChange:function(e){K(e.range1),e.range1.endDate!==e.range1.startDate&&(V(!1),se(!0))}})}),Object(x.jsx)(j.b,{open:Se,head:!0,label:"Batch product upload",setOpen:we,className:"batchItemPreview",children:Object(x.jsx)(je,{categories:c,onSuccess:function(){we(!1)}})})]})},oe=function(e){var t,c,s,l,u=e.product,b=e.setProducts,h=e.categories,O=e.selectAll,m=e.setBatch,f=e.batch,p=e.deleteItems,v=e.addToFbMarket,g=e.removeFromFbMarket,y=Object(i.useContext)(r.d).user,k=Object(i.useState)(O||!1),N=Object(a.a)(k,2),C=N[0],S=N[1],w=Object(i.useState)(!1),M=Object(a.a)(w,2),_=M[0],D=M[1],P=Object(i.useState)(!1),F=Object(a.a)(P,2),A=F[0],T=F[1];return Object(i.useEffect)((function(){S(O)}),[O]),Object(i.useEffect)((function(){m(C?function(e){return[].concat(Object(n.a)(e),[u._id])}:function(e){return e.filter((function(e){return e!==u._id}))})}),[C]),Object(x.jsxs)("tr",{className:"product ".concat(C?"selected":""),children:[Object(x.jsx)("td",{className:"checkContainer",children:Object(x.jsx)(d.f,{defaultValue:C,value:C,onChange:function(e){S(e)}})}),Object(x.jsx)("td",{className:"date",children:Object(x.jsx)(d.r,{format:"DD-MM-YY",children:u.createdAt})}),Object(x.jsx)("td",{className:"thumbs",children:Object(x.jsx)(d.p,{links:u.images})}),Object(x.jsx)("td",{className:"name",children:u.name}),Object(x.jsx)("td",{children:u.type}),Object(x.jsx)("td",{children:u.fbMarketId?"Added":"N/A"}),Object(x.jsxs)("td",{children:[u.available," ",!0===u.available&&"Available",!1===u.available&&"Unavailable"]}),Object(x.jsxs)("td",{children:["\u20b9",u.price]}),Object(x.jsx)("td",{children:(null===(t=y.gst)||void 0===t?void 0:t.verified)?(u.gst||(null===(c=y.gst)||void 0===c?void 0:c.amount)||0)+"%":"N/A"}),Object(x.jsxs)("td",{children:["\u20b9",Object(d.I)(u)||0]}),Object(x.jsxs)("td",{children:["\u20b9",Object(d.J)({product:u,gst:y.gst})||0]}),Object(x.jsx)("td",{children:0===f.length&&Object(x.jsxs)(d.a,{icon:Object(x.jsx)(d.g,{}),children:[Object(x.jsx)(o.b,{to:"/marketplace/".concat(u._id),target:"_blank",children:"View"}),(null===(s=y.fbMarket)||void 0===s?void 0:s.userAgreement)&&d.o.get("facebook_user_accessToken")&&Object(x.jsx)(x.Fragment,{children:u.fbMarketId?Object(x.jsx)("button",{onClick:function(){return g([u._id])},children:"Remove from Facebook"}):Object(x.jsx)("button",{onClick:function(){return v([u._id])},children:"Add to Facebook"})}),!(null===(l=y.fbMarket)||void 0===l?void 0:l.userAgreement)&&Object(x.jsx)(o.b,{to:"/account/myShop/fbMarketplace",className:"edit",children:"Setup FB Marketplace"}),Object(x.jsx)(o.b,{to:"#",className:"edit",onClick:function(){return D(!0)},children:"Edit"}),Object(x.jsx)(o.b,{to:"#",className:"delete",onClick:function(){return Object(j.a)({label:"Removing Product",question:"You sure want to delete this product?",callback:function(){return p([u._id])}})},children:"Delete"})]})}),Object(x.jsx)(j.b,{head:!0,label:"Edit Product/Service",open:_,setOpen:D,className:"productForm",children:Object(x.jsx)(re,{categories:h,onSuccess:function(e){b((function(t){return t.map((function(t){return t._id===e._id?e:t}))})),D(!1),T(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return T(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.B,{}),Object(x.jsx)("h4",{children:"Product updated."})]})]}))},prefill:u})}),Object(x.jsx)(j.b,{className:"msg",open:A,children:A})]})},je=function(e){var t=e.onSuccess,c=e.categories,r=Object(i.useState)(!1),l=Object(a.a)(r,2),o=l[0],u=l[1],b=Object(i.useState)(1),h=Object(a.a)(b,2),O=h[0],m=h[1],f=Object(i.useState)(null),p=Object(a.a)(f,2),v=p[0],g=p[1],y=Object(i.useState)([]),k=Object(a.a)(y,2),N=k[0],C=k[1],S=Object(i.useState)(null),w=Object(a.a)(S,2),M=w[0],_=w[1],D=Object(i.useState)(""),P=Object(a.a)(D,2),F=P[0],A=P[1],T=Object(i.useState)(null),R=Object(a.a)(T,2),B=R[0],I=R[1],E=function(){u(!0),fetch("/api/updateDraft",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:v})}).then((function(e){return e.json()})).then((function(e){var c=e.code,n=e.updated;u(!1),_("ok"===c?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){_(null),null===t||void 0===t||t()},children:"Okay"}),Object(x.jsxs)("div",{children:[n?Object(x.jsx)(d.B,{}):Object(x.jsx)(d.i,{}),Object(x.jsxs)("h4",{children:[n," items has been updated."]})]})]}):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return _(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Could not add products. Try again."})]})]}))})).catch((function(e){u(!1),console.log(e),_(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return _(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Could not add products. Make sure you're online."})]})]}))}))},L=function(){var e=Object(q.a)(Y.a.mark((function e(t){var c;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),u(!0),e.next=4,Object(d.E)({files:N,setMsg:_});case 4:if(e.t0=e.sent,e.t0){e.next=7;break}e.t0=[];case 7:if((c=e.t0).length===N.length){e.next=11;break}return _(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return _(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Could not upload images. Please try again."})]})]})),e.abrupt("return");case 11:fetch("/api/uploadProductImg",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({images:c,category:F})}).then((function(e){return e.json()})).then((function(e){if("ok"===e.code){console.log(e);var t=Object.entries({Images:"images",id:"_id",Name:"name",Description:"dscr",Material:"material","Size [Please specify mm, cm, inch or KG]":"size",Category:"category",Type:"type","Price in INR.":"price","Units Available":"available","HSN Code":"hsn","GST %":"gst"}).map((function(e){var t=Object(a.a)(e,2);return{label:t[0],key:t[1]}}));console.log(t,e.products),I({headers:t,data:e.products,filename:"Delivery Pay Product Draft.csv"})}else _(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return _(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Could not add products. Make sure you're online."})]})]}))})).catch((function(e){u(!1),console.log(e),_(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return _(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Could not add products. Make sure you're online."})]})]}))}));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsxs)("div",{className:"content",children:[Object(x.jsx)(ee,{label:"Create Draft",className:"createDraft",defaultStatus:1===O,data:B,children:Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)("form",{onSubmit:L,children:[Object(x.jsxs)("section",{className:"category",children:[Object(x.jsx)("label",{children:"Choose category"}),Object(x.jsx)(d.h,{options:c.map((function(e){return{label:e,value:e.toLowerCase()}})),required:!0,onChange:function(e){return A(e.value)}})]}),Object(x.jsxs)("p",{children:["Choose images"," ",Object(x.jsx)("span",{children:"Choose 1 image for each product. you can add multiple images later."})]}),Object(x.jsx)(d.k,{onChange:function(e){return C(e)},multiple:!0}),Object(x.jsxs)("section",{className:"btns",children:[Object(x.jsx)("button",{className:"clean",type:"button",onClick:function(){return m(3)},children:"Already have a draft"}),B?Object(x.jsx)(ae.CSVLink,Object(s.a)(Object(s.a)({},B),{},{className:"submit",type:"submit",onClick:function(){I(null),m(2)},children:"Download Draft"})):Object(x.jsx)("button",{className:"submit",children:"Create Draft"})]})]})})}),Object(x.jsxs)(ee,{label:"Populate With data",defaultStatus:2===O,children:[Object(x.jsx)("p",{children:"Populate the Sheet with real product data. Don't Change the header."}),Object(x.jsx)("button",{className:"submit",onClick:function(){return m(3)},children:"Next"})]}),Object(x.jsxs)(ee,{label:"Upload Draft",defaultStatus:3===O,children:[!!(null===v||void 0===v?void 0:v.length)&&Object(x.jsxs)("table",{className:"table",children:[Object(x.jsx)("thead",{children:Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{children:"Type"}),Object(x.jsx)("th",{children:"Images"}),Object(x.jsx)("th",{className:"name",children:"Name"}),Object(x.jsx)("th",{className:"dscr",children:"Description"}),Object(x.jsx)("th",{children:"Available"}),Object(x.jsx)("th",{children:"Price"}),Object(x.jsx)("th",{children:"GST"}),Object(x.jsx)("th",{children:"Action"})]})}),Object(x.jsx)("tbody",{children:null===v||void 0===v?void 0:v.map((function(e,t){return Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:e.type}),Object(x.jsx)("td",{className:"thumbs",children:Object(x.jsx)(d.p,{links:e.images})}),Object(x.jsx)("td",{className:"name",children:e.name}),Object(x.jsx)("td",{className:"dscr",children:e.dscr}),Object(x.jsxs)("td",{children:[e.available,!0===e.available&&"Available",!1===e.available&&"Unavailable"]}),Object(x.jsx)("td",{children:e.price}),Object(x.jsx)("td",{children:e.gst}),Object(x.jsx)("td",{children:Object(x.jsx)("button",{className:"remove",onClick:function(){return g((function(e){var c=Object(n.a)(e);return c.splice(t,1),c}))},children:Object(x.jsx)(d.G,{})})})]},t)}))})]}),!(null===v||void 0===v?void 0:v.length)&&Object(x.jsxs)("div",{className:"uploadFile",children:[Object(x.jsxs)("p",{children:["Upload xlsx/csv file in. See the example file"," ",Object(x.jsx)("a",{href:"/batch_product_upload_xlsx_file_example.csv",target:"_blank",children:"here"}),"."]}),Object(x.jsx)("input",{type:"file",accept:".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",onChange:function(e){e.target.files[0]&&function(e,t){e.name;var c=new FileReader;c.onload=function(e){var c=e.target.result,n=ie.read(c,{type:"binary"}),s=n.SheetNames[0],a=n.Sheets[s],i=ie.utils.sheet_to_json(a,{header:1}),r=[],l=i.shift();i.forEach((function(e,t){var c={};l.forEach((function(t,n){var s;switch(t){case"Images":s="images";break;case"Name":s="name";break;case"Description":s="dscr";break;case"Material":s="material";break;case"Size [Please specify mm, cm, inch or KG]":s="size";break;case"Category":s="category";break;case"Type":s="type";break;case"Price in INR.":s="price";break;case"Units Available":s="available";break;case"HSN Code":s="hsn";break;case"GST %":s="gst";break;case"id":s="_id"}c[s]=e[n]})),r.push(c)})),t(r)},c.readAsBinaryString(e)}(e.target.files[0],(function(e){(null===e||void 0===e?void 0:e.length)&&g(e.filter((function(e){return e.type&&e.category&&e.name&&e.dscr&&void 0!==e.price})).map((function(e){return Object(s.a)(Object(s.a)({},e),{},{status:"",images:e.images.split(/,( |\n)/).filter((function(e){return e.trim()}))})})))})),e.target.value=null}})]}),!!(null===v||void 0===v?void 0:v.length)&&Object(x.jsx)("button",{className:"submit",onClick:function(){return Object(j.a)({label:"Adding Batch products",question:"You sure want to add all these items?",callback:E})},children:"Add"})]}),o&&Object(x.jsx)("div",{className:"spinnerContainer",children:Object(x.jsx)("div",{className:"spinner"})}),Object(x.jsx)(j.b,{className:"msg",open:M,children:M})]})},de=["Buyer will be responsible for paying for shipping costs & for returning the item.","Shipping costs are nonrefundable.","Orders must be returned with Original Packaging & Securely.","Orders must be Returned Via Trackable / Traceable Courier Services Only.","Proof of Return via Photo of Tracking Number & Dispatch Ticket is Required.","Refund is Only Issued Upon Delivery of Return Package."],ue=function(e){var t,c,n,s,l,o,u,b,h,O,m,f,p,v,g,y,k,N,C,S,w,M,_,D,P,F,A,T,R,Y,q,B,I,E,L,H,V,U,Z,G=e.categories,W=e.setCategories,J=Object(i.useContext)(r.d),z=J.user,K=(J.setUser,Object(i.useState)(!1)),$=Object(a.a)(K,2),Q=$[0],X=$[1],ee=Object(i.useState)(!1),te=Object(a.a)(ee,2),ce=te[0],ne=te[1],se=Object(i.useState)(),ae=Object(a.a)(se,2),ie=ae[0],re=ae[1],le=Object(i.useState)(!1),oe=Object(a.a)(le,2),je=oe[0],de=oe[1],ue=Object(i.useState)(null),me=Object(a.a)(ue,2),fe=me[0],pe=me[1];return Object(x.jsxs)("div",{className:"settings",children:[Object(x.jsxs)("div",{className:"caution",children:[!(null===G||void 0===G?void 0:G.length)&&Object(x.jsx)("p",{className:"err",children:"Add at least 1 category."}),!(null===(t=z.shopInfo)||void 0===t||null===(c=t.terms)||void 0===c?void 0:c.length)&&Object(x.jsx)("p",{className:"err",children:"Add Return policy terms"}),(void 0===(null===(n=z.shopInfo)||void 0===n?void 0:n.shippingCost)||null===(null===(s=z.shopInfo)||void 0===s?void 0:s.shippingCost)||void 0===(null===(l=z.shopInfo)||void 0===l?void 0:l.deliveryWithin)||null===(null===(o=z.shopInfo)||void 0===o?void 0:o.deliveryWithin)||void 0===(null===(u=z.shopInfo)||void 0===u?void 0:u.refundable))&&Object(x.jsx)("p",{className:"err",children:"Add Shipping & Delivery detail"}),Object.values((null===(b=z.shopInfo)||void 0===b?void 0:b.paymentMethod)||{}).length<6&&Object(x.jsx)("p",{className:"err",children:"Add valid payment method"})]}),Object(x.jsxs)("div",{className:"cat",children:[Object(x.jsx)("h2",{className:"head",children:"Categories"}),Object(x.jsxs)("ul",{className:"categories",children:[G.map((function(e,t){return Object(x.jsxs)("li",{children:[e," ",Object(x.jsx)("button",{onClick:function(){return Object(j.a)({label:"Remove Category",question:"You sure want to remove this category?",callback:function(){fetch("/api/categories",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({category:e})}).then((function(e){return e.json()})).then((function(t){"ok"===t.code?W((function(t){return t.filter((function(t){return t!==e}))})):pe(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return pe(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Could not delete category. Try again."})]})]}))})).catch((function(e){console.log(e),pe(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return pe(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Could not delete category. Make sure you're online."})]})]}))}))}})},children:Object(x.jsx)(d.G,{})})]},t)})),0===G.length&&Object(x.jsx)("li",{className:"placeholder",children:"No category found."})]}),Object(x.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=e.target.querySelector("input");fetch("/api/addCategory",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({category:t.value})}).then((function(e){return e.json()})).then((function(e){"ok"===e.code?(W(e.categories),t.value=""):pe(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return pe(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Could not add category. Try again."})]})]}))})).catch((function(e){console.log(e),pe(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return pe(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Could not add category. Make sure you're online."})]})]}))}))},children:[Object(x.jsx)("input",{type:"text",required:!0,placeholder:"New Category. ie Mobile"}),Object(x.jsx)("button",{children:"Add category"})]})]}),Object(x.jsxs)("div",{className:"gst",children:[Object(x.jsxs)("h2",{className:"head",children:["GST"," ",!Q&&Object(x.jsx)("button",{onClick:function(){return X(!0)},children:"Edit"})]}),Object(x.jsxs)("p",{className:"status",children:["Status:"," ",Object(x.jsx)("strong",{children:(null===(h=z.gst)||void 0===h?void 0:h.verified)?"Verified":"Unverified"})]}),Q?Object(x.jsx)(be,{setOpen:X,setMsg:pe}):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("p",{children:["GST Registration number: ",(null===(O=z.gst)||void 0===O||null===(m=O.detail)||void 0===m?void 0:m.reg)||"N/A"]}),Object(x.jsxs)("p",{children:["GST amount: ",(null===(f=z.gst)||void 0===f?void 0:f.amount)?z.gst.amount+"%":"N/A"]}),Object(x.jsxs)("p",{children:["Files for verification:"," ",!(null===(p=z.gst)||void 0===p||null===(v=p.detail)||void 0===v||null===(g=v.files)||void 0===g?void 0:g.length)&&"N/A"]}),(null===(y=z.gst)||void 0===y||null===(k=y.detail)||void 0===k||null===(N=k.files)||void 0===N?void 0:N.length)&&Object(x.jsx)("ul",{className:"thumbs",children:Object(x.jsx)(d.p,{links:null===(C=z.gst)||void 0===C||null===(S=C.detail)||void 0===S?void 0:S.files})})]}),!(null===(w=z.gst)||void 0===w?void 0:w.verified)&&Object(x.jsx)("p",{className:"note",children:"*GST will apply once we review and verify your GST registraion."})]}),Object(x.jsxs)("div",{className:"payment",children:[Object(x.jsxs)("h2",{className:"head",children:["Payment Method"," ",!je&&Object(x.jsx)("button",{onClick:function(){return de(!0)},children:"Edit"})]}),je?Object(x.jsx)(xe,{prefill:null===(M=z.shopInfo)||void 0===M?void 0:M.paymentMethod,setOpen:de,setMsg:pe}):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("p",{children:["Name: ",(null===(_=z.shopInfo)||void 0===_||null===(D=_.paymentMethod)||void 0===D?void 0:D.name)||"--"]}),Object(x.jsxs)("p",{children:["Bank: ",(null===(P=z.shopInfo)||void 0===P||null===(F=P.paymentMethod)||void 0===F?void 0:F.bank)||"--"]}),Object(x.jsxs)("p",{children:["City: ",(null===(A=z.shopInfo)||void 0===A||null===(T=A.paymentMethod)||void 0===T?void 0:T.city)||"--"]}),Object(x.jsxs)("p",{children:["Account type: ",(null===(R=z.shopInfo)||void 0===R||null===(Y=R.paymentMethod)||void 0===Y?void 0:Y.accountType)||"--"]}),Object(x.jsxs)("p",{children:["Account Number:"," ",(null===(q=z.shopInfo)||void 0===q||null===(B=q.paymentMethod)||void 0===B?void 0:B.accountNumber)||"--"]}),Object(x.jsxs)("p",{children:["ifsc: ",(null===(I=z.shopInfo)||void 0===I||null===(E=I.paymentMethod)||void 0===E?void 0:E.ifsc)||"--"]})]})]}),Object(x.jsxs)("div",{className:"terms shipping",children:[Object(x.jsxs)("h2",{className:"head",children:["Shipping & Delivery"," ",!ce&&Object(x.jsx)("button",{onClick:function(){return ne(!0)},children:"Edit"})]}),ce?Object(x.jsx)(he,{setOpen:ne,setMsg:pe}):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("p",{children:["Shipping cost:"," ",(null===(L=z.shopInfo)||void 0===L?void 0:L.shippingCost)?"\u20b9"+(null===(H=z.shopInfo)||void 0===H?void 0:H.shippingCost):"N/A"]}),Object(x.jsxs)("p",{children:["Delivery within (days): ",(null===(V=z.shopInfo)||void 0===V?void 0:V.deliveryWithin)||"N/A"]}),Object(x.jsxs)("p",{children:["Refundable: ",(null===(U=z.shopInfo)||void 0===U||null===(Z=U.refundable)||void 0===Z?void 0:Z.toString())||"N/A"]})]})]}),Object(x.jsxs)("div",{className:"terms return",children:[Object(x.jsxs)("h2",{className:"head",children:["Return Policy Terms"," ",!ie&&Object(x.jsx)("button",{onClick:function(){return re(!0)},children:"Edit"})]}),Object(x.jsx)(Oe,{setOpen:re,termsEdit:ie,setMsg:pe})]}),Object(x.jsx)(j.b,{className:"msg",open:fe,children:fe})]})},be=function(e){var t,c,n,l,o,j,u,b=e.setOpen,h=e.setMsg,O=Object(i.useContext)(r.d),m=O.user,f=O.setUser,p=Object(i.useState)(!1),v=Object(a.a)(p,2),g=(v[0],v[1]),y=Object(i.useState)([]),k=Object(a.a)(y,2),N=k[0],C=k[1],S=Object(i.useState)(null===(t=m.gst)||void 0===t||null===(c=t.detail)||void 0===c?void 0:c.reg),w=Object(a.a)(S,2),M=w[0],_=w[1],D=Object(i.useState)(null===(n=m.gst)||void 0===n?void 0:n.amount),P=Object(a.a)(D,2),F=P[0],A=P[1],T=function(){var e=Object(q.a)(Y.a.mark((function e(t){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),g(!0),e.next=4,Object(d.E)({files:N,setMsg:h});case 4:if(e.t0=e.sent,e.t0){e.next=7;break}e.t0=[];case 7:z({"gst.detail.files":e.t0,"gst.detail.reg":M,"gst.amount":F}).then((function(e){var t=e.user;g(!1),t&&(f((function(e){return Object(s.a)(Object(s.a)({},e),{},{gst:t.gst})})),b(!1))})).catch((function(e){g(!1),console.log(e),h(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return h(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Could not upadte GST Information. Make sure you're online"})]})]}))}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsxs)("form",{onSubmit:T,children:[Object(x.jsxs)("section",{children:[Object(x.jsx)("label",{children:"GST Registration Nubmer"}),Object(x.jsx)("input",{required:!0,type:"text",defaultValue:null===(l=m.gst)||void 0===l?void 0:l.detail.reg,name:"gst.detail.reg",onChange:function(e){return _(e.target.value)}})]}),Object(x.jsxs)("section",{children:[Object(x.jsx)("label",{children:"GST percentage (%)"}),Object(x.jsx)(d.s,{required:!0,defaultValue:null===(o=m.gst)||void 0===o?void 0:o.amount,name:"gst.detail.reg",onChange:function(e){return A(e.target.value)}})]}),Object(x.jsxs)("section",{children:[Object(x.jsx)("label",{children:"Upload files for verification"}),Object(x.jsx)(d.k,{multiple:!0,prefill:null===(j=m.gst)||void 0===j||null===(u=j.detail)||void 0===u?void 0:u.files,name:"gst.detail.files",onChange:function(e){return C(e)}})]}),Object(x.jsxs)("section",{className:"btns",children:[Object(x.jsx)("button",{children:"Save Changes"}),Object(x.jsx)("button",{type:"button",onClick:function(){return b(!1)},children:"Cancel"})]})]})},he=function(e){var t,c,n,l=e.setOpen,o=e.setMsg,j=Object(i.useContext)(r.d),u=j.user,b=j.setUser,h=Object(i.useState)((null===(t=u.shopInfo)||void 0===t?void 0:t.shippingCost)||0),O=Object(a.a)(h,2),m=O[0],f=O[1],p=Object(i.useState)(null===(c=u.shopInfo)||void 0===c?void 0:c.deliveryWithin),v=Object(a.a)(p,2),g=v[0],y=v[1],k=Object(i.useState)((null===(n=u.shopInfo)||void 0===n?void 0:n.refundable)||null),N=Object(a.a)(k,2),C=N[0],S=N[1];return Object(x.jsxs)("form",{onSubmit:function(e){e.preventDefault(),z({"shopInfo.shippingCost":m,"shopInfo.deliveryWithin":g,"shopInfo.refundable":C}).then((function(e){var t=e.user;t&&(b((function(e){return Object(s.a)(Object(s.a)({},e),{},{shopInfo:t.shopInfo})})),l(!1))})).catch((function(e){console.log(e),o(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return o(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Could not upadte Terms. Make sure you're online"})]})]}))}))},children:[Object(x.jsxs)("section",{children:[Object(x.jsx)("label",{children:"Shipping Cost \u20b9"}),Object(x.jsx)(d.s,{required:!0,defaultValue:m,name:"shippingCost",onChange:function(e){return f(e.target.value)}})]}),Object(x.jsxs)("section",{children:[Object(x.jsx)("label",{children:"Delivery Within (days)"}),Object(x.jsx)(d.s,{required:!0,defaultValue:g,name:"deliveryWithin",min:1,step:"0",placeholder:"ie. 4 Days",onChange:function(e){return y(e.target.value)}})]}),Object(x.jsxs)("section",{children:[Object(x.jsx)("label",{children:"Refundable"}),Object(x.jsx)(d.h,{required:!0,defaultValue:0,onChange:function(e){return S(e.value)},options:[{label:"No",value:null},{label:"Upto 24 Hours After Delivery",value:"Upto 24 Hours After Delivery"},{label:"Upto 7 Days After Delivery",value:"Upto 7 Days After Delivery"},{label:"Upto 15 Days After Delivery",value:"Upto 15 Days After Delivery"}]})]}),Object(x.jsxs)("section",{className:"btns",children:[Object(x.jsx)("button",{children:"Save Changes"}),Object(x.jsx)("button",{type:"button",onClick:function(){return l(!1)},children:"Cancel"})]})]})},Oe=function(e){var t,c=e.setOpen,l=e.termsEdit,o=e.setMsg,j=Object(i.useContext)(r.d),u=j.user,b=j.setUser,h=Object(i.useState)((null===(t=u.shopInfo)||void 0===t?void 0:t.terms)||[]),O=Object(a.a)(h,2),m=O[0],f=O[1],p=Object(i.useState)(""),v=Object(a.a)(p,2),g=v[0],y=v[1];return Object(i.useEffect)((function(){var e;l?0===m.length&&f(de):f((null===(e=u.shopInfo)||void 0===e?void 0:e.terms)||[])}),[l]),Object(x.jsxs)("form",{onSubmit:function(e){e.preventDefault(),z({"shopInfo.terms":m}).then((function(e){var t,n=e.user;n&&(b((function(e){return Object(s.a)(Object(s.a)({},e),{},{shopInfo:n.shopInfo})})),c(!1),f(null===(t=n.shopInfo)||void 0===t?void 0:t.terms))})).catch((function(e){console.log(e),o(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return o(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Could not upadte Terms. Make sure you're online"})]})]}))}))},children:[Object(x.jsxs)("ul",{children:[m.map((function(e,t){return Object(x.jsxs)("li",{children:[e," ",l&&Object(x.jsx)("button",{type:"button",onClick:function(){return f((function(t){return t.filter((function(t){return t!==e}))}))},children:Object(x.jsx)(d.G,{})})]},t)})),0===m.length&&Object(x.jsx)("li",{children:"No terms has been added."})]}),l&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("section",{className:"addTerm",children:[Object(x.jsx)(B.a,{value:g,placeholder:"Add auditional term",onChange:function(e){return y(e.target.value)}}),Object(x.jsx)("button",{type:"button",onClick:function(){f((function(e){return g?[].concat(Object(n.a)(e.filter((function(e){return e!==g}))),[g]):e})),y("")},children:"Add Term"})]}),Object(x.jsxs)("section",{className:"btns",children:[Object(x.jsx)("button",{children:"Save Changes"}),Object(x.jsx)("button",{type:"button",onClick:function(){var e,t;c(!1),f((null===(e=u.shopInfo)||void 0===e||null===(t=e.terms)||void 0===t?void 0:t.length)?u.shopInfo.terms:de)},children:"Cancel"})]})]})]})},xe=function(e){var t=e.prefill,c=(e.onSuccess,e.setMsg),n=e.setOpen,l=Object(i.useContext)(r.d).setUser,o=Object(i.useState)((null===t||void 0===t?void 0:t.bank)||""),j=Object(a.a)(o,2),u=j[0],b=j[1],h=Object(i.useState)((null===t||void 0===t?void 0:t.name)||""),O=Object(a.a)(h,2),m=O[0],f=O[1],p=Object(i.useState)((null===t||void 0===t?void 0:t.ifsc)||""),v=Object(a.a)(p,2),g=v[0],y=v[1],k=Object(i.useState)((null===t||void 0===t?void 0:t.city)||""),N=Object(a.a)(k,2),C=N[0],S=N[1],w=Object(i.useState)((null===t||void 0===t?void 0:t.accountType)||""),M=Object(a.a)(w,2),_=M[0],D=M[1],P=Object(i.useState)((null===t||void 0===t?void 0:t.accountNumber)||""),F=Object(a.a)(P,2),A=F[0],T=F[1];return Object(x.jsxs)("form",{className:"paymentMethodForm netBanking",onSubmit:function(e){e.preventDefault(),z({"shopInfo.paymentMethod":{name:m,bank:u,city:C,accountType:_,ifsc:g,accountNumber:A}}).then((function(e){var t=e.user;t?(l((function(e){return Object(s.a)(Object(s.a)({},e),{},{shopInfo:t.shopInfo})})),n(!1)):c(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return c(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Could not update payment method. Please try again."})]})]}))})).catch((function(e){console.log(e),c(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return c(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Could not updated payment method. Make sure you're online."})]})]}))}))},children:[Object(x.jsxs)("section",{className:"inputs",children:[Object(x.jsx)("input",{type:"text",name:"name",placeholder:"Full name",value:m,onChange:function(e){return f(e.target.value)},required:!0}),Object(x.jsx)("input",{type:"text",name:"bank",placeholder:"Bank",value:u,onChange:function(e){return b(e.target.value)},required:!0}),Object(x.jsx)("input",{type:"text",name:"city",placeholder:"City",value:C,onChange:function(e){return S(e.target.value)},required:!0}),Object(x.jsx)("input",{type:"text",name:"type",placeholder:"Account type ie. Savings / Current",value:_,onChange:function(e){return D(e.target.value)},required:!0}),Object(x.jsx)("input",{type:"text",name:"accountNumber",placeholder:"Account Number",value:A,onChange:function(e){return T(e.target.value)},required:!0}),Object(x.jsx)("input",{type:"text",name:"ifsc",placeholder:"IFSC",value:g,onChange:function(e){return y(e.target.value)},required:!0})]}),Object(x.jsxs)("section",{className:"btns",children:[Object(x.jsx)("button",{type:"submit",children:"Save Changes"}),Object(x.jsx)("button",{type:"button",onClick:function(){return n(!1)},children:"Cancel"})]})]})},me=function(e){e.history,e.location,e.match;var t=Object(i.useContext)(r.d),c=t.user,n=t.userType,s=Object(i.useState)(null),o=Object(a.a)(s,2),u=o[0],b=(o[1],Object(i.useState)([])),h=Object(a.a)(b,2),O=h[0],m=h[1],f=Object(i.useState)(!1),p=Object(a.a)(f,2),v=p[0],g=p[1];return Object(i.useEffect)((function(){fetch("/api/categories").then((function(e){return e.json()})).then((function(e){m(e.categories)}))}),[]),Object(i.useEffect)((function(){var e,t,n,s,a,i,r,l;!(null===O||void 0===O?void 0:O.length)||!(null===(e=c.shopInfo)||void 0===e||null===(t=e.terms)||void 0===t?void 0:t.length)||void 0===(null===(n=c.shopInfo)||void 0===n?void 0:n.shippingCost)||null===(null===(s=c.shopInfo)||void 0===s?void 0:s.shippingCost)||void 0===(null===(a=c.shopInfo)||void 0===a?void 0:a.deliveryWithin)||null===(null===(i=c.shopInfo)||void 0===i?void 0:i.deliveryWithin)||void 0===(null===(r=c.shopInfo)||void 0===r?void 0:r.refundable)||Object.values((null===(l=c.shopInfo)||void 0===l?void 0:l.paymentMethod)||{}).length<6?g(!1):g(!0)}),[O,c]),Object(x.jsxs)(x.Fragment,{children:["buyer"===n&&Object(x.jsx)(l.a,{to:"/account/myShopping/orders"}),Object(x.jsxs)("div",{className:"myShop",children:[Object(x.jsx)("div",{style:{display:"none"},children:Object(x.jsx)(d.G,{})}),Object(x.jsx)(d.C,{basepath:"/account/myShop/",tabs:[{label:"Products & Services",path:"products"},{label:"Orders",path:"orders"},{label:"Refunds",path:"refunds"},{label:"FB Marketplace",path:"fbMarketplace"},{label:"Settings",path:"settings"}]}),Object(x.jsxs)(l.d,{children:[Object(x.jsx)(l.b,{path:"/account/myShop/products",children:Object(x.jsx)(le,{categories:O,shopSetupComplete:v})}),Object(x.jsx)(l.b,{path:"/account/myShop/orders/:_id",component:E}),Object(x.jsx)(l.b,{path:"/account/myShop/orders",children:Object(x.jsx)(H,{categories:O})}),Object(x.jsx)(l.b,{path:"/account/myShop/refunds/:_id",component:U}),Object(x.jsx)(l.b,{path:"/account/myShop/refunds",component:Z}),Object(x.jsx)(l.b,{path:"/account/myShop/fbMarketplace",component:se}),Object(x.jsx)(l.b,{path:"/account/myShop/settings",children:Object(x.jsx)(ue,{categories:O,setCategories:m})})]}),Object(x.jsx)(j.b,{className:"msg",open:u,children:u})]})]})},fe=c(67);c(158),c(159);var pe=function(e){var t=e.onSuccess,c=Object(i.useContext)(r.d).user,n=Object(i.useState)(!1),s=Object(a.a)(n,2),l=s[0],o=s[1],u=Object(i.useState)(c?c.firstName+" "+c.lastName:""),b=Object(a.a)(u,2),h=b[0],O=b[1],m=Object(i.useState)(c?c.phone:""),f=Object(a.a)(m,2),p=f[0],v=f[1],g=Object(i.useState)(""),y=Object(a.a)(g,2),k=y[0],N=y[1],C=Object(i.useState)(""),S=Object(a.a)(C,2),w=S[0],M=S[1],_=Object(i.useState)(null),D=Object(a.a)(_,2),P=D[0],F=D[1];return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("form",{onSubmit:function(e){e.preventDefault(),o(!0),fetch("/api/bugReport",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:h,phone:p,issue:k,dscr:w})}).then((function(e){return e.json()})).then((function(e){o(!1),"ok"===e.code?null===t||void 0===t||t():F(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return F(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Report could not be submitted."})]})]}))})).catch((function(e){o(!1),console.log(e),F(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return F(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Report could not be submitted. Make sure you're online."})]})]}))}))},children:[Object(x.jsxs)("section",{children:[Object(x.jsx)("label",{children:"Name"}),Object(x.jsx)("input",{value:h,onChange:function(e){return O(e.target.value)}})]}),Object(x.jsxs)("section",{children:[Object(x.jsx)("label",{children:"Phone"}),Object(x.jsx)("input",{value:p,onChange:function(e){return v(e.target.value)}})]}),Object(x.jsxs)("section",{children:[Object(x.jsx)("label",{children:"Issue"}),Object(x.jsx)("input",{value:k,onChange:function(e){return N(e.target.value)}})]}),Object(x.jsxs)("section",{children:[Object(x.jsx)("label",{children:"Description"}),Object(x.jsx)(B.a,{value:w,onChange:function(e){return M(e.target.value)}})]}),Object(x.jsx)("section",{className:"btns",children:Object(x.jsx)("button",{className:"submit",children:"Submit"})})]}),Object(x.jsx)(j.b,{open:P,className:"msg",children:P}),l&&Object(x.jsx)("div",{className:"spinnerContainer",children:Object(x.jsx)("div",{className:"spinner"})})]})},ve=function(e){var t=e.history,c=(e.location,e.pathname,Object(i.useRef)()),r=Object(i.useState)(!1),l=Object(a.a)(r,2),o=l[0],h=l[1],O=Object(i.useState)(null),m=Object(a.a)(O,2),f=m[0],p=m[1],v=Object(i.useState)(0),g=Object(a.a)(v,2),y=g[0],k=g[1],N=Object(i.useState)([]),C=Object(a.a)(N,2),S=C[0],w=C[1],M=Object(i.useState)({column:"createdAt",order:"dsc"}),_=Object(a.a)(M,2),D=_[0],P=_[1],F=Object(i.useState)({startDate:new Date,endDate:new Date}),A=Object(a.a)(F,2),T=A[0],R=A[1],Y=Object(i.useState)(!1),q=Object(a.a)(Y,2),B=q[0],I=q[1],E=Object(i.useState)(1),L=Object(a.a)(E,2),H=L[0],V=L[1],U=Object(i.useState)(""),Z=Object(a.a)(U,2),G=Z[0],W=Z[1],J=Object(i.useState)(20),z=Object(a.a)(J,2),K=z[0],$=z[1],Q=Object(i.useState)({}),X=Object(a.a)(Q,2),ee=X[0],te=X[1],ce=Object(i.useState)(!1),ne=Object(a.a)(ce,2),se=ne[0],ae=ne[1];return Object(i.useLayoutEffect)((function(){var e=c.current.getBoundingClientRect(),t=e.height,n=e.y,s=e.width,a=e.x;te({position:"fixed",top:t+n+4,right:window.innerWidth-a-s})}),[]),Object(i.useEffect)((function(){var e=Object(d.K)({time:null===T||void 0===T?void 0:T.startDate,format:"YYYY-MM-DD"}),t=Object(d.K)({time:null===T||void 0===T?void 0:T.endDate.setHours(24,0,0,0),format:"YYYY-MM-DD"});fetch("/api/getTickets?".concat(new URLSearchParams(Object(s.a)(Object(s.a)(Object(fe.a)({page:H,perPage:K,sort:D.column},"sort",D.order),G&&{q:G}),se&&{dateFrom:e,dateTo:t})).toString())).then((function(e){return e.json()})).then((function(e){var t;"ok"===e.code?(w(e.tickets.tickets),k((null===(t=e.tickets.pageInfo[0])||void 0===t?void 0:t.count)||0)):p(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return p(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Could not get tickets."})]})]}))})).catch((function(e){console.log(e),p(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return p(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Could not get tickets. Make sure you're online."})]})]}))}))}),[H,K,D.column,D.order,G,se]),Object(x.jsxs)("div",{className:"table ticketContainer",children:[Object(x.jsx)("div",{style:{display:"none"},children:Object(x.jsx)(d.G,{})}),Object(x.jsxs)("div",{className:"head",children:[Object(x.jsx)("h3",{children:"Tickets"}),Object(x.jsx)("button",{onClick:function(){return h(!0)},children:"Open Ticket"})]}),Object(x.jsxs)("div",{className:"filters",children:[Object(x.jsxs)("section",{children:[Object(x.jsx)("label",{children:"Total:"}),y]}),Object(x.jsxs)("section",{children:[Object(x.jsx)("label",{children:"Per Page:"}),Object(x.jsx)(d.h,{defaultValue:0,options:[{label:"20",value:20},{label:"30",value:30},{label:"50",value:50}],onChange:function(e){return $(e.value)}})]}),Object(x.jsxs)("section",{className:"search",children:[Object(x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"23",height:"23",viewBox:"0 0 23 23",children:Object(x.jsx)("path",{id:"Icon_ionic-ios-search","data-name":"Icon ionic-ios-search",d:"M27.23,25.828l-6.4-6.455a9.116,9.116,0,1,0-1.384,1.4L25.8,27.188a.985.985,0,0,0,1.39.036A.99.99,0,0,0,27.23,25.828ZM13.67,20.852a7.2,7.2,0,1,1,5.091-2.108A7.155,7.155,0,0,1,13.67,20.852Z",transform:"translate(-4.5 -4.493)",fill:"#707070",opacity:"0.74"})}),Object(x.jsx)("input",{value:G,onChange:function(e){return W(e.target.value)},placeholder:"Search issue"}),G&&Object(x.jsx)("button",{onClick:function(){return W("")},children:Object(x.jsx)(d.G,{})})]}),Object(x.jsxs)("section",{className:"date ".concat(se?"open":""),ref:c,children:[Object(x.jsx)("svg",{onClick:function(){return I(!0)},xmlns:"http://www.w3.org/2000/svg",width:"30.971",height:"30.971",viewBox:"0 0 30.971 30.971",children:Object(x.jsx)("path",{id:"Path_299","data-name":"Path 299",d:"M3.992,2.42H6.775V.968a.968.968,0,1,1,1.936,0V2.42H22.26V.968a.968.968,0,1,1,1.936,0V2.42h2.783a4,4,0,0,1,3.992,3.992V26.978a4,4,0,0,1-3.992,3.992H3.992A4,4,0,0,1,0,26.978V6.412A4,4,0,0,1,3.992,2.42ZM26.978,4.355H24.2v.968a.968.968,0,1,1-1.936,0V4.355H8.71v.968a.968.968,0,1,1-1.936,0V4.355H3.992A2.059,2.059,0,0,0,1.936,6.412v2.3h27.1v-2.3A2.059,2.059,0,0,0,26.978,4.355ZM3.992,29.035H26.978a2.059,2.059,0,0,0,2.057-2.057V10.646H1.936V26.978A2.059,2.059,0,0,0,3.992,29.035Z",fill:"#336cf9"})}),se&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("div",{className:"dates",children:[Object(x.jsxs)("p",{children:["From:"," ",Object(x.jsx)(d.r,{format:"DD MMM, YYYY",children:T.startDate})]}),Object(x.jsxs)("p",{children:["To: ",Object(x.jsx)(d.r,{format:"DD MMM, YYYY",children:T.endDate})]})]}),Object(x.jsx)("button",{className:"clearDateFilter",onClick:function(){R({startDate:new Date,endDate:new Date}),ae(!1)},children:Object(x.jsx)(d.G,{})})]})]})]}),Object(x.jsxs)("table",{cellSpacing:0,cellPadding:0,children:[Object(x.jsx)("thead",{children:Object(x.jsxs)("tr",{children:[Object(x.jsxs)("th",{className:"createdAt"===D.column?"sort "+D.order:"",onClick:function(){P((function(e){return{column:"createdAt",order:"dsc"===e.order?"asc":"dsc"}}))},children:["Date ",Object(x.jsx)(d.g,{})]}),Object(x.jsxs)("th",{className:"issue"===D.column?"sort "+D.order:"",onClick:function(){P((function(e){return{column:"issue",order:"dsc"===e.order?"asc":"dsc"}}))},children:["Issue ",Object(x.jsx)(d.g,{})]}),Object(x.jsxs)("th",{className:"status"===D.column?"sort "+D.order:"",onClick:function(){P((function(e){return{column:"status",order:"dsc"===e.order?"asc":"dsc"}}))},children:["Status ",Object(x.jsx)(d.g,{})]})]})}),Object(x.jsxs)("tbody",{children:[S.map((function(e){return Object(x.jsxs)("tr",{onClick:function(){return t.push("/account/support/ticket/".concat(e._id))},children:[Object(x.jsx)("td",{children:Object(x.jsx)(d.r,{format:"hh:mm a, DD MMM, YYYY",children:e.createdAt})}),Object(x.jsx)("td",{children:e.issue}),Object(x.jsx)("td",{children:e.status})]},e._id)})),0===S.length&&Object(x.jsx)("tr",{className:"placeholder",children:Object(x.jsx)("td",{children:"Nothing yet."})})]}),Object(x.jsx)("tfoot",{children:Object(x.jsx)("tr",{children:Object(x.jsx)(d.t,{total:y,perPage:K,currentPage:H,btns:5,setPage:V})})})]}),Object(x.jsx)(j.b,{open:f,className:"msg",children:f}),Object(x.jsx)(j.b,{open:B,onBackdropClick:function(){return I(!1)},backdropClass:"datePicker",style:ee,children:Object(x.jsx)(b.DateRange,{className:"dateRange",ranges:[T],onChange:function(e){R(e.range1),e.range1.endDate!==e.range1.startDate&&(I(!1),ae(!0))}})}),Object(x.jsx)(j.b,{open:o,head:!0,label:"Open Ticket",setOpen:h,className:"formModal ticketFormModal",children:Object(x.jsx)(u.d,{onSuccess:function(e){h(!1),p(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return p(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.B,{}),Object(x.jsx)("h4",{children:"Ticket successfully submitted."})]})]})),w((function(t){return[e].concat(Object(n.a)(t))}))}})})]})},ge=function(e){var t=e.history,c=e.match,r=Object(i.useState)(null),l=Object(a.a)(r,2),b=l[0],h=l[1],O=Object(i.useState)(null),m=Object(a.a)(O,2),f=m[0],p=m[1],v=Object(i.useState)(!1),g=Object(a.a)(v,2),y=g[0],k=g[1];return Object(i.useEffect)((function(){fetch("/api/singleTicket?_id=".concat(c.params._id)).then((function(e){return e.json()})).then((function(e){"ok"===e.code?h(e.ticket):p(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return t.push("/account/support/ticket")},children:"Go Back"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Ticket could not be found."})]})]}))})).catch((function(e){console.log(e),p(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return t.push("/account/support/ticket")},children:"Go Back"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Ticket could not be found."})]})]}))}))}),[]),b?Object(x.jsxs)("div",{className:"ticket",children:[Object(x.jsxs)("div",{className:"detail",children:[Object(x.jsxs)(o.b,{to:"/account/support/ticket",className:"back",children:[Object(x.jsx)(d.c,{}),"Go Back"]}),Object(x.jsxs)("ul",{className:"summery",children:[Object(x.jsx)("li",{className:"head",children:"Ticket Summery"}),Object(x.jsxs)("li",{children:[Object(x.jsx)("label",{children:"Issue:"}),Object(x.jsx)("p",{children:b.issue})]}),Object(x.jsxs)("li",{children:[Object(x.jsx)("label",{children:"Status:"}),Object(x.jsx)("p",{children:b.status})]}),Object(x.jsxs)("li",{children:[Object(x.jsx)("label",{children:"Created at:"}),Object(x.jsx)("p",{children:Object(x.jsx)(d.r,{format:"hh:mm a, DD MMM, YYYY",children:b.createdAt})})]}),Object(x.jsxs)("li",{children:[Object(x.jsx)("label",{children:"Last Activity:"}),Object(x.jsx)("p",{children:Object(x.jsx)(d.r,{format:"hh:mm a, DD MMM, YYYY",children:b.updatedAt})})]})]}),Object(x.jsxs)("ul",{className:"milestoneDetail",children:[Object(x.jsx)("li",{className:"head",children:"Milestone Detail"}),b.milestone?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("li",{children:[Object(x.jsx)("label",{children:"Amount:"}),Object(x.jsx)("p",{children:b.milestone.amount})]}),Object(x.jsxs)("li",{children:[Object(x.jsx)("label",{children:"Status:"}),Object(x.jsx)("p",{children:b.milestone.status})]}),Object(x.jsxs)("li",{children:[Object(x.jsx)("label",{children:"Created at:"}),Object(x.jsx)("p",{children:Object(x.jsx)(d.r,{format:"hh:mm a, DD MMM, YYYY",children:b.milestone.createdAt})})]}),Object(x.jsxs)("li",{children:[Object(x.jsx)("label",{children:"Verification Method:"}),Object(x.jsx)("p",{children:b.milestone.verification})]}),Object(x.jsxs)("li",{children:[Object(x.jsx)("label",{children:"Seller:"}),Object(x.jsx)("p",{children:b.milestone.seller.firstName+" "+b.milestone.seller.lastName})]}),Object(x.jsxs)("li",{children:[Object(x.jsx)("label",{children:"Buyer:"}),Object(x.jsx)("p",{children:b.milestone.buyer.firstName+" "+b.milestone.buyer.lastName})]}),Object(x.jsxs)("li",{children:[Object(x.jsx)("label",{children:"Description:"}),Object(x.jsx)("p",{children:b.milestone.dscr})]})]}):Object(x.jsx)("li",{className:"placeholder",children:"No Detail provided"})]}),Object(x.jsxs)("ul",{className:"transactionDetail",children:[Object(x.jsx)("li",{className:"head",children:"Transaction Detail"}),b.transaction?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("li",{children:[Object(x.jsx)("label",{children:"Type:"}),Object(x.jsx)("p",{children:b.transaction.__t})]}),Object(x.jsxs)("li",{children:[Object(x.jsx)("label",{children:"Amount:"}),Object(x.jsx)("p",{children:b.transaction.amount})]}),Object(x.jsxs)("li",{children:[Object(x.jsx)("label",{children:"Note:"}),Object(x.jsx)("p",{children:b.transaction.note})]}),Object(x.jsxs)("li",{children:[Object(x.jsx)("label",{children:"Created at:"}),Object(x.jsx)("p",{children:Object(x.jsx)(d.r,{format:"hh:mm a, DD MMM, YYYY",children:b.transaction.createdAt})})]})]}):Object(x.jsx)("li",{className:"placeholder",children:"No Detail provided"})]}),Object(x.jsx)("div",{className:"pBtm"})]}),Object(x.jsxs)("div",{className:"messages",children:[Object(x.jsxs)("div",{className:"head",children:["Messages ",Object(x.jsx)("button",{onClick:function(){return k(!0)},children:"Reply"})]}),Object(x.jsx)("ul",{children:Object(n.a)(b.messages).reverse().map((function(e,t){return Object(x.jsxs)("li",{children:[Object(x.jsx)("div",{className:"user",children:Object(x.jsxs)("p",{className:"name",children:[e.user.name,Object(x.jsx)("span",{children:"\u2022"}),Object(x.jsx)("span",{className:"role",children:e.user.role}),Object(x.jsx)("span",{className:"date",children:Object(x.jsx)(d.r,{format:"hh:mm a, DD MMM, YYYY",children:e.createdAt})})]})}),Object(x.jsx)("p",{className:"message",children:e.message.body}),e.message.files.length>0&&Object(x.jsx)("div",{className:"thumbs",children:Object(x.jsx)(d.p,{links:e.message.files})})]},t)}))})]}),Object(x.jsx)(j.b,{open:y,head:!0,label:"Add reply to Ticket",setOpen:k,className:"ticketReplyFormModal",children:Object(x.jsx)(u.e,{_id:b._id,onSuccess:function(e){k(!1),h((function(t){return Object(s.a)(Object(s.a)({},t),{},{messages:e.messages})})),p(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return p(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.B,{}),Object(x.jsx)("h4",{children:"Reply has been submitted."})]})]}))}})}),Object(x.jsx)(j.b,{open:f,className:"msg",children:f})]}):Object(x.jsxs)("div",{className:"ticket loading",children:[Object(x.jsxs)("div",{className:"detail",children:[Object(x.jsxs)(o.b,{to:"/account/support/ticket",className:"back",children:[Object(x.jsx)(d.c,{}),"Go Back"]}),Object(x.jsxs)("ul",{className:"summery",children:[Object(x.jsx)("li",{className:"head",children:"Ticket Summery"}),Object(x.jsxs)("li",{children:[Object(x.jsx)("label",{}),Object(x.jsx)("p",{})]}),Object(x.jsxs)("li",{children:[Object(x.jsx)("label",{}),Object(x.jsx)("p",{})]}),Object(x.jsxs)("li",{children:[Object(x.jsx)("label",{}),Object(x.jsx)("p",{})]})]}),Object(x.jsxs)("ul",{className:"milestoneDetail",children:[Object(x.jsx)("li",{className:"head",children:"Milestone Detail"}),Object(x.jsxs)("li",{children:[Object(x.jsx)("label",{}),Object(x.jsx)("p",{})]}),Object(x.jsxs)("li",{children:[Object(x.jsx)("label",{}),Object(x.jsx)("p",{})]}),Object(x.jsxs)("li",{children:[Object(x.jsx)("label",{}),Object(x.jsx)("p",{})]})]}),Object(x.jsxs)("ul",{className:"transactionDetail",children:[Object(x.jsx)("li",{className:"head",children:"Transaction Detail"}),Object(x.jsxs)("li",{children:[Object(x.jsx)("label",{}),Object(x.jsx)("p",{})]}),Object(x.jsxs)("li",{children:[Object(x.jsx)("label",{}),Object(x.jsx)("p",{})]}),Object(x.jsxs)("li",{children:[Object(x.jsx)("label",{}),Object(x.jsx)("p",{})]})]})]}),Object(x.jsxs)("div",{className:"messages",children:[Object(x.jsx)("div",{className:"head",children:"Messages"}),Object(x.jsxs)("ul",{children:[Object(x.jsxs)("li",{children:[Object(x.jsxs)("div",{className:"user",children:[Object(x.jsx)("div",{className:"img"}),Object(x.jsx)("p",{className:"name"})]}),Object(x.jsx)("p",{className:"message",children:Object(x.jsx)("span",{})}),Object(x.jsxs)("div",{className:"thumbs",children:[Object(x.jsx)("div",{className:"img"}),Object(x.jsx)("div",{className:"img"})]})]}),Object(x.jsxs)("li",{children:[Object(x.jsxs)("div",{className:"user",children:[Object(x.jsx)("div",{className:"img"}),Object(x.jsx)("p",{className:"name"})]}),Object(x.jsx)("p",{className:"message",children:Object(x.jsx)("span",{})}),Object(x.jsxs)("div",{className:"thumbs",children:[Object(x.jsx)("div",{className:"img"}),Object(x.jsx)("div",{className:"img"}),Object(x.jsx)("div",{className:"img"})]})]})]})]}),Object(x.jsx)(j.b,{open:f,className:"msg",children:f})]})},ye=function(e){e.history,e.location,e.match;var t=Object(i.useState)(null),c=Object(a.a)(t,2),n=c[0],s=c[1],r=Object(i.useState)([]),u=Object(a.a)(r,2),b=u[0],h=u[1],O=Object(i.useState)(!1),m=Object(a.a)(O,2),f=m[0],p=m[1];return Object(i.useEffect)((function(){fetch("/api/faq").then((function(e){return e.json()})).then((function(e){"ok"===e.code&&h(e.faqs)}))}),[]),Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)(l.d,{children:[Object(x.jsx)(l.b,{path:"/account/support/ticket",component:ve}),Object(x.jsx)(l.b,{path:"/",children:Object(x.jsxs)("div",{className:"supportContainer",children:[Object(x.jsxs)("div",{className:"benner",children:[Object(x.jsxs)("div",{className:"clas",children:[Object(x.jsx)(o.b,{className:"ticketLink",to:"/account/support/ticket",children:"My Tickets"}),Object(x.jsx)("button",{className:"ticketLink",onClick:function(){return p(!0)},children:"Report Bug"})]}),Object(x.jsx)("h1",{children:"Support portal"}),Object(x.jsx)("p",{children:"Search for an answer or browse help topics to create a ticket"}),Object(x.jsxs)("form",{onSubmit:function(e){return e.preventDefault()},children:[Object(x.jsx)("input",{type:"text",required:!0,placeholder:"Eg: How does the Delivery pay Hold Works",onChange:function(e){fetch("/api/faq?q=".concat(e.target.value)).then((function(e){return e.json()})).then((function(e){"ok"===e.code&&h(e.faqs)}))}}),Object(x.jsx)("button",{type:"submit",children:Object(x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"31.336",height:"31.336",viewBox:"0 0 31.336 31.336",children:Object(x.jsx)("path",{id:"Path_1935","data-name":"Path 1935",d:"M25.4,22.708H23.98l-.5-.484a11.663,11.663,0,1,0-1.254,1.254l.484.5V25.4l8.958,8.94,2.67-2.67Zm-10.75,0a8.062,8.062,0,1,1,8.063-8.063A8.052,8.052,0,0,1,14.646,22.708Z",transform:"translate(-3 -3)",fill:"#707070"})})})]})]}),Object(x.jsxs)("div",{className:"content",children:[Object(x.jsxs)("div",{className:"faq",children:[Object(x.jsx)("p",{className:"label",children:"FAQs"}),Object(x.jsx)("ul",{children:b.map((function(e){return Object(x.jsxs)("li",{children:[Object(x.jsx)("h4",{children:e.ques}),Object(x.jsx)("p",{className:"ans",children:e.ans})]},e._id)}))})]}),Object(x.jsxs)("div",{className:"feedback",children:[Object(x.jsxs)("form",{children:[Object(x.jsx)("textarea",{required:!0}),Object(x.jsx)("button",{children:"Submit"})]}),Object(x.jsx)(o.b,{className:"feedbackLink",to:"/support/myFeedbacks",children:"Submitted Feedbacks"})]})]})]})})]}),Object(x.jsx)(j.b,{open:f,setOpen:p,className:"bugReport",label:"Report Bug",head:!0,children:Object(x.jsx)(pe,{onSuccess:function(){p(!1),s(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return s(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.B,{}),Object(x.jsx)("h4",{children:"Report has been submitted."})]})]}))}})}),Object(x.jsx)(j.b,{open:n,className:"msg",children:n})]})},ke=c(65),Ne=c(28),Ce=function(e){var t=e.status,c=e.onClick,n=Object(i.useRef)(),r=Object(i.useState)(0),l=Object(a.a)(r,2),o=l[0],u=l[1],h=Object(i.useState)(1),O=Object(a.a)(h,2),m=O[0],f=O[1],p=Object(i.useState)(20),v=Object(a.a)(p,2),g=v[0],y=(v[1],Object(i.useState)("")),k=Object(a.a)(y,2),N=k[0],C=(k[1],Object(i.useState)("")),S=Object(a.a)(C,2),w=S[0],M=(S[1],Object(i.useState)("")),_=Object(a.a)(M,2),D=_[0],P=_[1],F=Object(i.useState)({column:"createdAt",order:"dsc"}),A=Object(a.a)(F,2),T=A[0],R=(A[1],Object(i.useState)({startDate:new Date,endDate:new Date})),Y=Object(a.a)(R,2),q=Y[0],B=Y[1],I=Object(i.useState)(!1),E=Object(a.a)(I,2),L=E[0],H=E[1],V=Object(i.useState)({}),U=Object(a.a)(V,2),Z=U[0],G=U[1],W=Object(i.useState)([]),J=Object(a.a)(W,2),z=J[0],K=J[1],$=Object(i.useState)(!1),Q=Object(a.a)($,2),X=Q[0],ee=Q[1],te=Object(i.useState)([]),ce=Object(a.a)(te,2),ne=ce[0],se=ce[1],ae=Object(i.useState)(null),ie=Object(a.a)(ae,2),re=ie[0],le=ie[1];return Object(i.useEffect)((function(){var e=Object(d.K)({time:null===q||void 0===q?void 0:q.startDate,format:"YYYY-MM-DD"}),c=Object(d.K)({time:null===q||void 0===q?void 0:q.endDate.setHours(24,0,0,0),format:"YYYY-MM-DD"});fetch("/api/getOrders?".concat(new URLSearchParams(Object(s.a)(Object(s.a)(Object(s.a)(Object(s.a)({user:"buyer"},w&&{q:w}),{},{page:m,perPage:g,sort:T.column,order:T.order},L&&{dateFrom:e,dateTo:c}),N&&{type:N}),t&&{status:t})))).then((function(e){return e.json()})).then((function(e){"ok"===e.code&&(K(e.orders),u(e.total))})).catch((function(e){console.log(e),le(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return le(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Could not get orders."})]})]}))}))}),[N,w,m,g,L,t]),Object(i.useLayoutEffect)((function(){if(n.current){var e=n.current.getBoundingClientRect(),t=e.height,c=e.y,s=e.width,a=e.x;G({position:"fixed",top:t+c+4,right:window.innerWidth-a-s})}}),[]),Object(i.useEffect)((function(){X||se([])}),[X]),Object(i.useEffect)((function(){0===ne.length&&ee(!1)}),[ne]),Object(x.jsxs)("div",{className:"productContainer",children:[ne.length>0&&Object(x.jsx)("div",{className:"batchAction",children:Object(x.jsx)("button",{onClick:function(){return console.log("batch delete")},children:"Delete"})}),Object(x.jsxs)("table",{className:"table orders",children:[Object(x.jsx)("thead",{children:Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{children:"Order"}),Object(x.jsx)("th",{className:"date",children:"Purchase Date"}),Object(x.jsx)("th",{children:"Total"}),Object(x.jsx)("th",{children:"Status"}),Object(x.jsx)("th",{children:"Actions"})]})}),Object(x.jsxs)("tbody",{children:[z.map((function(e){return Object(x.jsx)(Se,{onClick:c,order:e,setOrders:K,selectAll:X,setBatch:se,batch:ne},e._id)})),0===z.length&&Object(x.jsx)("tr",{className:"placeholder",children:Object(x.jsx)("td",{children:"No order yet."})})]})]}),Object(x.jsx)(d.t,{total:o,btns:5,currentPage:m,perPage:g,setPage:f}),Object(x.jsx)(j.b,{className:"msg",open:re,children:re}),Object(x.jsx)(j.b,{open:D,onBackdropClick:function(){return P(!1)},className:"datePicker",backdropClass:"datePicker",style:Z,children:Object(x.jsx)(b.DateRange,{className:"dateRange",ranges:[q],onChange:function(e){B(e.range1),e.range1.endDate!==e.range1.startDate&&(P(!1),H(!0))}})})]})},Se=function(e){var t=e.order,c=e.setOrders,u=e.selectAll,b=e.setBatch,h=e.batch,O=e.onClick,m=Object(i.useRef)(),f=Object(i.useRef)(),p=Object(l.g)(),v=(Object(i.useContext)(r.d).user,Object(i.useState)(u||!1)),g=Object(a.a)(v,2),y=g[0],k=g[1],N=Object(i.useState)(!1),C=Object(a.a)(N,2),S=(C[0],C[1],Object(i.useState)(!1)),w=Object(a.a)(S,2),M=w[0],_=w[1],D=function(){fetch("/api/cancelOrder",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({_id:t._id})}).then((function(e){return e.json()})).then((function(e){"ok"===e.code?c((function(c){return c.map((function(c){var n;return c._id===t._id?Object(s.a)(Object(s.a)({},c),{},{status:null===(n=e.order)||void 0===n?void 0:n.status}):c}))})):_(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return _(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Could not cancel order. Please try again."})]})]}))})).catch((function(e){console.log(e),_(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return _(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Could not cancel order. Make sure you're online"})]})]}))}))},P=function(){fetch("/api/requestCancellation",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({_id:t._id})}).then((function(e){return e.json()})).then((function(e){"ok"===e.code?c((function(c){return c.map((function(c){var n;return c._id===t._id?Object(s.a)(Object(s.a)({},c),{},{status:null===(n=e.order)||void 0===n?void 0:n.status}):c}))})):_(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return _(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Could not cancel order. Please try again."})]})]}))})).catch((function(e){console.log(e),_(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return _(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Could not cancel order. Make sure you're online"})]})]}))}))};return Object(i.useEffect)((function(){k(u)}),[u]),Object(i.useEffect)((function(){b(y?function(e){return[].concat(Object(n.a)(e),[t._id])}:function(e){return e.filter((function(e){return e!==t._id}))})}),[y]),Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("tr",{className:"order ".concat(y?"selected":""),onClick:function(e){e.nativeEvent.path.includes(m.current)||e.nativeEvent.path.includes(f.current)||h.length>0||null===O||void 0===O||O(t._id)},children:[Object(x.jsx)("td",{children:t._id}),Object(x.jsx)("td",{className:"date",children:Object(x.jsx)(d.r,{format:"DD MMM YYYY",children:t.createdAt})}),Object(x.jsxs)("td",{children:["\u20b9",t.total]}),Object(x.jsx)("td",{children:t.status}),Object(x.jsx)("td",{ref:m,children:0===h.length&&Object(x.jsxs)(d.a,{icon:Object(x.jsx)(d.g,{}),children:[Object(x.jsx)(o.b,{to:"".concat(p.location.pathname).concat(t._id),children:"View Detail"}),"pending"===t.status&&Object(x.jsx)(o.b,{to:"#",onClick:function(e){Object(j.a)({label:"Order Cancellation",question:"You sure want to cancel this order?",callback:D})},children:"Cancel order"}),"approved"===t.status&&Object(x.jsx)(o.b,{to:"#",onClick:function(e){Object(j.a)({label:"Order Cancellation",question:"You sure want to request cancellation for this order?",callback:P})},children:"Request Cancellation"})]})})]}),Object(x.jsx)(j.b,{className:"msg",open:M,children:M})]})},we=function(e){var t,c,l,u=e.history,b=e.match,h=Object(i.useContext)(r.d).userType,O=Object(i.useState)(null),m=Object(a.a)(O,2),f=m[0],p=m[1],v=Object(i.useState)(null),g=Object(a.a)(v,2),y=g[0],k=g[1],N=Object(i.useState)(!1),C=Object(a.a)(N,2),S=C[0],w=C[1],M=Object(i.useState)(!1),_=Object(a.a)(M,2),D=_[0],P=_[1],F=Object(i.useState)(!1),A=Object(a.a)(F,2),T=A[0],R=A[1];Object(i.useRef)();return Object(i.useEffect)((function(){fetch("/api/singleOrder?_id=".concat(b.params._id)).then((function(e){return e.json()})).then((function(e){"ok"===e.code?k(e.order):p(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return p(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Orders does not exist."})]})]}))})).catch((function(e){console.log(e),p(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return p(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Could not get order. Make sure you're online."})]})]}))}))}),[]),Object(i.useEffect)((function(){if("delivered"===(null===y||void 0===y?void 0:y.status)&&(null===y||void 0===y?void 0:y.refundable)){var e=0;switch(y.refundable){case"Upto 24 Hours After Delivery":e=1;break;case"Upto 7 Days After Delivery":e=7;break;case"Upto 15 Days After Delivery":e=15;break;default:return}var t=new Date((new Date).getTime()+864e5*e);new Date<t?P(t):P(null)}else P(null)}),[y]),y?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("div",{className:"actions",children:[Object(x.jsxs)(o.b,{to:"".concat(u.location.pathname.replace(b.params._id,"")?u.location.pathname.replace(b.params._id,""):"seller"===h?"/account/orders":"/account/orders/current"),className:"back",children:[Object(x.jsx)(d.c,{}),"Back"]}),D&&Object(x.jsx)("button",{onClick:function(){return R(!0)},children:"Issue refund"})]}),Object(x.jsxs)("div",{className:"singleOrder",children:[Object(x.jsxs)("div",{className:"summery",children:[Object(x.jsx)("h3",{children:"Order Summery"}),Object(x.jsxs)("ul",{children:[Object(x.jsxs)("li",{children:[Object(x.jsx)("label",{children:"Seller"}),Object(x.jsx)(d.F,{user:y.seller})]}),Object(x.jsxs)("li",{children:[Object(x.jsx)("label",{children:"Order ID"}),y._id]}),Object(x.jsxs)("li",{children:[Object(x.jsx)("label",{children:"Status"}),y.status]}),Object(x.jsxs)("li",{children:[Object(x.jsx)("label",{children:"Submitted at"}),Object(x.jsx)(d.r,{format:"DD MMM YYYY, hh:mma",children:y.createdAt})]}),"delivered"===y.status&&Object(x.jsxs)("li",{children:[Object(x.jsx)("label",{children:"Delivered at"}),Object(x.jsx)(d.r,{format:"DD MMM YYYY, hh:mm a",children:y.deliveredAt})]}),Object(x.jsxs)("li",{children:[Object(x.jsx)("label",{children:"Refundable"}),y.refundable||"N/A"]}),D&&Object(x.jsxs)("li",{children:[Object(x.jsx)("label",{children:"Refund till"}),Object(x.jsx)(d.r,{format:"DD MMM YYYY, hh:mm a",children:D})]}),Object(x.jsx)("li",{}),Object(x.jsxs)("li",{className:"devide",children:[Object(x.jsx)("label",{children:"Delivery Address"}),Object(x.jsx)("span",{})]}),Object(x.jsx)(x.Fragment,{children:Object.entries(y.deliveryDetail).map((function(e,t){var c=Object(a.a)(e,2),n=c[0],s=c[1];return"deliveryTime"===n?Object(x.jsxs)("li",{children:[Object(x.jsx)("label",{children:"Delivery date"}),y.deliveryDetail.deliveryTime?Object(x.jsx)(d.r,{format:"DD MMM, YYYY hh:mma",children:y.deliveryDetail.deliveryTime}):"N/A"]},t):Object(x.jsxs)("li",{children:[Object(x.jsx)("label",{children:n}),s]},t)}))})]})]}),Object(x.jsxs)("div",{className:"products",children:[Object(x.jsx)("h3",{children:"Products"}),Object(x.jsx)("ul",{children:y.products.map((function(e,t){var c=e.product,n=e.qty;return Object(x.jsxs)("li",{children:[Object(x.jsx)(d.n,{src:c.images[0]||"/open_box.png"}),Object(x.jsxs)("div",{className:"detail",children:[Object(x.jsx)("p",{children:c.name}),Object(x.jsxs)("p",{className:"qty",children:["QTY: ",n]})]}),Object(x.jsxs)("div",{className:"price",children:[Object(x.jsxs)("span",{children:[Object(d.J)({product:c,gst:!0})," x ",n]}),"\u20b9",Object(d.J)({product:c,gst:!0})*n]})]},t)}))}),Object(x.jsxs)("div",{className:"total",children:[Object(x.jsxs)("div",{className:"data",children:[Object(x.jsx)("label",{children:"Total"}),"\u20b9",y.products.reduce((function(e,t){return e+Object(d.J)({product:t.product,gst:!0})*t.qty}),0)]}),Object(x.jsx)("hr",{}),Object(x.jsxs)("div",{className:"data",children:[Object(x.jsx)("label",{children:"Shipping"}),"\u20b9",y.shippingCost||"N/A"]}),Object(x.jsxs)("div",{className:"data",children:[Object(x.jsxs)("label",{children:["Delivery Pay fee ",y.fee,"%"]}),"\u20b9",(y.total-y.total/(y.fee+100)*100).fix()]}),Object(x.jsx)("hr",{}),Object(x.jsxs)("div",{className:"data",children:[Object(x.jsx)("label",{children:"Grand Total"}),"\u20b9",y.total]})]})]}),Object(x.jsxs)("div",{className:"milestones",children:[Object(x.jsx)("h3",{children:"Milestones"}),Object(x.jsx)("p",{className:"subtitle",children:"Click to view milestone detail."}),Object(x.jsxs)("table",{cellSpacing:0,cellPadding:0,children:[Object(x.jsx)("thead",{children:Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"Date"}),Object(x.jsx)("td",{children:"Descrption"}),Object(x.jsx)("td",{children:"Amount"}),Object(x.jsx)("td",{children:"Status"})]})}),Object(x.jsxs)("tbody",{children:[y.milestones.map((function(e){return Object(x.jsxs)("tr",{onClick:function(){return u.push("/account/hold?q=".concat(e._id))},children:[Object(x.jsx)("td",{children:Object(x.jsx)(d.r,{format:"DD MMM YYYY, hh:mma",children:e.createdAt})}),Object(x.jsx)("td",{children:e.dscr}),Object(x.jsxs)("td",{children:["\u20b9",e.amount]}),Object(x.jsx)("td",{children:e.status})]},e._id)})),0===y.milestones.length&&Object(x.jsx)("tr",{className:"placeholdert",children:Object(x.jsx)("td",{children:"Nothing yet."})})]})]})]}),Object(x.jsxs)("div",{className:"delivery",children:[Object(x.jsx)("h3",{children:"Proof of delivery"}),(null===(t=y.files)||void 0===t?void 0:t.length)>0?Object(x.jsx)("div",{className:"thumbs",children:Object(x.jsx)(d.p,{links:y.files})}):Object(x.jsx)(x.Fragment,{children:"No files added."})]}),Object(x.jsxs)("section",{className:"terms",children:[Object(x.jsx)("h3",{children:"Return Policy Terms"}),Object(x.jsxs)("ul",{children:[null===(c=y.terms)||void 0===c?void 0:c.map((function(e,t){return Object(x.jsx)("li",{children:e},t)})),!(null===(l=y.terms)||void 0===l?void 0:l.length)&&Object(x.jsx)("li",{children:"No terms has been set by the seller yet."})]})]})]}),Object(x.jsx)(j.b,{head:!0,label:"Create Milestone",setOpen:w,className:"milestoneRequest",open:S,children:Object(x.jsx)(Mt,{action:"create",definedAmount:y.total,client:y.seller,order:y._id,onSuccess:function(e){w(!1),p(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return p(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.B,{}),Object(x.jsxs)("h4",{className:"amount",children:["\u20b9",null===e||void 0===e?void 0:e.amount]}),Object(x.jsx)("h4",{children:"Milestone has been created"})]}),Object(x.jsx)(o.b,{to:"/account/hold",onClick:function(){return p(null)},children:"Check your Delivery pay Hold"})]})),k((function(t){return Object(s.a)(Object(s.a)({},t),{},{milestones:[].concat(Object(n.a)(t.milestones),[e])})}))}})}),Object(x.jsx)(j.b,{open:T,head:!0,label:"Issue Refund",setOpen:R,className:"issueRefund",children:Object(x.jsx)(Me,{order:y,onSuccess:function(e){R(!1),k((function(e){return Object(s.a)(Object(s.a)({},e),{},{status:"refundPending"})})),p(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return p(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.B,{}),Object(x.jsx)("h4",{children:"Refund has been issued."})]})]}))}})}),Object(x.jsx)(j.b,{className:"msg",open:f,children:f})]}):Object(x.jsx)(x.Fragment,{children:"Loading"})},Me=function(e){var t=e.order,c=e.onSuccess,n=Object(i.useState)(null),s=Object(a.a)(n,2),r=s[0],l=s[1],o=Object(i.useState)(!1),u=Object(a.a)(o,2),b=u[0],h=u[1],O=Object(i.useState)(""),m=Object(a.a)(O,2),f=m[0],p=m[1],v=Object(i.useState)(""),g=Object(a.a)(v,2),y=g[0],k=g[1],N=Object(i.useState)([]),C=Object(a.a)(N,2),S=C[0],w=C[1],M=function(){var e=Object(q.a)(Y.a.mark((function e(n){var s;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),h(!0),!S.length){e.next=8;break}return e.next=5,Object(d.E)({files:S,setMsg:l});case 5:e.t0=e.sent,e.next=9;break;case 8:e.t0=[];case 9:s=e.t0,fetch("/api/issueRefund",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({order:t._id,issue:f,dscr:y,files:s})}).then((function(e){return e.json()})).then((function(e){h(!1),"ok"===e.code?null===c||void 0===c||c(e.refund):l(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return l(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Refund could not be issued. Try again."})]})]}))})).catch((function(e){h(!1),console.log(e),l(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return l(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Refund could not be issued. Make sure you're online."})]})]}))}));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("form",{onSubmit:M,children:[Object(x.jsxs)("section",{children:[Object(x.jsx)("label",{children:"Issue"}),Object(x.jsx)("input",{type:"text",required:!0,value:f,onChange:function(e){return p(e.target.value)}})]}),Object(x.jsxs)("section",{children:[Object(x.jsx)("label",{children:"Descrption"}),Object(x.jsx)(B.a,{required:!0,value:y,onChange:function(e){return k(e.target.value)}})]}),Object(x.jsxs)("section",{className:"images",children:[Object(x.jsx)("label",{children:"Upload relevant files"}),Object(x.jsx)(d.k,{accept:"image/*, video/*, audio/*",multiple:!0,onChange:function(e){return w(e)}})]}),Object(x.jsx)("section",{className:"btns",children:Object(x.jsx)("button",{className:"submit",children:"Submit"})})]}),b&&Object(x.jsx)("div",{className:"spinnerContainer",children:Object(x.jsx)("div",{className:"spinner"})}),Object(x.jsx)(j.b,{className:"msg",open:r,children:r})]})},_e=function(e){e.history,e.location;var t=Object(i.useContext)(r.d).userType,c=Object(i.useRef)(),n=Object(i.useState)(0),l=Object(a.a)(n,2),o=l[0],u=l[1],h=Object(i.useState)(1),O=Object(a.a)(h,2),m=O[0],f=O[1],p=Object(i.useState)(20),v=Object(a.a)(p,2),g=v[0],y=v[1],k=Object(i.useState)(""),N=Object(a.a)(k,2),C=N[0],S=N[1],w=Object(i.useState)(""),M=Object(a.a)(w,2),_=M[0],D=M[1],P=Object(i.useState)(""),F=Object(a.a)(P,2),A=F[0],T=F[1],R=Object(i.useState)({column:"createdAt",order:"dsc"}),Y=Object(a.a)(R,2),q=Y[0],B=(Y[1],Object(i.useState)({startDate:new Date,endDate:new Date})),I=Object(a.a)(B,2),E=I[0],L=I[1],H=Object(i.useState)(!1),V=Object(a.a)(H,2),U=V[0],Z=V[1],G=Object(i.useState)({}),W=Object(a.a)(G,2),J=W[0],z=W[1],K=Object(i.useState)([]),$=Object(a.a)(K,2),Q=$[0],X=$[1],ee=Object(i.useState)(!1),te=Object(a.a)(ee,2),ce=te[0],ne=te[1],se=Object(i.useState)([]),ae=Object(a.a)(se,2),ie=ae[0],re=ae[1],le=Object(i.useState)(null),oe=Object(a.a)(le,2),je=oe[0],de=oe[1];return Object(i.useEffect)((function(){var e=Object(d.K)({time:null===E||void 0===E?void 0:E.startDate,format:"YYYY-MM-DD"}),c=Object(d.K)({time:null===E||void 0===E?void 0:E.endDate.setHours(24,0,0,0),format:"YYYY-MM-DD"});fetch("/api/getRefunds?".concat(new URLSearchParams(Object(s.a)(Object(s.a)(Object(s.a)({user:t},C&&{q:C}),{},{page:m,perPage:g,sort:q.column,order:q.order},U&&{dateFrom:e,dateTo:c}),_&&{status:_})))).then((function(e){return e.json()})).then((function(e){"ok"===e.code&&(X(e.refunds),u(e.total))})).catch((function(e){console.log(e),de(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return de(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Could not get orders."})]})]}))}))}),[C,m,g,U,_]),Object(i.useLayoutEffect)((function(){if(c.current){var e=c.current.getBoundingClientRect(),t=e.height,n=e.y,s=e.width,a=e.x;z({position:"fixed",top:t+n+4,right:window.innerWidth-a-s})}}),[]),Object(i.useEffect)((function(){ce||re([])}),[ce]),Object(i.useEffect)((function(){0===ie.length&&ne(!1)}),[ie]),Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"benner",children:Object(x.jsx)("p",{children:"My Refunds"})}),Object(x.jsxs)("div",{className:"filters",children:[Object(x.jsxs)("section",{children:[Object(x.jsx)("label",{children:"Total:"}),o]}),Object(x.jsxs)("section",{children:[Object(x.jsx)("label",{children:"Per Page:"}),Object(x.jsx)(d.h,{defaultValue:0,options:[{label:"20",value:20},{label:"30",value:30},{label:"50",value:50}],onChange:function(e){return y(e.value)}})]}),Object(x.jsxs)("section",{className:"search",children:[Object(x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"23",height:"23",viewBox:"0 0 23 23",children:Object(x.jsx)("path",{id:"Icon_ionic-ios-search","data-name":"Icon ionic-ios-search",d:"M27.23,25.828l-6.4-6.455a9.116,9.116,0,1,0-1.384,1.4L25.8,27.188a.985.985,0,0,0,1.39.036A.99.99,0,0,0,27.23,25.828ZM13.67,20.852a7.2,7.2,0,1,1,5.091-2.108A7.155,7.155,0,0,1,13.67,20.852Z",transform:"translate(-4.5 -4.493)",fill:"#707070",opacity:"0.74"})}),Object(x.jsx)("input",{value:C,onChange:function(e){return S(e.target.value)},placeholder:"Search for Seller"}),C&&Object(x.jsx)("button",{onClick:function(){return S("")},children:Object(x.jsx)(d.G,{})})]}),Object(x.jsxs)("section",{className:"category",children:[Object(x.jsx)("label",{children:"Status:"}),Object(x.jsx)(d.h,{defaultValue:0,options:[{label:"All",value:""},{label:"Pending",value:"pending"},{label:"Approved",value:"approved"},{label:"Product Sent",value:"productSent"},{label:"Product Recieved",value:"productRecieved"},{label:"Resolved",value:"resolved"}],onChange:function(e){return D(e.value)}})]}),Object(x.jsxs)("section",{className:"date ".concat(U?"open":""),ref:c,onClick:function(){return T(!0)},children:[Object(x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"30.971",height:"30.971",viewBox:"0 0 30.971 30.971",children:Object(x.jsx)("path",{id:"Path_299","data-name":"Path 299",d:"M3.992,2.42H6.775V.968a.968.968,0,1,1,1.936,0V2.42H22.26V.968a.968.968,0,1,1,1.936,0V2.42h2.783a4,4,0,0,1,3.992,3.992V26.978a4,4,0,0,1-3.992,3.992H3.992A4,4,0,0,1,0,26.978V6.412A4,4,0,0,1,3.992,2.42ZM26.978,4.355H24.2v.968a.968.968,0,1,1-1.936,0V4.355H8.71v.968a.968.968,0,1,1-1.936,0V4.355H3.992A2.059,2.059,0,0,0,1.936,6.412v2.3h27.1v-2.3A2.059,2.059,0,0,0,26.978,4.355ZM3.992,29.035H26.978a2.059,2.059,0,0,0,2.057-2.057V10.646H1.936V26.978A2.059,2.059,0,0,0,3.992,29.035Z",fill:"#336cf9"})}),U&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("div",{className:"dates",children:[Object(x.jsxs)("p",{children:["From:"," ",Object(x.jsx)(d.r,{format:"DD MMM, YYYY",children:E.startDate})]}),Object(x.jsxs)("p",{children:["To: ",Object(x.jsx)(d.r,{format:"DD MMM, YYYY",children:E.endDate})]})]}),Object(x.jsx)("button",{className:"clearDateFilter",onClick:function(){L({startDate:new Date,endDate:new Date}),Z(!1)},children:Object(x.jsx)(d.G,{})})]})]})]}),ie.length>0&&Object(x.jsx)("div",{className:"batchAction",children:Object(x.jsx)("button",{onClick:function(){return console.log("batch delete")},children:"Delete"})}),Object(x.jsxs)("table",{className:"table refunds",children:[Object(x.jsx)("thead",{children:Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{className:"date",children:"Date"}),Object(x.jsx)("th",{children:"Seller"}),Object(x.jsx)("th",{children:"QTY"}),Object(x.jsx)("th",{children:"Status"}),Object(x.jsx)("th",{children:"Total Price"})]})}),Object(x.jsxs)("tbody",{children:[Q.map((function(e){return Object(x.jsx)(De,{refund:e,setRefunds:X,selectAll:ce,setBatch:re,batch:ie},e._id)})),0===Q.length&&Object(x.jsx)("tr",{className:"placeholder",children:Object(x.jsx)("td",{children:"No product yet."})})]})]}),Object(x.jsx)(d.t,{total:o,btns:5,currentPage:m,perPage:g,setPage:f}),Object(x.jsx)(j.b,{className:"msg",open:je,children:je}),Object(x.jsx)(j.b,{open:A,onBackdropClick:function(){return T(!1)},className:"datePicker",backdropClass:"datePicker",style:J,children:Object(x.jsx)(b.DateRange,{className:"dateRange",ranges:[E],onChange:function(e){L(e.range1),e.range1.endDate!==e.range1.startDate&&(T(!1),Z(!0))}})})]})},De=function(e){var t,c=e.refund,s=(e.setRefunds,e.selectAll),o=e.setBatch,u=(e.batch,Object(l.g)()),b=(Object(i.useContext)(r.d).user,Object(i.useState)(s||!1)),h=Object(a.a)(b,2),O=h[0],m=h[1],f=Object(i.useState)(!1),p=Object(a.a)(f,2),v=(p[0],p[1],Object(i.useState)(!1)),g=Object(a.a)(v,2),y=g[0];g[1];return Object(i.useEffect)((function(){m(s)}),[s]),Object(i.useEffect)((function(){o(O?function(e){return[].concat(Object(n.a)(e),[c._id])}:function(e){return e.filter((function(e){return e!==c._id}))})}),[O]),Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("tr",{className:"refund ".concat(O?"selected":""),onClick:function(){return u.push("/account/myShopping/refunds/".concat(c._id))},children:[Object(x.jsx)("td",{className:"date",children:Object(x.jsx)(d.r,{format:"DD MMM YYYY, hh:mm a",children:c.createdAt})}),Object(x.jsx)("td",{children:Object(x.jsx)(d.F,{user:c.seller})}),Object(x.jsx)("td",{children:null===(t=c.order)||void 0===t?void 0:t.products.reduce((function(e,t){return e+t.qty}),0)}),Object(x.jsx)("td",{children:c.status}),Object(x.jsxs)("td",{children:["\u20b9",c.order.total]})]}),Object(x.jsx)(j.b,{className:"msg",open:y,children:y})]})},Pe=function(e){var t,c,l,u=e.history,b=e.match,h=Object(i.useContext)(r.d).userType,O=Object(i.useState)(null),m=Object(a.a)(O,2),f=m[0],p=m[1],v=Object(i.useState)(null),g=Object(a.a)(v,2),y=g[0],k=g[1],N=Object(i.useState)(null),C=Object(a.a)(N,2),S=C[0],w=C[1],M=Object(i.useState)(!1),_=Object(a.a)(M,2),D=_[0],P=_[1],F=Object(i.useState)(!1),A=Object(a.a)(F,2),T=A[0],R=A[1],B=(Object(i.useRef)(),function(){var e=Object(q.a)(Y.a.mark((function e(t){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("/api/updateRefund",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object(s.a)(Object(s.a)({},t),{},{_id:y._id}))}).then((function(e){return e.json()})).then((function(e){if("ok"===e.code)return e.order;p(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return p(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Refund request does not exist."})]})]}))})).catch((function(e){console.log(e),p(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return p(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Could not update refund. Make sure you're online."})]})]}))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return Object(i.useEffect)((function(){fetch("/api/singleRefund?_id=".concat(b.params._id)).then((function(e){return e.json()})).then((function(e){"ok"===e.code?(w(e.refund.order),k(e.refund)):p(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return p(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Refund does not exist."})]})]}))})).catch((function(e){console.log(e),p(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return p(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Could not get Refund. Make sure you're online."})]})]}))}))}),[]),Object(i.useEffect)((function(){if(null===S||void 0===S?void 0:S.refundable){var e=0;switch(S.refundable){case"Upto 24 Hours After Delivery":e=1;break;case"Upto 7 Days After Delivery":e=7;break;case"Upto 15 Days After Delivery":e=15;break;default:return}var t=new Date((new Date).getTime()+864e5*e);new Date<t?R(t):R(null)}else R(null)}),[y]),y?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("div",{className:"actions",children:[Object(x.jsxs)(o.b,{to:"/account/".concat("seller"===h?"myShop":"myShopping","/refunds"),className:"back",children:[Object(x.jsx)(d.c,{}),"Back"]}),"approved"===y.status&&Object(x.jsx)("button",{onClick:function(){return Object(j.a)({label:"Product Shipped",question:"Did you sent the product to seller?",callback:function(){B({status:"productSent"}).then((function(e){k((function(e){return Object(s.a)(Object(s.a)({},e),{},{status:"productSent"})}))}))}})},children:"Product Sent"}),"productRecieved"===y.status&&Object(x.jsx)("button",{onClick:function(){return Object(j.a)({label:"Refund Resolved",question:"You sure want to mark this refund resolved?",callback:function(){B({status:"resolved"}).then((function(e){k((function(e){return Object(s.a)(Object(s.a)({},e),{},{status:"resolved"})}))}))}})},children:"Mark as Resolved"})]}),Object(x.jsxs)("div",{className:"singleOrder",children:[Object(x.jsxs)("div",{className:"summery",children:[Object(x.jsx)("h3",{children:"Summery"}),Object(x.jsxs)("ul",{children:[Object(x.jsxs)("li",{className:"devide",children:[Object(x.jsx)("label",{children:"Order"}),Object(x.jsx)("span",{})]}),Object(x.jsxs)("li",{children:[Object(x.jsx)("label",{children:"Seller"}),Object(x.jsx)(d.F,{user:S.seller})]}),Object(x.jsxs)("li",{children:[Object(x.jsx)("label",{children:"Order ID"}),S._id]}),Object(x.jsxs)("li",{children:[Object(x.jsx)("label",{children:"Status"}),S.status]}),Object(x.jsxs)("li",{children:[Object(x.jsx)("label",{children:"Ordered at"}),Object(x.jsx)(d.r,{format:"DD MMM YYYY, hh:mma",children:S.createdAt})]}),Object(x.jsxs)("li",{children:[Object(x.jsx)("label",{children:"Delivered at"}),Object(x.jsx)(d.r,{format:"DD MMM YYYY, hh:mm a",children:S.deliveredAt})]}),Object(x.jsxs)("li",{children:[Object(x.jsx)("label",{children:"Proof of delivery"}),(null===(t=S.files)||void 0===t?void 0:t.length)>0?Object(x.jsx)("div",{className:"thumbs",children:Object(x.jsx)(d.p,{links:S.files})}):Object(x.jsx)(x.Fragment,{children:"No files added."})]}),Object(x.jsxs)("li",{children:[Object(x.jsx)("label",{children:"Refundable"}),S.refundable||"N/A"]}),T&&Object(x.jsxs)("li",{children:[Object(x.jsx)("label",{children:"Refund till"}),Object(x.jsx)(d.r,{format:"DD MMM YYYY, hh:mm a",children:T})]}),Object(x.jsx)("li",{}),Object(x.jsxs)("li",{className:"devide",children:[Object(x.jsx)("label",{children:"Refund"}),Object(x.jsx)("span",{})]}),Object(x.jsxs)("li",{children:[Object(x.jsx)("label",{children:"Refund ID"}),y._id]}),Object(x.jsxs)("li",{children:[Object(x.jsx)("label",{children:"Status"}),y.status]}),Object(x.jsxs)("li",{children:[Object(x.jsx)("label",{children:"Submitted at"}),Object(x.jsx)(d.r,{format:"DD MMM YYYY, hh:mma",children:y.createdAt})]}),Object(x.jsxs)("li",{children:[Object(x.jsx)("label",{children:"Issue"}),y.issue]}),Object(x.jsxs)("li",{children:[Object(x.jsx)("label",{children:"Descrption"}),y.dscr]}),Object(x.jsxs)("li",{children:[Object(x.jsx)("label",{children:"Images"}),Object(x.jsx)("div",{className:"thumbs",children:y.files.length?Object(x.jsx)(d.p,{links:y.files}):Object(x.jsx)(x.Fragment,{children:"No Images has been provided."})})]}),Object(x.jsx)("li",{}),Object(x.jsxs)("li",{className:"devide",children:[Object(x.jsx)("label",{children:"Delivery Address"}),Object(x.jsx)("span",{})]}),Object(x.jsx)(x.Fragment,{children:Object.entries(S.deliveryDetail).map((function(e,t){var c=Object(a.a)(e,2),n=c[0],s=c[1];return"deliveryTime"===n?Object(x.jsxs)("li",{children:[Object(x.jsx)("label",{children:"Delivery date"}),S.deliveryDetail.deliveryTime?Object(x.jsx)(d.r,{format:"DD MMM, YYYY hh:mma",children:S.deliveryDetail.deliveryTime}):"N/A"]},t):Object(x.jsxs)("li",{children:[Object(x.jsx)("label",{children:n}),s]},t)}))})]})]}),Object(x.jsxs)("div",{className:"products",children:[Object(x.jsx)("h3",{children:"Products"}),Object(x.jsx)("ul",{children:S.products.map((function(e,t){var c=e.product,n=e.qty;return Object(x.jsxs)("li",{children:[Object(x.jsx)(d.n,{src:c.images[0]||"/open_box.png"}),Object(x.jsxs)("div",{className:"detail",children:[Object(x.jsx)("p",{children:c.name}),Object(x.jsxs)("p",{className:"qty",children:["QTY: ",n]})]}),Object(x.jsxs)("div",{className:"price",children:[Object(x.jsxs)("span",{children:[Object(d.J)({product:c,gst:!0})," x ",n]}),"\u20b9",Object(d.J)({product:c,gst:!0})*n]})]},t)}))}),Object(x.jsx)("div",{className:"total",children:Object(x.jsxs)("div",{className:"data",children:[Object(x.jsx)("label",{children:"Total"}),"\u20b9",S.total-S.shippingCost]})})]}),Object(x.jsxs)("div",{className:"milestones",children:[Object(x.jsxs)("h3",{children:["Milestones",("approved"===y.status||"shipped"===y.status||"delivered"===y.status)&&Object(x.jsx)("button",{onClick:function(){return P(!0)},children:"Request Milestone"})]}),"pending"==y.status?Object(x.jsx)("p",{children:"You can create milestones after seller accepts your order."}):Object(x.jsxs)("table",{cellSpacing:0,cellPadding:0,children:[Object(x.jsx)("thead",{children:Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"Date"}),Object(x.jsx)("td",{children:"Descrption"}),Object(x.jsx)("td",{children:"Amount"}),Object(x.jsx)("td",{children:"Status"})]})}),Object(x.jsxs)("tbody",{children:[y.milestones.map((function(e){return Object(x.jsxs)("tr",{onClick:function(){return u.push("/account/hold?q=".concat(e._id))},children:[Object(x.jsx)("td",{children:Object(x.jsx)(d.r,{format:"DD MMM YYYY, hh:mma",children:e.createdAt})}),Object(x.jsx)("td",{children:e.dscr}),Object(x.jsxs)("td",{children:["\u20b9",e.amount]}),Object(x.jsx)("td",{children:e.status})]},e._id)})),0===y.milestones.length&&Object(x.jsx)("tr",{className:"placeholdert",children:Object(x.jsx)("td",{children:"Nothing yet."})})]})]})]}),Object(x.jsxs)("section",{className:"terms",children:[Object(x.jsx)("h3",{children:"Return Policy Terms"}),Object(x.jsxs)("ul",{children:[null===(c=S.terms)||void 0===c?void 0:c.map((function(e,t){return Object(x.jsx)("li",{children:e},t)})),!(null===(l=S.terms)||void 0===l?void 0:l.length)&&Object(x.jsx)("li",{children:"No terms has been set by the seller yet."})]})]})]}),Object(x.jsx)(j.b,{head:!0,label:"Request Milestone",setOpen:P,className:"milestoneRequest",open:D,children:Object(x.jsx)(Mt,{action:"request",definedAmount:S.total-S.shippingCost,client:S.seller,refund:y._id,onSuccess:function(e){P(!1),p(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return p(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.B,{}),Object(x.jsxs)("h4",{className:"amount",children:["\u20b9",null===e||void 0===e?void 0:e.amount]}),Object(x.jsx)("h4",{children:"Milestone has been requested"})]}),Object(x.jsx)(o.b,{to:"/account/hold",onClick:function(){return p(null)},children:"Check your Delivery pay Hold"})]})),k((function(t){return Object(s.a)(Object(s.a)({},t),{},{milestones:[].concat(Object(n.a)(t.milestones),[e])})}))}})}),Object(x.jsx)(j.b,{className:"msg",open:f,children:f})]}):Object(x.jsx)(x.Fragment,{children:"Loading"})},Fe=function(e){var t=e.status,c=e.onClick,n=Object(i.useState)(0),r=Object(a.a)(n,2),l=r[0],o=r[1],u=Object(i.useState)(1),b=Object(a.a)(u,2),h=b[0],O=b[1],m=Object(i.useState)(20),f=Object(a.a)(m,2),p=f[0],v=(f[1],Object(i.useState)("")),g=Object(a.a)(v,2),y=g[0],k=(g[1],Object(i.useState)("")),N=Object(a.a)(k,2),C=(N[0],N[1],Object(i.useState)({column:"createdAt",order:"dsc"})),S=Object(a.a)(C,2),w=S[0],M=(S[1],Object(i.useState)([])),_=Object(a.a)(M,2),D=_[0],P=_[1],F=Object(i.useState)(!1),A=Object(a.a)(F,2),T=A[0],R=A[1],Y=Object(i.useState)([]),q=Object(a.a)(Y,2),B=q[0],I=q[1],E=Object(i.useState)(null),L=Object(a.a)(E,2),H=L[0],V=L[1];return Object(i.useEffect)((function(){fetch("/api/getDisputes?".concat(new URLSearchParams(Object(s.a)(Object(s.a)({},y&&{q:y}),{},{page:h,perPage:p,sort:w.column,order:w.order},t&&{status:t})))).then((function(e){return e.json()})).then((function(e){"ok"===e.code&&(P(e.disputes),o(e.total))})).catch((function(e){console.log(e),V(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return V(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Could not get orders."})]})]}))}))}),[y,h,p,t]),Object(i.useEffect)((function(){T||I([])}),[T]),Object(i.useEffect)((function(){0===B.length&&R(!1)}),[B]),Object(x.jsxs)("div",{className:"productContainer",children:[B.length>0&&Object(x.jsx)("div",{className:"batchAction",children:Object(x.jsx)("button",{onClick:function(){return console.log("batch delete")},children:"Delete"})}),Object(x.jsxs)("table",{className:"table disuptes",children:[Object(x.jsx)("thead",{children:Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{className:"date",children:"Raised at"}),Object(x.jsx)("th",{children:"User"}),Object(x.jsx)("th",{children:"Issue"}),Object(x.jsx)("th",{children:"Status"}),Object(x.jsx)("th",{children:"Actions"})]})}),Object(x.jsxs)("tbody",{children:[D.map((function(e){return Object(x.jsx)(Ae,{onClick:c,dispute:e,setDisputes:P},e._id)})),0===D.length&&Object(x.jsx)("tr",{className:"placeholder",children:Object(x.jsx)("td",{children:"No Dispute yet."})})]})]}),Object(x.jsx)(d.t,{total:l,btns:5,currentPage:h,perPage:p,setPage:O}),Object(x.jsx)(j.b,{className:"msg",open:H,children:H})]})},Ae=function(e){var t=e.dispute,c=(e.setDisputes,e.onClick),n=Object(i.useRef)(),s=Object(i.useRef)(),u=Object(l.g)(),b=Object(i.useContext)(r.d).user,h=Object(i.useState)(!1),O=Object(a.a)(h,2),m=(O[0],O[1],Object(i.useState)(!1)),f=Object(a.a)(m,2),p=f[0],v=(f[1],t.plaintiff._id===b._id?"defendant":"plaintiff");return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("tr",{className:"dispute",onClick:function(e){e.nativeEvent.path.includes(n.current)||e.nativeEvent.path.includes(s.current)||null===c||void 0===c||c(t._id)},children:[Object(x.jsx)("td",{className:"date",children:Object(x.jsx)(d.r,{format:"DD MMM YYYY",children:t.createdAt})}),Object(x.jsx)("td",{children:Object(x.jsx)(d.F,{user:t[v]})}),Object(x.jsx)("td",{children:t.issue}),Object(x.jsx)("td",{children:t.status}),Object(x.jsx)("td",{ref:n,children:Object(x.jsx)(d.a,{icon:Object(x.jsx)(d.g,{}),children:Object(x.jsx)(o.b,{to:"".concat(u.location.pathname).concat(t._id),children:"View Detail"})})})]}),Object(x.jsx)(j.b,{className:"msg",open:p,children:p})]})},Te=function(e){e.history,e.location;var t,c,n=e.match,s=Object(i.useState)(null),r=Object(a.a)(s,2),l=r[0],o=r[1],u=Object(i.useState)(null),b=Object(a.a)(u,2),h=b[0],O=b[1];return Object(i.useEffect)((function(){fetch("/api/singleDispute?_id=".concat(n.params._id)).then((function(e){return e.json()})).then((function(e){"ok"===e.code&&o(e.dispute)})).catch((function(e){console.log(e),O(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return O(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Could not get Dispute. Make sure you're online."})]})]}))}))}),[]),l?Object(x.jsxs)("div",{className:"singleDispute ".concat(l.status),children:[Object(x.jsxs)("div",{className:"disputeSummery",children:[Object(x.jsx)("div",{className:"benner",children:"Dispute Summery"}),Object(x.jsxs)("ul",{className:"disputeDetail",children:[Object(x.jsxs)("li",{children:[Object(x.jsx)("label",{children:"Dispute ID:"}),Object(x.jsx)("div",{className:"data",children:l._id})]}),Object(x.jsxs)("li",{children:[Object(x.jsx)("label",{children:"Status:"}),Object(x.jsx)("div",{className:"data",children:l.status})]}),Object(x.jsxs)("li",{children:[Object(x.jsx)("label",{children:"Issue:"}),Object(x.jsx)("div",{className:"data",children:l.issue})]}),Object(x.jsxs)("li",{children:[Object(x.jsx)("label",{children:"Issued by:"}),Object(x.jsx)("div",{className:"data",children:l.plaintiff.role})]}),Object(x.jsxs)("li",{children:[Object(x.jsx)("label",{children:"Dispute filed:"}),Object(x.jsx)("div",{className:"data",children:Object(x.jsx)(d.r,{format:"hh:mm a, DD MMM, YYYY",children:l.createdAt})})]}),Object(x.jsxs)("li",{children:[Object(x.jsx)("label",{children:"Milestone amount:"}),Object(x.jsxs)("div",{className:"data",children:["\u20b9 ",l.milestone.amount]})]}),Object(x.jsxs)("li",{children:[Object(x.jsx)("label",{children:"Milestone description:"}),Object(x.jsx)("div",{className:"data",children:l.milestone.dscr})]}),Object(x.jsxs)("li",{children:[Object(x.jsx)("label",{children:"Milestone products:"}),Object(x.jsxs)("div",{className:"data",children:[null===(t=l.milestone.products)||void 0===t?void 0:t.map((function(e,t){return Object(x.jsx)("li",{children:e.name},t)})),(null===(c=l.milestone.products)||void 0===c?void 0:c.length)?null:"No product selected"]})]}),Object(x.jsxs)("li",{children:[Object(x.jsx)("label",{children:"Milestone created:"}),Object(x.jsx)("div",{className:"data",children:Object(x.jsx)(d.r,{format:"hh:mm a, DD MMM, YYYY",children:l.milestone.createdAt})})]})]})]}),Object(x.jsx)(Re,{role:"plaintiff",dispute:l,setData:o}),Object(x.jsx)(Re,{role:"defendant",dispute:l,setData:o}),Object(x.jsx)(j.b,{open:h,className:"msg",children:h})]}):Object(x.jsxs)("div",{className:"singleDispute loading",children:[Object(x.jsxs)("div",{className:"disputeSummery",children:[Object(x.jsx)("div",{className:"benner",children:"Dispute Summery"}),Object(x.jsxs)("ul",{children:[Object(x.jsxs)("li",{children:[Object(x.jsx)("div",{}),Object(x.jsx)("div",{})]}),Object(x.jsxs)("li",{children:[Object(x.jsx)("div",{}),Object(x.jsx)("div",{})]}),Object(x.jsxs)("li",{children:[Object(x.jsx)("div",{}),Object(x.jsx)("div",{})]})]})]}),Object(x.jsxs)("div",{className:"plaintiff",children:[Object(x.jsx)("div",{className:"benner",children:"Plaintiff"}),Object(x.jsxs)("div",{className:"user",children:[Object(x.jsx)("div",{className:"img"}),Object(x.jsx)("div",{className:"name"})]}),Object(x.jsxs)("ul",{className:"detail",children:[Object(x.jsxs)("li",{children:[Object(x.jsx)("div",{}),Object(x.jsx)("div",{})]}),Object(x.jsxs)("li",{children:[Object(x.jsx)("div",{}),Object(x.jsx)("div",{})]}),Object(x.jsxs)("li",{children:[Object(x.jsx)("div",{}),Object(x.jsx)("div",{})]})]})]}),Object(x.jsxs)("div",{className:"defendant",children:[Object(x.jsx)("div",{className:"benner",children:"Defendant"}),Object(x.jsxs)("div",{className:"user",children:[Object(x.jsx)("div",{className:"img"}),Object(x.jsx)("div",{className:"name"})]}),Object(x.jsxs)("ul",{className:"detail",children:[Object(x.jsxs)("li",{children:[Object(x.jsx)("div",{}),Object(x.jsx)("div",{})]}),Object(x.jsxs)("li",{children:[Object(x.jsx)("div",{}),Object(x.jsx)("div",{})]}),Object(x.jsxs)("li",{children:[Object(x.jsx)("div",{}),Object(x.jsx)("div",{})]})]})]})]})},Re=function(e){var t,c,n,r,l,o,u,b=e.role,h=e.dispute,O=e.setData,m=Object(i.useState)(null),f=Object(a.a)(m,2),p=f[0],v=f[1];return Object(x.jsxs)("div",{className:"".concat(b," ").concat(h[b].role," ").concat(h.winner===h[b]._id?"winner":""),children:[Object(x.jsxs)("div",{className:"benner",children:[b,"pendingVerdict"===h.status&&(null===(t=h.defendant.case)||void 0===t?void 0:t.dscr)&&Object(x.jsx)("button",{onClick:function(){return Object(j.a)({className:"disputeResolveConfirm",label:"Dispute resolve",question:Object(x.jsxs)(x.Fragment,{children:["Are you sure"," ",Object(x.jsx)("span",{className:"name",children:h[b].firstName+" "+h[b].lastName})," ",Object(x.jsxs)("span",{className:"role",children:["(",b,")"]})," is the winner of this dispute?"]}),callback:function(){return e=h[b]._id,void fetch("/api/resolveDispute",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({_id:h._id,winner:e})}).then((function(e){return e.json()})).then((function(e){"ok"===e.code?(v(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return v(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.B,{}),Object(x.jsx)("h4",{children:"Dispute Successfully resolved."})]})]})),O((function(t){return Object(s.a)(Object(s.a)({},t),{},{winner:e.dispute.winner,status:e.dispute.status})}))):v(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return v(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:e.message})]})]}))})).catch((function(e){console.log(e),v(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return v(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Dispute Could not be resolved. Make sure you' a're online."})]})]}))}));var e}})},children:"Winner"}),h.winner===h[b]._id&&Object(x.jsx)("p",{className:"winnerTag",children:"Winner"})]}),Object(x.jsxs)("div",{className:"content",children:[Object(x.jsxs)("div",{className:"user",children:[Object(x.jsx)(d.n,{src:h[b].profileImg||"/profile-user.jpg"}),Object(x.jsxs)("p",{className:"name",children:[h[b].firstName+" "+h[b].lastName,Object(x.jsx)("span",{className:"phone",children:h[b].phone})]})]}),(null===(c=h[b].case)||void 0===c?void 0:c.dscr)?Object(x.jsxs)("ul",{className:"detail",children:[Object(x.jsxs)("li",{children:[Object(x.jsx)("label",{children:"Role:"})," ",Object(x.jsx)("div",{children:h[b].role})]}),Object(x.jsxs)("li",{children:[Object(x.jsx)("label",{children:"Current Balance:"})," ",Object(x.jsxs)("div",{children:["\u20b9 ",null===(n=h[b].balance)||void 0===n?void 0:n.fix()]})]}),Object(x.jsxs)("li",{children:[Object(x.jsx)("label",{children:"Case:"})," ",Object(x.jsx)("div",{children:(null===(r=h[b].case)||void 0===r?void 0:r.dscr)||"N/A"})]}),Object(x.jsxs)("li",{children:[Object(x.jsx)("label",{children:"Evidence:"})," ",Object(x.jsx)("div",{className:"thumbs",children:(null===(l=h[b].case)||void 0===l||null===(o=l.files)||void 0===o?void 0:o.length)?Object(x.jsx)(d.p,{links:null===(u=h[b].case)||void 0===u?void 0:u.files}):"N/A"})]})]}):Object(x.jsx)("p",{className:"noRes",children:"Has not responded yet."})]}),Object(x.jsx)(j.b,{open:p,className:"msg",children:p})]})},Ye=function(){var e=Object(i.useContext)(r.d).userType,t=Object(i.useState)(null),c=Object(a.a)(t,2),n=c[0],s=(c[1],Object(i.useState)([])),o=Object(a.a)(s,2),u=(o[0],o[1]);return Object(i.useEffect)((function(){fetch("/api/categories").then((function(e){return e.json()})).then((function(e){u(e.categories)}))}),[]),Object(x.jsxs)(x.Fragment,{children:["seller"===e&&Object(x.jsx)(l.a,{to:"/account/orders/current"}),Object(x.jsxs)("div",{className:"productContainer",children:[Object(x.jsx)("div",{style:{display:"none"},children:Object(x.jsx)(d.G,{})}),Object(x.jsxs)(l.d,{children:[Object(x.jsx)(l.b,{path:"/account/myShopping/orders/:_id",component:we}),Object(x.jsx)(l.b,{path:"/account/myShopping/orders",component:Ce}),Object(x.jsx)(l.b,{path:"/account/myShopping/refunds/:_id",component:Pe}),Object(x.jsx)(l.b,{path:"/account/myShopping/Refunds",component:_e})]}),Object(x.jsx)(j.b,{className:"msg",open:n,children:n})]})]})},qe=c(200),Be=c(201),Ie=c(202),Ee=c(203),Le=c(204),He=c(205),Ve=c(206),Ue=c(207),Ze=c(208),Ge=c(209),We=c(210),Je=c(211),ze=c(212),Ke=c(213),$e=c(214),Qe=c(215),Xe=c(216),et=c(217),tt=c(218),ct=c(219),nt=c(220),st=c(221),at=c(222),it=c(223),rt=c(224),lt=c(225),ot=c(226),jt=c(227),dt=c(228),ut=c(229),bt=c(230),ht=c(231),Ot=c(232),xt=c(233),mt=c(234),ft=c(235),pt=c(236),vt=c(237),gt=(c(189),c(190),c(43)),yt=(c(191),Object(i.lazy)((function(){return c.e(3).then(c.t.bind(null,258,7))})));c(192),c(193);var kt=function(){var e=Object(i.useContext)(r.d),t=e.userType,c=e.setUserType,n=Object(l.g)(),s=Object(i.useState)(""),u=Object(a.a)(s,2),b=(u[0],u[1],Object(i.useState)([])),h=Object(a.a)(b,2),O=(h[0],h[1],Object(i.useState)([])),m=Object(a.a)(O,2),f=m[0],p=m[1],v=Object(i.useState)([]),g=Object(a.a)(v,2),y=g[0],k=g[1],N=Object(i.useState)(null),C=Object(a.a)(N,2),S=C[0],w=C[1],M=Object(i.useState)(null),_=Object(a.a)(M,2),D=_[0],P=_[1];Object(i.useRef)();return Object(i.useEffect)((function(){fetch("/api/recentPayments").then((function(e){return e.json()})).then((function(e){p(e)})).catch((function(e){console.log(e)})),fetch("/api/getOrders?".concat(new URLSearchParams({user:"buyer",perPage:5}))).then((function(e){return e.json()})).then((function(e){"ok"===e.code&&k(e.orders)}))}),[]),Object(i.useEffect)((function(){"/account/home/pay"!==n.location.pathname||S||n.push("/account/home")}),[]),Object(x.jsxs)("div",{className:"homeContainer",children:[Object(x.jsxs)("div",{className:"benner",children:[Object(x.jsx)("h4",{children:"Start transactions with Delivery pay"}),Object(x.jsx)("p",{children:"Connect with new buyers/sellers."})]}),Object(x.jsxs)("div",{className:"userType",children:[Object(x.jsxs)("div",{className:"option buyer ".concat("buyer"===t&&"active"),children:[Object(x.jsx)(d.n,{src:"/buyer.png"}),Object(x.jsxs)("div",{className:"btn",onClick:function(e){return c("buyer")},children:[Object(x.jsx)("p",{children:"I am a Buyer "}),Object(x.jsx)("div",{className:"radial",children:"buyer"===t&&Object(x.jsx)("div",{className:"fill"})})]})]}),Object(x.jsxs)("div",{className:"option seller ".concat("seller"===t&&"active"),children:[Object(x.jsx)(d.n,{src:"/seller.png"}),Object(x.jsxs)("div",{className:"btn",onClick:function(e){return c("seller")},children:[Object(x.jsx)("p",{children:"I am a Seller "}),Object(x.jsx)("div",{className:"radial",children:"seller"===t&&Object(x.jsx)("div",{className:"fill"})})]})]})]}),Object(x.jsx)(Nt,{setClient:w}),Object(x.jsxs)("div",{className:"recentPayments",children:[Object(x.jsxs)("p",{className:"label",children:["Recently Contacted",Object(x.jsx)("span",{className:"note",children:"buyer"===t?"Click to start chatting.":"Click to request a milestone."})]}),Object(x.jsxs)("ul",{className:"payments",children:[f.map((function(e){return Object(x.jsx)("li",{children:Object(x.jsxs)(o.b,{to:"buyer"===t?"/account/deals/".concat(e._id):"/account/home/requestMilestone",onClick:function(){w(e)},children:[Object(x.jsx)(d.n,{src:e.profileImg}),Object(x.jsx)("p",{className:"name",children:e.firstName+" "+e.lastName})]})},e._id)})),0===f.length&&Object(x.jsx)("p",{children:"Nothing for now."})]})]}),Object(x.jsxs)("div",{className:"recentOrders",children:[Object(x.jsxs)("p",{className:"label",children:["Recent Orders",Object(x.jsx)("span",{className:"note",children:"Click to view order details."})]}),Object(x.jsxs)("ul",{className:"payments",children:[y.map((function(e){return Object(x.jsx)("li",{children:Object(x.jsx)(o.b,{to:"/account/orders/".concat("pending"===e.status?"pending":"current","/").concat(e._id),children:Object(x.jsxs)("h3",{children:["\u20b9",e.total]})})},e._id)})),0===y.length&&Object(x.jsx)("p",{children:"Nothing for now."})]})]}),Object(x.jsx)(d.l,{}),Object(x.jsx)(l.b,{path:"/account/home/createMilestone",children:Object(x.jsx)(j.b,{open:!0,head:!0,label:"Create Milestone",setOpen:function(){n.push("/account/home"),w(null)},className:"milestoneRequest",children:Object(x.jsx)(Mt,{action:"create",client:S,onSuccess:function(e){n.push("/account/home"),P(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return P(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.B,{}),Object(x.jsxs)("h4",{className:"amount",children:["\u20b9",null===e||void 0===e?void 0:e.amount]}),Object(x.jsx)("h4",{children:"Milestone has been created"})]}),Object(x.jsx)(o.b,{to:"/account/hold",onClick:function(){return P(null)},children:"Check your Delivery pay Hold"})]}))}})})}),Object(x.jsx)(l.b,{path:"/account/home/requestMilestone",children:Object(x.jsx)(j.b,{open:!0,head:!0,label:"Request Milestone",setOpen:function(){n.push("/account/home"),w(null)},className:"milestoneRequest",children:Object(x.jsx)(Mt,{action:"request",client:S,onSuccess:function(e){n.push("/account/home"),P(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return P(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.B,{}),Object(x.jsxs)("h4",{className:"amount",children:["\u20b9",null===e||void 0===e?void 0:e.amount]}),Object(x.jsx)("h4",{children:"Milestone has been requested"})]}),Object(x.jsx)(o.b,{to:"/account/hold",onClick:function(){return P(null)},children:"Check your Delivery pay Hold"})]}))}})})}),Object(x.jsx)(j.b,{className:"msg",open:D,children:D})]})},Nt=function(e){var t=e.setClient,c=Object(i.useContext)(r.d).userType,n=(Object(l.g)(),Object(i.useState)(null)),s=Object(a.a)(n,2),u=s[0],b=s[1],h=Object(i.useState)([]),O=Object(a.a)(h,2),m=O[0],f=O[1],p=Object(i.useState)(""),v=Object(a.a)(p,2),g=v[0],y=v[1],k=Object(i.useState)(!1),N=Object(a.a)(k,2),C=N[0],S=N[1],w=Object(i.useRef)(),M=Object(i.useCallback)((function(){new RegExp(/^(\+91|91|1|)(?=\d{10}$)/gi).test(g.toLowerCase())?fetch("/api/inviteUser?".concat(new URLSearchParams({q:"+91"+g.replace(/^(\+91|91|1|)(?=\d{10}$)/g,""),origin:window.location.origin}).toString())).then((function(e){return e.json()})).then((function(e){console.log(e),"ok"===e.code?b(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return b(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.B,{}),Object(x.jsxs)("h4",{children:["An invitaion has been sent to"," ","+91"+g.replace(/^(\+91|91|1|)(?=\d{10}$)/g,""),"."]})]})]})):b(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return b(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Invitation could not be sent. Please try again."})]})]}))})).catch((function(e){console.log(e),b(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return b(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Invitation could not be sent. Make sure you're online."})]})]}))})):b(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return b(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Enter a valid phone number to send invitation."})]})]}))}),[g]),_=function(e){e.path.includes(w.current)||S(!1)};return Object(i.useEffect)((function(){return document.addEventListener("click",_),function(){document.removeEventListener("click",_)}}),[]),Object(i.useEffect)((function(){g?(fetch("/api/getUsers?q=".concat(encodeURIComponent(g))).then((function(e){return e.json()})).then((function(e){e&&f(e)})),""===g&&f([])):f([])}),[g]),Object(x.jsxs)("div",{className:"search",children:[Object(x.jsxs)("form",{onSubmit:function(e){return e.preventDefault()},ref:w,children:[Object(x.jsxs)("section",{children:[Object(x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"17.9",height:"17.9",viewBox:"0 0 17.9 17.9",children:Object(x.jsx)("path",{id:"Path_208","data-name":"Path 208",d:"M17.9,16.324l-3.715-3.715a7.708,7.708,0,0,0,1.576-4.728A7.832,7.832,0,0,0,7.881,0,7.832,7.832,0,0,0,0,7.881a7.832,7.832,0,0,0,7.881,7.881,7.708,7.708,0,0,0,4.728-1.576L16.324,17.9ZM2.252,7.881A5.574,5.574,0,0,1,7.881,2.252a5.574,5.574,0,0,1,5.629,5.629,5.574,5.574,0,0,1-5.629,5.629A5.574,5.574,0,0,1,2.252,7.881Z",transform:"translate(0)",fill:"#b9b9b9"})}),Object(x.jsx)("input",{label:"search",required:!0,placeholder:"Search with Phone Number or Delivery pay ID",onFocus:function(){return S(!0)},value:g,onChange:function(e){return y(e.target.value)}}),Object(x.jsx)(o.b,{className:"sendReq ".concat(m.length>0||!g?"disabled":""),onClick:M,to:"#",children:"Invite"})]}),C&&m.length?Object(x.jsx)("ul",{className:"searchResult",children:m.map((function(e,n){return Object(x.jsx)(o.b,{target:"buyer"===c?"_blank":"",onClick:function(){return t(e)},to:{pathname:"seller"===c?"/account/home/createMilestone":"/marketplace?seller=".concat(e._id)},children:Object(x.jsxs)("li",{children:[Object(x.jsxs)("div",{className:"profile",children:[Object(x.jsx)(d.n,{src:e.profileImg}),Object(x.jsxs)("p",{className:"name",children:[e.firstName+" "+e.lastName,Object(x.jsx)("span",{className:"phone",children:e.phone})]})]}),Object(x.jsx)("span",{className:"sendReq",children:"seller"===c?"Request milestone":"Show Products & Services"})]},n)},n)}))}):null]}),Object(x.jsx)(j.b,{className:"msg",open:u,children:u})]})};var Ct=function(){var e=Object(i.useContext)(r.d),t=e.user,c=e.setUser,u=e.cart,b=(e.setCart,e.userType),h=Object(l.g)(),O=(Object(i.useRef)(null),Object(i.useState)(!1)),m=Object(a.a)(O,2),f=m[0],p=m[1],v=Object(i.useState)(!1),g=Object(a.a)(v,2),y=g[0],k=g[1],N=Object(i.useState)(!1),C=Object(a.a)(N,2),S=C[0],w=C[1],M=Object(i.useState)(!1),_=Object(a.a)(M,2),D=(_[0],_[1]),P=Object(i.useState)(!1),F=Object(a.a)(P,2),A=(F[0],F[1],Object(i.useState)(null)),T=Object(a.a)(A,2),R=(T[0],T[1]);Object(i.useEffect)((function(){S&&fetch("/api/editUserProfile",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({notificationLastRead:new Date})}).then((function(e){return e.json()})).then((function(e){e.user&&c((function(t){return Object(s.a)(Object(s.a)({},t),{},{notificationLastRead:e.user.notificationLastRead})}))})).catch((function(e){console.log(e)}))}),[S]),Object(i.useEffect)((function(){var e;(null===(e=t.notifications)||void 0===e?void 0:e.find((function(e){return new Date(e.createdAt)>new Date(t.notificationLastRead)})))&&D(!0),S&&D(!1)}),[S,t]);var Y="".concat(window.location.origin,"/u/join?referer=").concat(t._id);return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("div",{className:"profile",children:["buyer"===b&&Object(x.jsxs)(d.a,{className:"cart",icon:Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(d.e,{}),u.length>0&&Object(x.jsx)("span",{className:"itemCount",children:u.reduce((function(e,t){return e+t.qty}),0)})]}),clickable:!0,wrapperClassName:"popupCart",children:[u.map((function(e,t){var c=e.product,n=e.qty;return Object(x.jsx)(ke.b,{product:c,qty:n},t)})),u.length>0&&Object(x.jsx)("li",{className:"actions",children:Object(x.jsx)(o.b,{to:"/account/cart",children:"View Cart"})}),0===u.length&&Object(x.jsx)("p",{className:"placeholder",children:"cart is empty"})]}),Object(x.jsx)(d.a,{icon:Object(x.jsx)("svg",{id:"bell",xmlns:"http://www.w3.org/2000/svg",width:"15.918",height:"16",viewBox:"0 0 15.918 16",children:Object(x.jsx)("path",{id:"Path_1","data-name":"Path 1",d:"M15,14H10a2,2,0,0,1-4,0H1a.961.961,0,0,1-.9-.7,1.068,1.068,0,0,1,.3-1.1A4.026,4.026,0,0,0,2,9V6A6,6,0,0,1,14,6V9a4.026,4.026,0,0,0,1.6,3.2.947.947,0,0,1,.3,1.1A.961.961,0,0,1,15,14Z",transform:"translate(-0.063)",fill:"#fff",fillRule:"evenodd"})}),wrapperClassName:"notiWrapper",onClick:function(){return w(!0)},children:Object(n.a)(t.notifications).reverse().map((function(e,t){return Object(x.jsxs)("li",{children:[Object(x.jsx)(d.r,{format:"hh:mm",children:e.createdAt}),Object(x.jsx)("p",{className:"title",children:e.title}),Object(x.jsx)("p",{className:"body",children:e.body})]},t)}))}),Object(x.jsxs)(d.a,{wrapperClassName:"menu",className:"avatar",icon:Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(d.n,{src:(null===t||void 0===t?void 0:t.profileImg)||"/profile-user.jpg",onClick:function(){return p(!f)}}),b&&Object(x.jsx)("p",{className:"userTypeTag",children:b})]}),children:[Object(x.jsx)("p",{className:"name",children:(null===t||void 0===t?void 0:t.firstName)+" "+(null===t||void 0===t?void 0:t.lastName)||t.phone}),Object(x.jsx)(wt,{tip:!0}),Object(x.jsx)(o.b,{className:"link",to:"/account",children:"Dashboard"}),Object(x.jsx)(o.b,{className:"link trans",to:"/account/transactions",children:"Transactions"}),Object(x.jsx)(o.b,{className:"link settings",to:"/account/profile",children:"Settings"}),Object(x.jsx)(o.b,{className:"link",to:"/aboutUs",children:"More about us"}),Object(x.jsxs)("div",{className:"referral",children:[Object(x.jsx)("button",{onClick:function(){k(!0)},children:"Invite now"}),Object(x.jsx)("p",{children:"Refer and earn flat \u20b950/- cashback to your wallet"})]}),Object(x.jsxs)("button",{className:"logout",onClick:function(){fetch("/api/logout").then((function(e){return e.json()})).then((function(e){c(null),h.push("/")})).catch((function(e){console.log(e),R(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return R(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Could not logout."})]})]}))}))},children:["Logout",Object(x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"31.702",height:"31.702",viewBox:"0 0 31.702 31.702",children:Object(x.jsx)("path",{id:"Path_1758","data-name":"Path 1758",d:"M15.487,25.174l2.483,2.483,8.806-8.806L17.97,10.045l-2.483,2.483,4.544,4.562H3v3.522H20.031ZM31.18,3H6.522A3.521,3.521,0,0,0,3,6.522v7.045H6.522V6.522H31.18V31.18H6.522V24.135H3V31.18A3.521,3.521,0,0,0,6.522,34.7H31.18A3.533,3.533,0,0,0,34.7,31.18V6.522A3.533,3.533,0,0,0,31.18,3Z",transform:"translate(-3 -3)",fill:"#fc0660"})})]})]})]}),Object(x.jsxs)(j.b,{className:"invite",open:y,onBackdropClick:function(){return k(!1)},children:[Object(x.jsx)("div",{className:"imgWrapper",onClick:function(){return k(!1)},children:Object(x.jsx)(yt,{value:Y,size:250,renderAs:"svg"})}),Object(x.jsxs)("div",{className:"shareBtns",children:[Object(x.jsx)(qe.a,{url:Y,children:Object(x.jsx)(Be.a,{})}),Object(x.jsx)(Ie.a,{url:Y,children:Object(x.jsx)(Ee.a,{})}),Object(x.jsx)(Le.a,{url:Y,children:Object(x.jsx)(He.a,{})}),Object(x.jsx)(Ve.a,{url:Y,children:Object(x.jsx)(Ue.a,{})}),Object(x.jsx)(Ze.a,{url:Y,children:Object(x.jsx)(Ge.a,{})}),Object(x.jsx)(We.a,{url:Y,children:Object(x.jsx)(Je.a,{})}),Object(x.jsx)(ze.a,{url:Y,children:Object(x.jsx)(Ke.a,{})}),Object(x.jsx)($e.a,{url:Y,children:Object(x.jsx)(Qe.a,{})}),Object(x.jsx)(Xe.a,{url:Y,children:Object(x.jsx)(et.a,{})}),Object(x.jsx)(tt.a,{url:Y,children:Object(x.jsx)(ct.a,{})}),Object(x.jsx)(nt.a,{url:Y,children:Object(x.jsx)(st.a,{})}),Object(x.jsx)(at.a,{url:Y,children:Object(x.jsx)(it.a,{})}),Object(x.jsx)(rt.a,{url:Y,children:Object(x.jsx)(lt.a,{})}),Object(x.jsx)(ot.a,{url:Y,children:Object(x.jsx)(jt.a,{})}),Object(x.jsx)(dt.a,{url:Y,children:Object(x.jsx)(ut.a,{})}),Object(x.jsx)(bt.a,{url:Y,children:Object(x.jsx)(ht.a,{})}),Object(x.jsx)(Ot.a,{url:Y,children:Object(x.jsx)(xt.a,{})}),Object(x.jsx)(mt.a,{url:Y,children:Object(x.jsx)(ft.a,{})}),Object(x.jsx)(pt.a,{url:Y,children:Object(x.jsx)(vt.a,{})})]})]})]})},St=function(e){var t=e.label,c=e.className,n=e.location,s=e.link,a=e.path,i=e.children;return Object(x.jsxs)("li",{className:"accordion ".concat(c||""," ").concat(n.pathname.startsWith(s)&&"open"),children:[Object(x.jsx)(o.b,{to:a,children:t}),n.pathname.startsWith(s)&&Object(x.jsxs)("ul",{children:[Object(x.jsx)("li",{children:Object(x.jsx)(d.g,{})}),i]})]})},wt=function(e){var t=e.tip,c=Object(i.useContext)(r.d),n=c.userType,s=c.setUserType;return Object(x.jsxs)("div",{className:"userTypeSwitch",children:[Object(x.jsx)("label",{children:"Browse as"}),Object(x.jsxs)("ul",{className:"options",children:[Object(x.jsx)("li",{className:"buyer"===n?"active":"",onClick:function(){return s("buyer")},children:"Buyer"}),Object(x.jsx)("li",{className:"seller"===n?"active":"",onClick:function(){return s("seller")},children:"Seller"})]}),t&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"break"}),"seller"===n?Object(x.jsxs)("p",{className:"note",children:["As a seller, you can manage your",Object(x.jsx)("br",{})," product listing, order, refunds and general shop settings."]}):Object(x.jsxs)("p",{className:"note",children:["As a buyer, you can manage your",Object(x.jsx)("br",{})," perchase orders, payments and deals."]})]})]})},Mt=function(e){var t,c,n,l,u=e.action,b=e.client,h=e.onSuccess,O=e.definedAmount,m=e.order,f=e.refund,p=e.strict,v=Object(i.useContext)(r.d),g=v.user,y=(v.setUser,v.config),k=Object(i.useState)(!1),N=Object(a.a)(k,2),C=N[0],S=N[1],w=Object(i.useState)(""),M=Object(a.a)(w,2),_=(M[0],M[1],Object(i.useState)(!1)),D=Object(a.a)(_,2),P=(D[0],D[1],Object(i.useState)(Object(s.a)({},g))),F=Object(a.a)(P,2),A=F[0],T=(F[1],Object(i.useState)(Object(s.a)({},b))),R=Object(a.a)(T,2),Y=R[0],q=(R[1],Object(i.useState)("")),B=Object(a.a)(q,2),I=B[0],E=B[1],L=Object(i.useState)(O||""),H=Object(a.a)(L,2),V=H[0],U=H[1],Z=Object(i.useState)(0),G=Object(a.a)(Z,2),W=G[0],J=G[1],z=Object(i.useState)(null),K=Object(a.a)(z,2),$=K[0],Q=K[1],X=Object(i.useRef)(),ee=Object(i.useCallback)((function(){fetch("/api/requestMilestone",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({buyer_id:b._id,amount:V,dscr:I,order:m,refund:f})}).then((function(e){return e.json()})).then((function(e){S(!1),"ok"===e.code?null===h||void 0===h||h(e.milestone):Q(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return Q(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Could not request milestone. Try again."})]})]}))})).catch((function(e){S(!1),console.log(e),Q(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return Q(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Could not request milestone. Make sure you're online."})]})]}))}))}),[Y,A,V,I]),te=Object(i.useCallback)((function(){fetch("/api/createMilestone",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({seller:Object(s.a)({},Y),amount:V,dscr:I,order:m,refund:f})}).then((function(e){return e.json()})).then((function(e){S(!1),"ok"===e.code?null===h||void 0===h||h(Object(s.a)({},e)):403===e.code?Q(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return Q(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Insufficient fund"}),Object(x.jsx)(o.b,{to:"/account/wallet",children:"Add Money to your wallet now."})]})]})):Q(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return Q(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Could not create milestone. Try again"})]})]}))})).catch((function(e){S(!1),console.log(e),Q(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:function(){return Q(null)},children:"Okay"}),Object(x.jsxs)("div",{children:[Object(x.jsx)(d.i,{}),Object(x.jsx)("h4",{children:"Could not create milestone. Make sure you're online."})]})]}))}))}),[Y,A,V,I]);return Object(i.useEffect)((function(){J((function(){return(+V/100*y.fee).fix()}))}),[V]),Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("form",{className:"milestonesForm",onSubmit:function(e){S(!0),e.preventDefault(),Object(gt.b)(Object(x.jsxs)("div",{className:"toast",children:["Milestone is being"," ","create"===u?"created.":"requested."," ",Object(x.jsx)("button",{className:"undo",onClick:function(){X.current=null},children:"Undo"})]}),{position:"bottom-center",autoClose:8e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,onClose:function(){var e;null===(e=X.current)||void 0===e||e.call(X),S(!1)},draggable:!0,progress:void 0}),X.current="create"===u?te:ee},children:[Object(x.jsxs)("section",{className:"transactionDetail",children:[Object(x.jsxs)("section",{className:"amount",children:[Object(x.jsx)("label",{children:"Amount"}),Object(x.jsx)(d.s,{readOnly:p,min:10,defaultValue:O||0,required:!0,onChange:function(e){return U((+e.target.value).toString())}})]}),V&&Object(x.jsxs)(x.Fragment,{children:["create"===u&&Object(x.jsxs)("label",{className:"receivable",children:[b.firstName," ",b.lastName," will recieve \u20b9",(V-W).fix()]}),"request"===u&&Object(x.jsxs)("label",{className:"receivable",children:["You will recieve \u20b9",(V-W).fix()]})]}),Object(x.jsxs)("section",{children:[Object(x.jsx)("label",{children:"Detail"}),Object(x.jsx)("input",{value:I,required:!0,onChange:function(e){return E(e.target.value)}})]}),Object(x.jsx)("button",{type:"submit",children:"create"===u?"Create Milestone":"Request Milestone"})]}),Object(x.jsxs)("section",{className:"clientDetail",children:["request"===u&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(d.n,{src:(null===b||void 0===b?void 0:b.profileImg)||"/profile-user.jpg"}),Object(x.jsx)("label",{children:"Buyer Information"}),Object(x.jsxs)("div",{className:"detail",onClick:function(){},children:[Object(x.jsxs)("section",{className:"profileDetail",children:[Object(x.jsx)("p",{className:"name",children:(null===b||void 0===b?void 0:b.firstName)+" "+(null===b||void 0===b?void 0:b.lastName)}),Object(x.jsx)("p",{className:"phone",children:null===b||void 0===b?void 0:b.phone}),Object(x.jsx)("p",{className:"email",children:null===b||void 0===b?void 0:b.email})]}),(null===b||void 0===b||null===(t=b.address)||void 0===t?void 0:t.street)&&Object(x.jsx)("section",{className:"address",children:Object(x.jsxs)("p",{className:"street",children:[null===(c=b.address)||void 0===c?void 0:c.street,", ",null===(n=b.address)||void 0===n?void 0:n.city,","," ",null===(l=b.address)||void 0===l?void 0:l.zip]})})]})]}),"request"===u?null:Object(x.jsxs)("div",{className:"sellerInfo",children:[Object(x.jsx)(d.n,{src:(null===Y||void 0===Y?void 0:Y.profileImg)||"/profile-user.jpg"}),Object(x.jsx)("label",{children:"Seller Information"}),Object(x.jsx)("div",{className:"detail",children:Object(x.jsxs)("section",{className:"profileDetail",children:[Object(x.jsxs)("p",{className:"name",children:[null===Y||void 0===Y?void 0:Y.firstName," ",null===Y||void 0===Y?void 0:Y.lastName]}),Object(x.jsx)("p",{className:"phone",children:null===Y||void 0===Y?void 0:Y.phone}),Object(x.jsx)("p",{className:"email",children:null===Y||void 0===Y?void 0:Y.email})]})})]})]})]}),C&&Object(x.jsx)("div",{className:"spinnerContainer",children:Object(x.jsx)("div",{className:"spinner"})}),Object(x.jsx)(j.b,{className:"msg",open:$,children:$})]})};t.default=function(){var e=Object(i.useContext)(r.d),t=e.user,c=e.userType,n=Object(i.useContext)(r.a).unread,s=Object(l.g)(),a=Object(l.h)();return Object(i.useEffect)((function(){Ne.b.connected||Ne.b.connect()}),[]),Object(x.jsxs)("div",{className:"account ".concat(a.pathname.startsWith("/account/deals/")?"chatSection":""),children:[Object(x.jsxs)("header",{children:[Object(x.jsxs)(o.b,{to:"/",children:[Object(x.jsx)(d.n,{className:"logo",src:"/logo_land.jpg",alt:"Delivery pay logo"}),Object(x.jsx)(d.n,{className:"logo_small",src:"/logo_sqr.jpg",alt:"Delivery pay logo"})]}),Object(x.jsx)("div",{className:"links",children:Object(x.jsx)(o.b,{to:"/",className:"home",children:"Home"})}),Object(x.jsx)(wt,{}),Object(x.jsx)(Ct,{})]}),Object(x.jsxs)("div",{className:"content",children:[Object(x.jsxs)("ul",{className:"sidebar",children:[Object(x.jsx)("li",{className:"/account"===a.pathname||a.pathname.startsWith("/account/home")?"active":void 0,children:Object(x.jsxs)(o.b,{to:"/account/home",children:[Object(x.jsx)("div",{className:"icon",children:Object(x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"21.648",height:"21.513",viewBox:"0 0 21.648 21.513",children:Object(x.jsx)("path",{id:"Path_287","data-name":"Path 287",d:"M21.387,10.488A1.079,1.079,0,0,0,21.3,8.979L11.626.289a1.185,1.185,0,0,0-1.576,0L.342,9.44A1.073,1.073,0,0,0,.3,10.95l.245.258A1.043,1.043,0,0,0,2,11.321l.724-.665v9.762A1.071,1.071,0,0,0,3.78,21.5H7.563A1.071,1.071,0,0,0,8.62,20.418V13.591h4.81v6.828a1.04,1.04,0,0,0,.269.761.987.987,0,0,0,.723.323H18.45a1.071,1.071,0,0,0,1.057-1.084V10.776l.449.4c.245.222.765.042,1.168-.4Z",transform:"translate(-0.008 0.011)",fill:"#fff"})})}),"Home"]})}),Object(x.jsxs)(St,{className:"".concat(a.pathname.startsWith("/account/transaction")?"active":""),location:a,label:Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"icon",children:Object(x.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20.886",height:"22.948",viewBox:"0 0 20.886 22.948",children:[Object(x.jsxs)("g",{id:"Rectangle_2","data-name":"Rectangle 2",fill:"none",stroke:"#fff",strokeWidth:"2",children:[Object(x.jsx)("rect",{width:"20.886",height:"16.244",rx:"2",stroke:"none"}),Object(x.jsx)("rect",{x:"1",y:"1",width:"18.886",height:"14.244",rx:"1",fill:"none"})]}),Object(x.jsxs)("g",{id:"Rectangle_3","data-name":"Rectangle 3",transform:"translate(0 9.283)",fill:"none",stroke:"#fff",strokeWidth:"2",children:[Object(x.jsx)("rect",{width:"20.886",height:"6.962",rx:"2",stroke:"none"}),Object(x.jsx)("rect",{x:"1",y:"1",width:"18.886",height:"4.962",rx:"1",fill:"none"})]}),Object(x.jsx)("path",{id:"Path_2","data-name":"Path 2",d:"M-180.174-182v7.923l4.1-4.653,3.932,4.653V-182Z",transform:"translate(186.6 197.025)",fill:"#fff"})]})}),Object(x.jsx)("p",{className:"label",children:"Start Transaction"})]}),link:"/account/transaction",path:"/account/transaction/new",children:[Object(x.jsx)("li",{className:a.pathname.startsWith("/account/transaction/new")?"active":void 0,children:Object(x.jsx)(o.b,{to:"/account/transaction/new",children:"Start New"})}),Object(x.jsx)("li",{className:a.pathname.startsWith("/account/transaction/history")?"active":void 0,children:Object(x.jsx)(o.b,{to:"/account/transaction/history",children:"Transaction History"})})]}),"buyer"===c&&Object(x.jsxs)(St,{className:"".concat(a.pathname.startsWith("/account/orders")?"active":""),location:a,label:Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"icon",children:Object(x.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20.886",height:"22.948",viewBox:"0 0 20.886 22.948",children:[Object(x.jsxs)("g",{id:"Rectangle_2","data-name":"Rectangle 2",fill:"none",stroke:"#fff",strokeWidth:"2",children:[Object(x.jsx)("rect",{width:"20.886",height:"16.244",rx:"2",stroke:"none"}),Object(x.jsx)("rect",{x:"1",y:"1",width:"18.886",height:"14.244",rx:"1",fill:"none"})]}),Object(x.jsxs)("g",{id:"Rectangle_3","data-name":"Rectangle 3",transform:"translate(0 9.283)",fill:"none",stroke:"#fff",strokeWidth:"2",children:[Object(x.jsx)("rect",{width:"20.886",height:"6.962",rx:"2",stroke:"none"}),Object(x.jsx)("rect",{x:"1",y:"1",width:"18.886",height:"4.962",rx:"1",fill:"none"})]}),Object(x.jsx)("path",{id:"Path_2","data-name":"Path 2",d:"M-180.174-182v7.923l4.1-4.653,3.932,4.653V-182Z",transform:"translate(186.6 197.025)",fill:"#fff"})]})}),Object(x.jsx)("p",{className:"label",children:"My Orders"})]}),link:"/account/orders",path:"/account/orders/current",children:[Object(x.jsx)("li",{className:a.pathname.startsWith("/account/orders/current")?"active":void 0,children:Object(x.jsx)(o.b,{to:"/account/orders/current",children:"Current Order"})}),Object(x.jsx)("li",{className:a.pathname.startsWith("/account/orders/pending")?"active":void 0,children:Object(x.jsx)(o.b,{to:"/account/orders/pending",children:"Pending Order"})}),Object(x.jsx)("li",{className:a.pathname.startsWith("/account/orders/history")?"active":void 0,children:Object(x.jsx)(o.b,{to:"/account/orders/history",children:"Order History"})}),Object(x.jsx)("li",{className:a.pathname.startsWith("/account/orders/dispute")?"active":void 0,children:Object(x.jsx)(o.b,{to:"/account/orders/dispute",children:"Dispute Resolution"})})]}),Object(x.jsx)("li",{className:"hold ".concat(a.pathname.startsWith("/account/hold")?"active":void 0),children:Object(x.jsxs)(o.b,{to:"/account/hold",children:[Object(x.jsx)("div",{className:"icon",children:Object(x.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"27",viewBox:"0 0 22 27",children:[Object(x.jsx)("text",{id:"_3","data-name":"3",transform:"translate(14 14) rotate(180)",fill:"#fff",fontSize:"10",fontFamily:"Ebrima-Bold, Ebrima",fontWeight:"700",children:Object(x.jsx)("tspan",{x:"0",y:"0",children:"3"})}),Object(x.jsxs)("g",{id:"Group_166","data-name":"Group 166",transform:"translate(-534.967 -611.816)",children:[Object(x.jsxs)("g",{id:"Rectangle_1132","data-name":"Rectangle 1132",transform:"translate(534.967 620.816)",fill:"none",stroke:"#fff",strokeWidth:"2",children:[Object(x.jsx)("rect",{width:"22",height:"18",rx:"4",stroke:"none"}),Object(x.jsx)("rect",{x:"1",y:"1",width:"20",height:"16",rx:"3",fill:"none"})]}),Object(x.jsxs)("g",{id:"Rectangle_1133","data-name":"Rectangle 1133",transform:"translate(539.967 611.816)",fill:"none",stroke:"#fff",strokeWidth:"2",children:[Object(x.jsx)("path",{d:"M6.5,0h0A6.5,6.5,0,0,1,13,6.5V11a0,0,0,0,1,0,0H0a0,0,0,0,1,0,0V6.5A6.5,6.5,0,0,1,6.5,0Z",stroke:"none"}),Object(x.jsx)("path",{d:"M6.5,1h0A5.5,5.5,0,0,1,12,6.5V9.214a.786.786,0,0,1-.786.786H1.786A.786.786,0,0,1,1,9.214V6.5A5.5,5.5,0,0,1,6.5,1Z",fill:"none"})]})]})]})}),"Milestones"]})}),"seller"===c&&Object(x.jsx)("li",{className:"products ".concat(a.pathname.startsWith("/account/myShop")?"active":void 0),children:Object(x.jsxs)(o.b,{to:"/account/myShop/products",children:[Object(x.jsx)("div",{className:"icon",children:Object(x.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"19.872",height:"21.086",viewBox:"0 0 19.872 21.086",children:[Object(x.jsxs)("g",{id:"Group_4","data-name":"Group 4",transform:"translate(0 5.63)",children:[Object(x.jsxs)("g",{id:"Path_288","data-name":"Path 288",fill:"none",children:[Object(x.jsx)("path",{d:"M1,0H18.872a1,1,0,0,1,1,1V14.456a1,1,0,0,1-1,1H1a1,1,0,0,1-1-1V1A1,1,0,0,1,1,0Z",stroke:"none"}),Object(x.jsx)("path",{d:"M 2 2.000001907348633 L 2 13.45590209960938 L 17.87188148498535 13.45590209960938 L 17.87188148498535 2.000001907348633 L 2 2.000001907348633 M 1 1.9073486328125e-06 L 18.87188148498535 1.9073486328125e-06 C 19.42416000366211 1.9073486328125e-06 19.87188148498535 0.4477119445800781 19.87188148498535 1.000001907348633 L 19.87188148498535 14.45590209960938 C 19.87188148498535 15.00819206237793 19.42416000366211 15.45590209960938 18.87188148498535 15.45590209960938 L 1 15.45590209960938 C 0.4477100372314453 15.45590209960938 0 15.00819206237793 0 14.45590209960938 L 0 1.000001907348633 C 0 0.4477119445800781 0.4477100372314453 1.9073486328125e-06 1 1.9073486328125e-06 Z",stroke:"none",fill:"#fff"})]}),Object(x.jsxs)("g",{id:"Rectangle_3","data-name":"Rectangle 3",transform:"translate(0 8.832)",fill:"none",stroke:"#fff",strokeWidth:"2",children:[Object(x.jsx)("rect",{width:"19.872",height:"6.624",rx:"2",stroke:"none"}),Object(x.jsx)("rect",{x:"1",y:"1",width:"17.872",height:"4.624",rx:"1",fill:"none"})]})]}),Object(x.jsxs)("g",{id:"Rectangle_1134","data-name":"Rectangle 1134",transform:"translate(4)",fill:"none",stroke:"#fff",strokeWidth:"2",children:[Object(x.jsx)("path",{d:"M2,0h8a2,2,0,0,1,2,2V7a0,0,0,0,1,0,0H0A0,0,0,0,1,0,7V2A2,2,0,0,1,2,0Z",stroke:"none"}),Object(x.jsx)("rect",{x:"1",y:"1",width:"10",height:"5",rx:"1",fill:"none"})]})]})}),"My Shop"]})}),Object(x.jsxs)("li",{className:"deals ".concat(a.pathname.startsWith("/account/deals")?"active":void 0),children:[Object(x.jsxs)(o.b,{to:"/account/deals",children:[Object(x.jsx)("div",{className:"icon",children:Object(x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26.55",height:"25.219",viewBox:"0 0 26.55 25.219",children:Object(x.jsx)("path",{id:"Path_1","data-name":"Path 1",d:"M-242.2-184.285h-13l26.55-10.786-4.252,25.219-5.531-10.637-2.127,4.68v-6.382l7.659-9.148h2.34",transform:"translate(255.198 195.071)",fill:"#fff"})})}),"My Chat"]}),n?Object(x.jsx)("span",{className:"unred",children:n}):null]}),Object(x.jsx)(St,{className:"profile ".concat(a.pathname.startsWith("/account/profile")?"active":""),location:a,label:Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"icon acc",children:Object(x.jsx)(d.n,{src:(null===t||void 0===t?void 0:t.profileImg)||"/profile-user.jpg"})}),Object(x.jsx)("p",{className:"label",children:"Account"})]}),link:"/account/profile",path:"/account/profile/edit",children:Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("li",{className:a.pathname.startsWith("/account/profile/edit")?"active":void 0,children:Object(x.jsx)(o.b,{to:"/account/profile/edit",children:"Edit Profile"})}),Object(x.jsx)("li",{className:a.pathname.startsWith("/account/profile/kyc")?"active":void 0,children:Object(x.jsx)(o.b,{to:"/account/profile/kyc",children:"KYC"})}),Object(x.jsx)("li",{className:a.pathname.startsWith("/account/profile/wallet")?"active":void 0,children:Object(x.jsx)(o.b,{to:"/account/profile/wallet",children:"Wallet"})})]})}),Object(x.jsx)("li",{className:"support ".concat(a.pathname.startsWith("/account/support")?"active":void 0),children:Object(x.jsxs)(o.b,{to:"/account/support",children:[Object(x.jsx)("div",{className:"icon",children:Object(x.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"19.872",height:"21.086",viewBox:"0 0 19.872 21.086",children:[Object(x.jsxs)("g",{id:"Group_4","data-name":"Group 4",transform:"translate(0 5.63)",children:[Object(x.jsxs)("g",{id:"Path_288","data-name":"Path 288",fill:"none",children:[Object(x.jsx)("path",{d:"M1,0H18.872a1,1,0,0,1,1,1V14.456a1,1,0,0,1-1,1H1a1,1,0,0,1-1-1V1A1,1,0,0,1,1,0Z",stroke:"none"}),Object(x.jsx)("path",{d:"M 2 2.000001907348633 L 2 13.45590209960938 L 17.87188148498535 13.45590209960938 L 17.87188148498535 2.000001907348633 L 2 2.000001907348633 M 1 1.9073486328125e-06 L 18.87188148498535 1.9073486328125e-06 C 19.42416000366211 1.9073486328125e-06 19.87188148498535 0.4477119445800781 19.87188148498535 1.000001907348633 L 19.87188148498535 14.45590209960938 C 19.87188148498535 15.00819206237793 19.42416000366211 15.45590209960938 18.87188148498535 15.45590209960938 L 1 15.45590209960938 C 0.4477100372314453 15.45590209960938 0 15.00819206237793 0 14.45590209960938 L 0 1.000001907348633 C 0 0.4477119445800781 0.4477100372314453 1.9073486328125e-06 1 1.9073486328125e-06 Z",stroke:"none",fill:"#fff"})]}),Object(x.jsxs)("g",{id:"Rectangle_3","data-name":"Rectangle 3",transform:"translate(0 8.832)",fill:"none",stroke:"#fff",strokeWidth:"2",children:[Object(x.jsx)("rect",{width:"19.872",height:"6.624",rx:"2",stroke:"none"}),Object(x.jsx)("rect",{x:"1",y:"1",width:"17.872",height:"4.624",rx:"1",fill:"none"})]})]}),Object(x.jsxs)("g",{id:"Rectangle_1134","data-name":"Rectangle 1134",transform:"translate(4)",fill:"none",stroke:"#fff",strokeWidth:"2",children:[Object(x.jsx)("path",{d:"M2,0h8a2,2,0,0,1,2,2V7a0,0,0,0,1,0,0H0A0,0,0,0,1,0,7V2A2,2,0,0,1,2,0Z",stroke:"none"}),Object(x.jsx)("rect",{x:"1",y:"1",width:"10",height:"5",rx:"1",fill:"none"})]})]})}),"Customer Support"]})})]}),Object(x.jsx)("main",{children:Object(x.jsxs)(l.d,{children:[Object(x.jsx)(l.b,{path:"/account/deals/:_id?",component:Ne.a}),Object(x.jsx)(l.b,{path:"/account/transaction/history",component:k}),Object(x.jsx)(l.b,{path:"/account/transaction",component:g}),Object(x.jsx)(l.b,{path:"/account/orders/current/:_id",component:we}),Object(x.jsx)(l.b,{path:"/account/orders/current",children:Object(x.jsx)(Ce,{status:"approved|shipped|refundPending",onClick:function(e){return s.push("/account/orders/current/".concat(e))}})}),Object(x.jsx)(l.b,{path:"/account/orders/pending/:_id",component:we}),Object(x.jsx)(l.b,{path:"/account/orders/pending",children:Object(x.jsx)(Ce,{status:"pending",onClick:function(e){return s.push("/account/orders/pending/".concat(e))}})}),Object(x.jsx)(l.b,{path:"/account/orders/history",children:Object(x.jsx)(Ce,{status:"delivered|cancelled|declined|refunded",onClick:function(e){return s.push("/account/orders/history/".concat(e))}})}),Object(x.jsx)(l.b,{path:"/account/orders/dispute/:_id",component:Te}),Object(x.jsx)(l.b,{path:"/account/orders/dispute",component:Fe}),Object(x.jsx)(l.b,{path:"/account/wallet",component:T}),Object(x.jsx)(l.b,{path:"/account/hold",component:v}),Object(x.jsx)(l.b,{path:"/account/transactions",component:k}),Object(x.jsx)(l.b,{path:"/account/myShop",component:me}),Object(x.jsx)(l.b,{path:"/account/cart",component:ke.a}),Object(x.jsx)(l.b,{path:"/account/myShopping",component:Ye}),Object(x.jsx)(l.b,{path:"/account/orderManagement",component:H}),Object(x.jsx)(l.b,{path:"/account/support/ticket/:_id",component:ge}),Object(x.jsx)(l.b,{path:"/account/support",component:ye}),Object(x.jsx)(l.b,{path:"/account/profile/edit",component:X}),Object(x.jsx)(l.b,{path:"/account/profile/kyc",component:X}),Object(x.jsx)(l.b,{path:"/account/profile/wallet",component:T}),Object(x.jsx)(l.b,{path:"/account/profile/customerCare",component:X}),Object(x.jsx)(l.b,{path:"/",component:kt})]})})]}),Object(x.jsxs)("ul",{className:"mobileMenu",children:[Object(x.jsx)("li",{className:"/account"===a.pathname||a.pathname.startsWith("/account/home")?"active":void 0,children:Object(x.jsxs)(o.b,{to:"/account/home",children:[Object(x.jsx)("div",{className:"icon",children:Object(x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"21.648",height:"21.513",viewBox:"0 0 21.648 21.513",children:Object(x.jsx)("path",{id:"Path_287","data-name":"Path 287",d:"M21.387,10.488A1.079,1.079,0,0,0,21.3,8.979L11.626.289a1.185,1.185,0,0,0-1.576,0L.342,9.44A1.073,1.073,0,0,0,.3,10.95l.245.258A1.043,1.043,0,0,0,2,11.321l.724-.665v9.762A1.071,1.071,0,0,0,3.78,21.5H7.563A1.071,1.071,0,0,0,8.62,20.418V13.591h4.81v6.828a1.04,1.04,0,0,0,.269.761.987.987,0,0,0,.723.323H18.45a1.071,1.071,0,0,0,1.057-1.084V10.776l.449.4c.245.222.765.042,1.168-.4Z",transform:"translate(-0.008 0.011)",fill:"#fff"})})}),"Home"]})}),Object(x.jsx)("li",{className:"deals ".concat(a.pathname.startsWith("/account/deals")?"active":void 0),children:Object(x.jsxs)(o.b,{to:"/account/deals",children:[Object(x.jsx)("div",{className:"icon",children:Object(x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26.55",height:"25.219",viewBox:"0 0 26.55 25.219",children:Object(x.jsx)("path",{id:"Path_1","data-name":"Path 1",d:"M-242.2-184.285h-13l26.55-10.786-4.252,25.219-5.531-10.637-2.127,4.68v-6.382l7.659-9.148h2.34",transform:"translate(255.198 195.071)",fill:"#fff"})})}),"Deals"]})}),Object(x.jsx)("li",{className:a.pathname.startsWith("/account/wallet")?"active":void 0,children:Object(x.jsxs)(o.b,{to:"/account/wallet",children:[Object(x.jsx)("div",{className:"icon",children:Object(x.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20.886",height:"22.948",viewBox:"0 0 20.886 22.948",children:[Object(x.jsxs)("g",{id:"Rectangle_2","data-name":"Rectangle 2",fill:"none",stroke:"#fff",strokeWidth:"2",children:[Object(x.jsx)("rect",{width:"20.886",height:"16.244",rx:"2",stroke:"none"}),Object(x.jsx)("rect",{x:"1",y:"1",width:"18.886",height:"14.244",rx:"1",fill:"none"})]}),Object(x.jsxs)("g",{id:"Rectangle_3","data-name":"Rectangle 3",transform:"translate(0 9.283)",fill:"none",stroke:"#fff",strokeWidth:"2",children:[Object(x.jsx)("rect",{width:"20.886",height:"6.962",rx:"2",stroke:"none"}),Object(x.jsx)("rect",{x:"1",y:"1",width:"18.886",height:"4.962",rx:"1",fill:"none"})]}),Object(x.jsx)("path",{id:"Path_2","data-name":"Path 2",d:"M-180.174-182v7.923l4.1-4.653,3.932,4.653V-182Z",transform:"translate(186.6 197.025)",fill:"#fff"})]})}),"Wallet"]})}),Object(x.jsx)("li",{className:"hold ".concat(a.pathname.startsWith("/account/hold")?"active":void 0),children:Object(x.jsxs)(o.b,{to:"/account/hold",children:[Object(x.jsx)("div",{className:"icon",children:Object(x.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"27",viewBox:"0 0 22 27",children:[Object(x.jsx)("text",{id:"_3","data-name":"3",transform:"translate(14 14) rotate(180)",fill:"#fff",fontSize:"10",fontFamily:"Ebrima-Bold, Ebrima",fontWeight:"700",children:Object(x.jsx)("tspan",{x:"0",y:"0",children:"3"})}),Object(x.jsxs)("g",{id:"Group_166","data-name":"Group 166",transform:"translate(-534.967 -611.816)",children:[Object(x.jsxs)("g",{id:"Rectangle_1132","data-name":"Rectangle 1132",transform:"translate(534.967 620.816)",fill:"none",stroke:"#fff",strokeWidth:"2",children:[Object(x.jsx)("rect",{width:"22",height:"18",rx:"4",stroke:"none"}),Object(x.jsx)("rect",{x:"1",y:"1",width:"20",height:"16",rx:"3",fill:"none"})]}),Object(x.jsxs)("g",{id:"Rectangle_1133","data-name":"Rectangle 1133",transform:"translate(539.967 611.816)",fill:"none",stroke:"#fff",strokeWidth:"2",children:[Object(x.jsx)("path",{d:"M6.5,0h0A6.5,6.5,0,0,1,13,6.5V11a0,0,0,0,1,0,0H0a0,0,0,0,1,0,0V6.5A6.5,6.5,0,0,1,6.5,0Z",stroke:"none"}),Object(x.jsx)("path",{d:"M6.5,1h0A5.5,5.5,0,0,1,12,6.5V9.214a.786.786,0,0,1-.786.786H1.786A.786.786,0,0,1,1,9.214V6.5A5.5,5.5,0,0,1,6.5,1Z",fill:"none"})]})]})]})}),"Hold"]})}),"seller"===c?Object(x.jsx)("li",{className:"trans ".concat(a.pathname.startsWith("/account/myShop")?"active":void 0),children:Object(x.jsxs)(o.b,{to:"/account/myShop/products",children:[Object(x.jsx)("div",{className:"icon",children:Object(x.jsxs)("svg",{id:"Group_283","data-name":"Group 283",xmlns:"http://www.w3.org/2000/svg",width:"28.407",height:"25.407",viewBox:"0 0 28.407 25.407",children:[Object(x.jsxs)("g",{id:"Path_4","data-name":"Path 4",transform:"translate(3)",fill:"none",children:[Object(x.jsx)("path",{d:"M12.7,0A12.7,12.7,0,1,1,0,12.7,12.7,12.7,0,0,1,12.7,0Z",stroke:"none"}),Object(x.jsx)("path",{d:"M 12.70325660705566 1.999996185302734 C 9.844316482543945 1.999996185302734 7.156496047973633 3.113327026367188 5.134906768798828 5.134906768798828 C 3.113327026367188 7.156496047973633 1.999996185302734 9.844316482543945 1.999996185302734 12.70325660705566 C 1.999996185302734 15.56219673156738 3.113327026367188 18.2500171661377 5.134906768798828 20.2716064453125 C 7.156496047973633 22.29318618774414 9.844316482543945 23.40651702880859 12.70325660705566 23.40651702880859 C 15.56219673156738 23.40651702880859 18.2500171661377 22.29318618774414 20.2716064453125 20.2716064453125 C 22.29318618774414 18.2500171661377 23.40651702880859 15.56219673156738 23.40651702880859 12.70325660705566 C 23.40651702880859 9.844316482543945 22.29318618774414 7.156496047973633 20.2716064453125 5.134906768798828 C 18.2500171661377 3.113327026367188 15.56219673156738 1.999996185302734 12.70325660705566 1.999996185302734 M 12.70325660705566 -3.814697265625e-06 C 19.71906661987305 -3.814697265625e-06 25.40651702880859 5.687446594238281 25.40651702880859 12.70325660705566 C 25.40651702880859 19.71906661987305 19.71906661987305 25.40651702880859 12.70325660705566 25.40651702880859 C 5.687446594238281 25.40651702880859 -3.814697265625e-06 19.71906661987305 -3.814697265625e-06 12.70325660705566 C -3.814697265625e-06 5.687446594238281 5.687446594238281 -3.814697265625e-06 12.70325660705566 -3.814697265625e-06 Z",stroke:"none",fill:"#fff"})]}),Object(x.jsxs)("g",{id:"Polygon_1","data-name":"Polygon 1",transform:"translate(6.001 12.353) rotate(-150)",fill:"#fff",children:[Object(x.jsx)("path",{d:"M 4.929044723510742 3.619362831115723 L 2.000004529953003 3.619362831115723 L 3.464524507522583 1.666669487953186 L 4.929044723510742 3.619362831115723 Z",stroke:"none"}),Object(x.jsx)("path",{d:"M 3.464524507522583 2.86102294921875e-06 L 6.929044723510742 4.619362831115723 L 4.291534423828125e-06 4.619362831115723 L 3.464524507522583 2.86102294921875e-06 Z",stroke:"none",fill:"#fff"})]}),Object(x.jsxs)("g",{id:"Rectangle_4","data-name":"Rectangle 4",transform:"translate(0 11.86) rotate(-22)",fill:"#336cf9",stroke:"#336cf9",strokeWidth:"1",children:[Object(x.jsx)("rect",{width:"6.929",height:"4.619",stroke:"none"}),Object(x.jsx)("rect",{x:"0.5",y:"0.5",width:"5.929",height:"3.619",fill:"none"})]}),Object(x.jsxs)("g",{id:"Group_5","data-name":"Group 5",transform:"translate(15.704 4.888)",children:[Object(x.jsx)("line",{id:"Line_3","data-name":"Line 3",y2:"9.239",transform:"translate(0 0)",fill:"none",stroke:"#fff",strokeWidth:"2"}),Object(x.jsx)("line",{id:"Line_4","data-name":"Line 4",x2:"6.929",y2:"2.31",transform:"translate(0 9.239)",fill:"none",stroke:"#fff",strokeWidth:"2"})]})]})}),"My Shop"]})}):Object(x.jsx)("li",{className:"trans ".concat(a.pathname.startsWith("/account/myShopping")?"active":void 0),children:Object(x.jsxs)(o.b,{to:"/account/myShopping/orders",children:[Object(x.jsx)("div",{className:"icon",children:Object(x.jsxs)("svg",{id:"Group_283","data-name":"Group 283",xmlns:"http://www.w3.org/2000/svg",width:"28.407",height:"25.407",viewBox:"0 0 28.407 25.407",children:[Object(x.jsxs)("g",{id:"Path_4","data-name":"Path 4",transform:"translate(3)",fill:"none",children:[Object(x.jsx)("path",{d:"M12.7,0A12.7,12.7,0,1,1,0,12.7,12.7,12.7,0,0,1,12.7,0Z",stroke:"none"}),Object(x.jsx)("path",{d:"M 12.70325660705566 1.999996185302734 C 9.844316482543945 1.999996185302734 7.156496047973633 3.113327026367188 5.134906768798828 5.134906768798828 C 3.113327026367188 7.156496047973633 1.999996185302734 9.844316482543945 1.999996185302734 12.70325660705566 C 1.999996185302734 15.56219673156738 3.113327026367188 18.2500171661377 5.134906768798828 20.2716064453125 C 7.156496047973633 22.29318618774414 9.844316482543945 23.40651702880859 12.70325660705566 23.40651702880859 C 15.56219673156738 23.40651702880859 18.2500171661377 22.29318618774414 20.2716064453125 20.2716064453125 C 22.29318618774414 18.2500171661377 23.40651702880859 15.56219673156738 23.40651702880859 12.70325660705566 C 23.40651702880859 9.844316482543945 22.29318618774414 7.156496047973633 20.2716064453125 5.134906768798828 C 18.2500171661377 3.113327026367188 15.56219673156738 1.999996185302734 12.70325660705566 1.999996185302734 M 12.70325660705566 -3.814697265625e-06 C 19.71906661987305 -3.814697265625e-06 25.40651702880859 5.687446594238281 25.40651702880859 12.70325660705566 C 25.40651702880859 19.71906661987305 19.71906661987305 25.40651702880859 12.70325660705566 25.40651702880859 C 5.687446594238281 25.40651702880859 -3.814697265625e-06 19.71906661987305 -3.814697265625e-06 12.70325660705566 C -3.814697265625e-06 5.687446594238281 5.687446594238281 -3.814697265625e-06 12.70325660705566 -3.814697265625e-06 Z",stroke:"none",fill:"#fff"})]}),Object(x.jsxs)("g",{id:"Polygon_1","data-name":"Polygon 1",transform:"translate(6.001 12.353) rotate(-150)",fill:"#fff",children:[Object(x.jsx)("path",{d:"M 4.929044723510742 3.619362831115723 L 2.000004529953003 3.619362831115723 L 3.464524507522583 1.666669487953186 L 4.929044723510742 3.619362831115723 Z",stroke:"none"}),Object(x.jsx)("path",{d:"M 3.464524507522583 2.86102294921875e-06 L 6.929044723510742 4.619362831115723 L 4.291534423828125e-06 4.619362831115723 L 3.464524507522583 2.86102294921875e-06 Z",stroke:"none",fill:"#fff"})]}),Object(x.jsxs)("g",{id:"Rectangle_4","data-name":"Rectangle 4",transform:"translate(0 11.86) rotate(-22)",fill:"#336cf9",stroke:"#336cf9",strokeWidth:"1",children:[Object(x.jsx)("rect",{width:"6.929",height:"4.619",stroke:"none"}),Object(x.jsx)("rect",{x:"0.5",y:"0.5",width:"5.929",height:"3.619",fill:"none"})]}),Object(x.jsxs)("g",{id:"Group_5","data-name":"Group 5",transform:"translate(15.704 4.888)",children:[Object(x.jsx)("line",{id:"Line_3","data-name":"Line 3",y2:"9.239",transform:"translate(0 0)",fill:"none",stroke:"#fff",strokeWidth:"2"}),Object(x.jsx)("line",{id:"Line_4","data-name":"Line 4",x2:"6.929",y2:"2.31",transform:"translate(0 9.239)",fill:"none",stroke:"#fff",strokeWidth:"2"})]})]})}),"My Orders"]})})]})]})}},5:function(e,t,c){"use strict";c.d(t,"b",(function(){return o})),c.d(t,"a",(function(){return j}));var n=c(4),s=c(1),a=c(39),i=c.n(a),r=c(2),l=c(0),o=Object(s.forwardRef)((function(e,t){var c=e.containerClass,i=e.open,o=e.setOpen,j=e.children,d=e.className,u=e.onBackdropClick,b=e.backdropClass,h=e.style,O=e.head,x=e.label;return Object(s.useEffect)((function(){if(c){var e=document.querySelector("#portal");return e.classList.add(c),function(){return e.classList.remove(c)}}})),i?Object(a.createPortal)(Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("div",{className:"modalBackdrop ".concat(b),onClick:function(e){e.stopPropagation(),null===u||void 0===u||u()}}),Object(l.jsxs)("div",{style:Object(n.a)({},h),ref:t,className:"modal ".concat(d||""),children:[O&&Object(l.jsxs)("div",{className:"head",children:[Object(l.jsx)("p",{className:"modalName",children:x}),Object(l.jsx)("button",{onClick:function(){return null===o||void 0===o?void 0:o(!1)},children:Object(l.jsx)(r.G,{})})]}),j]})]}),document.querySelector("#portal")):null})),j=function(e){var t=e.className,c=e.label,n=e.question,s=e.callback,a=function(){return i.a.render(Object(l.jsx)(l.Fragment,{}),document.querySelector("#confirm"))},o=function(){return a()};i.a.render(Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("div",{className:"modalBackdrop"}),Object(l.jsxs)("div",{className:"modal confirm ".concat(t||""),children:[Object(l.jsxs)("div",{className:"head",children:[Object(l.jsx)("p",{className:"modalName",children:c}),Object(l.jsx)("button",{onClick:o,children:Object(l.jsx)(r.G,{})})]}),Object(l.jsxs)("div",{className:"content",children:[Object(l.jsx)("p",{className:"question",children:n}),Object(l.jsxs)("div",{className:"actions",children:[Object(l.jsx)("button",{className:"yes",onClick:function(){s(),a()},children:"Confirm"}),Object(l.jsx)("button",{className:"no",onClick:o,children:"Decline"})]})]})]})]}),document.querySelector("#confirm"))}},65:function(e,t,c){"use strict";c.d(t,"c",(function(){return m})),c.d(t,"a",(function(){return v})),c.d(t,"b",(function(){return y}));var n=c(4),s=c(3),a=c(1),i=c(2),r=c(34),l=c(9),o=c(17),j=c(6),d=c(5),u=c(46),b=c(22),h=c.n(b),O=c(0);c(194);var x=function(e){var t,c,n=e.data,s=Object(a.useContext)(l.d),r=s.user,o=s.userType,d=s.setCart,u=Object(i.J)({product:n,gst:null===(t=n.user)||void 0===t?void 0:t.gst});return Object(O.jsxs)("div",{className:"product",children:[Object(O.jsx)(j.b,{to:"/marketplace/".concat(n._id),children:Object(O.jsx)("div",{className:"thumb ".concat(n.images[0]?"":"noThumb"),children:Object(O.jsx)(i.n,{src:n.images[0]||"/open_box.png"})})}),Object(O.jsxs)("div",{className:"detail",children:[Object(O.jsx)("h3",{children:n.name}),Object(O.jsx)("p",{className:"dscr",children:n.dscr}),Object(O.jsxs)("div",{className:"price",children:[Object(O.jsx)("span",{className:"symbol",children:"\u20b9 "}),u," ",u!==Object(i.J)({product:n,gst:n.user.gst,discount:!1})&&Object(O.jsx)("span",{className:"originalPrice",children:Object(i.J)({product:n,gst:null===(c=n.user)||void 0===c?void 0:c.gst,discount:!1})})]})]}),Object(O.jsxs)("div",{className:"actions",children:["buyer"===o&&(null===n||void 0===n?void 0:n.user._id)===(null===r||void 0===r?void 0:r._id)&&Object(O.jsx)("p",{className:"note",children:"Can't buy product from self."}),Object(O.jsx)("button",{disabled:!n.available||(null===n||void 0===n?void 0:n.user._id)===(null===r||void 0===r?void 0:r._id),onClick:function(){d((function(e){return Object(i.H)(e,n)}))},children:"Add to Cart"})]})]})},m=function(e){var t,c,n,r,o,u,b=e.match,h=Object(a.useContext)(l.d),x=h.user,m=h.setCart,p=h.userType,v=Object(a.useState)(null),g=Object(s.a)(v,2),y=g[0],k=g[1],N=Object(a.useState)(null),C=Object(s.a)(N,2),S=C[0],w=C[1];return Object(a.useEffect)((function(){fetch("/api/singleProduct?_id=".concat(b.params._id)).then((function(e){return e.json()})).then((function(e){"ok"===e.code?k(e.product):w(Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("button",{onClick:function(){return w(null)},children:"Okay"}),Object(O.jsxs)("div",{children:[Object(O.jsx)(i.i,{}),Object(O.jsx)("h4",{children:"Product does not exists."})]})]}))})).catch((function(e){console.log(e),w(Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("button",{onClick:function(){return w(null)},children:"Okay"}),Object(O.jsxs)("div",{children:[Object(O.jsx)(i.i,{}),Object(O.jsx)("h4",{children:"Could not get product. Make sure you're online."})]})]}))}))}),[]),y?Object(O.jsxs)("div",{className:"generic singleProduct",children:[Object(O.jsx)(i.m,{}),Object(O.jsxs)("div",{className:"content",children:[Object(O.jsx)(f,{images:y.images}),Object(O.jsxs)("div",{className:"detail",children:[Object(O.jsx)("h1",{children:y.name}),Object(O.jsx)("p",{children:y.dscr}),Object(O.jsxs)("p",{children:["product"===y.type&&Object(O.jsxs)(O.Fragment,{children:["Available: ",y.available&&y.available," ",0===y.available&&Object(O.jsx)(O.Fragment,{children:"Out of stock"}),y.available<7&&y.available>0&&Object(O.jsx)(O.Fragment,{children:"Low stock"})]}),"product"!==y.type&&Object(O.jsxs)(O.Fragment,{children:["Availability:"," ",y.available?"Available":"Unavailable"]})]}),Object(O.jsxs)("p",{className:"price",children:[Object(O.jsx)("label",{children:"Price: "})," ",Object(O.jsx)("span",{className:"symbol",children:"\u20b9"}),Object(i.J)({product:y,gst:null===(t=y.user)||void 0===t?void 0:t.gst})," ",Object(i.J)({product:y,gst:null===(c=y.user)||void 0===c?void 0:c.gst})!==Object(i.J)({product:y,gst:null===(n=y.user)||void 0===n?void 0:n.gst,discount:!1})&&Object(O.jsx)("span",{className:"originalPrice",children:Object(i.J)({product:y,gst:null===(r=y.user)||void 0===r?void 0:r.gst,discount:!1})})]}),Object(O.jsxs)("div",{className:"seller",children:[Object(O.jsx)("label",{children:"Being sold by:"}),Object(O.jsx)(j.b,{to:"/marketplace?seller=".concat(null===(o=y.user)||void 0===o?void 0:o._id),children:Object(O.jsxs)("div",{className:"profile",children:[Object(O.jsx)(i.n,{src:y.user.profileImg||"/profile-user.jpg"}),Object(O.jsxs)("p",{className:"name",children:[y.user.firstName," ",y.user.lastName," ",Object(O.jsx)("span",{className:"contact",children:y.user.phone})]})]})})]}),Object(O.jsxs)("div",{className:"actions",children:[Object(O.jsx)("button",{disabled:!y.available||"seller"===p||(null===(u=y.user)||void 0===u?void 0:u._id)===(null===x||void 0===x?void 0:x._id),onClick:function(){m((function(e){return Object(i.H)(e,y)}))},children:"Add to Cart"}),"seller"===p&&(null===y||void 0===y?void 0:y.user._id)!==(null===x||void 0===x?void 0:x._id)&&Object(O.jsx)("p",{className:"note",children:"Switch to buyer profile to buy this product."}),"buyer"===p&&(null===y||void 0===y?void 0:y.user._id)===(null===x||void 0===x?void 0:x._id)&&Object(O.jsx)("p",{className:"note",children:"Can't buy product from self."})]})]}),Object(O.jsx)(d.b,{className:"msg",open:S,children:S})]}),Object(O.jsx)(i.l,{})]}):Object(O.jsxs)("div",{className:"generic singleProduct",children:[Object(O.jsx)(i.m,{}),"loading",Object(O.jsx)(d.b,{className:"msg",open:S,children:S}),Object(O.jsx)(i.l,{})]})},f=function(e){var t=e.images,c=Object(a.useState)(t[0]),n=Object(s.a)(c,2),r=n[0],l=n[1];return Object(O.jsxs)("div",{className:"gallery",children:[Object(O.jsx)(p,{img:r}),Object(O.jsxs)("div",{className:"thumbs",children:[t.map((function(e,t){return Object(O.jsx)(i.n,{src:e,onClick:function(){return l(e)}},t)})),0===t.length&&Object(O.jsx)("p",{children:"No image was provided by the seller."})]})]})},p=function(e){var t=e.img,c=Object(a.useState)(t||"/open_box.png"),n=Object(s.a)(c,2),i=n[0],r=n[1],l=Object(a.useState)(null),o=Object(s.a)(l,2),j=o[0],d=o[1],u=Object(a.useState)(!1),b=Object(s.a)(u,2),h=b[0],x=b[1],m=Object(a.useState)({}),f=Object(s.a)(m,2),p=f[0],v=f[1],g=Object(a.useRef)();return Object(a.useLayoutEffect)((function(){var e;d(null===(e=g.current)||void 0===e?void 0:e.getBoundingClientRect())}),[]),Object(a.useEffect)((function(){r(t||"/open_box.png")}),[t]),Object(O.jsx)("div",{ref:g,className:"mainView ".concat(t?"":"noImg"),onMouseMove:function(e){if(t){var c=.65*Math.abs(Math.round((e.clientX-j.x)/(j.width/100))),n=.65*Math.round((e.clientY-j.y)/(j.height/100));v({transform:"scale(2) translateY(".concat(Math.max(30-n,-30),"%) translateX(").concat(Math.max(30-c,-30),"%)")})}},onTouchStart:function(e){document.querySelector("body").style.overflow="hidden",x(!0)},onTouchEnd:function(e){document.querySelector("body").style.overflow="auto",x(!1)},onTouchMove:function(e){if(t){var c=.65*Math.abs(Math.round((e.touches[0].clientX-j.x)/(j.width/100))),n=.65*Math.round((e.touches[0].clientY-j.y)/(j.height/100));v({transform:"scale(2) translateY(".concat(Math.max(30-n,-30),"%) translateX(").concat(Math.max(30-c,-30),"%)"),transition:"none"})}},onMouseEnter:function(){return x(!0)},onMouseLeave:function(){return x(!1)},children:Object(O.jsx)("img",{className:h?"scale":"",style:h?p:{},src:i,onError:function(){return r("/img_err.png")}})})},v=function(){var e=Object(a.useContext)(l.d),t=(e.setCart,e.cart),c=Object(a.useState)(!0),n=Object(s.a)(c,2),r=n[0],o=n[1],j=Object(a.useState)(null),u=Object(s.a)(j,2),b=u[0],h=u[1],x=Object(a.useState)(null),m=Object(s.a)(x,2),f=m[0],p=m[1];return Object(a.useEffect)((function(){o(!0),fetch("/api/getCartDetail",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({cart:t})}).then((function(e){return e.json()})).then((function(e){o(!1),"ok"===e.code&&h(e.carts)})).catch((function(e){console.log(e),o(!1),p(Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("button",{onClick:function(){return p(null)},children:"Okay"}),Object(O.jsxs)("div",{children:[Object(O.jsx)(i.i,{}),Object(O.jsx)("h4",{children:"Could not get cart detail. Make sure you're online."})]})]}))}))}),[t]),b?Object(O.jsxs)("div",{className:"fullCart",children:[Object(O.jsx)("div",{className:"head",children:Object(O.jsx)("h1",{children:"Cart"})}),Object(O.jsxs)("div",{className:"allCarts",children:[b.map((function(e){var t=e.seller,c=e.products;return(null===c||void 0===c?void 0:c.length)?Object(O.jsx)(g,{seller:t,products:c,loading:r},t._id):null})),0===(null===b||void 0===b?void 0:b.length)&&Object(O.jsx)("p",{children:"Cart is empty"})]}),Object(O.jsx)(d.b,{open:f,className:"msg",children:f})]}):Object(O.jsxs)("div",{className:"fullCart",children:[Object(O.jsx)("div",{className:"head",children:Object(O.jsx)("h1",{children:"Cart"})}),Object(O.jsx)("div",{className:"allCarts",children:"Cart is empty."}),Object(O.jsx)(d.b,{open:f,className:"msg",children:f})]})},g=function(e){var t,c,o,b,h,x,m,f,p,v=e.seller,g=e.products,k=e.loading,N=Object(a.useContext)(l.d),C=N.user,S=N.setCart,w=N.config,M=Object(a.useState)(null),_=Object(s.a)(M,2),D=_[0],P=_[1],F=Object(a.useState)({name:C.firstName+" "+C.lastName,phone:C.phone}),A=Object(s.a)(F,2),T=A[0],R=A[1],Y=Object(a.useState)(!1),q=Object(s.a)(Y,2),B=q[0],I=q[1],E=Object(a.useState)(!1),L=Object(s.a)(E,2),H=L[0],V=L[1],U=Object(a.useState)(!1),Z=Object(s.a)(U,2),G=Z[0],W=Z[1],J=+(g.reduce((function(e,t){return(e+Object(i.J)({product:t.product,gst:v.gst})*t.qty).fix()}),0)+((null===(t=v.shopInfo)||void 0===t?void 0:t.shippingCost)||0)).fix(),z=(J*((100+w.fee)/100)-J).fix();return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("div",{className:"shop",children:[Object(O.jsx)("div",{className:"seller",children:Object(O.jsxs)("div",{className:"profile",children:[Object(O.jsx)(i.n,{src:v.profileImg||"/profile-user.jpg"}),Object(O.jsxs)("p",{className:"name",children:[v.firstName," ",v.lastName," \u2022"," ",Object(O.jsx)("span",{className:"role",children:"Seller"}),Object(O.jsx)("span",{className:"contact",children:v.phone})]})]})}),Object(O.jsxs)("div",{className:"cart",children:[Object(O.jsxs)("ul",{className:"items",children:[g.map((function(e,t){var c=e.product,n=e.qty;return Object(O.jsx)(y,{gst:v.gst,product:c,qty:n},t)})),Object(O.jsxs)("div",{className:"total",children:[Object(O.jsxs)("p",{children:[Object(O.jsx)("label",{children:"Shipping"}),"\u20b9",null===(c=v.shopInfo)||void 0===c?void 0:c.shippingCost]}),Object(O.jsxs)("p",{children:[Object(O.jsxs)("label",{children:["Delivery Pay Fee ",w.fee,"%"]}),"\u20b9",z]}),Object(O.jsx)("hr",{}),Object(O.jsxs)("p",{children:[Object(O.jsx)("label",{children:"Total"}),"\u20b9",J+z]})]}),Object(O.jsxs)("div",{className:"terms",children:[Object(O.jsxs)("p",{children:[Object(O.jsx)("label",{children:"Refundable: "}),(null===(o=v.shopInfo)||void 0===o?void 0:o.refundable)||"N/A"]}),Object(O.jsxs)("p",{children:["By proceeding, I agree to seller's all"," ",Object(O.jsx)("span",{className:"btn",onClick:function(){return W(!0)},children:"Terms"})]})]})]}),Object(O.jsx)("span",{className:"devider"}),Object(O.jsxs)("div",{className:"deliveryDetail",children:[Object(O.jsxs)("div",{className:"head",children:[Object(O.jsx)("h3",{children:"Delivery Information"}),Object(O.jsx)("button",{onClick:function(){return I(!0)},children:"Edit"})]}),Object(O.jsx)("ul",{children:Object.entries(T).map((function(e,t){var c=Object(s.a)(e,2),n=c[0],a=c[1];return Object(O.jsxs)("li",{children:[Object(O.jsx)("label",{children:n}),a]},t)}))})]})]}),Object(O.jsx)("div",{className:"actions",children:Object(O.jsx)("button",{onClick:function(){return V(!0)},children:"Place order"})}),Object(O.jsx)(d.b,{open:B,head:!0,label:"Delivery Address",setOpen:I,className:"addAddress",children:Object(O.jsx)(r.a,{client:{name:T.name,phone:T.phone,address:T},onSuccess:function(e){R((function(t){return Object(n.a)(Object(n.a)({},t),e.address)})),I(!1)},onCancel:function(){return I(!1)}})}),Object(O.jsx)(d.b,{className:"milestoneRequest",head:!0,label:"Checkout",open:H,setOpen:V,children:Object(O.jsx)(u.MilestoneForm,{action:"create",client:v,definedAmount:J+z,order:{products:g,deliveryDetail:Object(n.a)(Object(n.a)({},T),{},{deliveryWithin:null===(b=v.shopInfo)||void 0===b?void 0:b.deliveryWithin}),total:J,refundable:null===(h=v.shopInfo)||void 0===h?void 0:h.refundable,terms:null===(x=v.shopInfo)||void 0===x?void 0:x.terms,shippingCost:null===(m=v.shopInfo)||void 0===m?void 0:m.shippingCost},onSuccess:function(e){e.milestone;var t=e.order;S((function(e){return e.filter((function(e){var c=e.product;return!t.products.some((function(e){return e.product._id===c._id}))}))})),V(!1),P(Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("button",{onClick:function(){return P(null)},children:"Okay"}),Object(O.jsxs)("div",{children:[Object(O.jsx)(i.B,{}),Object(O.jsx)("h4",{children:"Order successfully submitted."}),Object(O.jsx)(j.b,{to:"/account/myShopping/orders",children:"View All orders"})]})]}))}})}),Object(O.jsx)(d.b,{open:G,setOpen:W,head:!0,label:"Seller's Terms",className:"shopTerms",children:Object(O.jsx)("ul",{children:null===(f=v.shopInfo)||void 0===f||null===(p=f.terms)||void 0===p?void 0:p.map((function(e,t){return Object(O.jsx)("li",{children:e},t)}))})}),Object(O.jsx)(d.b,{className:"msg",open:D,children:D})]}),k&&Object(O.jsx)("div",{className:"spinnerContainer",children:Object(O.jsx)("div",{className:"spinner"})})]})},y=function(e){var t,c=e.product,s=e.gst,r=e.qty,o=Object(a.useContext)(l.d).setCart,j=Object(i.J)({product:c,gst:s||(null===(t=c.user)||void 0===t?void 0:t.gst)});return Object(O.jsxs)("li",{className:"item ".concat(!c.images.length&&"noImg"),children:[Object(O.jsx)(i.n,{src:c.images[0]||"/open_box.png"}),Object(O.jsxs)("div",{className:"detail",children:[Object(O.jsx)("p",{className:"name",children:c.name}),Object(O.jsxs)("div",{className:"qty",children:["QTY:"," ",Object(O.jsxs)("div",{className:"addRemove",children:[Object(O.jsx)("button",{onClick:function(){o((function(e){return e.map((function(e){return e.product._id===c._id?Object(n.a)(Object(n.a)({},e),{},{qty:e.qty-1}):e})).filter((function(e){return e.qty>0}))}))},children:Object(O.jsx)(i.q,{})}),r,Object(O.jsx)("button",{onClick:function(){o((function(e){return e.map((function(e){return e.product._id===c._id?Object(n.a)(Object(n.a)({},e),{},{qty:e.qty+1}):e}))}))},children:Object(O.jsx)(i.u,{})})]})]})]}),Object(O.jsxs)("div",{className:"price",children:[Object(O.jsxs)("span",{className:"qty",children:[j," x ",r]}),"\u20b9",(j*r).fix()]}),(null===s||void 0===s?void 0:s.verified)&&Object(O.jsxs)(i.D,{children:["Including ",c.gst,"% GST."]})]})};t.d=function(e){var t=e.history,c=e.location,r=(e.match,Object(a.useContext)(l.d).userType),j=Object(a.useState)([]),u=Object(s.a)(j,2),b=u[0],m=u[1],f=Object(a.useState)(0),p=Object(s.a)(f,2),v=(p[0],p[1]),g=Object(a.useState)(!1),y=Object(s.a)(g,2),k=(y[0],y[1],Object(a.useState)(h.a.parse(c.search).type||"")),N=Object(s.a)(k,2),C=N[0],S=N[1],w=Object(a.useState)(h.a.parse(c.search).perPage||20),M=Object(s.a)(w,2),_=M[0],D=M[1],P=Object(a.useState)(h.a.parse(c.search).page||1),F=Object(s.a)(P,2),A=F[0],T=(F[1],Object(a.useState)(h.a.parse(c.search).q||"")),R=Object(s.a)(T,2),Y=R[0],q=R[1],B=Object(a.useState)({column:h.a.parse(c.search).sort||"popularity",order:h.a.parse(c.search).order||"dsc"}),I=Object(s.a)(B,2),E=I[0],L=I[1],H=Object(a.useState)([]),V=Object(s.a)(H,2),U=V[0],Z=V[1],G=Object(a.useState)(null),W=Object(s.a)(G,2),J=W[0],z=W[1],K=Object(a.useState)(""),$=Object(s.a)(K,2),Q=$[0],X=$[1],ee=Object(a.useState)(h.a.parse(c.search).seller),te=Object(s.a)(ee,2),ce=te[0],ne=(te[1],Object(a.useState)(null)),se=Object(s.a)(ne,2),ae=se[0],ie=se[1];return Object(a.useEffect)((function(){fetch("/api/getProducts".concat(c.search)).then((function(e){return e.json()})).then((function(e){"ok"===e.code?(v(e.total),Z(e.products),e.seller?(ie(e.seller),e.categories&&m(e.categories)):ie(null)):z(Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("button",{onClick:function(){return z(null)},children:"Okay"}),Object(O.jsxs)("div",{children:[Object(O.jsx)(i.i,{}),Object(O.jsx)("h4",{children:"Could not get products. Please try again."})]})]}))})).catch((function(e){console.log(e),z(Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("button",{onClick:function(){return z(null)},children:"Okay"}),Object(O.jsxs)("div",{children:[Object(O.jsx)(i.i,{}),Object(O.jsx)("h4",{children:"Could not get products. Make sure you're online."})]})]}))}))}),[c.search]),Object(a.useEffect)((function(){t.replace({pathname:t.location.pathname,search:"?"+new URLSearchParams(Object(n.a)(Object(n.a)(Object(n.a)({},ce&&{seller:ce}),{},{q:Y,page:A,perPage:_,sort:E.column,order:E.order},C&&{type:C}),Q&&{category:Q})).toString()})}),[_,A,Y,E,ce,C,Q]),Object(O.jsxs)("div",{className:"generic marketplace",children:[Object(O.jsx)(i.m,{}),"seller"===r&&Object(O.jsx)(o.a,{to:"/account/myShop/products"}),Object(O.jsx)("div",{style:{display:"none"},children:Object(O.jsx)(i.G,{})}),Object(O.jsx)("div",{className:"benner",children:Object(O.jsx)("h1",{children:"Delivery Pay Marketplace"})}),Object(O.jsxs)("div",{className:"content",children:[Object(O.jsx)("div",{className:"sidebar",children:Object(O.jsxs)("div",{className:"categories",children:[Object(O.jsxs)("p",{className:"label",children:["Categories"," ",Q&&Object(O.jsx)("button",{className:"clear",onClick:function(){return X("")},children:Object(O.jsx)(i.G,{})})]}),Object(O.jsxs)("ul",{children:[b.map((function(e){return Object(O.jsx)("li",{className:e===Q?"active":"",onClick:function(){return X(e)},children:e},e)})),0===b.length&&Object(O.jsx)("li",{className:"placeholder",children:"No category found."})]})]})}),Object(O.jsxs)("div",{className:"mainContent",children:[ae&&Object(O.jsxs)("div",{className:"sellerDetail",children:["Products from"," ",Object(O.jsxs)("div",{className:"profile",children:[Object(O.jsx)(i.n,{src:ae.profileImg||"/profile-user.jpg"}),Object(O.jsxs)("p",{className:"name",children:[ae.firstName," ",ae.lastName,Object(O.jsx)("span",{className:"contact",children:ae.phone})]})]})]}),Object(O.jsxs)("div",{className:"filters",children:[Object(O.jsxs)("section",{children:[Object(O.jsx)("label",{children:"Per Page:"}),Object(O.jsx)(i.h,{defaultValue:0,options:[{label:"20",value:20},{label:"30",value:30},{label:"50",value:50}],onChange:function(e){return D(e.value)}})]}),Object(O.jsxs)("section",{className:"search",children:[Object(O.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"23",height:"23",viewBox:"0 0 23 23",children:Object(O.jsx)("path",{id:"Icon_ionic-ios-search","data-name":"Icon ionic-ios-search",d:"M27.23,25.828l-6.4-6.455a9.116,9.116,0,1,0-1.384,1.4L25.8,27.188a.985.985,0,0,0,1.39.036A.99.99,0,0,0,27.23,25.828ZM13.67,20.852a7.2,7.2,0,1,1,5.091-2.108A7.155,7.155,0,0,1,13.67,20.852Z",transform:"translate(-4.5 -4.493)",fill:"#707070",opacity:"0.74"})}),Object(O.jsx)("input",{value:Y,onChange:function(e){q(e.target.value)},placeholder:"Search for products or services"}),Y&&Object(O.jsx)("button",{onClick:function(){return q("")},children:Object(O.jsx)(i.G,{})})]}),Object(O.jsxs)("section",{className:"type",children:[Object(O.jsx)("label",{children:"Type:"}),Object(O.jsx)(i.h,{defaultValue:C,options:[{label:"All",value:""},{label:"Product",value:"product"},{label:"Service",value:"service"},{label:"Other",value:"other"}],onChange:function(e){return S(e.value)}})]}),Object(O.jsxs)("section",{className:"sort",children:[Object(O.jsx)("label",{children:"Sort by:"}),Object(O.jsx)(i.h,{defaultValue:0,options:[{label:"popularity",value:{column:"popularity",order:"dsc"}},{label:"Price high-low",value:{column:"price",order:"dsc"}},{label:"Price low-high",value:{column:"price",order:"asc"}}],onChange:function(e){return L(e.value)}})]})]}),Object(O.jsxs)("div",{className:"products ".concat(0===U.length?"empty":""),children:[U.map((function(e){return Object(O.jsx)(x,{data:e},e._id)})),0===U.length&&Object(O.jsxs)("div",{className:"placeholder",children:[Object(O.jsx)(i.n,{src:"/open_box.png"}),Object(O.jsx)("p",{children:"No Product Found"})]})]})]}),Object(O.jsx)(d.b,{className:"msg",open:J,children:J})]}),Object(O.jsx)(i.l,{})]})}},9:function(e,t,c){"use strict";c.d(t,"d",(function(){return d})),c.d(t,"c",(function(){return u})),c.d(t,"a",(function(){return b})),c.d(t,"b",(function(){return h}));var n=c(12),s=c(4),a=c(3),i=c(1),r=c(17),l=c(2),o=c(28),j=c(0),d=Object(i.createContext)(),u=function(e){var t=e.children,c=Object(i.useState)(null),n=Object(a.a)(c,2),s=n[0],r=n[1],o=Object(i.useState)(!1),u=Object(a.a)(o,2),b=u[0],h=u[1],O=Object(i.useState)(l.o.get("userType")||""),x=Object(a.a)(O,2),m=x[0],f=x[1],p=Object(i.useState)(JSON.parse(l.o.get("localCart"))||[]),v=Object(a.a)(p,2),g=v[0],y=v[1],k=Object(i.useState)({}),N=Object(a.a)(k,2),C=N[0],S=N[1];return Object(i.useEffect)((function(){l.o.set("localCart",JSON.stringify(g))}),[g]),Object(i.useEffect)((function(){"seller"===m?document.body.style.setProperty("--blue","#2598b6"):document.body.style.setProperty("--blue","#3b2ab4"),l.o.set("userType",m)}),[m]),Object(i.useEffect)((function(){fetch("/api/siteConfig").then((function(e){return e.json()})).then((function(e){"ok"===e.code&&S(e.config||{})})).catch((function(e){console.log(e)}))}),[]),Object(j.jsx)(d.Provider,{value:{user:s,setUser:r,isAuthenticated:b,setIsAuthenticated:h,cart:g,setCart:y,userType:m,setUserType:f,config:C},children:t})},b=Object(i.createContext)(),h=function(e){var t=e.children,c=Object(r.g)(),l=Object(i.useContext)(d).user,u=Object(i.useState)(!0),h=Object(a.a)(u,2),O=(h[0],h[1]),x=Object(i.useState)([]),m=Object(a.a)(x,2),f=m[0],p=m[1],v=Object(i.useState)([]),g=Object(a.a)(v,2),y=g[0],k=g[1],N=Object(i.useState)(0),C=Object(a.a)(N,2),S=C[0],w=C[1],M=Object(i.useRef)(!1);return Object(i.useEffect)((function(){l&&0===y.length&&fetch("/api/getChat").then((function(e){return e.json()})).then((function(e){k((function(){return e.map((function(e){var t,c=(null===(t=l.blockList)||void 0===t?void 0:t.some((function(t){return t===e.client._id})))?"blocked":e.clientBlock?"blockedByClient":"";return Object(s.a)(Object(s.a)(Object(s.a)({},e),e.client.phone&&{status:c}),{},{unread:e.messages.filter((function(t){return new Date(t.createdAt)>new Date(e.lastSeen)})).length})}))}))})).catch((function(e){console.log(e)}))}),[l]),Object(i.useEffect)((function(){o.b.on("connect",(function(){console.log("connected")})),o.b.on("disconnect",(function(){console.log("disconnected from socket")}));var e=function(e){return O(!0)},t=function(e){return O(!1)};return window.addEventListener("focus",e),window.addEventListener("blur",t),function(){window.removeEventListener("focus",e),window.removeEventListener("blur",t)}}),[]),Object(i.useEffect)((function(){!M.current&&l&&(o.b.on("messageToUser",(function(e){var t=O&&c.location.pathname.replace("/account/deals/","")===e.from;e.from&&(k((function(t){return t.map((function(t){var c=[].concat(Object(n.a)(t.messages),[Object(s.a)(Object(s.a)({},e),{},{createdAt:new Date,updatedAt:new Date})]);if(e.from===(null===l||void 0===l?void 0:l._id)){if(t.client._id===e.to)return Object(s.a)(Object(s.a)({},t),{},{messages:c})}else if(t.client._id===e.from)return Object(s.a)(Object(s.a)({},t),{},{messages:c,unread:c.filter((function(e){return new Date(e.createdAt)>new Date(t.lastSeen)})).length});return t}))})),t||o.b.emit("clientAway",e))})),o.b.on("newChat",(function(e){k((function(t){return[Object(s.a)({},e.chat)].concat(Object(n.a)(t.filter((function(t){var c;return t._id!==(null===(c=e.chat)||void 0===c?void 0:c._id)}))))}))})),M.current=!0)}),[l]),Object(i.useEffect)((function(){y.map((function(e){return e._id})).join("")!==f.join("")&&(o.b.emit("joinRooms",{rooms:y.map((function(e){return e._id}))}),p(y.map((function(e){return e._id}))))}),[y]),Object(i.useEffect)((function(){w(y.reduce((function(e,t){return e+t.unread}),0))}),[y]),Object(j.jsx)(b.Provider,{value:{contacts:y,setContacts:k,unread:S},children:t})}}},[[197,1,2]]]);
//# sourceMappingURL=main.07d5350e.chunk.js.map