(this["webpackJsonpdeliveryPay-react"]=this["webpackJsonpdeliveryPay-react"]||[]).push([[5],{160:function(e,t,n){"use strict";n.r(t),n.d(t,"UpiForm",(function(){return h})),n.d(t,"BankCardForm",(function(){return O})),n.d(t,"NetBankingForm",(function(){return m})),n.d(t,"BankCard",(function(){return x})),n.d(t,"BankAccount",(function(){return p})),n.d(t,"Cards",(function(){return f}));var c=n(13),a=n(10),s=n(3),r=n(1),i=n(12),l=(n(2),n(17)),o=n(9),d=n(0);function j(){var e=(new Date).getHours();return e>=3&&e<12?"Good Morning":e>=12&&e<15?"Good Afternoon":e>=15&&e<20?"Good Evening":e>=20&&e<3?"Good Night":"Hello"}var u=function(e){var t,n,c=e.data,a=(null===(t=c.sort((function(e,t){return e.balance<t.balance?1:-1}))[0])||void 0===t||null===(n=t.balance)||void 0===n?void 0:n.fix())||0;return Object(d.jsxs)("div",{className:"graph",children:[Object(d.jsx)("p",{className:"label",children:"Analytics"}),Object(d.jsx)("ul",{className:"bars","data-max":"\u20b9 ".concat(a||0),children:c.map((function(e,t){return Object(d.jsxs)("li",{children:[Object(d.jsx)("div",{className:"bar",style:{height:"".concat(e.balance/(a/100),"%")}}),Object(d.jsx)("label",{className:"month",children:e._id})]},t)}))})]})},b=function(e){var t=e.onSuccess,n=Object(r.useState)("netBanking"),c=Object(s.a)(n,2),a=c[0],i=c[1];return Object(d.jsx)("div",{className:"addPaymentMethod",children:Object(d.jsxs)("section",{className:"paymentOption",children:[Object(d.jsxs)("div",{className:"header",onClick:function(){return i("netBanking")},children:[Object(d.jsx)("div",{className:"redial ".concat("netBanking"===a&&"active"),children:Object(d.jsx)("div",{className:"fill"})}),Object(d.jsx)("label",{children:"Net Banking"})]}),"netBanking"===a&&Object(d.jsx)(m,{onSuccess:t})]})})},h=function(){var e=Object(r.useState)(""),t=Object(s.a)(e,2),n=t[0],c=t[1];return Object(d.jsxs)("form",{className:"paymentMethodForm upi",onSubmit:function(e){e.preventDefault(),c("Coming soon!")},children:[Object(d.jsx)("label",{children:"Please enter your UPI ID"}),Object(d.jsxs)("section",{children:[Object(d.jsx)("input",{type:"text",value:n,required:!0,name:"upiId",onChange:function(e){return c(e.target.value)},placeholder:"Ex: MobileNumber@upi"}),Object(d.jsx)("button",{type:"submit",children:"Verify"})]})]})},O=function(e){var t=e.prefill,n=e.onSuccess,j=Object(r.useContext)(i.d).setUser,u=Object(r.useState)((null===t||void 0===t?void 0:t.brand)||null),b=Object(s.a)(u,2),h=b[0],O=b[1],m=Object(r.useState)((null===t||void 0===t?void 0:t.nameOnCard)||""),x=Object(s.a)(m,2),p=x[0],f=x[1],v=Object(r.useState)((null===t||void 0===t?void 0:t.cardNumber)||""),g=Object(s.a)(v,2),y=g[0],N=g[1],C=Object(r.useState)(""),k=Object(s.a)(C,2),w=k[0],M=k[1],S=Object(r.useState)(""),_=Object(s.a)(S,2),P=_[0],F=_[1],B=Object(r.useState)((null===t||void 0===t?void 0:t.cvv)||""),A=Object(s.a)(B,2),T=A[0],D=A[1],E=Object(r.useState)(!1),R=Object(s.a)(E,2),L=R[0],U=R[1],q=function(){for(var e=(new Date).getFullYear(),t=[],n=0;n<15;n++)t.push({label:e+n,value:(e+n).toString().substr(2)});return t}(),G=Object(r.useState)(null),J=Object(s.a)(G,2),V=J[0],z=J[1];Object(r.useEffect)((function(){}),[P,w]);return Object(d.jsxs)("form",{className:"paymentMethodForm bankCard",onSubmit:function(e){if(e.preventDefault(),null===h)return U(!0),void setTimeout((function(){return U(!1)}),1500);fetch(t?"/api/editPaymentMethod":"/api/addPaymentMethod",{method:t?"PATCH":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object(a.a)({type:"BankCard",brand:h,nameOnCard:p,cardNumber:y,exp:"".concat(w,"/").concat(P),cvv:T},t&&{_id:t._id}))}).then((function(e){return e.json()})).then((function(e){var s=e.paymentMethod;s?(j(t?function(e){return Object(a.a)(Object(a.a)({},e),{},{paymentMethods:e.paymentMethods.map((function(e){return e._id===s._id?s:e}))})}:function(e){return Object(a.a)(Object(a.a)({},e),{},{paymentMethods:[].concat(Object(c.a)(e.paymentMethods),[s])})}),null===n||void 0===n||n(s)):z(Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("button",{onClick:function(){return z(null)},children:"Okay"}),Object(d.jsxs)("div",{children:[Object(d.jsx)(o.i,{}),Object(d.jsxs)("h4",{children:["Payment method could not be ",t?"updated":"added",". Please try again."]})]})]}))})).catch((function(e){console.log(e),z(Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("button",{onClick:function(){return z(null)},children:"Okay"}),Object(d.jsxs)("div",{children:[Object(d.jsx)(o.i,{}),Object(d.jsx)("h4",{children:"Error happaned. Make sure you're online."})]})]}))}))},children:[!t&&Object(d.jsx)("p",{className:"note",children:"We\u2019ll save this card for your convenience. Remove it by going to Your Account section"}),Object(d.jsxs)("section",{className:"inputs",children:[Object(d.jsx)("input",{type:"text",name:"name",placeholder:"Name on your card",value:p,onChange:function(e){return f(e.target.value)},required:!0}),Object(d.jsx)("input",{type:"number",name:"cardNumber",placeholder:"Card Number",value:y,onChange:function(e){e.target.value.match(/^3[47][0-9]{13}$/)?O("amex"):e.target.value.match(/^4[0-9]{12}(?:[0-9]{3})?$$/)?O("visa"):e.target.value.match(/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14})$/)?O("masterCard"):O(null),N(e.target.value)},required:!0}),Object(d.jsxs)("section",{className:"exp",children:[Object(d.jsx)("label",{children:"Expiry Date"}),Object(d.jsx)(o.h,{placeholder:"Month",options:[{label:"Jan",value:"01"},{label:"Feb",value:"02"},{label:"Mar",value:"03"},{label:"Apr",value:"04"},{label:"May",value:"05"},{label:"Jun",value:"06"},{label:"Jul",value:"07"},{label:"Aug",value:"08"},{label:"Sep",value:"09"},{label:"Oct",value:"10"},{label:"Nov",value:"11"},{label:"Dec",value:"12"}],required:!0,onChange:function(e){return M(e.value)}}),Object(d.jsx)(o.h,{placeholder:"Year",options:q,required:!0,onChange:function(e){return F(e.value)}})]}),Object(d.jsxs)("section",{className:"cvv",children:[Object(d.jsx)("label",{children:"CVV"}),Object(d.jsx)("input",{type:"number",name:"cvv",required:!0,value:T,onChange:function(e){return D(e.target.value)}})]})]}),Object(d.jsx)("button",{children:"Save"}),L&&Object(d.jsx)("p",{className:"cardErr",children:"Enter valid Visa/MasterCard"}),Object(d.jsx)(l.Modal,{className:"msg",open:V,children:V})]})},m=function(e){var t=e.prefill,n=e.onSuccess,j=Object(r.useContext)(i.d).setUser,u=Object(r.useState)((null===t||void 0===t?void 0:t.bank)||""),b=Object(s.a)(u,2),h=b[0],O=b[1],m=Object(r.useState)((null===t||void 0===t?void 0:t.name)||""),x=Object(s.a)(m,2),p=x[0],f=x[1],v=Object(r.useState)((null===t||void 0===t?void 0:t.ifsc)||""),g=Object(s.a)(v,2),y=g[0],N=g[1],C=Object(r.useState)((null===t||void 0===t?void 0:t.city)||""),k=Object(s.a)(C,2),w=k[0],M=k[1],S=Object(r.useState)((null===t||void 0===t?void 0:t.type)||""),_=Object(s.a)(S,2),P=_[0],F=_[1],B=Object(r.useState)(null),A=Object(s.a)(B,2),T=A[0],D=A[1],E=Object(r.useState)((null===t||void 0===t?void 0:t.accountNumber)||""),R=Object(s.a)(E,2),L=R[0],U=R[1];return Object(d.jsxs)("form",{className:"paymentMethodForm netBanking",onSubmit:function(e){e.preventDefault(),fetch(t?"/api/editPaymentMethod":"/api/addPaymentMethod",{method:t?"PATCH":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object(a.a)({type:"BankAccount",name:p,bank:h,ifsc:y,accountNumber:L,city:w,accountType:P},t&&{_id:t._id}))}).then((function(e){return e.json()})).then((function(e){var s=e.paymentMethod;s?(j(t?function(e){return Object(a.a)(Object(a.a)({},e),{},{paymentMethods:e.paymentMethods.map((function(e){return e._id===s._id?s:e}))})}:function(e){return Object(a.a)(Object(a.a)({},e),{},{paymentMethods:[].concat(Object(c.a)(e.paymentMethods),[s])})}),null===n||void 0===n||n(s)):D(Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("button",{onClick:function(){return D(null)},children:"Okay"}),Object(d.jsxs)("div",{children:[Object(d.jsx)(o.i,{}),Object(d.jsx)("h4",{children:"Could not update payment method. Please try again."})]})]}))})).catch((function(e){console.log(e),D(Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("button",{onClick:function(){return D(null)},children:"Okay"}),Object(d.jsxs)("div",{children:[Object(d.jsx)(o.i,{}),Object(d.jsx)("h4",{children:"Could not updated payment method. Make sure you're online."})]})]}))}))},children:[Object(d.jsxs)("section",{className:"inputs",children:[Object(d.jsx)("input",{type:"text",name:"name",placeholder:"Full name",value:p,onChange:function(e){return f(e.target.value)},required:!0}),Object(d.jsx)("input",{type:"text",name:"bank",placeholder:"Bank",value:h,onChange:function(e){return O(e.target.value)},required:!0}),Object(d.jsx)("input",{type:"text",name:"city",placeholder:"City",value:w,onChange:function(e){return M(e.target.value)},required:!0}),Object(d.jsx)("input",{type:"text",name:"type",placeholder:"Account type ie. Savings / Current",value:P,onChange:function(e){return F(e.target.value)},required:!0}),Object(d.jsx)("input",{type:"text",name:"accountNumber",placeholder:"Account Number",value:L,onChange:function(e){return U(e.target.value)},required:!0}),Object(d.jsx)("input",{type:"text",name:"ifsc",placeholder:"IFSC",value:y,onChange:function(e){return N(e.target.value)},required:!0})]}),Object(d.jsx)("button",{type:"submit",children:"Save"}),Object(d.jsx)(l.Modal,{open:T,className:"msg",children:T})]})},x=function(e){var t=e.card,n=e.onClick;return Object(d.jsxs)("div",{className:"paymentMethod card",onClick:function(){return null===n||void 0===n?void 0:n(t)},children:[Object(d.jsx)(o.n,{className:"logo",src:"visa"===t.brand?"/payment_visa.png":"/payment_mc.png"}),Object(d.jsxs)("p",{className:"cardNumber",children:["**** **** **** **** ",t.cardNumber.substr(-4)]}),Object(d.jsx)("p",{className:"cardHolder",children:t.nameOnCard}),Object(d.jsx)("p",{className:"exp",children:t.exp})]})},p=function(e){var t=e.account,n=e.onClick;return Object(d.jsxs)("div",{className:"paymentMethod bankAccount",onClick:function(){return null===n||void 0===n?void 0:n(t)},children:[Object(d.jsx)("p",{className:"bank",children:t.bank}),Object(d.jsx)("p",{className:"name",children:t.name}),Object(d.jsx)("p",{className:"accountNumber",children:t.accountNumber}),Object(d.jsx)("p",{className:"ifsc",children:t.ifsc})]})},f=function(e){var t=e.paymentMethods,n=Object(r.useRef)(null),c=Object(r.useState)({}),a=Object(s.a)(c,2),i=a[0],o=a[1],j=Object(r.useState)({}),u=Object(s.a)(j,2),h=u[0],O=u[1],m=Object(r.useState)(0),f=Object(s.a)(m,2),v=f[0],g=f[1],y=Object(r.useState)(!1),N=Object(s.a)(y,2),C=N[0],k=N[1];return Object(r.useLayoutEffect)((function(){var e=n.current.getBoundingClientRect().width;o({width:e,height:.55*e}),O({transform:"translateX(".concat(-e*v,"px)")})}),[v]),Object(d.jsxs)("div",{className:"savedCards",children:[Object(d.jsxs)("div",{className:"wrapper",ref:n,children:[Object(d.jsxs)("ul",{className:"cards",style:h,children:[t.map((function(e,t){return Object(d.jsxs)("li",{style:i,children:[e._id&&"BankCard"===e.__t&&Object(d.jsx)(x,{card:e}),e._id&&"BankAccount"===e.__t&&Object(d.jsx)(p,{account:e})]},t)})),0===t.length&&Object(d.jsx)("li",{style:i,children:Object(d.jsx)("p",{className:"placeholder",children:"Withdraw Payments"})})]}),Object(d.jsx)("button",{className:"addPaymentMethod",onClick:function(){return k(!0)},children:Object(d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"15.999",viewBox:"0 0 16 15.999",children:Object(d.jsx)("path",{id:"Union_1","data-name":"Union 1",d:"M-4613,16V9h-7V7h7V0h2V7h7V9h-7v7Z",transform:"translate(4620)",fill:"#2699fb"})})})]}),v>0&&Object(d.jsx)("button",{className:"prev",onClick:function(){return g((function(e){return e-1}))},children:Object(d.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"31.818",height:"44.147",viewBox:"0 0 31.818 44.147",children:[Object(d.jsx)("defs",{children:Object(d.jsxs)("filter",{id:"Path_217",x:"0",y:"0",width:"31.818",height:"44.147",filterUnits:"userSpaceOnUse",children:[Object(d.jsx)("feOffset",{dx:"-3",dy:"3",input:"SourceAlpha"}),Object(d.jsx)("feGaussianBlur",{stdDeviation:"2.5",result:"blur"}),Object(d.jsx)("feFlood",{floodOpacity:"0.161"}),Object(d.jsx)("feComposite",{operator:"in",in2:"blur"}),Object(d.jsx)("feComposite",{in:"SourceGraphic"})]})}),Object(d.jsx)("g",{transform:"matrix(1, 0, 0, 1, 0, 0)",filter:"url(#Path_217)",children:Object(d.jsxs)("g",{id:"Path_217-2","data-name":"Path 217",transform:"translate(27.32 4.5) rotate(90)",fill:"#858585",children:[Object(d.jsx)("path",{d:"M 27.53220176696777 15.71776485443115 C 26.13888931274414 15.2262544631958 24.10462951660156 14.50919151306152 22.07958030700684 13.79734325408936 C 14.74783992767334 11.22007274627686 14.70039939880371 11.22007274627686 14.5736198425293 11.22007274627686 C 14.44684028625488 11.22007274627686 14.39939975738525 11.22007274627686 7.067659854888916 13.79734325408936 C 5.042610645294189 14.50919151306152 3.00835108757019 15.2262544631958 1.615038275718689 15.71776485443115 L 14.5736198425293 0.7635064125061035 L 27.53220176696777 15.71776485443115 Z",stroke:"none"}),Object(d.jsx)("path",{d:"M 14.5736198425293 1.526998519897461 L 3.229276657104492 14.61841773986816 C 4.349065780639648 14.22377777099609 5.627307891845703 13.77366733551025 6.901840209960938 13.32564258575439 C 14.31408023834229 10.72007274627686 14.33368015289307 10.72007274627686 14.5736198425293 10.72007274627686 C 14.81355953216553 10.72007274627686 14.83315944671631 10.72007274627686 22.24539947509766 13.32564258575439 C 23.51993179321289 13.77366733551025 24.79817390441895 14.22377777099609 25.9179630279541 14.61841773986816 L 14.5736198425293 1.526998519897461 M 14.5736198425293 1.9073486328125e-06 L 29.14723968505859 16.81802368164063 C 29.14723968505859 16.81802368164063 14.71584987640381 11.72007274627686 14.5736198425293 11.72007274627686 C 14.43138980865479 11.72007274627686 0 16.81802368164063 0 16.81802368164063 L 14.5736198425293 1.9073486328125e-06 Z",stroke:"none",fill:"#858585"})]})})]})}),v+1<t.length&&Object(d.jsx)("button",{className:"next",onClick:function(){return g((function(e){return e+1}))},children:Object(d.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"31.818",height:"44.147",viewBox:"0 0 31.818 44.147",children:[Object(d.jsx)("defs",{children:Object(d.jsxs)("filter",{id:"Path_217",x:"0",y:"0",width:"31.818",height:"44.147",filterUnits:"userSpaceOnUse",children:[Object(d.jsx)("feOffset",{dx:"-3",dy:"3",input:"SourceAlpha"}),Object(d.jsx)("feGaussianBlur",{stdDeviation:"2.5",result:"blur"}),Object(d.jsx)("feFlood",{floodOpacity:"0.161"}),Object(d.jsx)("feComposite",{operator:"in",in2:"blur"}),Object(d.jsx)("feComposite",{in:"SourceGraphic"})]})}),Object(d.jsx)("g",{transform:"matrix(1, 0, 0, 1, 0, 0)",filter:"url(#Path_217)",children:Object(d.jsxs)("g",{id:"Path_217-2","data-name":"Path 217",transform:"translate(27.32 4.5) rotate(90)",fill:"#858585",children:[Object(d.jsx)("path",{d:"M 27.53220176696777 15.71776485443115 C 26.13888931274414 15.2262544631958 24.10462951660156 14.50919151306152 22.07958030700684 13.79734325408936 C 14.74783992767334 11.22007274627686 14.70039939880371 11.22007274627686 14.5736198425293 11.22007274627686 C 14.44684028625488 11.22007274627686 14.39939975738525 11.22007274627686 7.067659854888916 13.79734325408936 C 5.042610645294189 14.50919151306152 3.00835108757019 15.2262544631958 1.615038275718689 15.71776485443115 L 14.5736198425293 0.7635064125061035 L 27.53220176696777 15.71776485443115 Z",stroke:"none"}),Object(d.jsx)("path",{d:"M 14.5736198425293 1.526998519897461 L 3.229276657104492 14.61841773986816 C 4.349065780639648 14.22377777099609 5.627307891845703 13.77366733551025 6.901840209960938 13.32564258575439 C 14.31408023834229 10.72007274627686 14.33368015289307 10.72007274627686 14.5736198425293 10.72007274627686 C 14.81355953216553 10.72007274627686 14.83315944671631 10.72007274627686 22.24539947509766 13.32564258575439 C 23.51993179321289 13.77366733551025 24.79817390441895 14.22377777099609 25.9179630279541 14.61841773986816 L 14.5736198425293 1.526998519897461 M 14.5736198425293 1.9073486328125e-06 L 29.14723968505859 16.81802368164063 C 29.14723968505859 16.81802368164063 14.71584987640381 11.72007274627686 14.5736198425293 11.72007274627686 C 14.43138980865479 11.72007274627686 0 16.81802368164063 0 16.81802368164063 L 14.5736198425293 1.9073486328125e-06 Z",stroke:"none",fill:"#858585"})]})})]})}),Object(d.jsx)(l.Modal,{head:!0,label:"Add Payment Method",setOpen:k,className:"paymentMethodsForm",open:C,children:Object(d.jsx)(b,{onSuccess:function(e){k(!1)}})})]})},v=function(){var e=Object(r.useState)([]),t=Object(s.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(null),i=Object(s.a)(a,2),j=i[0],u=i[1];return Object(r.useEffect)((function(){fetch("/api/transactions").then((function(e){if(200===e.status)return e.json()})).then((function(e){e?c(e):u(Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("button",{onClick:function(){return u(null)},children:"Okay"}),Object(d.jsxs)("div",{children:[Object(d.jsx)(o.i,{}),Object(d.jsx)("h4",{children:"Could not get transactions"})]})]}))})).catch((function(e){console.log(e),u(Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("button",{onClick:function(){return u(null)},children:"Okay"}),Object(d.jsxs)("div",{children:[Object(d.jsx)(o.i,{}),Object(d.jsx)("h4",{children:"Error happened. Make sure you're online."})]})]}))}))}),[]),Object(d.jsxs)("div",{className:"transactions",children:[Object(d.jsx)("div",{className:"head",children:Object(d.jsx)("p",{children:"All Transaction History"})}),Object(d.jsxs)("ul",{className:"allTransactions",children:[n.map((function(e){return Object(d.jsx)(g,{transaction:e},e._id)})),0===n.length&&Object(d.jsx)("p",{className:"placeholder",children:"No transaction yet."})]}),Object(d.jsx)(l.Modal,{className:"msg",open:j,children:j})]})},g=function(e){var t,n,c,a,s=e.transaction,r=null;switch(s.__t){case"AddMoney":r=Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{className:"icon",children:Object(d.jsx)(o.v,{})}),Object(d.jsx)("p",{className:"detail",children:"Money added to wallet"})]});break;case"WithdrawMoney":r=Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{className:"icon",children:Object(d.jsx)(o.r,{})}),Object(d.jsx)("p",{className:"detail",children:"Money withdrawal from Wallet"})]});break;case"P2PTransaction":r=s.amount<0?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{className:"icon",children:Object(d.jsx)(o.d,{})}),Object(d.jsxs)("p",{className:"detail",children:["Paid to"," ",Object(d.jsx)("span",{className:"userName",children:(null===(t=s.client)||void 0===t?void 0:t.firstName)+" "+(null===(n=s.client)||void 0===n?void 0:n.lastName)})]})]}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{className:"icon",children:Object(d.jsx)(o.b,{})}),Object(d.jsxs)("p",{className:"detail",children:["Received from"," ",Object(d.jsx)("span",{className:"userName",children:(null===(c=s.client)||void 0===c?void 0:c.firstName)+" "+(null===(a=s.client)||void 0===a?void 0:a.lastName)})]})]});break;default:r=s.amount<0?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{className:"icon",children:Object(d.jsx)(o.r,{})}),Object(d.jsx)("p",{className:"detail",children:s.note})]}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{className:"icon",children:Object(d.jsx)(o.v,{})}),Object(d.jsx)("p",{className:"detail",children:s.note})]})}return Object(d.jsxs)("li",{className:"transaction",children:[r,Object(d.jsxs)("p",{className:"amount",children:["\u20b9",Math.abs(s.amount.fix())]})]})};t.default=function(e){var t=e.history,n=e.location,c=(e.match,Object(r.useContext)(i.d)),a=c.user,h=(c.setUser,Object(r.useState)(0)),O=Object(s.a)(h,2),m=O[0],x=O[1],p=Object(r.useState)([]),g=Object(s.a)(p,2),y=g[0],N=g[1],C=Object(r.useState)(""),k=Object(s.a)(C,2),w=k[0],M=k[1],S=Object(r.useState)([]),_=Object(s.a)(S,2),P=_[0],F=_[1],B=Object(r.useState)(!1),A=Object(s.a)(B,2),T=A[0],D=A[1],E=Object(r.useState)(!1),R=Object(s.a)(E,2),L=(R[0],R[1]),U=Object(r.useState)(!1),q=Object(s.a)(U,2),G=(q[0],q[1]),J=Object(r.useState)(null),V=Object(s.a)(J,2),z=V[0],H=V[1];return Object(r.useEffect)((function(){var e;e="https://checkout.razorpay.com/v1/checkout.js",new Promise((function(t,n){if(document.querySelector('script[src="'.concat(e,'"]')))t(!0);else{var c=document.createElement("script");c.src=e,document.body.appendChild(c),c.onload=function(){return t(!0)},c.onerror=function(){return n(!0)}}})),fetch("/api/dashboardData").then((function(e){return e.json()})).then((function(e){"ok"===e.code?(N(e.monthlyBalance),x(e.balance),F(e.rewards)):H(Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("button",{onClick:function(){return H(null)},children:"Okay"}),Object(d.jsxs)("div",{children:[Object(d.jsx)(o.i,{}),Object(d.jsx)("h4",{children:"Could not update balance."})]})]}))})).catch((function(e){console.log(e),H(Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("button",{onClick:function(){return H(null)},children:"Okay"}),Object(d.jsxs)("div",{children:[Object(d.jsx)(o.i,{}),Object(d.jsx)("h4",{children:"Could not update balance."})]})]}))}))}),[]),Object(r.useEffect)((function(){w||t.push("/account/profile/wallet"),G(!1)}),[w]),Object(d.jsxs)("div",{className:"walletContainer",children:[Object(d.jsxs)("div",{className:"leftSection",children:[Object(d.jsxs)("div",{className:"nameTag",children:[Object(d.jsxs)("h2",{children:["Hello ",a.firstName,","]}),Object(d.jsx)("p",{className:"greetings",children:j()})]}),Object(d.jsxs)("div",{className:"balance",children:[Object(d.jsxs)("div",{className:"currentBalance",children:[Object(d.jsx)("p",{className:"label",children:"Wallet Balance"}),Object(d.jsxs)("h1",{children:["\u20b9 ",m.fix()]}),Object(d.jsx)("p",{className:"updateTime",children:Object(d.jsx)(o.s,{format:"ddd, DD MMM YYYY",children:new Date})})]}),Object(d.jsx)(u,{data:y})]}),Object(d.jsx)("div",{className:"addWithdraw",children:Object(d.jsxs)("div",{className:"add money",children:[Object(d.jsx)("p",{className:"label",children:"Add Money"}),Object(d.jsxs)("form",{onSubmit:function(e){e.preventDefault(),fetch("/api/createAddMoneyOrder",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:w})}).then((function(e){return e.json()})).then((function(e){var n=e.order,c=e.key;G(!1),n?function(e,n){var c=window.Razorpay;if(c){var s=new c({key:n,amount:e.amount,currency:e.currency,accept_partial:!1,name:"".concat(a.firstName," ").concat(a.lastName),description:"Add money to Delivery Pay wallet",image:"/logo_big.jpg",order_id:e.id,handler:function(e){fetch("/api/addMoney",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({transactionId:e.razorpay_payment_id,razorSignature:e.razorpay_signature,razorOrderId:e.razorpay_order_id})}).then((function(e){return e.json()})).then((function(e){var n=e.code,c=(e.user,e.transaction);e.message,"ok"===n?(t.push("/account/profile/wallet"),L(!1),D(c),x((function(e){return e+c.amount})),M(""),G(!1)):H(Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("button",{onClick:function(){return H(null)},children:"Okay"}),Object(d.jsxs)("div",{children:[Object(d.jsx)(o.i,{}),Object(d.jsx)("h4",{children:"Error happend. Make sure you're payment details are correct."})]})]}))})).catch((function(e){console.log(e),L(!0)}))},modal:{ondismiss:function(){return G(!1)}},theme:{color:"#336cf9"},notify:{sms:!0,email:!0},reminder_enable:!0});s.on("payment.failed",(function(e){L(!0),G(!1)})),s.open()}}(n,c):H(Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("button",{onClick:function(){return H(null)},children:"Okay"}),Object(d.jsxs)("div",{children:[Object(d.jsx)(o.i,{}),Object(d.jsx)("h4",{children:"Error happend. Please try again."})]})]}))})).catch((function(e){console.log(e),G(!1),H(Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("button",{onClick:function(){return H(null)},children:"Okay"}),Object(d.jsxs)("div",{children:[Object(d.jsx)(o.i,{}),Object(d.jsx)("h4",{children:"Error happend. Make sure you're online."})]})]}))}))},children:[Object(d.jsx)("input",{type:"number",step:"0.01",min:"10",value:w,onChange:function(e){return M(e.target.value)},placeholder:"Enter amount",required:!0}),Object(d.jsx)("button",{children:"Proceed"})]})]})}),Object(d.jsxs)("div",{className:"rewards",children:[Object(d.jsx)("p",{className:"label",children:"Rewards"}),Object(d.jsxs)("ul",{className:"cards",children:[P.map((function(e,t){return Object(d.jsxs)("li",{children:[Object(d.jsx)("p",{className:"rewardName",children:e.name}),Object(d.jsxs)("div",{children:[e.img&&Object(d.jsx)(o.n,{src:e.img}),e.amount&&Object(d.jsxs)("p",{className:"amount",children:["\u20b9",e.amount]}),Object(d.jsx)("p",{className:"rewardDscr",children:e.dscr})]}),!e.redeemed&&Object(d.jsx)("button",{className:"redeem",onClick:function(){H(Object(d.jsx)(d.Fragment,{children:Object(d.jsx)("div",{children:Object(d.jsx)("h4",{children:"Redeeming Reward..."})})})),fetch("/api/redeemReward",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({_id:e._id})}).then((function(e){return e.json()})).then((function(e){"ok"===e.code?(F((function(t){return t.map((function(t){return t._id===e.reward._id?e.reward:t}))})),H(Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("button",{onClick:function(){return H(null)},children:"Okay"}),Object(d.jsxs)("div",{children:[Object(d.jsx)(o.C,{}),Object(d.jsx)("h4",{children:"Reward succefully redeemed"})]})]}))):H(Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("button",{onClick:function(){return H(null)},children:"Okay"}),Object(d.jsxs)("div",{children:[Object(d.jsx)(o.i,{}),Object(d.jsx)("h4",{children:"Could not redeem reward."})]})]}))})).catch((function(e){console.log(e),H(Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("button",{onClick:function(){return H(null)},children:"Okay"}),Object(d.jsxs)("div",{children:[Object(d.jsx)(o.i,{}),Object(d.jsx)("h4",{children:"Could not redeem reward. Make sure you're online."})]})]}))}))},children:"Redeem"})]},t)})),0===P.length?Object(d.jsx)("li",{className:"placeholder",children:"Nothing yet."}):null]})]})]}),Object(d.jsxs)("div",{className:"rightSection",children:[Object(d.jsx)(f,{paymentMethods:a.paymentMethods}),Object(d.jsx)(v,{})]}),Object(d.jsx)(l.Modal,{className:"paymentMethodsForm",head:!0,label:"Add Payment Method",setOpen:function(){t.push("/account/profile/wallet/addMoney")},open:n.pathname.startsWith("/account/wallet/addMoney/addPaymentMethod"),children:Object(d.jsx)(b,{onSuccess:function(){return t.push("/account/profile/wallet/addMoney")}})}),Object(d.jsxs)(l.Modal,{open:T,className:"msg",children:[Object(d.jsx)("button",{onClick:function(){return D(null)},children:"Okay"}),Object(d.jsxs)("div",{children:[Object(d.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"158",height:"158",viewBox:"0 0 158 158",children:[Object(d.jsxs)("defs",{children:[Object(d.jsxs)("linearGradient",{id:"linear-gradient",x1:"-0.298",y1:"-0.669",x2:"1.224",y2:"1.588",gradientUnits:"objectBoundingBox",children:[Object(d.jsx)("stop",{offset:"0",stopColor:"#336cf9"}),Object(d.jsx)("stop",{offset:"1",stopColor:"#1be6d6"})]}),Object(d.jsx)("clipPath",{id:"clip-path",children:Object(d.jsx)("rect",{width:"64",height:"64",fill:"none"})})]}),Object(d.jsxs)("g",{id:"Group_163","data-name":"Group 163",transform:"translate(-0.426 -0.384)",children:[Object(d.jsx)("g",{id:"Group_103","data-name":"Group 103",transform:"translate(0 0)",children:Object(d.jsx)("rect",{id:"Rectangle_1104","data-name":"Rectangle 1104",width:"158",height:"158",rx:"79",transform:"translate(0.426 0.384)",fill:"url(#linear-gradient)"})}),Object(d.jsxs)("g",{id:"Component_148_2","data-name":"Component 148 \u2013 2",transform:"translate(47.426 58.384)",clipPath:"url(#clip-path)",children:[Object(d.jsx)("rect",{id:"Rectangle_460","data-name":"Rectangle 460",width:"64",height:"64",transform:"translate(0 0)",fill:"none"}),Object(d.jsx)("path",{id:"Checkbox",d:"M25.35,44.087,0,18.737l5.143-5.143L25.35,33.432,58.782,0l5.143,5.143Z",transform:"translate(0 1.728)",fill:"#fff"})]})]})]}),Object(d.jsxs)("h4",{className:"amount",children:["\u20b9",null===T||void 0===T?void 0:T.amount]}),Object(d.jsx)("h4",{children:"Money added!"})]})]}),Object(d.jsxs)(l.Modal,{open:!1,className:"msg",children:[Object(d.jsx)("button",{onClick:function(){return L(null)},children:"Okay"}),Object(d.jsxs)("div",{children:[Object(d.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"158",height:"158",viewBox:"0 0 158 158",children:[Object(d.jsx)("defs",{children:Object(d.jsxs)("linearGradient",{id:"linear-gradient",x1:"-0.298",y1:"-0.669",x2:"1.224",y2:"1.588",gradientUnits:"objectBoundingBox",children:[Object(d.jsx)("stop",{offset:"0",stopColor:"#f93389"}),Object(d.jsx)("stop",{offset:"1",stopColor:"#e3003e"})]})}),Object(d.jsx)("rect",{id:"Rectangle_1104","data-name":"Rectangle 1104",width:"158",height:"158",rx:"79",fill:"url(#linear-gradient)"}),Object(d.jsx)("g",{id:"Component_85_8","data-name":"Component 85 \u2013 8",transform:"translate(49.472 49.472)",children:Object(d.jsx)("path",{id:"Union_3","data-name":"Union 3",d:"M29.527,34.9,5.368,59.057,0,53.686,24.158,29.527,0,5.368,5.368,0l24.16,24.158L53.686,0l5.371,5.368L34.9,29.527l24.16,24.158-5.371,5.371Z",fill:"#fff"})})]}),Object(d.jsx)("h4",{children:"Add money failed"})]})]}),Object(d.jsx)(l.Modal,{className:"msg",open:z,children:z})]})}}}]);
//# sourceMappingURL=5.5c43a0fa.chunk.js.map