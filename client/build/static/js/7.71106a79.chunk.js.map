{"version":3,"sources":["components/Profile.js","components/seller/OrderManagement.js","components/seller/RefundManagement.js","components/seller/CampaignManagement.js","components/seller/fbMarketplace.js","components/seller/MyShop.js","../node_modules/react-csv/lib/core.js","../node_modules/react-csv/lib/metaProps.js","../node_modules/react-csv/index.js","../node_modules/react-csv/lib/index.js","../node_modules/react-csv/lib/components/Download.js","../node_modules/react-csv/lib/components/Link.js"],"names":["updateProfileInfo","newData","a","fetch","method","headers","body","JSON","stringify","then","res","json","require","SinglePaymentMethod","setMsg","setUser","useContext","SiteContext","useState","edit","setEdit","deletePaymentMethod","useCallback","_id","code","prev","paymentMethods","filter","item","onClick","className","__t","Confirm","label","question","callback","card","open","head","setOpen","prefill","onSuccess","paymentMethod","account","DataEdit","fields","value","onError","formData","form","useRef","submit","e","preventDefault","allData","FormData","target","entries","field","password","confirm_password","navigator","geolocation","getCurrentPosition","position","lat","coords","latitude","long","longitude","type","coordinates","UploadFiles","files","user","alert","catch","err","console","log","ref","onSubmit","Profile","history","match","location","mismatchPass","setMismatchPass","msg","kycFiles","setKycFiles","src","profileImg","xmlns","width","height","viewBox","id","transform","fill","d","stroke","accept","onChange","file","cdn","process","_file","append","data","firstName","lastName","userId","placeholder","defaultValue","name","required","phone","pattern","email","gender","age","address","street","city","state","zip","multiple","kyc","verified","links","map","i","length","MilestoneForm","lazy","mod","default","SingleOrder","order","setOrders","selectAll","setBatch","batch","actionsRef","checkRef","useHistory","selected","setSelected","cancelOrder","status","acceptOrder","requestCancellation","useEffect","nativeEvent","path","includes","current","push","format","createdAt","total","icon","to","Modal","FullOrder","userType","setOrder","shopInfo","shippingCost","setShipping","milestoneForm","setMilestoneForm","fileUpload","setFileUpload","declineOrder","markAsShipped","markAsDelivered","params","productPrice","products","reduce","c","calculatePrice","product","gst","qty","fix","couponCodeDiscount","coupon","Math","min","amount","maxDiscount","fee","lable","buyer","note","Object","deliveryDetail","key","deliveryWithin","available","images","toString","milestones","milestone","dscr","terms","action","definedAmount","client","FileUploadForm","loading","setLoading","setFiles","fileLinks","title","Orders","categories","setTotal","page","setPage","perPage","setPerPage","setStatus","search","setSearch","column","sort","dateRange","setDateRange","orders","setSelectAll","startDate","moment","time","endDate","setHours","URLSearchParams","q","dateFrom","dateTo","options","opacity","range","btns","currentPage","SingleRefund","refund","setRefunds","seller","FullRefund","setRefund","refundTill","setRefundTill","updateRefund","acceptRefund","declineRefund","refundable","days","Date","getTime","deliveredAt","issue","deliveryTime","shipping","cellSpacing","cellPadding","Refunds","refunds","SingleCoupon","setCoupons","couponDetail","setCouponDetail","threshold","date","from","termsUrl","term","Coupons","coupons","Step","defaultStatus","children","disabled","step","BusinessManager","FB","window","businessManagers","setBusinessManagers","setErr","fbMarket","business","api","access_token","businesses","businessManager","href","created_time","newUser","picture","url","business_id","asset_id","vertical","error","error_user_msg","message","FbPage","fbPages","setFbPages","createNew","setCreateNew","facebookPage","category","InstagramAccount","setStep","insta","setInsta","instagramAccount","instagram_business_account","profile_picture_url","username","CommerceAccount","catalogs","setCatalogs","commerceAccount","catalog","setCatalog","find","delCatalog","Marketplace","undefined","userAgreement","logout","LS","remove","login","authResponse","accessToken","scope","return_scopes","ShopSetup","ProductForm","setCategories","offerings","setType","addCat","setAddCat","setCategory","discount","setDiscount","setName","setDscr","price","setPrice","setGst","hsn","setHsn","setAvailable","tags","setTags","priceDetail","setPriceDetail","discountAmount","calculateDiscount","gstAmount","final","tag","onKeyPress","trim","charCode","focus","input","previousElementSibling","stopPropagation","querySelector","Products","shopSetupComplete","productForm","setProductForm","setProducts","addMany","setAddMany","socialShare","setSocialShare","deleteItems","items","_ids","some","deleteMany","addToFbMarket","fb_products","success","failed","forEach","prod","fbMarketId","removeFromFbMarket","SingleProduct","showInstaForm","setShowInstaForm","FacebookShareButton","resetButtonStyle","InstaForm","img","setImg","caption","setCaption","image_url","creation_id","maxLength","BatchUpload","batchItems","setBatchItems","setImages","csvDraft","setCsvDraft","addBatchProducts","updated","uploadImages","imgLinks","Images","Name","Description","Material","Category","Type","filename","toLowerCase","newItems","splice","cb","reader","FileReader","onload","evt","bstr","result","XLSX","wb","read","wsname","SheetNames","ws","Sheets","utils","sheet_to_json","header","arr","cols","shift","row","col","j","readAsBinaryString","parseXLSXtoJSON","split","SocialShare","igs","setIgs","pages","setPages","groups","setGroups","resp","publish","allPages","allIgs","allGroups","ig","group","defaultTerms","Settings","shopEdit","setShopEdit","gstEdit","setGstEdit","shippingEdit","setShippingEdit","termsEdit","setTermsEdit","editPayment","setEditPayment","logo","cat","detail","reg","bank","accountType","accountNumber","ifsc","ShopEditForm","setOfferings","shopName","setShopName","setPhone","setLogo","logoLink","option","GstEditForm","gstFiles","setGstFiles","gstReg","setGstReg","setAmount","ShippingEditForm","setShippingCost","setDeliveryWithin","setRefundable","TermsEditForm","setTerms","addTerm","setAddTerm","PaymentMethodForm","setMethod","setBank","setIfsc","setCity","setAccountNumber","op","MyShop","setShopSetupComplete","style","display","basepath","tabs","component","OrderManagement","RefundManagement","Campaigns","FBMarket","defineProperty","exports","_typeof","Symbol","iterator","obj","constructor","prototype","_toConsumableArray","Array","isArray","arr2","isSafari","test","userAgent","isJsons","array","every","isArrays","jsonsHeaders","keys","b","Set","concat","jsons2arrays","jsons","headerLabels","headerKeys","object","getHeaderValue","property","foundValue","replace","o","p","elementOrEmpty","element","joiner","separator","arguments","enclosingCharacter","join","arrays2csv","jsons2csv","string2csv","toCSV","TypeError","buildURI","uFEFF","csv","blob","Blob","dataURI","URL","webkitURL","createObjectURL","PropsNotForwarded","defaultProps","propTypes","_react","_propTypes","__esModule","oneOfType","string","isRequired","bool","func","asyncOnClick","module","CSVLink","CSVDownload","_Download2","_interopRequireDefault","_Link2","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","Constructor","protoProps","staticProps","_react2","_core","_metaProps","_React$Component","instance","_classCallCheck","this","_this","self","call","ReferenceError","_possibleConstructorReturn","__proto__","getPrototypeOf","subClass","superClass","create","setPrototypeOf","_inherits","apply","_props","specs","Component","assign","_extends","source","hasOwnProperty","bind","setState","prevProps","_props2","event","msSaveOrOpenBlob","_props3","msSaveBlob","_this2","proceed","handleLegacy","_this3","handleAsyncClick","handleSyncClick","_this4","_props4","rest","indexOf","_objectWithoutProperties","createElement","download","link","handleClick"],"mappings":"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","file":"static/js/7.71106a79.chunk.js","sourcesContent":["import { useState, useEffect, useContext, useRef, useCallback } from \"react\";\nimport { SiteContext } from \"../SiteContext\";\nimport { BankCard, BankAccount, BankCardForm, NetBankingForm } from \"./Wallet\";\nimport { Modal, Confirm } from \"./Modal\";\nimport {\n  Err_svg,\n  Succ_svg,\n  FileInput,\n  Media,\n  UploadFiles,\n  Img,\n} from \"./Elements\";\n// import GoogleLogin from \"react-google-login\";\nrequire(\"./styles/profile.scss\");\n\nexport async function updateProfileInfo(newData) {\n  return fetch(\"/api/editUserProfile\", {\n    method: \"PATCH\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify({ ...newData }),\n  }).then((res) => res.json());\n}\n\nconst Profile = ({ history, match, location }) => {\n  const { user, setUser } = useContext(SiteContext);\n  const [mismatchPass, setMismatchPass] = useState(false);\n  const [msg, setMsg] = useState(null);\n  const [kycFiles, setKycFiles] = useState([]);\n  const [gstFiles, setGstFiles] = useState([]);\n  // const addGoogleId = (e) => {\n  //   if (e.googleId) {\n  //     updateProfileInfo({ googleId: e.googleId })\n  //       .then((data) => {\n  //         setUser((prev) => ({ ...prev, googleId: e.googleId }));\n  //         setMsg(\n  //           <>\n  //             <button onClick={() => setMsg(null)}>Okay</button>\n  //             <div>\n  //               <Succ_svg />\n  //               <h4>Google account successfully connected.</h4>\n  //             </div>\n  //           </>\n  //         );\n  //       })\n  //       .catch((err) => {\n  //         console.log(err);\n  //         setMsg(\n  //           <>\n  //             <button onClick={() => setMsg(null)}>Okay</button>\n  //             <div>\n  //               <Err_svg />\n  //               <h4>Could not connect Google account.</h4>\n  //             </div>\n  //           </>\n  //         );\n  //       });\n  //   }\n  // };\n  // const disconnectFromGoogle = (e) => {\n  //   updateProfileInfo({ googleId: null })\n  //     .then((data) => {\n  //       if (data.user) {\n  //         setUser((prev) => ({ ...prev, googleId: null }));\n  //         setMsg(\n  //           <>\n  //             <button onClick={() => setMsg(null)}>Okay</button>\n  //             <div>\n  //               <Succ_svg />\n  //               <h4>Successfully disconnected Google.</h4>\n  //             </div>\n  //           </>\n  //         );\n  //       } else {\n  //         setMsg(\n  //           <>\n  //             <button onClick={() => setMsg(null)}>Okay</button>\n  //             <div>\n  //               <Err_svg />\n  //               <h4>Could not disconnect Google account. Please try again.</h4>\n  //             </div>\n  //           </>\n  //         );\n  //       }\n  //     })\n  //     .catch((err) => {\n  //       console.log(err);\n  //       setMsg(\n  //         <>\n  //           <button onClick={() => setMsg(null)}>Okay</button>\n  //           <div>\n  //             <Err_svg />\n  //             <h4>Could not disconnect Google account.</h4>\n  //           </div>\n  //         </>\n  //       );\n  //     });\n  // };\n  return (\n    <div className=\"profileContainer\">\n      <div className=\"benner\">\n        <div className=\"profileImg\">\n          <Img src={user.profileImg || \"/profile-user.jpg\"} />\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            width=\"91.832\"\n            height=\"25.468\"\n            viewBox=\"0 0 91.832 25.468\"\n          >\n            <g\n              id=\"Path_1937\"\n              data-name=\"Path 1937\"\n              transform=\"translate(15.429 -9.647)\"\n              fill=\"#fff\"\n            >\n              <path\n                d=\"M 29.79687690734863 34.6146240234375 C 22.21588897705078 34.6146240234375 13.43720626831055 32.0111198425293 5.0779709815979 27.28368377685547 C -2.8753981590271 22.78578186035156 -9.78753662109375 16.7585563659668 -14.48426628112793 10.24203777313232 C -13.95890235900879 10.24473857879639 -13.30369663238525 10.25548648834229 -12.80753517150879 10.26361274719238 C -12.44524097442627 10.26955413818359 -12.15906429290771 10.27424812316895 -12.02891159057617 10.27424812316895 C -11.93940830230713 10.27424812316895 -11.86373233795166 10.26253128051758 -11.79978466033936 10.24241733551025 C -11.48864650726318 10.21196746826172 -10.04010391235352 10.17821311950684 -5.149840831756592 10.17821311950684 C -1.226676225662231 10.17821311950684 4.093100070953369 10.19837760925293 9.725229263305664 10.21973037719727 C 16.20444107055664 10.24428367614746 23.54814720153809 10.27211856842041 29.79687690734863 10.27211856842041 C 31.89767646789551 10.27211856842041 43.68988800048828 10.22107124328613 56.17448806762695 10.16702461242676 L 59.24650192260742 10.15374183654785 C 60.32665252685547 10.14907169342041 61.61424255371094 10.14680099487305 63.18285369873047 10.14680099487305 C 64.99295043945313 10.14680099487305 66.92156219482422 10.14978885650635 68.78666687011719 10.15269470214844 C 70.55825042724609 10.1554479598999 72.23158264160156 10.15804767608643 73.72422027587891 10.15804767608643 C 74.4501953125 10.15804767608643 75.08247375488281 10.1574182510376 75.63590240478516 10.15613842010498 C 74.24596405029297 13.15391826629639 71.95748138427734 16.1362361907959 68.82386779785156 19.03109550476074 C 65.67525482177734 21.9398250579834 61.6738166809082 24.71903610229492 57.25215911865234 27.06828308105469 C 52.91740798950195 29.37135314941406 48.15610122680664 31.27616500854492 43.48295974731445 32.57678985595703 C 38.69290161132813 33.90995407104492 33.96032333374023 34.6146240234375 29.79687690734863 34.6146240234375 Z\"\n                stroke=\"none\"\n              />\n              <path\n                d=\"M 63.18235397338867 10.64679336547852 C 61.61428070068359 10.64679336547852 60.32755279541016 10.64906692504883 59.24865341186523 10.65373229980469 L 56.18099212646484 10.6670036315918 C 43.69374084472656 10.72105407714844 31.89901733398438 10.77211761474609 29.79687881469727 10.77211761474609 C 23.54719161987305 10.77211761474609 16.2029914855957 10.74428176879883 9.723331451416016 10.71971893310547 C 4.091693878173828 10.69837951660156 -1.227619171142578 10.67821884155273 -5.149848937988281 10.67821884155273 C -9.844169616699219 10.67821884155273 -11.33226013183594 10.70873641967773 -11.7083740234375 10.73677062988281 C -11.80277252197266 10.76053237915039 -11.90915679931641 10.77424240112305 -12.0289306640625 10.77424240112305 C -12.16323089599609 10.77424240112305 -12.45131683349609 10.7695198059082 -12.81605529785156 10.76354217529297 C -13.01943206787109 10.76021194458008 -13.24966430664063 10.75643920898438 -13.48653411865234 10.75296401977539 C -8.851593017578125 16.903076171875 -2.239547729492188 22.57095718383789 5.324104309082031 26.84845542907715 C 13.60947799682617 31.53411865234375 22.30074310302734 34.11461639404297 29.79687881469727 34.11461639404297 C 33.91565704345703 34.11461639404297 38.60186767578125 33.41628265380859 43.34890747070313 32.0950927734375 C 47.98773193359375 30.80401802062988 52.71426773071289 28.91309356689453 57.0175666809082 26.62672996520996 C 61.40182876586914 24.29735565185547 65.3670654296875 21.5438175201416 68.48458099365234 18.6638298034668 C 71.32099151611328 16.04351997375488 73.45128631591797 13.35661125183105 74.83492279052734 10.65748596191406 C 74.4908447265625 10.65786743164063 74.12125396728516 10.65805435180664 73.72370147705078 10.65805435180664 C 72.23068237304688 10.65805435180664 70.55716705322266 10.65545654296875 68.78539276123047 10.65269470214844 C 66.92047119140625 10.6497917175293 64.9920654296875 10.64679336547852 63.18235397338867 10.64679336547852 M 63.18235778808594 9.646797180175781 C 66.69034576416016 9.646797180175781 70.639892578125 9.658050537109375 73.72370910644531 9.658050537109375 C 74.72272491455078 9.658050537109375 75.63052368164063 9.656867980957031 76.4033203125 9.653743743896484 C 70.7041015625 23.3221435546875 47.19384002685547 35.11461639404297 29.79687881469727 35.11461639404297 C 13.80905532836914 35.11461639404297 -5.7138671875 23.84020614624023 -15.427734375 9.772117614746094 C -15.45098876953125 9.749141693115234 -15.14891815185547 9.741405487060547 -14.71451568603516 9.741401672363281 C -13.8193359375 9.741401672363281 -12.36181640625 9.774246215820313 -12.02893829345703 9.774246215820313 C -11.98212432861328 9.774246215820313 -11.95759582519531 9.773597717285156 -11.9599609375 9.772117614746094 C -12.07225799560547 9.701694488525391 -9.402595520019531 9.678211212158203 -5.14984130859375 9.678211212158203 C 3.356430053710938 9.678211212158203 18.19854354858398 9.772117614746094 29.79687881469727 9.772117614746094 C 32.07231903076172 9.772117614746094 46.01445388793945 9.710941314697266 59.24433135986328 9.653743743896484 C 60.42824935913086 9.648624420166016 61.76977157592773 9.646797180175781 63.18235778808594 9.646797180175781 Z\"\n                stroke=\"none\"\n                fill=\"#336cf9\"\n              />\n            </g>\n          </svg>\n          <input\n            type=\"file\"\n            accept=\".jpg, .png, .jpeg\"\n            onChange={(e) => {\n              const file = e.target.files[0];\n              const cdn = process.env.REACT_APP_CDN_HOST;\n              if (file) {\n                let imgLink = \"\";\n                const formData = new FormData();\n                for (var _file of e.target.files) {\n                  formData.append(\"file\", _file);\n                }\n                fetch(`${cdn}/upload`, {\n                  method: \"POST\",\n                  body: formData,\n                })\n                  .then((res) => res.json())\n                  .then((data) => {\n                    if (data.code === \"ok\") {\n                      imgLink = cdn + \"/\" + data.files[0];\n                      updateProfileInfo({ profileImg: imgLink }).then(\n                        (data) => {\n                          if (data.user) {\n                            setUser((prev) => ({\n                              ...prev,\n                              profileImg: data.user.profileImg,\n                            }));\n                          }\n                        }\n                      );\n                    } else {\n                      setMsg(\n                        <>\n                          <button onClick={() => setMsg(null)}>Okay</button>\n                          <div>\n                            <Err_svg />\n                            <h4>Image upload failed</h4>\n                          </div>\n                        </>\n                      );\n                    }\n                  })\n                  .catch((err) => {\n                    setMsg(\n                      <>\n                        <button onClick={() => setMsg(null)}>Okay</button>\n                        <div>\n                          <Err_svg />\n                          <h4>Image upload failed. Make sure you're online.</h4>\n                        </div>\n                      </>\n                    );\n                  });\n              }\n            }}\n          />\n          <label>Edit</label>\n        </div>\n        <div>\n          <p className=\"name\">{user.firstName + \" \" + user.lastName}</p>\n          <p className=\"id\">Delivery pay ID: {user.userId || user._id}</p>\n        </div>\n      </div>\n      <div className=\"settings\">\n        <div className=\"head\">Account Settings</div>\n        <ul>\n          <DataEdit\n            label=\"Name\"\n            fields={\n              <>\n                <section>\n                  <input\n                    placeholder=\"First name\"\n                    defaultValue={user.firstName}\n                    name=\"firstName\"\n                    required={true}\n                  />\n                </section>\n                <section>\n                  <input\n                    placeholder=\"last name\"\n                    defaultValue={user.lastName}\n                    name=\"lastName\"\n                    required={true}\n                  />\n                </section>\n              </>\n            }\n            value={user.firstName + \" \" + user.lastName}\n          />\n          <DataEdit\n            label=\"Phone Number\"\n            fields={\n              <>\n                <section>\n                  <input\n                    placeholder=\"Phone Number\"\n                    defaultValue={user.phone}\n                    name=\"phone\"\n                    required={true}\n                    pattern=\"^(\\+91|91|1|)\\d{10}$\"\n                  />\n                </section>\n              </>\n            }\n            value={user.phone}\n          />\n          <DataEdit\n            label=\"Email\"\n            fields={\n              <>\n                <section>\n                  <input\n                    type=\"email\"\n                    placeholder=\"Phone Number\"\n                    defaultValue={user.email}\n                    name=\"email\"\n                    required={true}\n                  />\n                </section>\n              </>\n            }\n            value={user.email}\n          />\n          <DataEdit\n            label=\"Password\"\n            onError={() => setMismatchPass(true)}\n            fields={\n              <>\n                <section>\n                  <input\n                    placeholder=\"Password\"\n                    name=\"password\"\n                    required={true}\n                    type=\"password\"\n                    onChange={(e) => setMismatchPass(false)}\n                  />\n                </section>\n                <section>\n                  <input\n                    placeholder=\"Confirm password\"\n                    name=\"confirm_password\"\n                    required={true}\n                    type=\"password\"\n                    onChange={(e) => setMismatchPass(false)}\n                  />\n                </section>\n                {mismatchPass && (\n                  <p className=\"errMsg\">Password did not match.</p>\n                )}\n              </>\n            }\n            value=\"\"\n          />\n          <DataEdit\n            label=\"Gender\"\n            fields={\n              <>\n                <section>\n                  <input\n                    placeholder=\"Gender\"\n                    defaultValue={user.gender}\n                    name=\"gender\"\n                    required={true}\n                  />\n                </section>\n              </>\n            }\n            value={user.gender}\n          />\n          <DataEdit\n            label=\"Age\"\n            fields={\n              <>\n                <section>\n                  <input\n                    type=\"number\"\n                    placeholder=\"Age\"\n                    defaultValue={user.age}\n                    name=\"age\"\n                    required={true}\n                  />\n                </section>\n              </>\n            }\n            value={user.age}\n          />\n          <DataEdit\n            label=\"Address\"\n            fields={\n              <>\n                <section>\n                  <input\n                    type=\"text\"\n                    placeholder=\"Address\"\n                    defaultValue={user.address.street}\n                    name=\"address.street\"\n                    required={true}\n                  />\n                </section>\n                <section>\n                  <input\n                    type=\"text\"\n                    placeholder=\"City\"\n                    defaultValue={user.address.city}\n                    name=\"address.city\"\n                    required={true}\n                  />\n                </section>\n                <section>\n                  <input\n                    type=\"text\"\n                    placeholder=\"State\"\n                    defaultValue={user.address.state}\n                    name=\"address.state\"\n                    required={true}\n                  />\n                </section>\n                <section>\n                  <input\n                    type=\"number\"\n                    placeholder=\"PIN Code\"\n                    defaultValue={user.address.zip}\n                    name=\"address.zip\"\n                    required={true}\n                  />\n                </section>\n              </>\n            }\n            value={`${user.address?.street || \"\"} ${user.address?.city || \"\"} ${\n              user.address?.state || \"\"\n            } ${user.address?.zip || \"\"}`}\n          />\n        </ul>\n      </div>\n      <div className=\"kyc\">\n        <div className=\"head\">KYC</div>\n        <ul>\n          <DataEdit\n            label=\"KYC\"\n            setMsg={setMsg}\n            formData={kycFiles}\n            fields={\n              <>\n                <section>\n                  <label>Upload files for verification.</label>\n                  <FileInput\n                    multiple={true}\n                    prefill={user.kyc?.files}\n                    name=\"kyc.files\"\n                    onChange={(files) => setKycFiles(files)}\n                  />\n                </section>\n              </>\n            }\n            value={\n              <>\n                <p>Status: {user.kyc?.verified ? \"Verified\" : \"Unverified\"}</p>\n                <label>Files for verification:</label>\n                <ul className=\"thumbs\">\n                  <Media links={user.kyc?.files} />\n                </ul>\n              </>\n            }\n          />\n        </ul>\n      </div>\n      <div className=\"paymentMethods\">\n        <div className=\"head\">Payment Methods</div>\n        <ul className=\"methods\">\n          {user.paymentMethods.map((method, i) => (\n            <SinglePaymentMethod key={i} setMsg={setMsg} method={method} />\n          ))}\n          {user.paymentMethods?.length === 0 && <p>No payment method added.</p>}\n        </ul>\n      </div>\n      {\n        //   <div className=\"socials\">\n        //   <div className=\"head\">Connect Social Accounts</div>\n        //   <ul className=\"providers\">\n        //     {user.googleId ? (\n        //       <GoogleLogin\n        //         className=\"google\"\n        //         clientId=\"978249749020-kjq65au1n373ur5oap7n4ebo2fq1jdhq.apps.googleusercontent.com\"\n        //         buttonText=\"Disconnect from Google\"\n        //         onSuccess={disconnectFromGoogle}\n        //         onFailure={disconnectFromGoogle}\n        //         cookiePolicy={\"single_host_origin\"}\n        //       />\n        //     ) : (\n        //       <GoogleLogin\n        //         className=\"google\"\n        //         clientId=\"978249749020-kjq65au1n373ur5oap7n4ebo2fq1jdhq.apps.googleusercontent.com\"\n        //         buttonText=\"Connect with Google\"\n        //         onSuccess={addGoogleId}\n        //         onFailure={addGoogleId}\n        //         cookiePolicy={\"single_host_origin\"}\n        //       />\n        //     )}\n        //   </ul>\n        // </div>\n      }\n      <Modal className=\"msg\" open={msg}>\n        {msg}\n      </Modal>\n    </div>\n  );\n};\nconst SinglePaymentMethod = ({ method, setMsg }) => {\n  const { setUser } = useContext(SiteContext);\n  const [edit, setEdit] = useState(false);\n  const deletePaymentMethod = useCallback((method) => {\n    fetch(\"/api/deletePaymentMethod\", {\n      method: \"DELETE\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ _id: method._id }),\n    })\n      .then((res) => res.json())\n      .then(({ code }) => {\n        if (code === \"ok\") {\n          setUser((prev) => ({\n            ...prev,\n            paymentMethods: prev.paymentMethods.filter(\n              (item) => item._id !== method._id\n            ),\n          }));\n        } else {\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                <Err_svg />\n                <h4>Payment method could not be deleted.</h4>\n              </div>\n            </>\n          );\n        }\n      });\n  }, []);\n  return (\n    <li>\n      <div className=\"actions\">\n        <button className=\"edit\" onClick={() => setEdit(method.__t)}>\n          Edit\n        </button>\n        <button\n          className=\"delete\"\n          onClick={() => {\n            return Confirm({\n              label: \"Payment method delete\",\n              question: \"Do you want to delete this payment method?\",\n              callback: () => deletePaymentMethod(method),\n            });\n          }}\n        >\n          Delete\n        </button>\n      </div>\n      {method.__t === \"BankCard\" && (\n        <>\n          <BankCard card={method} />\n          {edit === method.__t && (\n            <Modal\n              open={edit}\n              head={true}\n              label=\"Edit Payment Method\"\n              setOpen={setEdit}\n              className=\"editPaymentMethod\"\n            >\n              <BankCardForm\n                prefill={method}\n                onSuccess={(paymentMethod) => {\n                  if (paymentMethod) {\n                    setEdit(false);\n                    setMsg(\n                      <>\n                        <button onClick={() => setMsg(null)}>Okay</button>\n                        <div>\n                          <Succ_svg />\n                          <h4>Payment method updated.</h4>\n                        </div>\n                      </>\n                    );\n                  }\n                }}\n              />\n            </Modal>\n          )}\n        </>\n      )}\n      {method.__t === \"BankAccount\" && (\n        <>\n          <BankAccount account={method} />\n          {edit === method.__t && (\n            <Modal\n              open={edit}\n              head={true}\n              label=\"Edit Payment Method\"\n              setOpen={setEdit}\n              className=\"editPaymentMethod\"\n            >\n              <NetBankingForm\n                prefill={method}\n                onSuccess={(paymentMethod) => {\n                  if (paymentMethod) {\n                    setEdit(false);\n                    setMsg(\n                      <>\n                        <button onClick={() => setMsg(null)}>Okay</button>\n                        <div>\n                          <Succ_svg />\n                          <h4>Payment method updated.</h4>\n                        </div>\n                      </>\n                    );\n                  }\n                }}\n              />\n            </Modal>\n          )}\n        </>\n      )}\n    </li>\n  );\n};\n\nconst DataEdit = ({ label, fields, value, onError, setMsg, formData }) => {\n  const { setUser } = useContext(SiteContext);\n  const [edit, setEdit] = useState(false);\n  const form = useRef(null);\n  const submit = async (e) => {\n    e.preventDefault();\n    let allData = {};\n    for (var [field, value] of new FormData(e.target).entries()) {\n      allData[field] = value;\n    }\n    if (allData.password && allData.password !== allData.confirm_password) {\n      onError?.();\n      return;\n    }\n    if (allData[\"address.city\"]) {\n      navigator.geolocation.getCurrentPosition(function (position) {\n        let lat = position.coords.latitude;\n        let long = position.coords.longitude;\n        allData[\"address.location\"] = {\n          type: \"Point\",\n          coordinates: [long, lat],\n        };\n      });\n    }\n    if (allData[\"kyc.files\"]) {\n      allData[\"kyc.files\"] =\n        (await UploadFiles({ files: formData, setMsg })) || [];\n    }\n    if (allData[\"gst.detail.files\"]) {\n      allData[\"gst.detail.files\"] =\n        (await UploadFiles({ files: formData, setMsg })) || [];\n    }\n    fetch(\"/api/editUserProfile\", {\n      method: \"PATCH\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify(allData),\n    })\n      .then((res) => res.json())\n      .then(({ user }) => {\n        if (user) {\n          setUser(user);\n          setEdit(false);\n        } else {\n          alert(\"someting went wrong\");\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        alert(\"someting went wrong\");\n      });\n  };\n  return (\n    <li>\n      <p className=\"label\">{label}</p>\n      <form ref={form} onSubmit={submit}>\n        {edit ? (\n          <div className=\"inputs\">{fields}</div>\n        ) : (\n          <div className=\"currentValue\">{value}</div>\n        )}\n        <div className=\"btns\">\n          {edit ? (\n            <>\n              <button key=\"submit\" type=\"submit\">\n                Save changes\n              </button>\n              <button key=\"cancel\" type=\"button\" onClick={() => setEdit(false)}>\n                Cancel\n              </button>\n            </>\n          ) : (\n            <button key=\"edit\" type=\"button\" onClick={() => setEdit(true)}>\n              Edit\n            </button>\n          )}\n        </div>\n      </form>\n    </li>\n  );\n};\n\nexport default Profile;\n","import {\n  useState,\n  useEffect,\n  useRef,\n  useLayoutEffect,\n  useContext,\n  lazy,\n} from \"react\";\nimport {\n  Succ_svg,\n  Err_svg,\n  Plus_svg,\n  X_svg,\n  Combobox,\n  Pagination,\n  Checkbox,\n  calculateDiscount,\n  calculatePrice,\n  Actions,\n  Chev_down_svg,\n  User,\n  Arrow_left_svg,\n  NumberInput,\n  Media,\n  UploadFiles,\n  FileInput,\n  Img,\n  Moment,\n  moment,\n  InputDateRange,\n} from \"../Elements\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport { SiteContext } from \"../../SiteContext\";\nimport { Modal, Confirm } from \"../Modal\";\nimport TextareaAutosize from \"react-textarea-autosize\";\nimport { toast } from \"react-toastify\";\nconst MilestoneForm = lazy(() =>\n  import(\"../Forms\").then((mod) => ({ default: mod.MilestoneForm }))\n);\n\nconst Orders = ({ categories }) => {\n  const [total, setTotal] = useState(0);\n  const [page, setPage] = useState(1);\n  const [perPage, setPerPage] = useState(20);\n  const [status, setStatus] = useState(\"\");\n  const [search, setSearch] = useState(\"\");\n  const [sort, setSort] = useState({\n    column: \"createdAt\",\n    order: \"dsc\",\n  });\n  const [dateRange, setDateRange] = useState(null);\n  const [orders, setOrders] = useState([]);\n  const [selectAll, setSelectAll] = useState(false);\n  const [batch, setBatch] = useState([]);\n  const [msg, setMsg] = useState(null);\n  useEffect(() => {\n    const startDate = moment({\n      time: dateRange?.startDate,\n      format: \"YYYY-MM-DD\",\n    });\n    const endDate = moment({\n      time: dateRange?.endDate.setHours(24, 0, 0, 0),\n      format: \"YYYY-MM-DD\",\n    });\n    fetch(\n      `/api/getOrders?${new URLSearchParams({\n        user: \"seller\",\n        ...(search && { q: search }),\n        page,\n        perPage,\n        sort: sort.column,\n        order: sort.order,\n        ...(dateRange && {\n          dateFrom: startDate,\n          dateTo: endDate,\n        }),\n        ...(status && { status }),\n      })}`\n    )\n      .then((res) => res.json())\n      .then((data) => {\n        if (data.code === \"ok\") {\n          setOrders(data.orders);\n          setTotal(data.total);\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        setMsg(\n          <>\n            <button onClick={() => setMsg(null)}>Okay</button>\n            <div>\n              <Err_svg />\n              <h4>Could not get orders.</h4>\n            </div>\n          </>\n        );\n      });\n  }, [status, search, page, perPage, dateRange]);\n  useEffect(() => {\n    if (selectAll) {\n    } else {\n      setBatch([]);\n    }\n  }, [selectAll]);\n  useEffect(() => {\n    if (batch.length === 0) {\n      setSelectAll(false);\n    }\n  }, [batch]);\n  return (\n    <>\n      <div className=\"benner\">\n        <p>Order Management</p>\n      </div>\n      <div className=\"filters\">\n        <section>\n          <label>Total:</label>\n          {total}\n        </section>\n        <section>\n          <label>Per Page:</label>\n          <Combobox\n            defaultValue={0}\n            options={[\n              { label: \"20\", value: 20 },\n              { label: \"30\", value: 30 },\n              { label: \"50\", value: 50 },\n            ]}\n            onChange={(e) => setPerPage(e.value)}\n          />\n        </section>\n        <section className=\"search\">\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            width=\"23\"\n            height=\"23\"\n            viewBox=\"0 0 23 23\"\n          >\n            <path\n              id=\"Icon_ionic-ios-search\"\n              data-name=\"Icon ionic-ios-search\"\n              d=\"M27.23,25.828l-6.4-6.455a9.116,9.116,0,1,0-1.384,1.4L25.8,27.188a.985.985,0,0,0,1.39.036A.99.99,0,0,0,27.23,25.828ZM13.67,20.852a7.2,7.2,0,1,1,5.091-2.108A7.155,7.155,0,0,1,13.67,20.852Z\"\n              transform=\"translate(-4.5 -4.493)\"\n              fill=\"#707070\"\n              opacity=\"0.74\"\n            />\n          </svg>\n          <input\n            value={search}\n            onChange={(e) => setSearch(e.target.value)}\n            placeholder=\"Search for Buyer\"\n          />\n          {search && (\n            <button onClick={() => setSearch(\"\")}>\n              <X_svg />\n            </button>\n          )}\n        </section>\n        <section className=\"category\">\n          <label>Status:</label>\n          <Combobox\n            defaultValue={0}\n            options={[\n              { label: \"All\", value: \"\" },\n              { label: \"Pending\", value: \"pending\" },\n              { label: \"Approved\", value: \"approved\" },\n              { label: \"Cancelled\", value: \"cancelled\" },\n              { label: \"Hold\", value: \"Hold\" },\n              { label: \"Shipped\", value: \"shipped\" },\n              { label: \"Delivered\", value: \"delivered\" },\n              { label: \"Refunded\", value: \"refunded\" },\n            ]}\n            onChange={(e) => setStatus(e.value)}\n          />\n        </section>\n        <section className={`date`}>\n          <InputDateRange\n            dateRange={dateRange}\n            onChange={(range) => setDateRange(range)}\n          />\n        </section>\n      </div>\n      {batch.length > 0 && (\n        <div className=\"batchAction\">\n          <button onClick={() => console.log(\"batch delete\")}>Delete</button>\n        </div>\n      )}\n      <table className=\"table orders\">\n        <thead>\n          <tr>\n            {\n              //   <th className=\"checkContainer\">\n              //   <Checkbox\n              //     value={selectAll}\n              //     defaultValue={selectAll}\n              //     onChange={(e) => setSelectAll(e)}\n              //   />\n              // </th>\n            }\n            <th>Order</th>\n            <th className=\"date\">Date</th>\n            {\n              // <th>Buyer</th>\n              // <th>QTY</th>\n              // <th>Refundable</th>\n              // <th>Milestone</th>\n            }\n            <th>Total Price</th>\n            <th>Status</th>\n            <th>Actions</th>\n          </tr>\n        </thead>\n        <tbody>\n          {orders.map((order, i) => (\n            <SingleOrder\n              key={i}\n              order={order}\n              setOrders={setOrders}\n              selectAll={selectAll}\n              setBatch={setBatch}\n              batch={batch}\n            />\n          ))}\n          {orders.length === 0 && (\n            <tr className=\"placeholder\">\n              <td>No product yet.</td>\n            </tr>\n          )}\n        </tbody>\n      </table>\n      <Pagination\n        total={total}\n        btns={5}\n        currentPage={page}\n        perPage={perPage}\n        setPage={setPage}\n      />\n      <Modal className=\"msg\" open={msg}>\n        {msg}\n      </Modal>\n    </>\n  );\n};\nconst SingleOrder = ({ order, setOrders, selectAll, setBatch, batch }) => {\n  const actionsRef = useRef();\n  const checkRef = useRef();\n  const history = useHistory();\n  const { user } = useContext(SiteContext);\n  const [selected, setSelected] = useState(selectAll || false);\n  const [edit, setEdit] = useState(false);\n  const [msg, setMsg] = useState(false);\n  const cancelOrder = () => {\n    fetch(\"/api/declineOrder\", {\n      method: \"PATCH\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ _id: order._id }),\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        if (data.code === \"ok\") {\n          setOrders((prev) =>\n            prev.map((item) => {\n              if (item._id === order._id) {\n                return {\n                  ...item,\n                  status: data.order?.status,\n                };\n              } else {\n                return item;\n              }\n            })\n          );\n        } else {\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                <Err_svg />\n                <h4>Could not cancel order. Please try again.</h4>\n              </div>\n            </>\n          );\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        setMsg(\n          <>\n            <button onClick={() => setMsg(null)}>Okay</button>\n            <div>\n              <Err_svg />\n              <h4>Could not cancel order. Make sure you're online</h4>\n            </div>\n          </>\n        );\n      });\n  };\n  const acceptOrder = () => {\n    fetch(\"/api/acceptOrder\", {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ _id: order._id }),\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        if (data.code === \"ok\") {\n          setOrders((prev) =>\n            prev.map((item) => {\n              if (item._id === order._id) {\n                return {\n                  ...item,\n                  status: data.order?.status,\n                };\n              } else {\n                return item;\n              }\n            })\n          );\n        } else {\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                <Err_svg />\n                <h4>Orders does not exist.</h4>\n              </div>\n            </>\n          );\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        setMsg(\n          <>\n            <button onClick={() => setMsg(null)}>Okay</button>\n            <div>\n              <Err_svg />\n              <h4>Could not accept order. Make sure you're online.</h4>\n            </div>\n          </>\n        );\n      });\n  };\n  const requestCancellation = () => {\n    fetch(\"/api/requestCancellation\", {\n      method: \"PATCH\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ _id: order._id }),\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        if (data.code === \"ok\") {\n          setOrders((prev) =>\n            prev.map((item) => {\n              if (item._id === order._id) {\n                return {\n                  ...item,\n                  status: data.order?.status,\n                };\n              } else {\n                return item;\n              }\n            })\n          );\n        } else {\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                <Err_svg />\n                <h4>Could not cancel order. Please try again.</h4>\n              </div>\n            </>\n          );\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        setMsg(\n          <>\n            <button onClick={() => setMsg(null)}>Okay</button>\n            <div>\n              <Err_svg />\n              <h4>Could not cancel order. Make sure you're online</h4>\n            </div>\n          </>\n        );\n      });\n  };\n  useEffect(() => {\n    setSelected(selectAll);\n  }, [selectAll]);\n  useEffect(() => {\n    if (selected) {\n      setBatch((prev) => [...prev, order._id]);\n    } else {\n      setBatch((prev) => prev.filter((item) => item !== order._id));\n    }\n  }, [selected]);\n  return (\n    <>\n      <tr\n        className={`order ${selected ? \"selected\" : \"\"}`}\n        onClick={(e) => {\n          if (\n            e.nativeEvent.path.includes(actionsRef.current) ||\n            e.nativeEvent.path.includes(checkRef.current) ||\n            batch.length > 0\n          ) {\n          } else {\n            history.push(`/account/myShop/orders/${order._id}`);\n          }\n        }}\n      >\n        {\n          //   <td className=\"checkContainer\" ref={checkRef}>\n          //   <Checkbox\n          //     defaultValue={selected}\n          //     value={selected}\n          //     onChange={(e) => {\n          //       setSelected(e);\n          //     }}\n          //   />\n          // </td>\n        }\n        <td>{order._id}</td>\n        <td className=\"date\">\n          <Moment format=\"DD MMM YYYY, hh:mm a\">{order.createdAt}</Moment>\n        </td>\n        {\n          //   <td className=\"user\">\n          //   <User user={order.buyer} />\n          // </td>\n          // <td>{order.products.reduce((a, c) => a + c.qty, 0)}</td>\n          // <td>{order.refundable || \"N/A\"}</td>\n          // <td>{order.milestones.length || \"N/A\"}</td>\n        }\n        <td>{order.total}</td>\n        <td>{order.status}</td>\n        <td ref={actionsRef}>\n          {batch.length === 0 && (\n            <Actions icon={<Chev_down_svg />}>\n              <Link to={`/account/myShopping/orders/${order._id}`}>\n                View Detail\n              </Link>\n              {order.status === \"pending\" && (\n                <>\n                  <Link\n                    to=\"#\"\n                    onClick={(e) => {\n                      Confirm({\n                        label: \"Accept Order\",\n                        question: \"You sure want to accept this order?\",\n                        callback: acceptOrder,\n                      });\n                    }}\n                  >\n                    Accept order\n                  </Link>\n                  <Link\n                    to=\"#\"\n                    onClick={(e) => {\n                      Confirm({\n                        label: \"Order Cancellation\",\n                        question: \"You sure want to cancel this order?\",\n                        callback: cancelOrder,\n                      });\n                    }}\n                  >\n                    Cancel order\n                  </Link>\n                </>\n              )}\n              {order.status === \"approved\" && (\n                <Link\n                  to=\"#\"\n                  onClick={(e) => {\n                    Confirm({\n                      label: \"Order Cancellation\",\n                      question:\n                        \"You sure want to request cancellation for this order?\",\n                      callback: requestCancellation,\n                    });\n                  }}\n                >\n                  Request Cancellation\n                </Link>\n              )}\n            </Actions>\n          )}\n        </td>\n      </tr>\n      <Modal className=\"msg\" open={msg}>\n        {msg}\n      </Modal>\n    </>\n  );\n};\n\nexport const FullOrder = ({ history, match }) => {\n  const { user, userType } = useContext(SiteContext);\n  const [msg, setMsg] = useState(null);\n  const [order, setOrder] = useState(null);\n  const [shipping, setShipping] = useState(user.shopInfo?.shippingCost || 0);\n  const [refundable, setRefundable] = useState(null);\n  const [addTerm, setAddTerm] = useState(\"\");\n  const [milestoneForm, setMilestoneForm] = useState(false);\n  const [fileUpload, setFileUpload] = useState(false);\n  const milestoneTimeout = useRef();\n  const acceptOrder = () => {\n    fetch(\"/api/acceptOrder\", {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({\n        _id: order._id,\n        // products: order.products,\n        // shippingCost: shipping,\n        // refundable,\n        // terms,\n        // total,\n      }),\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        if (data.code === \"ok\") {\n          setOrder((prev) => ({ ...prev, status: \"approved\" }));\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                <Succ_svg />\n                <h4>Order approved.</h4>\n              </div>\n            </>\n          );\n        } else {\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                <Err_svg />\n                <h4>Orders does not exist.</h4>\n              </div>\n            </>\n          );\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        setMsg(\n          <>\n            <button onClick={() => setMsg(null)}>Okay</button>\n            <div>\n              <Err_svg />\n              <h4>Could not accept order. Make sure you're online.</h4>\n            </div>\n          </>\n        );\n      });\n  };\n  const declineOrder = () => {\n    fetch(\"/api/declineOrder\", {\n      method: \"PATCH\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ _id: order._id }),\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        if (data.code === \"ok\") {\n          setOrder((prev) => ({ ...prev, status: \"declined\" }));\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                <Succ_svg />\n                <h4>Order declined.</h4>\n              </div>\n            </>\n          );\n        } else {\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                <Err_svg />\n                <h4>Orders does not exist.</h4>\n              </div>\n            </>\n          );\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        setMsg(\n          <>\n            <button onClick={() => setMsg(null)}>Okay</button>\n            <div>\n              <Err_svg />\n              <h4>Could not decline order. Make sure you're online.</h4>\n            </div>\n          </>\n        );\n      });\n  };\n  const markAsShipped = () => {\n    fetch(\"/api/updateOrder\", {\n      method: \"PATCH\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({\n        _id: order._id,\n        status: \"shipped\",\n      }),\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        if (data.code === \"ok\") {\n          setOrder((prev) => ({ ...order, status: \"shipped\" }));\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                <Succ_svg />\n                <h4>\n                  Order has been updated. Don't forget to upload proof of\n                  shipping below.\n                </h4>\n              </div>\n            </>\n          );\n        } else {\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                <Err_svg />\n                <h4>Order could not be updated. Try again.</h4>\n              </div>\n            </>\n          );\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        setMsg(\n          <>\n            <button onClick={() => setMsg(null)}>Okay</button>\n            <div>\n              <Err_svg />\n              <h4>Order could not be updated. Make sure you're online.</h4>\n            </div>\n          </>\n        );\n      });\n  };\n  const markAsDelivered = () => {\n    fetch(\"/api/updateOrder\", {\n      method: \"PATCH\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({\n        _id: order._id,\n        status: \"delivered\",\n      }),\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        if (data.code === \"ok\") {\n          setOrder((prev) => ({ ...order, status: \"delivered\" }));\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                <Succ_svg />\n                <h4>\n                  Order has been updated. Don't forget to upload proof of\n                  delivery below.\n                </h4>\n              </div>\n            </>\n          );\n        } else {\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                <Err_svg />\n                <h4>Order could not be updated. Try again.</h4>\n              </div>\n            </>\n          );\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        setMsg(\n          <>\n            <button onClick={() => setMsg(null)}>Okay</button>\n            <div>\n              <Err_svg />\n              <h4>Order could not be updated. Make sure you're online.</h4>\n            </div>\n          </>\n        );\n      });\n  };\n  useEffect(() => {\n    fetch(`/api/singleOrder?_id=${match.params._id}`)\n      .then((res) => res.json())\n      .then((data) => {\n        if (data.code === \"ok\") {\n          setOrder(data.order);\n          setShipping(data.shippingCost);\n        } else {\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                <Err_svg />\n                <h4>Orders does not exist.</h4>\n              </div>\n            </>\n          );\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        setMsg(\n          <>\n            <button onClick={() => setMsg(null)}>Okay</button>\n            <div>\n              <Err_svg />\n              <h4>Could not get order. Make sure you're online.</h4>\n            </div>\n          </>\n        );\n      });\n  }, []);\n  if (order) {\n    const productPrice = order.products.reduce(\n      (a, c) =>\n        (a + calculatePrice({ product: c.product, gst: true }) * c.qty).fix(),\n      0\n    );\n    const couponCodeDiscount =\n      (order.coupon?.type === \"percent\" &&\n        Math.min(\n          (productPrice / 100) * order.coupon.amount,\n          order.coupon.maxDiscount\n        )) ||\n      (order.coupon?.type === \"flat\" && order.coupon?.amount) ||\n      0;\n    const fee = (\n      ((productPrice - couponCodeDiscount + order.shippingCost) / 100) *\n      order.fee\n    ).fix();\n    return (\n      <>\n        <div className=\"actions\">\n          <Link\n            to={`/account/${\n              userType === \"seller\" ? \"myShop\" : \"myShopping\"\n            }/orders`}\n            className=\"back\"\n          >\n            <Arrow_left_svg />\n            Back\n          </Link>\n          {order.status === \"approved\" && (\n            <button\n              onClick={() =>\n                Confirm({\n                  label: \"Mark Order as Shipped\",\n                  question: \"Did you ship the order?\",\n                  callback: markAsShipped,\n                })\n              }\n            >\n              Mark as Shipped\n            </button>\n          )}\n          {order.status === \"shipped\" && (\n            <button\n              onClick={() =>\n                Confirm({\n                  label: \"Mark Order as Delivered\",\n                  question: \"Has the order been delivered?\",\n                  callback: markAsDelivered,\n                })\n              }\n            >\n              Mark as Delivered\n            </button>\n          )}\n          {order.status === \"pending\" && (\n            <>\n              <button\n                onClick={() => {\n                  Confirm({\n                    lable: \"Accept Order\",\n                    question: <>You sure want to accept this order?</>,\n                    callback: acceptOrder,\n                  });\n                }}\n              >\n                Accept\n              </button>\n              <button\n                onClick={() =>\n                  Confirm({\n                    label: \"Decline Order\",\n                    question: \"You sure want to decline this order?\",\n                    callback: declineOrder,\n                  })\n                }\n              >\n                Decline\n              </button>\n            </>\n          )}\n        </div>\n        <div className=\"singleOrder\">\n          <div className=\"summery\">\n            <h3>Order Summery</h3>\n            <ul>\n              <li>\n                <label>Buyer</label>\n                <User user={order.buyer} />\n              </li>\n              <li>\n                <label>Order ID</label>\n                {order._id}\n              </li>\n              <li>\n                <label>Status</label>\n                {order.status}\n              </li>\n              <li>\n                <label>Submitted at</label>\n                <Moment format=\"DD MMM YYYY, hh:mma\">{order.createdAt}</Moment>\n              </li>\n              <li>\n                <label>Note</label>\n                {order.note}\n              </li>\n              <li></li>\n              <li className=\"devide\">\n                <label>Delivery Address</label>\n                <span />\n              </li>\n              {Object.entries(order.deliveryDetail).map(([key, value], i) =>\n                key === \"deliveryWithin\" ? (\n                  <li key={i}>\n                    <label>Delivery within</label>\n                    {order.deliveryDetail.deliveryWithin} days\n                  </li>\n                ) : (\n                  <li key={i}>\n                    <label>{key}</label>\n                    {value}\n                  </li>\n                )\n              )}\n            </ul>\n          </div>\n          <div className=\"products\">\n            <h3>Products</h3>\n            <ul>\n              {order.products.map(({ product, qty, available }, i) => (\n                <li key={i}>\n                  <Img src={product.images[0] || \"/open_box.png\"} />\n                  <div className=\"detail\">\n                    <p>{product.name}</p>\n                    <p className=\"qty\">QTY: {qty}</p>\n                    {order.status === \"pending\" && (\n                      <p className=\"available\">\n                        Available: {available.toString()}\n                      </p>\n                    )}\n                  </div>\n                  <div className=\"price\">\n                    <span>\n                      {calculatePrice({ product, gst: true })} x {qty}\n                    </span>\n                    {(calculatePrice({ product, gst: true }) * qty).fix()}\n                  </div>\n                  {\n                    //   order.status === \"pending\" && (\n                    //   <div className=\"remove\">\n                    //     <button\n                    //       onClick={() => {\n                    //         setOrder((prev) => ({\n                    //           ...prev,\n                    //           products: prev.products.filter((cartProduct) => {\n                    //             console.log(cartProduct, product);\n                    //             return cartProduct.product._id !== product._id;\n                    //           }),\n                    //         }));\n                    //       }}\n                    //     >\n                    //       <X_svg />\n                    //     </button>\n                    //   </div>\n                    // )\n                  }\n                </li>\n              ))}\n            </ul>\n            <div className=\"total\">\n              <div className=\"data\">\n                <label>Total</label>{productPrice}\n              </div>\n              {order.coupon && (\n                <>\n                  <div className=\"data\">\n                    <label>\n                      Coupon Code {order.coupon.code}\n                      <br />\n                      Discount{\" \"}\n                      {order.coupon.type === \"percent\" ? (\n                        <>\n                          {order.coupon.amount}% (Upto \n                          {order.coupon.maxDiscount})\n                        </>\n                      ) : (\n                        <>flat</>\n                      )}\n                    </label>\n                    <span>{couponCodeDiscount}</span>\n                  </div>\n                </>\n              )}\n              <div className=\"data\">\n                <label>Shipping</label>\n                {\n                  //   order.status === \"pending\" ? (\n                  //   <NumberInput\n                  //     value={shipping}\n                  //     onChange={(e) => setShipping(e.target.value)}\n                  //   />\n                  // ) : (\n                  //   <>{shipping || 0}</>\n                  // )\n                  order.shippingCost\n                }\n              </div>\n              <hr />\n              <div className=\"data\">\n                <label>Delivery Pay fee {order.fee}%</label>\n                {(order.total - (order.total / (order.fee + 100)) * 100).fix()}\n              </div>\n              <hr />\n              <div className=\"data\">\n                <label>Grand Total</label>{order.total.fix()}\n              </div>\n              <hr />\n              <div className=\"data\">\n                <label>You'll recieve</label>\n                {((order.total / (order.fee + 100)) * 100).fix()}\n              </div>\n            </div>\n            {\n              //   <div className=\"deliveryInfo\">\n              //   <section>\n              //     <label>Delivery Time</label>\n              //     {order.status === \"pending\" ? (\n              //       <input\n              //         type=\"datetime-local\"\n              //         value={deliveryTime}\n              //         onChange={(e) => setDeliveryTime(e.target.value)}\n              //       />\n              //     ) : order.deliveryDetail?.deliveryTime ? (\n              //       <Moment format=\"DD MMM YYYY hh:mma\">\n              //         order.deliveryDetail?.deliveryTime\n              //       </Moment>\n              //     ) : (\n              //       <>N/A</>\n              //     )}\n              //   </section>\n              //   <section>\n              //     <label>Refundable</label>\n              //     {order.status === \"pending\" ? (\n              //       <Combobox\n              //         required={true}\n              //         defaultValue={0}\n              //         onChange={(e) => setRefundable(e.value)}\n              //         options={[\n              //           { label: \"No\", value: null },\n              //           {\n              //             label: \"Upto 24 Hours After Delivery\",\n              //             value: \"Upto 24 Hours After Delivery\",\n              //           },\n              //           {\n              //             label: \"Upto 7 Days After Delivery\",\n              //             value: \"Upto 7 Days After Delivery\",\n              //           },\n              //           {\n              //             label: \"Upto 15 Days After Delivery\",\n              //             value: \"Upto 15 Days After Delivery\",\n              //           },\n              //         ]}\n              //       />\n              //     ) : (\n              //       <>{order.refundable || \"N/A\"}</>\n              //     )}\n              //   </section>\n              // </div>\n            }\n          </div>\n          <div className=\"milestones\">\n            <h3>\n              Milestones\n              {\n                //   (order.status === \"approved\" ||\n                //   order.status === \"shipped\" ||\n                //   order.status === \"delivered\") && (\n                //   <button onClick={() => setMilestoneForm(true)}>\n                //     Request Milestone\n                //   </button>\n                // )\n              }\n            </h3>\n            <p className=\"subtitle\">Click to view milestone detail.</p>\n            {\n              // {order.status === \"pending\" ? (\n              //   <p>Buyer can create milestones after you accept the order.</p>\n              // ) : (\n            }\n            <table>\n              <thead>\n                <tr>\n                  <td>Date</td>\n                  <td>Descrption</td>\n                  <td>Amount</td>\n                  <td>Status</td>\n                </tr>\n              </thead>\n              <tbody>\n                {order.milestones.map((milestone) => (\n                  <tr\n                    key={milestone._id}\n                    onClick={() =>\n                      history.push(`/account/hold?q=${milestone._id}`)\n                    }\n                  >\n                    <td>\n                      <Moment format=\"DD MMM YYYY, hh:mma\">\n                        {milestone.createdAt}\n                      </Moment>\n                    </td>\n                    <td>{milestone.dscr}</td>\n                    <td>{milestone.amount}</td>\n                    <td>{milestone.status}</td>\n                  </tr>\n                ))}\n                {order.milestones.length === 0 && (\n                  <tr className=\"placeholdert\">\n                    <td>Nothing yet.</td>\n                  </tr>\n                )}\n              </tbody>\n            </table>\n            {\n              // )}\n            }\n          </div>\n          <div className=\"delivery\">\n            <h3>\n              Proof of delivery\n              {(order.status === \"approved\" || order.status === \"shipped\") && (\n                <button onClick={() => setFileUpload(true)}>\n                  Upload proof of delivery\n                </button>\n              )}\n            </h3>\n            {order.files?.length > 0 ? (\n              <div className=\"thumbs\">\n                <Media links={order.files} />\n              </div>\n            ) : (\n              <>No files added.</>\n            )}\n          </div>\n          <section className=\"terms\">\n            <h3>Return Policy Terms</h3>\n            <ul>\n              {order.terms?.map((item, i) => (\n                <li key={i}>\n                  {item}{\" \"}\n                  {\n                    //   order.status === \"pending\" && (\n                    //   <button\n                    //     type=\"button\"\n                    //     onClick={() =>\n                    //       setTerms((prev) => prev.filter((term) => term !== item))\n                    //     }\n                    //   >\n                    //     <X_svg />\n                    //   </button>\n                    // )\n                  }\n                </li>\n              ))}\n              {\n                //   order.status === \"pending\" && (\n                //   <section className=\"addTerm\">\n                //     <TextareaAutosize\n                //       value={addTerm}\n                //       placeholder=\"Add auditional term\"\n                //       onChange={(e) => setAddTerm(e.target.value)}\n                //     />\n                //     <button\n                //       type=\"button\"\n                //       onClick={() => {\n                //         setTerms((prev) =>\n                //           addTerm\n                //             ? [\n                //                 ...prev.filter((term) => term !== addTerm),\n                //                 addTerm,\n                //               ]\n                //             : prev\n                //         );\n                //         setAddTerm(\"\");\n                //       }}\n                //     >\n                //       Add Term\n                //     </button>\n                //   </section>\n                // )\n              }\n            </ul>\n          </section>\n        </div>\n        <Modal\n          head={true}\n          label=\"Create Milestone\"\n          setOpen={setMilestoneForm}\n          className=\"milestoneRequest\"\n          open={milestoneForm}\n        >\n          <MilestoneForm\n            action=\"request\"\n            definedAmount={order.total}\n            client={order.buyer}\n            order={order._id}\n            onSuccess={(milestone) => {\n              setMilestoneForm(false);\n              setMsg(\n                <>\n                  <button onClick={() => setMsg(null)}>Okay</button>\n                  <div>\n                    <Succ_svg />\n                    <h4 className=\"amount\">{milestone?.amount}</h4>\n                    <h4>Milestone has been requested</h4>\n                  </div>\n                  <Link to=\"/account/hold\" onClick={() => setMsg(null)}>\n                    Check your Delivery pay Hold\n                  </Link>\n                </>\n              );\n              setOrder((prev) => ({\n                ...prev,\n                milestones: [...prev.milestones, milestone],\n              }));\n            }}\n          />\n        </Modal>\n        <Modal\n          head={true}\n          label=\"Upload proof of shipping & delivery\"\n          setOpen={setFileUpload}\n          open={fileUpload}\n          className=\"fileUpload\"\n        >\n          <FileUploadForm\n            order={order}\n            onSuccess={(order) => {\n              setFileUpload(false);\n              setOrder((prev) => ({ ...prev, files: order.files }));\n            }}\n          />\n        </Modal>\n        <Modal className=\"msg\" open={msg}>\n          {msg}\n        </Modal>\n      </>\n    );\n  }\n  return <>Loading</>;\n};\nconst FileUploadForm = ({ order, onSuccess }) => {\n  const [loading, setLoading] = useState(false);\n  const [files, setFiles] = useState([]);\n  const [msg, setMsg] = useState(null);\n  const submit = async () => {\n    setLoading(true);\n    const fileLinks = files.length ? await UploadFiles({ files, setMsg }) : [];\n    fetch(\"/api/updateOrder\", {\n      method: \"PATCH\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ _id: order._id, files: fileLinks }),\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        setLoading(false);\n        if (data.code === \"ok\") {\n          onSuccess?.(data.order);\n        } else {\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                <Err_svg />\n                <h4>Could not upload files. Try again.</h4>\n              </div>\n            </>\n          );\n        }\n      })\n      .catch((err) => {\n        setLoading(false);\n        console.log(err);\n        setMsg(\n          <>\n            <button onClick={() => setMsg(null)}>Okay</button>\n            <div>\n              <Err_svg />\n              <h4>Could not upload files. Make sure you're online.</h4>\n            </div>\n          </>\n        );\n      });\n  };\n  return (\n    <>\n      <form\n        onSubmit={(e) => {\n          e.preventDefault();\n          Confirm({\n            title: \"Upload Proof of Shipping & Delivery\",\n            question: (\n              <>\n                You sure want to upload these files?\n                <span className=\"note\">\n                  Keep in mind these files can not be deleted later.\n                </span>\n              </>\n            ),\n            callback: submit,\n          });\n        }}\n      >\n        <section>\n          <label>Upload Images of the products, shipment reciept etc.</label>\n          <FileInput\n            multiple={true}\n            accept=\"image/*\"\n            required={true}\n            onChange={(files) => setFiles(files)}\n          />\n        </section>\n        <section className=\"btns\">\n          <button className=\"submit\">Submit</button>\n        </section>\n      </form>\n      {loading && (\n        <div className=\"spinnerContainer\">\n          <div className=\"spinner\" />\n        </div>\n      )}\n      <Modal className=\"msg\" open={msg}>\n        {msg}\n      </Modal>\n    </>\n  );\n};\n\nexport default Orders;\n","import {\n  useState,\n  useEffect,\n  useRef,\n  useLayoutEffect,\n  useContext,\n  lazy,\n} from \"react\";\nimport {\n  Succ_svg,\n  Err_svg,\n  Plus_svg,\n  X_svg,\n  Combobox,\n  Pagination,\n  Checkbox,\n  calculateDiscount,\n  calculatePrice,\n  Actions,\n  Chev_down_svg,\n  User,\n  Arrow_left_svg,\n  Media,\n  Img,\n  Moment,\n  moment,\n  InputDateRange,\n} from \"../Elements\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport { SiteContext } from \"../../SiteContext\";\nimport { Modal, Confirm } from \"../Modal\";\nimport { toast } from \"react-toastify\";\nconst MilestoneForm = lazy(() =>\n  import(\"../Forms\").then((mod) => ({ default: mod.MilestoneForm }))\n);\n\nconst Refunds = ({ history, location }) => {\n  const { userType } = useContext(SiteContext);\n  const [total, setTotal] = useState(0);\n  const [page, setPage] = useState(1);\n  const [perPage, setPerPage] = useState(20);\n  const [search, setSearch] = useState(\"\");\n  const [status, setStatus] = useState(\"\");\n  const [sort, setSort] = useState({\n    column: \"createdAt\",\n    order: \"dsc\",\n  });\n  const [dateRange, setDateRange] = useState(null);\n  const [refunds, setRefunds] = useState([]);\n  const [selectAll, setSelectAll] = useState(false);\n  const [batch, setBatch] = useState([]);\n  const [msg, setMsg] = useState(null);\n  useEffect(() => {\n    const startDate = moment({\n      time: dateRange?.startDate,\n      format: \"YYYY-MM-DD\",\n    });\n    const endDate = moment({\n      time: new Date(dateRange?.endDate)?.setHours(24, 0, 0, 0),\n      format: \"YYYY-MM-DD\",\n    });\n    fetch(\n      `/api/getRefunds?${new URLSearchParams({\n        user: userType,\n        ...(search && { q: search }),\n        page,\n        perPage,\n        sort: sort.column,\n        order: sort.order,\n        ...(dateRange && {\n          dateFrom: startDate,\n          dateTo: endDate,\n        }),\n        ...(status && { status }),\n      })}`\n    )\n      .then((res) => res.json())\n      .then((data) => {\n        if (data.code === \"ok\") {\n          setRefunds(data.refunds);\n          setTotal(data.total);\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        setMsg(\n          <>\n            <button onClick={() => setMsg(null)}>Okay</button>\n            <div>\n              <Err_svg />\n              <h4>Could not get orders.</h4>\n            </div>\n          </>\n        );\n      });\n  }, [search, page, perPage, dateRange, status]);\n  useEffect(() => {\n    if (selectAll) {\n    } else {\n      setBatch([]);\n    }\n  }, [selectAll]);\n  useEffect(() => {\n    if (batch.length === 0) {\n      setSelectAll(false);\n    }\n  }, [batch]);\n  return (\n    <>\n      <div className=\"benner\">\n        <p>My Refunds</p>\n      </div>\n      <div className=\"filters\">\n        <section>\n          <label>Total:</label>\n          {total}\n        </section>\n        <section>\n          <label>Per Page:</label>\n          <Combobox\n            defaultValue={0}\n            options={[\n              { label: \"20\", value: 20 },\n              { label: \"30\", value: 30 },\n              { label: \"50\", value: 50 },\n            ]}\n            onChange={(e) => setPerPage(e.value)}\n          />\n        </section>\n        <section className=\"search\">\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            width=\"23\"\n            height=\"23\"\n            viewBox=\"0 0 23 23\"\n          >\n            <path\n              id=\"Icon_ionic-ios-search\"\n              data-name=\"Icon ionic-ios-search\"\n              d=\"M27.23,25.828l-6.4-6.455a9.116,9.116,0,1,0-1.384,1.4L25.8,27.188a.985.985,0,0,0,1.39.036A.99.99,0,0,0,27.23,25.828ZM13.67,20.852a7.2,7.2,0,1,1,5.091-2.108A7.155,7.155,0,0,1,13.67,20.852Z\"\n              transform=\"translate(-4.5 -4.493)\"\n              fill=\"#707070\"\n              opacity=\"0.74\"\n            />\n          </svg>\n          <input\n            value={search}\n            onChange={(e) => setSearch(e.target.value)}\n            placeholder=\"Search for Customer\"\n          />\n          {search && (\n            <button onClick={() => setSearch(\"\")}>\n              <X_svg />\n            </button>\n          )}\n        </section>\n        <section className=\"category\">\n          <label>Status:</label>\n          <Combobox\n            defaultValue={0}\n            options={[\n              { label: \"All\", value: \"\" },\n              { label: \"Pending\", value: \"pending\" },\n              { label: \"Approved\", value: \"approved\" },\n              { label: \"Product Sent\", value: \"productSent\" },\n              { label: \"Product Recieved\", value: \"productRecieved\" },\n              { label: \"Resolved\", value: \"resolved\" },\n            ]}\n            onChange={(e) => setStatus(e.value)}\n          />\n        </section>\n        <section className={`date`}>\n          <InputDateRange\n            dateRange={dateRange}\n            onChange={(range) => setDateRange(range)}\n          />\n        </section>\n      </div>\n      {batch.length > 0 && (\n        <div className=\"batchAction\">\n          <button onClick={() => console.log(\"batch delete\")}>Delete</button>\n        </div>\n      )}\n      <table className=\"table refunds\">\n        <thead>\n          <tr>\n            {\n              //   <th className=\"checkContainer\">\n              //   <Checkbox\n              //     value={selectAll}\n              //     defaultValue={selectAll}\n              //     onChange={(e) => setSelectAll(e)}\n              //   />\n              // </th>\n            }\n            <th className=\"date\">Date</th>\n            <th>Customer</th>\n            <th>QTY</th>\n            <th>Status</th>\n            <th>Total Price</th>\n            {\n              // <th>Actions</th>\n            }\n          </tr>\n        </thead>\n        <tbody>\n          {refunds.map((refund) => (\n            <SingleRefund\n              key={refund._id}\n              refund={refund}\n              setRefunds={setRefunds}\n              selectAll={selectAll}\n              setBatch={setBatch}\n              batch={batch}\n            />\n          ))}\n          {refunds.length === 0 && (\n            <tr className=\"placeholder\">\n              <td>No product yet.</td>\n            </tr>\n          )}\n        </tbody>\n      </table>\n      <Pagination\n        total={total}\n        btns={5}\n        currentPage={page}\n        perPage={perPage}\n        setPage={setPage}\n      />\n      <Modal className=\"msg\" open={msg}>\n        {msg}\n      </Modal>\n    </>\n  );\n};\nconst SingleRefund = ({ refund, setRefunds, selectAll, setBatch, batch }) => {\n  const history = useHistory();\n  const { user } = useContext(SiteContext);\n  const [selected, setSelected] = useState(selectAll || false);\n  const [edit, setEdit] = useState(false);\n  const [msg, setMsg] = useState(false);\n  useEffect(() => {\n    setSelected(selectAll);\n  }, [selectAll]);\n  useEffect(() => {\n    if (selected) {\n      setBatch((prev) => [...prev, refund._id]);\n    } else {\n      setBatch((prev) => prev.filter((item) => item !== refund._id));\n    }\n  }, [selected]);\n  return (\n    <>\n      <tr\n        className={`refund ${selected ? \"selected\" : \"\"}`}\n        onClick={() => history.push(`/account/myShop/refunds/${refund._id}`)}\n      >\n        {\n          //   <td className=\"checkContainer\">\n          //   <Checkbox\n          //     defaultValue={selected}\n          //     value={selected}\n          //     onChange={(e) => {\n          //       setSelected(e);\n          //     }}\n          //   />\n          // </td>\n        }\n        <td className=\"date\">\n          <Moment format=\"DD MMM YYYY, hh:mm a\">{refund.createdAt}</Moment>\n        </td>\n        <td>\n          <User user={refund.seller} />\n        </td>\n        <td>{refund.order?.products.reduce((a, c) => a + c.qty, 0)}</td>\n        <td>{refund.status}</td>\n        <td>{refund.order.total}</td>\n        {\n          //   <td>\n          //   {batch.length === 0 && (\n          //     <Actions icon={<Chev_down_svg />}>\n          //       <Link to=\"#\" className=\"edit\" onClick={() => setEdit(true)}>\n          //         Edit\n          //       </Link>\n          //       <Link\n          //         to=\"#\"\n          //         className=\"delete\"\n          //         onClick={() =>\n          //           Confirm({\n          //             label: \"Removing Product\",\n          //             question: \"You sure want to delete this product?\",\n          //             callback: removeProduct,\n          //           })\n          //         }\n          //       >\n          //         Delete\n          //       </Link>\n          //     </Actions>\n          //   )}\n          // </td>\n        }\n      </tr>\n      <Modal className=\"msg\" open={msg}>\n        {msg}\n      </Modal>\n    </>\n  );\n};\nexport const FullRefund = ({ history, match }) => {\n  const { userType } = useContext(SiteContext);\n  const [msg, setMsg] = useState(null);\n  const [refund, setRefund] = useState(null);\n  const [order, setOrder] = useState(null);\n  const [milestoneForm, setMilestoneForm] = useState(false);\n  const [refundTill, setRefundTill] = useState(false);\n  const milestoneTimeout = useRef();\n  // const updateOrder = async (newData) => {\n  //   return fetch(\"/api/updateRefund\", {\n  //     method: \"PATCH\",\n  //     headers: { \"Content-Type\": \"application/json\" },\n  //     body: JSON.stringify(newData),\n  //   })\n  //     .then((res) => res.json())\n  //     .then((data) => {\n  //       if (data.code === \"ok\") {\n  //         return data.order;\n  //       } else {\n  //         setMsg(\n  //           <>\n  //             <button onClick={() => setMsg(null)}>Okay</button>\n  //             <div>\n  //               <Err_svg />\n  //               <h4>Orders does not exist.</h4>\n  //             </div>\n  //           </>\n  //         );\n  //       }\n  //     })\n  //     .catch((err) => {\n  //       console.log(err);\n  //       setMsg(\n  //         <>\n  //           <button onClick={() => setMsg(null)}>Okay</button>\n  //           <div>\n  //             <Err_svg />\n  //             <h4>Could not update order. Make sure you're online.</h4>\n  //           </div>\n  //         </>\n  //       );\n  //     });\n  // };\n  const updateRefund = async (newData) => {\n    return fetch(\"/api/updateRefund\", {\n      method: \"PATCH\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ ...newData, _id: refund._id }),\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        if (data.code === \"ok\") {\n          return data.order;\n        } else {\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                <Err_svg />\n                <h4>Refund request does not exist.</h4>\n              </div>\n            </>\n          );\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        setMsg(\n          <>\n            <button onClick={() => setMsg(null)}>Okay</button>\n            <div>\n              <Err_svg />\n              <h4>Could not update refund. Make sure you're online.</h4>\n            </div>\n          </>\n        );\n      });\n  };\n  const acceptRefund = async () => {\n    fetch(\"/api/acceptRefund\", {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ _id: refund._id }),\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        if (data.code === \"ok\") {\n          setRefund((prev) => ({ ...prev, status: \"approved\" }));\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                <Succ_svg />\n                <h4>Refund request has been approved.</h4>\n              </div>\n            </>\n          );\n        } else {\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                <Err_svg />\n                <h4>Refund request does not exist.</h4>\n              </div>\n            </>\n          );\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        setMsg(\n          <>\n            <button onClick={() => setMsg(null)}>Okay</button>\n            <div>\n              <Err_svg />\n              <h4>Could not accept refund request. Make sure you're online.</h4>\n            </div>\n          </>\n        );\n      });\n  };\n  const declineRefund = async () => {\n    fetch(\"/api/declineRefund\", {\n      method: \"PATCH\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ _id: refund._id }),\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        if (data.code === \"ok\") {\n          setRefund((prev) => ({ ...prev, status: \"declined\" }));\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                <Succ_svg />\n                <h4>Refund request has been declined.</h4>\n              </div>\n            </>\n          );\n        } else {\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                <Err_svg />\n                <h4>Refund request does not exist.</h4>\n              </div>\n            </>\n          );\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        setMsg(\n          <>\n            <button onClick={() => setMsg(null)}>Okay</button>\n            <div>\n              <Err_svg />\n              <h4>\n                Could not decline refund request. Make sure you're online.\n              </h4>\n            </div>\n          </>\n        );\n      });\n  };\n  useEffect(() => {\n    fetch(`/api/singleRefund?_id=${match.params._id}`)\n      .then((res) => res.json())\n      .then((data) => {\n        if (data.code === \"ok\") {\n          setOrder(data.refund.order);\n          setRefund(data.refund);\n        } else {\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                <Err_svg />\n                <h4>Refund does not exist.</h4>\n              </div>\n            </>\n          );\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        setMsg(\n          <>\n            <button onClick={() => setMsg(null)}>Okay</button>\n            <div>\n              <Err_svg />\n              <h4>Could not get Refund. Make sure you're online.</h4>\n            </div>\n          </>\n        );\n      });\n  }, []);\n  useEffect(() => {\n    if (order?.refundable) {\n      let days = 0;\n      switch (order.refundable) {\n        case \"Upto 24 Hours After Delivery\":\n          days = 1;\n          break;\n        case \"Upto 7 Days After Delivery\":\n          days = 7;\n          break;\n        case \"Upto 15 Days After Delivery\":\n          days = 15;\n          break;\n        default:\n          return;\n      }\n      const refundTill = new Date(\n        new Date().getTime() + 1000 * 60 * 60 * 24 * days\n      );\n      if (new Date() < refundTill) {\n        setRefundTill(refundTill);\n      } else {\n        setRefundTill(null);\n      }\n    } else {\n      setRefundTill(null);\n    }\n  }, [refund]);\n  if (refund) {\n    return (\n      <>\n        <div className=\"actions\">\n          <Link\n            to={`/account/${\n              userType === \"seller\" ? \"myShop\" : \"myShopping\"\n            }/refunds`}\n            className=\"back\"\n          >\n            <Arrow_left_svg />\n            Back\n          </Link>\n          {refund.status === \"productSent\" && (\n            <button\n              onClick={() =>\n                Confirm({\n                  label: \"Refund Resolved\",\n                  question: \"You sure want to mark this refund resolved?\",\n                  callback: () => {\n                    updateRefund({ status: \"productRecieved\" }).then(\n                      (refund) => {\n                        setRefund((prev) => ({\n                          ...prev,\n                          status: \"productRecieved\",\n                        }));\n                      }\n                    );\n                  },\n                })\n              }\n            >\n              Mark as Recieved\n            </button>\n          )}\n          {refund.status === \"pending\" && (\n            <>\n              <button\n                onClick={() =>\n                  Confirm({\n                    label: \"Accepting Refund\",\n                    question: \"Do you accept this refund request?\",\n                    callback: acceptRefund,\n                  })\n                }\n              >\n                Accept\n              </button>\n              <button\n                onClick={() =>\n                  Confirm({\n                    label: \"Declining Refund\",\n                    question: \"Do you decline this refund?\",\n                    callback: declineRefund,\n                  })\n                }\n              >\n                Decline\n              </button>\n            </>\n          )}\n        </div>\n        <div className=\"singleOrder\">\n          <div className=\"summery\">\n            <h3>Summery</h3>\n            <ul>\n              <li className=\"devide\">\n                <label>Order</label>\n                <span />\n              </li>\n              <li>\n                <label>Seller</label>\n                <User user={order.seller} />\n              </li>\n              <li>\n                <label>Order ID</label>\n                {order._id}\n              </li>\n              <li>\n                <label>Status</label>\n                {order.status}\n              </li>\n              <li>\n                <label>Ordered at</label>\n                <Moment format=\"DD MMM YYYY, hh:mma\">{order.createdAt}</Moment>\n              </li>\n              <li>\n                <label>Delivered at</label>\n                <Moment format=\"DD MMM YYYY, hh:mm a\">\n                  {order.deliveredAt}\n                </Moment>\n              </li>\n              <li>\n                <label>Refundable</label>\n                {order.refundable || \"N/A\"}\n              </li>\n              <li>\n                <label>Proof of delivery</label>\n                {order.files?.length > 0 ? (\n                  <div className=\"thumbs\">\n                    <Media links={order.files} />\n                  </div>\n                ) : (\n                  <>No files added.</>\n                )}\n              </li>\n              {refundTill && (\n                <li>\n                  <label>Refund till</label>\n                  <Moment format=\"DD MMM YYYY, hh:mm a\">{refundTill}</Moment>\n                </li>\n              )}\n              <li></li>\n              <li className=\"devide\">\n                <label>Refund</label>\n                <span />\n              </li>\n              <li>\n                <label>Refund ID</label>\n                {refund._id}\n              </li>\n              <li>\n                <label>Status</label>\n                {refund.status}\n              </li>\n              <li>\n                <label>Submitted at</label>\n                <Moment format=\"DD MMM YYYY, hh:mma\">{refund.createdAt}</Moment>\n              </li>\n              <li>\n                <label>Issue</label>\n                {refund.issue}\n              </li>\n              <li>\n                <label>Descrption</label>\n                {refund.dscr}\n              </li>\n              <li>\n                <label>Images</label>\n                <div className=\"thumbs\">\n                  {refund.files.length ? (\n                    <Media links={refund.files} />\n                  ) : (\n                    <>No Images has been provided.</>\n                  )}\n                </div>\n              </li>\n              <li></li>\n              <li className=\"devide\">\n                <label>Delivery Address</label>\n                <span />\n              </li>\n              <>\n                {Object.entries(order.deliveryDetail).map(([key, value], i) =>\n                  key === \"deliveryTime\" ? (\n                    <li key={i}>\n                      <label>Delivery date</label>\n                      {order.deliveryDetail.deliveryTime ? (\n                        <Moment format=\"DD MMM, YYYY hh:mma\">\n                          {order.deliveryDetail.deliveryTime}\n                        </Moment>\n                      ) : (\n                        \"N/A\"\n                      )}\n                    </li>\n                  ) : (\n                    <li key={i}>\n                      <label>{key}</label>\n                      {value}\n                    </li>\n                  )\n                )}\n              </>\n            </ul>\n          </div>\n          <div className=\"products\">\n            <h3>Products</h3>\n            <ul>\n              {order.products.map(({ product, qty }, i) => (\n                <li key={i}>\n                  <Img src={product.images[0] || \"/open_box.png\"} />\n                  <div className=\"detail\">\n                    <p>{product.name}</p>\n                    <p className=\"qty\">QTY: {qty}</p>\n                  </div>\n                  <div className=\"price\">\n                    <span>\n                      {calculatePrice({ product, gst: true })} x {qty}\n                    </span>\n                    {calculatePrice({ product, gst: true }) * qty}\n                  </div>\n                </li>\n              ))}\n            </ul>\n            <div className=\"total\">\n              <div className=\"data\">\n                <label>Total</label>\n                {order.products.reduce(\n                  (a, c) =>\n                    a +\n                    calculatePrice({ product: c.product, gst: true }) * c.qty,\n                  0\n                )}\n              </div>\n              <div className=\"data\">\n                <label>Shipping</label>\n                {order.shipping || \"N/A\"}\n              </div>\n              <div className=\"data\">\n                <label>Grand Total</label>\n                {order.products.reduce(\n                  (a, c) =>\n                    a +\n                    calculatePrice({ product: c.product, gst: true }) * c.qty,\n                  0\n                ) + (+order.shipping || 0)}\n              </div>\n            </div>\n          </div>\n          <div className=\"milestones\">\n            <h3>\n              Milestones\n              {(refund.status === \"approved\" ||\n                refund.status === \"productSent\" ||\n                refund.status === \"productRecieved\") && (\n                <button onClick={() => setMilestoneForm(true)}>\n                  Create Milestone\n                </button>\n              )}\n            </h3>\n            {refund.status === \"pending\" && (\n              <p>\n                You can create milestones once you accept the refund request.\n              </p>\n            )}\n            {refund.status === \"declined\" && (\n              <p>This refund request has been declined.</p>\n            )}\n            {!(refund.status === \"declined\" || refund.status === \"pending\") && (\n              <table cellSpacing={0} cellPadding={0}>\n                <thead>\n                  <tr>\n                    <td>Date</td>\n                    <td>Descrption</td>\n                    <td>Amount</td>\n                    <td>Status</td>\n                  </tr>\n                </thead>\n                <tbody>\n                  {refund.milestones.map((milestone) => (\n                    <tr\n                      key={milestone._id}\n                      onClick={() =>\n                        history.push(`/account/hold?q=${milestone._id}`)\n                      }\n                    >\n                      <td>\n                        <Moment format=\"DD MMM YYYY, hh:mma\">\n                          {milestone.createdAt}\n                        </Moment>\n                      </td>\n                      <td>{milestone.dscr}</td>\n                      <td>{milestone.amount}</td>\n                      <td>{milestone.status}</td>\n                    </tr>\n                  ))}\n                  {refund.milestones.length === 0 && (\n                    <tr className=\"placeholdert\">\n                      <td>Nothing yet.</td>\n                    </tr>\n                  )}\n                </tbody>\n              </table>\n            )}\n          </div>\n          <section className=\"terms\">\n            <h3>Return Policy Terms</h3>\n            <ul>\n              {order.terms?.map((item, i) => (\n                <li key={i}>{item}</li>\n              ))}\n              {!order.terms?.length && (\n                <li>No terms has been set by the seller yet.</li>\n              )}\n            </ul>\n          </section>\n        </div>\n        <Modal\n          head={true}\n          label=\"Create Milestone\"\n          setOpen={setMilestoneForm}\n          className=\"milestoneRequest\"\n          open={milestoneForm}\n        >\n          <MilestoneForm\n            action=\"create\"\n            definedAmount={order.total}\n            client={refund.seller}\n            refund={refund._id}\n            onSuccess={(milestone) => {\n              setMilestoneForm(false);\n              setMsg(\n                <>\n                  <button onClick={() => setMsg(null)}>Okay</button>\n                  <div>\n                    <Succ_svg />\n                    <h4 className=\"amount\">{milestone?.amount}</h4>\n                    <h4>Milestone has been created</h4>\n                  </div>\n                  <Link to=\"/account/hold\" onClick={() => setMsg(null)}>\n                    Check your Delivery pay Hold\n                  </Link>\n                </>\n              );\n              setRefund((prev) => ({\n                ...prev,\n                milestones: [...prev.milestones, milestone],\n              }));\n            }}\n          />\n        </Modal>\n        <Modal className=\"msg\" open={msg}>\n          {msg}\n        </Modal>\n      </>\n    );\n  }\n  return <>Loading</>;\n};\n\nexport default Refunds;\n","import {\n  useState,\n  useEffect,\n  useRef,\n  useLayoutEffect,\n  useContext,\n  lazy,\n} from \"react\";\nimport {\n  Succ_svg,\n  Err_svg,\n  Plus_svg,\n  X_svg,\n  Combobox,\n  Pagination,\n  Checkbox,\n  calculateDiscount,\n  calculatePrice,\n  Actions,\n  Chev_down_svg,\n  User,\n  Arrow_left_svg,\n  NumberInput,\n  Media,\n  UploadFiles,\n  FileInput,\n  Img,\n  Moment,\n  moment,\n} from \"../Elements\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport { SiteContext } from \"../../SiteContext\";\nimport { Modal, Confirm } from \"../Modal\";\nimport TextareaAutosize from \"react-textarea-autosize\";\nimport { MilestoneForm } from \"../Account\";\nimport { toast } from \"react-toastify\";\n\nconst Coupons = ({ categories }) => {\n  const [total, setTotal] = useState(0);\n  const [page, setPage] = useState(1);\n  const [perPage, setPerPage] = useState(20);\n  const [status, setStatus] = useState(\"\");\n  const [search, setSearch] = useState(\"\");\n  const [sort, setSort] = useState({\n    column: \"createdAt\",\n    coupon: \"dsc\",\n  });\n  const [coupons, setCoupons] = useState([]);\n  const [selectAll, setSelectAll] = useState(false);\n  const [batch, setBatch] = useState([]);\n  const [msg, setMsg] = useState(null);\n  useEffect(() => {\n    fetch(\n      `/api/getCoupons?${new URLSearchParams({\n        ...(search && { q: search }),\n        page,\n        perPage,\n        sort: sort.column,\n        order: sort.order,\n        ...(status && { status }),\n      })}`\n    )\n      .then((res) => res.json())\n      .then((data) => {\n        if (data.code === \"ok\") {\n          setCoupons(data.coupons);\n          setTotal(data.total);\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        setMsg(\n          <>\n            <button onClick={() => setMsg(null)}>Okay</button>\n            <div>\n              <Err_svg />\n              <h4>Could not get coupons.</h4>\n            </div>\n          </>\n        );\n      });\n  }, [status, search, page, perPage]);\n  useEffect(() => {\n    if (selectAll) {\n    } else {\n      setBatch([]);\n    }\n  }, [selectAll]);\n  useEffect(() => {\n    if (batch.length === 0) {\n      setSelectAll(false);\n    }\n  }, [batch]);\n  return (\n    <>\n      <div className=\"benner\">\n        <p>Order Management</p>\n      </div>\n      <div className=\"filters\">\n        <section>\n          <label>Total:</label>\n          {total}\n        </section>\n        <section>\n          <label>Per Page:</label>\n          <Combobox\n            defaultValue={0}\n            options={[\n              { label: \"20\", value: 20 },\n              { label: \"30\", value: 30 },\n              { label: \"50\", value: 50 },\n            ]}\n            onChange={(e) => setPerPage(e.value)}\n          />\n        </section>\n        <section className=\"search\">\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            width=\"23\"\n            height=\"23\"\n            viewBox=\"0 0 23 23\"\n          >\n            <path\n              id=\"Icon_ionic-ios-search\"\n              data-name=\"Icon ionic-ios-search\"\n              d=\"M27.23,25.828l-6.4-6.455a9.116,9.116,0,1,0-1.384,1.4L25.8,27.188a.985.985,0,0,0,1.39.036A.99.99,0,0,0,27.23,25.828ZM13.67,20.852a7.2,7.2,0,1,1,5.091-2.108A7.155,7.155,0,0,1,13.67,20.852Z\"\n              transform=\"translate(-4.5 -4.493)\"\n              fill=\"#707070\"\n              opacity=\"0.74\"\n            />\n          </svg>\n          <input\n            value={search}\n            onChange={(e) => setSearch(e.target.value)}\n            placeholder=\"Search for Buyer\"\n          />\n          {search && (\n            <button onClick={() => setSearch(\"\")}>\n              <X_svg />\n            </button>\n          )}\n        </section>\n        <section className=\"category\">\n          <label>Status:</label>\n          <Combobox\n            defaultValue={0}\n            options={[\n              { label: \"All\", value: \"\" },\n              { label: \"Pending\", value: \"draft\" },\n              { label: \"Active\", value: \"active\" },\n              { label: \"Inactive\", value: \"inactive\" },\n            ]}\n            onChange={(e) => setStatus(e.value)}\n          />\n        </section>\n      </div>\n      {batch.length > 0 && (\n        <div className=\"batchAction\">\n          <button onClick={() => console.log(\"batch delete\")}>Delete</button>\n        </div>\n      )}\n      <table className=\"table coupons\">\n        <thead>\n          <tr>\n            {\n              //   <th className=\"checkContainer\">\n              //   <Checkbox\n              //     value={selectAll}\n              //     defaultValue={selectAll}\n              //     onChange={(e) => setSelectAll(e)}\n              //   />\n              // </th>\n            }\n            <th className=\"date\">Date</th>\n            <th>Title</th>\n            <th>Status</th>\n            <th>Code</th>\n            <th>Discount</th>\n            <th>Threshold</th>\n            <th>Validity</th>\n            <th>Accept</th>\n            <th>Actions</th>\n          </tr>\n        </thead>\n        <tbody>\n          {coupons.map((coupon, i) => (\n            <SingleCoupon\n              key={i}\n              coupon={coupon}\n              setCoupons={setCoupons}\n              selectAll={selectAll}\n              setBatch={setBatch}\n              batch={batch}\n            />\n          ))}\n          {coupons.length === 0 && (\n            <tr className=\"placeholder\">\n              <td>No Campaign yet.</td>\n            </tr>\n          )}\n        </tbody>\n      </table>\n      <Pagination\n        total={total}\n        btns={5}\n        currentPage={page}\n        perPage={perPage}\n        setPage={setPage}\n      />\n      <Modal className=\"msg\" open={msg}>\n        {msg}\n      </Modal>\n    </>\n  );\n};\nconst SingleCoupon = ({ coupon, setCoupons, selectAll, setBatch, batch }) => {\n  const actionsRef = useRef();\n  const checkRef = useRef();\n  const history = useHistory();\n  const { user } = useContext(SiteContext);\n  const [selected, setSelected] = useState(selectAll || false);\n  const [edit, setEdit] = useState(false);\n  const [msg, setMsg] = useState(false);\n  const [couponDetail, setCouponDetail] = useState(false);\n  const declineCoupon = (_id) => {\n    fetch(\"/api/declineCoupon\", {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ _id }),\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        if (data.code === \"ok\") {\n          setCoupons((prev) =>\n            prev.map((item) => {\n              if (item._id === _id) {\n                return {\n                  ...item,\n                  accept: false,\n                };\n              }\n              return item;\n            })\n          );\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                <Succ_svg />\n                <h4>\n                  Coupon code declined. Buyers can no longer apply this coupon\n                  code on your shop.\n                </h4>\n              </div>\n            </>\n          );\n        } else {\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                <Err_svg />\n                <h4>Could not decline Coupon code. please try again.</h4>\n              </div>\n            </>\n          );\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        setMsg(\n          <>\n            <button onClick={() => setMsg(null)}>Okay</button>\n            <div>\n              <Err_svg />\n              <h4>Could not decline Coupon code. Make sure you're online.</h4>\n            </div>\n          </>\n        );\n      });\n  };\n  const acceptCoupon = (_id) => {\n    fetch(\"/api/acceptCoupon\", {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ _id }),\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        if (data.code === \"ok\") {\n          setCoupons((prev) =>\n            prev.map((item) => {\n              if (item._id === _id) {\n                return {\n                  ...item,\n                  accept: true,\n                };\n              }\n              return item;\n            })\n          );\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                <Succ_svg />\n                <h4>\n                  Coupon code accepted. Now Buyers can apply this coupon code on\n                  your shop.\n                </h4>\n              </div>\n            </>\n          );\n        } else {\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                <Err_svg />\n                <h4>Could not accept Coupon code. please try again.</h4>\n              </div>\n            </>\n          );\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        setMsg(\n          <>\n            <button onClick={() => setMsg(null)}>Okay</button>\n            <div>\n              <Err_svg />\n              <h4>Could not accept Coupon code. Make sure you're online.</h4>\n            </div>\n          </>\n        );\n      });\n  };\n  useEffect(() => {\n    setSelected(selectAll);\n  }, [selectAll]);\n  useEffect(() => {\n    if (selected) {\n      setBatch((prev) => [...prev, coupon._id]);\n    } else {\n      setBatch((prev) => prev.filter((item) => item !== coupon._id));\n    }\n  }, [selected]);\n  return (\n    <>\n      <tr\n        className={`coupon ${selected ? \"selected\" : \"\"}`}\n        onClick={(e) => {\n          if (\n            e.nativeEvent.path.includes(actionsRef.current) ||\n            e.nativeEvent.path.includes(checkRef.current) ||\n            batch.length > 0\n          ) {\n          } else {\n            setCouponDetail(coupon);\n          }\n        }}\n      >\n        {\n          //   <td className=\"checkContainer\" ref={checkRef}>\n          //   <Checkbox\n          //     defaultValue={selected}\n          //     value={selected}\n          //     onChange={(e) => {\n          //       setSelected(e);\n          //     }}\n          //   />\n          // </td>\n        }\n        <td className=\"date\">\n          <Moment format=\"DD MMM YY\">{coupon.createdAt}</Moment>\n        </td>\n        <td>{coupon.title}</td>\n        <td>{coupon.status}</td>\n        <td>{coupon.code}</td>\n        <td className=\"discount\">\n          {coupon.type === \"percent\" ? (\n            <>\n              {coupon.amount}%<span>Up to {coupon.maxDiscount}</span>\n            </>\n          ) : (\n            <>{coupon.amount}</>\n          )}\n        </td>\n        <td>{coupon.threshold}</td>\n        <td>\n          <Moment format=\"DD MMM YY\">{coupon.date?.from}</Moment>-\n          <Moment format=\"DD MMM YY\">{coupon.date?.to}</Moment>\n        </td>\n        <td>{coupon.accept ? \"Yes\" : \"No\"}</td>\n        <td ref={actionsRef}>\n          {batch.length === 0 && (\n            <Actions icon={<Chev_down_svg />}>\n              <button onClick={() => setCouponDetail(coupon)}>\n                View Detail\n              </button>\n              {coupon.accept && (\n                <button\n                  onClick={() =>\n                    Confirm({\n                      label: \"Accepting Coupon code\",\n                      question:\n                        \"You sure want to take part in this campaign and accept this coupon code?\",\n                      callback: () => declineCoupon(coupon._id),\n                    })\n                  }\n                >\n                  Decline\n                </button>\n              )}\n              {new Date(coupon.date?.to) >=\n                new Date(moment({ time: new Date(), format: \"YYYY-MM-DD\" })) &&\n                !coupon.accept && (\n                  <button\n                    onClick={() =>\n                      Confirm({\n                        label: \"Accepting Coupon code\",\n                        question:\n                          \"You sure want to take part in this campaign and accept this coupon code?\",\n                        callback: () => acceptCoupon(coupon._id),\n                      })\n                    }\n                  >\n                    Accept\n                  </button>\n                )}\n            </Actions>\n          )}\n        </td>\n      </tr>\n      <Modal className=\"msg\" open={msg}>\n        {msg}\n      </Modal>\n      <Modal\n        open={couponDetail}\n        head={true}\n        label=\"Coupon Detail\"\n        setOpen={setCouponDetail}\n        className=\"couponDetail\"\n      >\n        <div className=\"content\">\n          <section>\n            <label>Campaign Title</label>\n            <p>{couponDetail?.title}</p>\n          </section>\n          <section>\n            <label>Campaign Description</label>\n            <p>{couponDetail?.dscr}</p>\n          </section>\n          <section>\n            <label>Coupon Code</label>\n            <p>{couponDetail?.code}</p>\n          </section>\n          <section>\n            <label>Coupon code status</label>\n            <p>{couponDetail?.status}</p>\n          </section>\n          <section>\n            <label>Discount</label>\n            <p>\n              {couponDetail?.type === \"percent\" ? (\n                <>\n                  {couponDetail?.amount}% up to {couponDetail.maxDiscount}\n                </>\n              ) : (\n                <>{couponDetail?.amount}</>\n              )}\n            </p>\n          </section>\n          <section>\n            <label>Validity</label>\n            <p>\n              <Moment format=\"DD MMM YY\">{couponDetail.date?.from}</Moment>-\n              <Moment format=\"DD MMM YY\">{couponDetail.date?.to}</Moment>\n            </p>\n          </section>\n          <section>\n            <label>Accept</label>\n            <p>{couponDetail.accept ? \"Yes\" : \"No\"}</p>\n          </section>\n          {couponDetail.termsUrl && (\n            <section className=\"termsUrl\">\n              <label>Terms</label>\n              <Link to={couponDetail.termsUrl} target=\"_blank\">\n                Terms of the Campaign\n              </Link>\n            </section>\n          )}\n          {couponDetail.terms?.length ? (\n            <section>\n              <label>Terms</label>\n              <ul>\n                {couponDetail.terms.map((term, i) => (\n                  <li key={i}>{term}</li>\n                ))}\n              </ul>\n            </section>\n          ) : null}\n        </div>\n      </Modal>\n    </>\n  );\n};\n\nexport default Coupons;\n","import { useEffect, useState, useContext } from \"react\";\nimport { SiteContext } from \"../../SiteContext\";\nimport { updateProfileInfo } from \"../Profile\";\nimport { Modal } from \"../Modal\";\nimport { Link } from \"react-router-dom\";\nimport {\n  Chev_down_svg,\n  Checkbox,\n  Combobox,\n  Step_fill,\n  Img,\n  LS,\n  Succ_svg,\n  External_link_icon,\n  Moment,\n} from \"../Elements\";\nrequire(\"../styles/fbMarketplace.scss\");\n\nexport const Step = ({\n  label,\n  defaultStatus,\n  children,\n  disabled,\n  className,\n  data,\n  step,\n}) => {\n  const [open, setOpen] = useState(data ? !data : null);\n  useEffect(() => {\n    setOpen(defaultStatus);\n  }, [defaultStatus]);\n  return (\n    <div\n      className={`step ${open || defaultStatus ? \"open\" : \"\"} ${\n        disabled ? \"disabled\" : \"\"\n      } ${className || \"\"}`}\n    >\n      <div\n        className=\"head\"\n        onClick={() => {\n          if (!defaultStatus) {\n            setOpen(!open);\n          }\n        }}\n      >\n        <Chev_down_svg className=\"chev\" /> {label}\n        <div className=\"status\">{data && <Step_fill />}</div>\n      </div>\n      {(open || defaultStatus) && <div className=\"body\">{children}</div>}\n    </div>\n  );\n};\n\nconst Marketplace = () => {\n  const [msg, setMsg] = useState(null);\n  const { user, setUser } = useContext(SiteContext);\n  const { FB } = window;\n  const [step, setStep] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  useEffect(() => {\n    console.log(user.fbMarket);\n    if (!user.fbMarket?.user?.id) {\n      setStep(\"account\");\n    } else if (!user.fbMarket?.businessManager?.id) {\n      setStep(\"businessManager\");\n    } else if (!user.fbMarket?.facebookPage?.id) {\n      setStep(\"fbPage\");\n    } else if (user.fbMarket?.instagramAccount === undefined) {\n      setStep(\"instagramAccount\");\n    }\n    // else if (!user.fbMarket?.dataSharing) {\n    // setStep(\"dataSharing\");\n    // }\n    else if (!user.fbMarket?.commerceAccount?.catalog?.id) {\n      setStep(\"commerceAccount\");\n    } else if (!user.fbMarket?.userAgreement) {\n      setStep(\"terms\");\n    }\n  }, [user]);\n  return (\n    <div className={`fbMarket ${loading ? \"loading\" : \"\"}`}>\n      <h1>Facebook marketplace</h1>\n      <div className=\"setup\">\n        <Step\n          data={user.fbMarket?.user?.id ? user.fbMarket.user : null}\n          defaultStatus={step === \"account\"}\n          step={step}\n          label=\"Facebook Account\"\n        >\n          <p className=\"note\">\n            Delivery Pay uses your personal Facebook account to access your\n            business accounts.\n          </p>\n          {\n            //   user.fbMarket?.user?.id && (\n            //   <p>Now you can log into Delivery Pay using this account.</p>\n            // )\n          }\n          <div className=\"profile\">\n            <div className=\"user\">\n              {user.fbMarket?.user?.id ? (\n                <>\n                  <Img\n                    key=\"img\"\n                    src={user.fbMarket.user.profileImg || \"/profile-user.jpg\"}\n                  />\n                  <p>{user.fbMarket.user.name}</p>\n                </>\n              ) : (\n                <>\n                  <Img key=\"placeholder\" src=\"/profile-user.jpg\" />\n                  <p>Connect your Facebook account to get started</p>\n                </>\n              )}\n            </div>\n            {user.fbMarket?.user?.id ? (\n              <button\n                className=\"btn\"\n                onClick={() => {\n                  setLoading(true);\n                  FB.logout((res) => {\n                    console.log(res);\n                  });\n                  LS.remove(\"facebook_user_accessToken\");\n                  LS.remove(\"facebook_page_accessToken\");\n                  updateProfileInfo({\n                    \"fbMarket.user\": {},\n                    \"fbMarket.businessManager\": {},\n                    \"fbMarket.facebookPage\": {},\n                    \"fbMarket.dataSharing\": null,\n                    \"fbMarket.instagramAccount\": {},\n                    \"fbMarket.commerceAccount\": {},\n                    \"fbMarket.userAgreement\": false,\n                  }).then(({ user: newUser }) => {\n                    if (newUser) {\n                      setUser((prev) => ({\n                        ...prev,\n                        fbMarket: newUser.fbMarket,\n                      }));\n                    }\n                  });\n                  setLoading(false);\n                }}\n              >\n                Disconnect\n              </button>\n            ) : (\n              <button\n                className=\"btn\"\n                onClick={() => {\n                  setLoading(true);\n                  FB.login(\n                    (res) => {\n                      if (res.authResponse?.accessToken) {\n                        const accessToken = res.authResponse.accessToken;\n                        fetch(\"/api/addFbMarketUser\", {\n                          method: \"POST\",\n                          headers: { \"Content-Type\": \"application/json\" },\n                          body: JSON.stringify({ accessToken }),\n                        })\n                          .then((res) => res.json())\n                          .then((data) => {\n                            setLoading(false);\n                            if (data.code === \"ok\") {\n                              setUser((prev) => ({\n                                ...prev,\n                                fbMarket: data.fbMarket,\n                              }));\n                            }\n                          });\n                      }\n                    },\n                    {\n                      scope:\n                        \"business_management,catalog_management,pages_read_engagement,pages_manage_posts,pages_show_list,instagram_basic,instagram_content_publish,publish_to_groups\",\n                      return_scopes: true,\n                    }\n                  );\n                }}\n              >\n                Connect Account\n              </button>\n            )}\n          </div>\n        </Step>\n        <Step\n          disabled={!user.fbMarket?.user?.id}\n          data={\n            user.fbMarket?.businessManager?.id\n              ? user.fbMarket.businessManager\n              : null\n          }\n          defaultStatus={step === \"businessManager\"}\n          label=\"Business Manager\"\n          className=\"businessManager\"\n        >\n          <BusinessManager setLoading={setLoading} />\n        </Step>\n        <Step\n          data={\n            user.fbMarket?.facebookPage?.id ? user.fbMarket.facebookPage : null\n          }\n          defaultStatus={step === \"fbPage\"}\n          label=\"Facebook Page\"\n          className=\"page\"\n          disabled={!user.fbMarket?.businessManager?.id}\n        >\n          <FbPage setLoading={setLoading} />\n        </Step>\n        <Step\n          data={\n            user.fbMarket?.instagramAccount?.id\n              ? user.fbMarket.instagramAccount\n              : null\n          }\n          disabled={!user.fbMarket?.facebookPage?.id}\n          label=\"Instagram Account\"\n          defaultStatus={step === \"instagramAccount\"}\n          className=\"instagramAccount\"\n        >\n          <InstagramAccount setStep={setStep} setLoading={setLoading} />\n        </Step>\n        <Step\n          data={\n            user.fbMarket?.commerceAccount?.catalog?.id\n              ? user.fbMarket.commerceAccount\n              : null\n          }\n          disabled={!user.fbMarket?.facebookPage?.id}\n          label=\"Facebook Commerce Account\"\n          defaultStatus={step === \"commerceAccount\"}\n          className=\"commerceAccount\"\n        >\n          <CommerceAccount setStep={setStep} setLoading={setLoading} />\n        </Step>\n        <Step\n          disabled={!user.fbMarket?.commerceAccount?.catalog?.id}\n          data={user.fbMarket?.userAgreement || null}\n          defaultStatus={step === \"terms\"}\n          label=\"Terms and Conditions\"\n        >\n          <p>\n            By proceeding, you accept{\" \"}\n            <a\n              target=\"_blank\"\n              href=\"https://www.facebook.com/legal/commerce_product_merchant_agreement\"\n            >\n              Facebook Commerce Terms <External_link_icon />\n            </a>\n            .\n          </p>\n          {!user.fbMarket?.userAgreement && (\n            <button\n              className=\"btn\"\n              onClick={() => {\n                updateProfileInfo({\n                  \"fbMarket.userAgreement\": true,\n                }).then(({ user: newUser }) => {\n                  setUser((prev) => ({ ...prev, fbMarket: newUser.fbMarket }));\n                  setStep(\"\");\n                  setMsg(\n                    <>\n                      <button onClick={() => setMsg(null)}>Okay</button>\n                      <div>\n                        <Succ_svg />\n                        <h4>\n                          Facebook marketplace has been setup successfully. Now\n                          you can add products to facebook marketplace directly\n                          from Delivery Pay.\n                        </h4>\n                        <Link to=\"/account/myShop/products\">\n                          Add your first product\n                        </Link>\n                      </div>\n                    </>\n                  );\n                });\n              }}\n            >\n              Finish setup\n            </button>\n          )}\n        </Step>\n      </div>\n      <Modal open={msg} className=\"msg\">\n        {msg}\n      </Modal>\n    </div>\n  );\n};\n\nconst BusinessManager = ({ setLoading }) => {\n  const { user, setUser } = useContext(SiteContext);\n  const { FB } = window;\n  const [businessManagers, setBusinessManagers] = useState([]);\n  const [err, setErr] = useState(null);\n  useEffect(() => {\n    if (!user.fbMarket?.business?.id) {\n      FB.api(\n        \"/me\",\n        \"GET\",\n        {\n          fields: \"businesses{picture{url},name,id,created_time}\",\n          access_token: user.fbMarket.user.access_token,\n        },\n        function (res) {\n          if (res.businesses) {\n            setBusinessManagers(res.businesses.data);\n          }\n        }\n      );\n    }\n  }, [user]);\n  return (\n    <>\n      {user.fbMarket?.businessManager?.id ? (\n        <>\n          <p className=\"note\">\n            The Business Manager that owns all your Facebook business accounts.\n          </p>\n          <ul>\n            <li>\n              <div className=\"profile\">\n                <Img src={user.fbMarket.businessManager.profileImg} />\n                <div className=\"detail\">\n                  <a\n                    href={`https://business.facebook.com/latest/home?nav_ref=bm_home_redirect&business_id=${user.fbMarket.businessManager.id}`}\n                  >\n                    {user.fbMarket.businessManager.name} <External_link_icon />\n                  </a>\n                  <span>ID: {user.fbMarket.businessManager.id}</span>\n                  <span>\n                    Created at:{\" \"}\n                    <Moment format=\"DD MMM YYYY, hh:mm a\">\n                      {user.fbMarket.businessManager.created_time}\n                    </Moment>\n                  </span>\n                </div>\n              </div>\n              <button\n                onClick={() => {\n                  setLoading(true);\n                  updateProfileInfo({\n                    \"fbMarket.businessManager\": {},\n                    \"fbMarket.facebookPage\": {},\n                    \"fbMarket.commerceAccount\": {},\n                    \"fbMarket.userAgreement\": false,\n                  }).then(({ user: newUser }) => {\n                    setLoading(false);\n                    if (newUser) {\n                      setUser((prev) => ({\n                        ...prev,\n                        fbMarket: newUser.fbMarket,\n                      }));\n                    }\n                  });\n                }}\n                className=\"btn\"\n              >\n                Disconnect\n              </button>\n            </li>\n          </ul>\n        </>\n      ) : (\n        <>\n          <p className=\"note\">\n            Connect the Business Manager you use to manage your business Page,\n            accounts, and product catalog. You can only connect a Business\n            Manager you have admin access to.\n          </p>\n          <p className=\"note\">\n            After you connect, you may receive a verification email from\n            Facebook. If so, youll need to confirm your business email address\n            before proceeding.\n          </p>\n          {err && <div className=\"err\">{err}</div>}\n          <ul>\n            {businessManagers.map((item, i) => (\n              <li key={i}>\n                <div className=\"profile\">\n                  <Img src={item.picture.data.url} />\n                  <div className=\"detail\">\n                    <a\n                      href={`https://business.facebook.com/latest/home?nav_ref=bm_home_redirect&business_id=${item.business_id}&asset_id=${item.asset_id}`}\n                    >\n                      {item.name} <External_link_icon />\n                    </a>\n                    <span>ID: {item.id}</span>\n                    <span>\n                      Created at:{\" \"}\n                      <Moment format=\"DD MMM YYYY, hh:mm a\">\n                        {item.created_time}\n                      </Moment>\n                    </span>\n                  </div>\n                </div>\n                <button\n                  className=\"btn\"\n                  onClick={() => {\n                    setLoading(true);\n                    updateProfileInfo({\n                      \"fbMarket.businessManager.id\": item.id,\n                      \"fbMarket.businessManager.name\": item.name,\n                      \"fbMarket.businessManager.createdAt\": item.created_time,\n                      \"fbMarket.businessManager.profileImg\":\n                        item.picture.data.url,\n                    }).then(({ user: newUser }) => {\n                      setLoading(false);\n                      setUser((prev) => ({\n                        ...prev,\n                        fbMarket: newUser.fbMarket,\n                      }));\n                    });\n                  }}\n                >\n                  Connect\n                </button>\n              </li>\n            ))}\n            <li>\n              <div className=\"profile\">\n                <Img src=\"/profile-user.jpg\" />\n                <p>Create Business Manager</p>\n              </div>\n              <button\n                className=\"btn\"\n                onClick={() => {\n                  setLoading(true);\n                  FB.api(\n                    `/${user.fbMarket?.user?.id}/businesses`,\n                    \"POST\",\n                    {\n                      name: \"Delivery Pay Business Manager\",\n                      vertical: \"ECOMMERCE\",\n                    },\n                    function (res) {\n                      setLoading(false);\n                      console.log(res);\n                      if (res.id) {\n                        FB.api(\n                          \"/me\",\n                          \"GET\",\n                          {\n                            fields:\n                              \"businesses{picture{url},name,id,created_time}\",\n                          },\n                          function (res) {\n                            if (res.businesses) {\n                              setBusinessManagers(res.businesses.data);\n                            }\n                          }\n                        );\n                      }\n                      if (res.error) {\n                        if (res.error.code === 1) {\n                          setErr(\n                            <>\n                              You have reached maximum number of business\n                              manager one user can have. Use one of existing\n                              business manager instead of creating a new one.\n                            </>\n                          );\n                        } else if (res.error.code === 3947) {\n                          setErr(\n                            <>\n                              You already have a Business Manager with the same\n                              name. Select \"Delivery Pay Business Manager\"\n                              instead of creating a new one. or Choose another.\n                            </>\n                          );\n                        } else {\n                          setErr(\n                            <>{res.error.error_user_msg || res.error.message}</>\n                          );\n                        }\n                      }\n                    }\n                  );\n                }}\n              >\n                Create new\n              </button>\n            </li>\n          </ul>\n        </>\n      )}\n    </>\n  );\n};\nconst FbPage = ({ setLoading }) => {\n  const { FB } = window;\n  const { user, setUser } = useContext(SiteContext);\n  const [fbPages, setFbPages] = useState([]);\n  const [createNew, setCreateNew] = useState(false);\n  useEffect(() => {\n    if (!user.fbMarket?.business?.id) {\n      FB.api(\n        \"/me/accounts\",\n        \"GET\",\n        {\n          fields: \"picture{url},access_token,name,category,business\",\n          access_token: user.fbMarket.user.access_token,\n        },\n        function (res) {\n          console.log(\"facebook pages:\", res);\n          if (res.data) {\n            setFbPages(res.data);\n          }\n        }\n      );\n    }\n  }, [user]);\n  return (\n    <>\n      {user.fbMarket?.facebookPage?.id ? (\n        <>\n          <p className=\"note\">\n            The Facebook business Page that you use to sell your products or\n            post ads.\n          </p>\n          <ul>\n            <li>\n              <div className=\"profile\">\n                <Img src={user.fbMarket.facebookPage.profileImg} />\n                <div className=\"detail\">\n                  <a\n                    href={`https://business.facebook.com/latest/home?nav_ref=bm_home_redirect&business_id=${user.fbMarket.businessManager.id}`}\n                  >\n                    {user.fbMarket.facebookPage.name} <External_link_icon />\n                  </a>\n                  <span>Category: {user.fbMarket.facebookPage.category}</span>\n                </div>\n              </div>\n              <button\n                onClick={() => {\n                  setLoading(true);\n                  updateProfileInfo({\n                    fbMarket: {\n                      user: user.fbMarket.user,\n                      businessManager: user.fbMarket.businessManager,\n                    },\n                  }).then(({ user: newUser }) => {\n                    setLoading(false);\n                    if (newUser) {\n                      setUser((prev) => ({\n                        ...prev,\n                        fbMarket: newUser.fbMarket,\n                      }));\n                    }\n                  });\n                }}\n                className=\"btn\"\n              >\n                Disconnect\n              </button>\n            </li>\n          </ul>\n        </>\n      ) : (\n        <>\n          <p className=\"note\">\n            Connect the business Page you use to sell products or post ads. You\n            can only connect a Page you have admin access to.\n          </p>\n          <ul>\n            {fbPages.map((item, i) => (\n              <li key={i}>\n                <div className=\"profile\">\n                  <Img src={item.picture.data.url} />\n                  <div className=\"detail\">\n                    <a\n                      href={`https://business.facebook.com/latest/home?nav_ref=bm_home_redirect&business_id=${item.business_id}&asset_id=${item.asset_id}`}\n                    >\n                      {item.name} <External_link_icon />\n                    </a>\n                    <span>{item.category}</span>\n                  </div>\n                </div>\n                <button\n                  className=\"btn\"\n                  onClick={() => {\n                    setLoading(true);\n                    updateProfileInfo({\n                      \"fbMarket.facebookPage.id\": item.id,\n                      \"fbMarket.facebookPage.name\": item.name,\n                      \"fbMarket.facebookPage.access_token\": item.access_token,\n                      \"fbMarket.facebookPage.profileImg\": item.picture.data.url,\n                      \"fbMarket.facebookPage.category\": item.category,\n                    }).then(({ user: newUser }) => {\n                      setLoading(false);\n                      if (newUser) {\n                        setUser((prev) => ({\n                          ...prev,\n                          fbMarket: newUser.fbMarket,\n                        }));\n                      }\n                    });\n                  }}\n                >\n                  Connect\n                </button>\n              </li>\n            ))}\n            <li>\n              <div className=\"profile\">\n                <Img src=\"/profile-user.jpg\" />\n                <p>Create Page</p>\n              </div>\n              <button className=\"btn\" onClick={() => setCreateNew(true)}>\n                Create new\n              </button>\n            </li>\n          </ul>\n        </>\n      )}\n      <Modal\n        head={true}\n        label=\"Create a new Facebook business Page\"\n        open={createNew}\n        setOpen={() => {\n          setCreateNew(false);\n          FB.api(\n            \"/me/accounts\",\n            \"GET\",\n            {\n              fields: \"picture{url},access_token,name,category,business\",\n              access_token: user.fbMarket.user.access_token,\n            },\n            function (res) {\n              console.log(\"facebook pages:\", res);\n              if (res.data) {\n                setFbPages(res.data);\n              }\n            }\n          );\n        }}\n        className=\"createNewPage\"\n      >\n        <div className=\"content\">\n          <p>\n            You'll be redirected to Facebook where you can create a new business\n            Page. All you need for now are basic details such as:\n          </p>\n          <ul>\n            <li>Business Page name</li>\n            <li>Business Page category</li>\n            <li>Profile Photo</li>\n            <li>Cover photo</li>\n            <li>Store description</li>\n          </ul>\n          <p>\n            As soon as you add these details, return to Delivery Pay and finish\n            setup. You can always update your Page later.\n          </p>\n          <a\n            target=\"_blank\"\n            href=\"https://www.facebook.com/pages/create/?ref_type=hc\"\n          >\n            <External_link_icon /> Go to Facebook\n          </a>\n        </div>\n      </Modal>\n    </>\n  );\n};\nconst InstagramAccount = ({ setStep, setLoading }) => {\n  const { FB } = window;\n  const { user, setUser } = useContext(SiteContext);\n  const [insta, setInsta] = useState(null);\n  useEffect(() => {\n    if (!user.fbMarket?.instagramAccount) {\n      FB.api(\n        `/${user.fbMarket.facebookPage?.id}`,\n        \"GET\",\n        {\n          fields: \"instagram_business_account\",\n          access_token: user.fbMarket?.user.access_token,\n        },\n        (res) => {\n          console.log(\"ig:\", res.instagram_business_account);\n          if (res.instagram_business_account) {\n            FB.api(\n              `/${res.instagram_business_account.id}`,\n              \"GET\",\n              {\n                fields: \"username,profile_picture_url\",\n                access_token: user.fbMarket?.user.access_token,\n              },\n              function (res) {\n                if (res.id) {\n                  setInsta(res);\n                  updateProfileInfo({\n                    \"fbMarket.instagramAccount\": insta,\n                  }).then(({ user: newUser }) => {\n                    setUser((prev) => ({\n                      ...prev,\n                      fbMarket: newUser.fbMarket,\n                    }));\n                  });\n                }\n              }\n            );\n          }\n        }\n      );\n    } else if (\n      user.fbMarket.instagramAccount &&\n      !user.fbMarket.instagramAccount.id\n    ) {\n      updateProfileInfo({\n        \"fbMarket.instagramAccount\": null,\n      }).then(({ user: newUser }) =>\n        setUser((prev) => ({ ...prev, fbMarket: newUser.fbMarket }))\n      );\n    }\n  }, [user]);\n  return (\n    <>\n      {user.fbMarket?.instagramAccount?.id ? (\n        <>\n          <p className=\"note\">\n            Post on Instagram directly from the product dashboard.\n          </p>\n          <ul>\n            <li>\n              <div className=\"profile\">\n                <Img\n                  src={user.fbMarket.instagramAccount?.profile_picture_url}\n                />\n                <div className=\"detail\">\n                  {user.fbMarket.instagramAccount.username}\n                </div>\n              </div>\n            </li>\n          </ul>\n        </>\n      ) : (\n        <>\n          <p className=\"note\">\n            Connect Instagram account to post about your product directly from\n            Delivery Pay product dashboard.\n          </p>\n          {insta && (\n            <ul>\n              <li>\n                <div className=\"profile\">\n                  <Img src={insta.profile_picture_url} />\n                  <div className=\"detail\">{insta.username}</div>\n                </div>\n              </li>\n            </ul>\n          )}\n          {!insta && (\n            <>\n              <div className=\"err\">\n                <p>\n                  The connected Business Manager doesnt own any Instagram\n                  accounts connected to the Facebook Page. Add your Instagram\n                  account to the connected Business Manager and Facebook Page or\n                  learn more about{\" \"}\n                  <a\n                    href=\"https://help.instagram.com/502981923235522\"\n                    target=\"_blank\"\n                  >\n                    how to create a new business account on Instagram\n                  </a>{\" \"}\n                  <External_link_icon />\n                </p>\n              </div>\n              <p>\n                If you cant find an Instagram account, learn more about how to{\" \"}\n                <a\n                  href=\"https://help.instagram.com/502981923235522\"\n                  target=\"_blank\"\n                >\n                  create a new account <External_link_icon />\n                </a>{\" \"}\n                or how to{\" \"}\n                <a\n                  href=\"https://www.facebook.com/business/help/1125825714110549?id=420299598837059\"\n                  target=\"_blank\"\n                >\n                  add an account to your Business Manager <External_link_icon />\n                </a>\n                .\n              </p>\n            </>\n          )}\n          <div className=\"btns\">\n            <button\n              className=\"btn_clear\"\n              onClick={() => {\n                setStep(\"commerceAccount\");\n                updateProfileInfo({\n                  \"fbMarket.instagramAccount\": null,\n                }).then(({ user: newUser }) => {\n                  setUser((prev) => ({\n                    ...prev,\n                    fbMarket: newUser.fbMarket,\n                  }));\n                });\n              }}\n            >\n              Skip\n            </button>\n          </div>\n        </>\n      )}\n    </>\n  );\n};\nconst CommerceAccount = ({ setStep, setLoading }) => {\n  const { FB } = window;\n  const { user, setUser } = useContext(SiteContext);\n  const [commerceAccounts, setCommerceAccounts] = useState([]);\n  const [catalogs, setCatalogs] = useState([]);\n  const [catalog, setCatalog] = useState(\n    user.fbMarket?.commerceAccount?.catalog\n  );\n  const [err, setErr] = useState(null);\n  useEffect(() => {\n    setCatalog(user.fbMarket?.commerceAccount?.catalog);\n    if (!user.fbMarket?.commerceAccount?.catalog?.id) {\n      FB.api(\n        `/${user.fbMarket?.businessManager?.id}/owned_product_catalogs`,\n        \"GET\",\n        { fields: \"name\", access_token: user.fbMarket?.user?.access_token },\n        function (res) {\n          if (res.error) {\n            console.log(res.error);\n            setErr(res.error.message);\n            return;\n          }\n          setCatalogs(res.data);\n        }\n      );\n    }\n  }, [user]);\n  return (\n    <>\n      <p className=\"note\">\n        Create a Commerce account to start selling on Facebook, Instagram, or\n        both. Once you have an account youll be able to customize your Shop and\n        collections in the{\" \"}\n        <a\n          target=\"_blank\"\n          href=\"https://www.facebook.com/business/help/2371372636254534\"\n        >\n          Facebook Commerce Manager <External_link_icon />\n        </a>\n        .\n      </p>\n      {err && <div className=\"err\">{err}</div>}\n      <ul>\n        {!user.fbMarket?.commerceAccount?.catalog?.id &&\n          catalogs.map((item, i) => (\n            <li key={i}>\n              <div className=\"profile\">\n                <div className=\"detail\">\n                  <p>{item.name}</p>\n                  <span>ID: {item.id}</span>\n                </div>\n              </div>\n              <button\n                className=\"btn\"\n                onClick={() => {\n                  setLoading(true);\n                  updateProfileInfo({\n                    \"fbMarket.commerceAccount.catalog\": item,\n                  }).then(({ user: newUser }) => {\n                    setLoading(false);\n                    if (newUser) {\n                      setUser((prev) => ({\n                        ...prev,\n                        fbMarket: newUser.fbMarket,\n                      }));\n                    }\n                  });\n                }}\n              >\n                Connect\n              </button>\n            </li>\n          ))}\n        {catalog && (\n          <li className=\"catalog\">\n            <p>PRODUCTS WILL BE SYNCED TO THIS CATALOG</p>\n            <p>{catalog.name}</p>\n            <span>ID: {catalog.id}</span>\n            <button\n              className=\"btn\"\n              onClick={() => {\n                setLoading(true);\n                updateProfileInfo({\n                  \"fbMarket.commerceAccount.catalog\": null,\n                }).then(({ user: newUser }) => {\n                  setLoading(false);\n                  if (newUser) {\n                    setUser((prev) => ({\n                      ...prev,\n                      fbMarket: newUser.fbMarket,\n                    }));\n                  }\n                });\n              }}\n            >\n              Disconnect\n            </button>\n          </li>\n        )}\n        {!catalog && (\n          <li>\n            <div className=\"profile\">\n              <Img src=\"/profile-user.jpg\" />\n              <p>Create a new Commerce Account</p>\n            </div>\n            <button\n              className=\"btn\"\n              onClick={() => {\n                setLoading(true);\n                FB.api(\n                  `/${user.fbMarket.businessManager.id}/owned_product_catalogs`,\n                  \"GET\",\n                  {\n                    access_token: user.fbMarket.user.access_token,\n                  },\n                  async function ({ data, error }) {\n                    console.log(data, error);\n                    if (error) {\n                      setLoading(false);\n                      setErr(error.message);\n                    }\n                    const delCatalog =\n                      data?.find(\n                        (item) => item.name === \"Delivery Pay Product Catalog\"\n                      ) ||\n                      (await FB.api(\n                        `/${user.fbMarket.businessManager.id}/owned_product_catalogs`,\n                        \"POST\",\n                        {\n                          name: \"Delivery Pay Product Catalog\",\n                          access_token: user.fbMarket.user.access_token,\n                        },\n                        function (res) {\n                          setLoading(false);\n                          console.log(res.id);\n                          if (res.id) {\n                            return {\n                              ...res,\n                              name: \"Delivery Pay Product Catalog\",\n                            };\n                          } else {\n                            return null;\n                          }\n                          if (res.error) {\n                            console.log(res.error);\n                          }\n                        }\n                      ));\n                    if (delCatalog) {\n                      setCatalog(delCatalog);\n                      setLoading(true);\n                      updateProfileInfo({\n                        \"fbMarket.commerceAccount.catalog\": delCatalog,\n                      }).then(({ user: newUser }) => {\n                        setLoading(false);\n                        setUser((prev) => ({\n                          ...prev,\n                          fbMarket: newUser.fbMarket,\n                        }));\n                        setStep(\"terms\");\n                      });\n                    }\n                  }\n                );\n              }}\n            >\n              Create new\n            </button>\n          </li>\n        )}\n      </ul>\n    </>\n  );\n};\n\nexport default Marketplace;\n","import {\n  useEffect,\n  useState,\n  useContext,\n  useRef,\n  useLayoutEffect,\n  lazy,\n} from \"react\";\nimport { SiteContext } from \"../../SiteContext\";\nimport {\n  Err_svg,\n  Plus_svg,\n  X_svg,\n  Succ_svg,\n  FileInput,\n  NumberInput,\n  UploadFiles,\n  Combobox,\n  Tabs,\n  Checkbox,\n  Chev_down_svg,\n  Actions,\n  Pagination,\n  calculateDiscount,\n  calculatePrice,\n  Tip,\n  Media,\n  LS,\n  Moment,\n  moment,\n  InputDateRange,\n  Img,\n} from \"../Elements\";\nimport { Modal, Confirm } from \"../Modal\";\nimport { Link, Route, Switch, Redirect } from \"react-router-dom\";\nimport TextareaAutosize from \"react-textarea-autosize\";\nimport OrderManagement, { FullOrder } from \"./OrderManagement\";\nimport RefundManagement, { FullRefund } from \"./RefundManagement\";\nimport Campaigns from \"./CampaignManagement\";\nimport FBMarket from \"./fbMarketplace\";\nimport { updateProfileInfo } from \"../Profile\";\nimport { FacebookShareButton } from \"react-share\";\nimport { Step } from \"./fbMarketplace\";\nimport { CSVLink } from \"react-csv\";\n\nconst ShopSetup = lazy(() => import(\"./ShopSetup.js\"));\n\nrequire(\"../styles/products.scss\");\n\nconst parseXLSXtoJSON = (file, cb) => {\n  var name = file.name;\n  const reader = new FileReader();\n  reader.onload = async (evt) => {\n    const bstr = evt.target.result;\n    const XLSX = await import(\"xlsx\");\n    const wb = XLSX.read(bstr, { type: \"binary\" });\n    const wsname = wb.SheetNames[0];\n    const ws = wb.Sheets[wsname];\n    const data = XLSX.utils.sheet_to_json(ws, { header: 1 });\n    const arr = [];\n    const cols = data.shift();\n    data.forEach((row, i) => {\n      const item = {};\n      cols.forEach((col, j) => {\n        let label;\n        switch (col) {\n          case \"Images\":\n            label = \"images\";\n            break;\n          case \"Name\":\n            label = \"name\";\n            break;\n          case \"Description\":\n            label = \"dscr\";\n            break;\n          case \"Material\":\n            label = \"material\";\n            break;\n          case \"Size [Please specify mm, cm, inch or KG]\":\n            label = \"size\";\n            break;\n          case \"Category\":\n            label = \"category\";\n            break;\n          case \"Type\":\n            label = \"type\";\n            break;\n          case \"Price in INR.\":\n            label = \"price\";\n            break;\n          case \"Units Available\":\n            label = \"available\";\n            break;\n          case \"HSN Code\":\n            label = \"hsn\";\n            break;\n          case \"GST %\":\n            label = \"gst\";\n            break;\n          case \"id\":\n            label = \"_id\";\n            break;\n          default:\n        }\n        item[label] = row[j];\n      });\n      arr.push(item);\n    });\n    cb(arr);\n  };\n  reader.readAsBinaryString(file);\n};\n\nconst MyShop = ({ history, location, match }) => {\n  const { user, userType } = useContext(SiteContext);\n  const { FB } = window;\n  const [msg, setMsg] = useState(null);\n  const [categories, setCategories] = useState([]);\n  const [shopSetupComplete, setShopSetupComplete] = useState(false);\n  useEffect(() => {\n    fetch(\"/api/categories\")\n      .then((res) => res.json())\n      .then((data) => {\n        setCategories(data.categories);\n      });\n  }, []);\n  useEffect(() => {\n    if (\n      !categories?.length ||\n      !user.shopInfo?.terms?.length ||\n      user.shopInfo?.shippingCost === undefined ||\n      user.shopInfo?.shippingCost === null ||\n      user.shopInfo?.refundable === undefined ||\n      user.shopInfo?.paymentMethod === undefined ||\n      user.shopInfo?.paymentMethod === null\n    ) {\n      setShopSetupComplete(false);\n    } else {\n      setShopSetupComplete(true);\n    }\n  }, [categories, user]);\n  useEffect(() => {\n    // FB.getLoginStatus(function (response) {\n    //   if (response.status === \"connected\") {\n    //     console.log(response);\n    //     const accessToken = response.authResponse.accessToken;\n    //     LS.set(\"facebook_user_accessToken\", accessToken);\n    //   }\n    // });\n    // FB.api(\n    //   `/${user.fbMarket?.facebookPage?.id}`,\n    //   \"GET\",\n    //   { fields: \"access_token\" },\n    //   (res) => {\n    //     if (res.access_token) {\n    //       LS.set(\"facebook_page_accessToken\", res.access_token);\n    //     }\n    //   }\n    // );\n  }, [user]);\n  if (!user.shopInfo) {\n    return <ShopSetup />;\n  }\n  return (\n    <>\n      {userType === \"buyer\" && <Redirect to=\"/account/orders/current\" />}\n      <div className=\"myShop\">\n        <div style={{ display: \"none\" }}>\n          <X_svg />\n        </div>\n        <Tabs\n          basepath=\"/account/myShop/\"\n          tabs={[\n            { label: \"Products & Services\", path: \"products\" },\n            { label: \"Orders\", path: \"orders\" },\n            { label: \"Refunds\", path: \"refunds\" },\n            { label: \"Campaigns\", path: \"campaigns\" },\n            { label: \"FB Marketplace\", path: \"fbMarketplace\" },\n            { label: \"Settings\", path: \"settings\" },\n          ]}\n        />\n        <Switch>\n          <Route path=\"/account/myShop/products\">\n            <Products\n              categories={categories}\n              setCategories={setCategories}\n              shopSetupComplete={shopSetupComplete}\n            />\n          </Route>\n          <Route path=\"/account/myShop/orders/:_id\" component={FullOrder} />\n          <Route path=\"/account/myShop/orders\">\n            <OrderManagement categories={categories} />\n          </Route>\n          <Route path=\"/account/myShop/refunds/:_id\" component={FullRefund} />\n          <Route path=\"/account/myShop/refunds\" component={RefundManagement} />\n          <Route path=\"/account/myShop/campaigns\" component={Campaigns} />\n          <Route path=\"/account/myShop/fbMarketplace\" component={FBMarket} />\n          <Route path=\"/account/myShop/settings\">\n            <Settings categories={categories} setCategories={setCategories} />\n          </Route>\n        </Switch>\n        <Modal className=\"msg\" open={msg}>\n          {msg}\n        </Modal>\n      </div>\n    </>\n  );\n};\nconst ProductForm = ({ prefill, onSuccess, categories, setCategories }) => {\n  const { user } = useContext(SiteContext);\n  const [loading, setLoading] = useState(false);\n  const [type, setType] = useState(\n    prefill?.type ||\n      (user.shopInfo?.offerings === \"service\" ? \"service\" : \"product\") ||\n      \"product\"\n  );\n  const [addCat, setAddCat] = useState(false);\n  const [category, setCategory] = useState(prefill?.category || \"\");\n  const [discount, setDiscount] = useState({\n    type: prefill?.discount?.type || null,\n    amount: prefill?.discount?.amount || 0,\n    dscr: prefill?.discount?.dscr || \"\",\n  });\n  const [name, setName] = useState(prefill?.name || \"\");\n  const [dscr, setDscr] = useState(prefill?.dscr || \"\");\n  const [price, setPrice] = useState(prefill?.price || \"\");\n  const [files, setFiles] = useState(prefill?.images || []);\n  const [gst, setGst] = useState(\n    prefill?.gst || user.gst?.verified ? user.gst?.amount : 0\n  );\n  const [hsn, setHsn] = useState(prefill?.hsn || \"\");\n  const [available, setAvailable] = useState(prefill?.available);\n  const [msg, setMsg] = useState(null);\n  const [tags, setTags] = useState(prefill?.tags || []);\n  const [priceDetail, setPriceDetail] = useState({});\n  useEffect(() => {\n    const discountAmount = calculateDiscount({ price, discount });\n    const gstAmount =\n      (((+price || 0) - (+discountAmount || 0)) / 100) * (+gst || 0);\n    const final = (price - discountAmount + gstAmount).fix();\n    setPriceDetail({\n      discount: discountAmount.fix(),\n      gst: gstAmount.fix(),\n      final,\n    });\n  }, [price, discount, gst]);\n  const submit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    const images = files.length\n      ? await UploadFiles({\n          files,\n          setMsg,\n        })\n      : [];\n    fetch(`/api/${prefill ? \"edit\" : \"add\"}Product`, {\n      method: prefill ? \"PATCH\" : \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({\n        type,\n        name,\n        dscr,\n        price: +price,\n        images,\n        category,\n        tags,\n        available:\n          available === true || available === false ? available : +available,\n        gst,\n        discount,\n        ...(prefill && { _id: prefill._id }),\n      }),\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        setLoading(false);\n        if (data.code === \"ok\") {\n          onSuccess?.(data);\n        } else if (data.code === 403) {\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                <Err_svg />\n                <h4>\n                  You can't add more that 100 product at a time. Delete a\n                  product/service and try again.\n                </h4>\n              </div>\n            </>\n          );\n        } else {\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                <Err_svg />\n                <h4>Could not add product. please try again.</h4>\n              </div>\n            </>\n          );\n        }\n      })\n      .catch((err) => {\n        setLoading(false);\n        console.log(err);\n        setMsg(\n          <>\n            <button onClick={() => setMsg(null)}>Okay</button>\n            <div>\n              <Err_svg />\n              <h4>Could not add product. Make sure you're online.</h4>\n            </div>\n          </>\n        );\n      });\n  };\n  return (\n    <>\n      <form onSubmit={submit} className={loading ? \"loading\" : \"\"}>\n        <section className=\"type\">\n          <label>Type</label>\n          <Combobox\n            defaultValue={type}\n            options={[\n              { label: \"Product\", value: \"product\" },\n              { label: \"Service\", value: \"service\" },\n              { label: \"Other\", value: \"other\" },\n            ]}\n            onChange={(e) => {\n              setType(e.value);\n            }}\n          />\n        </section>\n        <section className=\"name\">\n          <label>Name of the product/service</label>\n          <input\n            value={name}\n            onChange={(e) => setName(e.target.value)}\n            required={true}\n          />\n        </section>\n        <section className=\"category\">\n          <label>\n            Category{\" \"}\n            <Tip>\n              You can Add/Edit/Delete your categories{\" \"}\n              <Link to=\"/account/myShop/settings\">here</Link>\n            </Tip>\n          </label>\n          <Combobox\n            required={true}\n            defaultValue={category}\n            options={[\n              ...categories.map((item) => ({ label: item, value: item })),\n            ]}\n            onChange={(e) => {\n              if (e.value === \"addNew\") {\n                setAddCat(true);\n              } else {\n                setCategory(e.value);\n              }\n            }}\n          />\n          <button\n            type=\"button\"\n            className=\"clear\"\n            onClick={() => setAddCat(true)}\n          >\n            <Plus_svg />\n          </button>\n        </section>\n        <section>\n          <label>Price </label>\n          <NumberInput\n            defaultValue={price}\n            onChange={(e) => setPrice(e.target.value)}\n            required={true}\n          />\n        </section>\n        <section className=\"available\">\n          {type === \"product\" ? (\n            <>\n              <label>Available in stock</label>\n              <NumberInput\n                required={true}\n                defaultValue={available}\n                onChange={(e) => setAvailable(e.target.value)}\n              />\n            </>\n          ) : (\n            <>\n              <label>Availability</label>\n              <Combobox\n                defaultValue={available}\n                required={true}\n                options={[\n                  { label: \"Available\", value: true },\n                  { label: \"Not available\", value: false },\n                ]}\n                onChange={(e) => setAvailable(e.value)}\n              />\n            </>\n          )}\n        </section>\n        <section className=\"dscr\">\n          <label>Description of the product/service</label>\n          <TextareaAutosize\n            value={dscr}\n            onChange={(e) => setDscr(e.target.value)}\n            required={true}\n          />\n        </section>\n        <section className=\"tags\">\n          <label>Tags</label>\n          <ul>\n            {tags.map((item) => (\n              <li key={item}>\n                {item}\n                <button\n                  onClick={() => {\n                    setTags((prev) => prev.filter((tag) => tag !== item));\n                  }}\n                >\n                  <X_svg />\n                </button>\n              </li>\n            ))}\n            <li className=\"form\">\n              <input\n                placeholder=\"addNewTag\"\n                onKeyPress={(e) => {\n                  const value = `${e.target.value.trim()}`;\n                  if (e.charCode === 13) {\n                    e.preventDefault();\n                    if (!value) return;\n                    setTags((prev) => [\n                      ...prev.filter((tag) => tag !== value),\n                      value,\n                    ]);\n                    e.target.focus();\n                    e.target.value = \"\";\n                  }\n                }}\n              />\n              <button\n                type=\"button\"\n                onClick={(e) => {\n                  const input = e.target.previousElementSibling;\n                  const value = `${e.target.previousElementSibling.value.trim()}`;\n                  if (!value) return;\n                  setTags((prev) => [\n                    ...prev.filter((tag) => tag !== value),\n                    value,\n                  ]);\n                  input.value = \"\";\n                  input.focus();\n                }}\n              >\n                Add Tag\n              </button>\n            </li>\n          </ul>\n        </section>\n        <section className=\"images\">\n          <label>Images of the product</label>\n          <FileInput\n            multiple={true}\n            prefill={prefill?.images}\n            accept=\"image/*\"\n            onChange={(files) => setFiles(files)}\n          />\n        </section>\n        <section>\n          <label>HSN Code</label>\n          <input value={hsn} onChange={(e) => setHsn(e.target.value)} />\n        </section>\n        {user.gst?.verified && (\n          <section>\n            <label>GST (%)</label>\n            <NumberInput\n              defaultValue={gst}\n              onChange={(e) => setGst(e.target.value)}\n            />\n          </section>\n        )}\n        <section className=\"discountType\">\n          <label>Discount Type</label>\n          <Combobox\n            defaultValue={discount.type}\n            options={[\n              { label: \"None\", value: null },\n              { label: \"Percent\", value: \"percent\" },\n              { label: \"Flat\", value: \"flat\" },\n            ]}\n            onChange={(e) =>\n              setDiscount((prev) => ({ ...prev, type: e.value }))\n            }\n          />\n        </section>\n        {discount.type !== null && (\n          <>\n            <section className=\"discountAmount\">\n              <label>Amount {discount.type === \"percent\" && \"(%)\"}</label>\n              <NumberInput\n                defaultValue={discount.amount}\n                onChange={(e) =>\n                  setDiscount((prev) => ({ ...prev, amount: e.target.value }))\n                }\n              />\n            </section>\n            <section className=\"discountDscr\">\n              <label>Discount description</label>\n              <TextareaAutosize\n                defaultValue={discount.dscr}\n                onChange={(e) =>\n                  setDiscount((prev) => ({ ...prev, dscr: e.target.value }))\n                }\n              />\n            </section>\n          </>\n        )}\n        {price && (\n          <section className=\"finalPrice\">\n            <p>\n              <label>Input price</label>\n              {price}\n            </p>\n            {priceDetail.discount > 0 && (\n              <p>\n                <label>\n                  Discount{\" \"}\n                  {discount.type === \"flat\" ? \"flat\" : `${discount.amount}%`}\n                </label>\n                {priceDetail.discount}\n              </p>\n            )}\n            {priceDetail.gst > 0 && (\n              <p>\n                <label>GST {gst}%</label>\n                {priceDetail.gst}\n              </p>\n            )}\n            <p className=\"final\">\n              <label>Listing Price</label>{priceDetail.final}\n            </p>\n          </section>\n        )}\n        <section className=\"btns\">\n          <button className=\"submit\" type=\"submit\">\n            Submit\n          </button>\n        </section>\n        <div className=\"pBtm\" />\n      </form>\n      {loading && (\n        <div className=\"spinnerContainer\">\n          <div className=\"spinner\" />\n        </div>\n      )}\n      <Modal className=\"msg\" open={msg}>\n        {msg}\n      </Modal>\n      <Modal\n        head={true}\n        className=\"categoryForm\"\n        label=\"Add category\"\n        open={addCat}\n        setOpen={setAddCat}\n      >\n        <form\n          onSubmit={(e) => {\n            e.preventDefault();\n            e.stopPropagation();\n            const input = e.target.querySelector(\"input\");\n            const value = `${input.value}`;\n            fetch(\"/api/addCategory\", {\n              method: \"POST\",\n              headers: { \"Content-Type\": \"application/json\" },\n              body: JSON.stringify({\n                category: value,\n              }),\n            })\n              .then((res) => res.json())\n              .then((data) => {\n                if (data.code === \"ok\") {\n                  setCategories(data.categories);\n                  setCategory(value);\n                  setAddCat(false);\n                  input.value = \"\";\n                } else {\n                  setMsg(\n                    <>\n                      <button onClick={() => setMsg(null)}>Okay</button>\n                      <div>\n                        <Err_svg />\n                        <h4>Could not add category. Try again.</h4>\n                      </div>\n                    </>\n                  );\n                }\n              })\n              .catch((err) => {\n                console.log(err);\n                setMsg(\n                  <>\n                    <button onClick={() => setMsg(null)}>Okay</button>\n                    <div>\n                      <Err_svg />\n                      <h4>Could not add category. Make sure you're online.</h4>\n                    </div>\n                  </>\n                );\n              });\n          }}\n        >\n          <section>\n            <label>Category</label>\n            <input required={true} />\n          </section>\n          <section className=\"btns\">\n            <button className=\"submit\">Add</button>\n          </section>\n        </form>\n      </Modal>\n    </>\n  );\n};\n\nconst Products = ({ categories, setCategories, shopSetupComplete }) => {\n  const { user } = useContext(SiteContext);\n  const { FB } = window;\n  const [productForm, setProductForm] = useState(false);\n  const [total, setTotal] = useState(0);\n  const [page, setPage] = useState(1);\n  const [perPage, setPerPage] = useState(20);\n  const [category, setCategory] = useState(\"\");\n  const [search, setSearch] = useState(\"\");\n  const [sort, setSort] = useState({\n    column: \"createdAt\",\n    order: \"dsc\",\n  });\n  const [dateRange, setDateRange] = useState(null);\n  const [type, setType] = useState(\"\");\n  const [products, setProducts] = useState([]);\n  const [selectAll, setSelectAll] = useState(false);\n  const [batch, setBatch] = useState([]);\n  const [addMany, setAddMany] = useState(false);\n  const [socialShare, setSocialShare] = useState(false);\n  const [msg, setMsg] = useState(null);\n  const deleteItems = (items) => {\n    if (items.length) {\n      fetch(\"/api/deleteProducts\", {\n        method: \"DELETE\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ _ids: items }),\n      })\n        .then((res) => res.json())\n        .then((data) => {\n          if (data.code === \"ok\") {\n            setBatch([]);\n            setProducts((prev) =>\n              prev.filter((item) => !items.some((_id) => _id === item._id))\n            );\n          } else {\n            setMsg(\n              <>\n                <button onClick={() => setMsg(null)}>Okay</button>\n                <div>\n                  <Err_svg />\n                  <h4>Could not delete products. Try again.</h4>\n                </div>\n              </>\n            );\n          }\n        })\n        .catch((err) => {\n          console.log(err);\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                <Err_svg />\n                <h4>Could not delete products. Make sure you're online.</h4>\n              </div>\n            </>\n          );\n        });\n    }\n  };\n  const deleteMany = () => deleteItems(batch);\n  const addToFbMarket = (_ids) => {\n    fetch(\"/api/addToFbMarket\", {\n      method: \"PUT\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ _ids }),\n    })\n      .then((res) => res.json())\n      .then(({ code, fb_products }) => {\n        if (code === \"ok\") {\n          const success = [];\n          const failed = [];\n          fb_products.forEach((item, i) => {\n            if (item.success) {\n              success.push(item);\n            } else {\n              failed.push(item);\n            }\n          });\n          setProducts((prev) =>\n            prev.map((item) => {\n              const prod = fb_products.find(\n                (product) => product._id === item._id\n              );\n              if (prod) {\n                return {\n                  ...item,\n                  fbMarketId: prod.fbMarketId,\n                };\n              } else {\n                return item;\n              }\n            })\n          );\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                {failed.length === 0 ? (\n                  <>\n                    <Succ_svg />\n                    <h4>{success.length} products has been added.</h4>\n                  </>\n                ) : (\n                  <>\n                    <Err_svg />\n                    <h4>{failed.length} products failed.</h4>\n                  </>\n                )}\n              </div>\n            </>\n          );\n        } else {\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                <Err_svg />\n                <h4>Could not add products to Facebook Marketplace.</h4>\n              </div>\n            </>\n          );\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        setMsg(\n          <>\n            <button onClick={() => setMsg(null)}>Okay</button>\n            <div>\n              <Err_svg />\n              <h4>\n                Could not add products to Facebook Marketplace. Make sure you're\n                online.\n              </h4>\n            </div>\n          </>\n        );\n      });\n  };\n  const removeFromFbMarket = (_ids) => {\n    fetch(\"/api/removeFromFbMarket\", {\n      method: \"DELETE\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ _ids }),\n    })\n      .then((res) => res.json())\n      .then(({ code, fb_products }) => {\n        if (code === \"ok\") {\n          const success = [];\n          const failed = [];\n          fb_products.forEach((item, i) => {\n            if (item.success) {\n              success.push(item);\n            } else {\n              failed.push(item);\n            }\n          });\n          setProducts((prev) =>\n            prev.map((item) => {\n              const prod = fb_products.find(\n                (product) => product._id === item._id\n              );\n              if (prod) {\n                return {\n                  ...item,\n                  fbMarketId: prod.fbMarketId,\n                };\n              } else {\n                return item;\n              }\n            })\n          );\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                {failed.length === 0 ? (\n                  <>\n                    <Succ_svg />\n                    <h4>{success.length} products has been removed.</h4>\n                  </>\n                ) : (\n                  <>\n                    <Err_svg />\n                    <h4>{failed.length} products failed to remove.</h4>\n                  </>\n                )}\n              </div>\n            </>\n          );\n          // console.log(data);\n        } else {\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                <Err_svg />\n                <h4>Could not remove products from Facebook Marketplace.</h4>\n              </div>\n            </>\n          );\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        setMsg(\n          <>\n            <button onClick={() => setMsg(null)}>Okay</button>\n            <div>\n              <Err_svg />\n              <h4>\n                Could not remove products from Facebook Marketplace. Make sure\n                you're online.\n              </h4>\n            </div>\n          </>\n        );\n      });\n  };\n  const share = (_ids) => {\n    fetch(\"/api/shareProducts\", {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ products: _ids }),\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        if (data.code === \"ok\") {\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                <Succ_svg />\n                <h4>Product has been shared.</h4>\n              </div>\n            </>\n          );\n        } else {\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                <Err_svg />\n                <h4>Could not share products. please try again.</h4>\n              </div>\n            </>\n          );\n        }\n      })\n      .catch((err) => {\n        setMsg(\n          <>\n            <button onClick={() => setMsg(null)}>Okay</button>\n            <div>\n              <Err_svg />\n              <h4>Could not share products. Make sure you're online.</h4>\n            </div>\n          </>\n        );\n      });\n  };\n  useEffect(() => {\n    const startDate = moment({\n      time: dateRange?.startDate,\n      format: \"YYYY-MM-DD\",\n    });\n    const endDate = moment({\n      time: new Date(dateRange?.endDate)?.setHours(24, 0, 0, 0),\n      format: \"YYYY-MM-DD\",\n    });\n    fetch(\n      `/api/products?${new URLSearchParams({\n        ...(search && { q: search }),\n        page,\n        perPage,\n        sort: sort.column,\n        order: sort.order,\n        ...(dateRange && {\n          dateFrom: startDate,\n          dateTo: endDate,\n        }),\n        ...(category && { category }),\n        ...(type && { type }),\n      })}`\n    )\n      .then((res) => res.json())\n      .then((data) => {\n        if (data.code === \"ok\") {\n          setProducts(data.products);\n          setTotal(data.total);\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        setMsg(\n          <>\n            <button onClick={() => setMsg(null)}>Okay</button>\n            <div>\n              <Err_svg />\n              <h4>Could not get products.</h4>\n            </div>\n          </>\n        );\n      });\n  }, [category, search, page, perPage, type, addMany, dateRange]);\n  useEffect(() => {\n    if (selectAll) {\n      // setBatch(products.map((item) => item._id));\n    } else {\n      setBatch([]);\n    }\n  }, [selectAll]);\n  useEffect(() => {\n    if (batch.length === 0) {\n      setSelectAll(false);\n    }\n  }, [batch]);\n  return (\n    <>\n      <div className=\"benner\">\n        <p>Product Management</p>\n        {shopSetupComplete ? (\n          <>\n            <button className=\"pill\" onClick={() => setProductForm(true)}>\n              <Plus_svg /> Add Product\n            </button>\n            <button\n              className=\"pill batchUpload\"\n              onClick={() => setAddMany(true)}\n            >\n              <Plus_svg /> Batch Upload\n            </button>\n          </>\n        ) : (\n          <Link to=\"/account/myShop/settings\" className=\"err\">\n            <p>Please complete your shop information to add product.</p>\n          </Link>\n        )}\n      </div>\n      <div className=\"filters\">\n        <section>\n          <label>Total:</label>\n          {total}\n        </section>\n        <section>\n          <label>Per Page:</label>\n          <Combobox\n            defaultValue={0}\n            options={[\n              { label: \"20\", value: 20 },\n              { label: \"30\", value: 30 },\n              { label: \"50\", value: 50 },\n            ]}\n            onChange={(e) => setPerPage(e.value)}\n          />\n        </section>\n        <section className=\"search\">\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            width=\"23\"\n            height=\"23\"\n            viewBox=\"0 0 23 23\"\n          >\n            <path\n              id=\"Icon_ionic-ios-search\"\n              data-name=\"Icon ionic-ios-search\"\n              d=\"M27.23,25.828l-6.4-6.455a9.116,9.116,0,1,0-1.384,1.4L25.8,27.188a.985.985,0,0,0,1.39.036A.99.99,0,0,0,27.23,25.828ZM13.67,20.852a7.2,7.2,0,1,1,5.091-2.108A7.155,7.155,0,0,1,13.67,20.852Z\"\n              transform=\"translate(-4.5 -4.493)\"\n              fill=\"#707070\"\n              opacity=\"0.74\"\n            />\n          </svg>\n          <input\n            value={search}\n            onChange={(e) => setSearch(e.target.value)}\n            placeholder=\"Search for products & services\"\n          />\n          {search && (\n            <button onClick={() => setSearch(\"\")}>\n              <X_svg />\n            </button>\n          )}\n        </section>\n        <section className=\"type\">\n          <label>Type:</label>\n          <Combobox\n            defaultValue={0}\n            options={[\n              { label: \"All\", value: \"\" },\n              { label: \"Product\", value: \"product\" },\n              { label: \"Service\", value: \"service\" },\n              { label: \"Other\", value: \"other\" },\n            ]}\n            onChange={(e) => setType(e.value)}\n          />\n        </section>\n        <section className=\"category\">\n          <label>Category:</label>\n          <Combobox\n            defaultValue={0}\n            options={[\n              { label: \"All\", value: \"\" },\n              ...categories.map((item) => ({\n                label: item,\n                value: item,\n              })),\n            ]}\n            onChange={(e) => setCategory(e.value)}\n          />\n        </section>\n        <section className={`date`}>\n          <InputDateRange\n            dateRange={dateRange}\n            onChange={(range) => setDateRange(range)}\n          />\n        </section>\n      </div>\n      <table className=\"table products\">\n        <thead>\n          {batch.length > 0 ? (\n            <tr className=\"batchAction\">\n              <th className=\"checkContainer\">\n                <Checkbox\n                  value={selectAll}\n                  defaultValue={selectAll}\n                  onChange={(e) => setSelectAll(e)}\n                />\n              </th>\n              <th>\n                <button\n                  onClick={() =>\n                    Confirm({\n                      label: \"Batch delete\",\n                      question: `You sure you want to delete these ${batch.length} items?`,\n                      callback: deleteMany,\n                    })\n                  }\n                >\n                  Delete\n                </button>\n              </th>\n              {user.fbMarket?.userAgreement && (\n                <>\n                  <th>\n                    <button\n                      onClick={() => {\n                        addToFbMarket(batch);\n                        setBatch([]);\n                      }}\n                    >\n                      Add to Facebook\n                    </button>\n                  </th>\n                  <th>\n                    <button\n                      onClick={() => {\n                        removeFromFbMarket(batch);\n                        setBatch([]);\n                      }}\n                    >\n                      Remove from Facebook\n                    </button>\n                  </th>\n                  <th>\n                    <button\n                      onClick={() => {\n                        setSocialShare(true);\n                      }}\n                    >\n                      Share on Social media\n                    </button>\n                  </th>\n                </>\n              )}\n            </tr>\n          ) : (\n            <tr>\n              <th className=\"checkContainer\">\n                <Checkbox\n                  value={selectAll}\n                  defaultValue={selectAll}\n                  onChange={(e) => setSelectAll(e)}\n                />\n              </th>\n              <th className=\"date\">Date</th>\n              <th>Image</th>\n              <th className=\"name\">Name</th>\n              <th>Type</th>\n              <th>Facebook Marketplace</th>\n              <th>Available</th>\n              <th>Price</th>\n              <th>GST</th>\n              <th>Discount</th>\n              <th>Listing Price</th>\n              {\n                // <th>Sold</th>\n              }\n              <th>Actions</th>\n            </tr>\n          )}\n        </thead>\n        <tbody>\n          {products.map((product) => (\n            <SingleProduct\n              categories={categories}\n              key={product._id}\n              product={product}\n              setProducts={setProducts}\n              selectAll={selectAll}\n              setBatch={setBatch}\n              batch={batch}\n              deleteItems={deleteItems}\n              addToFbMarket={addToFbMarket}\n              removeFromFbMarket={removeFromFbMarket}\n            />\n          ))}\n          {products.length === 0 && (\n            <tr className=\"placeholder\">\n              <td>No product yet.</td>\n            </tr>\n          )}\n        </tbody>\n      </table>\n      <Pagination\n        total={total}\n        btns={5}\n        currentPage={page}\n        perPage={perPage}\n        setPage={setPage}\n      />\n      <Modal className=\"msg\" open={msg}>\n        {msg}\n      </Modal>\n      <Modal\n        head={true}\n        label=\"Edit Product/Service\"\n        setOpen={setProductForm}\n        open={productForm}\n        className=\"productForm\"\n      >\n        <ProductForm\n          categories={categories}\n          setCategories={setCategories}\n          onSuccess={({ product, fbMarket }) => {\n            setProducts((prev) => [product, ...prev]);\n            setProductForm(false);\n            setMsg(\n              <>\n                <button onClick={() => setMsg(null)}>Okay</button>\n                <div>\n                  <Succ_svg />\n                  <h4>Product added.</h4>\n                </div>\n              </>\n            );\n          }}\n        />\n      </Modal>\n      <Modal\n        open={addMany}\n        head={true}\n        label=\"Batch product upload\"\n        setOpen={setAddMany}\n        className=\"batchItemPreview\"\n      >\n        <BatchUpload\n          categories={categories}\n          onSuccess={() => {\n            setAddMany(false);\n          }}\n        />\n      </Modal>\n      <Modal\n        open={socialShare}\n        setOpen={setSocialShare}\n        head={true}\n        label=\"Share on Social media\"\n        className=\"socialShare\"\n      >\n        <SocialShare\n          products={batch}\n          onSuccess={() => {\n            setSocialShare(false);\n            setMsg(\n              <>\n                <button\n                  onClick={() => {\n                    setMsg(null);\n                    setBatch([]);\n                  }}\n                >\n                  Okay\n                </button>\n                <div>\n                  <Succ_svg />\n                  <h4>Product shared.</h4>\n                </div>\n              </>\n            );\n          }}\n        />\n      </Modal>\n    </>\n  );\n};\nconst SingleProduct = ({\n  product,\n  setProducts,\n  categories,\n  selectAll,\n  setBatch,\n  batch,\n  deleteItems,\n  addToFbMarket,\n  removeFromFbMarket,\n}) => {\n  const { user } = useContext(SiteContext);\n  const [selected, setSelected] = useState(selectAll || false);\n  const [socialShare, setSocialShare] = useState(false);\n  const [edit, setEdit] = useState(false);\n  const [showInstaForm, setShowInstaForm] = useState(false);\n  const [msg, setMsg] = useState(false);\n  useEffect(() => {\n    setSelected(selectAll);\n  }, [selectAll]);\n  useEffect(() => {\n    if (selected) {\n      setBatch((prev) => [...prev, product._id]);\n    } else {\n      setBatch((prev) => prev.filter((item) => item !== product._id));\n    }\n  }, [selected]);\n  return (\n    <tr className={`product ${selected ? \"selected\" : \"\"}`}>\n      <td className=\"checkContainer\">\n        <Checkbox\n          defaultValue={selected}\n          value={selected}\n          onChange={(e) => {\n            setSelected(e);\n          }}\n        />\n      </td>\n      <td className=\"date\">\n        <Moment format=\"DD-MM-YY\">{product.createdAt}</Moment>\n      </td>\n      <td className=\"thumbs\">\n        <Media links={product.images} />\n      </td>\n      <td className=\"name\">{product.name}</td>\n      <td>{product.type}</td>\n      <td>{product.fbMarketId ? \"Added\" : \"N/A\"}</td>\n      <td>\n        {product.available} {product.available === true && \"Available\"}\n        {product.available === false && \"Unavailable\"}\n      </td>\n      <td>{product.price}</td>\n      <td>\n        {user.gst?.verified\n          ? (product.gst || user.gst?.amount || 0) + \"%\"\n          : \"N/A\"}\n      </td>\n      <td>{calculateDiscount(product) || 0}</td>\n      <td>{calculatePrice({ product, gst: user.gst }) || 0}</td>\n      <td>\n        {batch.length === 0 && (\n          <Actions icon={<Chev_down_svg />}>\n            <Link to={`/marketplace/${product._id}`} target=\"_blank\">\n              View\n            </Link>\n            {user.fbMarket?.userAgreement && (\n              <>\n                {product.fbMarketId ? (\n                  <button onClick={() => removeFromFbMarket([product._id])}>\n                    Remove from Facebook\n                  </button>\n                ) : (\n                  <button onClick={() => addToFbMarket([product._id])}>\n                    Add to Facebook\n                  </button>\n                )}\n              </>\n            )}\n            {user.fbMarket?.instagramAccount?.id && (\n              <button onClick={() => setShowInstaForm(true)}>\n                Post to instagram\n              </button>\n            )}\n            {!user.fbMarket?.userAgreement && (\n              <Link to=\"/account/myShop/fbMarketplace\" className=\"edit\">\n                Setup FB Marketplace\n              </Link>\n            )}\n            {user.fbMarket?.user?.access_token && (\n              <button onClick={() => setSocialShare(true)}>\n                Share on Social media\n              </button>\n            )}\n            <FacebookShareButton\n              resetButtonStyle={false}\n              url={`deliverypay.in/marketplace/${product._id}`}\n            >\n              Post on Facebook\n            </FacebookShareButton>\n            <button className=\"edit\" onClick={() => setEdit(true)}>\n              Edit\n            </button>\n            <button\n              className=\"delete\"\n              onClick={() =>\n                Confirm({\n                  label: \"Removing Product\",\n                  question: \"You sure want to delete this product?\",\n                  callback: () => deleteItems([product._id]),\n                })\n              }\n            >\n              Delete\n            </button>\n          </Actions>\n        )}\n      </td>\n      <Modal\n        head={true}\n        label=\"Edit Product/Service\"\n        open={edit}\n        setOpen={setEdit}\n        className=\"productForm\"\n      >\n        <ProductForm\n          categories={categories}\n          onSuccess={({ product }) => {\n            setProducts((prev) =>\n              prev.map((item) => {\n                if (item._id === product._id) {\n                  return product;\n                } else {\n                  return item;\n                }\n              })\n            );\n            setEdit(false);\n            setMsg(\n              <>\n                <button onClick={() => setMsg(null)}>Okay</button>\n                <div>\n                  <Succ_svg />\n                  <h4>Product updated.</h4>\n                </div>\n              </>\n            );\n          }}\n          prefill={product}\n        />\n      </Modal>\n      <Modal\n        head={true}\n        label=\"Post to Instagram\"\n        open={showInstaForm}\n        setOpen={setShowInstaForm}\n        className=\"instaForm\"\n      >\n        <InstaForm\n          product={product}\n          onSuccess={() => setShowInstaForm(false)}\n        />\n      </Modal>\n      <Modal\n        open={socialShare}\n        setOpen={setSocialShare}\n        head={true}\n        label=\"Share on Social media\"\n        className=\"socialShare\"\n      >\n        <SocialShare\n          products={[product._id]}\n          onSuccess={() => {\n            setSocialShare(false);\n            setMsg(\n              <>\n                <button\n                  onClick={() => {\n                    setMsg(null);\n                  }}\n                >\n                  Okay\n                </button>\n                <div>\n                  <Succ_svg />\n                  <h4>Product shared.</h4>\n                </div>\n              </>\n            );\n          }}\n        />\n      </Modal>\n      <Modal className=\"msg\" open={msg}>\n        {msg}\n      </Modal>\n    </tr>\n  );\n};\nconst InstaForm = ({ product, onSuccess }) => {\n  const { FB } = window;\n  const { user } = useContext(SiteContext);\n  const [msg, setMsg] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [img, setImg] = useState(product.images[0]);\n  const [caption, setCaption] = useState(\"\");\n  const submit = (e) => {\n    e.preventDefault();\n    setLoading(true);\n    FB.api(\n      `/${user.fbMarket?.instagramAccount?.id}/media`,\n      \"POST\",\n      {\n        caption,\n        image_url: img,\n        access_token: user.fbMarket.user.access_token,\n      },\n      (res) => {\n        if (res.error) {\n          console.log(res.error);\n          setMsg(\n            <>\n              <button\n                onClick={() => {\n                  setMsg(null);\n                }}\n              >\n                Okay\n              </button>\n              <div>\n                <Err_svg />\n                <h4>{res.error.message}</h4>\n              </div>\n            </>\n          );\n          setLoading(false);\n          return;\n        }\n        FB.api(\n          `/${user.fbMarket?.instagramAccount?.id}/media_publish`,\n          \"POST\",\n          {\n            creation_id: res.id,\n            access_token: user.fbMarket.user.access_token,\n          },\n          (res) => {\n            setLoading(false);\n            if (res.error) {\n              console.log(res.error);\n              setMsg(\n                <>\n                  <button\n                    onClick={() => {\n                      setMsg(null);\n                    }}\n                  >\n                    Okay\n                  </button>\n                  <div>\n                    <Err_svg />\n                    <h4>{res.error.message}</h4>\n                  </div>\n                </>\n              );\n              return;\n            }\n            console.log(res);\n            setMsg(\n              <>\n                <button\n                  onClick={() => {\n                    setMsg(null);\n                    onSuccess?.();\n                  }}\n                >\n                  Okay\n                </button>\n                <div>\n                  <Succ_svg />\n                  <h4>Successfully posted.</h4>\n                </div>\n              </>\n            );\n          }\n        );\n      }\n    );\n  };\n  return (\n    <>\n      <form className=\"content\" onSubmit={submit}>\n        <div className=\"profile\">\n          <Img src={user.fbMarket?.instagramAccount?.profile_picture_url} />\n          <p>{user.fbMarket?.instagramAccount?.username}</p>\n        </div>\n        <Img src={img} className=\"main\" />\n        <div className=\"thumbs\">\n          {product.images?.map((img, i) => (\n            <Img key={i} src={img} onClick={() => setImg(img)} />\n          ))}\n        </div>\n        <section>\n          <label>Caption</label>\n          <TextareaAutosize\n            value={caption}\n            onChange={(e) => setCaption(e.target.value)}\n            maxLength={2200}\n          />\n        </section>\n        <section className=\"btns\">\n          <button className=\"submit pill\">Post</button>\n        </section>\n      </form>\n      <Modal className=\"msg\" open={msg}>\n        {msg}\n      </Modal>\n      {loading && (\n        <div className=\"spinnerContainer\">\n          <div className=\"spinner\" />\n        </div>\n      )}\n    </>\n  );\n};\n\nconst BatchUpload = ({ onSuccess, categories }) => {\n  const { user } = useContext(SiteContext);\n  const [loading, setLoading] = useState(false);\n  const [step, setStep] = useState(1);\n  const [batchItems, setBatchItems] = useState(null);\n  const [images, setImages] = useState([]);\n  const [msg, setMsg] = useState(null);\n  const [category, setCategory] = useState(\"\");\n  const [type, setType] = useState(user.shopInfo.offerings || \"\");\n  const [csvDraft, setCsvDraft] = useState(null);\n  const addBatchProducts = () => {\n    setLoading(true);\n    fetch(\"/api/updateDraft\", {\n      method: \"PATCH\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ items: batchItems }),\n    })\n      .then((res) => res.json())\n      .then(({ code, updated }) => {\n        setLoading(false);\n        if (code === \"ok\") {\n          setMsg(\n            <>\n              <button\n                onClick={() => {\n                  setMsg(null);\n                  onSuccess?.();\n                }}\n              >\n                Okay\n              </button>\n              <div>\n                {updated ? <Succ_svg /> : <Err_svg />}\n                <h4>{updated} items has been updated.</h4>\n              </div>\n            </>\n          );\n        } else {\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                <Err_svg />\n                <h4>Could not add products. Try again.</h4>\n              </div>\n            </>\n          );\n        }\n      })\n      .catch((err) => {\n        setLoading(false);\n        console.log(err);\n        setMsg(\n          <>\n            <button onClick={() => setMsg(null)}>Okay</button>\n            <div>\n              <Err_svg />\n              <h4>Could not add products. Make sure you're online.</h4>\n            </div>\n          </>\n        );\n      });\n  };\n  const uploadImages = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    const imgLinks = (await UploadFiles({ files: images, setMsg })) || [];\n    if (imgLinks.length !== images.length) {\n      setMsg(\n        <>\n          <button onClick={() => setMsg(null)}>Okay</button>\n          <div>\n            <Err_svg />\n            <h4>Could not upload images. Please try again.</h4>\n          </div>\n        </>\n      );\n      return;\n    }\n    fetch(\"/api/uploadProductImg\", {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({\n        images: imgLinks,\n        category,\n        type,\n      }),\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        if (data.code === \"ok\") {\n          const headers = Object.entries({\n            Images: \"images\",\n            id: \"_id\",\n            Name: \"name\",\n            Description: \"dscr\",\n            Material: \"material\",\n            \"Size [Please specify mm, cm, inch or KG]\": \"size\",\n            Category: \"category\",\n            Type: \"type\",\n            \"Price in INR.\": \"price\",\n            \"Units Available\": \"available\",\n            \"HSN Code\": \"hsn\",\n            \"GST %\": \"gst\",\n          }).map(([key, value]) => ({\n            label: key,\n            key: value,\n          }));\n          setCsvDraft({\n            headers,\n            data: data.products,\n            filename: `Delivery Pay Product Draft.csv`,\n          });\n        } else {\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                <Err_svg />\n                <h4>Could not add products. Make sure you're online.</h4>\n              </div>\n            </>\n          );\n        }\n      })\n      .catch((err) => {\n        setLoading(false);\n        console.log(err);\n        setMsg(\n          <>\n            <button onClick={() => setMsg(null)}>Okay</button>\n            <div>\n              <Err_svg />\n              <h4>Could not add products. Make sure you're online.</h4>\n            </div>\n          </>\n        );\n      });\n  };\n  return (\n    <div className=\"content\">\n      <Step\n        label=\"Create Draft\"\n        className=\"createDraft\"\n        defaultStatus={step === 1}\n        data={csvDraft}\n      >\n        <>\n          <form onSubmit={uploadImages}>\n            <section className=\"type\">\n              <label>Type</label>\n              <Combobox\n                defaultValue={type}\n                options={[\n                  { label: \"Product\", value: \"product\" },\n                  { label: \"Service\", value: \"service\" },\n                  { label: \"Other\", value: \"other\" },\n                ]}\n                required={true}\n                onChange={(e) => setType(e.value)}\n              />\n            </section>\n            <section className=\"category\">\n              <label>Choose category</label>\n              <Combobox\n                options={categories.map((item) => ({\n                  label: item,\n                  value: item.toLowerCase(),\n                }))}\n                required={true}\n                onChange={(e) => setCategory(e.value)}\n              />\n            </section>\n            <p>\n              Choose images{\" \"}\n              <span>\n                Choose 1 image for each product. you can add multiple images\n                later.\n              </span>\n            </p>\n            <FileInput onChange={(files) => setImages(files)} multiple={true} />\n            <section className=\"btns\">\n              <button\n                className=\"clean\"\n                type=\"button\"\n                onClick={() => setStep(3)}\n              >\n                Already have a draft\n              </button>\n              {csvDraft ? (\n                <CSVLink\n                  {...csvDraft}\n                  className=\"submit\"\n                  type=\"submit\"\n                  onClick={() => {\n                    setCsvDraft(null);\n                    setStep(2);\n                  }}\n                >\n                  Download Draft\n                </CSVLink>\n              ) : (\n                <button className=\"submit\">Create Draft</button>\n              )}\n            </section>\n          </form>\n        </>\n      </Step>\n      <Step label=\"Populate With data\" defaultStatus={step === 2}>\n        <p>\n          Populate the Sheet with real product data. Don't Change the header.\n        </p>\n        <button className=\"submit\" onClick={() => setStep(3)}>\n          Next\n        </button>\n      </Step>\n      <Step label=\"Upload Draft\" defaultStatus={step === 3}>\n        {!!batchItems?.length && (\n          <table className=\"table\">\n            <thead>\n              <tr>\n                <th>Type</th>\n                <th>Images</th>\n                <th className=\"name\">Name</th>\n                <th className=\"dscr\">Description</th>\n                <th>Available</th>\n                <th>Price</th>\n                <th>GST</th>\n                <th>Action</th>\n              </tr>\n            </thead>\n            <tbody>\n              {batchItems?.map((item, i) => (\n                <tr key={i}>\n                  <td>{item.type}</td>\n                  <td className=\"thumbs\">\n                    <Media links={item.images} />\n                  </td>\n                  <td className=\"name\">{item.name}</td>\n                  <td className=\"dscr\">{item.dscr}</td>\n                  <td>\n                    {item.available}\n                    {item.available === true && \"Available\"}\n                    {item.available === false && \"Unavailable\"}\n                  </td>\n                  <td>{item.price}</td>\n                  <td>{item.gst}</td>\n                  <td>\n                    <button\n                      className=\"remove\"\n                      onClick={() =>\n                        setBatchItems((prev) => {\n                          const newItems = [...prev];\n                          newItems.splice(i, 1);\n                          return newItems;\n                        })\n                      }\n                    >\n                      <X_svg />\n                    </button>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        )}\n        {!batchItems?.length && (\n          <div className=\"uploadFile\">\n            <p>\n              Upload xlsx/csv file in. See the example file{\" \"}\n              <a\n                href=\"/batch_product_upload_xlsx_file_example.csv\"\n                target=\"_blank\"\n              >\n                here\n              </a>\n              .\n            </p>\n            <input\n              type=\"file\"\n              accept=\".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\"\n              onChange={(e) => {\n                if (e.target.files[0]) {\n                  parseXLSXtoJSON(e.target.files[0], (result) => {\n                    if (result?.length) {\n                      setBatchItems(\n                        result\n                          .filter(\n                            (item) =>\n                              item.type &&\n                              item.category &&\n                              item.name &&\n                              item.dscr &&\n                              item.price !== undefined\n                          )\n                          .map((item) => ({\n                            ...item,\n                            status: \"\",\n                            images: item.images\n                              .split(/,( |\\n)/)\n                              .filter((item) => item.trim()),\n                          }))\n                      );\n                    }\n                  });\n                }\n                e.target.value = null;\n              }}\n            />\n          </div>\n        )}\n        {!!batchItems?.length && (\n          <button\n            className=\"submit\"\n            onClick={() =>\n              Confirm({\n                label: \"Adding Batch products\",\n                question: \"You sure want to add all these items?\",\n                callback: addBatchProducts,\n              })\n            }\n          >\n            Add\n          </button>\n        )}\n      </Step>\n      {loading && (\n        <div className=\"spinnerContainer\">\n          <div className=\"spinner\" />\n        </div>\n      )}\n      <Modal className=\"msg\" open={msg}>\n        {msg}\n      </Modal>\n    </div>\n  );\n};\nconst SocialShare = ({ products, onSuccess }) => {\n  const { FB } = window;\n  const { user } = useContext(SiteContext);\n  const [loading, setLoading] = useState(false);\n  const [msg, setMsg] = useState(null);\n  const [igs, setIgs] = useState([]);\n  const [pages, setPages] = useState([]);\n  const [groups, setGroups] = useState([]);\n  useEffect(() => {\n    FB.api(\n      `/me/accounts`,\n      \"GET\",\n      {\n        fields:\n          \"instagram_business_account{profile_picture_url, username},picture{url},access_token,category,name\",\n        access_token: user.fbMarket?.user?.access_token,\n      },\n      (resp) => {\n        if (resp.data) {\n          setPages(\n            resp.data.map((item) => {\n              if (item.instagram_business_account) {\n                setIgs((prev) => [\n                  ...prev,\n                  {\n                    ...item.instagram_business_account,\n                    publish: true,\n                  },\n                ]);\n              }\n              return { ...item, publish: true };\n            })\n          );\n        }\n      }\n    );\n    FB.api(\n      `/me/groups`,\n      \"GET\",\n      {\n        fields: \"name,picture{url}\",\n        access_token: user.fbMarket?.user?.access_token,\n      },\n      (resp) => {\n        if (resp.data) {\n          setGroups(resp.data.map((item) => ({ ...item, publish: true })));\n        }\n      }\n    );\n  }, []);\n  const allPages = pages.filter((item) => item.publish).length === pages.length;\n  const allIgs = igs.filter((item) => item.publish).length === igs.length;\n  const allGroups =\n    groups.filter((item) => item.publish).length === groups.length;\n  const post = () => {\n    setLoading(true);\n    fetch(\"/api/shareProducts\", {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({\n        products,\n        pages: pages\n          .filter((item) => item.publish)\n          .map((item) => ({ id: item.id, access_token: item.access_token })),\n        igs: igs\n          .filter((item) => item.publish)\n          .map((item) => ({ id: item.id })),\n        groups: groups.filter((item) => item.publish),\n      }),\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        setLoading(false);\n        if (data.code === \"ok\") {\n          onSuccess?.();\n        } else {\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                <Err_svg />\n                <h4>Could not share products. Try again.</h4>\n              </div>\n            </>\n          );\n        }\n      })\n      .catch((err) => {\n        setLoading(false);\n        console.log(err);\n        setMsg(\n          <>\n            <button onClick={() => setMsg(null)}>Okay</button>\n            <div>\n              <Err_svg />\n              <h4>Could not share products. Make sure you're online.</h4>\n            </div>\n          </>\n        );\n      });\n  };\n  return (\n    <>\n      <div className=\"content\">\n        <h2>\n          Pages{\" \"}\n          <button\n            className=\"clear\"\n            onClick={() =>\n              setPages((prev) =>\n                prev.map((item) => ({ ...item, publish: !allPages }))\n              )\n            }\n          >\n            {allPages ? <Succ_svg /> : <Err_svg />}\n          </button>\n        </h2>\n        <table className=\"table pages\">\n          <tbody>\n            {pages.map((page) => (\n              <tr key={page.id}>\n                <td>\n                  <Img src={page.picture?.data?.url} />\n                </td>\n                <td className=\"name\">\n                  {page.name}\n                  <span className=\"category\">{page.category}</span>\n                </td>\n                <td>\n                  <button\n                    className=\"clear\"\n                    onClick={() => {\n                      setPages((prev) =>\n                        prev.map((item) => {\n                          if (item.id === page.id) {\n                            return {\n                              ...item,\n                              publish: !item.publish,\n                            };\n                          } else {\n                            return item;\n                          }\n                        })\n                      );\n                    }}\n                  >\n                    {page.publish ? <Succ_svg /> : <Err_svg />}\n                  </button>\n                </td>\n              </tr>\n            ))}\n            {pages.length === 0 && (\n              <tr className=\"placeholder\">\n                <td>No page found.</td>\n              </tr>\n            )}\n          </tbody>\n        </table>\n        <h2>\n          Instagram{\" \"}\n          <button\n            className=\"clear\"\n            onClick={() =>\n              setIgs((prev) =>\n                prev.map((item) => ({ ...item, publish: !allIgs }))\n              )\n            }\n          >\n            {allIgs ? <Succ_svg /> : <Err_svg />}\n          </button>\n        </h2>\n        <p className=\"note\">\n          *Make sure image aspect ratio is correct. otherwise product may not be\n          posted on instagram.\n        </p>\n        <table className=\"table ig\">\n          <tbody>\n            {igs.map((ig) => (\n              <tr key={ig.id}>\n                <td>\n                  <Img src={ig.profile_picture_url} />\n                </td>\n                <td className=\"name\">{ig.username}</td>\n                <td>\n                  <button\n                    className=\"clear\"\n                    onClick={() => {\n                      setIgs((prev) =>\n                        prev.map((item) => {\n                          if (item.id === ig.id) {\n                            return {\n                              ...item,\n                              publish: !item.publish,\n                            };\n                          } else {\n                            return item;\n                          }\n                        })\n                      );\n                    }}\n                  >\n                    {ig.publish ? <Succ_svg /> : <Err_svg />}\n                  </button>\n                </td>\n              </tr>\n            ))}\n            {igs.length === 0 && (\n              <tr className=\"placeholder\">\n                <td>No Instagram busines account found.</td>\n              </tr>\n            )}\n          </tbody>\n        </table>\n        <h2>\n          Groups{\" \"}\n          <button\n            className=\"clear\"\n            onClick={() =>\n              setGroups((prev) =>\n                prev.map((item) => ({ ...item, publish: !allGroups }))\n              )\n            }\n          >\n            {allGroups ? <Succ_svg /> : <Err_svg />}\n          </button>\n        </h2>\n        <p className=\"note\">\n          *Make sure you are an admin of the group or at least have permission\n          to post on the group.\n        </p>\n        <table className=\"table groups\">\n          <tbody>\n            {groups.map((group) => (\n              <tr key={group.id}>\n                <td>\n                  <Img src={group.picture?.data?.url} />\n                </td>\n                <td className=\"name\">{group.name}</td>\n                <td>\n                  <button\n                    className=\"clear\"\n                    onClick={() => {\n                      setGroups((prev) =>\n                        prev.map((item) => {\n                          if (item.id === group.id) {\n                            return {\n                              ...item,\n                              publish: !item.publish,\n                            };\n                          } else {\n                            return item;\n                          }\n                        })\n                      );\n                    }}\n                  >\n                    {group.publish ? <Succ_svg /> : <Err_svg />}\n                  </button>\n                </td>\n              </tr>\n            ))}\n            {groups.length === 0 && (\n              <tr className=\"placeholder\">\n                <td>No group found.</td>\n              </tr>\n            )}\n          </tbody>\n        </table>\n      </div>\n      <button className=\"publish fill\" onClick={post}>\n        Post\n      </button>\n      {loading && (\n        <div className=\"spinnerContainer\">\n          <div className=\"spinner\" />\n        </div>\n      )}\n      <Modal className=\"msg\" open={msg}>\n        {msg}\n      </Modal>\n    </>\n  );\n};\n\nexport const defaultTerms = [\n  \"Buyer will be responsible for paying for shipping costs & for returning the item.\",\n  \"Shipping costs are nonrefundable.\",\n  \"Orders must be returned with Original Packaging & Securely.\",\n  \"Orders must be Returned Via Trackable / Traceable Courier Services Only.\",\n  \"Proof of Return via Photo of Tracking Number & Dispatch Ticket is Required.\",\n  \"Refund is Only Issued Upon Delivery of Return Package.\",\n];\nconst Settings = ({ categories, setCategories }) => {\n  const { user, setUser } = useContext(SiteContext);\n  const [shopEdit, setShopEdit] = useState(false);\n  const [gstEdit, setGstEdit] = useState(false);\n  const [shippingEdit, setShippingEdit] = useState(false);\n  const [termsEdit, setTermsEdit] = useState();\n  const [editPayment, setEditPayment] = useState(false);\n  const [msg, setMsg] = useState(null);\n  return (\n    <div className=\"settings\">\n      <div className=\"caution\">\n        {!categories?.length && <p className=\"err\">Add at least 1 category.</p>}\n        {!user.shopInfo?.terms?.length && (\n          <p className=\"err\">Add Return policy terms</p>\n        )}\n        {(user.shopInfo?.shippingCost === undefined ||\n          user.shopInfo?.shippingCost === null ||\n          user.shopInfo?.refundable === undefined) && (\n          <p className=\"err\">Add Shipping & Delivery detail</p>\n        )}\n        {!user.shopInfo?.paymentMethod && (\n          <p className=\"err\">Add valid payment method</p>\n        )}\n      </div>\n      <div className=\"gst\">\n        <h2 className=\"head\">\n          Shop detail{\" \"}\n          {!shopEdit && <button onClick={() => setShopEdit(true)}>Edit</button>}\n        </h2>\n        {shopEdit ? (\n          <ShopEditForm setOpen={setShopEdit} setMsg={setMsg} />\n        ) : (\n          <>\n            <p>We sell: {user.shopInfo.offerings}</p>\n            <p>Brand/Shop name: {user.shopInfo.name}</p>\n            <p>\n              Logo: <Img className=\"logo\" src={user.shopInfo.logo} />\n            </p>\n            <p>\n              Phone:\n              {user.shopInfo.phone}\n            </p>\n          </>\n        )}\n      </div>\n      <div className=\"cat\">\n        <h2 className=\"head\">Categories</h2>\n        <ul className=\"categories\">\n          {categories.map((item, i) => (\n            <li key={i}>\n              {item}{\" \"}\n              <button\n                onClick={() =>\n                  Confirm({\n                    label: \"Remove Category\",\n                    question: \"You sure want to remove this category?\",\n                    callback: () => {\n                      fetch(\"/api/categories\", {\n                        method: \"DELETE\",\n                        headers: { \"Content-Type\": \"application/json\" },\n                        body: JSON.stringify({\n                          category: item,\n                        }),\n                      })\n                        .then((res) => res.json())\n                        .then((data) => {\n                          if (data.code === \"ok\") {\n                            setCategories((prev) =>\n                              prev.filter((cat) => cat !== item)\n                            );\n                          } else {\n                            setMsg(\n                              <>\n                                <button onClick={() => setMsg(null)}>\n                                  Okay\n                                </button>\n                                <div>\n                                  <Err_svg />\n                                  <h4>Could not delete category. Try again.</h4>\n                                </div>\n                              </>\n                            );\n                          }\n                        })\n                        .catch((err) => {\n                          console.log(err);\n                          setMsg(\n                            <>\n                              <button onClick={() => setMsg(null)}>Okay</button>\n                              <div>\n                                <Err_svg />\n                                <h4>\n                                  Could not delete category. Make sure you're\n                                  online.\n                                </h4>\n                              </div>\n                            </>\n                          );\n                        });\n                    },\n                  })\n                }\n              >\n                <X_svg />\n              </button>\n            </li>\n          ))}\n          {categories.length === 0 && (\n            <li className=\"placeholder\">No category found.</li>\n          )}\n        </ul>\n        <form\n          onSubmit={(e) => {\n            e.preventDefault();\n            const input = e.target.querySelector(\"input\");\n            fetch(\"/api/addCategory\", {\n              method: \"POST\",\n              headers: { \"Content-Type\": \"application/json\" },\n              body: JSON.stringify({\n                category: input.value,\n              }),\n            })\n              .then((res) => res.json())\n              .then((data) => {\n                if (data.code === \"ok\") {\n                  setCategories(data.categories);\n                  input.value = \"\";\n                } else {\n                  setMsg(\n                    <>\n                      <button onClick={() => setMsg(null)}>Okay</button>\n                      <div>\n                        <Err_svg />\n                        <h4>Could not add category. Try again.</h4>\n                      </div>\n                    </>\n                  );\n                }\n              })\n              .catch((err) => {\n                console.log(err);\n                setMsg(\n                  <>\n                    <button onClick={() => setMsg(null)}>Okay</button>\n                    <div>\n                      <Err_svg />\n                      <h4>Could not add category. Make sure you're online.</h4>\n                    </div>\n                  </>\n                );\n              });\n          }}\n        >\n          <input\n            type=\"text\"\n            required={true}\n            placeholder=\"New Category. ie Mobile\"\n          />\n          <button>Add category</button>\n        </form>\n      </div>\n      <div className=\"gst\">\n        <h2 className=\"head\">\n          GST{\" \"}\n          {!gstEdit && <button onClick={() => setGstEdit(true)}>Edit</button>}\n        </h2>\n        <p className=\"status\">\n          Status:{\" \"}\n          <strong>{user.gst?.verified ? \"Verified\" : \"Unverified\"}</strong>\n        </p>\n        {gstEdit ? (\n          <GstEditForm setOpen={setGstEdit} setMsg={setMsg} />\n        ) : (\n          <>\n            <p>GST Registration number: {user.gst?.detail?.reg || \"N/A\"}</p>\n            <p>\n              GST amount: {user.gst?.amount ? user.gst.amount + \"%\" : \"N/A\"}\n            </p>\n            <p>\n              Files for verification:{\" \"}\n              {!user.gst?.detail?.files?.length && \"N/A\"}\n            </p>\n            {user.gst?.detail?.files?.length && (\n              <ul className=\"thumbs\">\n                <Media links={user.gst?.detail?.files} />\n              </ul>\n            )}\n          </>\n        )}\n        {!user.gst?.verified && (\n          <p className=\"note\">\n            *GST will apply once we review and verify your GST registraion.\n          </p>\n        )}\n      </div>\n      <div className=\"payment\">\n        <h2 className=\"head\">\n          Payment Method{\" \"}\n          {!editPayment && (\n            <button onClick={() => setEditPayment(true)}>Edit</button>\n          )}\n        </h2>\n        {editPayment ? (\n          <PaymentMethodForm\n            prefill={user.shopInfo?.paymentMethod}\n            setOpen={setEditPayment}\n            setMsg={setMsg}\n          />\n        ) : (\n          <>\n            {user.shopInfo.paymentMethod?.bank ? (\n              <>\n                <p>Name: {user.shopInfo?.paymentMethod?.name || \"--\"}</p>\n                <p>Bank: {user.shopInfo?.paymentMethod?.bank || \"--\"}</p>\n                <p>City: {user.shopInfo?.paymentMethod?.city || \"--\"}</p>\n                <p>\n                  Account type:{\" \"}\n                  {user.shopInfo?.paymentMethod?.accountType || \"--\"}\n                </p>\n                <p>\n                  Account Number:{\" \"}\n                  {user.shopInfo?.paymentMethod?.accountNumber || \"--\"}\n                </p>\n                <p>ifsc: {user.shopInfo?.paymentMethod?.ifsc || \"--\"}</p>\n              </>\n            ) : (\n              <>\n                <p>Payment method: {user.shopInfo.paymentMethod}</p>\n              </>\n            )}\n          </>\n        )}\n      </div>\n      <div className=\"terms shipping\">\n        <h2 className=\"head\">\n          Shipping & Delivery{\" \"}\n          {!shippingEdit && (\n            <button onClick={() => setShippingEdit(true)}>Edit</button>\n          )}\n        </h2>\n        {shippingEdit ? (\n          <ShippingEditForm setOpen={setShippingEdit} setMsg={setMsg} />\n        ) : (\n          <>\n            <p>\n              Shipping cost:{\" \"}\n              {user.shopInfo?.shippingCost\n                ? \"\" + user.shopInfo?.shippingCost\n                : \"N/A\"}\n            </p>\n            <p>\n              Delivery within (days): {user.shopInfo?.deliveryWithin || \"N/A\"}\n            </p>\n            <p>Refundable: {user.shopInfo?.refundable?.toString() || \"N/A\"}</p>\n          </>\n        )}\n      </div>\n      {\n        //   <div className=\"terms payment\">\n        //   <h2 className=\"head\">Deposit & Payment Terms</h2>\n        //   <p>\n        //     Refundable [ I will accept Returns ] / Non Refundable [ I will not\n        //     accept returns , My payment should be released as soon as my Order is\n        //     Delivered ] as Options before Requesting for a Payment.\n        //   </p>\n        // </div>\n      }\n      <div className=\"terms return\">\n        <h2 className=\"head\">\n          Return Policy Terms{\" \"}\n          {!termsEdit && (\n            <button onClick={() => setTermsEdit(true)}>Edit</button>\n          )}\n        </h2>\n        <TermsEditForm\n          setOpen={setTermsEdit}\n          termsEdit={termsEdit}\n          setMsg={setMsg}\n        />\n      </div>\n      <Modal className=\"msg\" open={msg}>\n        {msg}\n      </Modal>\n    </div>\n  );\n};\n\nconst ShopEditForm = ({ setOpen, setMsg }) => {\n  const { user, setUser } = useContext(SiteContext);\n  const [loading, setLoading] = useState(false);\n  const [offerings, setOfferings] = useState(user.shopInfo?.offerings || \"\");\n  const [shopName, setShopName] = useState(user.shopInfo?.name || \"\");\n  const [phone, setPhone] = useState(user.shopInfo?.phone || \"\");\n  const [logo, setLogo] = useState(\n    user.shopInfo?.logo ? [user.shopInfo.logo] : []\n  );\n  const submit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    const [logoLink] = (await UploadFiles({ files: logo, setMsg })) || [];\n    updateProfileInfo({\n      \"shopInfo.offerings\": offerings,\n      \"shopInfo.name\": shopName,\n      \"shopInfo.phone\": phone,\n      \"shopInfo.logo\": logoLink,\n    })\n      .then(({ user: newUser }) => {\n        setLoading(false);\n        if (newUser) {\n          setUser((prev) => ({ ...prev, shopInfo: newUser.shopInfo }));\n          setOpen(false);\n        }\n      })\n      .catch((err) => {\n        setLoading(false);\n        console.log(err);\n        setMsg(\n          <>\n            <button onClick={() => setMsg(null)}>Okay</button>\n            <div>\n              <Err_svg />\n              <h4>Could not upadte GST Information. Make sure you're online</h4>\n            </div>\n          </>\n        );\n      });\n  };\n  return (\n    <form onSubmit={submit}>\n      <section>\n        <label>We sell</label>\n        <Combobox\n          defaultValue={offerings}\n          options={[\n            { label: \"Product\", value: \"product\" },\n            { label: \"Service\", value: \"service\" },\n            { label: \"Both\", value: \"product,service\" },\n          ]}\n          onChange={(option) => setOfferings(option.value)}\n        />\n      </section>\n      <section>\n        <label>Shop Name</label>\n        <input\n          required={true}\n          type=\"text\"\n          value={shopName}\n          onChange={(e) => setShopName(e.target.value)}\n        />\n      </section>\n      <section>\n        <label>Logo</label>\n        <FileInput prefill={logo} onChange={(files) => setLogo(files)} />\n      </section>\n      <section>\n        <label>Phone</label>\n        <input\n          required={true}\n          type=\"text\"\n          value={phone}\n          onChange={(e) => setPhone(e.target.value)}\n        />\n      </section>\n      <section className=\"btns\">\n        <button>Save Changes</button>\n        <button type=\"button\" onClick={() => setOpen(false)}>\n          Cancel\n        </button>\n      </section>\n    </form>\n  );\n};\nconst GstEditForm = ({ setOpen, setMsg }) => {\n  const { user, setUser } = useContext(SiteContext);\n  const [loading, setLoading] = useState(false);\n  const [gstFiles, setGstFiles] = useState([]);\n  const [gstReg, setGstReg] = useState(user.gst?.detail?.reg);\n  const [amount, setAmount] = useState(user.gst?.amount);\n  const submit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    const fileLinks = (await UploadFiles({ files: gstFiles, setMsg })) || [];\n    updateProfileInfo({\n      \"gst.detail.files\": fileLinks,\n      \"gst.detail.reg\": gstReg,\n      \"gst.amount\": amount,\n    })\n      .then(({ user: newUser }) => {\n        setLoading(false);\n        if (newUser) {\n          setUser((prev) => ({ ...prev, gst: newUser.gst }));\n          setOpen(false);\n        }\n      })\n      .catch((err) => {\n        setLoading(false);\n        console.log(err);\n        setMsg(\n          <>\n            <button onClick={() => setMsg(null)}>Okay</button>\n            <div>\n              <Err_svg />\n              <h4>Could not upadte GST Information. Make sure you're online</h4>\n            </div>\n          </>\n        );\n      });\n  };\n  return (\n    <form onSubmit={submit}>\n      <section>\n        <label>GST Registration Number</label>\n        <input\n          required={true}\n          type=\"text\"\n          defaultValue={user.gst?.detail.reg}\n          name=\"gst.detail.reg\"\n          onChange={(e) => setGstReg(e.target.value)}\n        />\n      </section>\n      <section>\n        <label>GST percentage (%)</label>\n        <NumberInput\n          required={true}\n          defaultValue={user.gst?.amount}\n          name=\"gst.detail.reg\"\n          onChange={(e) => setAmount(e.target.value)}\n        />\n      </section>\n      <section>\n        <label>Upload files for verification</label>\n        <FileInput\n          multiple={true}\n          prefill={user.gst?.detail?.files}\n          name=\"gst.detail.files\"\n          onChange={(files) => setGstFiles(files)}\n        />\n      </section>\n      <section className=\"btns\">\n        <button>Save Changes</button>\n        <button type=\"button\" onClick={() => setOpen(false)}>\n          Cancel\n        </button>\n      </section>\n    </form>\n  );\n};\nconst ShippingEditForm = ({ setOpen, setMsg }) => {\n  const { user, setUser } = useContext(SiteContext);\n  const [shippingCost, setShippingCost] = useState(\n    user.shopInfo?.shippingCost || 0\n  );\n  const [deliveryWithin, setDeliveryWithin] = useState(\n    user.shopInfo?.deliveryWithin\n  );\n  const [refundable, setRefundable] = useState(\n    user.shopInfo?.refundable || null\n  );\n  const submit = (e) => {\n    e.preventDefault();\n    updateProfileInfo({\n      \"shopInfo.shippingCost\": shippingCost,\n      \"shopInfo.deliveryWithin\": deliveryWithin,\n      \"shopInfo.refundable\": refundable,\n    })\n      .then(({ user: newUser }) => {\n        if (newUser) {\n          setUser((prev) => ({ ...prev, shopInfo: newUser.shopInfo }));\n          setOpen(false);\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        setMsg(\n          <>\n            <button onClick={() => setMsg(null)}>Okay</button>\n            <div>\n              <Err_svg />\n              <h4>Could not upadte Terms. Make sure you're online</h4>\n            </div>\n          </>\n        );\n      });\n  };\n  return (\n    <form onSubmit={submit}>\n      <section>\n        <label>Shipping Cost </label>\n        <NumberInput\n          required={true}\n          defaultValue={shippingCost}\n          name=\"shippingCost\"\n          onChange={(e) => setShippingCost(e.target.value)}\n        />\n      </section>\n      <section>\n        <label>Delivery Within (days)</label>\n        <NumberInput\n          required={true}\n          defaultValue={deliveryWithin}\n          name=\"deliveryWithin\"\n          min={1}\n          step=\"0\"\n          placeholder=\"ie. 4 Days\"\n          onChange={(e) => setDeliveryWithin(e.target.value)}\n        />\n      </section>\n      <section>\n        <label>Refundable</label>\n        <Combobox\n          required={true}\n          defaultValue={0}\n          onChange={(e) => setRefundable(e.value)}\n          options={[\n            { label: \"No\", value: null },\n            {\n              label: \"Upto 24 Hours After Delivery\",\n              value: \"Upto 24 Hours After Delivery\",\n            },\n            {\n              label: \"Upto 7 Days After Delivery\",\n              value: \"Upto 7 Days After Delivery\",\n            },\n            {\n              label: \"Upto 15 Days After Delivery\",\n              value: \"Upto 15 Days After Delivery\",\n            },\n          ]}\n        />\n      </section>\n      <section className=\"btns\">\n        <button>Save Changes</button>\n        <button type=\"button\" onClick={() => setOpen(false)}>\n          Cancel\n        </button>\n      </section>\n    </form>\n  );\n};\nconst TermsEditForm = ({ setOpen, termsEdit, setMsg }) => {\n  const { user, setUser } = useContext(SiteContext);\n  const [terms, setTerms] = useState(user.shopInfo?.terms || []);\n  const [addTerm, setAddTerm] = useState(\"\");\n  const submit = (e) => {\n    e.preventDefault();\n    updateProfileInfo({\n      \"shopInfo.terms\": terms,\n    })\n      .then(({ user: newUser }) => {\n        if (newUser) {\n          setUser((prev) => ({ ...prev, shopInfo: newUser.shopInfo }));\n          setOpen(false);\n          setTerms(newUser.shopInfo?.terms);\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        setMsg(\n          <>\n            <button onClick={() => setMsg(null)}>Okay</button>\n            <div>\n              <Err_svg />\n              <h4>Could not upadte Terms. Make sure you're online</h4>\n            </div>\n          </>\n        );\n      });\n  };\n  useEffect(() => {\n    if (termsEdit) {\n      if (terms.length === 0) {\n        setTerms(defaultTerms);\n      }\n    } else {\n      setTerms(user.shopInfo?.terms || []);\n    }\n  }, [termsEdit]);\n  return (\n    <form onSubmit={submit}>\n      <ul>\n        {terms.map((item, i) => (\n          <li key={i}>\n            {item}{\" \"}\n            {termsEdit && (\n              <button\n                type=\"button\"\n                onClick={() =>\n                  setTerms((prev) => prev.filter((term) => term !== item))\n                }\n              >\n                <X_svg />\n              </button>\n            )}\n          </li>\n        ))}\n        {terms.length === 0 && <li>No terms has been added.</li>}\n      </ul>\n      {termsEdit && (\n        <>\n          <section className=\"addTerm\">\n            <TextareaAutosize\n              value={addTerm}\n              placeholder=\"Add auditional term\"\n              onChange={(e) => setAddTerm(e.target.value)}\n            />\n            <button\n              type=\"button\"\n              onClick={() => {\n                setTerms((prev) =>\n                  addTerm\n                    ? [...prev.filter((term) => term !== addTerm), addTerm]\n                    : prev\n                );\n                setAddTerm(\"\");\n              }}\n            >\n              Add Term\n            </button>\n          </section>\n          <section className=\"btns\">\n            <button>Save Changes</button>\n            <button\n              type=\"button\"\n              onClick={() => {\n                setOpen(false);\n                setTerms(\n                  user.shopInfo?.terms?.length\n                    ? user.shopInfo.terms\n                    : defaultTerms\n                );\n              }}\n            >\n              Cancel\n            </button>\n          </section>\n        </>\n      )}\n    </form>\n  );\n};\nconst PaymentMethodForm = ({ prefill, onSuccess, setMsg, setOpen }) => {\n  const { setUser } = useContext(SiteContext);\n  const [method, setMethod] = useState(\n    prefill?.bank ? \"bankAccount\" : prefill || \"\"\n  );\n  const [bank, setBank] = useState(prefill?.bank || \"\");\n  const [name, setName] = useState(prefill?.name || \"\");\n  const [ifsc, setIfsc] = useState(prefill?.ifsc || \"\");\n  const [city, setCity] = useState(prefill?.city || \"\");\n  const [type, setType] = useState(prefill?.accountType || \"\");\n  const [accountNumber, setAccountNumber] = useState(\n    prefill?.accountNumber || \"\"\n  );\n  const submit = (e) => {\n    e.preventDefault();\n    updateProfileInfo({\n      \"shopInfo.paymentMethod\":\n        method === \"bankAccount\"\n          ? {\n              name,\n              bank,\n              city,\n              accountType: type,\n              ifsc,\n              accountNumber,\n            }\n          : method,\n    })\n      .then(({ user: newUser }) => {\n        if (newUser) {\n          setUser((prev) => ({\n            ...prev,\n            shopInfo: newUser.shopInfo,\n          }));\n          setOpen(false);\n        } else {\n          setMsg(\n            <>\n              <button onClick={() => setMsg(null)}>Okay</button>\n              <div>\n                <Err_svg />\n                <h4>Could not update payment method. Please try again.</h4>\n              </div>\n            </>\n          );\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        setMsg(\n          <>\n            <button onClick={() => setMsg(null)}>Okay</button>\n            <div>\n              <Err_svg />\n              <h4>\n                Could not updated payment method. Make sure you're online.\n              </h4>\n            </div>\n          </>\n        );\n      });\n  };\n  return (\n    <form className=\"paymentMethodForm netBanking\" onSubmit={submit}>\n      <section>\n        <label></label>\n        <Combobox\n          defaultValue={method}\n          options={[\n            { label: \"Check\", value: \"check\" },\n            { label: \"Demand Draft\", value: \"demandDraft\" },\n            {\n              label: \"Directly in your bank account\",\n              value: \"bankAccount\",\n            },\n          ]}\n          onChange={(op) => setMethod(op.value)}\n        />\n      </section>\n      {method === \"bankAccount\" && (\n        <section className=\"inputs\">\n          <input\n            type=\"text\"\n            name=\"name\"\n            placeholder=\"Full name\"\n            value={name}\n            onChange={(e) => setName(e.target.value)}\n            required={true}\n          />\n          <input\n            type=\"text\"\n            name=\"bank\"\n            placeholder=\"Bank\"\n            value={bank}\n            onChange={(e) => setBank(e.target.value)}\n            required={true}\n          />\n          <input\n            type=\"text\"\n            name=\"city\"\n            placeholder=\"City\"\n            value={city}\n            onChange={(e) => setCity(e.target.value)}\n            required={true}\n          />\n          <input\n            type=\"text\"\n            name=\"type\"\n            placeholder=\"Account type ie. Savings / Current\"\n            value={type}\n            onChange={(e) => setType(e.target.value)}\n            required={true}\n          />\n          <input\n            type=\"text\"\n            name=\"accountNumber\"\n            placeholder=\"Account Number\"\n            value={accountNumber}\n            onChange={(e) => setAccountNumber(e.target.value)}\n            required={true}\n          />\n          <input\n            type=\"text\"\n            name=\"ifsc\"\n            placeholder=\"IFSC\"\n            value={ifsc}\n            onChange={(e) => setIfsc(e.target.value)}\n            required={true}\n          />\n        </section>\n      )}\n      <section className=\"btns\">\n        <button type=\"submit\">Save Changes</button>\n        <button type=\"button\" onClick={() => setOpen(false)}>\n          Cancel\n        </button>\n      </section>\n    </form>\n  );\n};\n\nexport default MyShop;\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nvar isSafari = exports.isSafari = function isSafari() {\n  return (/^((?!chrome|android).)*safari/i.test(navigator.userAgent)\n  );\n};\n\nvar isJsons = exports.isJsons = function isJsons(array) {\n  return Array.isArray(array) && array.every(function (row) {\n    return (typeof row === \"undefined\" ? \"undefined\" : _typeof(row)) === 'object' && !(row instanceof Array);\n  });\n};\n\nvar isArrays = exports.isArrays = function isArrays(array) {\n  return Array.isArray(array) && array.every(function (row) {\n    return Array.isArray(row);\n  });\n};\n\nvar jsonsHeaders = exports.jsonsHeaders = function jsonsHeaders(array) {\n  return Array.from(array.map(function (json) {\n    return Object.keys(json);\n  }).reduce(function (a, b) {\n    return new Set([].concat(_toConsumableArray(a), _toConsumableArray(b)));\n  }, []));\n};\n\nvar jsons2arrays = exports.jsons2arrays = function jsons2arrays(jsons, headers) {\n  headers = headers || jsonsHeaders(jsons);\n\n  var headerLabels = headers;\n  var headerKeys = headers;\n  if (isJsons(headers)) {\n    headerLabels = headers.map(function (header) {\n      return header.label;\n    });\n    headerKeys = headers.map(function (header) {\n      return header.key;\n    });\n  }\n\n  var data = jsons.map(function (object) {\n    return headerKeys.map(function (header) {\n      return getHeaderValue(header, object);\n    });\n  });\n  return [headerLabels].concat(_toConsumableArray(data));\n};\n\nvar getHeaderValue = exports.getHeaderValue = function getHeaderValue(property, obj) {\n  var foundValue = property.replace(/\\[([^\\]]+)]/g, \".$1\").split(\".\").reduce(function (o, p, i, arr) {\n    if (o[p] === undefined) {\n      arr.splice(1);\n    } else {\n      return o[p];\n    }\n  }, obj);\n\n  return foundValue === undefined ? property in obj ? obj[property] : '' : foundValue;\n};\n\nvar elementOrEmpty = exports.elementOrEmpty = function elementOrEmpty(element) {\n  return element || element === 0 ? element : '';\n};\n\nvar joiner = exports.joiner = function joiner(data) {\n  var separator = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : ',';\n  var enclosingCharacter = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '\"';\n\n  return data.filter(function (e) {\n    return e;\n  }).map(function (row) {\n    return row.map(function (element) {\n      return elementOrEmpty(element);\n    }).map(function (column) {\n      return \"\" + enclosingCharacter + column + enclosingCharacter;\n    }).join(separator);\n  }).join(\"\\n\");\n};\n\nvar arrays2csv = exports.arrays2csv = function arrays2csv(data, headers, separator, enclosingCharacter) {\n  return joiner(headers ? [headers].concat(_toConsumableArray(data)) : data, separator, enclosingCharacter);\n};\n\nvar jsons2csv = exports.jsons2csv = function jsons2csv(data, headers, separator, enclosingCharacter) {\n  return joiner(jsons2arrays(data, headers), separator, enclosingCharacter);\n};\n\nvar string2csv = exports.string2csv = function string2csv(data, headers, separator, enclosingCharacter) {\n  return headers ? headers.join(separator) + \"\\n\" + data : data;\n};\n\nvar toCSV = exports.toCSV = function toCSV(data, headers, separator, enclosingCharacter) {\n  if (isJsons(data)) return jsons2csv(data, headers, separator, enclosingCharacter);\n  if (isArrays(data)) return arrays2csv(data, headers, separator, enclosingCharacter);\n  if (typeof data === 'string') return string2csv(data, headers, separator);\n  throw new TypeError(\"Data should be a \\\"String\\\", \\\"Array of arrays\\\" OR \\\"Array of objects\\\" \");\n};\n\nvar buildURI = exports.buildURI = function buildURI(data, uFEFF, headers, separator, enclosingCharacter) {\n  var csv = toCSV(data, headers, separator, enclosingCharacter);\n  var type = isSafari() ? 'application/csv' : 'text/csv';\n  var blob = new Blob([uFEFF ? \"\\uFEFF\" : '', csv], { type: type });\n  var dataURI = \"data:\" + type + \";charset=utf-8,\" + (uFEFF ? \"\\uFEFF\" : '') + csv;\n\n  var URL = window.URL || window.webkitURL;\n\n  return typeof URL.createObjectURL === 'undefined' ? dataURI : URL.createObjectURL(blob);\n};","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.PropsNotForwarded = exports.defaultProps = exports.propTypes = undefined;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar propTypes = exports.propTypes = {\n  data: (0, _propTypes.oneOfType)([_propTypes.string, _propTypes.array]).isRequired,\n  headers: _propTypes.array,\n  target: _propTypes.string,\n  separator: _propTypes.string,\n  filename: _propTypes.string,\n  uFEFF: _propTypes.bool,\n  onClick: _propTypes.func,\n  asyncOnClick: _propTypes.bool\n};\n\nvar defaultProps = exports.defaultProps = {\n  separator: ',',\n  filename: 'generatedBy_react-csv.csv',\n  uFEFF: true,\n  asyncOnClick: false\n};\n\nvar PropsNotForwarded = exports.PropsNotForwarded = ['data', 'headers'];","module.exports = require('./lib/index.js');\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CSVLink = exports.CSVDownload = undefined;\n\nvar _Download = require('./components/Download');\n\nvar _Download2 = _interopRequireDefault(_Download);\n\nvar _Link = require('./components/Link');\n\nvar _Link2 = _interopRequireDefault(_Link);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar CSVDownload = exports.CSVDownload = _Download2.default;\nvar CSVLink = exports.CSVLink = _Link2.default;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _core = require('../core');\n\nvar _metaProps = require('../metaProps');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar defaultProps = {\n  target: '_blank'\n};\n\nvar CSVDownload = function (_React$Component) {\n  _inherits(CSVDownload, _React$Component);\n\n  function CSVDownload(props) {\n    _classCallCheck(this, CSVDownload);\n\n    var _this = _possibleConstructorReturn(this, (CSVDownload.__proto__ || Object.getPrototypeOf(CSVDownload)).call(this, props));\n\n    _this.state = {};\n    return _this;\n  }\n\n  _createClass(CSVDownload, [{\n    key: 'buildURI',\n    value: function buildURI() {\n      return _core.buildURI.apply(undefined, arguments);\n    }\n  }, {\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      var _props = this.props,\n          data = _props.data,\n          headers = _props.headers,\n          separator = _props.separator,\n          enclosingCharacter = _props.enclosingCharacter,\n          uFEFF = _props.uFEFF,\n          target = _props.target,\n          specs = _props.specs,\n          replace = _props.replace;\n\n      this.state.page = window.open(this.buildURI(data, uFEFF, headers, separator, enclosingCharacter), target, specs, replace);\n    }\n  }, {\n    key: 'getWindow',\n    value: function getWindow() {\n      return this.state.page;\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      return null;\n    }\n  }]);\n\n  return CSVDownload;\n}(_react2.default.Component);\n\nCSVDownload.defaultProps = Object.assign(_metaProps.defaultProps, defaultProps);\nCSVDownload.propTypes = _metaProps.propTypes;\nexports.default = CSVDownload;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _core = require('../core');\n\nvar _metaProps = require('../metaProps');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar CSVLink = function (_React$Component) {\n  _inherits(CSVLink, _React$Component);\n\n  function CSVLink(props) {\n    _classCallCheck(this, CSVLink);\n\n    var _this = _possibleConstructorReturn(this, (CSVLink.__proto__ || Object.getPrototypeOf(CSVLink)).call(this, props));\n\n    _this.buildURI = _this.buildURI.bind(_this);\n    _this.state = { href: '' };\n    return _this;\n  }\n\n  _createClass(CSVLink, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      var _props = this.props,\n          data = _props.data,\n          headers = _props.headers,\n          separator = _props.separator,\n          uFEFF = _props.uFEFF,\n          enclosingCharacter = _props.enclosingCharacter;\n\n      this.setState({ href: this.buildURI(data, uFEFF, headers, separator, enclosingCharacter) });\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate(prevProps) {\n      if (this.props !== prevProps) {\n        var _props2 = this.props,\n            data = _props2.data,\n            headers = _props2.headers,\n            separator = _props2.separator,\n            uFEFF = _props2.uFEFF;\n\n        this.setState({ href: this.buildURI(data, uFEFF, headers, separator) });\n      }\n    }\n  }, {\n    key: 'buildURI',\n    value: function buildURI() {\n      return _core.buildURI.apply(undefined, arguments);\n    }\n  }, {\n    key: 'handleLegacy',\n    value: function handleLegacy(event) {\n      if (window.navigator.msSaveOrOpenBlob) {\n        event.preventDefault();\n\n        var _props3 = this.props,\n            data = _props3.data,\n            headers = _props3.headers,\n            separator = _props3.separator,\n            filename = _props3.filename,\n            enclosingCharacter = _props3.enclosingCharacter,\n            uFEFF = _props3.uFEFF;\n\n\n        var blob = new Blob([uFEFF ? '\\uFEFF' : '', (0, _core.toCSV)(data, headers, separator, enclosingCharacter)]);\n        window.navigator.msSaveBlob(blob, filename);\n\n        return false;\n      }\n    }\n  }, {\n    key: 'handleAsyncClick',\n    value: function handleAsyncClick(event) {\n      var _this2 = this;\n\n      var done = function done(proceed) {\n        if (proceed === false) {\n          event.preventDefault();\n          return;\n        }\n        _this2.handleLegacy(event);\n      };\n\n      this.props.onClick(event, done);\n    }\n  }, {\n    key: 'handleSyncClick',\n    value: function handleSyncClick(event) {\n      var stopEvent = this.props.onClick(event) === false;\n      if (stopEvent) {\n        event.preventDefault();\n        return;\n      }\n      this.handleLegacy(event);\n    }\n  }, {\n    key: 'handleClick',\n    value: function handleClick() {\n      var _this3 = this;\n\n      return function (event) {\n        if (typeof _this3.props.onClick === 'function') {\n          return _this3.props.asyncOnClick ? _this3.handleAsyncClick(event) : _this3.handleSyncClick(event);\n        }\n        _this3.handleLegacy(event);\n      };\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this4 = this;\n\n      var _props4 = this.props,\n          data = _props4.data,\n          headers = _props4.headers,\n          separator = _props4.separator,\n          filename = _props4.filename,\n          uFEFF = _props4.uFEFF,\n          children = _props4.children,\n          onClick = _props4.onClick,\n          asyncOnClick = _props4.asyncOnClick,\n          enclosingCharacter = _props4.enclosingCharacter,\n          rest = _objectWithoutProperties(_props4, ['data', 'headers', 'separator', 'filename', 'uFEFF', 'children', 'onClick', 'asyncOnClick', 'enclosingCharacter']);\n\n      return _react2.default.createElement(\n        'a',\n        _extends({\n          download: filename\n        }, rest, {\n          ref: function ref(link) {\n            return _this4.link = link;\n          },\n          target: '_self',\n          href: this.state.href,\n          onClick: this.handleClick()\n        }),\n        children\n      );\n    }\n  }]);\n\n  return CSVLink;\n}(_react2.default.Component);\n\nCSVLink.defaultProps = _metaProps.defaultProps;\nCSVLink.propTypes = _metaProps.propTypes;\nexports.default = CSVLink;"],"sourceRoot":""}